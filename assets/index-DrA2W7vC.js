(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function a(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=a(s);fetch(s.href,o)}})();function getDefaultExportFromCjs(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function getAugmentedNamespace(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var r=t.default;if(typeof r=="function"){var a=function n(){var s=!1;try{s=this instanceof n}catch{}return s?Reflect.construct(r,arguments,this.constructor):r.apply(this,arguments)};a.prototype=r.prototype}else a={};return Object.defineProperty(a,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var s=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(a,n,s.get?s:{enumerable:!0,get:function(){return t[n]}})}),a}var jsxRuntime={exports:{}},reactJsxRuntime_production={};var hasRequiredReactJsxRuntime_production;function requireReactJsxRuntime_production(){if(hasRequiredReactJsxRuntime_production)return reactJsxRuntime_production;hasRequiredReactJsxRuntime_production=1;var t=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function a(n,s,o){var l=null;if(o!==void 0&&(l=""+o),s.key!==void 0&&(l=""+s.key),"key"in s){o={};for(var u in s)u!=="key"&&(o[u]=s[u])}else o=s;return s=o.ref,{$$typeof:t,type:n,key:l,ref:s!==void 0?s:null,props:o}}return reactJsxRuntime_production.Fragment=r,reactJsxRuntime_production.jsx=a,reactJsxRuntime_production.jsxs=a,reactJsxRuntime_production}var hasRequiredJsxRuntime;function requireJsxRuntime(){return hasRequiredJsxRuntime||(hasRequiredJsxRuntime=1,jsxRuntime.exports=requireReactJsxRuntime_production()),jsxRuntime.exports}var jsxRuntimeExports=requireJsxRuntime(),react={exports:{}},react_production={};var hasRequiredReact_production;function requireReact_production(){if(hasRequiredReact_production)return react_production;hasRequiredReact_production=1;var t=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),d=Symbol.for("react.activity"),p=Symbol.iterator;function v(j){return j===null||typeof j!="object"?null:(j=p&&j[p]||j["@@iterator"],typeof j=="function"?j:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,_={};function N(j,V,L){this.props=j,this.context=V,this.refs=_,this.updater=L||y}N.prototype.isReactComponent={},N.prototype.setState=function(j,V){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,V,"setState")},N.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function M(){}M.prototype=N.prototype;function C(j,V,L){this.props=j,this.context=V,this.refs=_,this.updater=L||y}var $=C.prototype=new M;$.constructor=C,b($,N.prototype),$.isPureReactComponent=!0;var w=Array.isArray;function A(){}var X={H:null,A:null,T:null,S:null},O=Object.prototype.hasOwnProperty;function G(j,V,L){var ae=L.ref;return{$$typeof:t,type:j,key:V,ref:ae!==void 0?ae:null,props:L}}function R(j,V){return G(j.type,V,j.props)}function B(j){return typeof j=="object"&&j!==null&&j.$$typeof===t}function F(j){var V={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(L){return V[L]})}var U=/\/+/g;function q(j,V){return typeof j=="object"&&j!==null&&j.key!=null?F(""+j.key):V.toString(36)}function ee(j){switch(j.status){case"fulfilled":return j.value;case"rejected":throw j.reason;default:switch(typeof j.status=="string"?j.then(A,A):(j.status="pending",j.then(function(V){j.status==="pending"&&(j.status="fulfilled",j.value=V)},function(V){j.status==="pending"&&(j.status="rejected",j.reason=V)})),j.status){case"fulfilled":return j.value;case"rejected":throw j.reason}}throw j}function z(j,V,L,ae,W){var ve=typeof j;(ve==="undefined"||ve==="boolean")&&(j=null);var de=!1;if(j===null)de=!0;else switch(ve){case"bigint":case"string":case"number":de=!0;break;case"object":switch(j.$$typeof){case t:case r:de=!0;break;case f:return de=j._init,z(de(j._payload),V,L,ae,W)}}if(de)return W=W(j),de=ae===""?"."+q(j,0):ae,w(W)?(L="",de!=null&&(L=de.replace(U,"$&/")+"/"),z(W,V,L,"",function(ce){return ce})):W!=null&&(B(W)&&(W=R(W,L+(W.key==null||j&&j.key===W.key?"":(""+W.key).replace(U,"$&/")+"/")+de)),V.push(W)),1;de=0;var se=ae===""?".":ae+":";if(w(j))for(var ie=0;ie<j.length;ie++)ae=j[ie],ve=se+q(ae,ie),de+=z(ae,V,L,ve,W);else if(ie=v(j),typeof ie=="function")for(j=ie.call(j),ie=0;!(ae=j.next()).done;)ae=ae.value,ve=se+q(ae,ie++),de+=z(ae,V,L,ve,W);else if(ve==="object"){if(typeof j.then=="function")return z(ee(j),V,L,ae,W);throw V=String(j),Error("Objects are not valid as a React child (found: "+(V==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":V)+"). If you meant to render a collection of children, use an array instead.")}return de}function Y(j,V,L){if(j==null)return j;var ae=[],W=0;return z(j,ae,"","",function(ve){return V.call(L,ve,W++)}),ae}function K(j){if(j._status===-1){var V=j._result;V=V(),V.then(function(L){(j._status===0||j._status===-1)&&(j._status=1,j._result=L)},function(L){(j._status===0||j._status===-1)&&(j._status=2,j._result=L)}),j._status===-1&&(j._status=0,j._result=V)}if(j._status===1)return j._result.default;throw j._result}var Z=typeof reportError=="function"?reportError:function(j){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var V=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof j=="object"&&j!==null&&typeof j.message=="string"?String(j.message):String(j),error:j});if(!window.dispatchEvent(V))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",j);return}console.error(j)},ne={map:Y,forEach:function(j,V,L){Y(j,function(){V.apply(this,arguments)},L)},count:function(j){var V=0;return Y(j,function(){V++}),V},toArray:function(j){return Y(j,function(V){return V})||[]},only:function(j){if(!B(j))throw Error("React.Children.only expected to receive a single React element child.");return j}};return react_production.Activity=d,react_production.Children=ne,react_production.Component=N,react_production.Fragment=a,react_production.Profiler=s,react_production.PureComponent=C,react_production.StrictMode=n,react_production.Suspense=h,react_production.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=X,react_production.__COMPILER_RUNTIME={__proto__:null,c:function(j){return X.H.useMemoCache(j)}},react_production.cache=function(j){return function(){return j.apply(null,arguments)}},react_production.cacheSignal=function(){return null},react_production.cloneElement=function(j,V,L){if(j==null)throw Error("The argument must be a React element, but you passed "+j+".");var ae=b({},j.props),W=j.key;if(V!=null)for(ve in V.key!==void 0&&(W=""+V.key),V)!O.call(V,ve)||ve==="key"||ve==="__self"||ve==="__source"||ve==="ref"&&V.ref===void 0||(ae[ve]=V[ve]);var ve=arguments.length-2;if(ve===1)ae.children=L;else if(1<ve){for(var de=Array(ve),se=0;se<ve;se++)de[se]=arguments[se+2];ae.children=de}return G(j.type,W,ae)},react_production.createContext=function(j){return j={$$typeof:l,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null},j.Provider=j,j.Consumer={$$typeof:o,_context:j},j},react_production.createElement=function(j,V,L){var ae,W={},ve=null;if(V!=null)for(ae in V.key!==void 0&&(ve=""+V.key),V)O.call(V,ae)&&ae!=="key"&&ae!=="__self"&&ae!=="__source"&&(W[ae]=V[ae]);var de=arguments.length-2;if(de===1)W.children=L;else if(1<de){for(var se=Array(de),ie=0;ie<de;ie++)se[ie]=arguments[ie+2];W.children=se}if(j&&j.defaultProps)for(ae in de=j.defaultProps,de)W[ae]===void 0&&(W[ae]=de[ae]);return G(j,ve,W)},react_production.createRef=function(){return{current:null}},react_production.forwardRef=function(j){return{$$typeof:u,render:j}},react_production.isValidElement=B,react_production.lazy=function(j){return{$$typeof:f,_payload:{_status:-1,_result:j},_init:K}},react_production.memo=function(j,V){return{$$typeof:c,type:j,compare:V===void 0?null:V}},react_production.startTransition=function(j){var V=X.T,L={};X.T=L;try{var ae=j(),W=X.S;W!==null&&W(L,ae),typeof ae=="object"&&ae!==null&&typeof ae.then=="function"&&ae.then(A,Z)}catch(ve){Z(ve)}finally{V!==null&&L.types!==null&&(V.types=L.types),X.T=V}},react_production.unstable_useCacheRefresh=function(){return X.H.useCacheRefresh()},react_production.use=function(j){return X.H.use(j)},react_production.useActionState=function(j,V,L){return X.H.useActionState(j,V,L)},react_production.useCallback=function(j,V){return X.H.useCallback(j,V)},react_production.useContext=function(j){return X.H.useContext(j)},react_production.useDebugValue=function(){},react_production.useDeferredValue=function(j,V){return X.H.useDeferredValue(j,V)},react_production.useEffect=function(j,V){return X.H.useEffect(j,V)},react_production.useEffectEvent=function(j){return X.H.useEffectEvent(j)},react_production.useId=function(){return X.H.useId()},react_production.useImperativeHandle=function(j,V,L){return X.H.useImperativeHandle(j,V,L)},react_production.useInsertionEffect=function(j,V){return X.H.useInsertionEffect(j,V)},react_production.useLayoutEffect=function(j,V){return X.H.useLayoutEffect(j,V)},react_production.useMemo=function(j,V){return X.H.useMemo(j,V)},react_production.useOptimistic=function(j,V){return X.H.useOptimistic(j,V)},react_production.useReducer=function(j,V,L){return X.H.useReducer(j,V,L)},react_production.useRef=function(j){return X.H.useRef(j)},react_production.useState=function(j){return X.H.useState(j)},react_production.useSyncExternalStore=function(j,V,L){return X.H.useSyncExternalStore(j,V,L)},react_production.useTransition=function(){return X.H.useTransition()},react_production.version="19.2.3",react_production}var hasRequiredReact;function requireReact(){return hasRequiredReact||(hasRequiredReact=1,react.exports=requireReact_production()),react.exports}var reactExports=requireReact(),client={exports:{}},reactDomClient_production={},scheduler={exports:{}},scheduler_production={};var hasRequiredScheduler_production;function requireScheduler_production(){return hasRequiredScheduler_production||(hasRequiredScheduler_production=1,(function(t){function r(z,Y){var K=z.length;z.push(Y);e:for(;0<K;){var Z=K-1>>>1,ne=z[Z];if(0<s(ne,Y))z[Z]=Y,z[K]=ne,K=Z;else break e}}function a(z){return z.length===0?null:z[0]}function n(z){if(z.length===0)return null;var Y=z[0],K=z.pop();if(K!==Y){z[0]=K;e:for(var Z=0,ne=z.length,j=ne>>>1;Z<j;){var V=2*(Z+1)-1,L=z[V],ae=V+1,W=z[ae];if(0>s(L,K))ae<ne&&0>s(W,L)?(z[Z]=W,z[ae]=K,Z=ae):(z[Z]=L,z[V]=K,Z=V);else if(ae<ne&&0>s(W,K))z[Z]=W,z[ae]=K,Z=ae;else break e}}return Y}function s(z,Y){var K=z.sortIndex-Y.sortIndex;return K!==0?K:z.id-Y.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();t.unstable_now=function(){return l.now()-u}}var h=[],c=[],f=1,d=null,p=3,v=!1,y=!1,b=!1,_=!1,N=typeof setTimeout=="function"?setTimeout:null,M=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function $(z){for(var Y=a(c);Y!==null;){if(Y.callback===null)n(c);else if(Y.startTime<=z)n(c),Y.sortIndex=Y.expirationTime,r(h,Y);else break;Y=a(c)}}function w(z){if(b=!1,$(z),!y)if(a(h)!==null)y=!0,A||(A=!0,F());else{var Y=a(c);Y!==null&&ee(w,Y.startTime-z)}}var A=!1,X=-1,O=5,G=-1;function R(){return _?!0:!(t.unstable_now()-G<O)}function B(){if(_=!1,A){var z=t.unstable_now();G=z;var Y=!0;try{e:{y=!1,b&&(b=!1,M(X),X=-1),v=!0;var K=p;try{t:{for($(z),d=a(h);d!==null&&!(d.expirationTime>z&&R());){var Z=d.callback;if(typeof Z=="function"){d.callback=null,p=d.priorityLevel;var ne=Z(d.expirationTime<=z);if(z=t.unstable_now(),typeof ne=="function"){d.callback=ne,$(z),Y=!0;break t}d===a(h)&&n(h),$(z)}else n(h);d=a(h)}if(d!==null)Y=!0;else{var j=a(c);j!==null&&ee(w,j.startTime-z),Y=!1}}break e}finally{d=null,p=K,v=!1}Y=void 0}}finally{Y?F():A=!1}}}var F;if(typeof C=="function")F=function(){C(B)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,q=U.port2;U.port1.onmessage=B,F=function(){q.postMessage(null)}}else F=function(){N(B,0)};function ee(z,Y){X=N(function(){z(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_next=function(z){switch(p){case 1:case 2:case 3:var Y=3;break;default:Y=p}var K=p;p=Y;try{return z()}finally{p=K}},t.unstable_requestPaint=function(){_=!0},t.unstable_runWithPriority=function(z,Y){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var K=p;p=z;try{return Y()}finally{p=K}},t.unstable_scheduleCallback=function(z,Y,K){var Z=t.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?Z+K:Z):K=Z,z){case 1:var ne=-1;break;case 2:ne=250;break;case 5:ne=1073741823;break;case 4:ne=1e4;break;default:ne=5e3}return ne=K+ne,z={id:f++,callback:Y,priorityLevel:z,startTime:K,expirationTime:ne,sortIndex:-1},K>Z?(z.sortIndex=K,r(c,z),a(h)===null&&z===a(c)&&(b?(M(X),X=-1):b=!0,ee(w,K-Z))):(z.sortIndex=ne,r(h,z),y||v||(y=!0,A||(A=!0,F()))),z},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(z){var Y=p;return function(){var K=p;p=Y;try{return z.apply(this,arguments)}finally{p=K}}}})(scheduler_production)),scheduler_production}var hasRequiredScheduler;function requireScheduler(){return hasRequiredScheduler||(hasRequiredScheduler=1,scheduler.exports=requireScheduler_production()),scheduler.exports}var reactDom={exports:{}},reactDom_production={};var hasRequiredReactDom_production;function requireReactDom_production(){if(hasRequiredReactDom_production)return reactDom_production;hasRequiredReactDom_production=1;var t=requireReact();function r(h){var c="https://react.dev/errors/"+h;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)c+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+h+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(){}var n={d:{f:a,r:function(){throw Error(r(522))},D:a,C:a,L:a,m:a,X:a,S:a,M:a},p:0,findDOMNode:null},s=Symbol.for("react.portal");function o(h,c,f){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:d==null?null:""+d,children:h,containerInfo:c,implementation:f}}var l=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(h,c){if(h==="font")return"";if(typeof c=="string")return c==="use-credentials"?c:""}return reactDom_production.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,reactDom_production.createPortal=function(h,c){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)throw Error(r(299));return o(h,c,null,f)},reactDom_production.flushSync=function(h){var c=l.T,f=n.p;try{if(l.T=null,n.p=2,h)return h()}finally{l.T=c,n.p=f,n.d.f()}},reactDom_production.preconnect=function(h,c){typeof h=="string"&&(c?(c=c.crossOrigin,c=typeof c=="string"?c==="use-credentials"?c:"":void 0):c=null,n.d.C(h,c))},reactDom_production.prefetchDNS=function(h){typeof h=="string"&&n.d.D(h)},reactDom_production.preinit=function(h,c){if(typeof h=="string"&&c&&typeof c.as=="string"){var f=c.as,d=u(f,c.crossOrigin),p=typeof c.integrity=="string"?c.integrity:void 0,v=typeof c.fetchPriority=="string"?c.fetchPriority:void 0;f==="style"?n.d.S(h,typeof c.precedence=="string"?c.precedence:void 0,{crossOrigin:d,integrity:p,fetchPriority:v}):f==="script"&&n.d.X(h,{crossOrigin:d,integrity:p,fetchPriority:v,nonce:typeof c.nonce=="string"?c.nonce:void 0})}},reactDom_production.preinitModule=function(h,c){if(typeof h=="string")if(typeof c=="object"&&c!==null){if(c.as==null||c.as==="script"){var f=u(c.as,c.crossOrigin);n.d.M(h,{crossOrigin:f,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0})}}else c==null&&n.d.M(h)},reactDom_production.preload=function(h,c){if(typeof h=="string"&&typeof c=="object"&&c!==null&&typeof c.as=="string"){var f=c.as,d=u(f,c.crossOrigin);n.d.L(h,f,{crossOrigin:d,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0,type:typeof c.type=="string"?c.type:void 0,fetchPriority:typeof c.fetchPriority=="string"?c.fetchPriority:void 0,referrerPolicy:typeof c.referrerPolicy=="string"?c.referrerPolicy:void 0,imageSrcSet:typeof c.imageSrcSet=="string"?c.imageSrcSet:void 0,imageSizes:typeof c.imageSizes=="string"?c.imageSizes:void 0,media:typeof c.media=="string"?c.media:void 0})}},reactDom_production.preloadModule=function(h,c){if(typeof h=="string")if(c){var f=u(c.as,c.crossOrigin);n.d.m(h,{as:typeof c.as=="string"&&c.as!=="script"?c.as:void 0,crossOrigin:f,integrity:typeof c.integrity=="string"?c.integrity:void 0})}else n.d.m(h)},reactDom_production.requestFormReset=function(h){n.d.r(h)},reactDom_production.unstable_batchedUpdates=function(h,c){return h(c)},reactDom_production.useFormState=function(h,c,f){return l.H.useFormState(h,c,f)},reactDom_production.useFormStatus=function(){return l.H.useHostTransitionStatus()},reactDom_production.version="19.2.3",reactDom_production}var hasRequiredReactDom;function requireReactDom(){if(hasRequiredReactDom)return reactDom.exports;hasRequiredReactDom=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(r){console.error(r)}}return t(),reactDom.exports=requireReactDom_production(),reactDom.exports}var hasRequiredReactDomClient_production;function requireReactDomClient_production(){if(hasRequiredReactDomClient_production)return reactDomClient_production;hasRequiredReactDomClient_production=1;var t=requireScheduler(),r=requireReact(),a=requireReactDom();function n(m){var g="https://react.dev/errors/"+m;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)g+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+m+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(m){return!(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)}function o(m){var g=m,x=m;if(m.alternate)for(;g.return;)g=g.return;else{m=g;do g=m,(g.flags&4098)!==0&&(x=g.return),m=g.return;while(m)}return g.tag===3?x:null}function l(m){if(m.tag===13){var g=m.memoizedState;if(g===null&&(m=m.alternate,m!==null&&(g=m.memoizedState)),g!==null)return g.dehydrated}return null}function u(m){if(m.tag===31){var g=m.memoizedState;if(g===null&&(m=m.alternate,m!==null&&(g=m.memoizedState)),g!==null)return g.dehydrated}return null}function h(m){if(o(m)!==m)throw Error(n(188))}function c(m){var g=m.alternate;if(!g){if(g=o(m),g===null)throw Error(n(188));return g!==m?null:m}for(var x=m,E=g;;){var J=x.return;if(J===null)break;var k=J.alternate;if(k===null){if(E=J.return,E!==null){x=E;continue}break}if(J.child===k.child){for(k=J.child;k;){if(k===x)return h(J),m;if(k===E)return h(J),g;k=k.sibling}throw Error(n(188))}if(x.return!==E.return)x=J,E=k;else{for(var H=!1,oe=J.child;oe;){if(oe===x){H=!0,x=J,E=k;break}if(oe===E){H=!0,E=J,x=k;break}oe=oe.sibling}if(!H){for(oe=k.child;oe;){if(oe===x){H=!0,x=k,E=J;break}if(oe===E){H=!0,E=k,x=J;break}oe=oe.sibling}if(!H)throw Error(n(189))}}if(x.alternate!==E)throw Error(n(190))}if(x.tag!==3)throw Error(n(188));return x.stateNode.current===x?m:g}function f(m){var g=m.tag;if(g===5||g===26||g===27||g===6)return m;for(m=m.child;m!==null;){if(g=f(m),g!==null)return g;m=m.sibling}return null}var d=Object.assign,p=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),y=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),M=Symbol.for("react.consumer"),C=Symbol.for("react.context"),$=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),X=Symbol.for("react.memo"),O=Symbol.for("react.lazy"),G=Symbol.for("react.activity"),R=Symbol.for("react.memo_cache_sentinel"),B=Symbol.iterator;function F(m){return m===null||typeof m!="object"?null:(m=B&&m[B]||m["@@iterator"],typeof m=="function"?m:null)}var U=Symbol.for("react.client.reference");function q(m){if(m==null)return null;if(typeof m=="function")return m.$$typeof===U?null:m.displayName||m.name||null;if(typeof m=="string")return m;switch(m){case b:return"Fragment";case N:return"Profiler";case _:return"StrictMode";case w:return"Suspense";case A:return"SuspenseList";case G:return"Activity"}if(typeof m=="object")switch(m.$$typeof){case y:return"Portal";case C:return m.displayName||"Context";case M:return(m._context.displayName||"Context")+".Consumer";case $:var g=m.render;return m=m.displayName,m||(m=g.displayName||g.name||"",m=m!==""?"ForwardRef("+m+")":"ForwardRef"),m;case X:return g=m.displayName||null,g!==null?g:q(m.type)||"Memo";case O:g=m._payload,m=m._init;try{return q(m(g))}catch{}}return null}var ee=Array.isArray,z=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y=a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K={pending:!1,data:null,method:null,action:null},Z=[],ne=-1;function j(m){return{current:m}}function V(m){0>ne||(m.current=Z[ne],Z[ne]=null,ne--)}function L(m,g){ne++,Z[ne]=m.current,m.current=g}var ae=j(null),W=j(null),ve=j(null),de=j(null);function se(m,g){switch(L(ve,g),L(W,m),L(ae,null),g.nodeType){case 9:case 11:m=(m=g.documentElement)&&(m=m.namespaceURI)?th(m):0;break;default:if(m=g.tagName,g=g.namespaceURI)g=th(g),m=rh(g,m);else switch(m){case"svg":m=1;break;case"math":m=2;break;default:m=0}}V(ae),L(ae,m)}function ie(){V(ae),V(W),V(ve)}function ce(m){m.memoizedState!==null&&L(de,m);var g=ae.current,x=rh(g,m.type);g!==x&&(L(W,m),L(ae,x))}function xe(m){W.current===m&&(V(ae),V(W)),de.current===m&&(V(de),fa._currentValue=K)}var fe,Ne;function we(m){if(fe===void 0)try{throw Error()}catch(x){var g=x.stack.trim().match(/\n( *(at )?)/);fe=g&&g[1]||"",Ne=-1<x.stack.indexOf(`
    at`)?" (<anonymous>)":-1<x.stack.indexOf("@")?"@unknown:0:0":""}return`
`+fe+m+Ne}var Pe=!1;function Ie(m,g){if(!m||Pe)return"";Pe=!0;var x=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var E={DetermineComponentFrameRoot:function(){try{if(g){var ke=function(){throw Error()};if(Object.defineProperty(ke.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ke,[])}catch(Ge){var Oe=Ge}Reflect.construct(m,[],ke)}else{try{ke.call()}catch(Ge){Oe=Ge}m.call(ke.prototype)}}else{try{throw Error()}catch(Ge){Oe=Ge}(ke=m())&&typeof ke.catch=="function"&&ke.catch(function(){})}}catch(Ge){if(Ge&&Oe&&typeof Ge.stack=="string")return[Ge.stack,Oe.stack]}return[null,null]}};E.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var J=Object.getOwnPropertyDescriptor(E.DetermineComponentFrameRoot,"name");J&&J.configurable&&Object.defineProperty(E.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var k=E.DetermineComponentFrameRoot(),H=k[0],oe=k[1];if(H&&oe){var be=H.split(`
`),Ae=oe.split(`
`);for(J=E=0;E<be.length&&!be[E].includes("DetermineComponentFrameRoot");)E++;for(;J<Ae.length&&!Ae[J].includes("DetermineComponentFrameRoot");)J++;if(E===be.length||J===Ae.length)for(E=be.length-1,J=Ae.length-1;1<=E&&0<=J&&be[E]!==Ae[J];)J--;for(;1<=E&&0<=J;E--,J--)if(be[E]!==Ae[J]){if(E!==1||J!==1)do if(E--,J--,0>J||be[E]!==Ae[J]){var Je=`
`+be[E].replace(" at new "," at ");return m.displayName&&Je.includes("<anonymous>")&&(Je=Je.replace("<anonymous>",m.displayName)),Je}while(1<=E&&0<=J);break}}}finally{Pe=!1,Error.prepareStackTrace=x}return(x=m?m.displayName||m.name:"")?we(x):""}function Ye(m,g){switch(m.tag){case 26:case 27:case 5:return we(m.type);case 16:return we("Lazy");case 13:return m.child!==g&&g!==null?we("Suspense Fallback"):we("Suspense");case 19:return we("SuspenseList");case 0:case 15:return Ie(m.type,!1);case 11:return Ie(m.type.render,!1);case 1:return Ie(m.type,!0);case 31:return we("Activity");default:return""}}function Le(m){try{var g="",x=null;do g+=Ye(m,x),x=m,m=m.return;while(m);return g}catch(E){return`
Error generating stack: `+E.message+`
`+E.stack}}var Ve=Object.prototype.hasOwnProperty,Ze=t.unstable_scheduleCallback,ue=t.unstable_cancelCallback,ge=t.unstable_shouldYield,te=t.unstable_requestPaint,le=t.unstable_now,me=t.unstable_getCurrentPriorityLevel,he=t.unstable_ImmediatePriority,ye=t.unstable_UserBlockingPriority,Se=t.unstable_NormalPriority,Be=t.unstable_LowPriority,Te=t.unstable_IdlePriority,Xe=t.log,Me=t.unstable_setDisableYieldValue,ze=null,Ue=null;function je(m){if(typeof Xe=="function"&&Me(m),Ue&&typeof Ue.setStrictMode=="function")try{Ue.setStrictMode(ze,m)}catch{}}var Ee=Math.clz32?Math.clz32:pe,qe=Math.log,I=Math.LN2;function pe(m){return m>>>=0,m===0?32:31-(qe(m)/I|0)|0}var De=256,Fe=262144,We=4194304;function He(m){var g=m&42;if(g!==0)return g;switch(m&-m){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return m&261888;case 262144:case 524288:case 1048576:case 2097152:return m&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return m&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return m}}function vt(m,g,x){var E=m.pendingLanes;if(E===0)return 0;var J=0,k=m.suspendedLanes,H=m.pingedLanes;m=m.warmLanes;var oe=E&134217727;return oe!==0?(E=oe&~k,E!==0?J=He(E):(H&=oe,H!==0?J=He(H):x||(x=oe&~m,x!==0&&(J=He(x))))):(oe=E&~k,oe!==0?J=He(oe):H!==0?J=He(H):x||(x=E&~m,x!==0&&(J=He(x)))),J===0?0:g!==0&&g!==J&&(g&k)===0&&(k=J&-J,x=g&-g,k>=x||k===32&&(x&4194048)!==0)?g:J}function zt(m,g){return(m.pendingLanes&~(m.suspendedLanes&~m.pingedLanes)&g)===0}function $r(m,g){switch(m){case 1:case 2:case 4:case 8:case 64:return g+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return g+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qi(){var m=We;return We<<=1,(We&62914560)===0&&(We=4194304),m}function Ni(m){for(var g=[],x=0;31>x;x++)g.push(m);return g}function Nt(m,g){m.pendingLanes|=g,g!==268435456&&(m.suspendedLanes=0,m.pingedLanes=0,m.warmLanes=0)}function gr(m,g,x,E,J,k){var H=m.pendingLanes;m.pendingLanes=x,m.suspendedLanes=0,m.pingedLanes=0,m.warmLanes=0,m.expiredLanes&=x,m.entangledLanes&=x,m.errorRecoveryDisabledLanes&=x,m.shellSuspendCounter=0;var oe=m.entanglements,be=m.expirationTimes,Ae=m.hiddenUpdates;for(x=H&~x;0<x;){var Je=31-Ee(x),ke=1<<Je;oe[Je]=0,be[Je]=-1;var Oe=Ae[Je];if(Oe!==null)for(Ae[Je]=null,Je=0;Je<Oe.length;Je++){var Ge=Oe[Je];Ge!==null&&(Ge.lane&=-536870913)}x&=~ke}E!==0&&Jt(m,E,0),k!==0&&J===0&&m.tag!==0&&(m.suspendedLanes|=k&~(H&~g))}function Jt(m,g,x){m.pendingLanes|=g,m.suspendedLanes&=~g;var E=31-Ee(g);m.entangledLanes|=g,m.entanglements[E]=m.entanglements[E]|1073741824|x&261930}function Hr(m,g){var x=m.entangledLanes|=g;for(m=m.entanglements;x;){var E=31-Ee(x),J=1<<E;J&g|m[E]&g&&(m[E]|=g),x&=~J}}function yr(m,g){var x=g&-g;return x=(x&42)!==0?1:wr(x),(x&(m.suspendedLanes|g))!==0?0:x}function wr(m){switch(m){case 2:m=1;break;case 8:m=4;break;case 32:m=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:m=128;break;case 268435456:m=134217728;break;default:m=0}return m}function It(m){return m&=-m,2<m?8<m?(m&134217727)!==0?32:268435456:8:2}function Mi(){var m=Y.p;return m!==0?m:(m=window.event,m===void 0?32:Mh(m.type))}function Ar(m,g){var x=Y.p;try{return Y.p=m,g()}finally{Y.p=x}}var qt=Math.random().toString(36).slice(2),Ct="__reactFiber$"+qt,Lt="__reactProps$"+qt,Zr="__reactContainer$"+qt,En="__reactEvents$"+qt,Ds="__reactListeners$"+qt,Ts="__reactHandles$"+qt,va="__reactResources$"+qt,Ei="__reactMarker$"+qt;function $n(m){delete m[Ct],delete m[Lt],delete m[En],delete m[Ds],delete m[Ts]}function Wr(m){var g=m[Ct];if(g)return g;for(var x=m.parentNode;x;){if(g=x[Zr]||x[Ct]){if(x=g.alternate,g.child!==null||x!==null&&x.child!==null)for(m=uh(m);m!==null;){if(x=m[Ct])return x;m=uh(m)}return g}m=x,x=m.parentNode}return null}function Qr(m){if(m=m[Ct]||m[Zr]){var g=m.tag;if(g===5||g===6||g===13||g===31||g===26||g===27||g===3)return m}return null}function br(m){var g=m.tag;if(g===5||g===26||g===27||g===6)return m.stateNode;throw Error(n(33))}function st(m){var g=m[va];return g||(g=m[va]={hoistableStyles:new Map,hoistableScripts:new Map}),g}function ct(m){m[Ei]=!0}var ga=new Set,$i={};function Qt(m,g){Kr(m,g),Kr(m+"Capture",g)}function Kr(m,g){for($i[m]=g,m=0;m<g.length;m++)ga.add(g[m])}var Xh=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),zl={},Ll={};function Gh(m){return Ve.call(Ll,m)?!0:Ve.call(zl,m)?!1:Xh.test(m)?Ll[m]=!0:(zl[m]=!0,!1)}function ya(m,g,x){if(Gh(g))if(x===null)m.removeAttribute(g);else{switch(typeof x){case"undefined":case"function":case"symbol":m.removeAttribute(g);return;case"boolean":var E=g.toLowerCase().slice(0,5);if(E!=="data-"&&E!=="aria-"){m.removeAttribute(g);return}}m.setAttribute(g,""+x)}}function ba(m,g,x){if(x===null)m.removeAttribute(g);else{switch(typeof x){case"undefined":case"function":case"symbol":case"boolean":m.removeAttribute(g);return}m.setAttribute(g,""+x)}}function Dr(m,g,x,E){if(E===null)m.removeAttribute(x);else{switch(typeof E){case"undefined":case"function":case"symbol":case"boolean":m.removeAttribute(x);return}m.setAttributeNS(g,x,""+E)}}function sr(m){switch(typeof m){case"bigint":case"boolean":case"number":case"string":case"undefined":return m;case"object":return m;default:return""}}function Il(m){var g=m.type;return(m=m.nodeName)&&m.toLowerCase()==="input"&&(g==="checkbox"||g==="radio")}function Ph(m,g,x){var E=Object.getOwnPropertyDescriptor(m.constructor.prototype,g);if(!m.hasOwnProperty(g)&&typeof E<"u"&&typeof E.get=="function"&&typeof E.set=="function"){var J=E.get,k=E.set;return Object.defineProperty(m,g,{configurable:!0,get:function(){return J.call(this)},set:function(H){x=""+H,k.call(this,H)}}),Object.defineProperty(m,g,{enumerable:E.enumerable}),{getValue:function(){return x},setValue:function(H){x=""+H},stopTracking:function(){m._valueTracker=null,delete m[g]}}}}function Os(m){if(!m._valueTracker){var g=Il(m)?"checked":"value";m._valueTracker=Ph(m,g,""+m[g])}}function Ul(m){if(!m)return!1;var g=m._valueTracker;if(!g)return!0;var x=g.getValue(),E="";return m&&(E=Il(m)?m.checked?"true":"false":m.value),m=E,m!==x?(g.setValue(m),!0):!1}function xa(m){if(m=m||(typeof document<"u"?document:void 0),typeof m>"u")return null;try{return m.activeElement||m.body}catch{return m.body}}var Jh=/[\n"\\]/g;function lr(m){return m.replace(Jh,function(g){return"\\"+g.charCodeAt(0).toString(16)+" "})}function Xs(m,g,x,E,J,k,H,oe){m.name="",H!=null&&typeof H!="function"&&typeof H!="symbol"&&typeof H!="boolean"?m.type=H:m.removeAttribute("type"),g!=null?H==="number"?(g===0&&m.value===""||m.value!=g)&&(m.value=""+sr(g)):m.value!==""+sr(g)&&(m.value=""+sr(g)):H!=="submit"&&H!=="reset"||m.removeAttribute("value"),g!=null?Gs(m,H,sr(g)):x!=null?Gs(m,H,sr(x)):E!=null&&m.removeAttribute("value"),J==null&&k!=null&&(m.defaultChecked=!!k),J!=null&&(m.checked=J&&typeof J!="function"&&typeof J!="symbol"),oe!=null&&typeof oe!="function"&&typeof oe!="symbol"&&typeof oe!="boolean"?m.name=""+sr(oe):m.removeAttribute("name")}function ql(m,g,x,E,J,k,H,oe){if(k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"&&(m.type=k),g!=null||x!=null){if(!(k!=="submit"&&k!=="reset"||g!=null)){Os(m);return}x=x!=null?""+sr(x):"",g=g!=null?""+sr(g):x,oe||g===m.value||(m.value=g),m.defaultValue=g}E=E??J,E=typeof E!="function"&&typeof E!="symbol"&&!!E,m.checked=oe?m.checked:!!E,m.defaultChecked=!!E,H!=null&&typeof H!="function"&&typeof H!="symbol"&&typeof H!="boolean"&&(m.name=H),Os(m)}function Gs(m,g,x){g==="number"&&xa(m.ownerDocument)===m||m.defaultValue===""+x||(m.defaultValue=""+x)}function Yi(m,g,x,E){if(m=m.options,g){g={};for(var J=0;J<x.length;J++)g["$"+x[J]]=!0;for(x=0;x<m.length;x++)J=g.hasOwnProperty("$"+m[x].value),m[x].selected!==J&&(m[x].selected=J),J&&E&&(m[x].defaultSelected=!0)}else{for(x=""+sr(x),g=null,J=0;J<m.length;J++){if(m[J].value===x){m[J].selected=!0,E&&(m[J].defaultSelected=!0);return}g!==null||m[J].disabled||(g=m[J])}g!==null&&(g.selected=!0)}}function Yl(m,g,x){if(g!=null&&(g=""+sr(g),g!==m.value&&(m.value=g),x==null)){m.defaultValue!==g&&(m.defaultValue=g);return}m.defaultValue=x!=null?""+sr(x):""}function jl(m,g,x,E){if(g==null){if(E!=null){if(x!=null)throw Error(n(92));if(ee(E)){if(1<E.length)throw Error(n(93));E=E[0]}x=E}x==null&&(x=""),g=x}x=sr(g),m.defaultValue=x,E=m.textContent,E===x&&E!==""&&E!==null&&(m.value=E),Os(m)}function ji(m,g){if(g){var x=m.firstChild;if(x&&x===m.lastChild&&x.nodeType===3){x.nodeValue=g;return}}m.textContent=g}var Bh=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Vl(m,g,x){var E=g.indexOf("--")===0;x==null||typeof x=="boolean"||x===""?E?m.setProperty(g,""):g==="float"?m.cssFloat="":m[g]="":E?m.setProperty(g,x):typeof x!="number"||x===0||Bh.has(g)?g==="float"?m.cssFloat=x:m[g]=(""+x).trim():m[g]=x+"px"}function Hl(m,g,x){if(g!=null&&typeof g!="object")throw Error(n(62));if(m=m.style,x!=null){for(var E in x)!x.hasOwnProperty(E)||g!=null&&g.hasOwnProperty(E)||(E.indexOf("--")===0?m.setProperty(E,""):E==="float"?m.cssFloat="":m[E]="");for(var J in g)E=g[J],g.hasOwnProperty(J)&&x[J]!==E&&Vl(m,J,E)}else for(var k in g)g.hasOwnProperty(k)&&Vl(m,k,g[k])}function Ps(m){if(m.indexOf("-")===-1)return!1;switch(m){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Rh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),kh=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ca(m){return kh.test(""+m)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":m}function Tr(){}var Js=null;function Bs(m){return m=m.target||m.srcElement||window,m.correspondingUseElement&&(m=m.correspondingUseElement),m.nodeType===3?m.parentNode:m}var Vi=null,Hi=null;function Zl(m){var g=Qr(m);if(g&&(m=g.stateNode)){var x=m[Lt]||null;e:switch(m=g.stateNode,g.type){case"input":if(Xs(m,x.value,x.defaultValue,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name),g=x.name,x.type==="radio"&&g!=null){for(x=m;x.parentNode;)x=x.parentNode;for(x=x.querySelectorAll('input[name="'+lr(""+g)+'"][type="radio"]'),g=0;g<x.length;g++){var E=x[g];if(E!==m&&E.form===m.form){var J=E[Lt]||null;if(!J)throw Error(n(90));Xs(E,J.value,J.defaultValue,J.defaultValue,J.checked,J.defaultChecked,J.type,J.name)}}for(g=0;g<x.length;g++)E=x[g],E.form===m.form&&Ul(E)}break e;case"textarea":Yl(m,x.value,x.defaultValue);break e;case"select":g=x.value,g!=null&&Yi(m,!!x.multiple,g,!1)}}}var Rs=!1;function Wl(m,g,x){if(Rs)return m(g,x);Rs=!0;try{var E=m(g);return E}finally{if(Rs=!1,(Vi!==null||Hi!==null)&&(ls(),Vi&&(g=Vi,m=Hi,Hi=Vi=null,Zl(g),m)))for(g=0;g<m.length;g++)Zl(m[g])}}function An(m,g){var x=m.stateNode;if(x===null)return null;var E=x[Lt]||null;if(E===null)return null;x=E[g];e:switch(g){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(E=!E.disabled)||(m=m.type,E=!(m==="button"||m==="input"||m==="select"||m==="textarea")),m=!E;break e;default:m=!1}if(m)return null;if(x&&typeof x!="function")throw Error(n(231,g,typeof x));return x}var Or=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ks=!1;if(Or)try{var Dn={};Object.defineProperty(Dn,"passive",{get:function(){ks=!0}}),window.addEventListener("test",Dn,Dn),window.removeEventListener("test",Dn,Dn)}catch{ks=!1}var ei=null,Fs=null,Sa=null;function Ql(){if(Sa)return Sa;var m,g=Fs,x=g.length,E,J="value"in ei?ei.value:ei.textContent,k=J.length;for(m=0;m<x&&g[m]===J[m];m++);var H=x-m;for(E=1;E<=H&&g[x-E]===J[k-E];E++);return Sa=J.slice(m,1<E?1-E:void 0)}function wa(m){var g=m.keyCode;return"charCode"in m?(m=m.charCode,m===0&&g===13&&(m=13)):m=g,m===10&&(m=13),32<=m||m===13?m:0}function _a(){return!0}function Kl(){return!1}function Yt(m){function g(x,E,J,k,H){this._reactName=x,this._targetInst=J,this.type=E,this.nativeEvent=k,this.target=H,this.currentTarget=null;for(var oe in m)m.hasOwnProperty(oe)&&(x=m[oe],this[oe]=x?x(k):k[oe]);return this.isDefaultPrevented=(k.defaultPrevented!=null?k.defaultPrevented:k.returnValue===!1)?_a:Kl,this.isPropagationStopped=Kl,this}return d(g.prototype,{preventDefault:function(){this.defaultPrevented=!0;var x=this.nativeEvent;x&&(x.preventDefault?x.preventDefault():typeof x.returnValue!="unknown"&&(x.returnValue=!1),this.isDefaultPrevented=_a)},stopPropagation:function(){var x=this.nativeEvent;x&&(x.stopPropagation?x.stopPropagation():typeof x.cancelBubble!="unknown"&&(x.cancelBubble=!0),this.isPropagationStopped=_a)},persist:function(){},isPersistent:_a}),g}var Ai={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(m){return m.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Na=Yt(Ai),Tn=d({},Ai,{view:0,detail:0}),Fh=Yt(Tn),zs,Ls,On,Ma=d({},Tn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Us,button:0,buttons:0,relatedTarget:function(m){return m.relatedTarget===void 0?m.fromElement===m.srcElement?m.toElement:m.fromElement:m.relatedTarget},movementX:function(m){return"movementX"in m?m.movementX:(m!==On&&(On&&m.type==="mousemove"?(zs=m.screenX-On.screenX,Ls=m.screenY-On.screenY):Ls=zs=0,On=m),zs)},movementY:function(m){return"movementY"in m?m.movementY:Ls}}),eu=Yt(Ma),zh=d({},Ma,{dataTransfer:0}),Lh=Yt(zh),Ih=d({},Tn,{relatedTarget:0}),Is=Yt(Ih),Uh=d({},Ai,{animationName:0,elapsedTime:0,pseudoElement:0}),qh=Yt(Uh),Yh=d({},Ai,{clipboardData:function(m){return"clipboardData"in m?m.clipboardData:window.clipboardData}}),jh=Yt(Yh),Vh=d({},Ai,{data:0}),tu=Yt(Vh),Hh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Zh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Wh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Qh(m){var g=this.nativeEvent;return g.getModifierState?g.getModifierState(m):(m=Wh[m])?!!g[m]:!1}function Us(){return Qh}var Kh=d({},Tn,{key:function(m){if(m.key){var g=Hh[m.key]||m.key;if(g!=="Unidentified")return g}return m.type==="keypress"?(m=wa(m),m===13?"Enter":String.fromCharCode(m)):m.type==="keydown"||m.type==="keyup"?Zh[m.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Us,charCode:function(m){return m.type==="keypress"?wa(m):0},keyCode:function(m){return m.type==="keydown"||m.type==="keyup"?m.keyCode:0},which:function(m){return m.type==="keypress"?wa(m):m.type==="keydown"||m.type==="keyup"?m.keyCode:0}}),ef=Yt(Kh),tf=d({},Ma,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ru=Yt(tf),rf=d({},Tn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Us}),nf=Yt(rf),af=d({},Ai,{propertyName:0,elapsedTime:0,pseudoElement:0}),sf=Yt(af),of=d({},Ma,{deltaX:function(m){return"deltaX"in m?m.deltaX:"wheelDeltaX"in m?-m.wheelDeltaX:0},deltaY:function(m){return"deltaY"in m?m.deltaY:"wheelDeltaY"in m?-m.wheelDeltaY:"wheelDelta"in m?-m.wheelDelta:0},deltaZ:0,deltaMode:0}),lf=Yt(of),uf=d({},Ai,{newState:0,oldState:0}),cf=Yt(uf),hf=[9,13,27,32],qs=Or&&"CompositionEvent"in window,Xn=null;Or&&"documentMode"in document&&(Xn=document.documentMode);var ff=Or&&"TextEvent"in window&&!Xn,iu=Or&&(!qs||Xn&&8<Xn&&11>=Xn),nu=" ",au=!1;function su(m,g){switch(m){case"keyup":return hf.indexOf(g.keyCode)!==-1;case"keydown":return g.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ou(m){return m=m.detail,typeof m=="object"&&"data"in m?m.data:null}var Zi=!1;function df(m,g){switch(m){case"compositionend":return ou(g);case"keypress":return g.which!==32?null:(au=!0,nu);case"textInput":return m=g.data,m===nu&&au?null:m;default:return null}}function mf(m,g){if(Zi)return m==="compositionend"||!qs&&su(m,g)?(m=Ql(),Sa=Fs=ei=null,Zi=!1,m):null;switch(m){case"paste":return null;case"keypress":if(!(g.ctrlKey||g.altKey||g.metaKey)||g.ctrlKey&&g.altKey){if(g.char&&1<g.char.length)return g.char;if(g.which)return String.fromCharCode(g.which)}return null;case"compositionend":return iu&&g.locale!=="ko"?null:g.data;default:return null}}var pf={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function lu(m){var g=m&&m.nodeName&&m.nodeName.toLowerCase();return g==="input"?!!pf[m.type]:g==="textarea"}function uu(m,g,x,E){Vi?Hi?Hi.push(E):Hi=[E]:Vi=E,g=ps(g,"onChange"),0<g.length&&(x=new Na("onChange","change",null,x,E),m.push({event:x,listeners:g}))}var Gn=null,Pn=null;function vf(m){H0(m,0)}function Ea(m){var g=br(m);if(Ul(g))return m}function cu(m,g){if(m==="change")return g}var hu=!1;if(Or){var Ys;if(Or){var js="oninput"in document;if(!js){var fu=document.createElement("div");fu.setAttribute("oninput","return;"),js=typeof fu.oninput=="function"}Ys=js}else Ys=!1;hu=Ys&&(!document.documentMode||9<document.documentMode)}function du(){Gn&&(Gn.detachEvent("onpropertychange",mu),Pn=Gn=null)}function mu(m){if(m.propertyName==="value"&&Ea(Pn)){var g=[];uu(g,Pn,m,Bs(m)),Wl(vf,g)}}function gf(m,g,x){m==="focusin"?(du(),Gn=g,Pn=x,Gn.attachEvent("onpropertychange",mu)):m==="focusout"&&du()}function yf(m){if(m==="selectionchange"||m==="keyup"||m==="keydown")return Ea(Pn)}function bf(m,g){if(m==="click")return Ea(g)}function xf(m,g){if(m==="input"||m==="change")return Ea(g)}function Cf(m,g){return m===g&&(m!==0||1/m===1/g)||m!==m&&g!==g}var Kt=typeof Object.is=="function"?Object.is:Cf;function Jn(m,g){if(Kt(m,g))return!0;if(typeof m!="object"||m===null||typeof g!="object"||g===null)return!1;var x=Object.keys(m),E=Object.keys(g);if(x.length!==E.length)return!1;for(E=0;E<x.length;E++){var J=x[E];if(!Ve.call(g,J)||!Kt(m[J],g[J]))return!1}return!0}function pu(m){for(;m&&m.firstChild;)m=m.firstChild;return m}function vu(m,g){var x=pu(m);m=0;for(var E;x;){if(x.nodeType===3){if(E=m+x.textContent.length,m<=g&&E>=g)return{node:x,offset:g-m};m=E}e:{for(;x;){if(x.nextSibling){x=x.nextSibling;break e}x=x.parentNode}x=void 0}x=pu(x)}}function gu(m,g){return m&&g?m===g?!0:m&&m.nodeType===3?!1:g&&g.nodeType===3?gu(m,g.parentNode):"contains"in m?m.contains(g):m.compareDocumentPosition?!!(m.compareDocumentPosition(g)&16):!1:!1}function yu(m){m=m!=null&&m.ownerDocument!=null&&m.ownerDocument.defaultView!=null?m.ownerDocument.defaultView:window;for(var g=xa(m.document);g instanceof m.HTMLIFrameElement;){try{var x=typeof g.contentWindow.location.href=="string"}catch{x=!1}if(x)m=g.contentWindow;else break;g=xa(m.document)}return g}function Vs(m){var g=m&&m.nodeName&&m.nodeName.toLowerCase();return g&&(g==="input"&&(m.type==="text"||m.type==="search"||m.type==="tel"||m.type==="url"||m.type==="password")||g==="textarea"||m.contentEditable==="true")}var Sf=Or&&"documentMode"in document&&11>=document.documentMode,Wi=null,Hs=null,Bn=null,Zs=!1;function bu(m,g,x){var E=x.window===x?x.document:x.nodeType===9?x:x.ownerDocument;Zs||Wi==null||Wi!==xa(E)||(E=Wi,"selectionStart"in E&&Vs(E)?E={start:E.selectionStart,end:E.selectionEnd}:(E=(E.ownerDocument&&E.ownerDocument.defaultView||window).getSelection(),E={anchorNode:E.anchorNode,anchorOffset:E.anchorOffset,focusNode:E.focusNode,focusOffset:E.focusOffset}),Bn&&Jn(Bn,E)||(Bn=E,E=ps(Hs,"onSelect"),0<E.length&&(g=new Na("onSelect","select",null,g,x),m.push({event:g,listeners:E}),g.target=Wi)))}function Di(m,g){var x={};return x[m.toLowerCase()]=g.toLowerCase(),x["Webkit"+m]="webkit"+g,x["Moz"+m]="moz"+g,x}var Qi={animationend:Di("Animation","AnimationEnd"),animationiteration:Di("Animation","AnimationIteration"),animationstart:Di("Animation","AnimationStart"),transitionrun:Di("Transition","TransitionRun"),transitionstart:Di("Transition","TransitionStart"),transitioncancel:Di("Transition","TransitionCancel"),transitionend:Di("Transition","TransitionEnd")},Ws={},xu={};Or&&(xu=document.createElement("div").style,"AnimationEvent"in window||(delete Qi.animationend.animation,delete Qi.animationiteration.animation,delete Qi.animationstart.animation),"TransitionEvent"in window||delete Qi.transitionend.transition);function Ti(m){if(Ws[m])return Ws[m];if(!Qi[m])return m;var g=Qi[m],x;for(x in g)if(g.hasOwnProperty(x)&&x in xu)return Ws[m]=g[x];return m}var Cu=Ti("animationend"),Su=Ti("animationiteration"),wu=Ti("animationstart"),wf=Ti("transitionrun"),_f=Ti("transitionstart"),Nf=Ti("transitioncancel"),_u=Ti("transitionend"),Nu=new Map,Qs="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Qs.push("scrollEnd");function xr(m,g){Nu.set(m,g),Qt(g,[m])}var $a=typeof reportError=="function"?reportError:function(m){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var g=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof m=="object"&&m!==null&&typeof m.message=="string"?String(m.message):String(m),error:m});if(!window.dispatchEvent(g))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",m);return}console.error(m)},ur=[],Ki=0,Ks=0;function Aa(){for(var m=Ki,g=Ks=Ki=0;g<m;){var x=ur[g];ur[g++]=null;var E=ur[g];ur[g++]=null;var J=ur[g];ur[g++]=null;var k=ur[g];if(ur[g++]=null,E!==null&&J!==null){var H=E.pending;H===null?J.next=J:(J.next=H.next,H.next=J),E.pending=J}k!==0&&Mu(x,J,k)}}function Da(m,g,x,E){ur[Ki++]=m,ur[Ki++]=g,ur[Ki++]=x,ur[Ki++]=E,Ks|=E,m.lanes|=E,m=m.alternate,m!==null&&(m.lanes|=E)}function eo(m,g,x,E){return Da(m,g,x,E),Ta(m)}function Oi(m,g){return Da(m,null,null,g),Ta(m)}function Mu(m,g,x){m.lanes|=x;var E=m.alternate;E!==null&&(E.lanes|=x);for(var J=!1,k=m.return;k!==null;)k.childLanes|=x,E=k.alternate,E!==null&&(E.childLanes|=x),k.tag===22&&(m=k.stateNode,m===null||m._visibility&1||(J=!0)),m=k,k=k.return;return m.tag===3?(k=m.stateNode,J&&g!==null&&(J=31-Ee(x),m=k.hiddenUpdates,E=m[J],E===null?m[J]=[g]:E.push(g),g.lane=x|536870912),k):null}function Ta(m){if(50<aa)throw aa=0,hl=null,Error(n(185));for(var g=m.return;g!==null;)m=g,g=m.return;return m.tag===3?m.stateNode:null}var en={};function Mf(m,g,x,E){this.tag=m,this.key=x,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=g,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=E,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function er(m,g,x,E){return new Mf(m,g,x,E)}function ro(m){return m=m.prototype,!(!m||!m.isReactComponent)}function Xr(m,g){var x=m.alternate;return x===null?(x=er(m.tag,g,m.key,m.mode),x.elementType=m.elementType,x.type=m.type,x.stateNode=m.stateNode,x.alternate=m,m.alternate=x):(x.pendingProps=g,x.type=m.type,x.flags=0,x.subtreeFlags=0,x.deletions=null),x.flags=m.flags&65011712,x.childLanes=m.childLanes,x.lanes=m.lanes,x.child=m.child,x.memoizedProps=m.memoizedProps,x.memoizedState=m.memoizedState,x.updateQueue=m.updateQueue,g=m.dependencies,x.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext},x.sibling=m.sibling,x.index=m.index,x.ref=m.ref,x.refCleanup=m.refCleanup,x}function Eu(m,g){m.flags&=65011714;var x=m.alternate;return x===null?(m.childLanes=0,m.lanes=g,m.child=null,m.subtreeFlags=0,m.memoizedProps=null,m.memoizedState=null,m.updateQueue=null,m.dependencies=null,m.stateNode=null):(m.childLanes=x.childLanes,m.lanes=x.lanes,m.child=x.child,m.subtreeFlags=0,m.deletions=null,m.memoizedProps=x.memoizedProps,m.memoizedState=x.memoizedState,m.updateQueue=x.updateQueue,m.type=x.type,g=x.dependencies,m.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext}),m}function Oa(m,g,x,E,J,k){var H=0;if(E=m,typeof m=="function")ro(m)&&(H=1);else if(typeof m=="string")H=Td(m,x,ae.current)?26:m==="html"||m==="head"||m==="body"?27:5;else e:switch(m){case G:return m=er(31,x,g,J),m.elementType=G,m.lanes=k,m;case b:return Xi(x.children,J,k,g);case _:H=8,J|=24;break;case N:return m=er(12,x,g,J|2),m.elementType=N,m.lanes=k,m;case w:return m=er(13,x,g,J),m.elementType=w,m.lanes=k,m;case A:return m=er(19,x,g,J),m.elementType=A,m.lanes=k,m;default:if(typeof m=="object"&&m!==null)switch(m.$$typeof){case C:H=10;break e;case M:H=9;break e;case $:H=11;break e;case X:H=14;break e;case O:H=16,E=null;break e}H=29,x=Error(n(130,m===null?"null":typeof m,"")),E=null}return g=er(H,x,g,J),g.elementType=m,g.type=E,g.lanes=k,g}function Xi(m,g,x,E){return m=er(7,m,E,g),m.lanes=x,m}function io(m,g,x){return m=er(6,m,null,g),m.lanes=x,m}function $u(m){var g=er(18,null,null,0);return g.stateNode=m,g}function no(m,g,x){return g=er(4,m.children!==null?m.children:[],m.key,g),g.lanes=x,g.stateNode={containerInfo:m.containerInfo,pendingChildren:null,implementation:m.implementation},g}var Au=new WeakMap;function cr(m,g){if(typeof m=="object"&&m!==null){var x=Au.get(m);return x!==void 0?x:(g={value:m,source:g,stack:Le(g)},Au.set(m,g),g)}return{value:m,source:g,stack:Le(g)}}var tn=[],rn=0,Xa=null,Rn=0,hr=[],fr=0,ti=null,_r=1,Nr="";function Gr(m,g){tn[rn++]=Rn,tn[rn++]=Xa,Xa=m,Rn=g}function Du(m,g,x){hr[fr++]=_r,hr[fr++]=Nr,hr[fr++]=ti,ti=m;var E=_r;m=Nr;var J=32-Ee(E)-1;E&=~(1<<J),x+=1;var k=32-Ee(g)+J;if(30<k){var H=J-J%5;k=(E&(1<<H)-1).toString(32),E>>=H,J-=H,_r=1<<32-Ee(g)+J|x<<J|E,Nr=k+m}else _r=1<<k|x<<J|E,Nr=m}function ao(m){m.return!==null&&(Gr(m,1),Du(m,1,0))}function so(m){for(;m===Xa;)Xa=tn[--rn],tn[rn]=null,Rn=tn[--rn],tn[rn]=null;for(;m===ti;)ti=hr[--fr],hr[fr]=null,Nr=hr[--fr],hr[fr]=null,_r=hr[--fr],hr[fr]=null}function Tu(m,g){hr[fr++]=_r,hr[fr++]=Nr,hr[fr++]=ti,_r=g.id,Nr=g.overflow,ti=m}var Bt=null,St=null,ut=!1,ri=null,dr=!1,oo=Error(n(519));function ii(m){var g=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw kn(cr(g,m)),oo}function Ou(m){var g=m.stateNode,x=m.type,E=m.memoizedProps;switch(g[Ct]=m,g[Lt]=E,x){case"dialog":at("cancel",g),at("close",g);break;case"iframe":case"object":case"embed":at("load",g);break;case"video":case"audio":for(x=0;x<oa.length;x++)at(oa[x],g);break;case"source":at("error",g);break;case"img":case"image":case"link":at("error",g),at("load",g);break;case"details":at("toggle",g);break;case"input":at("invalid",g),ql(g,E.value,E.defaultValue,E.checked,E.defaultChecked,E.type,E.name,!0);break;case"select":at("invalid",g);break;case"textarea":at("invalid",g),jl(g,E.value,E.defaultValue,E.children)}x=E.children,typeof x!="string"&&typeof x!="number"&&typeof x!="bigint"||g.textContent===""+x||E.suppressHydrationWarning===!0||K0(g.textContent,x)?(E.popover!=null&&(at("beforetoggle",g),at("toggle",g)),E.onScroll!=null&&at("scroll",g),E.onScrollEnd!=null&&at("scrollend",g),E.onClick!=null&&(g.onclick=Tr),g=!0):g=!1,g||ii(m,!0)}function Xu(m){for(Bt=m.return;Bt;)switch(Bt.tag){case 5:case 31:case 13:dr=!1;return;case 27:case 3:dr=!0;return;default:Bt=Bt.return}}function nn(m){if(m!==Bt)return!1;if(!ut)return Xu(m),ut=!0,!1;var g=m.tag,x;if((x=g!==3&&g!==27)&&((x=g===5)&&(x=m.type,x=!(x!=="form"&&x!=="button")||Ml(m.type,m.memoizedProps)),x=!x),x&&St&&ii(m),Xu(m),g===13){if(m=m.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(n(317));St=lh(m)}else if(g===31){if(m=m.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(n(317));St=lh(m)}else g===27?(g=St,yi(m.type)?(m=Tl,Tl=null,St=m):St=g):St=Bt?pr(m.stateNode.nextSibling):null;return!0}function Gi(){St=Bt=null,ut=!1}function lo(){var m=ri;return m!==null&&(Zt===null?Zt=m:Zt.push.apply(Zt,m),ri=null),m}function kn(m){ri===null?ri=[m]:ri.push(m)}var uo=j(null),Pi=null,Pr=null;function ni(m,g,x){L(uo,g._currentValue),g._currentValue=x}function Jr(m){m._currentValue=uo.current,V(uo)}function co(m,g,x){for(;m!==null;){var E=m.alternate;if((m.childLanes&g)!==g?(m.childLanes|=g,E!==null&&(E.childLanes|=g)):E!==null&&(E.childLanes&g)!==g&&(E.childLanes|=g),m===x)break;m=m.return}}function ho(m,g,x,E){var J=m.child;for(J!==null&&(J.return=m);J!==null;){var k=J.dependencies;if(k!==null){var H=J.child;k=k.firstContext;e:for(;k!==null;){var oe=k;k=J;for(var be=0;be<g.length;be++)if(oe.context===g[be]){k.lanes|=x,oe=k.alternate,oe!==null&&(oe.lanes|=x),co(k.return,x,m),E||(H=null);break e}k=oe.next}}else if(J.tag===18){if(H=J.return,H===null)throw Error(n(341));H.lanes|=x,k=H.alternate,k!==null&&(k.lanes|=x),co(H,x,m),H=null}else H=J.child;if(H!==null)H.return=J;else for(H=J;H!==null;){if(H===m){H=null;break}if(J=H.sibling,J!==null){J.return=H.return,H=J;break}H=H.return}J=H}}function an(m,g,x,E){m=null;for(var J=g,k=!1;J!==null;){if(!k){if((J.flags&524288)!==0)k=!0;else if((J.flags&262144)!==0)break}if(J.tag===10){var H=J.alternate;if(H===null)throw Error(n(387));if(H=H.memoizedProps,H!==null){var oe=J.type;Kt(J.pendingProps.value,H.value)||(m!==null?m.push(oe):m=[oe])}}else if(J===de.current){if(H=J.alternate,H===null)throw Error(n(387));H.memoizedState.memoizedState!==J.memoizedState.memoizedState&&(m!==null?m.push(fa):m=[fa])}J=J.return}m!==null&&ho(g,m,x,E),g.flags|=262144}function Ga(m){for(m=m.firstContext;m!==null;){if(!Kt(m.context._currentValue,m.memoizedValue))return!0;m=m.next}return!1}function Ji(m){Pi=m,Pr=null,m=m.dependencies,m!==null&&(m.firstContext=null)}function Rt(m){return Gu(Pi,m)}function Pa(m,g){return Pi===null&&Ji(m),Gu(m,g)}function Gu(m,g){var x=g._currentValue;if(g={context:g,memoizedValue:x,next:null},Pr===null){if(m===null)throw Error(n(308));Pr=g,m.dependencies={lanes:0,firstContext:g},m.flags|=524288}else Pr=Pr.next=g;return x}var Ef=typeof AbortController<"u"?AbortController:function(){var m=[],g=this.signal={aborted:!1,addEventListener:function(x,E){m.push(E)}};this.abort=function(){g.aborted=!0,m.forEach(function(x){return x()})}},$f=t.unstable_scheduleCallback,Af=t.unstable_NormalPriority,Dt={$$typeof:C,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function fo(){return{controller:new Ef,data:new Map,refCount:0}}function Fn(m){m.refCount--,m.refCount===0&&$f(Af,function(){m.controller.abort()})}var zn=null,mo=0,sn=0,on=null;function Df(m,g){if(zn===null){var x=zn=[];mo=0,sn=gl(),on={status:"pending",value:void 0,then:function(E){x.push(E)}}}return mo++,g.then(Pu,Pu),g}function Pu(){if(--mo===0&&zn!==null){on!==null&&(on.status="fulfilled");var m=zn;zn=null,sn=0,on=null;for(var g=0;g<m.length;g++)(0,m[g])()}}function Tf(m,g){var x=[],E={status:"pending",value:null,reason:null,then:function(J){x.push(J)}};return m.then(function(){E.status="fulfilled",E.value=g;for(var J=0;J<x.length;J++)(0,x[J])(g)},function(J){for(E.status="rejected",E.reason=J,J=0;J<x.length;J++)(0,x[J])(void 0)}),E}var Ju=z.S;z.S=function(m,g){w0=le(),typeof g=="object"&&g!==null&&typeof g.then=="function"&&Df(m,g),Ju!==null&&Ju(m,g)};var Bi=j(null);function po(){var m=Bi.current;return m!==null?m:xt.pooledCache}function Ja(m,g){g===null?L(Bi,Bi.current):L(Bi,g.pool)}function Bu(){var m=po();return m===null?null:{parent:Dt._currentValue,pool:m}}var un=Error(n(460)),vo=Error(n(474)),Ba=Error(n(542)),Ra={then:function(){}};function Ru(m){return m=m.status,m==="fulfilled"||m==="rejected"}function ku(m,g,x){switch(x=m[x],x===void 0?m.push(g):x!==g&&(g.then(Tr,Tr),g=x),g.status){case"fulfilled":return g.value;case"rejected":throw m=g.reason,zu(m),m;default:if(typeof g.status=="string")g.then(Tr,Tr);else{if(m=xt,m!==null&&100<m.shellSuspendCounter)throw Error(n(482));m=g,m.status="pending",m.then(function(E){if(g.status==="pending"){var J=g;J.status="fulfilled",J.value=E}},function(E){if(g.status==="pending"){var J=g;J.status="rejected",J.reason=E}})}switch(g.status){case"fulfilled":return g.value;case"rejected":throw m=g.reason,zu(m),m}throw ki=g,un}}function Ri(m){try{var g=m._init;return g(m._payload)}catch(x){throw x!==null&&typeof x=="object"&&typeof x.then=="function"?(ki=x,un):x}}var ki=null;function Fu(){if(ki===null)throw Error(n(459));var m=ki;return ki=null,m}function zu(m){if(m===un||m===Ba)throw Error(n(483))}var cn=null,Ln=0;function ka(m){var g=Ln;return Ln+=1,cn===null&&(cn=[]),ku(cn,m,g)}function In(m,g){g=g.props.ref,m.ref=g!==void 0?g:null}function Fa(m,g){throw g.$$typeof===p?Error(n(525)):(m=Object.prototype.toString.call(g),Error(n(31,m==="[object Object]"?"object with keys {"+Object.keys(g).join(", ")+"}":m)))}function Lu(m){function g(_e,Ce){if(m){var $e=_e.deletions;$e===null?(_e.deletions=[Ce],_e.flags|=16):$e.push(Ce)}}function x(_e,Ce){if(!m)return null;for(;Ce!==null;)g(_e,Ce),Ce=Ce.sibling;return null}function E(_e){for(var Ce=new Map;_e!==null;)_e.key!==null?Ce.set(_e.key,_e):Ce.set(_e.index,_e),_e=_e.sibling;return Ce}function J(_e,Ce){return _e=Xr(_e,Ce),_e.index=0,_e.sibling=null,_e}function k(_e,Ce,$e){return _e.index=$e,m?($e=_e.alternate,$e!==null?($e=$e.index,$e<Ce?(_e.flags|=67108866,Ce):$e):(_e.flags|=67108866,Ce)):(_e.flags|=1048576,Ce)}function H(_e){return m&&_e.alternate===null&&(_e.flags|=67108866),_e}function oe(_e,Ce,$e,Re){return Ce===null||Ce.tag!==6?(Ce=io($e,_e.mode,Re),Ce.return=_e,Ce):(Ce=J(Ce,$e),Ce.return=_e,Ce)}function be(_e,Ce,$e,Re){var et=$e.type;return et===b?Je(_e,Ce,$e.props.children,Re,$e.key):Ce!==null&&(Ce.elementType===et||typeof et=="object"&&et!==null&&et.$$typeof===O&&Ri(et)===Ce.type)?(Ce=J(Ce,$e.props),In(Ce,$e),Ce.return=_e,Ce):(Ce=Oa($e.type,$e.key,$e.props,null,_e.mode,Re),In(Ce,$e),Ce.return=_e,Ce)}function Ae(_e,Ce,$e,Re){return Ce===null||Ce.tag!==4||Ce.stateNode.containerInfo!==$e.containerInfo||Ce.stateNode.implementation!==$e.implementation?(Ce=no($e,_e.mode,Re),Ce.return=_e,Ce):(Ce=J(Ce,$e.children||[]),Ce.return=_e,Ce)}function Je(_e,Ce,$e,Re,et){return Ce===null||Ce.tag!==7?(Ce=Xi($e,_e.mode,Re,et),Ce.return=_e,Ce):(Ce=J(Ce,$e),Ce.return=_e,Ce)}function ke(_e,Ce,$e){if(typeof Ce=="string"&&Ce!==""||typeof Ce=="number"||typeof Ce=="bigint")return Ce=io(""+Ce,_e.mode,$e),Ce.return=_e,Ce;if(typeof Ce=="object"&&Ce!==null){switch(Ce.$$typeof){case v:return $e=Oa(Ce.type,Ce.key,Ce.props,null,_e.mode,$e),In($e,Ce),$e.return=_e,$e;case y:return Ce=no(Ce,_e.mode,$e),Ce.return=_e,Ce;case O:return Ce=Ri(Ce),ke(_e,Ce,$e)}if(ee(Ce)||F(Ce))return Ce=Xi(Ce,_e.mode,$e,null),Ce.return=_e,Ce;if(typeof Ce.then=="function")return ke(_e,ka(Ce),$e);if(Ce.$$typeof===C)return ke(_e,Pa(_e,Ce),$e);Fa(_e,Ce)}return null}function Oe(_e,Ce,$e,Re){var et=Ce!==null?Ce.key:null;if(typeof $e=="string"&&$e!==""||typeof $e=="number"||typeof $e=="bigint")return et!==null?null:oe(_e,Ce,""+$e,Re);if(typeof $e=="object"&&$e!==null){switch($e.$$typeof){case v:return $e.key===et?be(_e,Ce,$e,Re):null;case y:return $e.key===et?Ae(_e,Ce,$e,Re):null;case O:return $e=Ri($e),Oe(_e,Ce,$e,Re)}if(ee($e)||F($e))return et!==null?null:Je(_e,Ce,$e,Re,null);if(typeof $e.then=="function")return Oe(_e,Ce,ka($e),Re);if($e.$$typeof===C)return Oe(_e,Ce,Pa(_e,$e),Re);Fa(_e,$e)}return null}function Ge(_e,Ce,$e,Re,et){if(typeof Re=="string"&&Re!==""||typeof Re=="number"||typeof Re=="bigint")return _e=_e.get($e)||null,oe(Ce,_e,""+Re,et);if(typeof Re=="object"&&Re!==null){switch(Re.$$typeof){case v:return _e=_e.get(Re.key===null?$e:Re.key)||null,be(Ce,_e,Re,et);case y:return _e=_e.get(Re.key===null?$e:Re.key)||null,Ae(Ce,_e,Re,et);case O:return Re=Ri(Re),Ge(_e,Ce,$e,Re,et)}if(ee(Re)||F(Re))return _e=_e.get($e)||null,Je(Ce,_e,Re,et,null);if(typeof Re.then=="function")return Ge(_e,Ce,$e,ka(Re),et);if(Re.$$typeof===C)return Ge(_e,Ce,$e,Pa(Ce,Re),et);Fa(Ce,Re)}return null}function Qe(_e,Ce,$e,Re){for(var et=null,ht=null,Ke=Ce,it=Ce=0,lt=null;Ke!==null&&it<$e.length;it++){Ke.index>it?(lt=Ke,Ke=null):lt=Ke.sibling;var ft=Oe(_e,Ke,$e[it],Re);if(ft===null){Ke===null&&(Ke=lt);break}m&&Ke&&ft.alternate===null&&g(_e,Ke),Ce=k(ft,Ce,it),ht===null?et=ft:ht.sibling=ft,ht=ft,Ke=lt}if(it===$e.length)return x(_e,Ke),ut&&Gr(_e,it),et;if(Ke===null){for(;it<$e.length;it++)Ke=ke(_e,$e[it],Re),Ke!==null&&(Ce=k(Ke,Ce,it),ht===null?et=Ke:ht.sibling=Ke,ht=Ke);return ut&&Gr(_e,it),et}for(Ke=E(Ke);it<$e.length;it++)lt=Ge(Ke,_e,it,$e[it],Re),lt!==null&&(m&&lt.alternate!==null&&Ke.delete(lt.key===null?it:lt.key),Ce=k(lt,Ce,it),ht===null?et=lt:ht.sibling=lt,ht=lt);return m&&Ke.forEach(function(wi){return g(_e,wi)}),ut&&Gr(_e,it),et}function tt(_e,Ce,$e,Re){if($e==null)throw Error(n(151));for(var et=null,ht=null,Ke=Ce,it=Ce=0,lt=null,ft=$e.next();Ke!==null&&!ft.done;it++,ft=$e.next()){Ke.index>it?(lt=Ke,Ke=null):lt=Ke.sibling;var wi=Oe(_e,Ke,ft.value,Re);if(wi===null){Ke===null&&(Ke=lt);break}m&&Ke&&wi.alternate===null&&g(_e,Ke),Ce=k(wi,Ce,it),ht===null?et=wi:ht.sibling=wi,ht=wi,Ke=lt}if(ft.done)return x(_e,Ke),ut&&Gr(_e,it),et;if(Ke===null){for(;!ft.done;it++,ft=$e.next())ft=ke(_e,ft.value,Re),ft!==null&&(Ce=k(ft,Ce,it),ht===null?et=ft:ht.sibling=ft,ht=ft);return ut&&Gr(_e,it),et}for(Ke=E(Ke);!ft.done;it++,ft=$e.next())ft=Ge(Ke,_e,it,ft.value,Re),ft!==null&&(m&&ft.alternate!==null&&Ke.delete(ft.key===null?it:ft.key),Ce=k(ft,Ce,it),ht===null?et=ft:ht.sibling=ft,ht=ft);return m&&Ke.forEach(function(Ld){return g(_e,Ld)}),ut&&Gr(_e,it),et}function bt(_e,Ce,$e,Re){if(typeof $e=="object"&&$e!==null&&$e.type===b&&$e.key===null&&($e=$e.props.children),typeof $e=="object"&&$e!==null){switch($e.$$typeof){case v:e:{for(var et=$e.key;Ce!==null;){if(Ce.key===et){if(et=$e.type,et===b){if(Ce.tag===7){x(_e,Ce.sibling),Re=J(Ce,$e.props.children),Re.return=_e,_e=Re;break e}}else if(Ce.elementType===et||typeof et=="object"&&et!==null&&et.$$typeof===O&&Ri(et)===Ce.type){x(_e,Ce.sibling),Re=J(Ce,$e.props),In(Re,$e),Re.return=_e,_e=Re;break e}x(_e,Ce);break}else g(_e,Ce);Ce=Ce.sibling}$e.type===b?(Re=Xi($e.props.children,_e.mode,Re,$e.key),Re.return=_e,_e=Re):(Re=Oa($e.type,$e.key,$e.props,null,_e.mode,Re),In(Re,$e),Re.return=_e,_e=Re)}return H(_e);case y:e:{for(et=$e.key;Ce!==null;){if(Ce.key===et)if(Ce.tag===4&&Ce.stateNode.containerInfo===$e.containerInfo&&Ce.stateNode.implementation===$e.implementation){x(_e,Ce.sibling),Re=J(Ce,$e.children||[]),Re.return=_e,_e=Re;break e}else{x(_e,Ce);break}else g(_e,Ce);Ce=Ce.sibling}Re=no($e,_e.mode,Re),Re.return=_e,_e=Re}return H(_e);case O:return $e=Ri($e),bt(_e,Ce,$e,Re)}if(ee($e))return Qe(_e,Ce,$e,Re);if(F($e)){if(et=F($e),typeof et!="function")throw Error(n(150));return $e=et.call($e),tt(_e,Ce,$e,Re)}if(typeof $e.then=="function")return bt(_e,Ce,ka($e),Re);if($e.$$typeof===C)return bt(_e,Ce,Pa(_e,$e),Re);Fa(_e,$e)}return typeof $e=="string"&&$e!==""||typeof $e=="number"||typeof $e=="bigint"?($e=""+$e,Ce!==null&&Ce.tag===6?(x(_e,Ce.sibling),Re=J(Ce,$e),Re.return=_e,_e=Re):(x(_e,Ce),Re=io($e,_e.mode,Re),Re.return=_e,_e=Re),H(_e)):x(_e,Ce)}return function(_e,Ce,$e,Re){try{Ln=0;var et=bt(_e,Ce,$e,Re);return cn=null,et}catch(Ke){if(Ke===un||Ke===Ba)throw Ke;var ht=er(29,Ke,null,_e.mode);return ht.lanes=Re,ht.return=_e,ht}}}var Fi=Lu(!0),Iu=Lu(!1),ai=!1;function go(m){m.updateQueue={baseState:m.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function yo(m,g){m=m.updateQueue,g.updateQueue===m&&(g.updateQueue={baseState:m.baseState,firstBaseUpdate:m.firstBaseUpdate,lastBaseUpdate:m.lastBaseUpdate,shared:m.shared,callbacks:null})}function si(m){return{lane:m,tag:0,payload:null,callback:null,next:null}}function oi(m,g,x){var E=m.updateQueue;if(E===null)return null;if(E=E.shared,(dt&2)!==0){var J=E.pending;return J===null?g.next=g:(g.next=J.next,J.next=g),E.pending=g,g=Ta(m),Mu(m,null,x),g}return Da(m,E,g,x),Ta(m)}function Un(m,g,x){if(g=g.updateQueue,g!==null&&(g=g.shared,(x&4194048)!==0)){var E=g.lanes;E&=m.pendingLanes,x|=E,g.lanes=x,Hr(m,x)}}function bo(m,g){var x=m.updateQueue,E=m.alternate;if(E!==null&&(E=E.updateQueue,x===E)){var J=null,k=null;if(x=x.firstBaseUpdate,x!==null){do{var H={lane:x.lane,tag:x.tag,payload:x.payload,callback:null,next:null};k===null?J=k=H:k=k.next=H,x=x.next}while(x!==null);k===null?J=k=g:k=k.next=g}else J=k=g;x={baseState:E.baseState,firstBaseUpdate:J,lastBaseUpdate:k,shared:E.shared,callbacks:E.callbacks},m.updateQueue=x;return}m=x.lastBaseUpdate,m===null?x.firstBaseUpdate=g:m.next=g,x.lastBaseUpdate=g}var xo=!1;function qn(){if(xo){var m=on;if(m!==null)throw m}}function Yn(m,g,x,E){xo=!1;var J=m.updateQueue;ai=!1;var k=J.firstBaseUpdate,H=J.lastBaseUpdate,oe=J.shared.pending;if(oe!==null){J.shared.pending=null;var be=oe,Ae=be.next;be.next=null,H===null?k=Ae:H.next=Ae,H=be;var Je=m.alternate;Je!==null&&(Je=Je.updateQueue,oe=Je.lastBaseUpdate,oe!==H&&(oe===null?Je.firstBaseUpdate=Ae:oe.next=Ae,Je.lastBaseUpdate=be))}if(k!==null){var ke=J.baseState;H=0,Je=Ae=be=null,oe=k;do{var Oe=oe.lane&-536870913,Ge=Oe!==oe.lane;if(Ge?(ot&Oe)===Oe:(E&Oe)===Oe){Oe!==0&&Oe===sn&&(xo=!0),Je!==null&&(Je=Je.next={lane:0,tag:oe.tag,payload:oe.payload,callback:null,next:null});e:{var Qe=m,tt=oe;Oe=g;var bt=x;switch(tt.tag){case 1:if(Qe=tt.payload,typeof Qe=="function"){ke=Qe.call(bt,ke,Oe);break e}ke=Qe;break e;case 3:Qe.flags=Qe.flags&-65537|128;case 0:if(Qe=tt.payload,Oe=typeof Qe=="function"?Qe.call(bt,ke,Oe):Qe,Oe==null)break e;ke=d({},ke,Oe);break e;case 2:ai=!0}}Oe=oe.callback,Oe!==null&&(m.flags|=64,Ge&&(m.flags|=8192),Ge=J.callbacks,Ge===null?J.callbacks=[Oe]:Ge.push(Oe))}else Ge={lane:Oe,tag:oe.tag,payload:oe.payload,callback:oe.callback,next:null},Je===null?(Ae=Je=Ge,be=ke):Je=Je.next=Ge,H|=Oe;if(oe=oe.next,oe===null){if(oe=J.shared.pending,oe===null)break;Ge=oe,oe=Ge.next,Ge.next=null,J.lastBaseUpdate=Ge,J.shared.pending=null}}while(!0);Je===null&&(be=ke),J.baseState=be,J.firstBaseUpdate=Ae,J.lastBaseUpdate=Je,k===null&&(J.shared.lanes=0),fi|=H,m.lanes=H,m.memoizedState=ke}}function Uu(m,g){if(typeof m!="function")throw Error(n(191,m));m.call(g)}function qu(m,g){var x=m.callbacks;if(x!==null)for(m.callbacks=null,m=0;m<x.length;m++)Uu(x[m],g)}var hn=j(null),za=j(0);function Yu(m,g){m=Yr,L(za,m),L(hn,g),Yr=m|g.baseLanes}function Co(){L(za,Yr),L(hn,hn.current)}function So(){Yr=za.current,V(hn),V(za)}var tr=j(null),mr=null;function li(m){var g=m.alternate;L($t,$t.current&1),L(tr,m),mr===null&&(g===null||hn.current!==null||g.memoizedState!==null)&&(mr=m)}function wo(m){L($t,$t.current),L(tr,m),mr===null&&(mr=m)}function ju(m){m.tag===22?(L($t,$t.current),L(tr,m),mr===null&&(mr=m)):ui()}function ui(){L($t,$t.current),L(tr,tr.current)}function rr(m){V(tr),mr===m&&(mr=null),V($t)}var $t=j(0);function La(m){for(var g=m;g!==null;){if(g.tag===13){var x=g.memoizedState;if(x!==null&&(x=x.dehydrated,x===null||Al(x)||Dl(x)))return g}else if(g.tag===19&&(g.memoizedProps.revealOrder==="forwards"||g.memoizedProps.revealOrder==="backwards"||g.memoizedProps.revealOrder==="unstable_legacy-backwards"||g.memoizedProps.revealOrder==="together")){if((g.flags&128)!==0)return g}else if(g.child!==null){g.child.return=g,g=g.child;continue}if(g===m)break;for(;g.sibling===null;){if(g.return===null||g.return===m)return null;g=g.return}g.sibling.return=g.return,g=g.sibling}return null}var Br=0,rt=null,gt=null,Tt=null,Ia=!1,fn=!1,zi=!1,Ua=0,jn=0,dn=null,Of=0;function Mt(){throw Error(n(321))}function _o(m,g){if(g===null)return!1;for(var x=0;x<g.length&&x<m.length;x++)if(!Kt(m[x],g[x]))return!1;return!0}function No(m,g,x,E,J,k){return Br=k,rt=g,g.memoizedState=null,g.updateQueue=null,g.lanes=0,z.H=m===null||m.memoizedState===null?Xc:Fo,zi=!1,k=x(E,J),zi=!1,fn&&(k=Hu(g,x,E,J)),Vu(m),k}function Vu(m){z.H=Zn;var g=gt!==null&&gt.next!==null;if(Br=0,Tt=gt=rt=null,Ia=!1,jn=0,dn=null,g)throw Error(n(300));m===null||Ot||(m=m.dependencies,m!==null&&Ga(m)&&(Ot=!0))}function Hu(m,g,x,E){rt=m;var J=0;do{if(fn&&(dn=null),jn=0,fn=!1,25<=J)throw Error(n(301));if(J+=1,Tt=gt=null,m.updateQueue!=null){var k=m.updateQueue;k.lastEffect=null,k.events=null,k.stores=null,k.memoCache!=null&&(k.memoCache.index=0)}z.H=Gc,k=g(x,E)}while(fn);return k}function Xf(){var m=z.H,g=m.useState()[0];return g=typeof g.then=="function"?Vn(g):g,m=m.useState()[0],(gt!==null?gt.memoizedState:null)!==m&&(rt.flags|=1024),g}function Mo(){var m=Ua!==0;return Ua=0,m}function Eo(m,g,x){g.updateQueue=m.updateQueue,g.flags&=-2053,m.lanes&=~x}function $o(m){if(Ia){for(m=m.memoizedState;m!==null;){var g=m.queue;g!==null&&(g.pending=null),m=m.next}Ia=!1}Br=0,Tt=gt=rt=null,fn=!1,jn=Ua=0,dn=null}function Ut(){var m={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Tt===null?rt.memoizedState=Tt=m:Tt=Tt.next=m,Tt}function At(){if(gt===null){var m=rt.alternate;m=m!==null?m.memoizedState:null}else m=gt.next;var g=Tt===null?rt.memoizedState:Tt.next;if(g!==null)Tt=g,gt=m;else{if(m===null)throw rt.alternate===null?Error(n(467)):Error(n(310));gt=m,m={memoizedState:gt.memoizedState,baseState:gt.baseState,baseQueue:gt.baseQueue,queue:gt.queue,next:null},Tt===null?rt.memoizedState=Tt=m:Tt=Tt.next=m}return Tt}function qa(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Vn(m){var g=jn;return jn+=1,dn===null&&(dn=[]),m=ku(dn,m,g),g=rt,(Tt===null?g.memoizedState:Tt.next)===null&&(g=g.alternate,z.H=g===null||g.memoizedState===null?Xc:Fo),m}function Ya(m){if(m!==null&&typeof m=="object"){if(typeof m.then=="function")return Vn(m);if(m.$$typeof===C)return Rt(m)}throw Error(n(438,String(m)))}function Ao(m){var g=null,x=rt.updateQueue;if(x!==null&&(g=x.memoCache),g==null){var E=rt.alternate;E!==null&&(E=E.updateQueue,E!==null&&(E=E.memoCache,E!=null&&(g={data:E.data.map(function(J){return J.slice()}),index:0})))}if(g==null&&(g={data:[],index:0}),x===null&&(x=qa(),rt.updateQueue=x),x.memoCache=g,x=g.data[g.index],x===void 0)for(x=g.data[g.index]=Array(m),E=0;E<m;E++)x[E]=R;return g.index++,x}function Rr(m,g){return typeof g=="function"?g(m):g}function ja(m){var g=At();return Do(g,gt,m)}function Do(m,g,x){var E=m.queue;if(E===null)throw Error(n(311));E.lastRenderedReducer=x;var J=m.baseQueue,k=E.pending;if(k!==null){if(J!==null){var H=J.next;J.next=k.next,k.next=H}g.baseQueue=J=k,E.pending=null}if(k=m.baseState,J===null)m.memoizedState=k;else{g=J.next;var oe=H=null,be=null,Ae=g,Je=!1;do{var ke=Ae.lane&-536870913;if(ke!==Ae.lane?(ot&ke)===ke:(Br&ke)===ke){var Oe=Ae.revertLane;if(Oe===0)be!==null&&(be=be.next={lane:0,revertLane:0,gesture:null,action:Ae.action,hasEagerState:Ae.hasEagerState,eagerState:Ae.eagerState,next:null}),ke===sn&&(Je=!0);else if((Br&Oe)===Oe){Ae=Ae.next,Oe===sn&&(Je=!0);continue}else ke={lane:0,revertLane:Ae.revertLane,gesture:null,action:Ae.action,hasEagerState:Ae.hasEagerState,eagerState:Ae.eagerState,next:null},be===null?(oe=be=ke,H=k):be=be.next=ke,rt.lanes|=Oe,fi|=Oe;ke=Ae.action,zi&&x(k,ke),k=Ae.hasEagerState?Ae.eagerState:x(k,ke)}else Oe={lane:ke,revertLane:Ae.revertLane,gesture:Ae.gesture,action:Ae.action,hasEagerState:Ae.hasEagerState,eagerState:Ae.eagerState,next:null},be===null?(oe=be=Oe,H=k):be=be.next=Oe,rt.lanes|=ke,fi|=ke;Ae=Ae.next}while(Ae!==null&&Ae!==g);if(be===null?H=k:be.next=oe,!Kt(k,m.memoizedState)&&(Ot=!0,Je&&(x=on,x!==null)))throw x;m.memoizedState=k,m.baseState=H,m.baseQueue=be,E.lastRenderedState=k}return J===null&&(E.lanes=0),[m.memoizedState,E.dispatch]}function To(m){var g=At(),x=g.queue;if(x===null)throw Error(n(311));x.lastRenderedReducer=m;var E=x.dispatch,J=x.pending,k=g.memoizedState;if(J!==null){x.pending=null;var H=J=J.next;do k=m(k,H.action),H=H.next;while(H!==J);Kt(k,g.memoizedState)||(Ot=!0),g.memoizedState=k,g.baseQueue===null&&(g.baseState=k),x.lastRenderedState=k}return[k,E]}function Zu(m,g,x){var E=rt,J=At(),k=ut;if(k){if(x===void 0)throw Error(n(407));x=x()}else x=g();var H=!Kt((gt||J).memoizedState,x);if(H&&(J.memoizedState=x,Ot=!0),J=J.queue,Go(Ku.bind(null,E,J,m),[m]),J.getSnapshot!==g||H||Tt!==null&&Tt.memoizedState.tag&1){if(E.flags|=2048,mn(9,{destroy:void 0},Qu.bind(null,E,J,x,g),null),xt===null)throw Error(n(349));k||(Br&127)!==0||Wu(E,g,x)}return x}function Wu(m,g,x){m.flags|=16384,m={getSnapshot:g,value:x},g=rt.updateQueue,g===null?(g=qa(),rt.updateQueue=g,g.stores=[m]):(x=g.stores,x===null?g.stores=[m]:x.push(m))}function Qu(m,g,x,E){g.value=x,g.getSnapshot=E,ec(g)&&tc(m)}function Ku(m,g,x){return x(function(){ec(g)&&tc(m)})}function ec(m){var g=m.getSnapshot;m=m.value;try{var x=g();return!Kt(m,x)}catch{return!0}}function tc(m){var g=Oi(m,2);g!==null&&Wt(g,m,2)}function Oo(m){var g=Ut();if(typeof m=="function"){var x=m;if(m=x(),zi){je(!0);try{x()}finally{je(!1)}}}return g.memoizedState=g.baseState=m,g.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Rr,lastRenderedState:m},g}function rc(m,g,x,E){return m.baseState=x,Do(m,gt,typeof E=="function"?E:Rr)}function Gf(m,g,x,E,J){if(Za(m))throw Error(n(485));if(m=g.action,m!==null){var k={payload:J,action:m,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(H){k.listeners.push(H)}};z.T!==null?x(!0):k.isTransition=!1,E(k),x=g.pending,x===null?(k.next=g.pending=k,ic(g,k)):(k.next=x.next,g.pending=x.next=k)}}function ic(m,g){var x=g.action,E=g.payload,J=m.state;if(g.isTransition){var k=z.T,H={};z.T=H;try{var oe=x(J,E),be=z.S;be!==null&&be(H,oe),nc(m,g,oe)}catch(Ae){Xo(m,g,Ae)}finally{k!==null&&H.types!==null&&(k.types=H.types),z.T=k}}else try{k=x(J,E),nc(m,g,k)}catch(Ae){Xo(m,g,Ae)}}function nc(m,g,x){x!==null&&typeof x=="object"&&typeof x.then=="function"?x.then(function(E){ac(m,g,E)},function(E){return Xo(m,g,E)}):ac(m,g,x)}function ac(m,g,x){g.status="fulfilled",g.value=x,sc(g),m.state=x,g=m.pending,g!==null&&(x=g.next,x===g?m.pending=null:(x=x.next,g.next=x,ic(m,x)))}function Xo(m,g,x){var E=m.pending;if(m.pending=null,E!==null){E=E.next;do g.status="rejected",g.reason=x,sc(g),g=g.next;while(g!==E)}m.action=null}function sc(m){m=m.listeners;for(var g=0;g<m.length;g++)(0,m[g])()}function oc(m,g){return g}function lc(m,g){if(ut){var x=xt.formState;if(x!==null){e:{var E=rt;if(ut){if(St){t:{for(var J=St,k=dr;J.nodeType!==8;){if(!k){J=null;break t}if(J=pr(J.nextSibling),J===null){J=null;break t}}k=J.data,J=k==="F!"||k==="F"?J:null}if(J){St=pr(J.nextSibling),E=J.data==="F!";break e}}ii(E)}E=!1}E&&(g=x[0])}}return x=Ut(),x.memoizedState=x.baseState=g,E={pending:null,lanes:0,dispatch:null,lastRenderedReducer:oc,lastRenderedState:g},x.queue=E,x=$c.bind(null,rt,E),E.dispatch=x,E=Oo(!1),k=ko.bind(null,rt,!1,E.queue),E=Ut(),J={state:g,dispatch:null,action:m,pending:null},E.queue=J,x=Gf.bind(null,rt,J,k,x),J.dispatch=x,E.memoizedState=m,[g,x,!1]}function uc(m){var g=At();return cc(g,gt,m)}function cc(m,g,x){if(g=Do(m,g,oc)[0],m=ja(Rr)[0],typeof g=="object"&&g!==null&&typeof g.then=="function")try{var E=Vn(g)}catch(H){throw H===un?Ba:H}else E=g;g=At();var J=g.queue,k=J.dispatch;return x!==g.memoizedState&&(rt.flags|=2048,mn(9,{destroy:void 0},Pf.bind(null,J,x),null)),[E,k,m]}function Pf(m,g){m.action=g}function hc(m){var g=At(),x=gt;if(x!==null)return cc(g,x,m);At(),g=g.memoizedState,x=At();var E=x.queue.dispatch;return x.memoizedState=m,[g,E,!1]}function mn(m,g,x,E){return m={tag:m,create:x,deps:E,inst:g,next:null},g=rt.updateQueue,g===null&&(g=qa(),rt.updateQueue=g),x=g.lastEffect,x===null?g.lastEffect=m.next=m:(E=x.next,x.next=m,m.next=E,g.lastEffect=m),m}function fc(){return At().memoizedState}function Va(m,g,x,E){var J=Ut();rt.flags|=m,J.memoizedState=mn(1|g,{destroy:void 0},x,E===void 0?null:E)}function Ha(m,g,x,E){var J=At();E=E===void 0?null:E;var k=J.memoizedState.inst;gt!==null&&E!==null&&_o(E,gt.memoizedState.deps)?J.memoizedState=mn(g,k,x,E):(rt.flags|=m,J.memoizedState=mn(1|g,k,x,E))}function dc(m,g){Va(8390656,8,m,g)}function Go(m,g){Ha(2048,8,m,g)}function Jf(m){rt.flags|=4;var g=rt.updateQueue;if(g===null)g=qa(),rt.updateQueue=g,g.events=[m];else{var x=g.events;x===null?g.events=[m]:x.push(m)}}function mc(m){var g=At().memoizedState;return Jf({ref:g,nextImpl:m}),function(){if((dt&2)!==0)throw Error(n(440));return g.impl.apply(void 0,arguments)}}function pc(m,g){return Ha(4,2,m,g)}function vc(m,g){return Ha(4,4,m,g)}function gc(m,g){if(typeof g=="function"){m=m();var x=g(m);return function(){typeof x=="function"?x():g(null)}}if(g!=null)return m=m(),g.current=m,function(){g.current=null}}function yc(m,g,x){x=x!=null?x.concat([m]):null,Ha(4,4,gc.bind(null,g,m),x)}function Po(){}function bc(m,g){var x=At();g=g===void 0?null:g;var E=x.memoizedState;return g!==null&&_o(g,E[1])?E[0]:(x.memoizedState=[m,g],m)}function xc(m,g){var x=At();g=g===void 0?null:g;var E=x.memoizedState;if(g!==null&&_o(g,E[1]))return E[0];if(E=m(),zi){je(!0);try{m()}finally{je(!1)}}return x.memoizedState=[E,g],E}function Jo(m,g,x){return x===void 0||(Br&1073741824)!==0&&(ot&261930)===0?m.memoizedState=g:(m.memoizedState=x,m=N0(),rt.lanes|=m,fi|=m,x)}function Cc(m,g,x,E){return Kt(x,g)?x:hn.current!==null?(m=Jo(m,x,E),Kt(m,g)||(Ot=!0),m):(Br&42)===0||(Br&1073741824)!==0&&(ot&261930)===0?(Ot=!0,m.memoizedState=x):(m=N0(),rt.lanes|=m,fi|=m,g)}function wc(m,g,x,E,J){var k=Y.p;Y.p=k!==0&&8>k?k:8;var H=z.T,oe={};z.T=oe,ko(m,!1,g,x);try{var be=J(),Ae=z.S;if(Ae!==null&&Ae(oe,be),be!==null&&typeof be=="object"&&typeof be.then=="function"){var Je=Tf(be,E);Hn(m,g,Je,ar(m))}else Hn(m,g,E,ar(m))}catch(ke){Hn(m,g,{then:function(){},status:"rejected",reason:ke},ar())}finally{Y.p=k,H!==null&&oe.types!==null&&(H.types=oe.types),z.T=H}}function Bf(){}function Bo(m,g,x,E){if(m.tag!==5)throw Error(n(476));var J=_c(m).queue;wc(m,J,g,K,x===null?Bf:function(){return Nc(m),x(E)})}function _c(m){var g=m.memoizedState;if(g!==null)return g;g={memoizedState:K,baseState:K,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Rr,lastRenderedState:K},next:null};var x={};return g.next={memoizedState:x,baseState:x,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Rr,lastRenderedState:x},next:null},m.memoizedState=g,m=m.alternate,m!==null&&(m.memoizedState=g),g}function Nc(m){var g=_c(m);g.next===null&&(g=m.alternate.memoizedState),Hn(m,g.next.queue,{},ar())}function Ro(){return Rt(fa)}function Mc(){return At().memoizedState}function Ec(){return At().memoizedState}function Rf(m){for(var g=m.return;g!==null;){switch(g.tag){case 24:case 3:var x=ar();m=si(x);var E=oi(g,m,x);E!==null&&(Wt(E,g,x),Un(E,g,x)),g={cache:fo()},m.payload=g;return}g=g.return}}function kf(m,g,x){var E=ar();x={lane:E,revertLane:0,gesture:null,action:x,hasEagerState:!1,eagerState:null,next:null},Za(m)?Ac(g,x):(x=eo(m,g,x,E),x!==null&&(Wt(x,m,E),Oc(x,g,E)))}function $c(m,g,x){var E=ar();Hn(m,g,x,E)}function Hn(m,g,x,E){var J={lane:E,revertLane:0,gesture:null,action:x,hasEagerState:!1,eagerState:null,next:null};if(Za(m))Ac(g,J);else{var k=m.alternate;if(m.lanes===0&&(k===null||k.lanes===0)&&(k=g.lastRenderedReducer,k!==null))try{var H=g.lastRenderedState,oe=k(H,x);if(J.hasEagerState=!0,J.eagerState=oe,Kt(oe,H))return Da(m,g,J,0),xt===null&&Aa(),!1}catch{}if(x=eo(m,g,J,E),x!==null)return Wt(x,m,E),Oc(x,g,E),!0}return!1}function ko(m,g,x,E){if(E={lane:2,revertLane:gl(),gesture:null,action:E,hasEagerState:!1,eagerState:null,next:null},Za(m)){if(g)throw Error(n(479))}else g=eo(m,x,E,2),g!==null&&Wt(g,m,2)}function Za(m){var g=m.alternate;return m===rt||g!==null&&g===rt}function Ac(m,g){fn=Ia=!0;var x=m.pending;x===null?g.next=g:(g.next=x.next,x.next=g),m.pending=g}function Oc(m,g,x){if((x&4194048)!==0){var E=g.lanes;E&=m.pendingLanes,x|=E,g.lanes=x,Hr(m,x)}}var Zn={readContext:Rt,use:Ya,useCallback:Mt,useContext:Mt,useEffect:Mt,useImperativeHandle:Mt,useLayoutEffect:Mt,useInsertionEffect:Mt,useMemo:Mt,useReducer:Mt,useRef:Mt,useState:Mt,useDebugValue:Mt,useDeferredValue:Mt,useTransition:Mt,useSyncExternalStore:Mt,useId:Mt,useHostTransitionStatus:Mt,useFormState:Mt,useActionState:Mt,useOptimistic:Mt,useMemoCache:Mt,useCacheRefresh:Mt};Zn.useEffectEvent=Mt;var Xc={readContext:Rt,use:Ya,useCallback:function(m,g){return Ut().memoizedState=[m,g===void 0?null:g],m},useContext:Rt,useEffect:dc,useImperativeHandle:function(m,g,x){x=x!=null?x.concat([m]):null,Va(4194308,4,gc.bind(null,g,m),x)},useLayoutEffect:function(m,g){return Va(4194308,4,m,g)},useInsertionEffect:function(m,g){Va(4,2,m,g)},useMemo:function(m,g){var x=Ut();g=g===void 0?null:g;var E=m();if(zi){je(!0);try{m()}finally{je(!1)}}return x.memoizedState=[E,g],E},useReducer:function(m,g,x){var E=Ut();if(x!==void 0){var J=x(g);if(zi){je(!0);try{x(g)}finally{je(!1)}}}else J=g;return E.memoizedState=E.baseState=J,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:m,lastRenderedState:J},E.queue=m,m=m.dispatch=kf.bind(null,rt,m),[E.memoizedState,m]},useRef:function(m){var g=Ut();return m={current:m},g.memoizedState=m},useState:function(m){m=Oo(m);var g=m.queue,x=$c.bind(null,rt,g);return g.dispatch=x,[m.memoizedState,x]},useDebugValue:Po,useDeferredValue:function(m,g){var x=Ut();return Jo(x,m,g)},useTransition:function(){var m=Oo(!1);return m=wc.bind(null,rt,m.queue,!0,!1),Ut().memoizedState=m,[!1,m]},useSyncExternalStore:function(m,g,x){var E=rt,J=Ut();if(ut){if(x===void 0)throw Error(n(407));x=x()}else{if(x=g(),xt===null)throw Error(n(349));(ot&127)!==0||Wu(E,g,x)}J.memoizedState=x;var k={value:x,getSnapshot:g};return J.queue=k,dc(Ku.bind(null,E,k,m),[m]),E.flags|=2048,mn(9,{destroy:void 0},Qu.bind(null,E,k,x,g),null),x},useId:function(){var m=Ut(),g=xt.identifierPrefix;if(ut){var x=Nr,E=_r;x=(E&~(1<<32-Ee(E)-1)).toString(32)+x,g="_"+g+"R_"+x,x=Ua++,0<x&&(g+="H"+x.toString(32)),g+="_"}else x=Of++,g="_"+g+"r_"+x.toString(32)+"_";return m.memoizedState=g},useHostTransitionStatus:Ro,useFormState:lc,useActionState:lc,useOptimistic:function(m){var g=Ut();g.memoizedState=g.baseState=m;var x={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return g.queue=x,g=ko.bind(null,rt,!0,x),x.dispatch=g,[m,g]},useMemoCache:Ao,useCacheRefresh:function(){return Ut().memoizedState=Rf.bind(null,rt)},useEffectEvent:function(m){var g=Ut(),x={impl:m};return g.memoizedState=x,function(){if((dt&2)!==0)throw Error(n(440));return x.impl.apply(void 0,arguments)}}},Fo={readContext:Rt,use:Ya,useCallback:bc,useContext:Rt,useEffect:Go,useImperativeHandle:yc,useInsertionEffect:pc,useLayoutEffect:vc,useMemo:xc,useReducer:ja,useRef:fc,useState:function(){return ja(Rr)},useDebugValue:Po,useDeferredValue:function(m,g){var x=At();return Cc(x,gt.memoizedState,m,g)},useTransition:function(){var m=ja(Rr)[0],g=At().memoizedState;return[typeof m=="boolean"?m:Vn(m),g]},useSyncExternalStore:Zu,useId:Mc,useHostTransitionStatus:Ro,useFormState:uc,useActionState:uc,useOptimistic:function(m,g){var x=At();return rc(x,gt,m,g)},useMemoCache:Ao,useCacheRefresh:Ec};Fo.useEffectEvent=mc;var Gc={readContext:Rt,use:Ya,useCallback:bc,useContext:Rt,useEffect:Go,useImperativeHandle:yc,useInsertionEffect:pc,useLayoutEffect:vc,useMemo:xc,useReducer:To,useRef:fc,useState:function(){return To(Rr)},useDebugValue:Po,useDeferredValue:function(m,g){var x=At();return gt===null?Jo(x,m,g):Cc(x,gt.memoizedState,m,g)},useTransition:function(){var m=To(Rr)[0],g=At().memoizedState;return[typeof m=="boolean"?m:Vn(m),g]},useSyncExternalStore:Zu,useId:Mc,useHostTransitionStatus:Ro,useFormState:hc,useActionState:hc,useOptimistic:function(m,g){var x=At();return gt!==null?rc(x,gt,m,g):(x.baseState=m,[m,x.queue.dispatch])},useMemoCache:Ao,useCacheRefresh:Ec};Gc.useEffectEvent=mc;function zo(m,g,x,E){g=m.memoizedState,x=x(E,g),x=x==null?g:d({},g,x),m.memoizedState=x,m.lanes===0&&(m.updateQueue.baseState=x)}var Lo={enqueueSetState:function(m,g,x){m=m._reactInternals;var E=ar(),J=si(E);J.payload=g,x!=null&&(J.callback=x),g=oi(m,J,E),g!==null&&(Wt(g,m,E),Un(g,m,E))},enqueueReplaceState:function(m,g,x){m=m._reactInternals;var E=ar(),J=si(E);J.tag=1,J.payload=g,x!=null&&(J.callback=x),g=oi(m,J,E),g!==null&&(Wt(g,m,E),Un(g,m,E))},enqueueForceUpdate:function(m,g){m=m._reactInternals;var x=ar(),E=si(x);E.tag=2,g!=null&&(E.callback=g),g=oi(m,E,x),g!==null&&(Wt(g,m,x),Un(g,m,x))}};function Pc(m,g,x,E,J,k,H){return m=m.stateNode,typeof m.shouldComponentUpdate=="function"?m.shouldComponentUpdate(E,k,H):g.prototype&&g.prototype.isPureReactComponent?!Jn(x,E)||!Jn(J,k):!0}function Jc(m,g,x,E){m=g.state,typeof g.componentWillReceiveProps=="function"&&g.componentWillReceiveProps(x,E),typeof g.UNSAFE_componentWillReceiveProps=="function"&&g.UNSAFE_componentWillReceiveProps(x,E),g.state!==m&&Lo.enqueueReplaceState(g,g.state,null)}function Li(m,g){var x=g;if("ref"in g){x={};for(var E in g)E!=="ref"&&(x[E]=g[E])}if(m=m.defaultProps){x===g&&(x=d({},x));for(var J in m)x[J]===void 0&&(x[J]=m[J])}return x}function Bc(m){$a(m)}function Rc(m){console.error(m)}function kc(m){$a(m)}function Wa(m,g){try{var x=m.onUncaughtError;x(g.value,{componentStack:g.stack})}catch(E){setTimeout(function(){throw E})}}function Fc(m,g,x){try{var E=m.onCaughtError;E(x.value,{componentStack:x.stack,errorBoundary:g.tag===1?g.stateNode:null})}catch(J){setTimeout(function(){throw J})}}function Io(m,g,x){return x=si(x),x.tag=3,x.payload={element:null},x.callback=function(){Wa(m,g)},x}function zc(m){return m=si(m),m.tag=3,m}function Lc(m,g,x,E){var J=x.type.getDerivedStateFromError;if(typeof J=="function"){var k=E.value;m.payload=function(){return J(k)},m.callback=function(){Fc(g,x,E)}}var H=x.stateNode;H!==null&&typeof H.componentDidCatch=="function"&&(m.callback=function(){Fc(g,x,E),typeof J!="function"&&(di===null?di=new Set([this]):di.add(this));var oe=E.stack;this.componentDidCatch(E.value,{componentStack:oe!==null?oe:""})})}function Ff(m,g,x,E,J){if(x.flags|=32768,E!==null&&typeof E=="object"&&typeof E.then=="function"){if(g=x.alternate,g!==null&&an(g,x,J,!0),x=tr.current,x!==null){switch(x.tag){case 31:case 13:return mr===null?us():x.alternate===null&&Et===0&&(Et=3),x.flags&=-257,x.flags|=65536,x.lanes=J,E===Ra?x.flags|=16384:(g=x.updateQueue,g===null?x.updateQueue=new Set([E]):g.add(E),ml(m,E,J)),!1;case 22:return x.flags|=65536,E===Ra?x.flags|=16384:(g=x.updateQueue,g===null?(g={transitions:null,markerInstances:null,retryQueue:new Set([E])},x.updateQueue=g):(x=g.retryQueue,x===null?g.retryQueue=new Set([E]):x.add(E)),ml(m,E,J)),!1}throw Error(n(435,x.tag))}return ml(m,E,J),us(),!1}if(ut)return g=tr.current,g!==null?((g.flags&65536)===0&&(g.flags|=256),g.flags|=65536,g.lanes=J,E!==oo&&(m=Error(n(422),{cause:E}),kn(cr(m,x)))):(E!==oo&&(g=Error(n(423),{cause:E}),kn(cr(g,x))),m=m.current.alternate,m.flags|=65536,J&=-J,m.lanes|=J,E=cr(E,x),J=Io(m.stateNode,E,J),bo(m,J),Et!==4&&(Et=2)),!1;var k=Error(n(520),{cause:E});if(k=cr(k,x),na===null?na=[k]:na.push(k),Et!==4&&(Et=2),g===null)return!0;E=cr(E,x),x=g;do{switch(x.tag){case 3:return x.flags|=65536,m=J&-J,x.lanes|=m,m=Io(x.stateNode,E,m),bo(x,m),!1;case 1:if(g=x.type,k=x.stateNode,(x.flags&128)===0&&(typeof g.getDerivedStateFromError=="function"||k!==null&&typeof k.componentDidCatch=="function"&&(di===null||!di.has(k))))return x.flags|=65536,J&=-J,x.lanes|=J,J=zc(J),Lc(J,m,x,E),bo(x,J),!1}x=x.return}while(x!==null);return!1}var Uo=Error(n(461)),Ot=!1;function kt(m,g,x,E){g.child=m===null?Iu(g,null,x,E):Fi(g,m.child,x,E)}function Ic(m,g,x,E,J){x=x.render;var k=g.ref;if("ref"in E){var H={};for(var oe in E)oe!=="ref"&&(H[oe]=E[oe])}else H=E;return Ji(g),E=No(m,g,x,H,k,J),oe=Mo(),m!==null&&!Ot?(Eo(m,g,J),kr(m,g,J)):(ut&&oe&&ao(g),g.flags|=1,kt(m,g,E,J),g.child)}function Uc(m,g,x,E,J){if(m===null){var k=x.type;return typeof k=="function"&&!ro(k)&&k.defaultProps===void 0&&x.compare===null?(g.tag=15,g.type=k,qc(m,g,k,E,J)):(m=Oa(x.type,null,E,g,g.mode,J),m.ref=g.ref,m.return=g,g.child=m)}if(k=m.child,!Qo(m,J)){var H=k.memoizedProps;if(x=x.compare,x=x!==null?x:Jn,x(H,E)&&m.ref===g.ref)return kr(m,g,J)}return g.flags|=1,m=Xr(k,E),m.ref=g.ref,m.return=g,g.child=m}function qc(m,g,x,E,J){if(m!==null){var k=m.memoizedProps;if(Jn(k,E)&&m.ref===g.ref)if(Ot=!1,g.pendingProps=E=k,Qo(m,J))(m.flags&131072)!==0&&(Ot=!0);else return g.lanes=m.lanes,kr(m,g,J)}return qo(m,g,x,E,J)}function Yc(m,g,x,E){var J=E.children,k=m!==null?m.memoizedState:null;if(m===null&&g.stateNode===null&&(g.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),E.mode==="hidden"){if((g.flags&128)!==0){if(k=k!==null?k.baseLanes|x:x,m!==null){for(E=g.child=m.child,J=0;E!==null;)J=J|E.lanes|E.childLanes,E=E.sibling;E=J&~k}else E=0,g.child=null;return Vc(m,g,k,x,E)}if((x&536870912)!==0)g.memoizedState={baseLanes:0,cachePool:null},m!==null&&Ja(g,k!==null?k.cachePool:null),k!==null?Yu(g,k):Co(),ju(g);else return E=g.lanes=536870912,Vc(m,g,k!==null?k.baseLanes|x:x,x,E)}else k!==null?(Ja(g,k.cachePool),Yu(g,k),ui(),g.memoizedState=null):(m!==null&&Ja(g,null),Co(),ui());return kt(m,g,J,x),g.child}function Wn(m,g){return m!==null&&m.tag===22||g.stateNode!==null||(g.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),g.sibling}function Vc(m,g,x,E,J){var k=po();return k=k===null?null:{parent:Dt._currentValue,pool:k},g.memoizedState={baseLanes:x,cachePool:k},m!==null&&Ja(g,null),Co(),ju(g),m!==null&&an(m,g,E,!0),g.childLanes=J,null}function Qa(m,g){return g=es({mode:g.mode,children:g.children},m.mode),g.ref=m.ref,m.child=g,g.return=m,g}function Hc(m,g,x){return Fi(g,m.child,null,x),m=Qa(g,g.pendingProps),m.flags|=2,rr(g),g.memoizedState=null,m}function zf(m,g,x){var E=g.pendingProps,J=(g.flags&128)!==0;if(g.flags&=-129,m===null){if(ut){if(E.mode==="hidden")return m=Qa(g,E),g.lanes=536870912,Wn(null,m);if(wo(g),(m=St)?(m=oh(m,dr),m=m!==null&&m.data==="&"?m:null,m!==null&&(g.memoizedState={dehydrated:m,treeContext:ti!==null?{id:_r,overflow:Nr}:null,retryLane:536870912,hydrationErrors:null},x=$u(m),x.return=g,g.child=x,Bt=g,St=null)):m=null,m===null)throw ii(g);return g.lanes=536870912,null}return Qa(g,E)}var k=m.memoizedState;if(k!==null){var H=k.dehydrated;if(wo(g),J)if(g.flags&256)g.flags&=-257,g=Hc(m,g,x);else if(g.memoizedState!==null)g.child=m.child,g.flags|=128,g=null;else throw Error(n(558));else if(Ot||an(m,g,x,!1),J=(x&m.childLanes)!==0,Ot||J){if(E=xt,E!==null&&(H=yr(E,x),H!==0&&H!==k.retryLane))throw k.retryLane=H,Oi(m,H),Wt(E,m,H),Uo;us(),g=Hc(m,g,x)}else m=k.treeContext,St=pr(H.nextSibling),Bt=g,ut=!0,ri=null,dr=!1,m!==null&&Tu(g,m),g=Qa(g,E),g.flags|=4096;return g}return m=Xr(m.child,{mode:E.mode,children:E.children}),m.ref=g.ref,g.child=m,m.return=g,m}function Ka(m,g){var x=g.ref;if(x===null)m!==null&&m.ref!==null&&(g.flags|=4194816);else{if(typeof x!="function"&&typeof x!="object")throw Error(n(284));(m===null||m.ref!==x)&&(g.flags|=4194816)}}function qo(m,g,x,E,J){return Ji(g),x=No(m,g,x,E,void 0,J),E=Mo(),m!==null&&!Ot?(Eo(m,g,J),kr(m,g,J)):(ut&&E&&ao(g),g.flags|=1,kt(m,g,x,J),g.child)}function Zc(m,g,x,E,J,k){return Ji(g),g.updateQueue=null,x=Hu(g,E,x,J),Vu(m),E=Mo(),m!==null&&!Ot?(Eo(m,g,k),kr(m,g,k)):(ut&&E&&ao(g),g.flags|=1,kt(m,g,x,k),g.child)}function Wc(m,g,x,E,J){if(Ji(g),g.stateNode===null){var k=en,H=x.contextType;typeof H=="object"&&H!==null&&(k=Rt(H)),k=new x(E,k),g.memoizedState=k.state!==null&&k.state!==void 0?k.state:null,k.updater=Lo,g.stateNode=k,k._reactInternals=g,k=g.stateNode,k.props=E,k.state=g.memoizedState,k.refs={},go(g),H=x.contextType,k.context=typeof H=="object"&&H!==null?Rt(H):en,k.state=g.memoizedState,H=x.getDerivedStateFromProps,typeof H=="function"&&(zo(g,x,H,E),k.state=g.memoizedState),typeof x.getDerivedStateFromProps=="function"||typeof k.getSnapshotBeforeUpdate=="function"||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(H=k.state,typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount(),H!==k.state&&Lo.enqueueReplaceState(k,k.state,null),Yn(g,E,k,J),qn(),k.state=g.memoizedState),typeof k.componentDidMount=="function"&&(g.flags|=4194308),E=!0}else if(m===null){k=g.stateNode;var oe=g.memoizedProps,be=Li(x,oe);k.props=be;var Ae=k.context,Je=x.contextType;H=en,typeof Je=="object"&&Je!==null&&(H=Rt(Je));var ke=x.getDerivedStateFromProps;Je=typeof ke=="function"||typeof k.getSnapshotBeforeUpdate=="function",oe=g.pendingProps!==oe,Je||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(oe||Ae!==H)&&Jc(g,k,E,H),ai=!1;var Oe=g.memoizedState;k.state=Oe,Yn(g,E,k,J),qn(),Ae=g.memoizedState,oe||Oe!==Ae||ai?(typeof ke=="function"&&(zo(g,x,ke,E),Ae=g.memoizedState),(be=ai||Pc(g,x,be,E,Oe,Ae,H))?(Je||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount()),typeof k.componentDidMount=="function"&&(g.flags|=4194308)):(typeof k.componentDidMount=="function"&&(g.flags|=4194308),g.memoizedProps=E,g.memoizedState=Ae),k.props=E,k.state=Ae,k.context=H,E=be):(typeof k.componentDidMount=="function"&&(g.flags|=4194308),E=!1)}else{k=g.stateNode,yo(m,g),H=g.memoizedProps,Je=Li(x,H),k.props=Je,ke=g.pendingProps,Oe=k.context,Ae=x.contextType,be=en,typeof Ae=="object"&&Ae!==null&&(be=Rt(Ae)),oe=x.getDerivedStateFromProps,(Ae=typeof oe=="function"||typeof k.getSnapshotBeforeUpdate=="function")||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(H!==ke||Oe!==be)&&Jc(g,k,E,be),ai=!1,Oe=g.memoizedState,k.state=Oe,Yn(g,E,k,J),qn();var Ge=g.memoizedState;H!==ke||Oe!==Ge||ai||m!==null&&m.dependencies!==null&&Ga(m.dependencies)?(typeof oe=="function"&&(zo(g,x,oe,E),Ge=g.memoizedState),(Je=ai||Pc(g,x,Je,E,Oe,Ge,be)||m!==null&&m.dependencies!==null&&Ga(m.dependencies))?(Ae||typeof k.UNSAFE_componentWillUpdate!="function"&&typeof k.componentWillUpdate!="function"||(typeof k.componentWillUpdate=="function"&&k.componentWillUpdate(E,Ge,be),typeof k.UNSAFE_componentWillUpdate=="function"&&k.UNSAFE_componentWillUpdate(E,Ge,be)),typeof k.componentDidUpdate=="function"&&(g.flags|=4),typeof k.getSnapshotBeforeUpdate=="function"&&(g.flags|=1024)):(typeof k.componentDidUpdate!="function"||H===m.memoizedProps&&Oe===m.memoizedState||(g.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||H===m.memoizedProps&&Oe===m.memoizedState||(g.flags|=1024),g.memoizedProps=E,g.memoizedState=Ge),k.props=E,k.state=Ge,k.context=be,E=Je):(typeof k.componentDidUpdate!="function"||H===m.memoizedProps&&Oe===m.memoizedState||(g.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||H===m.memoizedProps&&Oe===m.memoizedState||(g.flags|=1024),E=!1)}return k=E,Ka(m,g),E=(g.flags&128)!==0,k||E?(k=g.stateNode,x=E&&typeof x.getDerivedStateFromError!="function"?null:k.render(),g.flags|=1,m!==null&&E?(g.child=Fi(g,m.child,null,J),g.child=Fi(g,null,x,J)):kt(m,g,x,J),g.memoizedState=k.state,m=g.child):m=kr(m,g,J),m}function Qc(m,g,x,E){return Gi(),g.flags|=256,kt(m,g,x,E),g.child}var Yo={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function jo(m){return{baseLanes:m,cachePool:Bu()}}function Vo(m,g,x){return m=m!==null?m.childLanes&~x:0,g&&(m|=nr),m}function Kc(m,g,x){var E=g.pendingProps,J=!1,k=(g.flags&128)!==0,H;if((H=k)||(H=m!==null&&m.memoizedState===null?!1:($t.current&2)!==0),H&&(J=!0,g.flags&=-129),H=(g.flags&32)!==0,g.flags&=-33,m===null){if(ut){if(J?li(g):ui(),(m=St)?(m=oh(m,dr),m=m!==null&&m.data!=="&"?m:null,m!==null&&(g.memoizedState={dehydrated:m,treeContext:ti!==null?{id:_r,overflow:Nr}:null,retryLane:536870912,hydrationErrors:null},x=$u(m),x.return=g,g.child=x,Bt=g,St=null)):m=null,m===null)throw ii(g);return Dl(m)?g.lanes=32:g.lanes=536870912,null}var oe=E.children;return E=E.fallback,J?(ui(),J=g.mode,oe=es({mode:"hidden",children:oe},J),E=Xi(E,J,x,null),oe.return=g,E.return=g,oe.sibling=E,g.child=oe,E=g.child,E.memoizedState=jo(x),E.childLanes=Vo(m,H,x),g.memoizedState=Yo,Wn(null,E)):(li(g),Ho(g,oe))}var be=m.memoizedState;if(be!==null&&(oe=be.dehydrated,oe!==null)){if(k)g.flags&256?(li(g),g.flags&=-257,g=Zo(m,g,x)):g.memoizedState!==null?(ui(),g.child=m.child,g.flags|=128,g=null):(ui(),oe=E.fallback,J=g.mode,E=es({mode:"visible",children:E.children},J),oe=Xi(oe,J,x,null),oe.flags|=2,E.return=g,oe.return=g,E.sibling=oe,g.child=E,Fi(g,m.child,null,x),E=g.child,E.memoizedState=jo(x),E.childLanes=Vo(m,H,x),g.memoizedState=Yo,g=Wn(null,E));else if(li(g),Dl(oe)){if(H=oe.nextSibling&&oe.nextSibling.dataset,H)var Ae=H.dgst;H=Ae,E=Error(n(419)),E.stack="",E.digest=H,kn({value:E,source:null,stack:null}),g=Zo(m,g,x)}else if(Ot||an(m,g,x,!1),H=(x&m.childLanes)!==0,Ot||H){if(H=xt,H!==null&&(E=yr(H,x),E!==0&&E!==be.retryLane))throw be.retryLane=E,Oi(m,E),Wt(H,m,E),Uo;Al(oe)||us(),g=Zo(m,g,x)}else Al(oe)?(g.flags|=192,g.child=m.child,g=null):(m=be.treeContext,St=pr(oe.nextSibling),Bt=g,ut=!0,ri=null,dr=!1,m!==null&&Tu(g,m),g=Ho(g,E.children),g.flags|=4096);return g}return J?(ui(),oe=E.fallback,J=g.mode,be=m.child,Ae=be.sibling,E=Xr(be,{mode:"hidden",children:E.children}),E.subtreeFlags=be.subtreeFlags&65011712,Ae!==null?oe=Xr(Ae,oe):(oe=Xi(oe,J,x,null),oe.flags|=2),oe.return=g,E.return=g,E.sibling=oe,g.child=E,Wn(null,E),E=g.child,oe=m.child.memoizedState,oe===null?oe=jo(x):(J=oe.cachePool,J!==null?(be=Dt._currentValue,J=J.parent!==be?{parent:be,pool:be}:J):J=Bu(),oe={baseLanes:oe.baseLanes|x,cachePool:J}),E.memoizedState=oe,E.childLanes=Vo(m,H,x),g.memoizedState=Yo,Wn(m.child,E)):(li(g),x=m.child,m=x.sibling,x=Xr(x,{mode:"visible",children:E.children}),x.return=g,x.sibling=null,m!==null&&(H=g.deletions,H===null?(g.deletions=[m],g.flags|=16):H.push(m)),g.child=x,g.memoizedState=null,x)}function Ho(m,g){return g=es({mode:"visible",children:g},m.mode),g.return=m,m.child=g}function es(m,g){return m=er(22,m,null,g),m.lanes=0,m}function Zo(m,g,x){return Fi(g,m.child,null,x),m=Ho(g,g.pendingProps.children),m.flags|=2,g.memoizedState=null,m}function e0(m,g,x){m.lanes|=g;var E=m.alternate;E!==null&&(E.lanes|=g),co(m.return,g,x)}function Wo(m,g,x,E,J,k){var H=m.memoizedState;H===null?m.memoizedState={isBackwards:g,rendering:null,renderingStartTime:0,last:E,tail:x,tailMode:J,treeForkCount:k}:(H.isBackwards=g,H.rendering=null,H.renderingStartTime=0,H.last=E,H.tail=x,H.tailMode=J,H.treeForkCount=k)}function t0(m,g,x){var E=g.pendingProps,J=E.revealOrder,k=E.tail;E=E.children;var H=$t.current,oe=(H&2)!==0;if(oe?(H=H&1|2,g.flags|=128):H&=1,L($t,H),kt(m,g,E,x),E=ut?Rn:0,!oe&&m!==null&&(m.flags&128)!==0)e:for(m=g.child;m!==null;){if(m.tag===13)m.memoizedState!==null&&e0(m,x,g);else if(m.tag===19)e0(m,x,g);else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===g)break e;for(;m.sibling===null;){if(m.return===null||m.return===g)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}switch(J){case"forwards":for(x=g.child,J=null;x!==null;)m=x.alternate,m!==null&&La(m)===null&&(J=x),x=x.sibling;x=J,x===null?(J=g.child,g.child=null):(J=x.sibling,x.sibling=null),Wo(g,!1,J,x,k,E);break;case"backwards":case"unstable_legacy-backwards":for(x=null,J=g.child,g.child=null;J!==null;){if(m=J.alternate,m!==null&&La(m)===null){g.child=J;break}m=J.sibling,J.sibling=x,x=J,J=m}Wo(g,!0,x,null,k,E);break;case"together":Wo(g,!1,null,null,void 0,E);break;default:g.memoizedState=null}return g.child}function kr(m,g,x){if(m!==null&&(g.dependencies=m.dependencies),fi|=g.lanes,(x&g.childLanes)===0)if(m!==null){if(an(m,g,x,!1),(x&g.childLanes)===0)return null}else return null;if(m!==null&&g.child!==m.child)throw Error(n(153));if(g.child!==null){for(m=g.child,x=Xr(m,m.pendingProps),g.child=x,x.return=g;m.sibling!==null;)m=m.sibling,x=x.sibling=Xr(m,m.pendingProps),x.return=g;x.sibling=null}return g.child}function Qo(m,g){return(m.lanes&g)!==0?!0:(m=m.dependencies,!!(m!==null&&Ga(m)))}function Lf(m,g,x){switch(g.tag){case 3:se(g,g.stateNode.containerInfo),ni(g,Dt,m.memoizedState.cache),Gi();break;case 27:case 5:ce(g);break;case 4:se(g,g.stateNode.containerInfo);break;case 10:ni(g,g.type,g.memoizedProps.value);break;case 31:if(g.memoizedState!==null)return g.flags|=128,wo(g),null;break;case 13:var E=g.memoizedState;if(E!==null)return E.dehydrated!==null?(li(g),g.flags|=128,null):(x&g.child.childLanes)!==0?Kc(m,g,x):(li(g),m=kr(m,g,x),m!==null?m.sibling:null);li(g);break;case 19:var J=(m.flags&128)!==0;if(E=(x&g.childLanes)!==0,E||(an(m,g,x,!1),E=(x&g.childLanes)!==0),J){if(E)return t0(m,g,x);g.flags|=128}if(J=g.memoizedState,J!==null&&(J.rendering=null,J.tail=null,J.lastEffect=null),L($t,$t.current),E)break;return null;case 22:return g.lanes=0,Yc(m,g,x,g.pendingProps);case 24:ni(g,Dt,m.memoizedState.cache)}return kr(m,g,x)}function r0(m,g,x){if(m!==null)if(m.memoizedProps!==g.pendingProps)Ot=!0;else{if(!Qo(m,x)&&(g.flags&128)===0)return Ot=!1,Lf(m,g,x);Ot=(m.flags&131072)!==0}else Ot=!1,ut&&(g.flags&1048576)!==0&&Du(g,Rn,g.index);switch(g.lanes=0,g.tag){case 16:e:{var E=g.pendingProps;if(m=Ri(g.elementType),g.type=m,typeof m=="function")ro(m)?(E=Li(m,E),g.tag=1,g=Wc(null,g,m,E,x)):(g.tag=0,g=qo(null,g,m,E,x));else{if(m!=null){var J=m.$$typeof;if(J===$){g.tag=11,g=Ic(null,g,m,E,x);break e}else if(J===X){g.tag=14,g=Uc(null,g,m,E,x);break e}}throw g=q(m)||m,Error(n(306,g,""))}}return g;case 0:return qo(m,g,g.type,g.pendingProps,x);case 1:return E=g.type,J=Li(E,g.pendingProps),Wc(m,g,E,J,x);case 3:e:{if(se(g,g.stateNode.containerInfo),m===null)throw Error(n(387));E=g.pendingProps;var k=g.memoizedState;J=k.element,yo(m,g),Yn(g,E,null,x);var H=g.memoizedState;if(E=H.cache,ni(g,Dt,E),E!==k.cache&&ho(g,[Dt],x,!0),qn(),E=H.element,k.isDehydrated)if(k={element:E,isDehydrated:!1,cache:H.cache},g.updateQueue.baseState=k,g.memoizedState=k,g.flags&256){g=Qc(m,g,E,x);break e}else if(E!==J){J=cr(Error(n(424)),g),kn(J),g=Qc(m,g,E,x);break e}else for(m=g.stateNode.containerInfo,m.nodeType===9?m=m.body:m=m.nodeName==="HTML"?m.ownerDocument.body:m,St=pr(m.firstChild),Bt=g,ut=!0,ri=null,dr=!0,x=Iu(g,null,E,x),g.child=x;x;)x.flags=x.flags&-3|4096,x=x.sibling;else{if(Gi(),E===J){g=kr(m,g,x);break e}kt(m,g,E,x)}g=g.child}return g;case 26:return Ka(m,g),m===null?(x=mh(g.type,null,g.pendingProps,null))?g.memoizedState=x:ut||(x=g.type,m=g.pendingProps,E=vs(ve.current).createElement(x),E[Ct]=g,E[Lt]=m,Ft(E,x,m),ct(E),g.stateNode=E):g.memoizedState=mh(g.type,m.memoizedProps,g.pendingProps,m.memoizedState),null;case 27:return ce(g),m===null&&ut&&(E=g.stateNode=hh(g.type,g.pendingProps,ve.current),Bt=g,dr=!0,J=St,yi(g.type)?(Tl=J,St=pr(E.firstChild)):St=J),kt(m,g,g.pendingProps.children,x),Ka(m,g),m===null&&(g.flags|=4194304),g.child;case 5:return m===null&&ut&&((J=E=St)&&(E=yd(E,g.type,g.pendingProps,dr),E!==null?(g.stateNode=E,Bt=g,St=pr(E.firstChild),dr=!1,J=!0):J=!1),J||ii(g)),ce(g),J=g.type,k=g.pendingProps,H=m!==null?m.memoizedProps:null,E=k.children,Ml(J,k)?E=null:H!==null&&Ml(J,H)&&(g.flags|=32),g.memoizedState!==null&&(J=No(m,g,Xf,null,null,x),fa._currentValue=J),Ka(m,g),kt(m,g,E,x),g.child;case 6:return m===null&&ut&&((m=x=St)&&(x=bd(x,g.pendingProps,dr),x!==null?(g.stateNode=x,Bt=g,St=null,m=!0):m=!1),m||ii(g)),null;case 13:return Kc(m,g,x);case 4:return se(g,g.stateNode.containerInfo),E=g.pendingProps,m===null?g.child=Fi(g,null,E,x):kt(m,g,E,x),g.child;case 11:return Ic(m,g,g.type,g.pendingProps,x);case 7:return kt(m,g,g.pendingProps,x),g.child;case 8:return kt(m,g,g.pendingProps.children,x),g.child;case 12:return kt(m,g,g.pendingProps.children,x),g.child;case 10:return E=g.pendingProps,ni(g,g.type,E.value),kt(m,g,E.children,x),g.child;case 9:return J=g.type._context,E=g.pendingProps.children,Ji(g),J=Rt(J),E=E(J),g.flags|=1,kt(m,g,E,x),g.child;case 14:return Uc(m,g,g.type,g.pendingProps,x);case 15:return qc(m,g,g.type,g.pendingProps,x);case 19:return t0(m,g,x);case 31:return zf(m,g,x);case 22:return Yc(m,g,x,g.pendingProps);case 24:return Ji(g),E=Rt(Dt),m===null?(J=po(),J===null&&(J=xt,k=fo(),J.pooledCache=k,k.refCount++,k!==null&&(J.pooledCacheLanes|=x),J=k),g.memoizedState={parent:E,cache:J},go(g),ni(g,Dt,J)):((m.lanes&x)!==0&&(yo(m,g),Yn(g,null,null,x),qn()),J=m.memoizedState,k=g.memoizedState,J.parent!==E?(J={parent:E,cache:E},g.memoizedState=J,g.lanes===0&&(g.memoizedState=g.updateQueue.baseState=J),ni(g,Dt,E)):(E=k.cache,ni(g,Dt,E),E!==J.cache&&ho(g,[Dt],x,!0))),kt(m,g,g.pendingProps.children,x),g.child;case 29:throw g.pendingProps}throw Error(n(156,g.tag))}function Fr(m){m.flags|=4}function Ko(m,g,x,E,J){if((g=(m.mode&32)!==0)&&(g=!1),g){if(m.flags|=16777216,(J&335544128)===J)if(m.stateNode.complete)m.flags|=8192;else if(A0())m.flags|=8192;else throw ki=Ra,vo}else m.flags&=-16777217}function i0(m,g){if(g.type!=="stylesheet"||(g.state.loading&4)!==0)m.flags&=-16777217;else if(m.flags|=16777216,!bh(g))if(A0())m.flags|=8192;else throw ki=Ra,vo}function ts(m,g){g!==null&&(m.flags|=4),m.flags&16384&&(g=m.tag!==22?qi():536870912,m.lanes|=g,yn|=g)}function Qn(m,g){if(!ut)switch(m.tailMode){case"hidden":g=m.tail;for(var x=null;g!==null;)g.alternate!==null&&(x=g),g=g.sibling;x===null?m.tail=null:x.sibling=null;break;case"collapsed":x=m.tail;for(var E=null;x!==null;)x.alternate!==null&&(E=x),x=x.sibling;E===null?g||m.tail===null?m.tail=null:m.tail.sibling=null:E.sibling=null}}function wt(m){var g=m.alternate!==null&&m.alternate.child===m.child,x=0,E=0;if(g)for(var J=m.child;J!==null;)x|=J.lanes|J.childLanes,E|=J.subtreeFlags&65011712,E|=J.flags&65011712,J.return=m,J=J.sibling;else for(J=m.child;J!==null;)x|=J.lanes|J.childLanes,E|=J.subtreeFlags,E|=J.flags,J.return=m,J=J.sibling;return m.subtreeFlags|=E,m.childLanes=x,g}function If(m,g,x){var E=g.pendingProps;switch(so(g),g.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return wt(g),null;case 1:return wt(g),null;case 3:return x=g.stateNode,E=null,m!==null&&(E=m.memoizedState.cache),g.memoizedState.cache!==E&&(g.flags|=2048),Jr(Dt),ie(),x.pendingContext&&(x.context=x.pendingContext,x.pendingContext=null),(m===null||m.child===null)&&(nn(g)?Fr(g):m===null||m.memoizedState.isDehydrated&&(g.flags&256)===0||(g.flags|=1024,lo())),wt(g),null;case 26:var J=g.type,k=g.memoizedState;return m===null?(Fr(g),k!==null?(wt(g),i0(g,k)):(wt(g),Ko(g,J,null,E,x))):k?k!==m.memoizedState?(Fr(g),wt(g),i0(g,k)):(wt(g),g.flags&=-16777217):(m=m.memoizedProps,m!==E&&Fr(g),wt(g),Ko(g,J,m,E,x)),null;case 27:if(xe(g),x=ve.current,J=g.type,m!==null&&g.stateNode!=null)m.memoizedProps!==E&&Fr(g);else{if(!E){if(g.stateNode===null)throw Error(n(166));return wt(g),null}m=ae.current,nn(g)?Ou(g):(m=hh(J,E,x),g.stateNode=m,Fr(g))}return wt(g),null;case 5:if(xe(g),J=g.type,m!==null&&g.stateNode!=null)m.memoizedProps!==E&&Fr(g);else{if(!E){if(g.stateNode===null)throw Error(n(166));return wt(g),null}if(k=ae.current,nn(g))Ou(g);else{var H=vs(ve.current);switch(k){case 1:k=H.createElementNS("http://www.w3.org/2000/svg",J);break;case 2:k=H.createElementNS("http://www.w3.org/1998/Math/MathML",J);break;default:switch(J){case"svg":k=H.createElementNS("http://www.w3.org/2000/svg",J);break;case"math":k=H.createElementNS("http://www.w3.org/1998/Math/MathML",J);break;case"script":k=H.createElement("div"),k.innerHTML="<script><\/script>",k=k.removeChild(k.firstChild);break;case"select":k=typeof E.is=="string"?H.createElement("select",{is:E.is}):H.createElement("select"),E.multiple?k.multiple=!0:E.size&&(k.size=E.size);break;default:k=typeof E.is=="string"?H.createElement(J,{is:E.is}):H.createElement(J)}}k[Ct]=g,k[Lt]=E;e:for(H=g.child;H!==null;){if(H.tag===5||H.tag===6)k.appendChild(H.stateNode);else if(H.tag!==4&&H.tag!==27&&H.child!==null){H.child.return=H,H=H.child;continue}if(H===g)break e;for(;H.sibling===null;){if(H.return===null||H.return===g)break e;H=H.return}H.sibling.return=H.return,H=H.sibling}g.stateNode=k;e:switch(Ft(k,J,E),J){case"button":case"input":case"select":case"textarea":E=!!E.autoFocus;break e;case"img":E=!0;break e;default:E=!1}E&&Fr(g)}}return wt(g),Ko(g,g.type,m===null?null:m.memoizedProps,g.pendingProps,x),null;case 6:if(m&&g.stateNode!=null)m.memoizedProps!==E&&Fr(g);else{if(typeof E!="string"&&g.stateNode===null)throw Error(n(166));if(m=ve.current,nn(g)){if(m=g.stateNode,x=g.memoizedProps,E=null,J=Bt,J!==null)switch(J.tag){case 27:case 5:E=J.memoizedProps}m[Ct]=g,m=!!(m.nodeValue===x||E!==null&&E.suppressHydrationWarning===!0||K0(m.nodeValue,x)),m||ii(g,!0)}else m=vs(m).createTextNode(E),m[Ct]=g,g.stateNode=m}return wt(g),null;case 31:if(x=g.memoizedState,m===null||m.memoizedState!==null){if(E=nn(g),x!==null){if(m===null){if(!E)throw Error(n(318));if(m=g.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(n(557));m[Ct]=g}else Gi(),(g.flags&128)===0&&(g.memoizedState=null),g.flags|=4;wt(g),m=!1}else x=lo(),m!==null&&m.memoizedState!==null&&(m.memoizedState.hydrationErrors=x),m=!0;if(!m)return g.flags&256?(rr(g),g):(rr(g),null);if((g.flags&128)!==0)throw Error(n(558))}return wt(g),null;case 13:if(E=g.memoizedState,m===null||m.memoizedState!==null&&m.memoizedState.dehydrated!==null){if(J=nn(g),E!==null&&E.dehydrated!==null){if(m===null){if(!J)throw Error(n(318));if(J=g.memoizedState,J=J!==null?J.dehydrated:null,!J)throw Error(n(317));J[Ct]=g}else Gi(),(g.flags&128)===0&&(g.memoizedState=null),g.flags|=4;wt(g),J=!1}else J=lo(),m!==null&&m.memoizedState!==null&&(m.memoizedState.hydrationErrors=J),J=!0;if(!J)return g.flags&256?(rr(g),g):(rr(g),null)}return rr(g),(g.flags&128)!==0?(g.lanes=x,g):(x=E!==null,m=m!==null&&m.memoizedState!==null,x&&(E=g.child,J=null,E.alternate!==null&&E.alternate.memoizedState!==null&&E.alternate.memoizedState.cachePool!==null&&(J=E.alternate.memoizedState.cachePool.pool),k=null,E.memoizedState!==null&&E.memoizedState.cachePool!==null&&(k=E.memoizedState.cachePool.pool),k!==J&&(E.flags|=2048)),x!==m&&x&&(g.child.flags|=8192),ts(g,g.updateQueue),wt(g),null);case 4:return ie(),m===null&&Cl(g.stateNode.containerInfo),wt(g),null;case 10:return Jr(g.type),wt(g),null;case 19:if(V($t),E=g.memoizedState,E===null)return wt(g),null;if(J=(g.flags&128)!==0,k=E.rendering,k===null)if(J)Qn(E,!1);else{if(Et!==0||m!==null&&(m.flags&128)!==0)for(m=g.child;m!==null;){if(k=La(m),k!==null){for(g.flags|=128,Qn(E,!1),m=k.updateQueue,g.updateQueue=m,ts(g,m),g.subtreeFlags=0,m=x,x=g.child;x!==null;)Eu(x,m),x=x.sibling;return L($t,$t.current&1|2),ut&&Gr(g,E.treeForkCount),g.child}m=m.sibling}E.tail!==null&&le()>ss&&(g.flags|=128,J=!0,Qn(E,!1),g.lanes=4194304)}else{if(!J)if(m=La(k),m!==null){if(g.flags|=128,J=!0,m=m.updateQueue,g.updateQueue=m,ts(g,m),Qn(E,!0),E.tail===null&&E.tailMode==="hidden"&&!k.alternate&&!ut)return wt(g),null}else 2*le()-E.renderingStartTime>ss&&x!==536870912&&(g.flags|=128,J=!0,Qn(E,!1),g.lanes=4194304);E.isBackwards?(k.sibling=g.child,g.child=k):(m=E.last,m!==null?m.sibling=k:g.child=k,E.last=k)}return E.tail!==null?(m=E.tail,E.rendering=m,E.tail=m.sibling,E.renderingStartTime=le(),m.sibling=null,x=$t.current,L($t,J?x&1|2:x&1),ut&&Gr(g,E.treeForkCount),m):(wt(g),null);case 22:case 23:return rr(g),So(),E=g.memoizedState!==null,m!==null?m.memoizedState!==null!==E&&(g.flags|=8192):E&&(g.flags|=8192),E?(x&536870912)!==0&&(g.flags&128)===0&&(wt(g),g.subtreeFlags&6&&(g.flags|=8192)):wt(g),x=g.updateQueue,x!==null&&ts(g,x.retryQueue),x=null,m!==null&&m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(x=m.memoizedState.cachePool.pool),E=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(E=g.memoizedState.cachePool.pool),E!==x&&(g.flags|=2048),m!==null&&V(Bi),null;case 24:return x=null,m!==null&&(x=m.memoizedState.cache),g.memoizedState.cache!==x&&(g.flags|=2048),Jr(Dt),wt(g),null;case 25:return null;case 30:return null}throw Error(n(156,g.tag))}function Uf(m,g){switch(so(g),g.tag){case 1:return m=g.flags,m&65536?(g.flags=m&-65537|128,g):null;case 3:return Jr(Dt),ie(),m=g.flags,(m&65536)!==0&&(m&128)===0?(g.flags=m&-65537|128,g):null;case 26:case 27:case 5:return xe(g),null;case 31:if(g.memoizedState!==null){if(rr(g),g.alternate===null)throw Error(n(340));Gi()}return m=g.flags,m&65536?(g.flags=m&-65537|128,g):null;case 13:if(rr(g),m=g.memoizedState,m!==null&&m.dehydrated!==null){if(g.alternate===null)throw Error(n(340));Gi()}return m=g.flags,m&65536?(g.flags=m&-65537|128,g):null;case 19:return V($t),null;case 4:return ie(),null;case 10:return Jr(g.type),null;case 22:case 23:return rr(g),So(),m!==null&&V(Bi),m=g.flags,m&65536?(g.flags=m&-65537|128,g):null;case 24:return Jr(Dt),null;case 25:return null;default:return null}}function n0(m,g){switch(so(g),g.tag){case 3:Jr(Dt),ie();break;case 26:case 27:case 5:xe(g);break;case 4:ie();break;case 31:g.memoizedState!==null&&rr(g);break;case 13:rr(g);break;case 19:V($t);break;case 10:Jr(g.type);break;case 22:case 23:rr(g),So(),m!==null&&V(Bi);break;case 24:Jr(Dt)}}function Kn(m,g){try{var x=g.updateQueue,E=x!==null?x.lastEffect:null;if(E!==null){var J=E.next;x=J;do{if((x.tag&m)===m){E=void 0;var k=x.create,H=x.inst;E=k(),H.destroy=E}x=x.next}while(x!==J)}}catch(oe){pt(g,g.return,oe)}}function ci(m,g,x){try{var E=g.updateQueue,J=E!==null?E.lastEffect:null;if(J!==null){var k=J.next;E=k;do{if((E.tag&m)===m){var H=E.inst,oe=H.destroy;if(oe!==void 0){H.destroy=void 0,J=g;var be=x,Ae=oe;try{Ae()}catch(Je){pt(J,be,Je)}}}E=E.next}while(E!==k)}}catch(Je){pt(g,g.return,Je)}}function a0(m){var g=m.updateQueue;if(g!==null){var x=m.stateNode;try{qu(g,x)}catch(E){pt(m,m.return,E)}}}function s0(m,g,x){x.props=Li(m.type,m.memoizedProps),x.state=m.memoizedState;try{x.componentWillUnmount()}catch(E){pt(m,g,E)}}function ea(m,g){try{var x=m.ref;if(x!==null){switch(m.tag){case 26:case 27:case 5:var E=m.stateNode;break;case 30:E=m.stateNode;break;default:E=m.stateNode}typeof x=="function"?m.refCleanup=x(E):x.current=E}}catch(J){pt(m,g,J)}}function Mr(m,g){var x=m.ref,E=m.refCleanup;if(x!==null)if(typeof E=="function")try{E()}catch(J){pt(m,g,J)}finally{m.refCleanup=null,m=m.alternate,m!=null&&(m.refCleanup=null)}else if(typeof x=="function")try{x(null)}catch(J){pt(m,g,J)}else x.current=null}function o0(m){var g=m.type,x=m.memoizedProps,E=m.stateNode;try{e:switch(g){case"button":case"input":case"select":case"textarea":x.autoFocus&&E.focus();break e;case"img":x.src?E.src=x.src:x.srcSet&&(E.srcset=x.srcSet)}}catch(J){pt(m,m.return,J)}}function el(m,g,x){try{var E=m.stateNode;fd(E,m.type,x,g),E[Lt]=g}catch(J){pt(m,m.return,J)}}function l0(m){return m.tag===5||m.tag===3||m.tag===26||m.tag===27&&yi(m.type)||m.tag===4}function tl(m){e:for(;;){for(;m.sibling===null;){if(m.return===null||l0(m.return))return null;m=m.return}for(m.sibling.return=m.return,m=m.sibling;m.tag!==5&&m.tag!==6&&m.tag!==18;){if(m.tag===27&&yi(m.type)||m.flags&2||m.child===null||m.tag===4)continue e;m.child.return=m,m=m.child}if(!(m.flags&2))return m.stateNode}}function rl(m,g,x){var E=m.tag;if(E===5||E===6)m=m.stateNode,g?(x.nodeType===9?x.body:x.nodeName==="HTML"?x.ownerDocument.body:x).insertBefore(m,g):(g=x.nodeType===9?x.body:x.nodeName==="HTML"?x.ownerDocument.body:x,g.appendChild(m),x=x._reactRootContainer,x!=null||g.onclick!==null||(g.onclick=Tr));else if(E!==4&&(E===27&&yi(m.type)&&(x=m.stateNode,g=null),m=m.child,m!==null))for(rl(m,g,x),m=m.sibling;m!==null;)rl(m,g,x),m=m.sibling}function rs(m,g,x){var E=m.tag;if(E===5||E===6)m=m.stateNode,g?x.insertBefore(m,g):x.appendChild(m);else if(E!==4&&(E===27&&yi(m.type)&&(x=m.stateNode),m=m.child,m!==null))for(rs(m,g,x),m=m.sibling;m!==null;)rs(m,g,x),m=m.sibling}function u0(m){var g=m.stateNode,x=m.memoizedProps;try{for(var E=m.type,J=g.attributes;J.length;)g.removeAttributeNode(J[0]);Ft(g,E,x),g[Ct]=m,g[Lt]=x}catch(k){pt(m,m.return,k)}}var zr=!1,Xt=!1,il=!1,c0=typeof WeakSet=="function"?WeakSet:Set,Pt=null;function qf(m,g){if(m=m.containerInfo,_l=ws,m=yu(m),Vs(m)){if("selectionStart"in m)var x={start:m.selectionStart,end:m.selectionEnd};else e:{x=(x=m.ownerDocument)&&x.defaultView||window;var E=x.getSelection&&x.getSelection();if(E&&E.rangeCount!==0){x=E.anchorNode;var J=E.anchorOffset,k=E.focusNode;E=E.focusOffset;try{x.nodeType,k.nodeType}catch{x=null;break e}var H=0,oe=-1,be=-1,Ae=0,Je=0,ke=m,Oe=null;t:for(;;){for(var Ge;ke!==x||J!==0&&ke.nodeType!==3||(oe=H+J),ke!==k||E!==0&&ke.nodeType!==3||(be=H+E),ke.nodeType===3&&(H+=ke.nodeValue.length),(Ge=ke.firstChild)!==null;)Oe=ke,ke=Ge;for(;;){if(ke===m)break t;if(Oe===x&&++Ae===J&&(oe=H),Oe===k&&++Je===E&&(be=H),(Ge=ke.nextSibling)!==null)break;ke=Oe,Oe=ke.parentNode}ke=Ge}x=oe===-1||be===-1?null:{start:oe,end:be}}else x=null}x=x||{start:0,end:0}}else x=null;for(Nl={focusedElem:m,selectionRange:x},ws=!1,Pt=g;Pt!==null;)if(g=Pt,m=g.child,(g.subtreeFlags&1028)!==0&&m!==null)m.return=g,Pt=m;else for(;Pt!==null;){switch(g=Pt,k=g.alternate,m=g.flags,g.tag){case 0:if((m&4)!==0&&(m=g.updateQueue,m=m!==null?m.events:null,m!==null))for(x=0;x<m.length;x++)J=m[x],J.ref.impl=J.nextImpl;break;case 11:case 15:break;case 1:if((m&1024)!==0&&k!==null){m=void 0,x=g,J=k.memoizedProps,k=k.memoizedState,E=x.stateNode;try{var Qe=Li(x.type,J);m=E.getSnapshotBeforeUpdate(Qe,k),E.__reactInternalSnapshotBeforeUpdate=m}catch(tt){pt(x,x.return,tt)}}break;case 3:if((m&1024)!==0){if(m=g.stateNode.containerInfo,x=m.nodeType,x===9)$l(m);else if(x===1)switch(m.nodeName){case"HEAD":case"HTML":case"BODY":$l(m);break;default:m.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((m&1024)!==0)throw Error(n(163))}if(m=g.sibling,m!==null){m.return=g.return,Pt=m;break}Pt=g.return}}function h0(m,g,x){var E=x.flags;switch(x.tag){case 0:case 11:case 15:Ir(m,x),E&4&&Kn(5,x);break;case 1:if(Ir(m,x),E&4)if(m=x.stateNode,g===null)try{m.componentDidMount()}catch(H){pt(x,x.return,H)}else{var J=Li(x.type,g.memoizedProps);g=g.memoizedState;try{m.componentDidUpdate(J,g,m.__reactInternalSnapshotBeforeUpdate)}catch(H){pt(x,x.return,H)}}E&64&&a0(x),E&512&&ea(x,x.return);break;case 3:if(Ir(m,x),E&64&&(m=x.updateQueue,m!==null)){if(g=null,x.child!==null)switch(x.child.tag){case 27:case 5:g=x.child.stateNode;break;case 1:g=x.child.stateNode}try{qu(m,g)}catch(H){pt(x,x.return,H)}}break;case 27:g===null&&E&4&&u0(x);case 26:case 5:Ir(m,x),g===null&&E&4&&o0(x),E&512&&ea(x,x.return);break;case 12:Ir(m,x);break;case 31:Ir(m,x),E&4&&m0(m,x);break;case 13:Ir(m,x),E&4&&p0(m,x),E&64&&(m=x.memoizedState,m!==null&&(m=m.dehydrated,m!==null&&(x=ed.bind(null,x),xd(m,x))));break;case 22:if(E=x.memoizedState!==null||zr,!E){g=g!==null&&g.memoizedState!==null||Xt,J=zr;var k=Xt;zr=E,(Xt=g)&&!k?Ur(m,x,(x.subtreeFlags&8772)!==0):Ir(m,x),zr=J,Xt=k}break;case 30:break;default:Ir(m,x)}}function f0(m){var g=m.alternate;g!==null&&(m.alternate=null,f0(g)),m.child=null,m.deletions=null,m.sibling=null,m.tag===5&&(g=m.stateNode,g!==null&&$n(g)),m.stateNode=null,m.return=null,m.dependencies=null,m.memoizedProps=null,m.memoizedState=null,m.pendingProps=null,m.stateNode=null,m.updateQueue=null}var _t=null,jt=!1;function Lr(m,g,x){for(x=x.child;x!==null;)d0(m,g,x),x=x.sibling}function d0(m,g,x){if(Ue&&typeof Ue.onCommitFiberUnmount=="function")try{Ue.onCommitFiberUnmount(ze,x)}catch{}switch(x.tag){case 26:Xt||Mr(x,g),Lr(m,g,x),x.memoizedState?x.memoizedState.count--:x.stateNode&&(x=x.stateNode,x.parentNode.removeChild(x));break;case 27:Xt||Mr(x,g);var E=_t,J=jt;yi(x.type)&&(_t=x.stateNode,jt=!1),Lr(m,g,x),ua(x.stateNode),_t=E,jt=J;break;case 5:Xt||Mr(x,g);case 6:if(E=_t,J=jt,_t=null,Lr(m,g,x),_t=E,jt=J,_t!==null)if(jt)try{(_t.nodeType===9?_t.body:_t.nodeName==="HTML"?_t.ownerDocument.body:_t).removeChild(x.stateNode)}catch(k){pt(x,g,k)}else try{_t.removeChild(x.stateNode)}catch(k){pt(x,g,k)}break;case 18:_t!==null&&(jt?(m=_t,ah(m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m,x.stateNode),Mn(m)):ah(_t,x.stateNode));break;case 4:E=_t,J=jt,_t=x.stateNode.containerInfo,jt=!0,Lr(m,g,x),_t=E,jt=J;break;case 0:case 11:case 14:case 15:ci(2,x,g),Xt||ci(4,x,g),Lr(m,g,x);break;case 1:Xt||(Mr(x,g),E=x.stateNode,typeof E.componentWillUnmount=="function"&&s0(x,g,E)),Lr(m,g,x);break;case 21:Lr(m,g,x);break;case 22:Xt=(E=Xt)||x.memoizedState!==null,Lr(m,g,x),Xt=E;break;default:Lr(m,g,x)}}function m0(m,g){if(g.memoizedState===null&&(m=g.alternate,m!==null&&(m=m.memoizedState,m!==null))){m=m.dehydrated;try{Mn(m)}catch(x){pt(g,g.return,x)}}}function p0(m,g){if(g.memoizedState===null&&(m=g.alternate,m!==null&&(m=m.memoizedState,m!==null&&(m=m.dehydrated,m!==null))))try{Mn(m)}catch(x){pt(g,g.return,x)}}function Yf(m){switch(m.tag){case 31:case 13:case 19:var g=m.stateNode;return g===null&&(g=m.stateNode=new c0),g;case 22:return m=m.stateNode,g=m._retryCache,g===null&&(g=m._retryCache=new c0),g;default:throw Error(n(435,m.tag))}}function is(m,g){var x=Yf(m);g.forEach(function(E){if(!x.has(E)){x.add(E);var J=td.bind(null,m,E);E.then(J,J)}})}function Vt(m,g){var x=g.deletions;if(x!==null)for(var E=0;E<x.length;E++){var J=x[E],k=m,H=g,oe=H;e:for(;oe!==null;){switch(oe.tag){case 27:if(yi(oe.type)){_t=oe.stateNode,jt=!1;break e}break;case 5:_t=oe.stateNode,jt=!1;break e;case 3:case 4:_t=oe.stateNode.containerInfo,jt=!0;break e}oe=oe.return}if(_t===null)throw Error(n(160));d0(k,H,J),_t=null,jt=!1,k=J.alternate,k!==null&&(k.return=null),J.return=null}if(g.subtreeFlags&13886)for(g=g.child;g!==null;)v0(g,m),g=g.sibling}var Cr=null;function v0(m,g){var x=m.alternate,E=m.flags;switch(m.tag){case 0:case 11:case 14:case 15:Vt(g,m),Ht(m),E&4&&(ci(3,m,m.return),Kn(3,m),ci(5,m,m.return));break;case 1:Vt(g,m),Ht(m),E&512&&(Xt||x===null||Mr(x,x.return)),E&64&&zr&&(m=m.updateQueue,m!==null&&(E=m.callbacks,E!==null&&(x=m.shared.hiddenCallbacks,m.shared.hiddenCallbacks=x===null?E:x.concat(E))));break;case 26:var J=Cr;if(Vt(g,m),Ht(m),E&512&&(Xt||x===null||Mr(x,x.return)),E&4){var k=x!==null?x.memoizedState:null;if(E=m.memoizedState,x===null)if(E===null)if(m.stateNode===null){e:{E=m.type,x=m.memoizedProps,J=J.ownerDocument||J;t:switch(E){case"title":k=J.getElementsByTagName("title")[0],(!k||k[Ei]||k[Ct]||k.namespaceURI==="http://www.w3.org/2000/svg"||k.hasAttribute("itemprop"))&&(k=J.createElement(E),J.head.insertBefore(k,J.querySelector("head > title"))),Ft(k,E,x),k[Ct]=m,ct(k),E=k;break e;case"link":var H=gh("link","href",J).get(E+(x.href||""));if(H){for(var oe=0;oe<H.length;oe++)if(k=H[oe],k.getAttribute("href")===(x.href==null||x.href===""?null:x.href)&&k.getAttribute("rel")===(x.rel==null?null:x.rel)&&k.getAttribute("title")===(x.title==null?null:x.title)&&k.getAttribute("crossorigin")===(x.crossOrigin==null?null:x.crossOrigin)){H.splice(oe,1);break t}}k=J.createElement(E),Ft(k,E,x),J.head.appendChild(k);break;case"meta":if(H=gh("meta","content",J).get(E+(x.content||""))){for(oe=0;oe<H.length;oe++)if(k=H[oe],k.getAttribute("content")===(x.content==null?null:""+x.content)&&k.getAttribute("name")===(x.name==null?null:x.name)&&k.getAttribute("property")===(x.property==null?null:x.property)&&k.getAttribute("http-equiv")===(x.httpEquiv==null?null:x.httpEquiv)&&k.getAttribute("charset")===(x.charSet==null?null:x.charSet)){H.splice(oe,1);break t}}k=J.createElement(E),Ft(k,E,x),J.head.appendChild(k);break;default:throw Error(n(468,E))}k[Ct]=m,ct(k),E=k}m.stateNode=E}else yh(J,m.type,m.stateNode);else m.stateNode=vh(J,E,m.memoizedProps);else k!==E?(k===null?x.stateNode!==null&&(x=x.stateNode,x.parentNode.removeChild(x)):k.count--,E===null?yh(J,m.type,m.stateNode):vh(J,E,m.memoizedProps)):E===null&&m.stateNode!==null&&el(m,m.memoizedProps,x.memoizedProps)}break;case 27:Vt(g,m),Ht(m),E&512&&(Xt||x===null||Mr(x,x.return)),x!==null&&E&4&&el(m,m.memoizedProps,x.memoizedProps);break;case 5:if(Vt(g,m),Ht(m),E&512&&(Xt||x===null||Mr(x,x.return)),m.flags&32){J=m.stateNode;try{ji(J,"")}catch(Qe){pt(m,m.return,Qe)}}E&4&&m.stateNode!=null&&(J=m.memoizedProps,el(m,J,x!==null?x.memoizedProps:J)),E&1024&&(il=!0);break;case 6:if(Vt(g,m),Ht(m),E&4){if(m.stateNode===null)throw Error(n(162));E=m.memoizedProps,x=m.stateNode;try{x.nodeValue=E}catch(Qe){pt(m,m.return,Qe)}}break;case 3:if(bs=null,J=Cr,Cr=gs(g.containerInfo),Vt(g,m),Cr=J,Ht(m),E&4&&x!==null&&x.memoizedState.isDehydrated)try{Mn(g.containerInfo)}catch(Qe){pt(m,m.return,Qe)}il&&(il=!1,g0(m));break;case 4:E=Cr,Cr=gs(m.stateNode.containerInfo),Vt(g,m),Ht(m),Cr=E;break;case 12:Vt(g,m),Ht(m);break;case 31:Vt(g,m),Ht(m),E&4&&(E=m.updateQueue,E!==null&&(m.updateQueue=null,is(m,E)));break;case 13:Vt(g,m),Ht(m),m.child.flags&8192&&m.memoizedState!==null!=(x!==null&&x.memoizedState!==null)&&(as=le()),E&4&&(E=m.updateQueue,E!==null&&(m.updateQueue=null,is(m,E)));break;case 22:J=m.memoizedState!==null;var be=x!==null&&x.memoizedState!==null,Ae=zr,Je=Xt;if(zr=Ae||J,Xt=Je||be,Vt(g,m),Xt=Je,zr=Ae,Ht(m),E&8192)e:for(g=m.stateNode,g._visibility=J?g._visibility&-2:g._visibility|1,J&&(x===null||be||zr||Xt||Ii(m)),x=null,g=m;;){if(g.tag===5||g.tag===26){if(x===null){be=x=g;try{if(k=be.stateNode,J)H=k.style,typeof H.setProperty=="function"?H.setProperty("display","none","important"):H.display="none";else{oe=be.stateNode;var ke=be.memoizedProps.style,Oe=ke!=null&&ke.hasOwnProperty("display")?ke.display:null;oe.style.display=Oe==null||typeof Oe=="boolean"?"":(""+Oe).trim()}}catch(Qe){pt(be,be.return,Qe)}}}else if(g.tag===6){if(x===null){be=g;try{be.stateNode.nodeValue=J?"":be.memoizedProps}catch(Qe){pt(be,be.return,Qe)}}}else if(g.tag===18){if(x===null){be=g;try{var Ge=be.stateNode;J?sh(Ge,!0):sh(be.stateNode,!1)}catch(Qe){pt(be,be.return,Qe)}}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===m)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===m)break e;for(;g.sibling===null;){if(g.return===null||g.return===m)break e;x===g&&(x=null),g=g.return}x===g&&(x=null),g.sibling.return=g.return,g=g.sibling}E&4&&(E=m.updateQueue,E!==null&&(x=E.retryQueue,x!==null&&(E.retryQueue=null,is(m,x))));break;case 19:Vt(g,m),Ht(m),E&4&&(E=m.updateQueue,E!==null&&(m.updateQueue=null,is(m,E)));break;case 30:break;case 21:break;default:Vt(g,m),Ht(m)}}function Ht(m){var g=m.flags;if(g&2){try{for(var x,E=m.return;E!==null;){if(l0(E)){x=E;break}E=E.return}if(x==null)throw Error(n(160));switch(x.tag){case 27:var J=x.stateNode,k=tl(m);rs(m,k,J);break;case 5:var H=x.stateNode;x.flags&32&&(ji(H,""),x.flags&=-33);var oe=tl(m);rs(m,oe,H);break;case 3:case 4:var be=x.stateNode.containerInfo,Ae=tl(m);rl(m,Ae,be);break;default:throw Error(n(161))}}catch(Je){pt(m,m.return,Je)}m.flags&=-3}g&4096&&(m.flags&=-4097)}function g0(m){if(m.subtreeFlags&1024)for(m=m.child;m!==null;){var g=m;g0(g),g.tag===5&&g.flags&1024&&g.stateNode.reset(),m=m.sibling}}function Ir(m,g){if(g.subtreeFlags&8772)for(g=g.child;g!==null;)h0(m,g.alternate,g),g=g.sibling}function Ii(m){for(m=m.child;m!==null;){var g=m;switch(g.tag){case 0:case 11:case 14:case 15:ci(4,g,g.return),Ii(g);break;case 1:Mr(g,g.return);var x=g.stateNode;typeof x.componentWillUnmount=="function"&&s0(g,g.return,x),Ii(g);break;case 27:ua(g.stateNode);case 26:case 5:Mr(g,g.return),Ii(g);break;case 22:g.memoizedState===null&&Ii(g);break;case 30:Ii(g);break;default:Ii(g)}m=m.sibling}}function Ur(m,g,x){for(x=x&&(g.subtreeFlags&8772)!==0,g=g.child;g!==null;){var E=g.alternate,J=m,k=g,H=k.flags;switch(k.tag){case 0:case 11:case 15:Ur(J,k,x),Kn(4,k);break;case 1:if(Ur(J,k,x),E=k,J=E.stateNode,typeof J.componentDidMount=="function")try{J.componentDidMount()}catch(Ae){pt(E,E.return,Ae)}if(E=k,J=E.updateQueue,J!==null){var oe=E.stateNode;try{var be=J.shared.hiddenCallbacks;if(be!==null)for(J.shared.hiddenCallbacks=null,J=0;J<be.length;J++)Uu(be[J],oe)}catch(Ae){pt(E,E.return,Ae)}}x&&H&64&&a0(k),ea(k,k.return);break;case 27:u0(k);case 26:case 5:Ur(J,k,x),x&&E===null&&H&4&&o0(k),ea(k,k.return);break;case 12:Ur(J,k,x);break;case 31:Ur(J,k,x),x&&H&4&&m0(J,k);break;case 13:Ur(J,k,x),x&&H&4&&p0(J,k);break;case 22:k.memoizedState===null&&Ur(J,k,x),ea(k,k.return);break;case 30:break;default:Ur(J,k,x)}g=g.sibling}}function nl(m,g){var x=null;m!==null&&m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(x=m.memoizedState.cachePool.pool),m=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(m=g.memoizedState.cachePool.pool),m!==x&&(m!=null&&m.refCount++,x!=null&&Fn(x))}function al(m,g){m=null,g.alternate!==null&&(m=g.alternate.memoizedState.cache),g=g.memoizedState.cache,g!==m&&(g.refCount++,m!=null&&Fn(m))}function Sr(m,g,x,E){if(g.subtreeFlags&10256)for(g=g.child;g!==null;)y0(m,g,x,E),g=g.sibling}function y0(m,g,x,E){var J=g.flags;switch(g.tag){case 0:case 11:case 15:Sr(m,g,x,E),J&2048&&Kn(9,g);break;case 1:Sr(m,g,x,E);break;case 3:Sr(m,g,x,E),J&2048&&(m=null,g.alternate!==null&&(m=g.alternate.memoizedState.cache),g=g.memoizedState.cache,g!==m&&(g.refCount++,m!=null&&Fn(m)));break;case 12:if(J&2048){Sr(m,g,x,E),m=g.stateNode;try{var k=g.memoizedProps,H=k.id,oe=k.onPostCommit;typeof oe=="function"&&oe(H,g.alternate===null?"mount":"update",m.passiveEffectDuration,-0)}catch(be){pt(g,g.return,be)}}else Sr(m,g,x,E);break;case 31:Sr(m,g,x,E);break;case 13:Sr(m,g,x,E);break;case 23:break;case 22:k=g.stateNode,H=g.alternate,g.memoizedState!==null?k._visibility&2?Sr(m,g,x,E):ta(m,g):k._visibility&2?Sr(m,g,x,E):(k._visibility|=2,pn(m,g,x,E,(g.subtreeFlags&10256)!==0||!1)),J&2048&&nl(H,g);break;case 24:Sr(m,g,x,E),J&2048&&al(g.alternate,g);break;default:Sr(m,g,x,E)}}function pn(m,g,x,E,J){for(J=J&&((g.subtreeFlags&10256)!==0||!1),g=g.child;g!==null;){var k=m,H=g,oe=x,be=E,Ae=H.flags;switch(H.tag){case 0:case 11:case 15:pn(k,H,oe,be,J),Kn(8,H);break;case 23:break;case 22:var Je=H.stateNode;H.memoizedState!==null?Je._visibility&2?pn(k,H,oe,be,J):ta(k,H):(Je._visibility|=2,pn(k,H,oe,be,J)),J&&Ae&2048&&nl(H.alternate,H);break;case 24:pn(k,H,oe,be,J),J&&Ae&2048&&al(H.alternate,H);break;default:pn(k,H,oe,be,J)}g=g.sibling}}function ta(m,g){if(g.subtreeFlags&10256)for(g=g.child;g!==null;){var x=m,E=g,J=E.flags;switch(E.tag){case 22:ta(x,E),J&2048&&nl(E.alternate,E);break;case 24:ta(x,E),J&2048&&al(E.alternate,E);break;default:ta(x,E)}g=g.sibling}}var ra=8192;function vn(m,g,x){if(m.subtreeFlags&ra)for(m=m.child;m!==null;)b0(m,g,x),m=m.sibling}function b0(m,g,x){switch(m.tag){case 26:vn(m,g,x),m.flags&ra&&m.memoizedState!==null&&Od(x,Cr,m.memoizedState,m.memoizedProps);break;case 5:vn(m,g,x);break;case 3:case 4:var E=Cr;Cr=gs(m.stateNode.containerInfo),vn(m,g,x),Cr=E;break;case 22:m.memoizedState===null&&(E=m.alternate,E!==null&&E.memoizedState!==null?(E=ra,ra=16777216,vn(m,g,x),ra=E):vn(m,g,x));break;default:vn(m,g,x)}}function x0(m){var g=m.alternate;if(g!==null&&(m=g.child,m!==null)){g.child=null;do g=m.sibling,m.sibling=null,m=g;while(m!==null)}}function ia(m){var g=m.deletions;if((m.flags&16)!==0){if(g!==null)for(var x=0;x<g.length;x++){var E=g[x];Pt=E,S0(E,m)}x0(m)}if(m.subtreeFlags&10256)for(m=m.child;m!==null;)C0(m),m=m.sibling}function C0(m){switch(m.tag){case 0:case 11:case 15:ia(m),m.flags&2048&&ci(9,m,m.return);break;case 3:ia(m);break;case 12:ia(m);break;case 22:var g=m.stateNode;m.memoizedState!==null&&g._visibility&2&&(m.return===null||m.return.tag!==13)?(g._visibility&=-3,ns(m)):ia(m);break;default:ia(m)}}function ns(m){var g=m.deletions;if((m.flags&16)!==0){if(g!==null)for(var x=0;x<g.length;x++){var E=g[x];Pt=E,S0(E,m)}x0(m)}for(m=m.child;m!==null;){switch(g=m,g.tag){case 0:case 11:case 15:ci(8,g,g.return),ns(g);break;case 22:x=g.stateNode,x._visibility&2&&(x._visibility&=-3,ns(g));break;default:ns(g)}m=m.sibling}}function S0(m,g){for(;Pt!==null;){var x=Pt;switch(x.tag){case 0:case 11:case 15:ci(8,x,g);break;case 23:case 22:if(x.memoizedState!==null&&x.memoizedState.cachePool!==null){var E=x.memoizedState.cachePool.pool;E!=null&&E.refCount++}break;case 24:Fn(x.memoizedState.cache)}if(E=x.child,E!==null)E.return=x,Pt=E;else e:for(x=m;Pt!==null;){E=Pt;var J=E.sibling,k=E.return;if(f0(E),E===x){Pt=null;break e}if(J!==null){J.return=k,Pt=J;break e}Pt=k}}}var jf={getCacheForType:function(m){var g=Rt(Dt),x=g.data.get(m);return x===void 0&&(x=m(),g.data.set(m,x)),x},cacheSignal:function(){return Rt(Dt).controller.signal}},Vf=typeof WeakMap=="function"?WeakMap:Map,dt=0,xt=null,nt=null,ot=0,mt=0,ir=null,hi=!1,gn=!1,sl=!1,Yr=0,Et=0,fi=0,Ui=0,ol=0,nr=0,yn=0,na=null,Zt=null,ll=!1,as=0,w0=0,ss=1/0,os=null,di=null,Gt=0,mi=null,bn=null,jr=0,ul=0,cl=null,_0=null,aa=0,hl=null;function ar(){return(dt&2)!==0&&ot!==0?ot&-ot:z.T!==null?gl():Mi()}function N0(){if(nr===0)if((ot&536870912)===0||ut){var m=Fe;Fe<<=1,(Fe&3932160)===0&&(Fe=262144),nr=m}else nr=536870912;return m=tr.current,m!==null&&(m.flags|=32),nr}function Wt(m,g,x){(m===xt&&(mt===2||mt===9)||m.cancelPendingCommit!==null)&&(xn(m,0),vi(m,ot,nr,!1)),Nt(m,x),((dt&2)===0||m!==xt)&&(m===xt&&((dt&2)===0&&(Ui|=x),Et===4&&vi(m,ot,nr,!1)),Er(m))}function M0(m,g,x){if((dt&6)!==0)throw Error(n(327));var E=!x&&(g&127)===0&&(g&m.expiredLanes)===0||zt(m,g),J=E?Wf(m,g):dl(m,g,!0),k=E;do{if(J===0){gn&&!E&&vi(m,g,0,!1);break}else{if(x=m.current.alternate,k&&!Hf(x)){J=dl(m,g,!1),k=!1;continue}if(J===2){if(k=g,m.errorRecoveryDisabledLanes&k)var H=0;else H=m.pendingLanes&-536870913,H=H!==0?H:H&536870912?536870912:0;if(H!==0){g=H;e:{var oe=m;J=na;var be=oe.current.memoizedState.isDehydrated;if(be&&(xn(oe,H).flags|=256),H=dl(oe,H,!1),H!==2){if(sl&&!be){oe.errorRecoveryDisabledLanes|=k,Ui|=k,J=4;break e}k=Zt,Zt=J,k!==null&&(Zt===null?Zt=k:Zt.push.apply(Zt,k))}J=H}if(k=!1,J!==2)continue}}if(J===1){xn(m,0),vi(m,g,0,!0);break}e:{switch(E=m,k=J,k){case 0:case 1:throw Error(n(345));case 4:if((g&4194048)!==g)break;case 6:vi(E,g,nr,!hi);break e;case 2:Zt=null;break;case 3:case 5:break;default:throw Error(n(329))}if((g&62914560)===g&&(J=as+300-le(),10<J)){if(vi(E,g,nr,!hi),vt(E,0,!0)!==0)break e;jr=g,E.timeoutHandle=ih(E0.bind(null,E,x,Zt,os,ll,g,nr,Ui,yn,hi,k,"Throttled",-0,0),J);break e}E0(E,x,Zt,os,ll,g,nr,Ui,yn,hi,k,null,-0,0)}}break}while(!0);Er(m)}function E0(m,g,x,E,J,k,H,oe,be,Ae,Je,ke,Oe,Ge){if(m.timeoutHandle=-1,ke=g.subtreeFlags,ke&8192||(ke&16785408)===16785408){ke={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Tr},b0(g,k,ke);var Qe=(k&62914560)===k?as-le():(k&4194048)===k?w0-le():0;if(Qe=Xd(ke,Qe),Qe!==null){jr=k,m.cancelPendingCommit=Qe(P0.bind(null,m,g,k,x,E,J,H,oe,be,Je,ke,null,Oe,Ge)),vi(m,k,H,!Ae);return}}P0(m,g,k,x,E,J,H,oe,be)}function Hf(m){for(var g=m;;){var x=g.tag;if((x===0||x===11||x===15)&&g.flags&16384&&(x=g.updateQueue,x!==null&&(x=x.stores,x!==null)))for(var E=0;E<x.length;E++){var J=x[E],k=J.getSnapshot;J=J.value;try{if(!Kt(k(),J))return!1}catch{return!1}}if(x=g.child,g.subtreeFlags&16384&&x!==null)x.return=g,g=x;else{if(g===m)break;for(;g.sibling===null;){if(g.return===null||g.return===m)return!0;g=g.return}g.sibling.return=g.return,g=g.sibling}}return!0}function vi(m,g,x,E){g&=~ol,g&=~Ui,m.suspendedLanes|=g,m.pingedLanes&=~g,E&&(m.warmLanes|=g),E=m.expirationTimes;for(var J=g;0<J;){var k=31-Ee(J),H=1<<k;E[k]=-1,J&=~H}x!==0&&Jt(m,x,g)}function ls(){return(dt&6)===0?(sa(0),!1):!0}function fl(){if(nt!==null){if(mt===0)var m=nt.return;else m=nt,Pr=Pi=null,$o(m),cn=null,Ln=0,m=nt;for(;m!==null;)n0(m.alternate,m),m=m.return;nt=null}}function xn(m,g){var x=m.timeoutHandle;x!==-1&&(m.timeoutHandle=-1,pd(x)),x=m.cancelPendingCommit,x!==null&&(m.cancelPendingCommit=null,x()),jr=0,fl(),xt=m,nt=x=Xr(m.current,null),ot=g,mt=0,ir=null,hi=!1,gn=zt(m,g),sl=!1,yn=nr=ol=Ui=fi=Et=0,Zt=na=null,ll=!1,(g&8)!==0&&(g|=g&32);var E=m.entangledLanes;if(E!==0)for(m=m.entanglements,E&=g;0<E;){var J=31-Ee(E),k=1<<J;g|=m[J],E&=~k}return Yr=g,Aa(),x}function $0(m,g){rt=null,z.H=Zn,g===un||g===Ba?(g=Fu(),mt=3):g===vo?(g=Fu(),mt=4):mt=g===Uo?8:g!==null&&typeof g=="object"&&typeof g.then=="function"?6:1,ir=g,nt===null&&(Et=1,Wa(m,cr(g,m.current)))}function A0(){var m=tr.current;return m===null?!0:(ot&4194048)===ot?mr===null:(ot&62914560)===ot||(ot&536870912)!==0?m===mr:!1}function D0(){var m=z.H;return z.H=Zn,m===null?Zn:m}function T0(){var m=z.A;return z.A=jf,m}function us(){Et=4,hi||(ot&4194048)!==ot&&tr.current!==null||(gn=!0),(fi&134217727)===0&&(Ui&134217727)===0||xt===null||vi(xt,ot,nr,!1)}function dl(m,g,x){var E=dt;dt|=2;var J=D0(),k=T0();(xt!==m||ot!==g)&&(os=null,xn(m,g)),g=!1;var H=Et;e:do try{if(mt!==0&&nt!==null){var oe=nt,be=ir;switch(mt){case 8:fl(),H=6;break e;case 3:case 2:case 9:case 6:tr.current===null&&(g=!0);var Ae=mt;if(mt=0,ir=null,Cn(m,oe,be,Ae),x&&gn){H=0;break e}break;default:Ae=mt,mt=0,ir=null,Cn(m,oe,be,Ae)}}Zf(),H=Et;break}catch(Je){$0(m,Je)}while(!0);return g&&m.shellSuspendCounter++,Pr=Pi=null,dt=E,z.H=J,z.A=k,nt===null&&(xt=null,ot=0,Aa()),H}function Zf(){for(;nt!==null;)O0(nt)}function Wf(m,g){var x=dt;dt|=2;var E=D0(),J=T0();xt!==m||ot!==g?(os=null,ss=le()+500,xn(m,g)):gn=zt(m,g);e:do try{if(mt!==0&&nt!==null){g=nt;var k=ir;t:switch(mt){case 1:mt=0,ir=null,Cn(m,g,k,1);break;case 2:case 9:if(Ru(k)){mt=0,ir=null,X0(g);break}g=function(){mt!==2&&mt!==9||xt!==m||(mt=7),Er(m)},k.then(g,g);break e;case 3:mt=7;break e;case 4:mt=5;break e;case 7:Ru(k)?(mt=0,ir=null,X0(g)):(mt=0,ir=null,Cn(m,g,k,7));break;case 5:var H=null;switch(nt.tag){case 26:H=nt.memoizedState;case 5:case 27:var oe=nt;if(H?bh(H):oe.stateNode.complete){mt=0,ir=null;var be=oe.sibling;if(be!==null)nt=be;else{var Ae=oe.return;Ae!==null?(nt=Ae,cs(Ae)):nt=null}break t}}mt=0,ir=null,Cn(m,g,k,5);break;case 6:mt=0,ir=null,Cn(m,g,k,6);break;case 8:fl(),Et=6;break e;default:throw Error(n(462))}}Qf();break}catch(Je){$0(m,Je)}while(!0);return Pr=Pi=null,z.H=E,z.A=J,dt=x,nt!==null?0:(xt=null,ot=0,Aa(),Et)}function Qf(){for(;nt!==null&&!ge();)O0(nt)}function O0(m){var g=r0(m.alternate,m,Yr);m.memoizedProps=m.pendingProps,g===null?cs(m):nt=g}function X0(m){var g=m,x=g.alternate;switch(g.tag){case 15:case 0:g=Zc(x,g,g.pendingProps,g.type,void 0,ot);break;case 11:g=Zc(x,g,g.pendingProps,g.type.render,g.ref,ot);break;case 5:$o(g);default:n0(x,g),g=nt=Eu(g,Yr),g=r0(x,g,Yr)}m.memoizedProps=m.pendingProps,g===null?cs(m):nt=g}function Cn(m,g,x,E){Pr=Pi=null,$o(g),cn=null,Ln=0;var J=g.return;try{if(Ff(m,J,g,x,ot)){Et=1,Wa(m,cr(x,m.current)),nt=null;return}}catch(k){if(J!==null)throw nt=J,k;Et=1,Wa(m,cr(x,m.current)),nt=null;return}g.flags&32768?(ut||E===1?m=!0:gn||(ot&536870912)!==0?m=!1:(hi=m=!0,(E===2||E===9||E===3||E===6)&&(E=tr.current,E!==null&&E.tag===13&&(E.flags|=16384))),G0(g,m)):cs(g)}function cs(m){var g=m;do{if((g.flags&32768)!==0){G0(g,hi);return}m=g.return;var x=If(g.alternate,g,Yr);if(x!==null){nt=x;return}if(g=g.sibling,g!==null){nt=g;return}nt=g=m}while(g!==null);Et===0&&(Et=5)}function G0(m,g){do{var x=Uf(m.alternate,m);if(x!==null){x.flags&=32767,nt=x;return}if(x=m.return,x!==null&&(x.flags|=32768,x.subtreeFlags=0,x.deletions=null),!g&&(m=m.sibling,m!==null)){nt=m;return}nt=m=x}while(m!==null);Et=6,nt=null}function P0(m,g,x,E,J,k,H,oe,be){m.cancelPendingCommit=null;do hs();while(Gt!==0);if((dt&6)!==0)throw Error(n(327));if(g!==null){if(g===m.current)throw Error(n(177));if(k=g.lanes|g.childLanes,k|=Ks,gr(m,x,k,H,oe,be),m===xt&&(nt=xt=null,ot=0),bn=g,mi=m,jr=x,ul=k,cl=J,_0=E,(g.subtreeFlags&10256)!==0||(g.flags&10256)!==0?(m.callbackNode=null,m.callbackPriority=0,rd(Se,function(){return F0(),null})):(m.callbackNode=null,m.callbackPriority=0),E=(g.flags&13878)!==0,(g.subtreeFlags&13878)!==0||E){E=z.T,z.T=null,J=Y.p,Y.p=2,H=dt,dt|=4;try{qf(m,g,x)}finally{dt=H,Y.p=J,z.T=E}}Gt=1,J0(),B0(),R0()}}function J0(){if(Gt===1){Gt=0;var m=mi,g=bn,x=(g.flags&13878)!==0;if((g.subtreeFlags&13878)!==0||x){x=z.T,z.T=null;var E=Y.p;Y.p=2;var J=dt;dt|=4;try{v0(g,m);var k=Nl,H=yu(m.containerInfo),oe=k.focusedElem,be=k.selectionRange;if(H!==oe&&oe&&oe.ownerDocument&&gu(oe.ownerDocument.documentElement,oe)){if(be!==null&&Vs(oe)){var Ae=be.start,Je=be.end;if(Je===void 0&&(Je=Ae),"selectionStart"in oe)oe.selectionStart=Ae,oe.selectionEnd=Math.min(Je,oe.value.length);else{var ke=oe.ownerDocument||document,Oe=ke&&ke.defaultView||window;if(Oe.getSelection){var Ge=Oe.getSelection(),Qe=oe.textContent.length,tt=Math.min(be.start,Qe),bt=be.end===void 0?tt:Math.min(be.end,Qe);!Ge.extend&&tt>bt&&(H=bt,bt=tt,tt=H);var _e=vu(oe,tt),Ce=vu(oe,bt);if(_e&&Ce&&(Ge.rangeCount!==1||Ge.anchorNode!==_e.node||Ge.anchorOffset!==_e.offset||Ge.focusNode!==Ce.node||Ge.focusOffset!==Ce.offset)){var $e=ke.createRange();$e.setStart(_e.node,_e.offset),Ge.removeAllRanges(),tt>bt?(Ge.addRange($e),Ge.extend(Ce.node,Ce.offset)):($e.setEnd(Ce.node,Ce.offset),Ge.addRange($e))}}}}for(ke=[],Ge=oe;Ge=Ge.parentNode;)Ge.nodeType===1&&ke.push({element:Ge,left:Ge.scrollLeft,top:Ge.scrollTop});for(typeof oe.focus=="function"&&oe.focus(),oe=0;oe<ke.length;oe++){var Re=ke[oe];Re.element.scrollLeft=Re.left,Re.element.scrollTop=Re.top}}ws=!!_l,Nl=_l=null}finally{dt=J,Y.p=E,z.T=x}}m.current=g,Gt=2}}function B0(){if(Gt===2){Gt=0;var m=mi,g=bn,x=(g.flags&8772)!==0;if((g.subtreeFlags&8772)!==0||x){x=z.T,z.T=null;var E=Y.p;Y.p=2;var J=dt;dt|=4;try{h0(m,g.alternate,g)}finally{dt=J,Y.p=E,z.T=x}}Gt=3}}function R0(){if(Gt===4||Gt===3){Gt=0,te();var m=mi,g=bn,x=jr,E=_0;(g.subtreeFlags&10256)!==0||(g.flags&10256)!==0?Gt=5:(Gt=0,bn=mi=null,k0(m,m.pendingLanes));var J=m.pendingLanes;if(J===0&&(di=null),It(x),g=g.stateNode,Ue&&typeof Ue.onCommitFiberRoot=="function")try{Ue.onCommitFiberRoot(ze,g,void 0,(g.current.flags&128)===128)}catch{}if(E!==null){g=z.T,J=Y.p,Y.p=2,z.T=null;try{for(var k=m.onRecoverableError,H=0;H<E.length;H++){var oe=E[H];k(oe.value,{componentStack:oe.stack})}}finally{z.T=g,Y.p=J}}(jr&3)!==0&&hs(),Er(m),J=m.pendingLanes,(x&261930)!==0&&(J&42)!==0?m===hl?aa++:(aa=0,hl=m):aa=0,sa(0)}}function k0(m,g){(m.pooledCacheLanes&=g)===0&&(g=m.pooledCache,g!=null&&(m.pooledCache=null,Fn(g)))}function hs(){return J0(),B0(),R0(),F0()}function F0(){if(Gt!==5)return!1;var m=mi,g=ul;ul=0;var x=It(jr),E=z.T,J=Y.p;try{Y.p=32>x?32:x,z.T=null,x=cl,cl=null;var k=mi,H=jr;if(Gt=0,bn=mi=null,jr=0,(dt&6)!==0)throw Error(n(331));var oe=dt;if(dt|=4,C0(k.current),y0(k,k.current,H,x),dt=oe,sa(0,!1),Ue&&typeof Ue.onPostCommitFiberRoot=="function")try{Ue.onPostCommitFiberRoot(ze,k)}catch{}return!0}finally{Y.p=J,z.T=E,k0(m,g)}}function z0(m,g,x){g=cr(x,g),g=Io(m.stateNode,g,2),m=oi(m,g,2),m!==null&&(Nt(m,2),Er(m))}function pt(m,g,x){if(m.tag===3)z0(m,m,x);else for(;g!==null;){if(g.tag===3){z0(g,m,x);break}else if(g.tag===1){var E=g.stateNode;if(typeof g.type.getDerivedStateFromError=="function"||typeof E.componentDidCatch=="function"&&(di===null||!di.has(E))){m=cr(x,m),x=zc(2),E=oi(g,x,2),E!==null&&(Lc(x,E,g,m),Nt(E,2),Er(E));break}}g=g.return}}function ml(m,g,x){var E=m.pingCache;if(E===null){E=m.pingCache=new Vf;var J=new Set;E.set(g,J)}else J=E.get(g),J===void 0&&(J=new Set,E.set(g,J));J.has(x)||(sl=!0,J.add(x),m=Kf.bind(null,m,g,x),g.then(m,m))}function Kf(m,g,x){var E=m.pingCache;E!==null&&E.delete(g),m.pingedLanes|=m.suspendedLanes&x,m.warmLanes&=~x,xt===m&&(ot&x)===x&&(Et===4||Et===3&&(ot&62914560)===ot&&300>le()-as?(dt&2)===0&&xn(m,0):ol|=x,yn===ot&&(yn=0)),Er(m)}function L0(m,g){g===0&&(g=qi()),m=Oi(m,g),m!==null&&(Nt(m,g),Er(m))}function ed(m){var g=m.memoizedState,x=0;g!==null&&(x=g.retryLane),L0(m,x)}function td(m,g){var x=0;switch(m.tag){case 31:case 13:var E=m.stateNode,J=m.memoizedState;J!==null&&(x=J.retryLane);break;case 19:E=m.stateNode;break;case 22:E=m.stateNode._retryCache;break;default:throw Error(n(314))}E!==null&&E.delete(g),L0(m,x)}function rd(m,g){return Ze(m,g)}var fs=null,Sn=null,pl=!1,ds=!1,vl=!1,gi=0;function Er(m){m!==Sn&&m.next===null&&(Sn===null?fs=Sn=m:Sn=Sn.next=m),ds=!0,pl||(pl=!0,nd())}function sa(m,g){if(!vl&&ds){vl=!0;do for(var x=!1,E=fs;E!==null;){if(m!==0){var J=E.pendingLanes;if(J===0)var k=0;else{var H=E.suspendedLanes,oe=E.pingedLanes;k=(1<<31-Ee(42|m)+1)-1,k&=J&~(H&~oe),k=k&201326741?k&201326741|1:k?k|2:0}k!==0&&(x=!0,Y0(E,k))}else k=ot,k=vt(E,E===xt?k:0,E.cancelPendingCommit!==null||E.timeoutHandle!==-1),(k&3)===0||zt(E,k)||(x=!0,Y0(E,k));E=E.next}while(x);vl=!1}}function id(){I0()}function I0(){ds=pl=!1;var m=0;gi!==0&&md()&&(m=gi);for(var g=le(),x=null,E=fs;E!==null;){var J=E.next,k=U0(E,g);k===0?(E.next=null,x===null?fs=J:x.next=J,J===null&&(Sn=x)):(x=E,(m!==0||(k&3)!==0)&&(ds=!0)),E=J}Gt!==0&&Gt!==5||sa(m),gi!==0&&(gi=0)}function U0(m,g){for(var x=m.suspendedLanes,E=m.pingedLanes,J=m.expirationTimes,k=m.pendingLanes&-62914561;0<k;){var H=31-Ee(k),oe=1<<H,be=J[H];be===-1?((oe&x)===0||(oe&E)!==0)&&(J[H]=$r(oe,g)):be<=g&&(m.expiredLanes|=oe),k&=~oe}if(g=xt,x=ot,x=vt(m,m===g?x:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),E=m.callbackNode,x===0||m===g&&(mt===2||mt===9)||m.cancelPendingCommit!==null)return E!==null&&E!==null&&ue(E),m.callbackNode=null,m.callbackPriority=0;if((x&3)===0||zt(m,x)){if(g=x&-x,g===m.callbackPriority)return g;switch(E!==null&&ue(E),It(x)){case 2:case 8:x=ye;break;case 32:x=Se;break;case 268435456:x=Te;break;default:x=Se}return E=q0.bind(null,m),x=Ze(x,E),m.callbackPriority=g,m.callbackNode=x,g}return E!==null&&E!==null&&ue(E),m.callbackPriority=2,m.callbackNode=null,2}function q0(m,g){if(Gt!==0&&Gt!==5)return m.callbackNode=null,m.callbackPriority=0,null;var x=m.callbackNode;if(hs()&&m.callbackNode!==x)return null;var E=ot;return E=vt(m,m===xt?E:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),E===0?null:(M0(m,E,g),U0(m,le()),m.callbackNode!=null&&m.callbackNode===x?q0.bind(null,m):null)}function Y0(m,g){if(hs())return null;M0(m,g,!0)}function nd(){vd(function(){(dt&6)!==0?Ze(he,id):I0()})}function gl(){if(gi===0){var m=sn;m===0&&(m=De,De<<=1,(De&261888)===0&&(De=256)),gi=m}return gi}function j0(m){return m==null||typeof m=="symbol"||typeof m=="boolean"?null:typeof m=="function"?m:Ca(""+m)}function V0(m,g){var x=g.ownerDocument.createElement("input");return x.name=g.name,x.value=g.value,m.id&&x.setAttribute("form",m.id),g.parentNode.insertBefore(x,g),m=new FormData(m),x.parentNode.removeChild(x),m}function ad(m,g,x,E,J){if(g==="submit"&&x&&x.stateNode===J){var k=j0((J[Lt]||null).action),H=E.submitter;H&&(g=(g=H[Lt]||null)?j0(g.formAction):H.getAttribute("formAction"),g!==null&&(k=g,H=null));var oe=new Na("action","action",null,E,J);m.push({event:oe,listeners:[{instance:null,listener:function(){if(E.defaultPrevented){if(gi!==0){var be=H?V0(J,H):new FormData(J);Bo(x,{pending:!0,data:be,method:J.method,action:k},null,be)}}else typeof k=="function"&&(oe.preventDefault(),be=H?V0(J,H):new FormData(J),Bo(x,{pending:!0,data:be,method:J.method,action:k},k,be))},currentTarget:J}]})}}for(var yl=0;yl<Qs.length;yl++){var bl=Qs[yl],sd=bl.toLowerCase(),od=bl[0].toUpperCase()+bl.slice(1);xr(sd,"on"+od)}xr(Cu,"onAnimationEnd"),xr(Su,"onAnimationIteration"),xr(wu,"onAnimationStart"),xr("dblclick","onDoubleClick"),xr("focusin","onFocus"),xr("focusout","onBlur"),xr(wf,"onTransitionRun"),xr(_f,"onTransitionStart"),xr(Nf,"onTransitionCancel"),xr(_u,"onTransitionEnd"),Kr("onMouseEnter",["mouseout","mouseover"]),Kr("onMouseLeave",["mouseout","mouseover"]),Kr("onPointerEnter",["pointerout","pointerover"]),Kr("onPointerLeave",["pointerout","pointerover"]),Qt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Qt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Qt("onBeforeInput",["compositionend","keypress","textInput","paste"]),Qt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Qt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Qt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var oa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ld=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(oa));function H0(m,g){g=(g&4)!==0;for(var x=0;x<m.length;x++){var E=m[x],J=E.event;E=E.listeners;e:{var k=void 0;if(g)for(var H=E.length-1;0<=H;H--){var oe=E[H],be=oe.instance,Ae=oe.currentTarget;if(oe=oe.listener,be!==k&&J.isPropagationStopped())break e;k=oe,J.currentTarget=Ae;try{k(J)}catch(Je){$a(Je)}J.currentTarget=null,k=be}else for(H=0;H<E.length;H++){if(oe=E[H],be=oe.instance,Ae=oe.currentTarget,oe=oe.listener,be!==k&&J.isPropagationStopped())break e;k=oe,J.currentTarget=Ae;try{k(J)}catch(Je){$a(Je)}J.currentTarget=null,k=be}}}}function at(m,g){var x=g[En];x===void 0&&(x=g[En]=new Set);var E=m+"__bubble";x.has(E)||(Z0(g,m,2,!1),x.add(E))}function xl(m,g,x){var E=0;g&&(E|=4),Z0(x,m,E,g)}var ms="_reactListening"+Math.random().toString(36).slice(2);function Cl(m){if(!m[ms]){m[ms]=!0,ga.forEach(function(x){x!=="selectionchange"&&(ld.has(x)||xl(x,!1,m),xl(x,!0,m))});var g=m.nodeType===9?m:m.ownerDocument;g===null||g[ms]||(g[ms]=!0,xl("selectionchange",!1,g))}}function Z0(m,g,x,E){switch(Mh(g)){case 2:var J=Jd;break;case 8:J=Bd;break;default:J=Jl}x=J.bind(null,g,x,m),J=void 0,!ks||g!=="touchstart"&&g!=="touchmove"&&g!=="wheel"||(J=!0),E?J!==void 0?m.addEventListener(g,x,{capture:!0,passive:J}):m.addEventListener(g,x,!0):J!==void 0?m.addEventListener(g,x,{passive:J}):m.addEventListener(g,x,!1)}function Sl(m,g,x,E,J){var k=E;if((g&1)===0&&(g&2)===0&&E!==null)e:for(;;){if(E===null)return;var H=E.tag;if(H===3||H===4){var oe=E.stateNode.containerInfo;if(oe===J)break;if(H===4)for(H=E.return;H!==null;){var be=H.tag;if((be===3||be===4)&&H.stateNode.containerInfo===J)return;H=H.return}for(;oe!==null;){if(H=Wr(oe),H===null)return;if(be=H.tag,be===5||be===6||be===26||be===27){E=k=H;continue e}oe=oe.parentNode}}E=E.return}Wl(function(){var Ae=k,Je=Bs(x),ke=[];e:{var Oe=Nu.get(m);if(Oe!==void 0){var Ge=Na,Qe=m;switch(m){case"keypress":if(wa(x)===0)break e;case"keydown":case"keyup":Ge=ef;break;case"focusin":Qe="focus",Ge=Is;break;case"focusout":Qe="blur",Ge=Is;break;case"beforeblur":case"afterblur":Ge=Is;break;case"click":if(x.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ge=eu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ge=Lh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ge=nf;break;case Cu:case Su:case wu:Ge=qh;break;case _u:Ge=sf;break;case"scroll":case"scrollend":Ge=Fh;break;case"wheel":Ge=lf;break;case"copy":case"cut":case"paste":Ge=jh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ge=ru;break;case"toggle":case"beforetoggle":Ge=cf}var tt=(g&4)!==0,bt=!tt&&(m==="scroll"||m==="scrollend"),_e=tt?Oe!==null?Oe+"Capture":null:Oe;tt=[];for(var Ce=Ae,$e;Ce!==null;){var Re=Ce;if($e=Re.stateNode,Re=Re.tag,Re!==5&&Re!==26&&Re!==27||$e===null||_e===null||(Re=An(Ce,_e),Re!=null&&tt.push(la(Ce,Re,$e))),bt)break;Ce=Ce.return}0<tt.length&&(Oe=new Ge(Oe,Qe,null,x,Je),ke.push({event:Oe,listeners:tt}))}}if((g&7)===0){e:{if(Oe=m==="mouseover"||m==="pointerover",Ge=m==="mouseout"||m==="pointerout",Oe&&x!==Js&&(Qe=x.relatedTarget||x.fromElement)&&(Wr(Qe)||Qe[Zr]))break e;if((Ge||Oe)&&(Oe=Je.window===Je?Je:(Oe=Je.ownerDocument)?Oe.defaultView||Oe.parentWindow:window,Ge?(Qe=x.relatedTarget||x.toElement,Ge=Ae,Qe=Qe?Wr(Qe):null,Qe!==null&&(bt=o(Qe),tt=Qe.tag,Qe!==bt||tt!==5&&tt!==27&&tt!==6)&&(Qe=null)):(Ge=null,Qe=Ae),Ge!==Qe)){if(tt=eu,Re="onMouseLeave",_e="onMouseEnter",Ce="mouse",(m==="pointerout"||m==="pointerover")&&(tt=ru,Re="onPointerLeave",_e="onPointerEnter",Ce="pointer"),bt=Ge==null?Oe:br(Ge),$e=Qe==null?Oe:br(Qe),Oe=new tt(Re,Ce+"leave",Ge,x,Je),Oe.target=bt,Oe.relatedTarget=$e,Re=null,Wr(Je)===Ae&&(tt=new tt(_e,Ce+"enter",Qe,x,Je),tt.target=$e,tt.relatedTarget=bt,Re=tt),bt=Re,Ge&&Qe)t:{for(tt=ud,_e=Ge,Ce=Qe,$e=0,Re=_e;Re;Re=tt(Re))$e++;Re=0;for(var et=Ce;et;et=tt(et))Re++;for(;0<$e-Re;)_e=tt(_e),$e--;for(;0<Re-$e;)Ce=tt(Ce),Re--;for(;$e--;){if(_e===Ce||Ce!==null&&_e===Ce.alternate){tt=_e;break t}_e=tt(_e),Ce=tt(Ce)}tt=null}else tt=null;Ge!==null&&W0(ke,Oe,Ge,tt,!1),Qe!==null&&bt!==null&&W0(ke,bt,Qe,tt,!0)}}e:{if(Oe=Ae?br(Ae):window,Ge=Oe.nodeName&&Oe.nodeName.toLowerCase(),Ge==="select"||Ge==="input"&&Oe.type==="file")var ht=cu;else if(lu(Oe))if(hu)ht=xf;else{ht=yf;var Ke=gf}else Ge=Oe.nodeName,!Ge||Ge.toLowerCase()!=="input"||Oe.type!=="checkbox"&&Oe.type!=="radio"?Ae&&Ps(Ae.elementType)&&(ht=cu):ht=bf;if(ht&&(ht=ht(m,Ae))){uu(ke,ht,x,Je);break e}Ke&&Ke(m,Oe,Ae),m==="focusout"&&Ae&&Oe.type==="number"&&Ae.memoizedProps.value!=null&&Gs(Oe,"number",Oe.value)}switch(Ke=Ae?br(Ae):window,m){case"focusin":(lu(Ke)||Ke.contentEditable==="true")&&(Wi=Ke,Hs=Ae,Bn=null);break;case"focusout":Bn=Hs=Wi=null;break;case"mousedown":Zs=!0;break;case"contextmenu":case"mouseup":case"dragend":Zs=!1,bu(ke,x,Je);break;case"selectionchange":if(Sf)break;case"keydown":case"keyup":bu(ke,x,Je)}var it;if(qs)e:{switch(m){case"compositionstart":var lt="onCompositionStart";break e;case"compositionend":lt="onCompositionEnd";break e;case"compositionupdate":lt="onCompositionUpdate";break e}lt=void 0}else Zi?su(m,x)&&(lt="onCompositionEnd"):m==="keydown"&&x.keyCode===229&&(lt="onCompositionStart");lt&&(iu&&x.locale!=="ko"&&(Zi||lt!=="onCompositionStart"?lt==="onCompositionEnd"&&Zi&&(it=Ql()):(ei=Je,Fs="value"in ei?ei.value:ei.textContent,Zi=!0)),Ke=ps(Ae,lt),0<Ke.length&&(lt=new tu(lt,m,null,x,Je),ke.push({event:lt,listeners:Ke}),it?lt.data=it:(it=ou(x),it!==null&&(lt.data=it)))),(it=ff?df(m,x):mf(m,x))&&(lt=ps(Ae,"onBeforeInput"),0<lt.length&&(Ke=new tu("onBeforeInput","beforeinput",null,x,Je),ke.push({event:Ke,listeners:lt}),Ke.data=it)),ad(ke,m,Ae,x,Je)}H0(ke,g)})}function la(m,g,x){return{instance:m,listener:g,currentTarget:x}}function ps(m,g){for(var x=g+"Capture",E=[];m!==null;){var J=m,k=J.stateNode;if(J=J.tag,J!==5&&J!==26&&J!==27||k===null||(J=An(m,x),J!=null&&E.unshift(la(m,J,k)),J=An(m,g),J!=null&&E.push(la(m,J,k))),m.tag===3)return E;m=m.return}return[]}function ud(m){if(m===null)return null;do m=m.return;while(m&&m.tag!==5&&m.tag!==27);return m||null}function W0(m,g,x,E,J){for(var k=g._reactName,H=[];x!==null&&x!==E;){var oe=x,be=oe.alternate,Ae=oe.stateNode;if(oe=oe.tag,be!==null&&be===E)break;oe!==5&&oe!==26&&oe!==27||Ae===null||(be=Ae,J?(Ae=An(x,k),Ae!=null&&H.unshift(la(x,Ae,be))):J||(Ae=An(x,k),Ae!=null&&H.push(la(x,Ae,be)))),x=x.return}H.length!==0&&m.push({event:g,listeners:H})}var cd=/\r\n?/g,hd=/\u0000|\uFFFD/g;function Q0(m){return(typeof m=="string"?m:""+m).replace(cd,`
`).replace(hd,"")}function K0(m,g){return g=Q0(g),Q0(m)===g}function yt(m,g,x,E,J,k){switch(x){case"children":typeof E=="string"?g==="body"||g==="textarea"&&E===""||ji(m,E):(typeof E=="number"||typeof E=="bigint")&&g!=="body"&&ji(m,""+E);break;case"className":ba(m,"class",E);break;case"tabIndex":ba(m,"tabindex",E);break;case"dir":case"role":case"viewBox":case"width":case"height":ba(m,x,E);break;case"style":Hl(m,E,k);break;case"data":if(g!=="object"){ba(m,"data",E);break}case"src":case"href":if(E===""&&(g!=="a"||x!=="href")){m.removeAttribute(x);break}if(E==null||typeof E=="function"||typeof E=="symbol"||typeof E=="boolean"){m.removeAttribute(x);break}E=Ca(""+E),m.setAttribute(x,E);break;case"action":case"formAction":if(typeof E=="function"){m.setAttribute(x,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof k=="function"&&(x==="formAction"?(g!=="input"&&yt(m,g,"name",J.name,J,null),yt(m,g,"formEncType",J.formEncType,J,null),yt(m,g,"formMethod",J.formMethod,J,null),yt(m,g,"formTarget",J.formTarget,J,null)):(yt(m,g,"encType",J.encType,J,null),yt(m,g,"method",J.method,J,null),yt(m,g,"target",J.target,J,null)));if(E==null||typeof E=="symbol"||typeof E=="boolean"){m.removeAttribute(x);break}E=Ca(""+E),m.setAttribute(x,E);break;case"onClick":E!=null&&(m.onclick=Tr);break;case"onScroll":E!=null&&at("scroll",m);break;case"onScrollEnd":E!=null&&at("scrollend",m);break;case"dangerouslySetInnerHTML":if(E!=null){if(typeof E!="object"||!("__html"in E))throw Error(n(61));if(x=E.__html,x!=null){if(J.children!=null)throw Error(n(60));m.innerHTML=x}}break;case"multiple":m.multiple=E&&typeof E!="function"&&typeof E!="symbol";break;case"muted":m.muted=E&&typeof E!="function"&&typeof E!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(E==null||typeof E=="function"||typeof E=="boolean"||typeof E=="symbol"){m.removeAttribute("xlink:href");break}x=Ca(""+E),m.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",x);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":E!=null&&typeof E!="function"&&typeof E!="symbol"?m.setAttribute(x,""+E):m.removeAttribute(x);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":E&&typeof E!="function"&&typeof E!="symbol"?m.setAttribute(x,""):m.removeAttribute(x);break;case"capture":case"download":E===!0?m.setAttribute(x,""):E!==!1&&E!=null&&typeof E!="function"&&typeof E!="symbol"?m.setAttribute(x,E):m.removeAttribute(x);break;case"cols":case"rows":case"size":case"span":E!=null&&typeof E!="function"&&typeof E!="symbol"&&!isNaN(E)&&1<=E?m.setAttribute(x,E):m.removeAttribute(x);break;case"rowSpan":case"start":E==null||typeof E=="function"||typeof E=="symbol"||isNaN(E)?m.removeAttribute(x):m.setAttribute(x,E);break;case"popover":at("beforetoggle",m),at("toggle",m),ya(m,"popover",E);break;case"xlinkActuate":Dr(m,"http://www.w3.org/1999/xlink","xlink:actuate",E);break;case"xlinkArcrole":Dr(m,"http://www.w3.org/1999/xlink","xlink:arcrole",E);break;case"xlinkRole":Dr(m,"http://www.w3.org/1999/xlink","xlink:role",E);break;case"xlinkShow":Dr(m,"http://www.w3.org/1999/xlink","xlink:show",E);break;case"xlinkTitle":Dr(m,"http://www.w3.org/1999/xlink","xlink:title",E);break;case"xlinkType":Dr(m,"http://www.w3.org/1999/xlink","xlink:type",E);break;case"xmlBase":Dr(m,"http://www.w3.org/XML/1998/namespace","xml:base",E);break;case"xmlLang":Dr(m,"http://www.w3.org/XML/1998/namespace","xml:lang",E);break;case"xmlSpace":Dr(m,"http://www.w3.org/XML/1998/namespace","xml:space",E);break;case"is":ya(m,"is",E);break;case"innerText":case"textContent":break;default:(!(2<x.length)||x[0]!=="o"&&x[0]!=="O"||x[1]!=="n"&&x[1]!=="N")&&(x=Rh.get(x)||x,ya(m,x,E))}}function wl(m,g,x,E,J,k){switch(x){case"style":Hl(m,E,k);break;case"dangerouslySetInnerHTML":if(E!=null){if(typeof E!="object"||!("__html"in E))throw Error(n(61));if(x=E.__html,x!=null){if(J.children!=null)throw Error(n(60));m.innerHTML=x}}break;case"children":typeof E=="string"?ji(m,E):(typeof E=="number"||typeof E=="bigint")&&ji(m,""+E);break;case"onScroll":E!=null&&at("scroll",m);break;case"onScrollEnd":E!=null&&at("scrollend",m);break;case"onClick":E!=null&&(m.onclick=Tr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!$i.hasOwnProperty(x))e:{if(x[0]==="o"&&x[1]==="n"&&(J=x.endsWith("Capture"),g=x.slice(2,J?x.length-7:void 0),k=m[Lt]||null,k=k!=null?k[x]:null,typeof k=="function"&&m.removeEventListener(g,k,J),typeof E=="function")){typeof k!="function"&&k!==null&&(x in m?m[x]=null:m.hasAttribute(x)&&m.removeAttribute(x)),m.addEventListener(g,E,J);break e}x in m?m[x]=E:E===!0?m.setAttribute(x,""):ya(m,x,E)}}}function Ft(m,g,x){switch(g){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":at("error",m),at("load",m);var E=!1,J=!1,k;for(k in x)if(x.hasOwnProperty(k)){var H=x[k];if(H!=null)switch(k){case"src":E=!0;break;case"srcSet":J=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,g));default:yt(m,g,k,H,x,null)}}J&&yt(m,g,"srcSet",x.srcSet,x,null),E&&yt(m,g,"src",x.src,x,null);return;case"input":at("invalid",m);var oe=k=H=J=null,be=null,Ae=null;for(E in x)if(x.hasOwnProperty(E)){var Je=x[E];if(Je!=null)switch(E){case"name":J=Je;break;case"type":H=Je;break;case"checked":be=Je;break;case"defaultChecked":Ae=Je;break;case"value":k=Je;break;case"defaultValue":oe=Je;break;case"children":case"dangerouslySetInnerHTML":if(Je!=null)throw Error(n(137,g));break;default:yt(m,g,E,Je,x,null)}}ql(m,k,oe,be,Ae,H,J,!1);return;case"select":at("invalid",m),E=H=k=null;for(J in x)if(x.hasOwnProperty(J)&&(oe=x[J],oe!=null))switch(J){case"value":k=oe;break;case"defaultValue":H=oe;break;case"multiple":E=oe;default:yt(m,g,J,oe,x,null)}g=k,x=H,m.multiple=!!E,g!=null?Yi(m,!!E,g,!1):x!=null&&Yi(m,!!E,x,!0);return;case"textarea":at("invalid",m),k=J=E=null;for(H in x)if(x.hasOwnProperty(H)&&(oe=x[H],oe!=null))switch(H){case"value":E=oe;break;case"defaultValue":J=oe;break;case"children":k=oe;break;case"dangerouslySetInnerHTML":if(oe!=null)throw Error(n(91));break;default:yt(m,g,H,oe,x,null)}jl(m,E,J,k);return;case"option":for(be in x)x.hasOwnProperty(be)&&(E=x[be],E!=null)&&(be==="selected"?m.selected=E&&typeof E!="function"&&typeof E!="symbol":yt(m,g,be,E,x,null));return;case"dialog":at("beforetoggle",m),at("toggle",m),at("cancel",m),at("close",m);break;case"iframe":case"object":at("load",m);break;case"video":case"audio":for(E=0;E<oa.length;E++)at(oa[E],m);break;case"image":at("error",m),at("load",m);break;case"details":at("toggle",m);break;case"embed":case"source":case"link":at("error",m),at("load",m);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Ae in x)if(x.hasOwnProperty(Ae)&&(E=x[Ae],E!=null))switch(Ae){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,g));default:yt(m,g,Ae,E,x,null)}return;default:if(Ps(g)){for(Je in x)x.hasOwnProperty(Je)&&(E=x[Je],E!==void 0&&wl(m,g,Je,E,x,void 0));return}}for(oe in x)x.hasOwnProperty(oe)&&(E=x[oe],E!=null&&yt(m,g,oe,E,x,null))}function fd(m,g,x,E){switch(g){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var J=null,k=null,H=null,oe=null,be=null,Ae=null,Je=null;for(Ge in x){var ke=x[Ge];if(x.hasOwnProperty(Ge)&&ke!=null)switch(Ge){case"checked":break;case"value":break;case"defaultValue":be=ke;default:E.hasOwnProperty(Ge)||yt(m,g,Ge,null,E,ke)}}for(var Oe in E){var Ge=E[Oe];if(ke=x[Oe],E.hasOwnProperty(Oe)&&(Ge!=null||ke!=null))switch(Oe){case"type":k=Ge;break;case"name":J=Ge;break;case"checked":Ae=Ge;break;case"defaultChecked":Je=Ge;break;case"value":H=Ge;break;case"defaultValue":oe=Ge;break;case"children":case"dangerouslySetInnerHTML":if(Ge!=null)throw Error(n(137,g));break;default:Ge!==ke&&yt(m,g,Oe,Ge,E,ke)}}Xs(m,H,oe,be,Ae,Je,k,J);return;case"select":Ge=H=oe=Oe=null;for(k in x)if(be=x[k],x.hasOwnProperty(k)&&be!=null)switch(k){case"value":break;case"multiple":Ge=be;default:E.hasOwnProperty(k)||yt(m,g,k,null,E,be)}for(J in E)if(k=E[J],be=x[J],E.hasOwnProperty(J)&&(k!=null||be!=null))switch(J){case"value":Oe=k;break;case"defaultValue":oe=k;break;case"multiple":H=k;default:k!==be&&yt(m,g,J,k,E,be)}g=oe,x=H,E=Ge,Oe!=null?Yi(m,!!x,Oe,!1):!!E!=!!x&&(g!=null?Yi(m,!!x,g,!0):Yi(m,!!x,x?[]:"",!1));return;case"textarea":Ge=Oe=null;for(oe in x)if(J=x[oe],x.hasOwnProperty(oe)&&J!=null&&!E.hasOwnProperty(oe))switch(oe){case"value":break;case"children":break;default:yt(m,g,oe,null,E,J)}for(H in E)if(J=E[H],k=x[H],E.hasOwnProperty(H)&&(J!=null||k!=null))switch(H){case"value":Oe=J;break;case"defaultValue":Ge=J;break;case"children":break;case"dangerouslySetInnerHTML":if(J!=null)throw Error(n(91));break;default:J!==k&&yt(m,g,H,J,E,k)}Yl(m,Oe,Ge);return;case"option":for(var Qe in x)Oe=x[Qe],x.hasOwnProperty(Qe)&&Oe!=null&&!E.hasOwnProperty(Qe)&&(Qe==="selected"?m.selected=!1:yt(m,g,Qe,null,E,Oe));for(be in E)Oe=E[be],Ge=x[be],E.hasOwnProperty(be)&&Oe!==Ge&&(Oe!=null||Ge!=null)&&(be==="selected"?m.selected=Oe&&typeof Oe!="function"&&typeof Oe!="symbol":yt(m,g,be,Oe,E,Ge));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var tt in x)Oe=x[tt],x.hasOwnProperty(tt)&&Oe!=null&&!E.hasOwnProperty(tt)&&yt(m,g,tt,null,E,Oe);for(Ae in E)if(Oe=E[Ae],Ge=x[Ae],E.hasOwnProperty(Ae)&&Oe!==Ge&&(Oe!=null||Ge!=null))switch(Ae){case"children":case"dangerouslySetInnerHTML":if(Oe!=null)throw Error(n(137,g));break;default:yt(m,g,Ae,Oe,E,Ge)}return;default:if(Ps(g)){for(var bt in x)Oe=x[bt],x.hasOwnProperty(bt)&&Oe!==void 0&&!E.hasOwnProperty(bt)&&wl(m,g,bt,void 0,E,Oe);for(Je in E)Oe=E[Je],Ge=x[Je],!E.hasOwnProperty(Je)||Oe===Ge||Oe===void 0&&Ge===void 0||wl(m,g,Je,Oe,E,Ge);return}}for(var _e in x)Oe=x[_e],x.hasOwnProperty(_e)&&Oe!=null&&!E.hasOwnProperty(_e)&&yt(m,g,_e,null,E,Oe);for(ke in E)Oe=E[ke],Ge=x[ke],!E.hasOwnProperty(ke)||Oe===Ge||Oe==null&&Ge==null||yt(m,g,ke,Oe,E,Ge)}function eh(m){switch(m){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function dd(){if(typeof performance.getEntriesByType=="function"){for(var m=0,g=0,x=performance.getEntriesByType("resource"),E=0;E<x.length;E++){var J=x[E],k=J.transferSize,H=J.initiatorType,oe=J.duration;if(k&&oe&&eh(H)){for(H=0,oe=J.responseEnd,E+=1;E<x.length;E++){var be=x[E],Ae=be.startTime;if(Ae>oe)break;var Je=be.transferSize,ke=be.initiatorType;Je&&eh(ke)&&(be=be.responseEnd,H+=Je*(be<oe?1:(oe-Ae)/(be-Ae)))}if(--E,g+=8*(k+H)/(J.duration/1e3),m++,10<m)break}}if(0<m)return g/m/1e6}return navigator.connection&&(m=navigator.connection.downlink,typeof m=="number")?m:5}var _l=null,Nl=null;function vs(m){return m.nodeType===9?m:m.ownerDocument}function th(m){switch(m){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function rh(m,g){if(m===0)switch(g){case"svg":return 1;case"math":return 2;default:return 0}return m===1&&g==="foreignObject"?0:m}function Ml(m,g){return m==="textarea"||m==="noscript"||typeof g.children=="string"||typeof g.children=="number"||typeof g.children=="bigint"||typeof g.dangerouslySetInnerHTML=="object"&&g.dangerouslySetInnerHTML!==null&&g.dangerouslySetInnerHTML.__html!=null}var El=null;function md(){var m=window.event;return m&&m.type==="popstate"?m===El?!1:(El=m,!0):(El=null,!1)}var ih=typeof setTimeout=="function"?setTimeout:void 0,pd=typeof clearTimeout=="function"?clearTimeout:void 0,nh=typeof Promise=="function"?Promise:void 0,vd=typeof queueMicrotask=="function"?queueMicrotask:typeof nh<"u"?function(m){return nh.resolve(null).then(m).catch(gd)}:ih;function gd(m){setTimeout(function(){throw m})}function yi(m){return m==="head"}function ah(m,g){var x=g,E=0;do{var J=x.nextSibling;if(m.removeChild(x),J&&J.nodeType===8)if(x=J.data,x==="/$"||x==="/&"){if(E===0){m.removeChild(J),Mn(g);return}E--}else if(x==="$"||x==="$?"||x==="$~"||x==="$!"||x==="&")E++;else if(x==="html")ua(m.ownerDocument.documentElement);else if(x==="head"){x=m.ownerDocument.head,ua(x);for(var k=x.firstChild;k;){var H=k.nextSibling,oe=k.nodeName;k[Ei]||oe==="SCRIPT"||oe==="STYLE"||oe==="LINK"&&k.rel.toLowerCase()==="stylesheet"||x.removeChild(k),k=H}}else x==="body"&&ua(m.ownerDocument.body);x=J}while(x);Mn(g)}function sh(m,g){var x=m;m=0;do{var E=x.nextSibling;if(x.nodeType===1?g?(x._stashedDisplay=x.style.display,x.style.display="none"):(x.style.display=x._stashedDisplay||"",x.getAttribute("style")===""&&x.removeAttribute("style")):x.nodeType===3&&(g?(x._stashedText=x.nodeValue,x.nodeValue=""):x.nodeValue=x._stashedText||""),E&&E.nodeType===8)if(x=E.data,x==="/$"){if(m===0)break;m--}else x!=="$"&&x!=="$?"&&x!=="$~"&&x!=="$!"||m++;x=E}while(x)}function $l(m){var g=m.firstChild;for(g&&g.nodeType===10&&(g=g.nextSibling);g;){var x=g;switch(g=g.nextSibling,x.nodeName){case"HTML":case"HEAD":case"BODY":$l(x),$n(x);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(x.rel.toLowerCase()==="stylesheet")continue}m.removeChild(x)}}function yd(m,g,x,E){for(;m.nodeType===1;){var J=x;if(m.nodeName.toLowerCase()!==g.toLowerCase()){if(!E&&(m.nodeName!=="INPUT"||m.type!=="hidden"))break}else if(E){if(!m[Ei])switch(g){case"meta":if(!m.hasAttribute("itemprop"))break;return m;case"link":if(k=m.getAttribute("rel"),k==="stylesheet"&&m.hasAttribute("data-precedence"))break;if(k!==J.rel||m.getAttribute("href")!==(J.href==null||J.href===""?null:J.href)||m.getAttribute("crossorigin")!==(J.crossOrigin==null?null:J.crossOrigin)||m.getAttribute("title")!==(J.title==null?null:J.title))break;return m;case"style":if(m.hasAttribute("data-precedence"))break;return m;case"script":if(k=m.getAttribute("src"),(k!==(J.src==null?null:J.src)||m.getAttribute("type")!==(J.type==null?null:J.type)||m.getAttribute("crossorigin")!==(J.crossOrigin==null?null:J.crossOrigin))&&k&&m.hasAttribute("async")&&!m.hasAttribute("itemprop"))break;return m;default:return m}}else if(g==="input"&&m.type==="hidden"){var k=J.name==null?null:""+J.name;if(J.type==="hidden"&&m.getAttribute("name")===k)return m}else return m;if(m=pr(m.nextSibling),m===null)break}return null}function bd(m,g,x){if(g==="")return null;for(;m.nodeType!==3;)if((m.nodeType!==1||m.nodeName!=="INPUT"||m.type!=="hidden")&&!x||(m=pr(m.nextSibling),m===null))return null;return m}function oh(m,g){for(;m.nodeType!==8;)if((m.nodeType!==1||m.nodeName!=="INPUT"||m.type!=="hidden")&&!g||(m=pr(m.nextSibling),m===null))return null;return m}function Al(m){return m.data==="$?"||m.data==="$~"}function Dl(m){return m.data==="$!"||m.data==="$?"&&m.ownerDocument.readyState!=="loading"}function xd(m,g){var x=m.ownerDocument;if(m.data==="$~")m._reactRetry=g;else if(m.data!=="$?"||x.readyState!=="loading")g();else{var E=function(){g(),x.removeEventListener("DOMContentLoaded",E)};x.addEventListener("DOMContentLoaded",E),m._reactRetry=E}}function pr(m){for(;m!=null;m=m.nextSibling){var g=m.nodeType;if(g===1||g===3)break;if(g===8){if(g=m.data,g==="$"||g==="$!"||g==="$?"||g==="$~"||g==="&"||g==="F!"||g==="F")break;if(g==="/$"||g==="/&")return null}}return m}var Tl=null;function lh(m){m=m.nextSibling;for(var g=0;m;){if(m.nodeType===8){var x=m.data;if(x==="/$"||x==="/&"){if(g===0)return pr(m.nextSibling);g--}else x!=="$"&&x!=="$!"&&x!=="$?"&&x!=="$~"&&x!=="&"||g++}m=m.nextSibling}return null}function uh(m){m=m.previousSibling;for(var g=0;m;){if(m.nodeType===8){var x=m.data;if(x==="$"||x==="$!"||x==="$?"||x==="$~"||x==="&"){if(g===0)return m;g--}else x!=="/$"&&x!=="/&"||g++}m=m.previousSibling}return null}function hh(m,g,x){switch(g=vs(x),m){case"html":if(m=g.documentElement,!m)throw Error(n(452));return m;case"head":if(m=g.head,!m)throw Error(n(453));return m;case"body":if(m=g.body,!m)throw Error(n(454));return m;default:throw Error(n(451))}}function ua(m){for(var g=m.attributes;g.length;)m.removeAttributeNode(g[0]);$n(m)}var vr=new Map,fh=new Set;function gs(m){return typeof m.getRootNode=="function"?m.getRootNode():m.nodeType===9?m:m.ownerDocument}var Vr=Y.d;Y.d={f:Cd,r:Sd,D:wd,C:_d,L:Nd,m:Md,X:$d,S:Ed,M:Ad};function Cd(){var m=Vr.f(),g=ls();return m||g}function Sd(m){var g=Qr(m);g!==null&&g.tag===5&&g.type==="form"?Nc(g):Vr.r(m)}var wn=typeof document>"u"?null:document;function dh(m,g,x){var E=wn;if(E&&typeof g=="string"&&g){var J=lr(g);J='link[rel="'+m+'"][href="'+J+'"]',typeof x=="string"&&(J+='[crossorigin="'+x+'"]'),fh.has(J)||(fh.add(J),m={rel:m,crossOrigin:x,href:g},E.querySelector(J)===null&&(g=E.createElement("link"),Ft(g,"link",m),ct(g),E.head.appendChild(g)))}}function wd(m){Vr.D(m),dh("dns-prefetch",m,null)}function _d(m,g){Vr.C(m,g),dh("preconnect",m,g)}function Nd(m,g,x){Vr.L(m,g,x);var E=wn;if(E&&m&&g){var J='link[rel="preload"][as="'+lr(g)+'"]';g==="image"&&x&&x.imageSrcSet?(J+='[imagesrcset="'+lr(x.imageSrcSet)+'"]',typeof x.imageSizes=="string"&&(J+='[imagesizes="'+lr(x.imageSizes)+'"]')):J+='[href="'+lr(m)+'"]';var k=J;switch(g){case"style":k=_n(m);break;case"script":k=Nn(m)}vr.has(k)||(m=d({rel:"preload",href:g==="image"&&x&&x.imageSrcSet?void 0:m,as:g},x),vr.set(k,m),E.querySelector(J)!==null||g==="style"&&E.querySelector(ca(k))||g==="script"&&E.querySelector(ha(k))||(g=E.createElement("link"),Ft(g,"link",m),ct(g),E.head.appendChild(g)))}}function Md(m,g){Vr.m(m,g);var x=wn;if(x&&m){var E=g&&typeof g.as=="string"?g.as:"script",J='link[rel="modulepreload"][as="'+lr(E)+'"][href="'+lr(m)+'"]',k=J;switch(E){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":k=Nn(m)}if(!vr.has(k)&&(m=d({rel:"modulepreload",href:m},g),vr.set(k,m),x.querySelector(J)===null)){switch(E){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(x.querySelector(ha(k)))return}E=x.createElement("link"),Ft(E,"link",m),ct(E),x.head.appendChild(E)}}}function Ed(m,g,x){Vr.S(m,g,x);var E=wn;if(E&&m){var J=st(E).hoistableStyles,k=_n(m);g=g||"default";var H=J.get(k);if(!H){var oe={loading:0,preload:null};if(H=E.querySelector(ca(k)))oe.loading=5;else{m=d({rel:"stylesheet",href:m,"data-precedence":g},x),(x=vr.get(k))&&Ol(m,x);var be=H=E.createElement("link");ct(be),Ft(be,"link",m),be._p=new Promise(function(Ae,Je){be.onload=Ae,be.onerror=Je}),be.addEventListener("load",function(){oe.loading|=1}),be.addEventListener("error",function(){oe.loading|=2}),oe.loading|=4,ys(H,g,E)}H={type:"stylesheet",instance:H,count:1,state:oe},J.set(k,H)}}}function $d(m,g){Vr.X(m,g);var x=wn;if(x&&m){var E=st(x).hoistableScripts,J=Nn(m),k=E.get(J);k||(k=x.querySelector(ha(J)),k||(m=d({src:m,async:!0},g),(g=vr.get(J))&&Xl(m,g),k=x.createElement("script"),ct(k),Ft(k,"link",m),x.head.appendChild(k)),k={type:"script",instance:k,count:1,state:null},E.set(J,k))}}function Ad(m,g){Vr.M(m,g);var x=wn;if(x&&m){var E=st(x).hoistableScripts,J=Nn(m),k=E.get(J);k||(k=x.querySelector(ha(J)),k||(m=d({src:m,async:!0,type:"module"},g),(g=vr.get(J))&&Xl(m,g),k=x.createElement("script"),ct(k),Ft(k,"link",m),x.head.appendChild(k)),k={type:"script",instance:k,count:1,state:null},E.set(J,k))}}function mh(m,g,x,E){var J=(J=ve.current)?gs(J):null;if(!J)throw Error(n(446));switch(m){case"meta":case"title":return null;case"style":return typeof x.precedence=="string"&&typeof x.href=="string"?(g=_n(x.href),x=st(J).hoistableStyles,E=x.get(g),E||(E={type:"style",instance:null,count:0,state:null},x.set(g,E)),E):{type:"void",instance:null,count:0,state:null};case"link":if(x.rel==="stylesheet"&&typeof x.href=="string"&&typeof x.precedence=="string"){m=_n(x.href);var k=st(J).hoistableStyles,H=k.get(m);if(H||(J=J.ownerDocument||J,H={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},k.set(m,H),(k=J.querySelector(ca(m)))&&!k._p&&(H.instance=k,H.state.loading=5),vr.has(m)||(x={rel:"preload",as:"style",href:x.href,crossOrigin:x.crossOrigin,integrity:x.integrity,media:x.media,hrefLang:x.hrefLang,referrerPolicy:x.referrerPolicy},vr.set(m,x),k||Dd(J,m,x,H.state))),g&&E===null)throw Error(n(528,""));return H}if(g&&E!==null)throw Error(n(529,""));return null;case"script":return g=x.async,x=x.src,typeof x=="string"&&g&&typeof g!="function"&&typeof g!="symbol"?(g=Nn(x),x=st(J).hoistableScripts,E=x.get(g),E||(E={type:"script",instance:null,count:0,state:null},x.set(g,E)),E):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,m))}}function _n(m){return'href="'+lr(m)+'"'}function ca(m){return'link[rel="stylesheet"]['+m+"]"}function ph(m){return d({},m,{"data-precedence":m.precedence,precedence:null})}function Dd(m,g,x,E){m.querySelector('link[rel="preload"][as="style"]['+g+"]")?E.loading=1:(g=m.createElement("link"),E.preload=g,g.addEventListener("load",function(){return E.loading|=1}),g.addEventListener("error",function(){return E.loading|=2}),Ft(g,"link",x),ct(g),m.head.appendChild(g))}function Nn(m){return'[src="'+lr(m)+'"]'}function ha(m){return"script[async]"+m}function vh(m,g,x){if(g.count++,g.instance===null)switch(g.type){case"style":var E=m.querySelector('style[data-href~="'+lr(x.href)+'"]');if(E)return g.instance=E,ct(E),E;var J=d({},x,{"data-href":x.href,"data-precedence":x.precedence,href:null,precedence:null});return E=(m.ownerDocument||m).createElement("style"),ct(E),Ft(E,"style",J),ys(E,x.precedence,m),g.instance=E;case"stylesheet":J=_n(x.href);var k=m.querySelector(ca(J));if(k)return g.state.loading|=4,g.instance=k,ct(k),k;E=ph(x),(J=vr.get(J))&&Ol(E,J),k=(m.ownerDocument||m).createElement("link"),ct(k);var H=k;return H._p=new Promise(function(oe,be){H.onload=oe,H.onerror=be}),Ft(k,"link",E),g.state.loading|=4,ys(k,x.precedence,m),g.instance=k;case"script":return k=Nn(x.src),(J=m.querySelector(ha(k)))?(g.instance=J,ct(J),J):(E=x,(J=vr.get(k))&&(E=d({},x),Xl(E,J)),m=m.ownerDocument||m,J=m.createElement("script"),ct(J),Ft(J,"link",E),m.head.appendChild(J),g.instance=J);case"void":return null;default:throw Error(n(443,g.type))}else g.type==="stylesheet"&&(g.state.loading&4)===0&&(E=g.instance,g.state.loading|=4,ys(E,x.precedence,m));return g.instance}function ys(m,g,x){for(var E=x.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),J=E.length?E[E.length-1]:null,k=J,H=0;H<E.length;H++){var oe=E[H];if(oe.dataset.precedence===g)k=oe;else if(k!==J)break}k?k.parentNode.insertBefore(m,k.nextSibling):(g=x.nodeType===9?x.head:x,g.insertBefore(m,g.firstChild))}function Ol(m,g){m.crossOrigin==null&&(m.crossOrigin=g.crossOrigin),m.referrerPolicy==null&&(m.referrerPolicy=g.referrerPolicy),m.title==null&&(m.title=g.title)}function Xl(m,g){m.crossOrigin==null&&(m.crossOrigin=g.crossOrigin),m.referrerPolicy==null&&(m.referrerPolicy=g.referrerPolicy),m.integrity==null&&(m.integrity=g.integrity)}var bs=null;function gh(m,g,x){if(bs===null){var E=new Map,J=bs=new Map;J.set(x,E)}else J=bs,E=J.get(x),E||(E=new Map,J.set(x,E));if(E.has(m))return E;for(E.set(m,null),x=x.getElementsByTagName(m),J=0;J<x.length;J++){var k=x[J];if(!(k[Ei]||k[Ct]||m==="link"&&k.getAttribute("rel")==="stylesheet")&&k.namespaceURI!=="http://www.w3.org/2000/svg"){var H=k.getAttribute(g)||"";H=m+H;var oe=E.get(H);oe?oe.push(k):E.set(H,[k])}}return E}function yh(m,g,x){m=m.ownerDocument||m,m.head.insertBefore(x,g==="title"?m.querySelector("head > title"):null)}function Td(m,g,x){if(x===1||g.itemProp!=null)return!1;switch(m){case"meta":case"title":return!0;case"style":if(typeof g.precedence!="string"||typeof g.href!="string"||g.href==="")break;return!0;case"link":if(typeof g.rel!="string"||typeof g.href!="string"||g.href===""||g.onLoad||g.onError)break;return g.rel==="stylesheet"?(m=g.disabled,typeof g.precedence=="string"&&m==null):!0;case"script":if(g.async&&typeof g.async!="function"&&typeof g.async!="symbol"&&!g.onLoad&&!g.onError&&g.src&&typeof g.src=="string")return!0}return!1}function bh(m){return!(m.type==="stylesheet"&&(m.state.loading&3)===0)}function Od(m,g,x,E){if(x.type==="stylesheet"&&(typeof E.media!="string"||matchMedia(E.media).matches!==!1)&&(x.state.loading&4)===0){if(x.instance===null){var J=_n(E.href),k=g.querySelector(ca(J));if(k){g=k._p,g!==null&&typeof g=="object"&&typeof g.then=="function"&&(m.count++,m=xs.bind(m),g.then(m,m)),x.state.loading|=4,x.instance=k,ct(k);return}k=g.ownerDocument||g,E=ph(E),(J=vr.get(J))&&Ol(E,J),k=k.createElement("link"),ct(k);var H=k;H._p=new Promise(function(oe,be){H.onload=oe,H.onerror=be}),Ft(k,"link",E),x.instance=k}m.stylesheets===null&&(m.stylesheets=new Map),m.stylesheets.set(x,g),(g=x.state.preload)&&(x.state.loading&3)===0&&(m.count++,x=xs.bind(m),g.addEventListener("load",x),g.addEventListener("error",x))}}var Gl=0;function Xd(m,g){return m.stylesheets&&m.count===0&&Ss(m,m.stylesheets),0<m.count||0<m.imgCount?function(x){var E=setTimeout(function(){if(m.stylesheets&&Ss(m,m.stylesheets),m.unsuspend){var k=m.unsuspend;m.unsuspend=null,k()}},6e4+g);0<m.imgBytes&&Gl===0&&(Gl=62500*dd());var J=setTimeout(function(){if(m.waitingForImages=!1,m.count===0&&(m.stylesheets&&Ss(m,m.stylesheets),m.unsuspend)){var k=m.unsuspend;m.unsuspend=null,k()}},(m.imgBytes>Gl?50:800)+g);return m.unsuspend=x,function(){m.unsuspend=null,clearTimeout(E),clearTimeout(J)}}:null}function xs(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ss(this,this.stylesheets);else if(this.unsuspend){var m=this.unsuspend;this.unsuspend=null,m()}}}var Cs=null;function Ss(m,g){m.stylesheets=null,m.unsuspend!==null&&(m.count++,Cs=new Map,g.forEach(Gd,m),Cs=null,xs.call(m))}function Gd(m,g){if(!(g.state.loading&4)){var x=Cs.get(m);if(x)var E=x.get(null);else{x=new Map,Cs.set(m,x);for(var J=m.querySelectorAll("link[data-precedence],style[data-precedence]"),k=0;k<J.length;k++){var H=J[k];(H.nodeName==="LINK"||H.getAttribute("media")!=="not all")&&(x.set(H.dataset.precedence,H),E=H)}E&&x.set(null,E)}J=g.instance,H=J.getAttribute("data-precedence"),k=x.get(H)||E,k===E&&x.set(null,J),x.set(H,J),this.count++,E=xs.bind(this),J.addEventListener("load",E),J.addEventListener("error",E),k?k.parentNode.insertBefore(J,k.nextSibling):(m=m.nodeType===9?m.head:m,m.insertBefore(J,m.firstChild)),g.state.loading|=4}}var fa={$$typeof:C,Provider:null,Consumer:null,_currentValue:K,_currentValue2:K,_threadCount:0};function Pd(m,g,x,E,J,k,H,oe,be){this.tag=1,this.containerInfo=m,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ni(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ni(0),this.hiddenUpdates=Ni(null),this.identifierPrefix=E,this.onUncaughtError=J,this.onCaughtError=k,this.onRecoverableError=H,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=be,this.incompleteTransitions=new Map}function xh(m,g,x,E,J,k,H,oe,be,Ae,Je,ke){return m=new Pd(m,g,x,H,be,Ae,Je,ke,oe),g=1,k===!0&&(g|=24),k=er(3,null,null,g),m.current=k,k.stateNode=m,g=fo(),g.refCount++,m.pooledCache=g,g.refCount++,k.memoizedState={element:E,isDehydrated:x,cache:g},go(k),m}function Ch(m){return m?(m=en,m):en}function Sh(m,g,x,E,J,k){J=Ch(J),E.context===null?E.context=J:E.pendingContext=J,E=si(g),E.payload={element:x},k=k===void 0?null:k,k!==null&&(E.callback=k),x=oi(m,E,g),x!==null&&(Wt(x,m,g),Un(x,m,g))}function wh(m,g){if(m=m.memoizedState,m!==null&&m.dehydrated!==null){var x=m.retryLane;m.retryLane=x!==0&&x<g?x:g}}function Pl(m,g){wh(m,g),(m=m.alternate)&&wh(m,g)}function _h(m){if(m.tag===13||m.tag===31){var g=Oi(m,67108864);g!==null&&Wt(g,m,67108864),Pl(m,67108864)}}function Nh(m){if(m.tag===13||m.tag===31){var g=ar();g=wr(g);var x=Oi(m,g);x!==null&&Wt(x,m,g),Pl(m,g)}}var ws=!0;function Jd(m,g,x,E){var J=z.T;z.T=null;var k=Y.p;try{Y.p=2,Jl(m,g,x,E)}finally{Y.p=k,z.T=J}}function Bd(m,g,x,E){var J=z.T;z.T=null;var k=Y.p;try{Y.p=8,Jl(m,g,x,E)}finally{Y.p=k,z.T=J}}function Jl(m,g,x,E){if(ws){var J=Bl(E);if(J===null)Sl(m,g,E,_s,x),Eh(m,E);else if(kd(J,m,g,x,E))E.stopPropagation();else if(Eh(m,E),g&4&&-1<Rd.indexOf(m)){for(;J!==null;){var k=Qr(J);if(k!==null)switch(k.tag){case 3:if(k=k.stateNode,k.current.memoizedState.isDehydrated){var H=He(k.pendingLanes);if(H!==0){var oe=k;for(oe.pendingLanes|=2,oe.entangledLanes|=2;H;){var be=1<<31-Ee(H);oe.entanglements[1]|=be,H&=~be}Er(k),(dt&6)===0&&(ss=le()+500,sa(0))}}break;case 31:case 13:oe=Oi(k,2),oe!==null&&Wt(oe,k,2),ls(),Pl(k,2)}if(k=Bl(E),k===null&&Sl(m,g,E,_s,x),k===J)break;J=k}J!==null&&E.stopPropagation()}else Sl(m,g,E,null,x)}}function Bl(m){return m=Bs(m),Rl(m)}var _s=null;function Rl(m){if(_s=null,m=Wr(m),m!==null){var g=o(m);if(g===null)m=null;else{var x=g.tag;if(x===13){if(m=l(g),m!==null)return m;m=null}else if(x===31){if(m=u(g),m!==null)return m;m=null}else if(x===3){if(g.stateNode.current.memoizedState.isDehydrated)return g.tag===3?g.stateNode.containerInfo:null;m=null}else g!==m&&(m=null)}}return _s=m,null}function Mh(m){switch(m){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(me()){case he:return 2;case ye:return 8;case Se:case Be:return 32;case Te:return 268435456;default:return 32}default:return 32}}var kl=!1,bi=null,xi=null,Ci=null,da=new Map,ma=new Map,Si=[],Rd="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Eh(m,g){switch(m){case"focusin":case"focusout":bi=null;break;case"dragenter":case"dragleave":xi=null;break;case"mouseover":case"mouseout":Ci=null;break;case"pointerover":case"pointerout":da.delete(g.pointerId);break;case"gotpointercapture":case"lostpointercapture":ma.delete(g.pointerId)}}function pa(m,g,x,E,J,k){return m===null||m.nativeEvent!==k?(m={blockedOn:g,domEventName:x,eventSystemFlags:E,nativeEvent:k,targetContainers:[J]},g!==null&&(g=Qr(g),g!==null&&_h(g)),m):(m.eventSystemFlags|=E,g=m.targetContainers,J!==null&&g.indexOf(J)===-1&&g.push(J),m)}function kd(m,g,x,E,J){switch(g){case"focusin":return bi=pa(bi,m,g,x,E,J),!0;case"dragenter":return xi=pa(xi,m,g,x,E,J),!0;case"mouseover":return Ci=pa(Ci,m,g,x,E,J),!0;case"pointerover":var k=J.pointerId;return da.set(k,pa(da.get(k)||null,m,g,x,E,J)),!0;case"gotpointercapture":return k=J.pointerId,ma.set(k,pa(ma.get(k)||null,m,g,x,E,J)),!0}return!1}function $h(m){var g=Wr(m.target);if(g!==null){var x=o(g);if(x!==null){if(g=x.tag,g===13){if(g=l(x),g!==null){m.blockedOn=g,Ar(m.priority,function(){Nh(x)});return}}else if(g===31){if(g=u(x),g!==null){m.blockedOn=g,Ar(m.priority,function(){Nh(x)});return}}else if(g===3&&x.stateNode.current.memoizedState.isDehydrated){m.blockedOn=x.tag===3?x.stateNode.containerInfo:null;return}}}m.blockedOn=null}function Ns(m){if(m.blockedOn!==null)return!1;for(var g=m.targetContainers;0<g.length;){var x=Bl(m.nativeEvent);if(x===null){x=m.nativeEvent;var E=new x.constructor(x.type,x);Js=E,x.target.dispatchEvent(E),Js=null}else return g=Qr(x),g!==null&&_h(g),m.blockedOn=x,!1;g.shift()}return!0}function Ah(m,g,x){Ns(m)&&x.delete(g)}function Fd(){kl=!1,bi!==null&&Ns(bi)&&(bi=null),xi!==null&&Ns(xi)&&(xi=null),Ci!==null&&Ns(Ci)&&(Ci=null),da.forEach(Ah),ma.forEach(Ah)}function Ms(m,g){m.blockedOn===g&&(m.blockedOn=null,kl||(kl=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Fd)))}var Es=null;function Dh(m){Es!==m&&(Es=m,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Es===m&&(Es=null);for(var g=0;g<m.length;g+=3){var x=m[g],E=m[g+1],J=m[g+2];if(typeof E!="function"){if(Rl(E||x)===null)continue;break}var k=Qr(x);k!==null&&(m.splice(g,3),g-=3,Bo(k,{pending:!0,data:J,method:x.method,action:E},E,J))}}))}function Mn(m){function g(be){return Ms(be,m)}bi!==null&&Ms(bi,m),xi!==null&&Ms(xi,m),Ci!==null&&Ms(Ci,m),da.forEach(g),ma.forEach(g);for(var x=0;x<Si.length;x++){var E=Si[x];E.blockedOn===m&&(E.blockedOn=null)}for(;0<Si.length&&(x=Si[0],x.blockedOn===null);)$h(x),x.blockedOn===null&&Si.shift();if(x=(m.ownerDocument||m).$$reactFormReplay,x!=null)for(E=0;E<x.length;E+=3){var J=x[E],k=x[E+1],H=J[Lt]||null;if(typeof k=="function")H||Dh(x);else if(H){var oe=null;if(k&&k.hasAttribute("formAction")){if(J=k,H=k[Lt]||null)oe=H.formAction;else if(Rl(J)!==null)continue}else oe=H.action;typeof oe=="function"?x[E+1]=oe:(x.splice(E,3),E-=3),Dh(x)}}}function Th(){function m(k){k.canIntercept&&k.info==="react-transition"&&k.intercept({handler:function(){return new Promise(function(H){return J=H})},focusReset:"manual",scroll:"manual"})}function g(){J!==null&&(J(),J=null),E||setTimeout(x,20)}function x(){if(!E&&!navigation.transition){var k=navigation.currentEntry;k&&k.url!=null&&navigation.navigate(k.url,{state:k.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var E=!1,J=null;return navigation.addEventListener("navigate",m),navigation.addEventListener("navigatesuccess",g),navigation.addEventListener("navigateerror",g),setTimeout(x,100),function(){E=!0,navigation.removeEventListener("navigate",m),navigation.removeEventListener("navigatesuccess",g),navigation.removeEventListener("navigateerror",g),J!==null&&(J(),J=null)}}}function Fl(m){this._internalRoot=m}$s.prototype.render=Fl.prototype.render=function(m){var g=this._internalRoot;if(g===null)throw Error(n(409));var x=g.current,E=ar();Sh(x,E,m,g,null,null)},$s.prototype.unmount=Fl.prototype.unmount=function(){var m=this._internalRoot;if(m!==null){this._internalRoot=null;var g=m.containerInfo;Sh(m.current,2,null,m,null,null),ls(),g[Zr]=null}};function $s(m){this._internalRoot=m}$s.prototype.unstable_scheduleHydration=function(m){if(m){var g=Mi();m={blockedOn:null,target:m,priority:g};for(var x=0;x<Si.length&&g!==0&&g<Si[x].priority;x++);Si.splice(x,0,m),x===0&&$h(m)}};var Oh=r.version;if(Oh!=="19.2.3")throw Error(n(527,Oh,"19.2.3"));Y.findDOMNode=function(m){var g=m._reactInternals;if(g===void 0)throw typeof m.render=="function"?Error(n(188)):(m=Object.keys(m).join(","),Error(n(268,m)));return m=c(g),m=m!==null?f(m):null,m=m===null?null:m.stateNode,m};var zd={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:z,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var As=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!As.isDisabled&&As.supportsFiber)try{ze=As.inject(zd),Ue=As}catch{}}return reactDomClient_production.createRoot=function(m,g){if(!s(m))throw Error(n(299));var x=!1,E="",J=Bc,k=Rc,H=kc;return g!=null&&(g.unstable_strictMode===!0&&(x=!0),g.identifierPrefix!==void 0&&(E=g.identifierPrefix),g.onUncaughtError!==void 0&&(J=g.onUncaughtError),g.onCaughtError!==void 0&&(k=g.onCaughtError),g.onRecoverableError!==void 0&&(H=g.onRecoverableError)),g=xh(m,1,!1,null,null,x,E,null,J,k,H,Th),m[Zr]=g.current,Cl(m),new Fl(g)},reactDomClient_production.hydrateRoot=function(m,g,x){if(!s(m))throw Error(n(299));var E=!1,J="",k=Bc,H=Rc,oe=kc,be=null;return x!=null&&(x.unstable_strictMode===!0&&(E=!0),x.identifierPrefix!==void 0&&(J=x.identifierPrefix),x.onUncaughtError!==void 0&&(k=x.onUncaughtError),x.onCaughtError!==void 0&&(H=x.onCaughtError),x.onRecoverableError!==void 0&&(oe=x.onRecoverableError),x.formState!==void 0&&(be=x.formState)),g=xh(m,1,!0,g,x??null,E,J,be,k,H,oe,Th),g.context=Ch(null),x=g.current,E=ar(),E=wr(E),J=si(E),J.callback=null,oi(x,J,E),x=E,g.current.lanes=x,Nt(g,x),Er(g),m[Zr]=g.current,Cl(m),new $s(g)},reactDomClient_production.version="19.2.3",reactDomClient_production}var hasRequiredClient;function requireClient(){if(hasRequiredClient)return client.exports;hasRequiredClient=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(r){console.error(r)}}return t(),client.exports=requireReactDomClient_production(),client.exports}var clientExports=requireClient();const PRECOMPUTED={1:{nodes:[0],weights:[2]},2:{nodes:[-.5773502691896257,.5773502691896257],weights:[1,1]},3:{nodes:[-.7745966692414834,0,.7745966692414834],weights:[.5555555555555556,.8888888888888888,.5555555555555556]},4:{nodes:[-.8611363115940526,-.3399810435848563,.3399810435848563,.8611363115940526],weights:[.3478548451374538,.6521451548625461,.6521451548625461,.3478548451374538]},5:{nodes:[-.906179845938664,-.5384693101056831,0,.5384693101056831,.906179845938664],weights:[.2369268850561891,.4786286704993665,.5688888888888889,.4786286704993665,.2369268850561891]},6:{nodes:[-.932469514203152,-.6612093864662645,-.2386191860831969,.2386191860831969,.6612093864662645,.932469514203152],weights:[.1713244923791704,.3607615730481386,.467913934572691,.467913934572691,.3607615730481386,.1713244923791704]},7:{nodes:[-.9491079123427585,-.7415311855993945,-.4058451513773972,0,.4058451513773972,.7415311855993945,.9491079123427585],weights:[.1294849661688697,.2797053914892766,.3818300505051189,.4179591836734694,.3818300505051189,.2797053914892766,.1294849661688697]},8:{nodes:[-.9602898564975363,-.7966664774136267,-.525532409916329,-.1834346424956498,.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],weights:[.1012285362903763,.2223810344533745,.3137066458778873,.362683783378362,.362683783378362,.3137066458778873,.2223810344533745,.1012285362903763]},9:{nodes:[-.9681602395076261,-.8360311073266358,-.6133714327005904,-.3242534234038089,0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],weights:[.0812743883615744,.1806481606948574,.2606106964029354,.3123470770400029,.3302393550012598,.3123470770400029,.2606106964029354,.1806481606948574,.0812743883615744]},10:{nodes:[-.9739065285171717,-.8650633666889845,-.6794095682990244,-.4333953941292472,-.1488743389816312,.1488743389816312,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],weights:[.0666713443086881,.1494513491505806,.219086362515982,.2692667193099963,.2955242247147529,.2955242247147529,.2692667193099963,.219086362515982,.1494513491505806,.0666713443086881]}};function getNodesAndWeights$3(t){if(t<1||t>10)throw new Error(`Degree must be between 1 and 10, got ${t}`);return PRECOMPUTED[t]}function getNodesAndWeights$2(t){if(t<1||t>10)throw new Error(`Degree must be between 1 and 10, got ${t}`);if(t===1)return{nodes:[0],weights:[2]};const r=2/(t-1),a=[],n=[];for(let s=0;s<t;s++)a.push(-1+s*r),n.push(s===0||s===t-1?r/2:r);return{nodes:a,weights:n}}function getNodesAndWeights$1(t){if(t<1||t>10)throw new Error(`Degree must be between 1 and 10, got ${t}`);const r=[];for(let n=1;n<=t;n++)r.push(Math.cos((2*n-1)*Math.PI/(2*t)));r.sort((n,s)=>n-s);const a=computeFejerWeights(r,t);return{nodes:r,weights:a}}function computeFejerWeights(t,r){const a=[],n=Math.floor((r-1)/2);for(let s=1;s<=r;s++){const o=(2*s-1)*Math.PI/(2*r);let l=1;for(let u=1;u<=n;u++)l-=2/(4*u*u-1)*Math.cos(2*u*o);a.push(2/r*l)}return a.reverse(),a}function mulberry32(t){return function(){let r=t+=1831565813;return r=Math.imul(r^r>>>15,r|1),r^=r+Math.imul(r^r>>>7,r|61),((r^r>>>14)>>>0)/4294967296}}function getNodesAndWeights(t,r=42){if(t<1||t>10)throw new Error(`Degree must be between 1 and 10, got ${t}`);const a=mulberry32(r),n=[];for(let o=0;o<t;o++)n.push(-1+2*a());n.sort((o,l)=>o-l);const s=Array(t).fill(2/t);return{nodes:n,weights:s}}const QUADRATURE_METHODS={gaussLegendre:{id:"gaussLegendre",name:"Gauss-Legendre",shortName:"Gauss-Leg.",color:"#6366f1",getNodesAndWeights:t=>getNodesAndWeights$3(t),description:"Optimal polynomial quadrature using roots of Legendre polynomials as nodes.",properties:["n points exact for polynomials up to degree 2n-1","Nodes are roots of Legendre polynomial Pn(x)","Weights are positive and sum to 2","Exponential convergence for smooth functions"]},equallySpaced:{id:"equallySpaced",name:"Equally Spaced",shortName:"Equi-Spaced",color:"#10b981",getNodesAndWeights:t=>getNodesAndWeights$2(t),description:"Composite trapezoid rule with uniformly distributed nodes.",properties:["Exact for linear functions (degree 1)","Error is O(h) where h is the node spacing","Simple to implement and understand","Suffers from Runge phenomenon at high n"]},chebyshev:{id:"chebyshev",name:"Chebyshev",shortName:"Chebyshev",color:"#f59e0b",getNodesAndWeights:t=>getNodesAndWeights$1(t),description:"Fejr quadrature using roots of Chebyshev polynomials.",properties:["n points exact for polynomials up to degree n-1","Nodes cluster near endpoints, reducing interpolation error","Avoids Runge phenomenon (unlike equally spaced)","Exponential convergence for analytic functions"]},random:{id:"random",name:"Random",shortName:"Random",color:"#ef4444",getNodesAndWeights:(t,r)=>getNodesAndWeights(t,r),description:"Monte Carlo style quadrature with seeded random node placement.",properties:["Convergence is O(1/n) in expectation","Not exact for any polynomial degree","Useful baseline for comparing structured methods","Seed provides reproducibility; reshuffle for new samples"]}},METHOD_IDS=["gaussLegendre","equallySpaced","chebyshev","random"];function transformNode(t,r,a){return(a-r)/2*t+(r+a)/2}function transformWeight(t,r,a){return(a-r)/2*t}function computeQuadrature(t,r,a,n,s,o={}){const l=QUADRATURE_METHODS[t];if(!l)throw new Error(`Unknown quadrature method: ${t}`);const{nodes:u,weights:h}=t==="random"?l.getNodesAndWeights(s,o.seed??42):l.getNodesAndWeights(s);let c=0;const f=[];for(let d=0;d<s;d++){const p=u[d],v=h[d],y=transformNode(p,a,n),b=transformWeight(v,a,n),_=r(y),N=b*_;c+=N,f.push({index:d+1,originalNode:p,transformedNode:y,originalWeight:v,transformedWeight:b,fValue:_,contribution:N})}return{integral:c,details:f}}function computeReferenceValue(t,r,a){return adaptiveSimpson(t,r,a,1e-14,30)}function adaptiveSimpson(t,r,a,n,s){const o=t(r),l=t(a),u=(r+a)/2,h=t(u),c=(a-r)/6*(o+4*h+l);return adaptiveSimpsonRecurse(t,r,a,o,l,h,c,n,s,0)}function adaptiveSimpsonRecurse(t,r,a,n,s,o,l,u,h,c){const f=(r+a)/2,d=(r+f)/2,p=(f+a)/2,v=t(d),y=t(p),b=(f-r)/6*(n+4*v+o),_=(a-f)/6*(o+4*y+s),N=b+_,M=N-l;return c>=h||Math.abs(M)<=15*u?N+M/15:adaptiveSimpsonRecurse(t,r,f,n,o,v,b,u/2,h,c+1)+adaptiveSimpsonRecurse(t,f,a,o,s,y,_,u/2,h,c+1)}function validateFunctionOnInterval(t,r,a){let s=0,o=0;const l=[];for(let d=0;d<=200;d++){const p=r+(a-r)*d/200;try{const v=t(p);l.push(v),isNaN(v)?s++:isFinite(v)||o++}catch{l.push(NaN),s++}}if(s/201>.1)return{valid:!1,message:`Function is undefined on a large portion of [${r.toFixed(2)}, ${a.toFixed(2)}]. Adjust the interval to the function's domain.`};if(o>0)return{valid:!1,message:`Function has asymptotes or singularities on [${r.toFixed(2)}, ${a.toFixed(2)}]. The integral may not exist on this interval.`};for(let d=1;d<l.length;d++){const p=l[d-1],v=l[d];if(!isFinite(p)||!isFinite(v))continue;if(p*v<0&&Math.abs(p)>50&&Math.abs(v)>50)return{valid:!1,message:`Function appears to have an asymptote on [${r.toFixed(2)}, ${a.toFixed(2)}]. The integral may not exist on this interval.`};const y=Math.abs(p),b=Math.abs(v);if(y>1&&b>1&&(b>y?b/y:y/b)>1e6)return{valid:!1,message:`Function has a singularity or asymptote on [${r.toFixed(2)}, ${a.toFixed(2)}]. The integral may not exist on this interval.`}}const c=(a-r)*1e-10,f=[r,r+c,a-c,a];for(const d of f)try{const p=t(d);if(!isFinite(p))return{valid:!1,message:`Function is undefined or infinite at the boundary of [${r.toFixed(2)}, ${a.toFixed(2)}]. The integral may not converge.`}}catch{return{valid:!1,message:`Function cannot be evaluated at the boundary of [${r.toFixed(2)}, ${a.toFixed(2)}].`}}return{valid:!0}}function computeConvergenceData(t,r,a,n,s){const o=computeReferenceValue(t,r,a),l={};for(const u of n){l[u]=[];for(let h=1;h<=10;h++){const f=computeQuadrature(u,t,r,a,h,u==="random"?{seed:s}:{}),d=Math.abs(f.integral-o);l[u].push({n:h,integral:f.integral,error:d})}}return{referenceValue:o,data:l}}function _extends(){return _extends=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var n in a)({}).hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},_extends.apply(null,arguments)}var DEFAULT_CONFIG={relTol:1e-12,absTol:1e-15,matrix:"Matrix",number:"number",numberFallback:"number",precision:64,predictable:!1,randomSeed:null,legacySubset:!1};function getSafeProperty(t,r){if(isSafeProperty(t,r))return t[r];throw typeof t[r]=="function"&&isSafeMethod(t,r)?new Error('Cannot access method "'+r+'" as a property'):new Error('No access to property "'+r+'"')}function setSafeProperty(t,r,a){if(isSafeProperty(t,r))return t[r]=a,a;throw new Error('No access to property "'+r+'"')}function isSafeProperty(t,r){return!isPlainObject(t)&&!Array.isArray(t)?!1:hasOwnProperty(safeNativeProperties,r)?!0:!(r in Object.prototype||r in Function.prototype)}function getSafeMethod(t,r){if(!isSafeMethod(t,r))throw new Error('No access to method "'+r+'"');return t[r]}function isSafeMethod(t,r){return t==null||typeof t[r]!="function"||hasOwnProperty(t,r)&&Object.getPrototypeOf&&r in Object.getPrototypeOf(t)?!1:hasOwnProperty(safeNativeMethods,r)?!0:!(r in Object.prototype||r in Function.prototype)}function isPlainObject(t){return typeof t=="object"&&t&&t.constructor===Object}var safeNativeProperties={length:!0,name:!0},safeNativeMethods={toString:!0,valueOf:!0,toLocaleString:!0};class ObjectWrappingMap{constructor(r){this.wrappedObject=r,this[Symbol.iterator]=this.entries}keys(){return Object.keys(this.wrappedObject).filter(r=>this.has(r)).values()}get(r){return getSafeProperty(this.wrappedObject,r)}set(r,a){return setSafeProperty(this.wrappedObject,r,a),this}has(r){return isSafeProperty(this.wrappedObject,r)&&r in this.wrappedObject}entries(){return mapIterator(this.keys(),r=>[r,this.get(r)])}forEach(r){for(var a of this.keys())r(this.get(a),a,this)}delete(r){isSafeProperty(this.wrappedObject,r)&&delete this.wrappedObject[r]}clear(){for(var r of this.keys())this.delete(r)}get size(){return Object.keys(this.wrappedObject).length}}class PartitionedMap{constructor(r,a,n){this.a=r,this.b=a,this.bKeys=n,this[Symbol.iterator]=this.entries}get(r){return this.bKeys.has(r)?this.b.get(r):this.a.get(r)}set(r,a){return this.bKeys.has(r)?this.b.set(r,a):this.a.set(r,a),this}has(r){return this.b.has(r)||this.a.has(r)}keys(){return new Set([...this.a.keys(),...this.b.keys()])[Symbol.iterator]()}entries(){return mapIterator(this.keys(),r=>[r,this.get(r)])}forEach(r){for(var a of this.keys())r(this.get(a),a,this)}delete(r){return this.bKeys.has(r)?this.b.delete(r):this.a.delete(r)}clear(){this.a.clear(),this.b.clear()}get size(){return[...this.keys()].length}}function mapIterator(t,r){return{next:()=>{var a=t.next();return a.done?a:{value:r(a.value),done:!1}}}}function createEmptyMap(){return new Map}function createMap$1(t){if(!t)return createEmptyMap();if(isMap(t))return t;if(isObject(t))return new ObjectWrappingMap(t);throw new Error("createMap can create maps from objects or Maps")}function toObject(t){if(t instanceof ObjectWrappingMap)return t.wrappedObject;var r={};for(var a of t.keys()){var n=t.get(a);setSafeProperty(r,a,n)}return r}function isNumber(t){return typeof t=="number"}function isBigNumber(t){return!t||typeof t!="object"||typeof t.constructor!="function"?!1:t.isBigNumber===!0&&typeof t.constructor.prototype=="object"&&t.constructor.prototype.isBigNumber===!0||typeof t.constructor.isDecimal=="function"&&t.constructor.isDecimal(t)===!0}function isBigInt(t){return typeof t=="bigint"}function isComplex(t){return t&&typeof t=="object"&&Object.getPrototypeOf(t).isComplex===!0||!1}function isFraction(t){return t&&typeof t=="object"&&Object.getPrototypeOf(t).isFraction===!0||!1}function isUnit(t){return t&&t.constructor.prototype.isUnit===!0||!1}function isString(t){return typeof t=="string"}var isArray=Array.isArray;function isMatrix(t){return t&&t.constructor.prototype.isMatrix===!0||!1}function isCollection(t){return Array.isArray(t)||isMatrix(t)}function isDenseMatrix(t){return t&&t.isDenseMatrix&&t.constructor.prototype.isMatrix===!0||!1}function isSparseMatrix(t){return t&&t.isSparseMatrix&&t.constructor.prototype.isMatrix===!0||!1}function isRange(t){return t&&t.constructor.prototype.isRange===!0||!1}function isIndex(t){return t&&t.constructor.prototype.isIndex===!0||!1}function isBoolean(t){return typeof t=="boolean"}function isResultSet(t){return t&&t.constructor.prototype.isResultSet===!0||!1}function isHelp(t){return t&&t.constructor.prototype.isHelp===!0||!1}function isFunction(t){return typeof t=="function"}function isDate(t){return t instanceof Date}function isRegExp(t){return t instanceof RegExp}function isObject(t){return!!(t&&typeof t=="object"&&t.constructor===Object&&!isComplex(t)&&!isFraction(t))}function isMap(t){return t?t instanceof Map||t instanceof ObjectWrappingMap||typeof t.set=="function"&&typeof t.get=="function"&&typeof t.keys=="function"&&typeof t.has=="function":!1}function isNull(t){return t===null}function isUndefined(t){return t===void 0}function isAccessorNode(t){return t&&t.isAccessorNode===!0&&t.constructor.prototype.isNode===!0||!1}function isArrayNode(t){return t&&t.isArrayNode===!0&&t.constructor.prototype.isNode===!0||!1}function isAssignmentNode(t){return t&&t.isAssignmentNode===!0&&t.constructor.prototype.isNode===!0||!1}function isBlockNode(t){return t&&t.isBlockNode===!0&&t.constructor.prototype.isNode===!0||!1}function isConditionalNode(t){return t&&t.isConditionalNode===!0&&t.constructor.prototype.isNode===!0||!1}function isConstantNode(t){return t&&t.isConstantNode===!0&&t.constructor.prototype.isNode===!0||!1}function rule2Node(t){return isConstantNode(t)||isOperatorNode(t)&&t.args.length===1&&isConstantNode(t.args[0])&&"-+~".includes(t.op)}function isFunctionAssignmentNode(t){return t&&t.isFunctionAssignmentNode===!0&&t.constructor.prototype.isNode===!0||!1}function isFunctionNode(t){return t&&t.isFunctionNode===!0&&t.constructor.prototype.isNode===!0||!1}function isIndexNode(t){return t&&t.isIndexNode===!0&&t.constructor.prototype.isNode===!0||!1}function isNode(t){return t&&t.isNode===!0&&t.constructor.prototype.isNode===!0||!1}function isObjectNode(t){return t&&t.isObjectNode===!0&&t.constructor.prototype.isNode===!0||!1}function isOperatorNode(t){return t&&t.isOperatorNode===!0&&t.constructor.prototype.isNode===!0||!1}function isParenthesisNode(t){return t&&t.isParenthesisNode===!0&&t.constructor.prototype.isNode===!0||!1}function isRangeNode(t){return t&&t.isRangeNode===!0&&t.constructor.prototype.isNode===!0||!1}function isRelationalNode(t){return t&&t.isRelationalNode===!0&&t.constructor.prototype.isNode===!0||!1}function isSymbolNode(t){return t&&t.isSymbolNode===!0&&t.constructor.prototype.isNode===!0||!1}function isChain(t){return t&&t.constructor.prototype.isChain===!0||!1}function typeOf$1(t){var r=typeof t;return r==="object"?t===null?"null":isBigNumber(t)?"BigNumber":t.constructor&&t.constructor.name?t.constructor.name:"Object":r}function clone$3(t){var r=typeof t;if(r==="number"||r==="bigint"||r==="string"||r==="boolean"||t===null||t===void 0)return t;if(typeof t.clone=="function")return t.clone();if(Array.isArray(t))return t.map(function(a){return clone$3(a)});if(t instanceof Date)return new Date(t.valueOf());if(isBigNumber(t))return t;if(isObject(t))return mapObject(t,clone$3);if(r==="function")return t;throw new TypeError("Cannot clone: unknown type of value (value: ".concat(t,")"))}function mapObject(t,r){var a={};for(var n in t)hasOwnProperty(t,n)&&(a[n]=r(t[n]));return a}function extend(t,r){for(var a in r)hasOwnProperty(r,a)&&(t[a]=r[a]);return t}function deepStrictEqual(t,r){var a,n,s;if(Array.isArray(t)){if(!Array.isArray(r)||t.length!==r.length)return!1;for(n=0,s=t.length;n<s;n++)if(!deepStrictEqual(t[n],r[n]))return!1;return!0}else{if(typeof t=="function")return t===r;if(t instanceof Object){if(Array.isArray(r)||!(r instanceof Object))return!1;for(a in t)if(!(a in r)||!deepStrictEqual(t[a],r[a]))return!1;for(a in r)if(!(a in t))return!1;return!0}else return t===r}}function lazy(t,r,a){var n=!0,s;Object.defineProperty(t,r,{get:function(){return n&&(s=a(),n=!1),s},set:function(l){s=l,n=!1},configurable:!0,enumerable:!0})}function hasOwnProperty(t,r){return t&&Object.hasOwnProperty.call(t,r)}function pickShallow(t,r){for(var a={},n=0;n<r.length;n++){var s=r[n],o=t[s];o!==void 0&&(a[s]=o)}return a}var MATRIX_OPTIONS=["Matrix","Array"],NUMBER_OPTIONS=["number","BigNumber","bigint","Fraction"],config$1=function(r){if(r)throw new Error(`The global config is readonly. 
Please create a mathjs instance if you want to change the default configuration. 
Example:

  import { create, all } from 'mathjs';
  const mathjs = create(all);
  mathjs.config({ number: 'BigNumber' });
`);return Object.freeze(DEFAULT_CONFIG)};_extends(config$1,DEFAULT_CONFIG,{MATRIX_OPTIONS,NUMBER_OPTIONS});function ok(){return!0}function notOk(){return!1}function undef$1(){}const NOT_TYPED_FUNCTION="Argument is not a typed-function.";function create(){function t(te){return typeof te=="object"&&te!==null&&te.constructor===Object}const r=[{name:"number",test:function(te){return typeof te=="number"}},{name:"string",test:function(te){return typeof te=="string"}},{name:"boolean",test:function(te){return typeof te=="boolean"}},{name:"Function",test:function(te){return typeof te=="function"}},{name:"Array",test:Array.isArray},{name:"Date",test:function(te){return te instanceof Date}},{name:"RegExp",test:function(te){return te instanceof RegExp}},{name:"Object",test:t},{name:"null",test:function(te){return te===null}},{name:"undefined",test:function(te){return te===void 0}}],a={name:"any",test:ok,isAny:!0};let n,s,o=0,l={createCount:0};function u(te){const le=n.get(te);if(le)return le;let me='Unknown type "'+te+'"';const he=te.toLowerCase();let ye;for(ye of s)if(ye.toLowerCase()===he){me+='. Did you mean "'+ye+'" ?';break}throw new TypeError(me)}function h(te){let le=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"any";const me=le?u(le).index:s.length,he=[];for(let Se=0;Se<te.length;++Se){if(!te[Se]||typeof te[Se].name!="string"||typeof te[Se].test!="function")throw new TypeError("Object with properties {name: string, test: function} expected");const Be=te[Se].name;if(n.has(Be))throw new TypeError('Duplicate type name "'+Be+'"');he.push(Be),n.set(Be,{name:Be,test:te[Se].test,isAny:te[Se].isAny,index:me+Se,conversionsTo:[]})}const ye=s.slice(me);s=s.slice(0,me).concat(he).concat(ye);for(let Se=me+he.length;Se<s.length;++Se)n.get(s[Se]).index=Se}function c(){n=new Map,s=[],o=0,h([a],!1)}c(),h(r);function f(){let te;for(te of s)n.get(te).conversionsTo=[];o=0}function d(te){const le=s.filter(me=>{const he=n.get(me);return!he.isAny&&he.test(te)});return le.length?le:["any"]}function p(te){return te&&typeof te=="function"&&"_typedFunctionData"in te}function v(te,le,me){if(!p(te))throw new TypeError(NOT_TYPED_FUNCTION);const he=me&&me.exact,ye=Array.isArray(le)?le.join(","):le,Se=$(ye),Be=_(Se);if(!he||Be in te.signatures){const ze=te._typedFunctionData.signatureMap.get(Be);if(ze)return ze}const Te=Se.length;let Xe;if(he){Xe=[];let ze;for(ze in te.signatures)Xe.push(te._typedFunctionData.signatureMap.get(ze))}else Xe=te._typedFunctionData.signatures;for(let ze=0;ze<Te;++ze){const Ue=Se[ze],je=[];let Ee;for(Ee of Xe){const qe=O(Ee.params,ze);if(!(!qe||Ue.restParam&&!qe.restParam)){if(!qe.hasAny){const I=C(qe);if(Ue.types.some(pe=>!I.has(pe.name)))continue}je.push(Ee)}}if(Xe=je,Xe.length===0)break}let Me;for(Me of Xe)if(Me.params.length<=Te)return Me;throw new TypeError("Signature not found (signature: "+(te.name||"unnamed")+"("+_(Se,", ")+"))")}function y(te,le,me){return v(te,le,me).implementation}function b(te,le){const me=u(le);if(me.test(te))return te;const he=me.conversionsTo;if(he.length===0)throw new Error("There are no conversions to "+le+" defined.");for(let ye=0;ye<he.length;ye++)if(u(he[ye].from).test(te))return he[ye].convert(te);throw new Error("Cannot convert "+te+" to "+le)}function _(te){let le=arguments.length>1&&arguments[1]!==void 0?arguments[1]:",";return te.map(me=>me.name).join(le)}function N(te){const le=te.indexOf("...")===0,he=(le?te.length>3?te.slice(3):"any":te).split("|").map(Te=>u(Te.trim()));let ye=!1,Se=le?"...":"";return{types:he.map(function(Te){return ye=Te.isAny||ye,Se+=Te.name+"|",{name:Te.name,typeIndex:Te.index,test:Te.test,isAny:Te.isAny,conversion:null,conversionIndex:-1}}),name:Se.slice(0,-1),hasAny:ye,hasConversion:!1,restParam:le}}function M(te){const le=te.types.map(Be=>Be.name),me=Y(le);let he=te.hasAny,ye=te.name;const Se=me.map(function(Be){const Te=u(Be.from);return he=Te.isAny||he,ye+="|"+Be.from,{name:Be.from,typeIndex:Te.index,test:Te.test,isAny:Te.isAny,conversion:Be,conversionIndex:Be.index}});return{types:te.types.concat(Se),name:ye,hasAny:he,hasConversion:Se.length>0,restParam:te.restParam}}function C(te){return te.typeSet||(te.typeSet=new Set,te.types.forEach(le=>te.typeSet.add(le.name))),te.typeSet}function $(te){const le=[];if(typeof te!="string")throw new TypeError("Signatures must be strings");const me=te.trim();if(me==="")return le;const he=me.split(",");for(let ye=0;ye<he.length;++ye){const Se=N(he[ye].trim());if(Se.restParam&&ye!==he.length-1)throw new SyntaxError('Unexpected rest parameter "'+he[ye]+'": only allowed for the last parameter');if(Se.types.length===0)return null;le.push(Se)}return le}function w(te){const le=ie(te);return le?le.restParam:!1}function A(te){if(!te||te.types.length===0)return ok;if(te.types.length===1)return u(te.types[0].name).test;if(te.types.length===2){const le=u(te.types[0].name).test,me=u(te.types[1].name).test;return function(ye){return le(ye)||me(ye)}}else{const le=te.types.map(function(me){return u(me.name).test});return function(he){for(let ye=0;ye<le.length;ye++)if(le[ye](he))return!0;return!1}}}function X(te){let le,me,he;if(w(te)){le=se(te).map(A);const ye=le.length,Se=A(ie(te)),Be=function(Te){for(let Xe=ye;Xe<Te.length;Xe++)if(!Se(Te[Xe]))return!1;return!0};return function(Xe){for(let Me=0;Me<le.length;Me++)if(!le[Me](Xe[Me]))return!1;return Be(Xe)&&Xe.length>=ye+1}}else return te.length===0?function(Se){return Se.length===0}:te.length===1?(me=A(te[0]),function(Se){return me(Se[0])&&Se.length===1}):te.length===2?(me=A(te[0]),he=A(te[1]),function(Se){return me(Se[0])&&he(Se[1])&&Se.length===2}):(le=te.map(A),function(Se){for(let Be=0;Be<le.length;Be++)if(!le[Be](Se[Be]))return!1;return Se.length===le.length})}function O(te,le){return le<te.length?te[le]:w(te)?ie(te):null}function G(te,le){const me=O(te,le);return me?C(me):new Set}function R(te){return te.conversion===null||te.conversion===void 0}function B(te,le){const me=new Set;return te.forEach(he=>{const ye=G(he.params,le);let Se;for(Se of ye)me.add(Se)}),me.has("any")?["any"]:Array.from(me)}function F(te,le,me){let he,ye;const Se=te||"unnamed";let Be=me,Te;for(Te=0;Te<le.length;Te++){const Ue=[];if(Be.forEach(je=>{const Ee=O(je.params,Te),qe=A(Ee);(Te<je.params.length||w(je.params))&&qe(le[Te])&&Ue.push(je)}),Ue.length===0){if(ye=B(Be,Te),ye.length>0){const je=d(le[Te]);return he=new TypeError("Unexpected type of argument in function "+Se+" (expected: "+ye.join(" or ")+", actual: "+je.join(" | ")+", index: "+Te+")"),he.data={category:"wrongType",fn:Se,index:Te,actual:je,expected:ye},he}}else Be=Ue}const Xe=Be.map(function(Ue){return w(Ue.params)?1/0:Ue.params.length});if(le.length<Math.min.apply(null,Xe))return ye=B(Be,Te),he=new TypeError("Too few arguments in function "+Se+" (expected: "+ye.join(" or ")+", index: "+le.length+")"),he.data={category:"tooFewArgs",fn:Se,index:le.length,expected:ye},he;const Me=Math.max.apply(null,Xe);if(le.length>Me)return he=new TypeError("Too many arguments in function "+Se+" (expected: "+Me+", actual: "+le.length+")"),he.data={category:"tooManyArgs",fn:Se,index:le.length,expectedLength:Me},he;const ze=[];for(let Ue=0;Ue<le.length;++Ue)ze.push(d(le[Ue]).join("|"));return he=new TypeError('Arguments of type "'+ze.join(", ")+'" do not match any of the defined signatures of function '+Se+"."),he.data={category:"mismatch",actual:ze},he}function U(te){let le=s.length+1;for(let me=0;me<te.types.length;me++)le=Math.min(le,te.types[me].typeIndex);return le}function q(te){let le=o+1;for(let me=0;me<te.types.length;me++)R(te.types[me])||(le=Math.min(le,te.types[me].conversionIndex));return le}function ee(te,le){if(te.hasAny){if(!le.hasAny)return .1}else if(le.hasAny)return-.1;if(te.restParam){if(!le.restParam)return .01}else if(le.restParam)return-.01;const me=U(te)-U(le);if(me<0)return-.001;if(me>0)return .001;const he=q(te),ye=q(le);if(te.hasConversion){if(!le.hasConversion)return(1+he)*1e-6}else if(le.hasConversion)return-(1+ye)*1e-6;const Se=he-ye;return Se<0?-1e-7:Se>0?1e-7:0}function z(te,le){const me=te.params,he=le.params,ye=ie(me),Se=ie(he),Be=w(me),Te=w(he);if(Be&&ye.hasAny){if(!Te||!Se.hasAny)return 1e7}else if(Te&&Se.hasAny)return-1e7;let Xe=0,Me=0,ze;for(ze of me)ze.hasAny&&++Xe,ze.hasConversion&&++Me;let Ue=0,je=0;for(ze of he)ze.hasAny&&++Ue,ze.hasConversion&&++je;if(Xe!==Ue)return(Xe-Ue)*1e6;if(Be&&ye.hasConversion){if(!Te||!Se.hasConversion)return 1e5}else if(Te&&Se.hasConversion)return-1e5;if(Me!==je)return(Me-je)*1e4;if(Be){if(!Te)return 1e3}else if(Te)return-1e3;const Ee=(me.length-he.length)*(Be?-100:100);if(Ee!==0)return Ee;const qe=[];let I=0;for(let We=0;We<me.length;++We){const He=ee(me[We],he[We]);qe.push(He),I+=He}if(I!==0)return(I<0?-10:10)+I;let pe,De=9;const Fe=De/(qe.length+1);for(pe of qe){if(pe!==0)return(pe<0?-De:De)+pe;De-=Fe}return 0}function Y(te){if(te.length===0)return[];const le=te.map(u);if(te.length===1)return le[0].conversionsTo;const me=new Set(te),he=new Set;for(let Se=0;Se<le.length;++Se)for(const Be of le[Se].conversionsTo)me.has(Be.from)||he.add(Be.from);const ye=[];for(const Se of he){let Be=o+1,Te=null;for(let Xe=0;Xe<le.length;++Xe)for(const Me of le[Xe].conversionsTo)Me.from===Se&&Me.index<Be&&(Be=Me.index,Te=Me);ye.push(Te)}return ye}function K(te,le){let me=le,he="";if(te.some(Se=>Se.hasConversion)){const Se=w(te),Be=te.map(Z);he=Be.map(Te=>Te.name).join(";"),me=function(){const Xe=[],Me=Se?arguments.length-1:arguments.length;for(let ze=0;ze<Me;ze++)Xe[ze]=Be[ze](arguments[ze]);return Se&&(Xe[Me]=arguments[Me].map(Be[Me])),le.apply(this,Xe)}}let ye=me;if(w(te)){const Se=te.length-1;ye=function(){return me.apply(this,ce(arguments,0,Se).concat([ce(arguments,Se)]))}}return he&&Object.defineProperty(ye,"name",{value:he}),ye}function Z(te){let le,me,he,ye;const Se=[],Be=[];let Te="";te.types.forEach(function(Me){Me.conversion&&(Te+=Me.conversion.from+"~>"+Me.conversion.to+",",Se.push(u(Me.conversion.from).test),Be.push(Me.conversion.convert))}),Te?Te=Te.slice(0,-1):Te="pass";let Xe=Me=>Me;switch(Be.length){case 0:break;case 1:le=Se[0],he=Be[0],Xe=function(ze){return le(ze)?he(ze):ze};break;case 2:le=Se[0],me=Se[1],he=Be[0],ye=Be[1],Xe=function(ze){return le(ze)?he(ze):me(ze)?ye(ze):ze};break;default:Xe=function(ze){for(let Ue=0;Ue<Be.length;Ue++)if(Se[Ue](ze))return Be[Ue](ze);return ze}}return Object.defineProperty(Xe,"name",{value:Te}),Xe}function ne(te){function le(me,he,ye){if(he<me.length){const Se=me[he];let Be=[];if(Se.restParam){const Te=Se.types.filter(R);Te.length<Se.types.length&&Be.push({types:Te,name:"..."+Te.map(Xe=>Xe.name).join("|"),hasAny:Te.some(Xe=>Xe.isAny),hasConversion:!1,restParam:!0}),Be.push(Se)}else Be=Se.types.map(function(Te){return{types:[Te],name:Te.name,hasAny:Te.isAny,hasConversion:Te.conversion,restParam:!1}});return fe(Be,function(Te){return le(me,he+1,ye.concat([Te]))})}else return[ye]}return le(te,0,[])}function j(te,le){const me=Math.max(te.length,le.length);for(let Te=0;Te<me;Te++){const Xe=G(te,Te),Me=G(le,Te);let ze=!1,Ue;for(Ue of Me)if(Xe.has(Ue)){ze=!0;break}if(!ze)return!1}const he=te.length,ye=le.length,Se=w(te),Be=w(le);return Se?Be?he===ye:ye>=he:Be?he>=ye:he===ye}function V(te){return te.map(le=>Ye(le)?Pe(le.referToSelf.callback):Ie(le)?we(le.referTo.references,le.referTo.callback):le)}function L(te,le,me){const he=[];let ye;for(ye of te){let Se=me[ye];if(typeof Se!="number")throw new TypeError('No definition for referenced signature "'+ye+'"');if(Se=le[Se],typeof Se!="function")return!1;he.push(Se)}return he}function ae(te,le,me){const he=V(te),ye=new Array(he.length).fill(!1);let Se=!0;for(;Se;){Se=!1;let Be=!0;for(let Te=0;Te<he.length;++Te){if(ye[Te])continue;const Xe=he[Te];if(Ye(Xe))he[Te]=Xe.referToSelf.callback(me),he[Te].referToSelf=Xe.referToSelf,ye[Te]=!0,Be=!1;else if(Ie(Xe)){const Me=L(Xe.referTo.references,he,le);Me?(he[Te]=Xe.referTo.callback.apply(this,Me),he[Te].referTo=Xe.referTo,ye[Te]=!0,Be=!1):Se=!0}}if(Be&&Se)throw new SyntaxError("Circular reference detected in resolving typed.referTo")}return he}function W(te){const le=/\bthis(\(|\.signatures\b)/;Object.keys(te).forEach(me=>{const he=te[me];if(le.test(he.toString()))throw new SyntaxError("Using `this` to self-reference a function is deprecated since typed-function@3. Use typed.referTo and typed.referToSelf instead.")})}function ve(te,le){if(l.createCount++,Object.keys(le).length===0)throw new SyntaxError("No signatures provided");l.warnAgainstDeprecatedThis&&W(le);const me=[],he=[],ye={},Se=[];let Be;for(Be in le){if(!Object.prototype.hasOwnProperty.call(le,Be))continue;const st=$(Be);if(!st)continue;me.forEach(function(Qt){if(j(Qt,st))throw new TypeError('Conflicting signatures "'+_(Qt)+'" and "'+_(st)+'".')}),me.push(st);const ct=he.length;he.push(le[Be]);const ga=st.map(M);let $i;for($i of ne(ga)){const Qt=_($i);Se.push({params:$i,name:Qt,fn:ct}),$i.every(Kr=>!Kr.hasConversion)&&(ye[Qt]=ct)}}Se.sort(z);const Te=ae(he,ye,br);let Xe;for(Xe in ye)Object.prototype.hasOwnProperty.call(ye,Xe)&&(ye[Xe]=Te[ye[Xe]]);const Me=[],ze=new Map;for(Xe of Se)ze.has(Xe.name)||(Xe.fn=Te[Xe.fn],Me.push(Xe),ze.set(Xe.name,Xe));const Ue=Me[0]&&Me[0].params.length<=2&&!w(Me[0].params),je=Me[1]&&Me[1].params.length<=2&&!w(Me[1].params),Ee=Me[2]&&Me[2].params.length<=2&&!w(Me[2].params),qe=Me[3]&&Me[3].params.length<=2&&!w(Me[3].params),I=Me[4]&&Me[4].params.length<=2&&!w(Me[4].params),pe=Me[5]&&Me[5].params.length<=2&&!w(Me[5].params),De=Ue&&je&&Ee&&qe&&I&&pe;for(let st=0;st<Me.length;++st)Me[st].test=X(Me[st].params);const Fe=Ue?A(Me[0].params[0]):notOk,We=je?A(Me[1].params[0]):notOk,He=Ee?A(Me[2].params[0]):notOk,vt=qe?A(Me[3].params[0]):notOk,zt=I?A(Me[4].params[0]):notOk,$r=pe?A(Me[5].params[0]):notOk,qi=Ue?A(Me[0].params[1]):notOk,Ni=je?A(Me[1].params[1]):notOk,Nt=Ee?A(Me[2].params[1]):notOk,gr=qe?A(Me[3].params[1]):notOk,Jt=I?A(Me[4].params[1]):notOk,Hr=pe?A(Me[5].params[1]):notOk;for(let st=0;st<Me.length;++st)Me[st].implementation=K(Me[st].params,Me[st].fn);const yr=Ue?Me[0].implementation:undef$1,wr=je?Me[1].implementation:undef$1,It=Ee?Me[2].implementation:undef$1,Mi=qe?Me[3].implementation:undef$1,Ar=I?Me[4].implementation:undef$1,qt=pe?Me[5].implementation:undef$1,Ct=Ue?Me[0].params.length:-1,Lt=je?Me[1].params.length:-1,Zr=Ee?Me[2].params.length:-1,En=qe?Me[3].params.length:-1,Ds=I?Me[4].params.length:-1,Ts=pe?Me[5].params.length:-1,va=De?6:0,Ei=Me.length,$n=Me.map(st=>st.test),Wr=Me.map(st=>st.implementation),Qr=function(){for(let ct=va;ct<Ei;ct++)if($n[ct](arguments))return Wr[ct].apply(this,arguments);return l.onMismatch(te,arguments,Me)};function br(st,ct){return arguments.length===Ct&&Fe(st)&&qi(ct)?yr.apply(this,arguments):arguments.length===Lt&&We(st)&&Ni(ct)?wr.apply(this,arguments):arguments.length===Zr&&He(st)&&Nt(ct)?It.apply(this,arguments):arguments.length===En&&vt(st)&&gr(ct)?Mi.apply(this,arguments):arguments.length===Ds&&zt(st)&&Jt(ct)?Ar.apply(this,arguments):arguments.length===Ts&&$r(st)&&Hr(ct)?qt.apply(this,arguments):Qr.apply(this,arguments)}try{Object.defineProperty(br,"name",{value:te})}catch{}return br.signatures=ye,br._typedFunctionData={signatures:Me,signatureMap:ze},br}function de(te,le,me){throw F(te,le,me)}function se(te){return ce(te,0,te.length-1)}function ie(te){return te[te.length-1]}function ce(te,le,me){return Array.prototype.slice.call(te,le,me)}function xe(te,le){for(let me=0;me<te.length;me++)if(le(te[me]))return te[me]}function fe(te,le){return Array.prototype.concat.apply([],te.map(le))}function Ne(){const te=se(arguments).map(me=>_($(me))),le=ie(arguments);if(typeof le!="function")throw new TypeError("Callback function expected as last argument");return we(te,le)}function we(te,le){return{referTo:{references:te,callback:le}}}function Pe(te){if(typeof te!="function")throw new TypeError("Callback function expected as first argument");return{referToSelf:{callback:te}}}function Ie(te){return te&&typeof te.referTo=="object"&&Array.isArray(te.referTo.references)&&typeof te.referTo.callback=="function"}function Ye(te){return te&&typeof te.referToSelf=="object"&&typeof te.referToSelf.callback=="function"}function Le(te,le){if(!te)return le;if(le&&le!==te){const me=new Error("Function names do not match (expected: "+te+", actual: "+le+")");throw me.data={actual:le,expected:te},me}return te}function Ve(te){let le;for(const me in te)Object.prototype.hasOwnProperty.call(te,me)&&(p(te[me])||typeof te[me].signature=="string")&&(le=Le(le,te[me].name));return le}function Ze(te,le){let me;for(me in le)if(Object.prototype.hasOwnProperty.call(le,me)){if(me in te&&le[me]!==te[me]){const he=new Error('Signature "'+me+'" is defined twice');throw he.data={signature:me,sourceFunction:le[me],destFunction:te[me]},he}te[me]=le[me]}}const ue=l;l=function(te){const le=typeof te=="string",me=le?1:0;let he=le?te:"";const ye={};for(let Se=me;Se<arguments.length;++Se){const Be=arguments[Se];let Te={},Xe;if(typeof Be=="function"?(Xe=Be.name,typeof Be.signature=="string"?Te[Be.signature]=Be:p(Be)&&(Te=Be.signatures)):t(Be)&&(Te=Be,le||(Xe=Ve(Be))),Object.keys(Te).length===0){const Me=new TypeError("Argument to 'typed' at index "+Se+" is not a (typed) function, nor an object with signatures as keys and functions as values.");throw Me.data={index:Se,argument:Be},Me}le||(he=Le(he,Xe)),Ze(ye,Te)}return ve(he||"",ye)},l.create=create,l.createCount=ue.createCount,l.onMismatch=de,l.throwMismatchError=de,l.createError=F,l.clear=c,l.clearConversions=f,l.addTypes=h,l._findType=u,l.referTo=Ne,l.referToSelf=Pe,l.convert=b,l.findSignature=v,l.find=y,l.isTypedFunction=p,l.warnAgainstDeprecatedThis=!0,l.addType=function(te,le){let me="any";le!==!1&&n.has("Object")&&(me="Object"),l.addTypes([te],me)};function ge(te){if(!te||typeof te.from!="string"||typeof te.to!="string"||typeof te.convert!="function")throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");if(te.to===te.from)throw new SyntaxError('Illegal to define conversion from "'+te.from+'" to itself.')}return l.addConversion=function(te){let le=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{override:!1};ge(te);const me=u(te.to),he=me.conversionsTo.find(ye=>ye.from===te.from);if(he)if(le&&le.override)l.removeConversion({from:he.from,to:te.to,convert:he.convert});else throw new Error('There is already a conversion from "'+te.from+'" to "'+me.name+'"');me.conversionsTo.push({from:te.from,to:me.name,convert:te.convert,index:o++})},l.addConversions=function(te,le){te.forEach(me=>l.addConversion(me,le))},l.removeConversion=function(te){ge(te);const le=u(te.to),me=xe(le.conversionsTo,ye=>ye.from===te.from);if(!me)throw new Error("Attempt to remove nonexistent conversion from "+te.from+" to "+te.to);if(me.convert!==te.convert)throw new Error("Conversion to remove does not match existing conversion");const he=le.conversionsTo.indexOf(me);le.conversionsTo.splice(he,1)},l.resolve=function(te,le){if(!p(te))throw new TypeError(NOT_TYPED_FUNCTION);const me=te._typedFunctionData.signatures;for(let he=0;he<me.length;++he)if(me[he].test(le))return me[he];return null},l}const typedFunction=create();function factory(t,r,a,n){function s(o){var l=pickShallow(o,r.map(stripOptionalNotation));return assertDependencies(t,r,o),a(l)}return s.isFactory=!0,s.fn=t,s.dependencies=r.slice().sort(),n&&(s.meta=n),s}function assertDependencies(t,r,a){var n=r.filter(o=>!isOptionalDependency(o)).every(o=>a[o]!==void 0);if(!n){var s=r.filter(o=>a[o]===void 0);throw new Error('Cannot create function "'.concat(t,'", ')+"some dependencies are missing: ".concat(s.map(o=>'"'.concat(o,'"')).join(", "),"."))}}function isOptionalDependency(t){return t&&t[0]==="?"}function stripOptionalNotation(t){return t&&t[0]==="?"?t.slice(1):t}function isInteger$1(t){return typeof t=="boolean"?!0:Number.isFinite(t)?t===Math.round(t):!1}function safeNumberType(t,r){if(r.number==="bigint")try{BigInt(t)}catch{return r.numberFallback}return r.number}var sign$2=Math.sign||function(t){return t>0?1:t<0?-1:0},log2$2=Math.log2||function(r){return Math.log(r)/Math.LN2},log10$2=Math.log10||function(r){return Math.log(r)/Math.LN10},log1p$1=Math.log1p||function(t){return Math.log(t+1)},cbrt$2=Math.cbrt||function(r){if(r===0)return r;var a=r<0,n;return a&&(r=-r),Number.isFinite(r)?(n=Math.exp(Math.log(r)/3),n=(r/(n*n)+2*n)/3):n=r,a?-n:n},expm1$1=Math.expm1||function(r){return r>=2e-4||r<=-2e-4?Math.exp(r)-1:r+r*r/2+r*r*r/6};function formatNumberToBase(t,r,a){var n={2:"0b",8:"0o",16:"0x"},s=n[r],o="";if(a){if(a<1)throw new Error("size must be in greater than 0");if(!isInteger$1(a))throw new Error("size must be an integer");if(t>2**(a-1)-1||t<-(2**(a-1)))throw new Error("Value must be in range [-2^".concat(a-1,", 2^").concat(a-1,"-1]"));if(!isInteger$1(t))throw new Error("Value must be an integer");t<0&&(t=t+2**a),o="i".concat(a)}var l="";return t<0&&(t=-t,l="-"),"".concat(l).concat(s).concat(t.toString(r)).concat(o)}function format$3(t,r){if(typeof r=="function")return r(t);if(t===1/0)return"Infinity";if(t===-1/0)return"-Infinity";if(isNaN(t))return"NaN";var{notation:a,precision:n,wordSize:s}=normalizeFormatOptions(r);switch(a){case"fixed":return toFixed$1(t,n);case"exponential":return toExponential$1(t,n);case"engineering":return toEngineering$1(t,n);case"bin":return formatNumberToBase(t,2,s);case"oct":return formatNumberToBase(t,8,s);case"hex":return formatNumberToBase(t,16,s);case"auto":return toPrecision(t,n,r).replace(/((\.\d*?)(0+))($|e)/,function(){var o=arguments[2],l=arguments[4];return o!=="."?o+l:l});default:throw new Error('Unknown notation "'+a+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function normalizeFormatOptions(t){var r="auto",a,n;if(t!==void 0)if(isNumber(t))a=t;else if(isBigNumber(t))a=t.toNumber();else if(isObject(t))t.precision!==void 0&&(a=_toNumberOrThrow(t.precision,()=>{throw new Error('Option "precision" must be a number or BigNumber')})),t.wordSize!==void 0&&(n=_toNumberOrThrow(t.wordSize,()=>{throw new Error('Option "wordSize" must be a number or BigNumber')})),t.notation&&(r=t.notation);else throw new Error("Unsupported type of options, number, BigNumber, or object expected");return{notation:r,precision:a,wordSize:n}}function splitNumber(t){var r=String(t).toLowerCase().match(/^(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!r)throw new SyntaxError("Invalid number "+t);var a=r[1],n=r[2],s=parseFloat(r[4]||"0"),o=n.indexOf(".");s+=o!==-1?o-1:n.length-1;var l=n.replace(".","").replace(/^0*/,function(u){return s-=u.length,""}).replace(/0*$/,"").split("").map(function(u){return parseInt(u)});return l.length===0&&(l.push(0),s++),{sign:a,coefficients:l,exponent:s}}function toEngineering$1(t,r){if(isNaN(t)||!Number.isFinite(t))return String(t);var a=splitNumber(t),n=roundDigits(a,r),s=n.exponent,o=n.coefficients,l=s%3===0?s:s<0?s-3-s%3:s-s%3;if(isNumber(r))for(;r>o.length||s-l+1>o.length;)o.push(0);else for(var u=Math.abs(s-l)-(o.length-1),h=0;h<u;h++)o.push(0);for(var c=Math.abs(s-l),f=1;c>0;)f++,c--;var d=o.slice(f).join(""),p=isNumber(r)&&d.length||d.match(/[1-9]/)?"."+d:"",v=o.slice(0,f).join("")+p+"e"+(s>=0?"+":"")+l.toString();return n.sign+v}function toFixed$1(t,r){if(isNaN(t)||!Number.isFinite(t))return String(t);var a=splitNumber(t),n=typeof r=="number"?roundDigits(a,a.exponent+1+r):a,s=n.coefficients,o=n.exponent+1,l=o+(r||0);return s.length<l&&(s=s.concat(zeros$1(l-s.length))),o<0&&(s=zeros$1(-o+1).concat(s),o=1),o<s.length&&s.splice(o,0,o===0?"0.":"."),n.sign+s.join("")}function toExponential$1(t,r){if(isNaN(t)||!Number.isFinite(Number(t)))return String(t);var a=splitNumber(t),n=r?roundDigits(a,r):a,s=n.coefficients,o=n.exponent;s.length<r&&(s=s.concat(zeros$1(r-s.length)));var l=s.shift();return n.sign+l+(s.length>0?"."+s.join(""):"")+"e"+(o>=0?"+":"")+o}function toPrecision(t,r,a){if(isNaN(t)||!Number.isFinite(t))return String(t);var n=_toNumberOrDefault$1(a?.lowerExp,-3),s=_toNumberOrDefault$1(a?.upperExp,5),o=splitNumber(t),l=r?roundDigits(o,r):o;if(l.exponent<n||l.exponent>=s)return toExponential$1(t,r);var u=l.coefficients,h=l.exponent;u.length<r&&(u=u.concat(zeros$1(r-u.length))),u=u.concat(zeros$1(h-u.length+1+(u.length<r?r-u.length:0))),u=zeros$1(-h).concat(u);var c=h>0?h:0;return c<u.length-1&&u.splice(c+1,0,"."),l.sign+u.join("")}function roundDigits(t,r){for(var a={sign:t.sign,coefficients:t.coefficients,exponent:t.exponent},n=a.coefficients;r<=0;)n.unshift(0),a.exponent++,r++;if(n.length>r){var s=n.splice(r,n.length-r);if(s[0]>=5){var o=r-1;for(n[o]++;n[o]===10;)n.pop(),o===0&&(n.unshift(0),a.exponent++,o++),o--,n[o]++}}return a}function zeros$1(t){for(var r=[],a=0;a<t;a++)r.push(0);return r}function digits(t){return t.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length}function nearlyEqual$1(t,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e-8,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;if(a<=0)throw new Error("Relative tolerance must be greater than 0");if(n<0)throw new Error("Absolute tolerance must be at least 0");return isNaN(t)||isNaN(r)?!1:!Number.isFinite(t)||!Number.isFinite(r)?t===r:t===r?!0:Math.abs(t-r)<=Math.max(a*Math.max(Math.abs(t),Math.abs(r)),n)}var acosh$2=Math.acosh||function(t){return Math.log(Math.sqrt(t*t-1)+t)},asinh$2=Math.asinh||function(t){return Math.log(Math.sqrt(t*t+1)+t)},atanh$2=Math.atanh||function(t){return Math.log((1+t)/(1-t))/2},cosh$3=Math.cosh||function(t){return(Math.exp(t)+Math.exp(-t))/2},sinh$3=Math.sinh||function(t){return(Math.exp(t)-Math.exp(-t))/2},tanh$2=Math.tanh||function(t){var r=Math.exp(2*t);return(r-1)/(r+1)};function copysign(t,r){var a=!0,n=r>0?!0:r<0?!1:1/r===1/0;return a^n?-t:t}function _toNumberOrThrow(t,r){if(isNumber(t))return t;if(isBigNumber(t))return t.toNumber();r()}function _toNumberOrDefault$1(t,r){return isNumber(t)?t:isBigNumber(t)?t.toNumber():r}var _createTyped2=function(){return _createTyped2=typedFunction.create,typedFunction},dependencies$50=["?BigNumber","?Complex","?DenseMatrix","?Fraction"],createTyped=factory("typed",dependencies$50,function(r){var{BigNumber:a,Complex:n,DenseMatrix:s,Fraction:o}=r,l=_createTyped2();return l.clear(),l.addTypes([{name:"number",test:isNumber},{name:"Complex",test:isComplex},{name:"BigNumber",test:isBigNumber},{name:"bigint",test:isBigInt},{name:"Fraction",test:isFraction},{name:"Unit",test:isUnit},{name:"identifier",test:u=>isString&&/^(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDD4A-\uDD65\uDD6F-\uDD85\uDE80-\uDEA9\uDEB0\uDEB1\uDEC2-\uDEC4\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7\uDFD1\uDFD3]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD1D]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDDD0-\uDDED\uDDF0\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDD4A-\uDD65\uDD6F-\uDD85\uDE80-\uDEA9\uDEB0\uDEB1\uDEC2-\uDEC4\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7\uDFD1\uDFD3]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD1D]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDDD0-\uDDED\uDDF0\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])*$/.test(u)},{name:"string",test:isString},{name:"Chain",test:isChain},{name:"Array",test:isArray},{name:"Matrix",test:isMatrix},{name:"DenseMatrix",test:isDenseMatrix},{name:"SparseMatrix",test:isSparseMatrix},{name:"Range",test:isRange},{name:"Index",test:isIndex},{name:"boolean",test:isBoolean},{name:"ResultSet",test:isResultSet},{name:"Help",test:isHelp},{name:"function",test:isFunction},{name:"Date",test:isDate},{name:"RegExp",test:isRegExp},{name:"null",test:isNull},{name:"undefined",test:isUndefined},{name:"AccessorNode",test:isAccessorNode},{name:"ArrayNode",test:isArrayNode},{name:"AssignmentNode",test:isAssignmentNode},{name:"BlockNode",test:isBlockNode},{name:"ConditionalNode",test:isConditionalNode},{name:"ConstantNode",test:isConstantNode},{name:"FunctionNode",test:isFunctionNode},{name:"FunctionAssignmentNode",test:isFunctionAssignmentNode},{name:"IndexNode",test:isIndexNode},{name:"Node",test:isNode},{name:"ObjectNode",test:isObjectNode},{name:"OperatorNode",test:isOperatorNode},{name:"ParenthesisNode",test:isParenthesisNode},{name:"RangeNode",test:isRangeNode},{name:"RelationalNode",test:isRelationalNode},{name:"SymbolNode",test:isSymbolNode},{name:"Map",test:isMap},{name:"Object",test:isObject}]),l.addConversions([{from:"number",to:"BigNumber",convert:function(h){if(a||throwNoBignumber(h),digits(h)>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+h+"). Use function bignumber(x) to convert to BigNumber.");return new a(h)}},{from:"number",to:"Complex",convert:function(h){return n||throwNoComplex(h),new n(h,0)}},{from:"BigNumber",to:"Complex",convert:function(h){return n||throwNoComplex(h),new n(h.toNumber(),0)}},{from:"bigint",to:"number",convert:function(h){if(h>Number.MAX_SAFE_INTEGER)throw new TypeError("Cannot implicitly convert bigint to number: value exceeds the max safe integer value (value: "+h+")");return Number(h)}},{from:"bigint",to:"BigNumber",convert:function(h){return a||throwNoBignumber(h),new a(h.toString())}},{from:"bigint",to:"Fraction",convert:function(h){return o||throwNoFraction(h),new o(h)}},{from:"Fraction",to:"BigNumber",convert:function(h){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(h){return n||throwNoComplex(h),new n(h.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(h){o||throwNoFraction(h);var c=new o(h);if(c.valueOf()!==h)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+h+"). Use function fraction(x) to convert to Fraction.");return c}},{from:"string",to:"number",convert:function(h){var c=Number(h);if(isNaN(c))throw new Error('Cannot convert "'+h+'" to a number');return c}},{from:"string",to:"BigNumber",convert:function(h){a||throwNoBignumber(h);try{return new a(h)}catch{throw new Error('Cannot convert "'+h+'" to BigNumber')}}},{from:"string",to:"bigint",convert:function(h){try{return BigInt(h)}catch{throw new Error('Cannot convert "'+h+'" to BigInt')}}},{from:"string",to:"Fraction",convert:function(h){o||throwNoFraction(h);try{return new o(h)}catch{throw new Error('Cannot convert "'+h+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(h){n||throwNoComplex(h);try{return new n(h)}catch{throw new Error('Cannot convert "'+h+'" to Complex')}}},{from:"boolean",to:"number",convert:function(h){return+h}},{from:"boolean",to:"BigNumber",convert:function(h){return a||throwNoBignumber(h),new a(+h)}},{from:"boolean",to:"bigint",convert:function(h){return BigInt(+h)}},{from:"boolean",to:"Fraction",convert:function(h){return o||throwNoFraction(h),new o(+h)}},{from:"boolean",to:"string",convert:function(h){return String(h)}},{from:"Array",to:"Matrix",convert:function(h){return s||throwNoMatrix(),new s(h)}},{from:"Matrix",to:"Array",convert:function(h){return h.valueOf()}}]),l.onMismatch=(u,h,c)=>{var f=l.createError(u,h,c);if(["wrongType","mismatch"].includes(f.data.category)&&h.length===1&&isCollection(h[0])&&c.some(p=>!p.params.includes(","))){var d=new TypeError("Function '".concat(u,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(u,")'."));throw d.data=f.data,d}throw f},l.onMismatch=(u,h,c)=>{var f=l.createError(u,h,c);if(["wrongType","mismatch"].includes(f.data.category)&&h.length===1&&isCollection(h[0])&&c.some(p=>!p.params.includes(","))){var d=new TypeError("Function '".concat(u,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(u,")'."));throw d.data=f.data,d}throw f},l});function throwNoBignumber(t){throw new Error("Cannot convert value ".concat(t," into a BigNumber: no class 'BigNumber' provided"))}function throwNoComplex(t){throw new Error("Cannot convert value ".concat(t," into a Complex number: no class 'Complex' provided"))}function throwNoMatrix(){throw new Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided")}function throwNoFraction(t){throw new Error("Cannot convert value ".concat(t," into a Fraction, no class 'Fraction' provided."))}var name$4$="ResultSet",dependencies$4$=[],createResultSet=factory(name$4$,dependencies$4$,()=>{function t(r){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator");this.entries=r||[]}return t.prototype.type="ResultSet",t.prototype.isResultSet=!0,t.prototype.valueOf=function(){return this.entries},t.prototype.toString=function(){return"["+this.entries.map(String).join(", ")+"]"},t.prototype.toJSON=function(){return{mathjs:"ResultSet",entries:this.entries}},t.fromJSON=function(r){return new t(r.entries)},t},{isClass:!0});var EXP_LIMIT=9e15,MAX_DIGITS=1e9,NUMERALS="0123456789abcdef",LN10$1="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",PI="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",DEFAULTS={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-EXP_LIMIT,maxE:EXP_LIMIT,crypto:!1},inexact,quadrant,external=!0,decimalError="[DecimalError] ",invalidArgument=decimalError+"Invalid argument: ",precisionLimitExceeded=decimalError+"Precision limit exceeded",cryptoUnavailable=decimalError+"crypto unavailable",tag="[object Decimal]",mathfloor=Math.floor,mathpow=Math.pow,isBinary=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,isHex=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,isOctal=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,isDecimal=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,BASE=1e7,LOG_BASE=7,MAX_SAFE_INTEGER=9007199254740991,LN10_PRECISION=LN10$1.length-1,PI_PRECISION=PI.length-1,P$3={toStringTag:tag};P$3.absoluteValue=P$3.abs=function(){var t=new this.constructor(this);return t.s<0&&(t.s=1),finalise(t)};P$3.ceil=function(){return finalise(new this.constructor(this),this.e+1,2)};P$3.clampedTo=P$3.clamp=function(t,r){var a,n=this,s=n.constructor;if(t=new s(t),r=new s(r),!t.s||!r.s)return new s(NaN);if(t.gt(r))throw Error(invalidArgument+r);return a=n.cmp(t),a<0?t:n.cmp(r)>0?r:new s(n)};P$3.comparedTo=P$3.cmp=function(t){var r,a,n,s,o=this,l=o.d,u=(t=new o.constructor(t)).d,h=o.s,c=t.s;if(!l||!u)return!h||!c?NaN:h!==c?h:l===u?0:!l^h<0?1:-1;if(!l[0]||!u[0])return l[0]?h:u[0]?-c:0;if(h!==c)return h;if(o.e!==t.e)return o.e>t.e^h<0?1:-1;for(n=l.length,s=u.length,r=0,a=n<s?n:s;r<a;++r)if(l[r]!==u[r])return l[r]>u[r]^h<0?1:-1;return n===s?0:n>s^h<0?1:-1};P$3.cosine=P$3.cos=function(){var t,r,a=this,n=a.constructor;return a.d?a.d[0]?(t=n.precision,r=n.rounding,n.precision=t+Math.max(a.e,a.sd())+LOG_BASE,n.rounding=1,a=cosine(n,toLessThanHalfPi(n,a)),n.precision=t,n.rounding=r,finalise(quadrant==2||quadrant==3?a.neg():a,t,r,!0)):new n(1):new n(NaN)};P$3.cubeRoot=P$3.cbrt=function(){var t,r,a,n,s,o,l,u,h,c,f=this,d=f.constructor;if(!f.isFinite()||f.isZero())return new d(f);for(external=!1,o=f.s*mathpow(f.s*f,1/3),!o||Math.abs(o)==1/0?(a=digitsToString(f.d),t=f.e,(o=(t-a.length+1)%3)&&(a+=o==1||o==-2?"0":"00"),o=mathpow(a,1/3),t=mathfloor((t+1)/3)-(t%3==(t<0?-1:2)),o==1/0?a="5e"+t:(a=o.toExponential(),a=a.slice(0,a.indexOf("e")+1)+t),n=new d(a),n.s=f.s):n=new d(o.toString()),l=(t=d.precision)+3;;)if(u=n,h=u.times(u).times(u),c=h.plus(f),n=divide$1(c.plus(f).times(u),c.plus(h),l+2,1),digitsToString(u.d).slice(0,l)===(a=digitsToString(n.d)).slice(0,l))if(a=a.slice(l-3,l+1),a=="9999"||!s&&a=="4999"){if(!s&&(finalise(u,t+1,0),u.times(u).times(u).eq(f))){n=u;break}l+=4,s=1}else{(!+a||!+a.slice(1)&&a.charAt(0)=="5")&&(finalise(n,t+1,1),r=!n.times(n).times(n).eq(f));break}return external=!0,finalise(n,t,d.rounding,r)};P$3.decimalPlaces=P$3.dp=function(){var t,r=this.d,a=NaN;if(r){if(t=r.length-1,a=(t-mathfloor(this.e/LOG_BASE))*LOG_BASE,t=r[t],t)for(;t%10==0;t/=10)a--;a<0&&(a=0)}return a};P$3.dividedBy=P$3.div=function(t){return divide$1(this,new this.constructor(t))};P$3.dividedToIntegerBy=P$3.divToInt=function(t){var r=this,a=r.constructor;return finalise(divide$1(r,new a(t),0,1,1),a.precision,a.rounding)};P$3.equals=P$3.eq=function(t){return this.cmp(t)===0};P$3.floor=function(){return finalise(new this.constructor(this),this.e+1,3)};P$3.greaterThan=P$3.gt=function(t){return this.cmp(t)>0};P$3.greaterThanOrEqualTo=P$3.gte=function(t){var r=this.cmp(t);return r==1||r===0};P$3.hyperbolicCosine=P$3.cosh=function(){var t,r,a,n,s,o=this,l=o.constructor,u=new l(1);if(!o.isFinite())return new l(o.s?1/0:NaN);if(o.isZero())return u;a=l.precision,n=l.rounding,l.precision=a+Math.max(o.e,o.sd())+4,l.rounding=1,s=o.d.length,s<32?(t=Math.ceil(s/3),r=(1/tinyPow(4,t)).toString()):(t=16,r="2.3283064365386962890625e-10"),o=taylorSeries(l,1,o.times(r),new l(1),!0);for(var h,c=t,f=new l(8);c--;)h=o.times(o),o=u.minus(h.times(f.minus(h.times(f))));return finalise(o,l.precision=a,l.rounding=n,!0)};P$3.hyperbolicSine=P$3.sinh=function(){var t,r,a,n,s=this,o=s.constructor;if(!s.isFinite()||s.isZero())return new o(s);if(r=o.precision,a=o.rounding,o.precision=r+Math.max(s.e,s.sd())+4,o.rounding=1,n=s.d.length,n<3)s=taylorSeries(o,2,s,s,!0);else{t=1.4*Math.sqrt(n),t=t>16?16:t|0,s=s.times(1/tinyPow(5,t)),s=taylorSeries(o,2,s,s,!0);for(var l,u=new o(5),h=new o(16),c=new o(20);t--;)l=s.times(s),s=s.times(u.plus(l.times(h.times(l).plus(c))))}return o.precision=r,o.rounding=a,finalise(s,r,a,!0)};P$3.hyperbolicTangent=P$3.tanh=function(){var t,r,a=this,n=a.constructor;return a.isFinite()?a.isZero()?new n(a):(t=n.precision,r=n.rounding,n.precision=t+7,n.rounding=1,divide$1(a.sinh(),a.cosh(),n.precision=t,n.rounding=r)):new n(a.s)};P$3.inverseCosine=P$3.acos=function(){var t=this,r=t.constructor,a=t.abs().cmp(1),n=r.precision,s=r.rounding;return a!==-1?a===0?t.isNeg()?getPi(r,n,s):new r(0):new r(NaN):t.isZero()?getPi(r,n+4,s).times(.5):(r.precision=n+6,r.rounding=1,t=new r(1).minus(t).div(t.plus(1)).sqrt().atan(),r.precision=n,r.rounding=s,t.times(2))};P$3.inverseHyperbolicCosine=P$3.acosh=function(){var t,r,a=this,n=a.constructor;return a.lte(1)?new n(a.eq(1)?0:NaN):a.isFinite()?(t=n.precision,r=n.rounding,n.precision=t+Math.max(Math.abs(a.e),a.sd())+4,n.rounding=1,external=!1,a=a.times(a).minus(1).sqrt().plus(a),external=!0,n.precision=t,n.rounding=r,a.ln()):new n(a)};P$3.inverseHyperbolicSine=P$3.asinh=function(){var t,r,a=this,n=a.constructor;return!a.isFinite()||a.isZero()?new n(a):(t=n.precision,r=n.rounding,n.precision=t+2*Math.max(Math.abs(a.e),a.sd())+6,n.rounding=1,external=!1,a=a.times(a).plus(1).sqrt().plus(a),external=!0,n.precision=t,n.rounding=r,a.ln())};P$3.inverseHyperbolicTangent=P$3.atanh=function(){var t,r,a,n,s=this,o=s.constructor;return s.isFinite()?s.e>=0?new o(s.abs().eq(1)?s.s/0:s.isZero()?s:NaN):(t=o.precision,r=o.rounding,n=s.sd(),Math.max(n,t)<2*-s.e-1?finalise(new o(s),t,r,!0):(o.precision=a=n-s.e,s=divide$1(s.plus(1),new o(1).minus(s),a+t,1),o.precision=t+4,o.rounding=1,s=s.ln(),o.precision=t,o.rounding=r,s.times(.5))):new o(NaN)};P$3.inverseSine=P$3.asin=function(){var t,r,a,n,s=this,o=s.constructor;return s.isZero()?new o(s):(r=s.abs().cmp(1),a=o.precision,n=o.rounding,r!==-1?r===0?(t=getPi(o,a+4,n).times(.5),t.s=s.s,t):new o(NaN):(o.precision=a+6,o.rounding=1,s=s.div(new o(1).minus(s.times(s)).sqrt().plus(1)).atan(),o.precision=a,o.rounding=n,s.times(2)))};P$3.inverseTangent=P$3.atan=function(){var t,r,a,n,s,o,l,u,h,c=this,f=c.constructor,d=f.precision,p=f.rounding;if(c.isFinite()){if(c.isZero())return new f(c);if(c.abs().eq(1)&&d+4<=PI_PRECISION)return l=getPi(f,d+4,p).times(.25),l.s=c.s,l}else{if(!c.s)return new f(NaN);if(d+4<=PI_PRECISION)return l=getPi(f,d+4,p).times(.5),l.s=c.s,l}for(f.precision=u=d+10,f.rounding=1,a=Math.min(28,u/LOG_BASE+2|0),t=a;t;--t)c=c.div(c.times(c).plus(1).sqrt().plus(1));for(external=!1,r=Math.ceil(u/LOG_BASE),n=1,h=c.times(c),l=new f(c),s=c;t!==-1;)if(s=s.times(h),o=l.minus(s.div(n+=2)),s=s.times(h),l=o.plus(s.div(n+=2)),l.d[r]!==void 0)for(t=r;l.d[t]===o.d[t]&&t--;);return a&&(l=l.times(2<<a-1)),external=!0,finalise(l,f.precision=d,f.rounding=p,!0)};P$3.isFinite=function(){return!!this.d};P$3.isInteger=P$3.isInt=function(){return!!this.d&&mathfloor(this.e/LOG_BASE)>this.d.length-2};P$3.isNaN=function(){return!this.s};P$3.isNegative=P$3.isNeg=function(){return this.s<0};P$3.isPositive=P$3.isPos=function(){return this.s>0};P$3.isZero=function(){return!!this.d&&this.d[0]===0};P$3.lessThan=P$3.lt=function(t){return this.cmp(t)<0};P$3.lessThanOrEqualTo=P$3.lte=function(t){return this.cmp(t)<1};P$3.logarithm=P$3.log=function(t){var r,a,n,s,o,l,u,h,c=this,f=c.constructor,d=f.precision,p=f.rounding,v=5;if(t==null)t=new f(10),r=!0;else{if(t=new f(t),a=t.d,t.s<0||!a||!a[0]||t.eq(1))return new f(NaN);r=t.eq(10)}if(a=c.d,c.s<0||!a||!a[0]||c.eq(1))return new f(a&&!a[0]?-1/0:c.s!=1?NaN:a?0:1/0);if(r)if(a.length>1)o=!0;else{for(s=a[0];s%10===0;)s/=10;o=s!==1}if(external=!1,u=d+v,l=naturalLogarithm(c,u),n=r?getLn10(f,u+10):naturalLogarithm(t,u),h=divide$1(l,n,u,1),checkRoundingDigits(h.d,s=d,p))do if(u+=10,l=naturalLogarithm(c,u),n=r?getLn10(f,u+10):naturalLogarithm(t,u),h=divide$1(l,n,u,1),!o){+digitsToString(h.d).slice(s+1,s+15)+1==1e14&&(h=finalise(h,d+1,0));break}while(checkRoundingDigits(h.d,s+=10,p));return external=!0,finalise(h,d,p)};P$3.minus=P$3.sub=function(t){var r,a,n,s,o,l,u,h,c,f,d,p,v=this,y=v.constructor;if(t=new y(t),!v.d||!t.d)return!v.s||!t.s?t=new y(NaN):v.d?t.s=-t.s:t=new y(t.d||v.s!==t.s?v:NaN),t;if(v.s!=t.s)return t.s=-t.s,v.plus(t);if(c=v.d,p=t.d,u=y.precision,h=y.rounding,!c[0]||!p[0]){if(p[0])t.s=-t.s;else if(c[0])t=new y(v);else return new y(h===3?-0:0);return external?finalise(t,u,h):t}if(a=mathfloor(t.e/LOG_BASE),f=mathfloor(v.e/LOG_BASE),c=c.slice(),o=f-a,o){for(d=o<0,d?(r=c,o=-o,l=p.length):(r=p,a=f,l=c.length),n=Math.max(Math.ceil(u/LOG_BASE),l)+2,o>n&&(o=n,r.length=1),r.reverse(),n=o;n--;)r.push(0);r.reverse()}else{for(n=c.length,l=p.length,d=n<l,d&&(l=n),n=0;n<l;n++)if(c[n]!=p[n]){d=c[n]<p[n];break}o=0}for(d&&(r=c,c=p,p=r,t.s=-t.s),l=c.length,n=p.length-l;n>0;--n)c[l++]=0;for(n=p.length;n>o;){if(c[--n]<p[n]){for(s=n;s&&c[--s]===0;)c[s]=BASE-1;--c[s],c[n]+=BASE}c[n]-=p[n]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--a;return c[0]?(t.d=c,t.e=getBase10Exponent(c,a),external?finalise(t,u,h):t):new y(h===3?-0:0)};P$3.modulo=P$3.mod=function(t){var r,a=this,n=a.constructor;return t=new n(t),!a.d||!t.s||t.d&&!t.d[0]?new n(NaN):!t.d||a.d&&!a.d[0]?finalise(new n(a),n.precision,n.rounding):(external=!1,n.modulo==9?(r=divide$1(a,t.abs(),0,3,1),r.s*=t.s):r=divide$1(a,t,0,n.modulo,1),r=r.times(t),external=!0,a.minus(r))};P$3.naturalExponential=P$3.exp=function(){return naturalExponential(this)};P$3.naturalLogarithm=P$3.ln=function(){return naturalLogarithm(this)};P$3.negated=P$3.neg=function(){var t=new this.constructor(this);return t.s=-t.s,finalise(t)};P$3.plus=P$3.add=function(t){var r,a,n,s,o,l,u,h,c,f,d=this,p=d.constructor;if(t=new p(t),!d.d||!t.d)return!d.s||!t.s?t=new p(NaN):d.d||(t=new p(t.d||d.s===t.s?d:NaN)),t;if(d.s!=t.s)return t.s=-t.s,d.minus(t);if(c=d.d,f=t.d,u=p.precision,h=p.rounding,!c[0]||!f[0])return f[0]||(t=new p(d)),external?finalise(t,u,h):t;if(o=mathfloor(d.e/LOG_BASE),n=mathfloor(t.e/LOG_BASE),c=c.slice(),s=o-n,s){for(s<0?(a=c,s=-s,l=f.length):(a=f,n=o,l=c.length),o=Math.ceil(u/LOG_BASE),l=o>l?o+1:l+1,s>l&&(s=l,a.length=1),a.reverse();s--;)a.push(0);a.reverse()}for(l=c.length,s=f.length,l-s<0&&(s=l,a=f,f=c,c=a),r=0;s;)r=(c[--s]=c[s]+f[s]+r)/BASE|0,c[s]%=BASE;for(r&&(c.unshift(r),++n),l=c.length;c[--l]==0;)c.pop();return t.d=c,t.e=getBase10Exponent(c,n),external?finalise(t,u,h):t};P$3.precision=P$3.sd=function(t){var r,a=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(invalidArgument+t);return a.d?(r=getPrecision(a.d),t&&a.e+1>r&&(r=a.e+1)):r=NaN,r};P$3.round=function(){var t=this,r=t.constructor;return finalise(new r(t),t.e+1,r.rounding)};P$3.sine=P$3.sin=function(){var t,r,a=this,n=a.constructor;return a.isFinite()?a.isZero()?new n(a):(t=n.precision,r=n.rounding,n.precision=t+Math.max(a.e,a.sd())+LOG_BASE,n.rounding=1,a=sine(n,toLessThanHalfPi(n,a)),n.precision=t,n.rounding=r,finalise(quadrant>2?a.neg():a,t,r,!0)):new n(NaN)};P$3.squareRoot=P$3.sqrt=function(){var t,r,a,n,s,o,l=this,u=l.d,h=l.e,c=l.s,f=l.constructor;if(c!==1||!u||!u[0])return new f(!c||c<0&&(!u||u[0])?NaN:u?l:1/0);for(external=!1,c=Math.sqrt(+l),c==0||c==1/0?(r=digitsToString(u),(r.length+h)%2==0&&(r+="0"),c=Math.sqrt(r),h=mathfloor((h+1)/2)-(h<0||h%2),c==1/0?r="5e"+h:(r=c.toExponential(),r=r.slice(0,r.indexOf("e")+1)+h),n=new f(r)):n=new f(c.toString()),a=(h=f.precision)+3;;)if(o=n,n=o.plus(divide$1(l,o,a+2,1)).times(.5),digitsToString(o.d).slice(0,a)===(r=digitsToString(n.d)).slice(0,a))if(r=r.slice(a-3,a+1),r=="9999"||!s&&r=="4999"){if(!s&&(finalise(o,h+1,0),o.times(o).eq(l))){n=o;break}a+=4,s=1}else{(!+r||!+r.slice(1)&&r.charAt(0)=="5")&&(finalise(n,h+1,1),t=!n.times(n).eq(l));break}return external=!0,finalise(n,h,f.rounding,t)};P$3.tangent=P$3.tan=function(){var t,r,a=this,n=a.constructor;return a.isFinite()?a.isZero()?new n(a):(t=n.precision,r=n.rounding,n.precision=t+10,n.rounding=1,a=a.sin(),a.s=1,a=divide$1(a,new n(1).minus(a.times(a)).sqrt(),t+10,0),n.precision=t,n.rounding=r,finalise(quadrant==2||quadrant==4?a.neg():a,t,r,!0)):new n(NaN)};P$3.times=P$3.mul=function(t){var r,a,n,s,o,l,u,h,c,f=this,d=f.constructor,p=f.d,v=(t=new d(t)).d;if(t.s*=f.s,!p||!p[0]||!v||!v[0])return new d(!t.s||p&&!p[0]&&!v||v&&!v[0]&&!p?NaN:!p||!v?t.s/0:t.s*0);for(a=mathfloor(f.e/LOG_BASE)+mathfloor(t.e/LOG_BASE),h=p.length,c=v.length,h<c&&(o=p,p=v,v=o,l=h,h=c,c=l),o=[],l=h+c,n=l;n--;)o.push(0);for(n=c;--n>=0;){for(r=0,s=h+n;s>n;)u=o[s]+v[n]*p[s-n-1]+r,o[s--]=u%BASE|0,r=u/BASE|0;o[s]=(o[s]+r)%BASE|0}for(;!o[--l];)o.pop();return r?++a:o.shift(),t.d=o,t.e=getBase10Exponent(o,a),external?finalise(t,d.precision,d.rounding):t};P$3.toBinary=function(t,r){return toStringBinary(this,2,t,r)};P$3.toDecimalPlaces=P$3.toDP=function(t,r){var a=this,n=a.constructor;return a=new n(a),t===void 0?a:(checkInt32(t,0,MAX_DIGITS),r===void 0?r=n.rounding:checkInt32(r,0,8),finalise(a,t+a.e+1,r))};P$3.toExponential=function(t,r){var a,n=this,s=n.constructor;return t===void 0?a=finiteToString(n,!0):(checkInt32(t,0,MAX_DIGITS),r===void 0?r=s.rounding:checkInt32(r,0,8),n=finalise(new s(n),t+1,r),a=finiteToString(n,!0,t+1)),n.isNeg()&&!n.isZero()?"-"+a:a};P$3.toFixed=function(t,r){var a,n,s=this,o=s.constructor;return t===void 0?a=finiteToString(s):(checkInt32(t,0,MAX_DIGITS),r===void 0?r=o.rounding:checkInt32(r,0,8),n=finalise(new o(s),t+s.e+1,r),a=finiteToString(n,!1,t+n.e+1)),s.isNeg()&&!s.isZero()?"-"+a:a};P$3.toFraction=function(t){var r,a,n,s,o,l,u,h,c,f,d,p,v=this,y=v.d,b=v.constructor;if(!y)return new b(v);if(c=a=new b(1),n=h=new b(0),r=new b(n),o=r.e=getPrecision(y)-v.e-1,l=o%LOG_BASE,r.d[0]=mathpow(10,l<0?LOG_BASE+l:l),t==null)t=o>0?r:c;else{if(u=new b(t),!u.isInt()||u.lt(c))throw Error(invalidArgument+u);t=u.gt(r)?o>0?r:c:u}for(external=!1,u=new b(digitsToString(y)),f=b.precision,b.precision=o=y.length*LOG_BASE*2;d=divide$1(u,r,0,1,1),s=a.plus(d.times(n)),s.cmp(t)!=1;)a=n,n=s,s=c,c=h.plus(d.times(s)),h=s,s=r,r=u.minus(d.times(s)),u=s;return s=divide$1(t.minus(a),n,0,1,1),h=h.plus(s.times(c)),a=a.plus(s.times(n)),h.s=c.s=v.s,p=divide$1(c,n,o,1).minus(v).abs().cmp(divide$1(h,a,o,1).minus(v).abs())<1?[c,n]:[h,a],b.precision=f,external=!0,p};P$3.toHexadecimal=P$3.toHex=function(t,r){return toStringBinary(this,16,t,r)};P$3.toNearest=function(t,r){var a=this,n=a.constructor;if(a=new n(a),t==null){if(!a.d)return a;t=new n(1),r=n.rounding}else{if(t=new n(t),r===void 0?r=n.rounding:checkInt32(r,0,8),!a.d)return t.s?a:t;if(!t.d)return t.s&&(t.s=a.s),t}return t.d[0]?(external=!1,a=divide$1(a,t,0,r,1).times(t),external=!0,finalise(a)):(t.s=a.s,a=t),a};P$3.toNumber=function(){return+this};P$3.toOctal=function(t,r){return toStringBinary(this,8,t,r)};P$3.toPower=P$3.pow=function(t){var r,a,n,s,o,l,u=this,h=u.constructor,c=+(t=new h(t));if(!u.d||!t.d||!u.d[0]||!t.d[0])return new h(mathpow(+u,c));if(u=new h(u),u.eq(1))return u;if(n=h.precision,o=h.rounding,t.eq(1))return finalise(u,n,o);if(r=mathfloor(t.e/LOG_BASE),r>=t.d.length-1&&(a=c<0?-c:c)<=MAX_SAFE_INTEGER)return s=intPow(h,u,a,n),t.s<0?new h(1).div(s):finalise(s,n,o);if(l=u.s,l<0){if(r<t.d.length-1)return new h(NaN);if((t.d[r]&1)==0&&(l=1),u.e==0&&u.d[0]==1&&u.d.length==1)return u.s=l,u}return a=mathpow(+u,c),r=a==0||!isFinite(a)?mathfloor(c*(Math.log("0."+digitsToString(u.d))/Math.LN10+u.e+1)):new h(a+"").e,r>h.maxE+1||r<h.minE-1?new h(r>0?l/0:0):(external=!1,h.rounding=u.s=1,a=Math.min(12,(r+"").length),s=naturalExponential(t.times(naturalLogarithm(u,n+a)),n),s.d&&(s=finalise(s,n+5,1),checkRoundingDigits(s.d,n,o)&&(r=n+10,s=finalise(naturalExponential(t.times(naturalLogarithm(u,r+a)),r),r+5,1),+digitsToString(s.d).slice(n+1,n+15)+1==1e14&&(s=finalise(s,n+1,0)))),s.s=l,external=!0,h.rounding=o,finalise(s,n,o))};P$3.toPrecision=function(t,r){var a,n=this,s=n.constructor;return t===void 0?a=finiteToString(n,n.e<=s.toExpNeg||n.e>=s.toExpPos):(checkInt32(t,1,MAX_DIGITS),r===void 0?r=s.rounding:checkInt32(r,0,8),n=finalise(new s(n),t,r),a=finiteToString(n,t<=n.e||n.e<=s.toExpNeg,t)),n.isNeg()&&!n.isZero()?"-"+a:a};P$3.toSignificantDigits=P$3.toSD=function(t,r){var a=this,n=a.constructor;return t===void 0?(t=n.precision,r=n.rounding):(checkInt32(t,1,MAX_DIGITS),r===void 0?r=n.rounding:checkInt32(r,0,8)),finalise(new n(a),t,r)};P$3.toString=function(){var t=this,r=t.constructor,a=finiteToString(t,t.e<=r.toExpNeg||t.e>=r.toExpPos);return t.isNeg()&&!t.isZero()?"-"+a:a};P$3.truncated=P$3.trunc=function(){return finalise(new this.constructor(this),this.e+1,1)};P$3.valueOf=P$3.toJSON=function(){var t=this,r=t.constructor,a=finiteToString(t,t.e<=r.toExpNeg||t.e>=r.toExpPos);return t.isNeg()?"-"+a:a};function digitsToString(t){var r,a,n,s=t.length-1,o="",l=t[0];if(s>0){for(o+=l,r=1;r<s;r++)n=t[r]+"",a=LOG_BASE-n.length,a&&(o+=getZeroString(a)),o+=n;l=t[r],n=l+"",a=LOG_BASE-n.length,a&&(o+=getZeroString(a))}else if(l===0)return"0";for(;l%10===0;)l/=10;return o+l}function checkInt32(t,r,a){if(t!==~~t||t<r||t>a)throw Error(invalidArgument+t)}function checkRoundingDigits(t,r,a,n){var s,o,l,u;for(o=t[0];o>=10;o/=10)--r;return--r<0?(r+=LOG_BASE,s=0):(s=Math.ceil((r+1)/LOG_BASE),r%=LOG_BASE),o=mathpow(10,LOG_BASE-r),u=t[s]%o|0,n==null?r<3?(r==0?u=u/100|0:r==1&&(u=u/10|0),l=a<4&&u==99999||a>3&&u==49999||u==5e4||u==0):l=(a<4&&u+1==o||a>3&&u+1==o/2)&&(t[s+1]/o/100|0)==mathpow(10,r-2)-1||(u==o/2||u==0)&&(t[s+1]/o/100|0)==0:r<4?(r==0?u=u/1e3|0:r==1?u=u/100|0:r==2&&(u=u/10|0),l=(n||a<4)&&u==9999||!n&&a>3&&u==4999):l=((n||a<4)&&u+1==o||!n&&a>3&&u+1==o/2)&&(t[s+1]/o/1e3|0)==mathpow(10,r-3)-1,l}function convertBase(t,r,a){for(var n,s=[0],o,l=0,u=t.length;l<u;){for(o=s.length;o--;)s[o]*=r;for(s[0]+=NUMERALS.indexOf(t.charAt(l++)),n=0;n<s.length;n++)s[n]>a-1&&(s[n+1]===void 0&&(s[n+1]=0),s[n+1]+=s[n]/a|0,s[n]%=a)}return s.reverse()}function cosine(t,r){var a,n,s;if(r.isZero())return r;n=r.d.length,n<32?(a=Math.ceil(n/3),s=(1/tinyPow(4,a)).toString()):(a=16,s="2.3283064365386962890625e-10"),t.precision+=a,r=taylorSeries(t,1,r.times(s),new t(1));for(var o=a;o--;){var l=r.times(r);r=l.times(l).minus(l).times(8).plus(1)}return t.precision-=a,r}var divide$1=(function(){function t(n,s,o){var l,u=0,h=n.length;for(n=n.slice();h--;)l=n[h]*s+u,n[h]=l%o|0,u=l/o|0;return u&&n.unshift(u),n}function r(n,s,o,l){var u,h;if(o!=l)h=o>l?1:-1;else for(u=h=0;u<o;u++)if(n[u]!=s[u]){h=n[u]>s[u]?1:-1;break}return h}function a(n,s,o,l){for(var u=0;o--;)n[o]-=u,u=n[o]<s[o]?1:0,n[o]=u*l+n[o]-s[o];for(;!n[0]&&n.length>1;)n.shift()}return function(n,s,o,l,u,h){var c,f,d,p,v,y,b,_,N,M,C,$,w,A,X,O,G,R,B,F,U=n.constructor,q=n.s==s.s?1:-1,ee=n.d,z=s.d;if(!ee||!ee[0]||!z||!z[0])return new U(!n.s||!s.s||(ee?z&&ee[0]==z[0]:!z)?NaN:ee&&ee[0]==0||!z?q*0:q/0);for(h?(v=1,f=n.e-s.e):(h=BASE,v=LOG_BASE,f=mathfloor(n.e/v)-mathfloor(s.e/v)),B=z.length,G=ee.length,N=new U(q),M=N.d=[],d=0;z[d]==(ee[d]||0);d++);if(z[d]>(ee[d]||0)&&f--,o==null?(A=o=U.precision,l=U.rounding):u?A=o+(n.e-s.e)+1:A=o,A<0)M.push(1),y=!0;else{if(A=A/v+2|0,d=0,B==1){for(p=0,z=z[0],A++;(d<G||p)&&A--;d++)X=p*h+(ee[d]||0),M[d]=X/z|0,p=X%z|0;y=p||d<G}else{for(p=h/(z[0]+1)|0,p>1&&(z=t(z,p,h),ee=t(ee,p,h),B=z.length,G=ee.length),O=B,C=ee.slice(0,B),$=C.length;$<B;)C[$++]=0;F=z.slice(),F.unshift(0),R=z[0],z[1]>=h/2&&++R;do p=0,c=r(z,C,B,$),c<0?(w=C[0],B!=$&&(w=w*h+(C[1]||0)),p=w/R|0,p>1?(p>=h&&(p=h-1),b=t(z,p,h),_=b.length,$=C.length,c=r(b,C,_,$),c==1&&(p--,a(b,B<_?F:z,_,h))):(p==0&&(c=p=1),b=z.slice()),_=b.length,_<$&&b.unshift(0),a(C,b,$,h),c==-1&&($=C.length,c=r(z,C,B,$),c<1&&(p++,a(C,B<$?F:z,$,h))),$=C.length):c===0&&(p++,C=[0]),M[d++]=p,c&&C[0]?C[$++]=ee[O]||0:(C=[ee[O]],$=1);while((O++<G||C[0]!==void 0)&&A--);y=C[0]!==void 0}M[0]||M.shift()}if(v==1)N.e=f,inexact=y;else{for(d=1,p=M[0];p>=10;p/=10)d++;N.e=d+f*v-1,finalise(N,u?o+N.e+1:o,l,y)}return N}})();function finalise(t,r,a,n){var s,o,l,u,h,c,f,d,p,v=t.constructor;e:if(r!=null){if(d=t.d,!d)return t;for(s=1,u=d[0];u>=10;u/=10)s++;if(o=r-s,o<0)o+=LOG_BASE,l=r,f=d[p=0],h=f/mathpow(10,s-l-1)%10|0;else if(p=Math.ceil((o+1)/LOG_BASE),u=d.length,p>=u)if(n){for(;u++<=p;)d.push(0);f=h=0,s=1,o%=LOG_BASE,l=o-LOG_BASE+1}else break e;else{for(f=u=d[p],s=1;u>=10;u/=10)s++;o%=LOG_BASE,l=o-LOG_BASE+s,h=l<0?0:f/mathpow(10,s-l-1)%10|0}if(n=n||r<0||d[p+1]!==void 0||(l<0?f:f%mathpow(10,s-l-1)),c=a<4?(h||n)&&(a==0||a==(t.s<0?3:2)):h>5||h==5&&(a==4||n||a==6&&(o>0?l>0?f/mathpow(10,s-l):0:d[p-1])%10&1||a==(t.s<0?8:7)),r<1||!d[0])return d.length=0,c?(r-=t.e+1,d[0]=mathpow(10,(LOG_BASE-r%LOG_BASE)%LOG_BASE),t.e=-r||0):d[0]=t.e=0,t;if(o==0?(d.length=p,u=1,p--):(d.length=p+1,u=mathpow(10,LOG_BASE-o),d[p]=l>0?(f/mathpow(10,s-l)%mathpow(10,l)|0)*u:0),c)for(;;)if(p==0){for(o=1,l=d[0];l>=10;l/=10)o++;for(l=d[0]+=u,u=1;l>=10;l/=10)u++;o!=u&&(t.e++,d[0]==BASE&&(d[0]=1));break}else{if(d[p]+=u,d[p]!=BASE)break;d[p--]=0,u=1}for(o=d.length;d[--o]===0;)d.pop()}return external&&(t.e>v.maxE?(t.d=null,t.e=NaN):t.e<v.minE&&(t.e=0,t.d=[0])),t}function finiteToString(t,r,a){if(!t.isFinite())return nonFiniteToString(t);var n,s=t.e,o=digitsToString(t.d),l=o.length;return r?(a&&(n=a-l)>0?o=o.charAt(0)+"."+o.slice(1)+getZeroString(n):l>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(t.e<0?"e":"e+")+t.e):s<0?(o="0."+getZeroString(-s-1)+o,a&&(n=a-l)>0&&(o+=getZeroString(n))):s>=l?(o+=getZeroString(s+1-l),a&&(n=a-s-1)>0&&(o=o+"."+getZeroString(n))):((n=s+1)<l&&(o=o.slice(0,n)+"."+o.slice(n)),a&&(n=a-l)>0&&(s+1===l&&(o+="."),o+=getZeroString(n))),o}function getBase10Exponent(t,r){var a=t[0];for(r*=LOG_BASE;a>=10;a/=10)r++;return r}function getLn10(t,r,a){if(r>LN10_PRECISION)throw external=!0,a&&(t.precision=a),Error(precisionLimitExceeded);return finalise(new t(LN10$1),r,1,!0)}function getPi(t,r,a){if(r>PI_PRECISION)throw Error(precisionLimitExceeded);return finalise(new t(PI),r,a,!0)}function getPrecision(t){var r=t.length-1,a=r*LOG_BASE+1;if(r=t[r],r){for(;r%10==0;r/=10)a--;for(r=t[0];r>=10;r/=10)a++}return a}function getZeroString(t){for(var r="";t--;)r+="0";return r}function intPow(t,r,a,n){var s,o=new t(1),l=Math.ceil(n/LOG_BASE+4);for(external=!1;;){if(a%2&&(o=o.times(r),truncate(o.d,l)&&(s=!0)),a=mathfloor(a/2),a===0){a=o.d.length-1,s&&o.d[a]===0&&++o.d[a];break}r=r.times(r),truncate(r.d,l)}return external=!0,o}function isOdd(t){return t.d[t.d.length-1]&1}function maxOrMin(t,r,a){for(var n,s,o=new t(r[0]),l=0;++l<r.length;){if(s=new t(r[l]),!s.s){o=s;break}n=o.cmp(s),(n===a||n===0&&o.s===a)&&(o=s)}return o}function naturalExponential(t,r){var a,n,s,o,l,u,h,c=0,f=0,d=0,p=t.constructor,v=p.rounding,y=p.precision;if(!t.d||!t.d[0]||t.e>17)return new p(t.d?t.d[0]?t.s<0?0:1/0:1:t.s?t.s<0?0:t:NaN);for(r==null?(external=!1,h=y):h=r,u=new p(.03125);t.e>-2;)t=t.times(u),d+=5;for(n=Math.log(mathpow(2,d))/Math.LN10*2+5|0,h+=n,a=o=l=new p(1),p.precision=h;;){if(o=finalise(o.times(t),h,1),a=a.times(++f),u=l.plus(divide$1(o,a,h,1)),digitsToString(u.d).slice(0,h)===digitsToString(l.d).slice(0,h)){for(s=d;s--;)l=finalise(l.times(l),h,1);if(r==null)if(c<3&&checkRoundingDigits(l.d,h-n,v,c))p.precision=h+=10,a=o=u=new p(1),f=0,c++;else return finalise(l,p.precision=y,v,external=!0);else return p.precision=y,l}l=u}}function naturalLogarithm(t,r){var a,n,s,o,l,u,h,c,f,d,p,v=1,y=10,b=t,_=b.d,N=b.constructor,M=N.rounding,C=N.precision;if(b.s<0||!_||!_[0]||!b.e&&_[0]==1&&_.length==1)return new N(_&&!_[0]?-1/0:b.s!=1?NaN:_?0:b);if(r==null?(external=!1,f=C):f=r,N.precision=f+=y,a=digitsToString(_),n=a.charAt(0),Math.abs(o=b.e)<15e14){for(;n<7&&n!=1||n==1&&a.charAt(1)>3;)b=b.times(t),a=digitsToString(b.d),n=a.charAt(0),v++;o=b.e,n>1?(b=new N("0."+a),o++):b=new N(n+"."+a.slice(1))}else return c=getLn10(N,f+2,C).times(o+""),b=naturalLogarithm(new N(n+"."+a.slice(1)),f-y).plus(c),N.precision=C,r==null?finalise(b,C,M,external=!0):b;for(d=b,h=l=b=divide$1(b.minus(1),b.plus(1),f,1),p=finalise(b.times(b),f,1),s=3;;){if(l=finalise(l.times(p),f,1),c=h.plus(divide$1(l,new N(s),f,1)),digitsToString(c.d).slice(0,f)===digitsToString(h.d).slice(0,f))if(h=h.times(2),o!==0&&(h=h.plus(getLn10(N,f+2,C).times(o+""))),h=divide$1(h,new N(v),f,1),r==null)if(checkRoundingDigits(h.d,f-y,M,u))N.precision=f+=y,c=l=b=divide$1(d.minus(1),d.plus(1),f,1),p=finalise(b.times(b),f,1),s=u=1;else return finalise(h,N.precision=C,M,external=!0);else return N.precision=C,h;h=c,s+=2}}function nonFiniteToString(t){return String(t.s*t.s/0)}function parseDecimal(t,r){var a,n,s;for((a=r.indexOf("."))>-1&&(r=r.replace(".","")),(n=r.search(/e/i))>0?(a<0&&(a=n),a+=+r.slice(n+1),r=r.substring(0,n)):a<0&&(a=r.length),n=0;r.charCodeAt(n)===48;n++);for(s=r.length;r.charCodeAt(s-1)===48;--s);if(r=r.slice(n,s),r){if(s-=n,t.e=a=a-n-1,t.d=[],n=(a+1)%LOG_BASE,a<0&&(n+=LOG_BASE),n<s){for(n&&t.d.push(+r.slice(0,n)),s-=LOG_BASE;n<s;)t.d.push(+r.slice(n,n+=LOG_BASE));r=r.slice(n),n=LOG_BASE-r.length}else n-=s;for(;n--;)r+="0";t.d.push(+r),external&&(t.e>t.constructor.maxE?(t.d=null,t.e=NaN):t.e<t.constructor.minE&&(t.e=0,t.d=[0]))}else t.e=0,t.d=[0];return t}function parseOther(t,r){var a,n,s,o,l,u,h,c,f;if(r.indexOf("_")>-1){if(r=r.replace(/(\d)_(?=\d)/g,"$1"),isDecimal.test(r))return parseDecimal(t,r)}else if(r==="Infinity"||r==="NaN")return+r||(t.s=NaN),t.e=NaN,t.d=null,t;if(isHex.test(r))a=16,r=r.toLowerCase();else if(isBinary.test(r))a=2;else if(isOctal.test(r))a=8;else throw Error(invalidArgument+r);for(o=r.search(/p/i),o>0?(h=+r.slice(o+1),r=r.substring(2,o)):r=r.slice(2),o=r.indexOf("."),l=o>=0,n=t.constructor,l&&(r=r.replace(".",""),u=r.length,o=u-o,s=intPow(n,new n(a),o,o*2)),c=convertBase(r,a,BASE),f=c.length-1,o=f;c[o]===0;--o)c.pop();return o<0?new n(t.s*0):(t.e=getBase10Exponent(c,f),t.d=c,external=!1,l&&(t=divide$1(t,s,u*4)),h&&(t=t.times(Math.abs(h)<54?mathpow(2,h):Decimal.pow(2,h))),external=!0,t)}function sine(t,r){var a,n=r.d.length;if(n<3)return r.isZero()?r:taylorSeries(t,2,r,r);a=1.4*Math.sqrt(n),a=a>16?16:a|0,r=r.times(1/tinyPow(5,a)),r=taylorSeries(t,2,r,r);for(var s,o=new t(5),l=new t(16),u=new t(20);a--;)s=r.times(r),r=r.times(o.plus(s.times(l.times(s).minus(u))));return r}function taylorSeries(t,r,a,n,s){var o,l,u,h,c=t.precision,f=Math.ceil(c/LOG_BASE);for(external=!1,h=a.times(a),u=new t(n);;){if(l=divide$1(u.times(h),new t(r++*r++),c,1),u=s?n.plus(l):n.minus(l),n=divide$1(l.times(h),new t(r++*r++),c,1),l=u.plus(n),l.d[f]!==void 0){for(o=f;l.d[o]===u.d[o]&&o--;);if(o==-1)break}o=u,u=n,n=l,l=o}return external=!0,l.d.length=f+1,l}function tinyPow(t,r){for(var a=t;--r;)a*=t;return a}function toLessThanHalfPi(t,r){var a,n=r.s<0,s=getPi(t,t.precision,1),o=s.times(.5);if(r=r.abs(),r.lte(o))return quadrant=n?4:1,r;if(a=r.divToInt(s),a.isZero())quadrant=n?3:2;else{if(r=r.minus(a.times(s)),r.lte(o))return quadrant=isOdd(a)?n?2:3:n?4:1,r;quadrant=isOdd(a)?n?1:4:n?3:2}return r.minus(s).abs()}function toStringBinary(t,r,a,n){var s,o,l,u,h,c,f,d,p,v=t.constructor,y=a!==void 0;if(y?(checkInt32(a,1,MAX_DIGITS),n===void 0?n=v.rounding:checkInt32(n,0,8)):(a=v.precision,n=v.rounding),!t.isFinite())f=nonFiniteToString(t);else{for(f=finiteToString(t),l=f.indexOf("."),y?(s=2,r==16?a=a*4-3:r==8&&(a=a*3-2)):s=r,l>=0&&(f=f.replace(".",""),p=new v(1),p.e=f.length-l,p.d=convertBase(finiteToString(p),10,s),p.e=p.d.length),d=convertBase(f,10,s),o=h=d.length;d[--h]==0;)d.pop();if(!d[0])f=y?"0p+0":"0";else{if(l<0?o--:(t=new v(t),t.d=d,t.e=o,t=divide$1(t,p,a,n,0,s),d=t.d,o=t.e,c=inexact),l=d[a],u=s/2,c=c||d[a+1]!==void 0,c=n<4?(l!==void 0||c)&&(n===0||n===(t.s<0?3:2)):l>u||l===u&&(n===4||c||n===6&&d[a-1]&1||n===(t.s<0?8:7)),d.length=a,c)for(;++d[--a]>s-1;)d[a]=0,a||(++o,d.unshift(1));for(h=d.length;!d[h-1];--h);for(l=0,f="";l<h;l++)f+=NUMERALS.charAt(d[l]);if(y){if(h>1)if(r==16||r==8){for(l=r==16?4:3,--h;h%l;h++)f+="0";for(d=convertBase(f,s,r),h=d.length;!d[h-1];--h);for(l=1,f="1.";l<h;l++)f+=NUMERALS.charAt(d[l])}else f=f.charAt(0)+"."+f.slice(1);f=f+(o<0?"p":"p+")+o}else if(o<0){for(;++o;)f="0"+f;f="0."+f}else if(++o>h)for(o-=h;o--;)f+="0";else o<h&&(f=f.slice(0,o)+"."+f.slice(o))}f=(r==16?"0x":r==2?"0b":r==8?"0o":"")+f}return t.s<0?"-"+f:f}function truncate(t,r){if(t.length>r)return t.length=r,!0}function abs$1(t){return new this(t).abs()}function acos$1(t){return new this(t).acos()}function acosh$1(t){return new this(t).acosh()}function add$1(t,r){return new this(t).plus(r)}function asin$1(t){return new this(t).asin()}function asinh$1(t){return new this(t).asinh()}function atan$1(t){return new this(t).atan()}function atanh$1(t){return new this(t).atanh()}function atan2$1(t,r){t=new this(t),r=new this(r);var a,n=this.precision,s=this.rounding,o=n+4;return!t.s||!r.s?a=new this(NaN):!t.d&&!r.d?(a=getPi(this,o,1).times(r.s>0?.25:.75),a.s=t.s):!r.d||t.isZero()?(a=r.s<0?getPi(this,n,s):new this(0),a.s=t.s):!t.d||r.isZero()?(a=getPi(this,o,1).times(.5),a.s=t.s):r.s<0?(this.precision=o,this.rounding=1,a=this.atan(divide$1(t,r,o,1)),r=getPi(this,o,1),this.precision=n,this.rounding=s,a=t.s<0?a.minus(r):a.plus(r)):a=this.atan(divide$1(t,r,o,1)),a}function cbrt$1(t){return new this(t).cbrt()}function ceil$1(t){return finalise(t=new this(t),t.e+1,2)}function clamp(t,r,a){return new this(t).clamp(r,a)}function config(t){if(!t||typeof t!="object")throw Error(decimalError+"Object expected");var r,a,n,s=t.defaults===!0,o=["precision",1,MAX_DIGITS,"rounding",0,8,"toExpNeg",-EXP_LIMIT,0,"toExpPos",0,EXP_LIMIT,"maxE",0,EXP_LIMIT,"minE",-EXP_LIMIT,0,"modulo",0,9];for(r=0;r<o.length;r+=3)if(a=o[r],s&&(this[a]=DEFAULTS[a]),(n=t[a])!==void 0)if(mathfloor(n)===n&&n>=o[r+1]&&n<=o[r+2])this[a]=n;else throw Error(invalidArgument+a+": "+n);if(a="crypto",s&&(this[a]=DEFAULTS[a]),(n=t[a])!==void 0)if(n===!0||n===!1||n===0||n===1)if(n)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[a]=!0;else throw Error(cryptoUnavailable);else this[a]=!1;else throw Error(invalidArgument+a+": "+n);return this}function cos$1(t){return new this(t).cos()}function cosh$2(t){return new this(t).cosh()}function clone$2(t){var r,a,n;function s(o){var l,u,h,c=this;if(!(c instanceof s))return new s(o);if(c.constructor=s,isDecimalInstance(o)){c.s=o.s,external?!o.d||o.e>s.maxE?(c.e=NaN,c.d=null):o.e<s.minE?(c.e=0,c.d=[0]):(c.e=o.e,c.d=o.d.slice()):(c.e=o.e,c.d=o.d?o.d.slice():o.d);return}if(h=typeof o,h==="number"){if(o===0){c.s=1/o<0?-1:1,c.e=0,c.d=[0];return}if(o<0?(o=-o,c.s=-1):c.s=1,o===~~o&&o<1e7){for(l=0,u=o;u>=10;u/=10)l++;external?l>s.maxE?(c.e=NaN,c.d=null):l<s.minE?(c.e=0,c.d=[0]):(c.e=l,c.d=[o]):(c.e=l,c.d=[o]);return}if(o*0!==0){o||(c.s=NaN),c.e=NaN,c.d=null;return}return parseDecimal(c,o.toString())}if(h==="string")return(u=o.charCodeAt(0))===45?(o=o.slice(1),c.s=-1):(u===43&&(o=o.slice(1)),c.s=1),isDecimal.test(o)?parseDecimal(c,o):parseOther(c,o);if(h==="bigint")return o<0?(o=-o,c.s=-1):c.s=1,parseDecimal(c,o.toString());throw Error(invalidArgument+o)}if(s.prototype=P$3,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.EUCLID=9,s.config=s.set=config,s.clone=clone$2,s.isDecimal=isDecimalInstance,s.abs=abs$1,s.acos=acos$1,s.acosh=acosh$1,s.add=add$1,s.asin=asin$1,s.asinh=asinh$1,s.atan=atan$1,s.atanh=atanh$1,s.atan2=atan2$1,s.cbrt=cbrt$1,s.ceil=ceil$1,s.clamp=clamp,s.cos=cos$1,s.cosh=cosh$2,s.div=div,s.exp=exp$1,s.floor=floor$1,s.hypot=hypot$2,s.ln=ln,s.log=log$1,s.log10=log10$1,s.log2=log2$1,s.max=max$1,s.min=min$1,s.mod=mod$1,s.mul=mul,s.pow=pow$1,s.random=random$1,s.round=round$1,s.sign=sign$1,s.sin=sin$1,s.sinh=sinh$2,s.sqrt=sqrt$1,s.sub=sub$1,s.sum=sum$1,s.tan=tan$1,s.tanh=tanh$1,s.trunc=trunc,t===void 0&&(t={}),t&&t.defaults!==!0)for(n=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],r=0;r<n.length;)t.hasOwnProperty(a=n[r++])||(t[a]=this[a]);return s.config(t),s}function div(t,r){return new this(t).div(r)}function exp$1(t){return new this(t).exp()}function floor$1(t){return finalise(t=new this(t),t.e+1,3)}function hypot$2(){var t,r,a=new this(0);for(external=!1,t=0;t<arguments.length;)if(r=new this(arguments[t++]),r.d)a.d&&(a=a.plus(r.times(r)));else{if(r.s)return external=!0,new this(1/0);a=r}return external=!0,a.sqrt()}function isDecimalInstance(t){return t instanceof Decimal||t&&t.toStringTag===tag||!1}function ln(t){return new this(t).ln()}function log$1(t,r){return new this(t).log(r)}function log2$1(t){return new this(t).log(2)}function log10$1(t){return new this(t).log(10)}function max$1(){return maxOrMin(this,arguments,-1)}function min$1(){return maxOrMin(this,arguments,1)}function mod$1(t,r){return new this(t).mod(r)}function mul(t,r){return new this(t).mul(r)}function pow$1(t,r){return new this(t).pow(r)}function random$1(t){var r,a,n,s,o=0,l=new this(1),u=[];if(t===void 0?t=this.precision:checkInt32(t,1,MAX_DIGITS),n=Math.ceil(t/LOG_BASE),this.crypto)if(crypto.getRandomValues)for(r=crypto.getRandomValues(new Uint32Array(n));o<n;)s=r[o],s>=429e7?r[o]=crypto.getRandomValues(new Uint32Array(1))[0]:u[o++]=s%1e7;else if(crypto.randomBytes){for(r=crypto.randomBytes(n*=4);o<n;)s=r[o]+(r[o+1]<<8)+(r[o+2]<<16)+((r[o+3]&127)<<24),s>=214e7?crypto.randomBytes(4).copy(r,o):(u.push(s%1e7),o+=4);o=n/4}else throw Error(cryptoUnavailable);else for(;o<n;)u[o++]=Math.random()*1e7|0;for(n=u[--o],t%=LOG_BASE,n&&t&&(s=mathpow(10,LOG_BASE-t),u[o]=(n/s|0)*s);u[o]===0;o--)u.pop();if(o<0)a=0,u=[0];else{for(a=-1;u[0]===0;a-=LOG_BASE)u.shift();for(n=1,s=u[0];s>=10;s/=10)n++;n<LOG_BASE&&(a-=LOG_BASE-n)}return l.e=a,l.d=u,l}function round$1(t){return finalise(t=new this(t),t.e+1,this.rounding)}function sign$1(t){return t=new this(t),t.d?t.d[0]?t.s:0*t.s:t.s||NaN}function sin$1(t){return new this(t).sin()}function sinh$2(t){return new this(t).sinh()}function sqrt$1(t){return new this(t).sqrt()}function sub$1(t,r){return new this(t).sub(r)}function sum$1(){var t=0,r=arguments,a=new this(r[t]);for(external=!1;a.s&&++t<r.length;)a=a.plus(r[t]);return external=!0,finalise(a,this.precision,this.rounding)}function tan$1(t){return new this(t).tan()}function tanh$1(t){return new this(t).tanh()}function trunc(t){return finalise(t=new this(t),t.e+1,1)}P$3[Symbol.for("nodejs.util.inspect.custom")]=P$3.toString;P$3[Symbol.toStringTag]="Decimal";var Decimal=P$3.constructor=clone$2(DEFAULTS);LN10$1=new Decimal(LN10$1);PI=new Decimal(PI);var name$4_="BigNumber",dependencies$4_=["?on","config"],createBigNumberClass=factory(name$4_,dependencies$4_,t=>{var{on:r,config:a}=t,n=Decimal.clone({precision:a.precision,modulo:Decimal.EUCLID});return n.prototype=Object.create(n.prototype),n.prototype.type="BigNumber",n.prototype.isBigNumber=!0,n.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},n.fromJSON=function(s){return new n(s.value)},r&&r("config",function(s,o){s.precision!==o.precision&&n.config({precision:s.precision})}),n},{isClass:!0});const cosh$1=Math.cosh||function(t){return Math.abs(t)<1e-9?1-t:(Math.exp(t)+Math.exp(-t))*.5},sinh$1=Math.sinh||function(t){return Math.abs(t)<1e-9?t:(Math.exp(t)-Math.exp(-t))*.5},cosm1=t=>{const r=Math.sin(.5*t);return-2*r*r},hypot$1=function(t,r){return t=Math.abs(t),r=Math.abs(r),t<r&&([t,r]=[r,t]),t<1e8?Math.sqrt(t*t+r*r):(r/=t,t*Math.sqrt(1+r*r))},parser_exit=function(){throw SyntaxError("Invalid Param")};function logHypot(t,r){const a=Math.abs(t),n=Math.abs(r);return t===0?Math.log(n):r===0?Math.log(a):a<3e3&&n<3e3?Math.log(t*t+r*r)*.5:(t=t*.5,r=r*.5,.5*Math.log(t*t+r*r)+Math.LN2)}const P$2={re:0,im:0},parse$2=function(t,r){const a=P$2;if(t==null)a.re=a.im=0;else if(r!==void 0)a.re=t,a.im=r;else switch(typeof t){case"object":if("im"in t&&"re"in t)a.re=t.re,a.im=t.im;else if("abs"in t&&"arg"in t){if(!isFinite(t.abs)&&isFinite(t.arg))return Complex$2.INFINITY;a.re=t.abs*Math.cos(t.arg),a.im=t.abs*Math.sin(t.arg)}else if("r"in t&&"phi"in t){if(!isFinite(t.r)&&isFinite(t.phi))return Complex$2.INFINITY;a.re=t.r*Math.cos(t.phi),a.im=t.r*Math.sin(t.phi)}else t.length===2?(a.re=t[0],a.im=t[1]):parser_exit();break;case"string":a.im=a.re=0;const n=t.replace(/_/g,"").match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g);let s=1,o=0;n===null&&parser_exit();for(let l=0;l<n.length;l++){const u=n[l];u===" "||u==="	"||u===`
`||(u==="+"?s++:u==="-"?o++:u==="i"||u==="I"?(s+o===0&&parser_exit(),n[l+1]!==" "&&!isNaN(n[l+1])?(a.im+=parseFloat((o%2?"-":"")+n[l+1]),l++):a.im+=parseFloat((o%2?"-":"")+"1"),s=o=0):((s+o===0||isNaN(u))&&parser_exit(),n[l+1]==="i"||n[l+1]==="I"?(a.im+=parseFloat((o%2?"-":"")+u),l++):a.re+=parseFloat((o%2?"-":"")+u),s=o=0))}s+o>0&&parser_exit();break;case"number":a.im=0,a.re=t;break;default:parser_exit()}return isNaN(a.re)||isNaN(a.im),a};function Complex$2(t,r){if(!(this instanceof Complex$2))return new Complex$2(t,r);const a=parse$2(t,r);this.re=a.re,this.im=a.im}Complex$2.prototype={re:0,im:0,sign:function(){const t=hypot$1(this.re,this.im);return new Complex$2(this.re/t,this.im/t)},add:function(t,r){const a=parse$2(t,r),n=this.isInfinite(),s=!(isFinite(a.re)&&isFinite(a.im));return n||s?n&&s?Complex$2.NAN:Complex$2.INFINITY:new Complex$2(this.re+a.re,this.im+a.im)},sub:function(t,r){const a=parse$2(t,r),n=this.isInfinite(),s=!(isFinite(a.re)&&isFinite(a.im));return n||s?n&&s?Complex$2.NAN:Complex$2.INFINITY:new Complex$2(this.re-a.re,this.im-a.im)},mul:function(t,r){const a=parse$2(t,r),n=this.isInfinite(),s=!(isFinite(a.re)&&isFinite(a.im)),o=this.re===0&&this.im===0,l=a.re===0&&a.im===0;return n&&l||s&&o?Complex$2.NAN:n||s?Complex$2.INFINITY:a.im===0&&this.im===0?new Complex$2(this.re*a.re,0):new Complex$2(this.re*a.re-this.im*a.im,this.re*a.im+this.im*a.re)},div:function(t,r){const a=parse$2(t,r),n=this.isInfinite(),s=!(isFinite(a.re)&&isFinite(a.im)),o=this.re===0&&this.im===0,l=a.re===0&&a.im===0;if(o&&l||n&&s)return Complex$2.NAN;if(l||n)return Complex$2.INFINITY;if(o||s)return Complex$2.ZERO;if(a.im===0)return new Complex$2(this.re/a.re,this.im/a.re);if(Math.abs(a.re)<Math.abs(a.im)){const u=a.re/a.im,h=a.re*u+a.im;return new Complex$2((this.re*u+this.im)/h,(this.im*u-this.re)/h)}else{const u=a.im/a.re,h=a.im*u+a.re;return new Complex$2((this.re+this.im*u)/h,(this.im-this.re*u)/h)}},pow:function(t,r){const a=parse$2(t,r),n=this.re===0&&this.im===0;if(a.re===0&&a.im===0)return Complex$2.ONE;if(a.im===0){if(this.im===0&&this.re>0)return new Complex$2(Math.pow(this.re,a.re),0);if(this.re===0)switch((a.re%4+4)%4){case 0:return new Complex$2(Math.pow(this.im,a.re),0);case 1:return new Complex$2(0,Math.pow(this.im,a.re));case 2:return new Complex$2(-Math.pow(this.im,a.re),0);case 3:return new Complex$2(0,-Math.pow(this.im,a.re))}}if(n&&a.re>0)return Complex$2.ZERO;const o=Math.atan2(this.im,this.re),l=logHypot(this.re,this.im);let u=Math.exp(a.re*l-a.im*o),h=a.im*l+a.re*o;return new Complex$2(u*Math.cos(h),u*Math.sin(h))},sqrt:function(){const t=this.re,r=this.im;if(r===0)return t>=0?new Complex$2(Math.sqrt(t),0):new Complex$2(0,Math.sqrt(-t));const a=hypot$1(t,r);let n=Math.sqrt(.5*(a+Math.abs(t))),s=Math.abs(r)/(2*n);return t>=0?new Complex$2(n,r<0?-s:s):new Complex$2(s,r<0?-n:n)},exp:function(){const t=Math.exp(this.re);return this.im===0?new Complex$2(t,0):new Complex$2(t*Math.cos(this.im),t*Math.sin(this.im))},expm1:function(){const t=this.re,r=this.im;return new Complex$2(Math.expm1(t)*Math.cos(r)+cosm1(r),Math.exp(t)*Math.sin(r))},log:function(){const t=this.re,r=this.im;return r===0&&t>0?new Complex$2(Math.log(t),0):new Complex$2(logHypot(t,r),Math.atan2(r,t))},abs:function(){return hypot$1(this.re,this.im)},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){const t=this.re,r=this.im;return new Complex$2(Math.sin(t)*cosh$1(r),Math.cos(t)*sinh$1(r))},cos:function(){const t=this.re,r=this.im;return new Complex$2(Math.cos(t)*cosh$1(r),-Math.sin(t)*sinh$1(r))},tan:function(){const t=2*this.re,r=2*this.im,a=Math.cos(t)+cosh$1(r);return new Complex$2(Math.sin(t)/a,sinh$1(r)/a)},cot:function(){const t=2*this.re,r=2*this.im,a=Math.cos(t)-cosh$1(r);return new Complex$2(-Math.sin(t)/a,sinh$1(r)/a)},sec:function(){const t=this.re,r=this.im,a=.5*cosh$1(2*r)+.5*Math.cos(2*t);return new Complex$2(Math.cos(t)*cosh$1(r)/a,Math.sin(t)*sinh$1(r)/a)},csc:function(){const t=this.re,r=this.im,a=.5*cosh$1(2*r)-.5*Math.cos(2*t);return new Complex$2(Math.sin(t)*cosh$1(r)/a,-Math.cos(t)*sinh$1(r)/a)},asin:function(){const t=this.re,r=this.im,a=new Complex$2(r*r-t*t+1,-2*t*r).sqrt(),n=new Complex$2(a.re-r,a.im+t).log();return new Complex$2(n.im,-n.re)},acos:function(){const t=this.re,r=this.im,a=new Complex$2(r*r-t*t+1,-2*t*r).sqrt(),n=new Complex$2(a.re-r,a.im+t).log();return new Complex$2(Math.PI/2-n.im,n.re)},atan:function(){const t=this.re,r=this.im;if(t===0){if(r===1)return new Complex$2(0,1/0);if(r===-1)return new Complex$2(0,-1/0)}const a=t*t+(1-r)*(1-r),n=new Complex$2((1-r*r-t*t)/a,-2*t/a).log();return new Complex$2(-.5*n.im,.5*n.re)},acot:function(){const t=this.re,r=this.im;if(r===0)return new Complex$2(Math.atan2(1,t),0);const a=t*t+r*r;return a!==0?new Complex$2(t/a,-r/a).atan():new Complex$2(t!==0?t/0:0,r!==0?-r/0:0).atan()},asec:function(){const t=this.re,r=this.im;if(t===0&&r===0)return new Complex$2(0,1/0);const a=t*t+r*r;return a!==0?new Complex$2(t/a,-r/a).acos():new Complex$2(t!==0?t/0:0,r!==0?-r/0:0).acos()},acsc:function(){const t=this.re,r=this.im;if(t===0&&r===0)return new Complex$2(Math.PI/2,1/0);const a=t*t+r*r;return a!==0?new Complex$2(t/a,-r/a).asin():new Complex$2(t!==0?t/0:0,r!==0?-r/0:0).asin()},sinh:function(){const t=this.re,r=this.im;return new Complex$2(sinh$1(t)*Math.cos(r),cosh$1(t)*Math.sin(r))},cosh:function(){const t=this.re,r=this.im;return new Complex$2(cosh$1(t)*Math.cos(r),sinh$1(t)*Math.sin(r))},tanh:function(){const t=2*this.re,r=2*this.im,a=cosh$1(t)+Math.cos(r);return new Complex$2(sinh$1(t)/a,Math.sin(r)/a)},coth:function(){const t=2*this.re,r=2*this.im,a=cosh$1(t)-Math.cos(r);return new Complex$2(sinh$1(t)/a,-Math.sin(r)/a)},csch:function(){const t=this.re,r=this.im,a=Math.cos(2*r)-cosh$1(2*t);return new Complex$2(-2*sinh$1(t)*Math.cos(r)/a,2*cosh$1(t)*Math.sin(r)/a)},sech:function(){const t=this.re,r=this.im,a=Math.cos(2*r)+cosh$1(2*t);return new Complex$2(2*cosh$1(t)*Math.cos(r)/a,-2*sinh$1(t)*Math.sin(r)/a)},asinh:function(){const t=this.re,r=this.im;if(r===0){if(t===0)return new Complex$2(0,0);const o=Math.abs(t),l=Math.log(o+Math.sqrt(o*o+1));return new Complex$2(t<0?-l:l,0)}const a=t*t-r*r+1,n=2*t*r,s=new Complex$2(a,n).sqrt();return new Complex$2(t+s.re,r+s.im).log()},acosh:function(){const t=this.re,r=this.im;if(r===0){if(t>1)return new Complex$2(Math.log(t+Math.sqrt(t-1)*Math.sqrt(t+1)),0);if(t<-1){const s=Math.sqrt(t*t-1);return new Complex$2(Math.log(-t+s),Math.PI)}return new Complex$2(0,Math.acos(t))}const a=new Complex$2(t-1,r).sqrt(),n=new Complex$2(t+1,r).sqrt();return new Complex$2(t+a.re*n.re-a.im*n.im,r+a.re*n.im+a.im*n.re).log()},atanh:function(){const t=this.re,r=this.im;if(r===0){if(t===0)return new Complex$2(0,0);if(t===1)return new Complex$2(1/0,0);if(t===-1)return new Complex$2(-1/0,0);if(-1<t&&t<1)return new Complex$2(.5*Math.log((1+t)/(1-t)),0);if(t>1){const h=(t+1)/(t-1);return new Complex$2(.5*Math.log(h),-Math.PI/2)}const u=(1+t)/(1-t);return new Complex$2(.5*Math.log(-u),Math.PI/2)}const a=1-t,n=1+t,s=a*a+r*r;if(s===0)return new Complex$2(t!==-1?t/0:0,r!==0?r/0:0);const o=(n*a-r*r)/s,l=(r*a+n*r)/s;return new Complex$2(logHypot(o,l)/2,Math.atan2(l,o)/2)},acoth:function(){const t=this.re,r=this.im;if(t===0&&r===0)return new Complex$2(0,Math.PI/2);const a=t*t+r*r;return a!==0?new Complex$2(t/a,-r/a).atanh():new Complex$2(t!==0?t/0:0,r!==0?-r/0:0).atanh()},acsch:function(){const t=this.re,r=this.im;if(r===0){if(t===0)return new Complex$2(1/0,0);const n=1/t;return new Complex$2(Math.log(n+Math.sqrt(n*n+1)),0)}const a=t*t+r*r;return a!==0?new Complex$2(t/a,-r/a).asinh():new Complex$2(t!==0?t/0:0,r!==0?-r/0:0).asinh()},asech:function(){const t=this.re,r=this.im;if(this.isZero())return Complex$2.INFINITY;const a=t*t+r*r;return a!==0?new Complex$2(t/a,-r/a).acosh():new Complex$2(t!==0?t/0:0,r!==0?-r/0:0).acosh()},inverse:function(){if(this.isZero())return Complex$2.INFINITY;if(this.isInfinite())return Complex$2.ZERO;const t=this.re,r=this.im,a=t*t+r*r;return new Complex$2(t/a,-r/a)},conjugate:function(){return new Complex$2(this.re,-this.im)},neg:function(){return new Complex$2(-this.re,-this.im)},ceil:function(t){return t=Math.pow(10,t||0),new Complex$2(Math.ceil(this.re*t)/t,Math.ceil(this.im*t)/t)},floor:function(t){return t=Math.pow(10,t||0),new Complex$2(Math.floor(this.re*t)/t,Math.floor(this.im*t)/t)},round:function(t){return t=Math.pow(10,t||0),new Complex$2(Math.round(this.re*t)/t,Math.round(this.im*t)/t)},equals:function(t,r){const a=parse$2(t,r);return Math.abs(a.re-this.re)<=Complex$2.EPSILON&&Math.abs(a.im-this.im)<=Complex$2.EPSILON},clone:function(){return new Complex$2(this.re,this.im)},toString:function(){let t=this.re,r=this.im,a="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(t)<Complex$2.EPSILON&&(t=0),Math.abs(r)<Complex$2.EPSILON&&(r=0),r===0?a+t:(t!==0?(a+=t,a+=" ",r<0?(r=-r,a+="-"):a+="+",a+=" "):r<0&&(r=-r,a+="-"),r!==1&&(a+=r),a+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return this.im===0?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return this.im===0&&this.re===0},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!this.isFinite()}};Complex$2.ZERO=new Complex$2(0,0);Complex$2.ONE=new Complex$2(1,0);Complex$2.I=new Complex$2(0,1);Complex$2.PI=new Complex$2(Math.PI,0);Complex$2.E=new Complex$2(Math.E,0);Complex$2.INFINITY=new Complex$2(1/0,1/0);Complex$2.NAN=new Complex$2(NaN,NaN);Complex$2.EPSILON=1e-15;var name$4Z="Complex",dependencies$4Z=[],createComplexClass=factory(name$4Z,dependencies$4Z,()=>(Object.defineProperty(Complex$2,"name",{value:"Complex"}),Complex$2.prototype.constructor=Complex$2,Complex$2.prototype.type="Complex",Complex$2.prototype.isComplex=!0,Complex$2.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},Complex$2.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},Complex$2.prototype.format=function(t){var r="",a=this.im,n=this.re,s=format$3(this.re,t),o=format$3(this.im,t),l=isNumber(t)?t:t?t.precision:null;if(l!==null){var u=Math.pow(10,-l);Math.abs(n/a)<u&&(n=0),Math.abs(a/n)<u&&(a=0)}return a===0?r=s:n===0?a===1?r="i":a===-1?r="-i":r=o+"i":a<0?a===-1?r=s+" - i":r=s+" - "+o.substring(1)+"i":a===1?r=s+" + i":r=s+" + "+o+"i",r},Complex$2.fromPolar=function(t){switch(arguments.length){case 1:{var r=arguments[0];if(typeof r=="object")return Complex$2(r);throw new TypeError("Input has to be an object with r and phi keys.")}case 2:{var a=arguments[0],n=arguments[1];if(isNumber(a)){if(isUnit(n)&&n.hasBase("ANGLE")&&(n=n.toNumber("rad")),isNumber(n))return new Complex$2({r:a,phi:n});throw new TypeError("Phi is not a number nor an angle unit.")}else throw new TypeError("Radius r is not a number.")}default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},Complex$2.prototype.valueOf=Complex$2.prototype.toString,Complex$2.fromJSON=function(t){return new Complex$2(t)},Complex$2.compare=function(t,r){return t.re>r.re?1:t.re<r.re?-1:t.im>r.im?1:t.im<r.im?-1:0},Complex$2),{isClass:!0});typeof BigInt>"u"&&(BigInt=function(t){if(isNaN(t))throw new Error("");return t});const C_ZERO=BigInt(0),C_ONE=BigInt(1),C_TWO=BigInt(2),C_THREE=BigInt(3),C_FIVE=BigInt(5),C_TEN=BigInt(10);BigInt(Number.MAX_SAFE_INTEGER);const MAX_CYCLE_LEN=2e3,P$1={s:C_ONE,n:C_ZERO,d:C_ONE};function assign(t,r){try{t=BigInt(t)}catch{throw InvalidParameter()}return t*r}function ifloor(t){return typeof t=="bigint"?t:Math.floor(t)}function newFraction(t,r){if(r===C_ZERO)throw DivisionByZero();const a=Object.create(Fraction$1.prototype);a.s=t<C_ZERO?-C_ONE:C_ONE,t=t<C_ZERO?-t:t;const n=gcd$1(t,r);return a.n=t/n,a.d=r/n,a}const FACTORSTEPS=[C_TWO*C_TWO,C_TWO,C_TWO*C_TWO,C_TWO,C_TWO*C_TWO,C_TWO*C_THREE,C_TWO,C_TWO*C_THREE];function factorize(t){const r=Object.create(null);if(t<=C_ONE)return r[t]=C_ONE,r;const a=n=>{r[n]=(r[n]||C_ZERO)+C_ONE};for(;t%C_TWO===C_ZERO;)a(C_TWO),t/=C_TWO;for(;t%C_THREE===C_ZERO;)a(C_THREE),t/=C_THREE;for(;t%C_FIVE===C_ZERO;)a(C_FIVE),t/=C_FIVE;for(let n=0,s=C_TWO+C_FIVE;s*s<=t;){for(;t%s===C_ZERO;)a(s),t/=s;s+=FACTORSTEPS[n],n=n+1&7}return t>C_ONE&&a(t),r}const parse$1=function(t,r){let a=C_ZERO,n=C_ONE,s=C_ONE;if(t!=null)if(r!==void 0){if(typeof t=="bigint")a=t;else{if(isNaN(t))throw InvalidParameter();if(t%1!==0)throw NonIntegerParameter();a=BigInt(t)}if(typeof r=="bigint")n=r;else{if(isNaN(r))throw InvalidParameter();if(r%1!==0)throw NonIntegerParameter();n=BigInt(r)}s=a*n}else if(typeof t=="object"){if("d"in t&&"n"in t)a=BigInt(t.n),n=BigInt(t.d),"s"in t&&(a*=BigInt(t.s));else if(0 in t)a=BigInt(t[0]),1 in t&&(n=BigInt(t[1]));else if(typeof t=="bigint")a=t;else throw InvalidParameter();s=a*n}else if(typeof t=="number"){if(isNaN(t))throw InvalidParameter();if(t<0&&(s=-C_ONE,t=-t),t%1===0)a=BigInt(t);else{let o=1,l=0,u=1,h=1,c=1,f=1e7;for(t>=1&&(o=10**Math.floor(1+Math.log10(t)),t/=o);u<=f&&c<=f;){let d=(l+h)/(u+c);if(t===d){u+c<=f?(a=l+h,n=u+c):c>u?(a=h,n=c):(a=l,n=u);break}else t>d?(l+=h,u+=c):(h+=l,c+=u),u>f?(a=h,n=c):(a=l,n=u)}a=BigInt(a)*BigInt(o),n=BigInt(n)}}else if(typeof t=="string"){let o=0,l=C_ZERO,u=C_ZERO,h=C_ZERO,c=C_ONE,f=C_ONE,d=t.replace(/_/g,"").match(/\d+|./g);if(d===null)throw InvalidParameter();if(d[o]==="-"?(s=-C_ONE,o++):d[o]==="+"&&o++,d.length===o+1?u=assign(d[o++],s):d[o+1]==="."||d[o]==="."?(d[o]!=="."&&(l=assign(d[o++],s)),o++,(o+1===d.length||d[o+1]==="("&&d[o+3]===")"||d[o+1]==="'"&&d[o+3]==="'")&&(u=assign(d[o],s),c=C_TEN**BigInt(d[o].length),o++),(d[o]==="("&&d[o+2]===")"||d[o]==="'"&&d[o+2]==="'")&&(h=assign(d[o+1],s),f=C_TEN**BigInt(d[o+1].length)-C_ONE,o+=3)):d[o+1]==="/"||d[o+1]===":"?(u=assign(d[o],s),c=assign(d[o+2],C_ONE),o+=3):d[o+3]==="/"&&d[o+1]===" "&&(l=assign(d[o],s),u=assign(d[o+2],s),c=assign(d[o+4],C_ONE),o+=5),d.length<=o)n=c*f,s=a=h+n*l+f*u;else throw InvalidParameter()}else if(typeof t=="bigint")a=t,s=t,n=C_ONE;else throw InvalidParameter();if(n===C_ZERO)throw DivisionByZero();P$1.s=s<C_ZERO?-C_ONE:C_ONE,P$1.n=a<C_ZERO?-a:a,P$1.d=n<C_ZERO?-n:n};function modpow(t,r,a){let n=C_ONE;for(;r>C_ZERO;t=t*t%a,r>>=C_ONE)r&C_ONE&&(n=n*t%a);return n}function cycleLen(t,r){for(;r%C_TWO===C_ZERO;r/=C_TWO);for(;r%C_FIVE===C_ZERO;r/=C_FIVE);if(r===C_ONE)return C_ZERO;let a=C_TEN%r,n=1;for(;a!==C_ONE;n++)if(a=a*C_TEN%r,n>MAX_CYCLE_LEN)return C_ZERO;return BigInt(n)}function cycleStart(t,r,a){let n=C_ONE,s=modpow(C_TEN,a,r);for(let o=0;o<300;o++){if(n===s)return BigInt(o);n=n*C_TEN%r,s=s*C_TEN%r}return 0}function gcd$1(t,r){if(!t)return r;if(!r)return t;for(;;){if(t%=r,!t)return r;if(r%=t,!r)return t}}function Fraction$1(t,r){if(parse$1(t,r),this instanceof Fraction$1)t=gcd$1(P$1.d,P$1.n),this.s=P$1.s,this.n=P$1.n/t,this.d=P$1.d/t;else return newFraction(P$1.s*P$1.n,P$1.d)}const DivisionByZero=function(){return new Error("Division by Zero")},InvalidParameter=function(){return new Error("Invalid argument")},NonIntegerParameter=function(){return new Error("Parameters must be integer")};Fraction$1.prototype={s:C_ONE,n:C_ZERO,d:C_ONE,abs:function(){return newFraction(this.n,this.d)},neg:function(){return newFraction(-this.s*this.n,this.d)},add:function(t,r){return parse$1(t,r),newFraction(this.s*this.n*P$1.d+P$1.s*this.d*P$1.n,this.d*P$1.d)},sub:function(t,r){return parse$1(t,r),newFraction(this.s*this.n*P$1.d-P$1.s*this.d*P$1.n,this.d*P$1.d)},mul:function(t,r){return parse$1(t,r),newFraction(this.s*P$1.s*this.n*P$1.n,this.d*P$1.d)},div:function(t,r){return parse$1(t,r),newFraction(this.s*P$1.s*this.n*P$1.d,this.d*P$1.n)},clone:function(){return newFraction(this.s*this.n,this.d)},mod:function(t,r){if(t===void 0)return newFraction(this.s*this.n%this.d,C_ONE);if(parse$1(t,r),C_ZERO===P$1.n*this.d)throw DivisionByZero();return newFraction(this.s*(P$1.d*this.n)%(P$1.n*this.d),P$1.d*this.d)},gcd:function(t,r){return parse$1(t,r),newFraction(gcd$1(P$1.n,this.n)*gcd$1(P$1.d,this.d),P$1.d*this.d)},lcm:function(t,r){return parse$1(t,r),P$1.n===C_ZERO&&this.n===C_ZERO?newFraction(C_ZERO,C_ONE):newFraction(P$1.n*this.n,gcd$1(P$1.n,this.n)*gcd$1(P$1.d,this.d))},inverse:function(){return newFraction(this.s*this.d,this.n)},pow:function(t,r){if(parse$1(t,r),P$1.d===C_ONE)return P$1.s<C_ZERO?newFraction((this.s*this.d)**P$1.n,this.n**P$1.n):newFraction((this.s*this.n)**P$1.n,this.d**P$1.n);if(this.s<C_ZERO)return null;let a=factorize(this.n),n=factorize(this.d),s=C_ONE,o=C_ONE;for(let l in a)if(l!=="1"){if(l==="0"){s=C_ZERO;break}if(a[l]*=P$1.n,a[l]%P$1.d===C_ZERO)a[l]/=P$1.d;else return null;s*=BigInt(l)**a[l]}for(let l in n)if(l!=="1"){if(n[l]*=P$1.n,n[l]%P$1.d===C_ZERO)n[l]/=P$1.d;else return null;o*=BigInt(l)**n[l]}return P$1.s<C_ZERO?newFraction(o,s):newFraction(s,o)},log:function(t,r){if(parse$1(t,r),this.s<=C_ZERO||P$1.s<=C_ZERO)return null;const a=Object.create(null),n=factorize(P$1.n),s=factorize(P$1.d),o=factorize(this.n),l=factorize(this.d);for(const c in s)n[c]=(n[c]||C_ZERO)-s[c];for(const c in l)o[c]=(o[c]||C_ZERO)-l[c];for(const c in n)c!=="1"&&(a[c]=!0);for(const c in o)c!=="1"&&(a[c]=!0);let u=null,h=null;for(const c in a){const f=n[c]||C_ZERO,d=o[c]||C_ZERO;if(f===C_ZERO){if(d!==C_ZERO)return null;continue}let p=d,v=f;const y=gcd$1(p,v);if(p/=y,v/=y,u===null&&h===null)u=p,h=v;else if(p*h!==u*v)return null}return u!==null&&h!==null?newFraction(u,h):null},equals:function(t,r){return parse$1(t,r),this.s*this.n*P$1.d===P$1.s*P$1.n*this.d},lt:function(t,r){return parse$1(t,r),this.s*this.n*P$1.d<P$1.s*P$1.n*this.d},lte:function(t,r){return parse$1(t,r),this.s*this.n*P$1.d<=P$1.s*P$1.n*this.d},gt:function(t,r){return parse$1(t,r),this.s*this.n*P$1.d>P$1.s*P$1.n*this.d},gte:function(t,r){return parse$1(t,r),this.s*this.n*P$1.d>=P$1.s*P$1.n*this.d},compare:function(t,r){parse$1(t,r);let a=this.s*this.n*P$1.d-P$1.s*P$1.n*this.d;return(C_ZERO<a)-(a<C_ZERO)},ceil:function(t){return t=C_TEN**BigInt(t||0),newFraction(ifloor(this.s*t*this.n/this.d)+(t*this.n%this.d>C_ZERO&&this.s>=C_ZERO?C_ONE:C_ZERO),t)},floor:function(t){return t=C_TEN**BigInt(t||0),newFraction(ifloor(this.s*t*this.n/this.d)-(t*this.n%this.d>C_ZERO&&this.s<C_ZERO?C_ONE:C_ZERO),t)},round:function(t){return t=C_TEN**BigInt(t||0),newFraction(ifloor(this.s*t*this.n/this.d)+this.s*((this.s>=C_ZERO?C_ONE:C_ZERO)+C_TWO*(t*this.n%this.d)>this.d?C_ONE:C_ZERO),t)},roundTo:function(t,r){parse$1(t,r);const a=this.n*P$1.d,n=this.d*P$1.n,s=a%n;let o=ifloor(a/n);return s+s>=n&&o++,newFraction(this.s*o*P$1.n,P$1.d)},divisible:function(t,r){return parse$1(t,r),P$1.n===C_ZERO?!1:this.n*P$1.d%(P$1.n*this.d)===C_ZERO},valueOf:function(){return Number(this.s*this.n)/Number(this.d)},toString:function(t=15){let r=this.n,a=this.d,n=cycleLen(r,a),s=cycleStart(r,a,n),o=this.s<C_ZERO?"-":"";if(o+=ifloor(r/a),r%=a,r*=C_TEN,r&&(o+="."),n){for(let l=s;l--;)o+=ifloor(r/a),r%=a,r*=C_TEN;o+="(";for(let l=n;l--;)o+=ifloor(r/a),r%=a,r*=C_TEN;o+=")"}else for(let l=t;r&&l--;)o+=ifloor(r/a),r%=a,r*=C_TEN;return o},toFraction:function(t=!1){let r=this.n,a=this.d,n=this.s<C_ZERO?"-":"";if(a===C_ONE)n+=r;else{const s=ifloor(r/a);t&&s>C_ZERO&&(n+=s,n+=" ",r%=a),n+=r,n+="/",n+=a}return n},toLatex:function(t=!1){let r=this.n,a=this.d,n=this.s<C_ZERO?"-":"";if(a===C_ONE)n+=r;else{const s=ifloor(r/a);t&&s>C_ZERO&&(n+=s,r%=a),n+="\\frac{",n+=r,n+="}{",n+=a,n+="}"}return n},toContinued:function(){let t=this.n,r=this.d;const a=[];for(;r;){a.push(ifloor(t/r));const n=t%r;t=r,r=n}return a},simplify:function(t=.001){const r=BigInt(Math.ceil(1/t)),a=this.abs(),n=a.toContinued();for(let s=1;s<n.length;s++){let o=newFraction(n[s-1],C_ONE);for(let u=s-2;u>=0;u--)o=o.inverse().add(n[u]);let l=o.sub(a);if(l.n*r<l.d)return o.mul(this.s)}return this}};var name$4Y="Fraction",dependencies$4Y=[],createFractionClass=factory(name$4Y,dependencies$4Y,()=>(Object.defineProperty(Fraction$1,"name",{value:"Fraction"}),Fraction$1.prototype.constructor=Fraction$1,Fraction$1.prototype.type="Fraction",Fraction$1.prototype.isFraction=!0,Fraction$1.prototype.toJSON=function(){return{mathjs:"Fraction",n:String(this.s*this.n),d:String(this.d)}},Fraction$1.fromJSON=function(t){return new Fraction$1(t)},Fraction$1),{isClass:!0}),name$4X="Range",dependencies$4X=[],createRangeClass=factory(name$4X,dependencies$4X,()=>{function t(r,a,n){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator");var s=r!=null,o=a!=null,l=n!=null;if(s){if(isBigNumber(r))r=r.toNumber();else if(typeof r!="number"&&!isBigInt(r))throw new TypeError("Parameter start must be a number or bigint")}if(o){if(isBigNumber(a))a=a.toNumber();else if(typeof a!="number"&&!isBigInt(a))throw new TypeError("Parameter end must be a number or bigint")}if(l){if(isBigNumber(n))n=n.toNumber();else if(typeof n!="number"&&!isBigInt(n))throw new TypeError("Parameter step must be a number or bigint")}if(this.start=s?parseFloat(r):0,this.end=o?parseFloat(a):0,this.step=l?parseFloat(n):1,l&&nearlyEqual$1(this.step,0))throw new Error("Step must not be zero")}return t.prototype.type="Range",t.prototype.isRange=!0,t.parse=function(r){if(typeof r!="string")return null;var a=r.split(":"),n=a.map(function(o){return parseFloat(o)}),s=n.some(function(o){return isNaN(o)});if(s)return null;switch(n.length){case 2:return new t(n[0],n[1]);case 3:return new t(n[0],n[2],n[1]);default:return null}},t.prototype.clone=function(){return new t(this.start,this.end,this.step)},t.prototype.size=function(){var r=0,a=this.start,n=this.step,s=this.end,o=s-a;return sign$2(n)===sign$2(o)?r=Math.ceil(o/n):o===0&&(r=0),isNaN(r)&&(r=0),[r]},t.prototype.min=function(){var r=this.size()[0];if(r>0)return this.step>0?this.start:this.start+(r-1)*this.step},t.prototype.max=function(){var r=this.size()[0];if(r>0)return this.step>0?this.start+(r-1)*this.step:this.start},t.prototype.forEach=function(r){var a=this.start,n=this.step,s=this.end,o=0;if(n>0)for(;a<s;)r(a,[o],this),a+=n,o++;else if(n<0)for(;a>s;)r(a,[o],this),a+=n,o++},t.prototype.map=function(r){var a=[];return this.forEach(function(n,s,o){a[s[0]]=r(n,s,o)}),a},t.prototype.toArray=function(){var r=[];return this.forEach(function(a,n){r[n[0]]=a}),r},t.prototype.valueOf=function(){return this.toArray()},t.prototype.format=function(r){var a=format$3(this.start,r);return this.step!==1&&(a+=":"+format$3(this.step,r)),a+=":"+format$3(this.end,r),a},t.prototype.toString=function(){return this.format()},t.prototype.toJSON=function(){return{mathjs:"Range",start:this.start,end:this.end,step:this.step}},t.fromJSON=function(r){return new t(r.start,r.end,r.step)},t},{isClass:!0}),name$4W="Matrix",dependencies$4W=[],createMatrixClass=factory(name$4W,dependencies$4W,()=>{function t(){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator")}return t.prototype.type="Matrix",t.prototype.isMatrix=!0,t.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},t.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},t.prototype.create=function(r,a){throw new Error("Cannot invoke create on a Matrix interface")},t.prototype.subset=function(r,a,n){throw new Error("Cannot invoke subset on a Matrix interface")},t.prototype.get=function(r){throw new Error("Cannot invoke get on a Matrix interface")},t.prototype.set=function(r,a,n){throw new Error("Cannot invoke set on a Matrix interface")},t.prototype.resize=function(r,a){throw new Error("Cannot invoke resize on a Matrix interface")},t.prototype.reshape=function(r,a){throw new Error("Cannot invoke reshape on a Matrix interface")},t.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},t.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},t.prototype.map=function(r,a){throw new Error("Cannot invoke map on a Matrix interface")},t.prototype.forEach=function(r){throw new Error("Cannot invoke forEach on a Matrix interface")},t.prototype[Symbol.iterator]=function(){throw new Error("Cannot iterate a Matrix interface")},t.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},t.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},t.prototype.format=function(r){throw new Error("Cannot invoke format on a Matrix interface")},t.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},t},{isClass:!0});function formatBigNumberToBase(t,r,a){var n=t.constructor,s=new n(2),o="";if(a){if(a<1)throw new Error("size must be in greater than 0");if(!isInteger$1(a))throw new Error("size must be an integer");if(t.greaterThan(s.pow(a-1).sub(1))||t.lessThan(s.pow(a-1).mul(-1)))throw new Error("Value must be in range [-2^".concat(a-1,", 2^").concat(a-1,"-1]"));if(!t.isInteger())throw new Error("Value must be an integer");t.lessThan(0)&&(t=t.add(s.pow(a))),o="i".concat(a)}switch(r){case 2:return"".concat(t.toBinary()).concat(o);case 8:return"".concat(t.toOctal()).concat(o);case 16:return"".concat(t.toHexadecimal()).concat(o);default:throw new Error("Base ".concat(r," not supported "))}}function format$2(t,r){if(typeof r=="function")return r(t);if(!t.isFinite())return t.isNaN()?"NaN":t.gt(0)?"Infinity":"-Infinity";var{notation:a,precision:n,wordSize:s}=normalizeFormatOptions(r);switch(a){case"fixed":return toFixed(t,n);case"exponential":return toExponential(t,n);case"engineering":return toEngineering(t,n);case"bin":return formatBigNumberToBase(t,2,s);case"oct":return formatBigNumberToBase(t,8,s);case"hex":return formatBigNumberToBase(t,16,s);case"auto":{var o=_toNumberOrDefault(r?.lowerExp,-3),l=_toNumberOrDefault(r?.upperExp,5);if(t.isZero())return"0";var u,h=t.toSignificantDigits(n),c=h.e;return c>=o&&c<l?u=h.toFixed():u=toExponential(t,n),u.replace(/((\.\d*?)(0+))($|e)/,function(){var f=arguments[2],d=arguments[4];return f!=="."?f+d:d})}default:throw new Error('Unknown notation "'+a+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function toEngineering(t,r){var a=t.e,n=a%3===0?a:a<0?a-3-a%3:a-a%3,s=t.mul(Math.pow(10,-n)),o=s.toPrecision(r);if(o.includes("e")){var l=t.constructor;o=new l(o).toFixed()}return o+"e"+(a>=0?"+":"")+n.toString()}function toExponential(t,r){return r!==void 0?t.toExponential(r-1):t.toExponential()}function toFixed(t,r){return t.toFixed(r)}function _toNumberOrDefault(t,r){return isNumber(t)?t:isBigNumber(t)?t.toNumber():r}function endsWith(t,r){var a=t.length-r.length,n=t.length;return t.substring(a,n)===r}function format$1(t,r){var a=_format(t,r);return r&&typeof r=="object"&&"truncate"in r&&a.length>r.truncate?a.substring(0,r.truncate-3)+"...":a}function _format(t,r){if(typeof t=="number")return format$3(t,r);if(isBigNumber(t))return format$2(t,r);if(looksLikeFraction(t))return!r||r.fraction!=="decimal"?"".concat(t.s*t.n,"/").concat(t.d):t.toString();if(Array.isArray(t))return formatArray(t,r);if(isString(t))return stringify(t);if(typeof t=="function")return t.syntax?String(t.syntax):"function";if(t&&typeof t=="object"){if(typeof t.format=="function")return t.format(r);if(t&&t.toString(r)!=={}.toString())return t.toString(r);var a=Object.keys(t).map(n=>stringify(n)+": "+format$1(t[n],r));return"{"+a.join(", ")+"}"}return String(t)}function stringify(t){for(var r=String(t),a="",n=0;n<r.length;){var s=r.charAt(n);a+=s in controlCharacters?controlCharacters[s]:s,n++}return'"'+a+'"'}var controlCharacters={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"};function escape$1(t){var r=String(t);return r=r.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),r}function formatArray(t,r){if(Array.isArray(t)){for(var a="[",n=t.length,s=0;s<n;s++)s!==0&&(a+=", "),a+=formatArray(t[s],r);return a+="]",a}else return format$1(t,r)}function looksLikeFraction(t){return t&&typeof t=="object"&&typeof t.s=="bigint"&&typeof t.n=="bigint"&&typeof t.d=="bigint"||!1}function compareText$1(t,r){if(!isString(t))throw new TypeError("Unexpected type of argument in function compareText (expected: string or Array or Matrix, actual: "+typeOf$1(t)+", index: 0)");if(!isString(r))throw new TypeError("Unexpected type of argument in function compareText (expected: string or Array or Matrix, actual: "+typeOf$1(r)+", index: 1)");return t===r?0:t>r?1:-1}function DimensionError(t,r,a){if(!(this instanceof DimensionError))throw new SyntaxError("Constructor must be called with the new operator");this.actual=t,this.expected=r,this.relation=a,this.message="Dimension mismatch ("+(Array.isArray(t)?"["+t.join(", ")+"]":t)+" "+(this.relation||"!=")+" "+(Array.isArray(r)?"["+r.join(", ")+"]":r)+")",this.stack=new Error().stack}DimensionError.prototype=new RangeError;DimensionError.prototype.constructor=RangeError;DimensionError.prototype.name="DimensionError";DimensionError.prototype.isDimensionError=!0;function IndexError(t,r,a){if(!(this instanceof IndexError))throw new SyntaxError("Constructor must be called with the new operator");this.index=t,arguments.length<3?(this.min=0,this.max=r):(this.min=r,this.max=a),this.min!==void 0&&this.index<this.min?this.message="Index out of range ("+this.index+" < "+this.min+")":this.max!==void 0&&this.index>=this.max?this.message="Index out of range ("+this.index+" > "+(this.max-1)+")":this.message="Index out of range ("+this.index+")",this.stack=new Error().stack}IndexError.prototype=new RangeError;IndexError.prototype.constructor=RangeError;IndexError.prototype.name="IndexError";IndexError.prototype.isIndexError=!0;function arraySize(t){for(var r=[];Array.isArray(t);)r.push(t.length),t=t[0];return r}function _validate(t,r,a){var n,s=t.length;if(s!==r[a])throw new DimensionError(s,r[a]);if(a<r.length-1){var o=a+1;for(n=0;n<s;n++){var l=t[n];if(!Array.isArray(l))throw new DimensionError(r.length-1,r.length,"<");_validate(t[n],r,o)}}else for(n=0;n<s;n++)if(Array.isArray(t[n]))throw new DimensionError(r.length+1,r.length,">")}function validate(t,r){var a=r.length===0;if(a){if(Array.isArray(t))throw new DimensionError(t.length,0)}else _validate(t,r,0)}function validateIndexSourceSize(t,r){var a=t.isMatrix?t._size:arraySize(t),n=r._sourceSize;n.forEach((s,o)=>{if(s!==null&&s!==a[o])throw new DimensionError(s,a[o])})}function validateIndex(t,r){if(t!==void 0){if(!isNumber(t)||!isInteger$1(t))throw new TypeError("Index must be an integer (value: "+t+")");if(t<0||typeof r=="number"&&t>=r)throw new IndexError(t,r)}}function isEmptyIndex(t){for(var r=0;r<t._dimensions.length;++r){var a=t._dimensions[r];if(a._data&&isArray(a._data)){if(a._size[0]===0)return!0}else if(a.isRange){if(a.start===a.end)return!0}else if(isString(a)&&a.length===0)return!0}return!1}function resize$1(t,r,a){if(!Array.isArray(r))throw new TypeError("Array expected");if(r.length===0)throw new Error("Resizing to scalar is not supported");r.forEach(function(s){if(!isNumber(s)||!isInteger$1(s)||s<0)throw new TypeError("Invalid size, must contain positive integers (size: "+format$1(r)+")")}),(isNumber(t)||isBigNumber(t))&&(t=[t]);var n=a!==void 0?a:0;return _resize(t,r,0,n),t}function _resize(t,r,a,n){var s,o,l=t.length,u=r[a],h=Math.min(l,u);if(t.length=u,a<r.length-1){var c=a+1;for(s=0;s<h;s++)o=t[s],Array.isArray(o)||(o=[o],t[s]=o),_resize(o,r,c,n);for(s=h;s<u;s++)o=[],t[s]=o,_resize(o,r,c,n)}else{for(s=0;s<h;s++)for(;Array.isArray(t[s]);)t[s]=t[s][0];for(s=h;s<u;s++)t[s]=n}}function reshape$1(t,r){var a=flatten$1(t,!0),n=a.length;if(!Array.isArray(t)||!Array.isArray(r))throw new TypeError("Array expected");if(r.length===0)throw new DimensionError(0,n,"!=");r=processSizesWildcard(r,n);var s=product$1(r);if(n!==s)throw new DimensionError(s,n,"!=");try{return _reshape(a,r)}catch(o){throw o instanceof DimensionError?new DimensionError(s,n,"!="):o}}function processSizesWildcard(t,r){var a=product$1(t),n=t.slice(),s=-1,o=t.indexOf(s),l=t.indexOf(s,o+1)>=0;if(l)throw new Error("More than one wildcard in sizes");var u=o>=0,h=r%a===0;if(u)if(h)n[o]=-r/a;else throw new Error("Could not replace wildcard, since "+r+" is no multiple of "+-a);return n}function product$1(t){return t.reduce((r,a)=>r*a,1)}function _reshape(t,r){for(var a=t,n,s=r.length-1;s>0;s--){var o=r[s];n=[];for(var l=a.length/o,u=0;u<l;u++)n.push(a.slice(u*o,(u+1)*o));a=n}return a}function squeeze$1(t,r){for(var a=arraySize(t);Array.isArray(t)&&t.length===1;)t=t[0],a.shift();for(var n=a.length;a[n-1]===1;)n--;return n<a.length&&(t=_squeeze(t,n,0),a.length=n),t}function _squeeze(t,r,a){var n,s;if(a<r){var o=a+1;for(n=0,s=t.length;n<s;n++)t[n]=_squeeze(t[n],r,o)}else for(;Array.isArray(t);)t=t[0];return t}function unsqueeze(t,r,a,n){var s=n||arraySize(t);if(a)for(var o=0;o<a;o++)t=[t],s.unshift(1);for(t=_unsqueeze(t,r,0);s.length<r;)s.push(1);return t}function _unsqueeze(t,r,a){var n,s;if(Array.isArray(t)){var o=a+1;for(n=0,s=t.length;n<s;n++)t[n]=_unsqueeze(t[n],r,o)}else for(var l=a;l<r;l++)t=[t];return t}function flatten$1(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!Array.isArray(t))return t;if(typeof r!="boolean")throw new TypeError("Boolean expected for second argument of flatten");var a=[];return r?s(t):n(t),a;function n(o){for(var l=0;l<o.length;l++){var u=o[l];Array.isArray(u)?n(u):a.push(u)}}function s(o){if(Array.isArray(o[0]))for(var l=0;l<o.length;l++)s(o[l]);else for(var u=0;u<o.length;u++)a.push(o[u])}}function map$1(t,r){return Array.prototype.map.call(t,r)}function forEach$1(t,r){Array.prototype.forEach.call(t,r)}function filter$1(t,r){if(arraySize(t).length!==1)throw new Error("Only one dimensional matrices supported");return Array.prototype.filter.call(t,r)}function filterRegExp(t,r){if(arraySize(t).length!==1)throw new Error("Only one dimensional matrices supported");return Array.prototype.filter.call(t,a=>r.test(a))}function join(t,r){return Array.prototype.join.call(t,r)}function identify(t){if(!Array.isArray(t))throw new TypeError("Array input expected");if(t.length===0)return t;var r=[],a=0;r[0]={value:t[0],identifier:0};for(var n=1;n<t.length;n++)t[n]===t[n-1]?a++:a=0,r.push({value:t[n],identifier:a});return r}function generalize(t){if(!Array.isArray(t))throw new TypeError("Array input expected");if(t.length===0)return t;for(var r=[],a=0;a<t.length;a++)r.push(t[a].value);return r}function getArrayDataType(t,r){for(var a,n=0,s=0;s<t.length;s++){var o=t[s],l=Array.isArray(o);if(s===0&&l&&(n=o.length),l&&o.length!==n)return;var u=l?getArrayDataType(o,r):r(o);if(a===void 0)a=u;else if(a!==u)return"mixed"}return a}function concatRecursive(t,r,a,n){if(n<a){if(t.length!==r.length)throw new DimensionError(t.length,r.length);for(var s=[],o=0;o<t.length;o++)s[o]=concatRecursive(t[o],r[o],a,n+1);return s}else return t.concat(r)}function concat$1(){var t=Array.prototype.slice.call(arguments,0,-1),r=Array.prototype.slice.call(arguments,-1);if(t.length===1)return t[0];if(t.length>1)return t.slice(1).reduce(function(a,n){return concatRecursive(a,n,r,0)},t[0]);throw new Error("Wrong number of arguments in function concat")}function broadcastSizes(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];for(var n=r.map(p=>p.length),s=Math.max(...n),o=new Array(s).fill(null),l=0;l<r.length;l++)for(var u=r[l],h=n[l],c=0;c<h;c++){var f=s-h+c;u[c]>o[f]&&(o[f]=u[c])}for(var d=0;d<r.length;d++)checkBroadcastingRules(r[d],o);return o}function checkBroadcastingRules(t,r){for(var a=r.length,n=t.length,s=0;s<n;s++){var o=a-n+s;if(t[s]<r[o]&&t[s]>1||t[s]>r[o])throw new Error("shape mismatch: mismatch is found in arg with shape (".concat(t,") not possible to broadcast dimension ").concat(n," with size ").concat(t[s]," to size ").concat(r[o]))}}function broadcastTo(t,r){var a=arraySize(t);if(deepStrictEqual(a,r))return t;checkBroadcastingRules(a,r);var n=broadcastSizes(a,r),s=n.length,o=[...Array(s-a.length).fill(1),...a],l=clone$1(t);a.length<s&&(l=reshape$1(l,o),a=arraySize(l));for(var u=0;u<s;u++)a[u]<n[u]&&(l=stretch(l,n[u],u),a=arraySize(l));return l}function stretch(t,r,a){return concat$1(...Array(r).fill(t),a)}function get(t,r){if(!Array.isArray(t))throw new Error("Array expected");var a=arraySize(t);if(r.length!==a.length)throw new DimensionError(r.length,a.length);for(var n=0;n<r.length;n++)validateIndex(r[n],a[n]);return r.reduce((s,o)=>s[o],t)}function deepMap$1(t,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(t.length===0)return[];if(a)return o(t);var n=[];return s(t,0);function s(l,u){if(Array.isArray(l)){for(var h=l.length,c=Array(h),f=0;f<h;f++)n[u]=f,c[f]=s(l[f],u+1);return c}else return r(l,n.slice(0,u),t)}function o(l){if(Array.isArray(l)){for(var u=l.length,h=Array(u),c=0;c<u;c++)h[c]=o(l[c]);return h}else return r(l)}}function deepForEach$1(t,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(t.length===0)return;if(a){o(t);return}var n=[];s(t,0);function s(l,u){if(Array.isArray(l))for(var h=l.length,c=0;c<h;c++)n[u]=c,s(l[c],u+1);else r(l,n.slice(0,u),t)}function o(l){if(Array.isArray(l))for(var u=l.length,h=0;h<u;h++)o(l[h]);else r(l)}}function clone$1(t){return _extends([],t)}function optimizeCallback(t,r,a,n){if(typedFunction.isTypedFunction(t)){var s;if(n)s=1;else{var o=r.isMatrix?r.size():arraySize(r),l=o.length?o[o.length-1]===0:!0;if(l)return{isUnary:n,fn:t};var u=o.map(()=>0),h=r.isMatrix?r.get(u):get(r,u);s=_findNumberOfArgumentsTyped(t,h,u,r)}var c;if(r.isMatrix&&r.dataType!=="mixed"&&r.dataType!==void 0){var f=_findSingleSignatureWithArity(t,s);c=f!==void 0?f:t}else c=t;return s>=1&&s<=3?{isUnary:s===1,fn:function(){for(var p=arguments.length,v=new Array(p),y=0;y<p;y++)v[y]=arguments[y];return _tryFunctionWithArgs(c,v.slice(0,s),a,t.name)}}:{isUnary:!1,fn:function(){for(var p=arguments.length,v=new Array(p),y=0;y<p;y++)v[y]=arguments[y];return _tryFunctionWithArgs(c,v,a,t.name)}}}return n===void 0?{isUnary:_findIfCallbackIsUnary(t),fn:t}:{isUnary:n,fn:t}}function _findSingleSignatureWithArity(t,r){var a=[];if(Object.entries(t.signatures).forEach(n=>{var[s,o]=n;s.split(",").length===r&&a.push(o)}),a.length===1)return a[0]}function _findIfCallbackIsUnary(t){if(t.length!==1)return!1;var r=t.toString();if(/arguments/.test(r))return!1;var a=r.match(/\(.*?\)/);return!/\.\.\./.test(a)}function _findNumberOfArgumentsTyped(t,r,a,n){for(var s=[r,a,n],o=3;o>0;o--){var l=s.slice(0,o);if(typedFunction.resolve(t,l)!==null)return o}}function _tryFunctionWithArgs(t,r,a,n){try{return t(...r)}catch(s){_createCallbackError(s,r,a,n)}}function _createCallbackError(t,r,a,n){var s;if(t instanceof TypeError&&((s=t.data)===null||s===void 0?void 0:s.category)==="wrongType"){var o=[];throw o.push("value: ".concat(typeOf$1(r[0]))),r.length>=2&&o.push("index: ".concat(typeOf$1(r[1]))),r.length>=3&&o.push("array: ".concat(typeOf$1(r[2]))),new TypeError("Function ".concat(a," cannot apply callback arguments ")+"".concat(n,"(").concat(o.join(", "),") at index ").concat(JSON.stringify(r[1])))}else throw new TypeError("Function ".concat(a," cannot apply callback arguments ")+"to function ".concat(n,": ").concat(t.message))}var name$4V="DenseMatrix",dependencies$4V=["Matrix","config"],createDenseMatrixClass=factory(name$4V,dependencies$4V,t=>{var{Matrix:r,config:a}=t;function n(d,p){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(p&&!isString(p))throw new Error("Invalid datatype: "+p);if(isMatrix(d))d.type==="DenseMatrix"?(this._data=clone$3(d._data),this._size=clone$3(d._size),this._datatype=p||d._datatype):(this._data=d.toArray(),this._size=d.size(),this._datatype=p||d._datatype);else if(d&&isArray(d.data)&&isArray(d.size))this._data=d.data,this._size=d.size,validate(this._data,this._size),this._datatype=p||d.datatype;else if(isArray(d))this._data=f(d),this._size=arraySize(this._data),validate(this._data,this._size),this._datatype=p;else{if(d)throw new TypeError("Unsupported type of data ("+typeOf$1(d)+")");this._data=[],this._size=[0],this._datatype=p}}n.prototype=new r,n.prototype.createDenseMatrix=function(d,p){return new n(d,p)},Object.defineProperty(n,"name",{value:"DenseMatrix"}),n.prototype.constructor=n,n.prototype.type="DenseMatrix",n.prototype.isDenseMatrix=!0,n.prototype.getDataType=function(){return getArrayDataType(this._data,typeOf$1)},n.prototype.storage=function(){return"dense"},n.prototype.datatype=function(){return this._datatype},n.prototype.create=function(d,p){return new n(d,p)},n.prototype.subset=function(d,p,v){switch(arguments.length){case 1:return s(this,d);case 2:case 3:return l(this,d,p,v);default:throw new SyntaxError("Wrong number of arguments")}},n.prototype.get=function(d){return get(this._data,d)},n.prototype.set=function(d,p,v){if(!isArray(d))throw new TypeError("Array expected");if(d.length<this._size.length)throw new DimensionError(d.length,this._size.length,"<");var y,b,_,N=d.map(function(C){return C+1});c(this,N,v);var M=this._data;for(y=0,b=d.length-1;y<b;y++)_=d[y],validateIndex(_,M.length),M=M[_];return _=d[d.length-1],validateIndex(_,M.length),M[_]=p,this};function s(d,p){if(!isIndex(p))throw new TypeError("Invalid index");var v=a.legacySubset?p.size().every(w=>w===1):p.isScalar();if(v)return d.get(p.min());var y=p.size();if(y.length!==d._size.length)throw new DimensionError(y.length,d._size.length);for(var b=p.min(),_=p.max(),N=0,M=d._size.length;N<M;N++)validateIndex(b[N],d._size[N]),validateIndex(_[N],d._size[N]);var C=new n,$=o(d._data,p);return C._size=$.size,C._datatype=d._datatype,C._data=$.data,a.legacySubset?C.reshape(p.size()):C}function o(d,p){var v=p.size().length-1,y=Array(v);return{data:b(d),size:y.filter(_=>_!==null)};function b(_){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,M=p.dimension(N);function C($,w){return isNumber($)?w($):$.map(w).valueOf()}return isNumber(M)?y[N]=null:y[N]=M.size()[0],N<v?C(M,$=>(validateIndex($,_.length),b(_[$],N+1))):C(M,$=>(validateIndex($,_.length),_[$]))}}function l(d,p,v,y){if(!p||p.isIndex!==!0)throw new TypeError("Invalid index");var b=p.size(),_=p.isScalar(),N;if(isMatrix(v)?(N=v.size(),v=v.valueOf()):N=arraySize(v),_){if(N.length!==0)throw new TypeError("Scalar expected");d.set(p.min(),v,y)}else{if(!deepStrictEqual(N,b)){if(N.length===0)v=broadcastTo([v],b);else try{v=broadcastTo(v,b)}catch{}N=arraySize(v)}if(b.length<d._size.length)throw new DimensionError(b.length,d._size.length,"<");if(N.length<b.length){for(var M=0,C=0;b[M]===1&&N[M]===1;)M++;for(;b[M]===1;)C++,M++;v=unsqueeze(v,b.length,C,N)}if(!deepStrictEqual(b,N))throw new DimensionError(b,N,">");var $=p.max().map(function(w){return w+1});c(d,$,y),u(d._data,p,v)}return d}function u(d,p,v){var y=p.size().length-1;b(d,v);function b(_,N){var M=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,C=p.dimension(M),$=(A,X)=>{validateIndex(A,_.length),b(_[A],N[X[0]],M+1)},w=(A,X)=>{validateIndex(A,_.length),_[A]=N[X[0]]};M<y?isNumber(C)?$(C,[0]):C.forEach($):isNumber(C)?w(C,[0]):C.forEach(w)}}n.prototype.resize=function(d,p,v){if(!isCollection(d))throw new TypeError("Array or Matrix expected");var y=d.valueOf().map(_=>Array.isArray(_)&&_.length===1?_[0]:_),b=v?this.clone():this;return h(b,y,p)};function h(d,p,v){if(p.length===0){for(var y=d._data;isArray(y);)y=y[0];return y}return d._size=p.slice(0),d._data=resize$1(d._data,d._size,v),d}n.prototype.reshape=function(d,p){var v=p?this.clone():this;v._data=reshape$1(v._data,d);var y=v._size.reduce((b,_)=>b*_);return v._size=processSizesWildcard(d,y),v};function c(d,p,v){for(var y=d._size.slice(0),b=!1;y.length<p.length;)y.push(0),b=!0;for(var _=0,N=p.length;_<N;_++)p[_]>y[_]&&(y[_]=p[_],b=!0);b&&h(d,y,v)}n.prototype.clone=function(){var d=new n({data:clone$3(this._data),size:clone$3(this._size),datatype:this._datatype});return d},n.prototype.size=function(){return this._size.slice(0)},n.prototype.map=function(d){var p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,v=this,y=v._size.length-1;if(y<0)return v.clone();var b=optimizeCallback(d,v,"map",p),_=b.fn,N=v.create(void 0,v._datatype);if(N._size=v._size,p||b.isUnary)return N._data=X(v._data),N;if(y===0){for(var M=v.valueOf(),C=Array(M.length),$=0;$<M.length;$++)C[$]=_(M[$],[$],v);return N._data=C,N}var w=[];return N._data=A(v._data),N;function A(O){var G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,R=Array(O.length);if(G<y)for(var B=0;B<O.length;B++)w[G]=B,R[B]=A(O[B],G+1);else for(var F=0;F<O.length;F++)w[G]=F,R[F]=_(O[F],w.slice(),v);return R}function X(O){var G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,R=Array(O.length);if(G<y)for(var B=0;B<O.length;B++)R[B]=X(O[B],G+1);else for(var F=0;F<O.length;F++)R[F]=_(O[F]);return R}},n.prototype.forEach=function(d){var p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,v=this,y=v._size.length-1;if(y<0)return;var b=optimizeCallback(d,v,"map",p),_=b.fn;if(p||b.isUnary){$(v._data);return}if(y===0){for(var N=0;N<v._data.length;N++)_(v._data[N],[N],v);return}var M=[];C(v._data);function C(w){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(A<y)for(var X=0;X<w.length;X++)M[A]=X,C(w[X],A+1);else for(var O=0;O<w.length;O++)M[A]=O,_(w[O],M.slice(),v)}function $(w){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(A<y)for(var X=0;X<w.length;X++)$(w[X],A+1);else for(var O=0;O<w.length;O++)_(w[O])}},n.prototype[Symbol.iterator]=function*(){var d=this._size.length-1;if(!(d<0)){if(d===0){for(var p=0;p<this._data.length;p++)yield{value:this._data[p],index:[p]};return}for(var v=Array(d+1).fill(0),y=this._size.reduce((C,$)=>C*$,1),b=0;b<y;b++){for(var _=this._data,N=0;N<d;N++)_=_[v[N]];yield{value:_[v[d]],index:v.slice()};for(var M=d;M>=0&&(v[M]++,!(v[M]<this._size[M]));M--)v[M]=0}}},n.prototype.rows=function(){var d=[],p=this.size();if(p.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");var v=this._data;for(var y of v)d.push(new n([y],this._datatype));return d},n.prototype.columns=function(){var d=this,p=[],v=this.size();if(v.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");for(var y=this._data,b=function(M){var C=y.map($=>[$[M]]);p.push(new n(C,d._datatype))},_=0;_<v[1];_++)b(_);return p},n.prototype.toArray=function(){return clone$3(this._data)},n.prototype.valueOf=function(){return this._data},n.prototype.format=function(d){return format$1(this._data,d)},n.prototype.toString=function(){return format$1(this._data)},n.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},n.prototype.diagonal=function(d){if(d){if(isBigNumber(d)&&(d=d.toNumber()),!isNumber(d)||!isInteger$1(d))throw new TypeError("The parameter k must be an integer number")}else d=0;for(var p=d>0?d:0,v=d<0?-d:0,y=this._size[0],b=this._size[1],_=Math.min(y-v,b-p),N=[],M=0;M<_;M++)N[M]=this._data[M+v][M+p];return new n({data:N,size:[_],datatype:this._datatype})},n.diagonal=function(d,p,v,y){if(!isArray(d))throw new TypeError("Array expected, size parameter");if(d.length!==2)throw new Error("Only two dimensions matrix are supported");if(d=d.map(function(O){if(isBigNumber(O)&&(O=O.toNumber()),!isNumber(O)||!isInteger$1(O)||O<1)throw new Error("Size values must be positive integers");return O}),v){if(isBigNumber(v)&&(v=v.toNumber()),!isNumber(v)||!isInteger$1(v))throw new TypeError("The parameter k must be an integer number")}else v=0;var b=v>0?v:0,_=v<0?-v:0,N=d[0],M=d[1],C=Math.min(N-_,M-b),$;if(isArray(p)){if(p.length!==C)throw new Error("Invalid value array length");$=function(G){return p[G]}}else if(isMatrix(p)){var w=p.size();if(w.length!==1||w[0]!==C)throw new Error("Invalid matrix length");$=function(G){return p.get([G])}}else $=function(){return p};y||(y=isBigNumber($(0))?$(0).mul(0):0);var A=[];if(d.length>0){A=resize$1(A,d,y);for(var X=0;X<C;X++)A[X+_][X+b]=$(X)}return new n({data:A,size:[N,M]})},n.fromJSON=function(d){return new n(d)},n.prototype.swapRows=function(d,p){if(!isNumber(d)||!isInteger$1(d)||!isNumber(p)||!isInteger$1(p))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return validateIndex(d,this._size[0]),validateIndex(p,this._size[0]),n._swapRows(d,p,this._data),this},n._swapRows=function(d,p,v){var y=v[d];v[d]=v[p],v[p]=y};function f(d){return isMatrix(d)?f(d.valueOf()):isArray(d)?d.map(f):d}return n},{isClass:!0}),name$4U="clone",dependencies$4U=["typed"],createClone=factory(name$4U,dependencies$4U,t=>{var{typed:r}=t;return r(name$4U,{any:clone$3})});function _switch$1(t){var r=t.length,a=t[0].length,n,s,o=[];for(s=0;s<a;s++){var l=[];for(n=0;n<r;n++)l.push(t[n][s]);o.push(l)}return o}function containsCollections(t){for(var r=0;r<t.length;r++)if(isCollection(t[r]))return!0;return!1}function deepForEach(t,r){isMatrix(t)?t.forEach(a=>r(a),!1,!0):deepForEach$1(t,r,!0)}function deepMap(t,r,a){if(!a)return isMatrix(t)?t.map(s=>r(s),!1,!0):deepMap$1(t,r,!0);var n=s=>s===0?s:r(s);return isMatrix(t)?t.map(s=>n(s),!1,!0):deepMap$1(t,n,!0)}function reduce(t,r,a){var n=Array.isArray(t)?arraySize(t):t.size();if(r<0||r>=n.length)throw new IndexError(r,n.length);return isMatrix(t)?t.create(_reduce(t.valueOf(),r,a),t.datatype()):_reduce(t,r,a)}function _reduce(t,r,a){var n,s,o,l;if(r<=0)if(Array.isArray(t[0])){for(l=_switch$1(t),s=[],n=0;n<l.length;n++)s[n]=_reduce(l[n],r-1,a);return s}else{for(o=t[0],n=1;n<t.length;n++)o=a(o,t[n]);return o}else{for(s=[],n=0;n<t.length;n++)s[n]=_reduce(t[n],r-1,a);return s}}function scatter(t,r,a,n,s,o,l,u,h,c,f){var d=t._values,p=t._index,v=t._ptr,y,b,_,N;if(n)for(b=v[r],_=v[r+1],y=b;y<_;y++)N=p[y],a[N]!==o?(a[N]=o,l.push(N),n[N]=d[y]):(n[N]=u(n[N],d[y]),s[N]=o);else for(b=v[r],_=v[r+1],y=b;y<_;y++)N=p[y],a[N]!==o?(a[N]=o,l.push(N)):s[N]=o}var name$4T="isInteger",dependencies$4T=["typed","equal"],createIsInteger=factory(name$4T,dependencies$4T,t=>{var{typed:r,equal:a}=t;return r(name$4T,{number:n=>Number.isFinite(n)?a(n,Math.round(n)):!1,BigNumber:n=>n.isFinite()?a(n.round(),n):!1,bigint:n=>!0,Fraction:n=>n.d===1n,"Array | Matrix":r.referToSelf(n=>s=>deepMap(s,n))})}),n1$4="number",n2$2="number, number";function absNumber(t){return Math.abs(t)}absNumber.signature=n1$4;function addNumber(t,r){return t+r}addNumber.signature=n2$2;function subtractNumber(t,r){return t-r}subtractNumber.signature=n2$2;function multiplyNumber(t,r){return t*r}multiplyNumber.signature=n2$2;function unaryMinusNumber(t){return-t}unaryMinusNumber.signature=n1$4;function unaryPlusNumber(t){return t}unaryPlusNumber.signature=n1$4;function cbrtNumber(t){return cbrt$2(t)}cbrtNumber.signature=n1$4;function cubeNumber(t){return t*t*t}cubeNumber.signature=n1$4;function expNumber(t){return Math.exp(t)}expNumber.signature=n1$4;function expm1Number(t){return expm1$1(t)}expm1Number.signature=n1$4;function lcmNumber(t,r){if(!isInteger$1(t)||!isInteger$1(r))throw new Error("Parameters in function lcm must be integer numbers");if(t===0||r===0)return 0;for(var a,n=t*r;r!==0;)a=r,r=t%a,t=a;return Math.abs(n/t)}lcmNumber.signature=n2$2;function logNumber(t,r){return r?Math.log(t)/Math.log(r):Math.log(t)}function log10Number(t){return log10$2(t)}log10Number.signature=n1$4;function log2Number(t){return log2$2(t)}log2Number.signature=n1$4;function nthRootNumber(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2,a=r<0;if(a&&(r=-r),r===0)throw new Error("Root must be non-zero");if(t<0&&Math.abs(r)%2!==1)throw new Error("Root must be odd when a is negative.");if(t===0)return a?1/0:0;if(!isFinite(t))return a?0:t;var n=Math.pow(Math.abs(t),1/r);return n=t<0?-n:n,a?1/n:n}function signNumber(t){return sign$2(t)}signNumber.signature=n1$4;function squareNumber(t){return t*t}squareNumber.signature=n1$4;function xgcdNumber(t,r){var a,n,s,o=0,l=1,u=1,h=0;if(!isInteger$1(t)||!isInteger$1(r))throw new Error("Parameters in function xgcd must be integer numbers");for(;r;)n=Math.floor(t/r),s=t-n*r,a=o,o=l-n*o,l=a,a=u,u=h-n*u,h=a,t=r,r=s;var c;return t<0?c=[-t,-l,-h]:c=[t,t?l:0,h],c}xgcdNumber.signature=n2$2;function powNumber(t,r){return t*t<1&&r===1/0||t*t>1&&r===-1/0?0:Math.pow(t,r)}powNumber.signature=n2$2;function roundNumber(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!isInteger$1(r)||r<0||r>15)throw new Error("Number of decimals in function round must be an integer from 0 to 15 inclusive");return parseFloat(toFixed$1(t,r))}var n1$3="number",n2$1="number, number";function bitAndNumber(t,r){if(!isInteger$1(t)||!isInteger$1(r))throw new Error("Integers expected in function bitAnd");return t&r}bitAndNumber.signature=n2$1;function bitNotNumber(t){if(!isInteger$1(t))throw new Error("Integer expected in function bitNot");return~t}bitNotNumber.signature=n1$3;function bitOrNumber(t,r){if(!isInteger$1(t)||!isInteger$1(r))throw new Error("Integers expected in function bitOr");return t|r}bitOrNumber.signature=n2$1;function bitXorNumber(t,r){if(!isInteger$1(t)||!isInteger$1(r))throw new Error("Integers expected in function bitXor");return t^r}bitXorNumber.signature=n2$1;function leftShiftNumber(t,r){if(!isInteger$1(t)||!isInteger$1(r))throw new Error("Integers expected in function leftShift");return t<<r}leftShiftNumber.signature=n2$1;function rightArithShiftNumber(t,r){if(!isInteger$1(t)||!isInteger$1(r))throw new Error("Integers expected in function rightArithShift");return t>>r}rightArithShiftNumber.signature=n2$1;function rightLogShiftNumber(t,r){if(!isInteger$1(t)||!isInteger$1(r))throw new Error("Integers expected in function rightLogShift");return t>>>r}rightLogShiftNumber.signature=n2$1;function product(t,r){if(r<t)return 1;if(r===t)return r;var a=r+t>>1;return product(t,a)*product(a+1,r)}function combinationsNumber(t,r){if(!isInteger$1(t)||t<0)throw new TypeError("Positive integer value expected in function combinations");if(!isInteger$1(r)||r<0)throw new TypeError("Positive integer value expected in function combinations");if(r>t)throw new TypeError("k must be less than or equal to n");for(var a=t-r,n=1,s=r<a?a+1:r+1,o=2,l=r<a?r:a,u=s;u<=t;++u)for(n*=u;o<=l&&n%o===0;)n/=o,++o;return o<=l&&(n/=product(o,l)),n}combinationsNumber.signature="number, number";var pi$1=Math.PI,tau$1=2*Math.PI,e$1=Math.E,phi$1=1.618033988749895,n1$2="number",n2="number, number";function notNumber(t){return!t}notNumber.signature=n1$2;function orNumber(t,r){return!!(t||r)}orNumber.signature=n2;function xorNumber(t,r){return!!t!=!!r}xorNumber.signature=n2;function andNumber(t,r){return!!(t&&r)}andNumber.signature=n2;function gammaNumber(t){var r;if(isInteger$1(t))return t<=0?Number.isFinite(t)?1/0:NaN:t>171?1/0:product(1,t-1);if(t<.5)return Math.PI/(Math.sin(Math.PI*t)*gammaNumber(1-t));if(t>=171.35)return 1/0;if(t>85){var a=t*t,n=a*t,s=n*t,o=s*t;return Math.sqrt(2*Math.PI/t)*Math.pow(t/Math.E,t)*(1+1/(12*t)+1/(288*a)-139/(51840*n)-571/(2488320*s)+163879/(209018880*o)+5246819/(75246796800*o*t))}--t,r=gammaP[0];for(var l=1;l<gammaP.length;++l)r+=gammaP[l]/(t+l);var u=t+gammaG+.5;return Math.sqrt(2*Math.PI)*Math.pow(u,t+.5)*Math.exp(-u)*r}gammaNumber.signature="number";var gammaG=4.7421875,gammaP=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22],lnSqrt2PI=.9189385332046728,lgammaG=5,lgammaN=7,lgammaSeries=[1.000000000190015,76.18009172947146,-86.50532032941678,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18];function lgammaNumber(t){if(t<0)return NaN;if(t===0)return 1/0;if(!Number.isFinite(t))return t;if(t<.5)return Math.log(Math.PI/Math.sin(Math.PI*t))-lgammaNumber(1-t);t=t-1;for(var r=t+lgammaG+.5,a=lgammaSeries[0],n=lgammaN-1;n>=1;n--)a+=lgammaSeries[n]/(t+n);return lnSqrt2PI+(t+.5)*Math.log(r)-r+Math.log(a)}lgammaNumber.signature="number";var n1$1="number";function acoshNumber(t){return acosh$2(t)}acoshNumber.signature=n1$1;function acotNumber(t){return Math.atan(1/t)}acotNumber.signature=n1$1;function acothNumber(t){return Number.isFinite(t)?(Math.log((t+1)/t)+Math.log(t/(t-1)))/2:0}acothNumber.signature=n1$1;function acscNumber(t){return Math.asin(1/t)}acscNumber.signature=n1$1;function acschNumber(t){var r=1/t;return Math.log(r+Math.sqrt(r*r+1))}acschNumber.signature=n1$1;function asecNumber(t){return Math.acos(1/t)}asecNumber.signature=n1$1;function asechNumber(t){var r=1/t,a=Math.sqrt(r*r-1);return Math.log(a+r)}asechNumber.signature=n1$1;function asinhNumber(t){return asinh$2(t)}asinhNumber.signature=n1$1;function atanhNumber(t){return atanh$2(t)}atanhNumber.signature=n1$1;function cotNumber(t){return 1/Math.tan(t)}cotNumber.signature=n1$1;function cothNumber(t){var r=Math.exp(2*t);return(r+1)/(r-1)}cothNumber.signature=n1$1;function cscNumber(t){return 1/Math.sin(t)}cscNumber.signature=n1$1;function cschNumber(t){return t===0?Number.POSITIVE_INFINITY:Math.abs(2/(Math.exp(t)-Math.exp(-t)))*sign$2(t)}cschNumber.signature=n1$1;function secNumber(t){return 1/Math.cos(t)}secNumber.signature=n1$1;function sechNumber(t){return 2/(Math.exp(t)+Math.exp(-t))}sechNumber.signature=n1$1;function sinhNumber(t){return sinh$3(t)}sinhNumber.signature=n1$1;var n1="number";function isNegativeNumber(t){return t<0}isNegativeNumber.signature=n1;function isPositiveNumber(t){return t>0}isPositiveNumber.signature=n1;function isNaNNumber(t){return Number.isNaN(t)}isNaNNumber.signature=n1;function nearlyEqual(t,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e-9,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;if(a<=0)throw new Error("Relative tolerance must be greater than 0");if(n<0)throw new Error("Absolute tolerance must be at least 0");return t.isNaN()||r.isNaN()?!1:!t.isFinite()||!r.isFinite()?t.eq(r):t.eq(r)?!0:t.minus(r).abs().lte(t.constructor.max(t.constructor.max(t.abs(),r.abs()).mul(a),n))}var name$4S="isNegative",dependencies$4S=["typed","config"],createIsNegative=factory(name$4S,dependencies$4S,t=>{var{typed:r,config:a}=t;return r(name$4S,{number:n=>nearlyEqual$1(n,0,a.relTol,a.absTol)?!1:isNegativeNumber(n),BigNumber:n=>nearlyEqual(n,new n.constructor(0),a.relTol,a.absTol)?!1:n.isNeg()&&!n.isZero()&&!n.isNaN(),bigint:n=>n<0n,Fraction:n=>n.s<0n,Unit:r.referToSelf(n=>s=>r.find(n,s.valueType())(s.value)),"Array | Matrix":r.referToSelf(n=>s=>deepMap(s,n))})}),name$4R="isNumeric",dependencies$4R=["typed"],createIsNumeric=factory(name$4R,dependencies$4R,t=>{var{typed:r}=t;return r(name$4R,{"number | BigNumber | bigint | Fraction | boolean":()=>!0,"Complex | Unit | string | null | undefined | Node":()=>!1,"Array | Matrix":r.referToSelf(a=>n=>deepMap(n,a))})}),name$4Q="hasNumericValue",dependencies$4Q=["typed","isNumeric"],createHasNumericValue=factory(name$4Q,dependencies$4Q,t=>{var{typed:r,isNumeric:a}=t;return r(name$4Q,{boolean:()=>!0,string:function(s){return s.trim().length>0&&!isNaN(Number(s))},any:function(s){return a(s)}})}),name$4P="isPositive",dependencies$4P=["typed","config"],createIsPositive=factory(name$4P,dependencies$4P,t=>{var{typed:r,config:a}=t;return r(name$4P,{number:n=>nearlyEqual$1(n,0,a.relTol,a.absTol)?!1:isPositiveNumber(n),BigNumber:n=>nearlyEqual(n,new n.constructor(0),a.relTol,a.absTol)?!1:!n.isNeg()&&!n.isZero()&&!n.isNaN(),bigint:n=>n>0n,Fraction:n=>n.s>0n&&n.n>0n,Unit:r.referToSelf(n=>s=>r.find(n,s.valueType())(s.value)),"Array | Matrix":r.referToSelf(n=>s=>deepMap(s,n))})}),name$4O="isZero",dependencies$4O=["typed","equalScalar"],createIsZero=factory(name$4O,dependencies$4O,t=>{var{typed:r,equalScalar:a}=t;return r(name$4O,{"number | BigNumber | Complex | Fraction":n=>a(n,0),bigint:n=>n===0n,Unit:r.referToSelf(n=>s=>r.find(n,s.valueType())(s.value)),"Array | Matrix":r.referToSelf(n=>s=>deepMap(s,n))})}),name$4N="isNaN",dependencies$4N=["typed"],createIsNaN=factory(name$4N,dependencies$4N,t=>{var{typed:r}=t;return r(name$4N,{number:isNaNNumber,BigNumber:function(n){return n.isNaN()},bigint:function(n){return!1},Fraction:function(n){return!1},Complex:function(n){return n.isNaN()},Unit:function(n){return Number.isNaN(n.value)},"Array | Matrix":r.referToSelf(a=>n=>deepMap(n,a))})}),name$4M="isBounded",dependencies$4M=["typed"],createIsBounded=factory(name$4M,dependencies$4M,t=>{var{typed:r}=t;return r(name$4M,{number:a=>Number.isFinite(a),"BigNumber | Complex":a=>a.isFinite(),"bigint | Fraction":()=>!0,"null | undefined":()=>!1,Unit:r.referToSelf(a=>n=>a(n.value)),"Array | Matrix":r.referToSelf(a=>n=>(Array.isArray(n)||(n=n.valueOf()),n.every(s=>a(s))))})}),name$4L="isFinite",dependencies$4L=["typed","isBounded","map"],createIsFinite=factory(name$4L,dependencies$4L,t=>{var{typed:r,isBounded:a,map:n}=t;return r(name$4L,{"Array | Matrix":s=>n(s,a),any:s=>a(s)})}),name$4K="typeOf",dependencies$4K=["typed"],createTypeOf=factory(name$4K,dependencies$4K,t=>{var{typed:r}=t;return r(name$4K,{any:typeOf$1})});function complexEquals(t,r,a,n){return nearlyEqual$1(t.re,r.re,a,n)&&nearlyEqual$1(t.im,r.im,a,n)}var createCompareUnits=factory("compareUnits",["typed"],t=>{var{typed:r}=t;return{"Unit, Unit":r.referToSelf(a=>(n,s)=>{if(!n.equalBase(s))throw new Error("Cannot compare units with different base");return r.find(a,[n.valueType(),s.valueType()])(n.value,s.value)})}}),name$4J="equalScalar",dependencies$4J=["typed","config"],createEqualScalar=factory(name$4J,dependencies$4J,t=>{var{typed:r,config:a}=t,n=createCompareUnits({typed:r});return r(name$4J,{"boolean, boolean":function(o,l){return o===l},"number, number":function(o,l){return nearlyEqual$1(o,l,a.relTol,a.absTol)},"BigNumber, BigNumber":function(o,l){return o.eq(l)||nearlyEqual(o,l,a.relTol,a.absTol)},"bigint, bigint":function(o,l){return o===l},"Fraction, Fraction":function(o,l){return o.equals(l)},"Complex, Complex":function(o,l){return complexEquals(o,l,a.relTol,a.absTol)}},n)});factory(name$4J,["typed","config"],t=>{var{typed:r,config:a}=t;return r(name$4J,{"number, number":function(s,o){return nearlyEqual$1(s,o,a.relTol,a.absTol)}})});var name$4I="SparseMatrix",dependencies$4I=["typed","equalScalar","Matrix"],createSparseMatrixClass=factory(name$4I,dependencies$4I,t=>{var{typed:r,equalScalar:a,Matrix:n}=t;function s(b,_){if(!(this instanceof s))throw new SyntaxError("Constructor must be called with the new operator");if(_&&!isString(_))throw new Error("Invalid datatype: "+_);if(isMatrix(b))o(this,b,_);else if(b&&isArray(b.index)&&isArray(b.ptr)&&isArray(b.size))this._values=b.values,this._index=b.index,this._ptr=b.ptr,this._size=b.size,this._datatype=_||b.datatype;else if(isArray(b))l(this,b,_);else{if(b)throw new TypeError("Unsupported type of data ("+typeOf$1(b)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=_}}function o(b,_,N){_.type==="SparseMatrix"?(b._values=_._values?clone$3(_._values):void 0,b._index=clone$3(_._index),b._ptr=clone$3(_._ptr),b._size=clone$3(_._size),b._datatype=N||_._datatype):l(b,_.valueOf(),N||_._datatype)}function l(b,_,N){b._values=[],b._index=[],b._ptr=[],b._datatype=N;var M=_.length,C=0,$=a,w=0;if(isString(N)&&($=r.find(a,[N,N])||a,w=r.convert(0,N)),M>0){var A=0;do{b._ptr.push(b._index.length);for(var X=0;X<M;X++){var O=_[X];if(isArray(O)){if(A===0&&C<O.length&&(C=O.length),A<O.length){var G=O[A];$(G,w)||(b._values.push(G),b._index.push(X))}}else A===0&&C<1&&(C=1),$(O,w)||(b._values.push(O),b._index.push(X))}A++}while(A<C)}for(;b._ptr.length<=C;)b._ptr.push(b._index.length);b._size=[M,C]}s.prototype=new n,s.prototype.createSparseMatrix=function(b,_){return new s(b,_)},Object.defineProperty(s,"name",{value:"SparseMatrix"}),s.prototype.constructor=s,s.prototype.type="SparseMatrix",s.prototype.isSparseMatrix=!0,s.prototype.getDataType=function(){return getArrayDataType(this._values,typeOf$1)},s.prototype.storage=function(){return"sparse"},s.prototype.datatype=function(){return this._datatype},s.prototype.create=function(b,_){return new s(b,_)},s.prototype.density=function(){var b=this._size[0],_=this._size[1];return b!==0&&_!==0?this._index.length/(b*_):0},s.prototype.subset=function(b,_,N){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return u(this,b);case 2:case 3:return h(this,b,_,N);default:throw new SyntaxError("Wrong number of arguments")}};function u(b,_){if(!isIndex(_))throw new TypeError("Invalid index");var N=_.isScalar();if(N)return b.get(_.min());var M=_.size();if(M.length!==b._size.length)throw new DimensionError(M.length,b._size.length);var C,$,w,A,X=_.min(),O=_.max();for(C=0,$=b._size.length;C<$;C++)validateIndex(X[C],b._size[C]),validateIndex(O[C],b._size[C]);var G=b._values,R=b._index,B=b._ptr,F=_.dimension(0),U=_.dimension(1),q=[],ee=[];function z(j,V){ee[j]=V[0],q[j]=!0}Number.isInteger(F)?z(F,[0]):F.forEach(z);var Y=G?[]:void 0,K=[],Z=[];function ne(j){for(Z.push(K.length),w=B[j],A=B[j+1];w<A;w++)C=R[w],q[C]===!0&&(K.push(ee[C]),Y&&Y.push(G[w]))}return Number.isInteger(U)?ne(U):U.forEach(ne),Z.push(K.length),new s({values:Y,index:K,ptr:Z,size:M,datatype:b._datatype})}function h(b,_,N,M){if(!_||_.isIndex!==!0)throw new TypeError("Invalid index");var C=_.size(),$=_.isScalar(),w;if(isMatrix(N)?(w=N.size(),N=N.toArray()):w=arraySize(N),$){if(w.length!==0)throw new TypeError("Scalar expected");b.set(_.min(),N,M)}else{if(C.length!==1&&C.length!==2)throw new DimensionError(C.length,b._size.length,"<");if(w.length<C.length){for(var A=0,X=0;C[A]===1&&w[A]===1;)A++;for(;C[A]===1;)X++,A++;N=unsqueeze(N,C.length,X,w)}if(!deepStrictEqual(C,w))throw new DimensionError(C,w,">");if(C.length===1){var O=_.dimension(0);B(O,(F,U)=>{validateIndex(F),b.set([F,0],N[U[0]],M)})}else{var G=_.dimension(0),R=_.dimension(1);B(G,(F,U)=>{validateIndex(F),B(R,(q,ee)=>{validateIndex(q),b.set([F,q],N[U[0]][ee[0]],M)})})}}return b;function B(F,U){isNumber(F)?U(F,[0]):F.forEach(U)}}s.prototype.get=function(b){if(!isArray(b))throw new TypeError("Array expected");if(b.length!==this._size.length)throw new DimensionError(b.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var _=b[0],N=b[1];validateIndex(_,this._size[0]),validateIndex(N,this._size[1]);var M=c(_,this._ptr[N],this._ptr[N+1],this._index);return M<this._ptr[N+1]&&this._index[M]===_?this._values[M]:0},s.prototype.set=function(b,_,N){if(!isArray(b))throw new TypeError("Array expected");if(b.length!==this._size.length)throw new DimensionError(b.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var M=b[0],C=b[1],$=this._size[0],w=this._size[1],A=a,X=0;isString(this._datatype)&&(A=r.find(a,[this._datatype,this._datatype])||a,X=r.convert(0,this._datatype)),(M>$-1||C>w-1)&&(p(this,Math.max(M+1,$),Math.max(C+1,w),N),$=this._size[0],w=this._size[1]),validateIndex(M,$),validateIndex(C,w);var O=c(M,this._ptr[C],this._ptr[C+1],this._index);return O<this._ptr[C+1]&&this._index[O]===M?A(_,X)?f(O,C,this._values,this._index,this._ptr):this._values[O]=_:A(_,X)||d(O,M,C,_,this._values,this._index,this._ptr),this};function c(b,_,N,M){if(N-_===0)return N;for(var C=_;C<N;C++)if(M[C]===b)return C;return _}function f(b,_,N,M,C){N.splice(b,1),M.splice(b,1);for(var $=_+1;$<C.length;$++)C[$]--}function d(b,_,N,M,C,$,w){C.splice(b,0,M),$.splice(b,0,_);for(var A=N+1;A<w.length;A++)w[A]++}s.prototype.resize=function(b,_,N){if(!isCollection(b))throw new TypeError("Array or Matrix expected");var M=b.valueOf().map($=>Array.isArray($)&&$.length===1?$[0]:$);if(M.length!==2)throw new Error("Only two dimensions matrix are supported");M.forEach(function($){if(!isNumber($)||!isInteger$1($)||$<0)throw new TypeError("Invalid size, must contain positive integers (size: "+format$1(M)+")")});var C=N?this.clone():this;return p(C,M[0],M[1],_)};function p(b,_,N,M){var C=M||0,$=a,w=0;isString(b._datatype)&&($=r.find(a,[b._datatype,b._datatype])||a,w=r.convert(0,b._datatype),C=r.convert(C,b._datatype));var A=!$(C,w),X=b._size[0],O=b._size[1],G,R,B;if(N>O){for(R=O;R<N;R++)if(b._ptr[R]=b._values.length,A)for(G=0;G<X;G++)b._values.push(C),b._index.push(G);b._ptr[N]=b._values.length}else N<O&&(b._ptr.splice(N+1,O-N),b._values.splice(b._ptr[N],b._values.length),b._index.splice(b._ptr[N],b._index.length));if(O=N,_>X){if(A){var F=0;for(R=0;R<O;R++){b._ptr[R]=b._ptr[R]+F,B=b._ptr[R+1]+F;var U=0;for(G=X;G<_;G++,U++)b._values.splice(B+U,0,C),b._index.splice(B+U,0,G),F++}b._ptr[O]=b._values.length}}else if(_<X){var q=0;for(R=0;R<O;R++){b._ptr[R]=b._ptr[R]-q;var ee=b._ptr[R],z=b._ptr[R+1]-q;for(B=ee;B<z;B++)G=b._index[B],G>_-1&&(b._values.splice(B,1),b._index.splice(B,1),q++)}b._ptr[R]=b._values.length}return b._size[0]=_,b._size[1]=N,b}s.prototype.reshape=function(b,_){if(!isArray(b))throw new TypeError("Array expected");if(b.length!==2)throw new Error("Sparse matrices can only be reshaped in two dimensions");b.forEach(function(Z){if(!isNumber(Z)||!isInteger$1(Z)||Z<=-2||Z===0)throw new TypeError("Invalid size, must contain positive integers or -1 (size: "+format$1(b)+")")});var N=this._size[0]*this._size[1];b=processSizesWildcard(b,N);var M=b[0]*b[1];if(N!==M)throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var C=_?this.clone():this;if(this._size[0]===b[0]&&this._size[1]===b[1])return C;for(var $=[],w=0;w<C._ptr.length;w++)for(var A=0;A<C._ptr[w+1]-C._ptr[w];A++)$.push(w);for(var X=C._values.slice(),O=C._index.slice(),G=0;G<C._index.length;G++){var R=O[G],B=$[G],F=R*C._size[1]+B;$[G]=F%b[1],O[G]=Math.floor(F/b[1])}C._values.length=0,C._index.length=0,C._ptr.length=b[1]+1,C._size=b.slice();for(var U=0;U<C._ptr.length;U++)C._ptr[U]=0;for(var q=0;q<X.length;q++){var ee=O[q],z=$[q],Y=X[q],K=c(ee,C._ptr[z],C._ptr[z+1],C._index);d(K,ee,z,Y,C._values,C._index,C._ptr)}return C},s.prototype.clone=function(){var b=new s({values:this._values?clone$3(this._values):void 0,index:clone$3(this._index),ptr:clone$3(this._ptr),size:clone$3(this._size),datatype:this._datatype});return b},s.prototype.size=function(){return this._size.slice(0)},s.prototype.map=function(b,_){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var N=this,M=this._size[0],C=this._size[1],$=optimizeCallback(b,N,"map"),w=function(X,O,G){return $.fn(X,[O,G],N)};return v(this,0,M-1,0,C-1,w,_)};function v(b,_,N,M,C,$,w){var A=[],X=[],O=[],G=a,R=0;isString(b._datatype)&&(G=r.find(a,[b._datatype,b._datatype])||a,R=r.convert(0,b._datatype));for(var B=function(L,ae,W){var ve=$(L,ae,W);G(ve,R)||(A.push(ve),X.push(ae))},F=M;F<=C;F++){O.push(A.length);var U=b._ptr[F],q=b._ptr[F+1];if(w)for(var ee=U;ee<q;ee++){var z=b._index[ee];z>=_&&z<=N&&B(b._values[ee],z-_,F-M)}else{for(var Y={},K=U;K<q;K++){var Z=b._index[K];Y[Z]=b._values[K]}for(var ne=_;ne<=N;ne++){var j=ne in Y?Y[ne]:0;B(j,ne-_,F-M)}}}return O.push(A.length),new s({values:A,index:X,ptr:O,size:[N-_+1,C-M+1]})}s.prototype.forEach=function(b,_){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var N=this,M=this._size[0],C=this._size[1],$=optimizeCallback(b,N,"forEach"),w=0;w<C;w++){var A=this._ptr[w],X=this._ptr[w+1];if(_)for(var O=A;O<X;O++){var G=this._index[O];$.fn(this._values[O],[G,w],N)}else{for(var R={},B=A;B<X;B++){var F=this._index[B];R[F]=this._values[B]}for(var U=0;U<M;U++){var q=U in R?R[U]:0;$.fn(q,[U,w],N)}}}},s.prototype[Symbol.iterator]=function*(){if(!this._values)throw new Error("Cannot iterate a Pattern only matrix");for(var b=this._size[1],_=0;_<b;_++)for(var N=this._ptr[_],M=this._ptr[_+1],C=N;C<M;C++){var $=this._index[C];yield{value:this._values[C],index:[$,_]}}},s.prototype.toArray=function(){return y(this._values,this._index,this._ptr,this._size,!0)},s.prototype.valueOf=function(){return y(this._values,this._index,this._ptr,this._size,!1)};function y(b,_,N,M,C){var $=M[0],w=M[1],A=[],X,O;for(X=0;X<$;X++)for(A[X]=[],O=0;O<w;O++)A[X][O]=0;for(O=0;O<w;O++)for(var G=N[O],R=N[O+1],B=G;B<R;B++)X=_[B],A[X][O]=b?C?clone$3(b[B]):b[B]:1;return A}return s.prototype.format=function(b){for(var _=this._size[0],N=this._size[1],M=this.density(),C="Sparse Matrix ["+format$1(_,b)+" x "+format$1(N,b)+"] density: "+format$1(M,b)+`
`,$=0;$<N;$++)for(var w=this._ptr[$],A=this._ptr[$+1],X=w;X<A;X++){var O=this._index[X];C+=`
    (`+format$1(O,b)+", "+format$1($,b)+") ==> "+(this._values?format$1(this._values[X],b):"X")}return C},s.prototype.toString=function(){return format$1(this.toArray())},s.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},s.prototype.diagonal=function(b){if(b){if(isBigNumber(b)&&(b=b.toNumber()),!isNumber(b)||!isInteger$1(b))throw new TypeError("The parameter k must be an integer number")}else b=0;var _=b>0?b:0,N=b<0?-b:0,M=this._size[0],C=this._size[1],$=Math.min(M-N,C-_),w=[],A=[],X=[];X[0]=0;for(var O=_;O<C&&w.length<$;O++)for(var G=this._ptr[O],R=this._ptr[O+1],B=G;B<R;B++){var F=this._index[B];if(F===O-_+N){w.push(this._values[B]),A[w.length-1]=F-N;break}}return X.push(w.length),new s({values:w,index:A,ptr:X,size:[$,1]})},s.fromJSON=function(b){return new s(b)},s.diagonal=function(b,_,N,M,C){if(!isArray(b))throw new TypeError("Array expected, size parameter");if(b.length!==2)throw new Error("Only two dimensions matrix are supported");if(b=b.map(function(Z){if(isBigNumber(Z)&&(Z=Z.toNumber()),!isNumber(Z)||!isInteger$1(Z)||Z<1)throw new Error("Size values must be positive integers");return Z}),N){if(isBigNumber(N)&&(N=N.toNumber()),!isNumber(N)||!isInteger$1(N))throw new TypeError("The parameter k must be an integer number")}else N=0;var $=a,w=0;isString(C)&&($=r.find(a,[C,C])||a,w=r.convert(0,C));var A=N>0?N:0,X=N<0?-N:0,O=b[0],G=b[1],R=Math.min(O-X,G-A),B;if(isArray(_)){if(_.length!==R)throw new Error("Invalid value array length");B=function(ne){return _[ne]}}else if(isMatrix(_)){var F=_.size();if(F.length!==1||F[0]!==R)throw new Error("Invalid matrix length");B=function(ne){return _.get([ne])}}else B=function(){return _};for(var U=[],q=[],ee=[],z=0;z<G;z++){ee.push(U.length);var Y=z-A;if(Y>=0&&Y<R){var K=B(Y);$(K,w)||(q.push(Y+X),U.push(K))}}return ee.push(U.length),new s({values:U,index:q,ptr:ee,size:[O,G]})},s.prototype.swapRows=function(b,_){if(!isNumber(b)||!isInteger$1(b)||!isNumber(_)||!isInteger$1(_))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return validateIndex(b,this._size[0]),validateIndex(_,this._size[0]),s._swapRows(b,_,this._size[1],this._values,this._index,this._ptr),this},s._forEachRow=function(b,_,N,M,C){for(var $=M[b],w=M[b+1],A=$;A<w;A++)C(N[A],_[A])},s._swapRows=function(b,_,N,M,C,$){for(var w=0;w<N;w++){var A=$[w],X=$[w+1],O=c(b,A,X,C),G=c(_,A,X,C);if(O<X&&G<X&&C[O]===b&&C[G]===_){if(M){var R=M[O];M[O]=M[G],M[G]=R}continue}if(O<X&&C[O]===b&&(G>=X||C[G]!==_)){var B=M?M[O]:void 0;C.splice(G,0,_),M&&M.splice(G,0,B),C.splice(G<=O?O+1:O,1),M&&M.splice(G<=O?O+1:O,1);continue}if(G<X&&C[G]===_&&(O>=X||C[O]!==b)){var F=M?M[G]:void 0;C.splice(O,0,b),M&&M.splice(O,0,F),C.splice(O<=G?G+1:G,1),M&&M.splice(O<=G?G+1:G,1)}}},s},{isClass:!0}),name$4H="number",dependencies$4H=["typed"];function getNonDecimalNumberParts(t){var r=t.match(/(0[box])([0-9a-fA-F]*)\.([0-9a-fA-F]*)/);if(r){var a={"0b":2,"0o":8,"0x":16}[r[1]],n=r[2],s=r[3];return{input:t,radix:a,integerPart:n,fractionalPart:s}}else return null}function makeNumberFromNonDecimalParts(t){for(var r=parseInt(t.integerPart,t.radix),a=0,n=0;n<t.fractionalPart.length;n++){var s=parseInt(t.fractionalPart[n],t.radix);a+=s/Math.pow(t.radix,n+1)}var o=r+a;if(isNaN(o))throw new SyntaxError('String "'+t.input+'" is not a valid number');return o}var createNumber=factory(name$4H,dependencies$4H,t=>{var{typed:r}=t,a=r("number",{"":function(){return 0},number:function(s){return s},string:function(s){if(s==="NaN")return NaN;var o=getNonDecimalNumberParts(s);if(o)return makeNumberFromNonDecimalParts(o);var l=0,u=s.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);u&&(l=Number(u[2]),s=u[1]);var h=Number(s);if(isNaN(h))throw new SyntaxError('String "'+s+'" is not a valid number');if(u){if(h>2**l-1)throw new SyntaxError('String "'.concat(s,'" is out of range'));h>=2**(l-1)&&(h=h-2**l)}return h},BigNumber:function(s){return s.toNumber()},bigint:function(s){return Number(s)},Fraction:function(s){return s.valueOf()},Unit:r.referToSelf(n=>s=>{var o=s.clone();return o.value=n(s.value),o}),null:function(s){return 0},"Unit, string | Unit":function(s,o){return s.toNumber(o)},"Array | Matrix":r.referToSelf(n=>s=>deepMap(s,n))});return a.fromJSON=function(n){return parseFloat(n.value)},a}),name$4G="bigint",dependencies$4G=["typed"],createBigint=factory(name$4G,dependencies$4G,t=>{var{typed:r}=t,a=r("bigint",{"":function(){return 0n},bigint:function(s){return s},number:function(s){return BigInt(s.toFixed())},BigNumber:function(s){return BigInt(s.round().toString())},Fraction:function(s){return BigInt(s.valueOf().toFixed())},"string | boolean":function(s){return BigInt(s)},null:function(s){return 0n},"Array | Matrix":r.referToSelf(n=>s=>deepMap(s,n))});return a.fromJSON=function(n){return BigInt(n.value)},a}),name$4F="string",dependencies$4F=["typed"],createString=factory(name$4F,dependencies$4F,t=>{var{typed:r}=t;return r(name$4F,{"":function(){return""},number:format$3,null:function(n){return"null"},boolean:function(n){return n+""},string:function(n){return n},"Array | Matrix":r.referToSelf(a=>n=>deepMap(n,a)),any:function(n){return String(n)}})}),name$4E="boolean",dependencies$4E=["typed"],createBoolean=factory(name$4E,dependencies$4E,t=>{var{typed:r}=t;return r(name$4E,{"":function(){return!1},boolean:function(n){return n},number:function(n){return!!n},null:function(n){return!1},BigNumber:function(n){return!n.isZero()},string:function(n){var s=n.toLowerCase();if(s==="true")return!0;if(s==="false")return!1;var o=Number(n);if(n!==""&&!isNaN(o))return!!o;throw new Error('Cannot convert "'+n+'" to a boolean')},"Array | Matrix":r.referToSelf(a=>n=>deepMap(n,a))})}),name$4D="bignumber",dependencies$4D=["typed","BigNumber"],createBignumber=factory(name$4D,dependencies$4D,t=>{var{typed:r,BigNumber:a}=t;return r("bignumber",{"":function(){return new a(0)},number:function(s){return new a(s+"")},string:function(s){var o=s.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);if(o){var l=o[2],u=a(o[1]),h=new a(2).pow(Number(l));if(u.gt(h.sub(1)))throw new SyntaxError('String "'.concat(s,'" is out of range'));var c=new a(2).pow(Number(l)-1);return u.gte(c)?u.sub(h):u}return new a(s)},BigNumber:function(s){return s},bigint:function(s){return new a(s.toString())},Unit:r.referToSelf(n=>s=>{var o=s.clone();return o.value=n(s.value),o}),Fraction:function(s){return new a(String(s.n)).div(String(s.d)).times(String(s.s))},null:function(s){return new a(0)},"Array | Matrix":r.referToSelf(n=>s=>deepMap(s,n))})}),name$4C="complex",dependencies$4C=["typed","Complex"],createComplex=factory(name$4C,dependencies$4C,t=>{var{typed:r,Complex:a}=t;return r("complex",{"":function(){return a.ZERO},number:function(s){return new a(s,0)},"number, number":function(s,o){return new a(s,o)},"BigNumber, BigNumber":function(s,o){return new a(s.toNumber(),o.toNumber())},Fraction:function(s){return new a(s.valueOf(),0)},Complex:function(s){return s.clone()},string:function(s){return a(s)},null:function(s){return a(0)},Object:function(s){if("re"in s&&"im"in s)return new a(s.re,s.im);if("r"in s&&"phi"in s||"abs"in s&&"arg"in s)return new a(s);throw new Error("Expected object with properties (re and im) or (r and phi) or (abs and arg)")},"Array | Matrix":r.referToSelf(n=>s=>deepMap(s,n))})}),name$4B="fraction",dependencies$4B=["typed","Fraction"],createFraction=factory(name$4B,dependencies$4B,t=>{var{typed:r,Fraction:a}=t;return r("fraction",{number:function(s){if(!Number.isFinite(s)||isNaN(s))throw new Error(s+" cannot be represented as a fraction");return new a(s)},string:function(s){return new a(s)},"number, number":function(s,o){return new a(s,o)},"bigint, bigint":function(s,o){return new a(s,o)},null:function(s){return new a(0)},BigNumber:function(s){return new a(s.toString())},bigint:function(s){return new a(s.toString())},Fraction:function(s){return s},Unit:r.referToSelf(n=>s=>{var o=s.clone();return o.value=n(s.value),o}),Object:function(s){return new a(s)},"Array | Matrix":r.referToSelf(n=>s=>deepMap(s,n))})}),name$4A="matrix",dependencies$4A=["typed","Matrix","DenseMatrix","SparseMatrix"],createMatrix=factory(name$4A,dependencies$4A,t=>{var{typed:r,Matrix:a,DenseMatrix:n,SparseMatrix:s}=t;return r(name$4A,{"":function(){return o([])},string:function(u){return o([],u)},"string, string":function(u,h){return o([],u,h)},Array:function(u){return o(u)},Matrix:function(u){return o(u,u.storage())},"Array | Matrix, string":o,"Array | Matrix, string, string":o});function o(l,u,h){if(u==="dense"||u==="default"||u===void 0)return new n(l,h);if(u==="sparse")return new s(l,h);throw new TypeError("Unknown matrix type "+JSON.stringify(u)+".")}}),name$4z="matrixFromFunction",dependencies$4z=["typed","matrix","isZero"],createMatrixFromFunction=factory(name$4z,dependencies$4z,t=>{var{typed:r,matrix:a,isZero:n}=t;return r(name$4z,{"Array | Matrix, function, string, string":function(l,u,h,c){return s(l,u,h,c)},"Array | Matrix, function, string":function(l,u,h){return s(l,u,h)},"Matrix, function":function(l,u){return s(l,u,"dense")},"Array, function":function(l,u){return s(l,u,"dense").toArray()},"Array | Matrix, string, function":function(l,u,h){return s(l,h,u)},"Array | Matrix, string, string, function":function(l,u,h,c){return s(l,c,u,h)}});function s(o,l,u,h){var c;return h!==void 0?c=a(u,h):c=a(u),c.resize(o),c.forEach(function(f,d){var p=l(d);n(p)||c.set(d,p)}),c}}),name$4y="matrixFromRows",dependencies$4y=["typed","matrix","flatten","size"],createMatrixFromRows=factory(name$4y,dependencies$4y,t=>{var{typed:r,matrix:a,flatten:n,size:s}=t;return r(name$4y,{"...Array":function(h){return o(h)},"...Matrix":function(h){return a(o(h.map(c=>c.toArray())))}});function o(u){if(u.length===0)throw new TypeError("At least one row is needed to construct a matrix.");var h=l(u[0]),c=[];for(var f of u){var d=l(f);if(d!==h)throw new TypeError("The vectors had different length: "+(h|0)+"  "+(d|0));c.push(n(f))}return c}function l(u){var h=s(u);if(h.length===1)return h[0];if(h.length===2){if(h[0]===1)return h[1];if(h[1]===1)return h[0];throw new TypeError("At least one of the arguments is not a vector.")}else throw new TypeError("Only one- or two-dimensional vectors are supported.")}}),name$4x="matrixFromColumns",dependencies$4x=["typed","matrix","flatten","size"],createMatrixFromColumns=factory(name$4x,dependencies$4x,t=>{var{typed:r,matrix:a,flatten:n,size:s}=t;return r(name$4x,{"...Array":function(h){return o(h)},"...Matrix":function(h){return a(o(h.map(c=>c.toArray())))}});function o(u){if(u.length===0)throw new TypeError("At least one column is needed to construct a matrix.");for(var h=l(u[0]),c=[],f=0;f<h;f++)c[f]=[];for(var d of u){var p=l(d);if(p!==h)throw new TypeError("The vectors had different length: "+(h|0)+"  "+(p|0));for(var v=n(d),y=0;y<h;y++)c[y].push(v[y])}return c}function l(u){var h=s(u);if(h.length===1)return h[0];if(h.length===2){if(h[0]===1)return h[1];if(h[1]===1)return h[0];throw new TypeError("At least one of the arguments is not a vector.")}else throw new TypeError("Only one- or two-dimensional vectors are supported.")}}),name$4w="splitUnit",dependencies$4w=["typed"],createSplitUnit=factory(name$4w,dependencies$4w,t=>{var{typed:r}=t;return r(name$4w,{"Unit, Array":function(n,s){return n.splitUnit(s)}})}),name$4v="unaryMinus",dependencies$4v=["typed"],createUnaryMinus=factory(name$4v,dependencies$4v,t=>{var{typed:r}=t;return r(name$4v,{number:unaryMinusNumber,"Complex | BigNumber | Fraction":a=>a.neg(),bigint:a=>-a,Unit:r.referToSelf(a=>n=>{var s=n.clone();return s.value=r.find(a,s.valueType())(n.value),s}),"Array | Matrix":r.referToSelf(a=>n=>deepMap(n,a,!0))})}),name$4u="unaryPlus",dependencies$4u=["typed","config","numeric"],createUnaryPlus=factory(name$4u,dependencies$4u,t=>{var{typed:r,config:a,numeric:n}=t;return r(name$4u,{number:unaryPlusNumber,Complex:function(o){return o},BigNumber:function(o){return o},bigint:function(o){return o},Fraction:function(o){return o},Unit:function(o){return o.clone()},"Array | Matrix":r.referToSelf(s=>o=>deepMap(o,s,!0)),boolean:function(o){return n(o?1:0,a.number)},string:function(o){return n(o,safeNumberType(o,a))}})}),name$4t="abs",dependencies$4t=["typed"],createAbs=factory(name$4t,dependencies$4t,t=>{var{typed:r}=t;return r(name$4t,{number:absNumber,"Complex | BigNumber | Fraction | Unit":a=>a.abs(),bigint:a=>a<0n?-a:a,"Array | Matrix":r.referToSelf(a=>n=>deepMap(n,a,!0))})}),name$4s="mapSlices",dependencies$4s=["typed","isInteger"],createMapSlices=factory(name$4s,dependencies$4s,t=>{var{typed:r,isInteger:a}=t;return r(name$4s,{"Array | Matrix, number | BigNumber, function":function(s,o,l){if(!a(o))throw new TypeError("Integer number expected for dimension");var u=Array.isArray(s)?arraySize(s):s.size();if(o<0||o>=u.length)throw new IndexError(o,u.length);return isMatrix(s)?s.create(_mapSlices(s.valueOf(),o,l),s.datatype()):_mapSlices(s,o,l)}})},{formerly:"apply"});function _mapSlices(t,r,a){var n,s,o;if(r<=0)if(Array.isArray(t[0])){for(o=_switch(t),s=[],n=0;n<o.length;n++)s[n]=_mapSlices(o[n],r-1,a);return s}else return a(t);else{for(s=[],n=0;n<t.length;n++)s[n]=_mapSlices(t[n],r-1,a);return s}}function _switch(t){var r=t.length,a=t[0].length,n,s,o=[];for(s=0;s<a;s++){var l=[];for(n=0;n<r;n++)l.push(t[n][s]);o.push(l)}return o}var name$4r="addScalar",dependencies$4r=["typed"],createAddScalar=factory(name$4r,dependencies$4r,t=>{var{typed:r}=t;return r(name$4r,{"number, number":addNumber,"Complex, Complex":function(n,s){return n.add(s)},"BigNumber, BigNumber":function(n,s){return n.plus(s)},"bigint, bigint":function(n,s){return n+s},"Fraction, Fraction":function(n,s){return n.add(s)},"Unit, Unit":r.referToSelf(a=>(n,s)=>{if(n.value===null||n.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(s.value===null||s.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!n.equalBase(s))throw new Error("Units do not match");var o=n.clone();return o.value=r.find(a,[o.valueType(),s.valueType()])(o.value,s.value),o.fixPrefix=!1,o})})}),name$4q="subtractScalar",dependencies$4q=["typed"],createSubtractScalar=factory(name$4q,dependencies$4q,t=>{var{typed:r}=t;return r(name$4q,{"number, number":subtractNumber,"Complex, Complex":function(n,s){return n.sub(s)},"BigNumber, BigNumber":function(n,s){return n.minus(s)},"bigint, bigint":function(n,s){return n-s},"Fraction, Fraction":function(n,s){return n.sub(s)},"Unit, Unit":r.referToSelf(a=>(n,s)=>{if(n.value===null||n.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(s.value===null||s.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!n.equalBase(s))throw new Error("Units do not match");var o=n.clone();return o.value=r.find(a,[o.valueType(),s.valueType()])(o.value,s.value),o.fixPrefix=!1,o})})}),name$4p="cbrt",dependencies$4p=["config","typed","isNegative","unaryMinus","matrix","Complex","BigNumber","Fraction"],createCbrt=factory(name$4p,dependencies$4p,t=>{var{config:r,typed:a,isNegative:n,unaryMinus:s,matrix:o,Complex:l,BigNumber:u,Fraction:h}=t;return a(name$4p,{number:cbrtNumber,Complex:c,"Complex, boolean":c,BigNumber:function(p){return p.cbrt()},Unit:f});function c(d,p){var v=d.arg()/3,y=d.abs(),b=new l(cbrtNumber(y),0).mul(new l(0,v).exp());if(p){var _=[b,new l(cbrtNumber(y),0).mul(new l(0,v+Math.PI*2/3).exp()),new l(cbrtNumber(y),0).mul(new l(0,v-Math.PI*2/3).exp())];return r.matrix==="Array"?_:o(_)}else return b}function f(d){if(d.value&&isComplex(d.value)){var p=d.clone();return p.value=1,p=p.pow(1/3),p.value=c(d.value),p}else{var v=n(d.value);v&&(d.value=s(d.value));var y;isBigNumber(d.value)?y=new u(1).div(3):isFraction(d.value)?y=new h(1,3):y=1/3;var b=d.pow(y);return v&&(b.value=s(b.value)),b}}}),name$4o="matAlgo11xS0s",dependencies$4o=["typed","equalScalar"],createMatAlgo11xS0s=factory(name$4o,dependencies$4o,t=>{var{typed:r,equalScalar:a}=t;return function(s,o,l,u){var h=s._values,c=s._index,f=s._ptr,d=s._size,p=s._datatype;if(!h)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var v=d[0],y=d[1],b,_=a,N=0,M=l;typeof p=="string"&&(b=p,_=r.find(a,[b,b]),N=r.convert(0,b),o=r.convert(o,b),M=r.find(l,[b,b]));for(var C=[],$=[],w=[],A=0;A<y;A++){w[A]=$.length;for(var X=f[A],O=f[A+1],G=X;G<O;G++){var R=c[G],B=u?M(o,h[G]):M(h[G],o);_(B,N)||($.push(R),C.push(B))}}return w[y]=$.length,s.createSparseMatrix({values:C,index:$,ptr:w,size:[v,y],datatype:b})}}),name$4n="matAlgo12xSfs",dependencies$4n=["typed","DenseMatrix"],createMatAlgo12xSfs=factory(name$4n,dependencies$4n,t=>{var{typed:r,DenseMatrix:a}=t;return function(s,o,l,u){var h=s._values,c=s._index,f=s._ptr,d=s._size,p=s._datatype;if(!h)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var v=d[0],y=d[1],b,_=l;typeof p=="string"&&(b=p,o=r.convert(o,b),_=r.find(l,[b,b]));for(var N=[],M=[],C=[],$=0;$<y;$++){for(var w=$+1,A=f[$],X=f[$+1],O=A;O<X;O++){var G=c[O];M[G]=h[O],C[G]=w}for(var R=0;R<v;R++)$===0&&(N[R]=[]),C[R]===w?N[R][$]=u?_(o,M[R]):_(M[R],o):N[R][$]=u?_(o,0):_(0,o)}return new a({data:N,size:[v,y],datatype:b})}}),name$4m="matAlgo14xDs",dependencies$4m=["typed"],createMatAlgo14xDs=factory(name$4m,dependencies$4m,t=>{var{typed:r}=t;return function(s,o,l,u){var h=s._data,c=s._size,f=s._datatype,d,p=l;typeof f=="string"&&(d=f,o=r.convert(o,d),p=r.find(l,[d,d]));var v=c.length>0?a(p,0,c,c[0],h,o,u):[];return s.createDenseMatrix({data:v,size:clone$3(c),datatype:d})};function a(n,s,o,l,u,h,c){var f=[];if(s===o.length-1)for(var d=0;d<l;d++)f[d]=c?n(h,u[d]):n(u[d],h);else for(var p=0;p<l;p++)f[p]=a(n,s+1,o,o[s+1],u[p],h,c);return f}}),name$4l="ceil",dependencies$4l=["typed","config","round","matrix","equalScalar","zeros","DenseMatrix"],bigTen$1=new Decimal(10),createCeilNumber=factory(name$4l,["typed","config","round"],t=>{var{typed:r,config:a,round:n}=t;function s(o){var l=Math.ceil(o),u=n(o);return l===u?l:nearlyEqual$1(o,u,a.relTol,a.absTol)&&!nearlyEqual$1(o,l,a.relTol,a.absTol)?u:l}return r(name$4l,{number:s,"number, number":function(l,u){if(!isInteger$1(u))throw new RangeError("number of decimals in function ceil must be an integer");if(u<0||u>15)throw new RangeError("number of decimals in ceil number must be in range 0-15");var h=10**u;return s(l*h)/h}})}),createCeil=factory(name$4l,dependencies$4l,t=>{var{typed:r,config:a,round:n,matrix:s,equalScalar:o,zeros:l,DenseMatrix:u}=t,h=createMatAlgo11xS0s({typed:r,equalScalar:o}),c=createMatAlgo12xSfs({typed:r,DenseMatrix:u}),f=createMatAlgo14xDs({typed:r}),d=createCeilNumber({typed:r,config:a,round:n});function p(v){var y=(N,M)=>nearlyEqual(N,M,a.relTol,a.absTol),b=v.ceil(),_=n(v);return b.eq(_)?b:y(v,_)&&!y(v,b)?_:b}return r("ceil",{number:d.signatures.number,"number,number":d.signatures["number,number"],Complex:function(y){return y.ceil()},"Complex, number":function(y,b){return y.ceil(b)},"Complex, BigNumber":function(y,b){return y.ceil(b.toNumber())},BigNumber:p,"BigNumber, BigNumber":function(y,b){var _=bigTen$1.pow(b);return p(y.mul(_)).div(_)},bigint:v=>v,"bigint, number":(v,y)=>v,"bigint, BigNumber":(v,y)=>v,Fraction:function(y){return y.ceil()},"Fraction, number":function(y,b){return y.ceil(b)},"Fraction, BigNumber":function(y,b){return y.ceil(b.toNumber())},"Unit, number, Unit":r.referToSelf(v=>function(y,b,_){var N=y.toNumeric(_);return _.multiply(v(N,b))}),"Unit, BigNumber, Unit":r.referToSelf(v=>(y,b,_)=>v(y,b.toNumber(),_)),"Array | Matrix, number | BigNumber, Unit":r.referToSelf(v=>(y,b,_)=>deepMap(y,N=>v(N,b,_),!0)),"Array | Matrix | Unit, Unit":r.referToSelf(v=>(y,b)=>v(y,0,b)),"Array | Matrix":r.referToSelf(v=>y=>deepMap(y,v,!0)),"Array, number | BigNumber":r.referToSelf(v=>(y,b)=>deepMap(y,_=>v(_,b),!0)),"SparseMatrix, number | BigNumber":r.referToSelf(v=>(y,b)=>h(y,b,v,!1)),"DenseMatrix, number | BigNumber":r.referToSelf(v=>(y,b)=>f(y,b,v,!1)),"number | Complex | Fraction | BigNumber, Array":r.referToSelf(v=>(y,b)=>f(s(b),y,v,!0).valueOf()),"number | Complex | Fraction | BigNumber, Matrix":r.referToSelf(v=>(y,b)=>o(y,0)?l(b.size(),b.storage()):b.storage()==="dense"?f(b,y,v,!0):c(b,y,v,!0))})}),name$4k="cube",dependencies$4k=["typed"],createCube=factory(name$4k,dependencies$4k,t=>{var{typed:r}=t;return r(name$4k,{number:cubeNumber,Complex:function(n){return n.mul(n).mul(n)},BigNumber:function(n){return n.times(n).times(n)},bigint:function(n){return n*n*n},Fraction:function(n){return n.pow(3)},Unit:function(n){return n.pow(3)}})}),name$4j="exp",dependencies$4j=["typed"],createExp=factory(name$4j,dependencies$4j,t=>{var{typed:r}=t;return r(name$4j,{number:expNumber,Complex:function(n){return n.exp()},BigNumber:function(n){return n.exp()}})}),name$4i="expm1",dependencies$4i=["typed","Complex"],createExpm1=factory(name$4i,dependencies$4i,t=>{var{typed:r,Complex:a}=t;return r(name$4i,{number:expm1Number,Complex:function(s){var o=Math.exp(s.re);return new a(o*Math.cos(s.im)-1,o*Math.sin(s.im))},BigNumber:function(s){return s.exp().minus(1)}})}),name$4h="fix",dependencies$4h=["typed","Complex","matrix","ceil","floor","equalScalar","zeros","DenseMatrix"],createFixNumber=factory(name$4h,["typed","ceil","floor"],t=>{var{typed:r,ceil:a,floor:n}=t;return r(name$4h,{number:function(o){return o>0?n(o):a(o)},"number, number":function(o,l){return o>0?n(o,l):a(o,l)}})}),createFix=factory(name$4h,dependencies$4h,t=>{var{typed:r,Complex:a,matrix:n,ceil:s,floor:o,equalScalar:l,zeros:u,DenseMatrix:h}=t,c=createMatAlgo12xSfs({typed:r,DenseMatrix:h}),f=createMatAlgo14xDs({typed:r}),d=createFixNumber({typed:r,ceil:s,floor:o});return r("fix",{number:d.signatures.number,"number, number | BigNumber":d.signatures["number,number"],Complex:function(v){return new a(v.re>0?Math.floor(v.re):Math.ceil(v.re),v.im>0?Math.floor(v.im):Math.ceil(v.im))},"Complex, number":function(v,y){return new a(v.re>0?o(v.re,y):s(v.re,y),v.im>0?o(v.im,y):s(v.im,y))},"Complex, BigNumber":function(v,y){var b=y.toNumber();return new a(v.re>0?o(v.re,b):s(v.re,b),v.im>0?o(v.im,b):s(v.im,b))},BigNumber:function(v){return v.isNegative()?s(v):o(v)},"BigNumber, number | BigNumber":function(v,y){return v.isNegative()?s(v,y):o(v,y)},bigint:p=>p,"bigint, number":(p,v)=>p,"bigint, BigNumber":(p,v)=>p,Fraction:function(v){return v.s<0n?v.ceil():v.floor()},"Fraction, number | BigNumber":function(v,y){return v.s<0n?s(v,y):o(v,y)},"Unit, number, Unit":r.referToSelf(p=>function(v,y,b){var _=v.toNumeric(b);return b.multiply(p(_,y))}),"Unit, BigNumber, Unit":r.referToSelf(p=>(v,y,b)=>p(v,y.toNumber(),b)),"Array | Matrix, number | BigNumber, Unit":r.referToSelf(p=>(v,y,b)=>deepMap(v,_=>p(_,y,b),!0)),"Array | Matrix | Unit, Unit":r.referToSelf(p=>(v,y)=>p(v,0,y)),"Array | Matrix":r.referToSelf(p=>v=>deepMap(v,p,!0)),"Array | Matrix, number | BigNumber":r.referToSelf(p=>(v,y)=>deepMap(v,b=>p(b,y),!0)),"number | Complex | Fraction | BigNumber, Array":r.referToSelf(p=>(v,y)=>f(n(y),v,p,!0).valueOf()),"number | Complex | Fraction | BigNumber, Matrix":r.referToSelf(p=>(v,y)=>l(v,0)?u(y.size(),y.storage()):y.storage()==="dense"?f(y,v,p,!0):c(y,v,p,!0))})}),name$4g="floor",dependencies$4g=["typed","config","round","matrix","equalScalar","zeros","DenseMatrix"],bigTen=new Decimal(10),createFloorNumber=factory(name$4g,["typed","config","round"],t=>{var{typed:r,config:a,round:n}=t;function s(o){var l=Math.floor(o),u=n(o);return l===u?l:nearlyEqual$1(o,u,a.relTol,a.absTol)&&!nearlyEqual$1(o,l,a.relTol,a.absTol)?u:l}return r(name$4g,{number:s,"number, number":function(l,u){if(!isInteger$1(u))throw new RangeError("number of decimals in function floor must be an integer");if(u<0||u>15)throw new RangeError("number of decimals in floor number must be in range 0 - 15");var h=10**u;return s(l*h)/h}})}),createFloor=factory(name$4g,dependencies$4g,t=>{var{typed:r,config:a,round:n,matrix:s,equalScalar:o,zeros:l,DenseMatrix:u}=t,h=createMatAlgo11xS0s({typed:r,equalScalar:o}),c=createMatAlgo12xSfs({typed:r,DenseMatrix:u}),f=createMatAlgo14xDs({typed:r}),d=createFloorNumber({typed:r,config:a,round:n});function p(v){var y=(N,M)=>nearlyEqual(N,M,a.relTol,a.absTol),b=v.floor(),_=n(v);return b.eq(_)?b:y(v,_)&&!y(v,b)?_:b}return r("floor",{number:d.signatures.number,"number,number":d.signatures["number,number"],Complex:function(y){return y.floor()},"Complex, number":function(y,b){return y.floor(b)},"Complex, BigNumber":function(y,b){return y.floor(b.toNumber())},BigNumber:p,"BigNumber, BigNumber":function(y,b){var _=bigTen.pow(b);return p(y.mul(_)).div(_)},bigint:v=>v,"bigint, number":(v,y)=>v,"bigint, BigNumber":(v,y)=>v,Fraction:function(y){return y.floor()},"Fraction, number":function(y,b){return y.floor(b)},"Fraction, BigNumber":function(y,b){return y.floor(b.toNumber())},"Unit, number, Unit":r.referToSelf(v=>function(y,b,_){var N=y.toNumeric(_);return _.multiply(v(N,b))}),"Unit, BigNumber, Unit":r.referToSelf(v=>(y,b,_)=>v(y,b.toNumber(),_)),"Array | Matrix, number | BigNumber, Unit":r.referToSelf(v=>(y,b,_)=>deepMap(y,N=>v(N,b,_),!0)),"Array | Matrix | Unit, Unit":r.referToSelf(v=>(y,b)=>v(y,0,b)),"Array | Matrix":r.referToSelf(v=>y=>deepMap(y,v,!0)),"Array, number | BigNumber":r.referToSelf(v=>(y,b)=>deepMap(y,_=>v(_,b),!0)),"SparseMatrix, number | BigNumber":r.referToSelf(v=>(y,b)=>h(y,b,v,!1)),"DenseMatrix, number | BigNumber":r.referToSelf(v=>(y,b)=>f(y,b,v,!1)),"number | Complex | Fraction | BigNumber, Array":r.referToSelf(v=>(y,b)=>f(s(b),y,v,!0).valueOf()),"number | Complex | Fraction | BigNumber, Matrix":r.referToSelf(v=>(y,b)=>o(y,0)?l(b.size(),b.storage()):b.storage()==="dense"?f(b,y,v,!0):c(b,y,v,!0))})}),name$4f="matAlgo02xDS0",dependencies$4f=["typed","equalScalar"],createMatAlgo02xDS0=factory(name$4f,dependencies$4f,t=>{var{typed:r,equalScalar:a}=t;return function(s,o,l,u){var h=s._data,c=s._size,f=s._datatype||s.getDataType(),d=o._values,p=o._index,v=o._ptr,y=o._size,b=o._datatype||o._data===void 0?o._datatype:o.getDataType();if(c.length!==y.length)throw new DimensionError(c.length,y.length);if(c[0]!==y[0]||c[1]!==y[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+y+")");if(!d)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var _=c[0],N=c[1],M,C=a,$=0,w=l;typeof f=="string"&&f===b&&f!=="mixed"&&(M=f,C=r.find(a,[M,M]),$=r.convert(0,M),w=r.find(l,[M,M]));for(var A=[],X=[],O=[],G=0;G<N;G++){O[G]=X.length;for(var R=v[G],B=v[G+1],F=R;F<B;F++){var U=p[F],q=u?w(d[F],h[U][G]):w(h[U][G],d[F]);C(q,$)||(X.push(U),A.push(q))}}return O[N]=X.length,o.createSparseMatrix({values:A,index:X,ptr:O,size:[_,N],datatype:f===s._datatype&&b===o._datatype?M:void 0})}}),name$4e="matAlgo03xDSf",dependencies$4e=["typed"],createMatAlgo03xDSf=factory(name$4e,dependencies$4e,t=>{var{typed:r}=t;return function(n,s,o,l){var u=n._data,h=n._size,c=n._datatype||n.getDataType(),f=s._values,d=s._index,p=s._ptr,v=s._size,y=s._datatype||s._data===void 0?s._datatype:s.getDataType();if(h.length!==v.length)throw new DimensionError(h.length,v.length);if(h[0]!==v[0]||h[1]!==v[1])throw new RangeError("Dimension mismatch. Matrix A ("+h+") must match Matrix B ("+v+")");if(!f)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var b=h[0],_=h[1],N,M=0,C=o;typeof c=="string"&&c===y&&c!=="mixed"&&(N=c,M=r.convert(0,N),C=r.find(o,[N,N]));for(var $=[],w=0;w<b;w++)$[w]=[];for(var A=[],X=[],O=0;O<_;O++){for(var G=O+1,R=p[O],B=p[O+1],F=R;F<B;F++){var U=d[F];A[U]=l?C(f[F],u[U][O]):C(u[U][O],f[F]),X[U]=G}for(var q=0;q<b;q++)X[q]===G?$[q][O]=A[q]:$[q][O]=l?C(M,u[q][O]):C(u[q][O],M)}return n.createDenseMatrix({data:$,size:[b,_],datatype:c===n._datatype&&y===s._datatype?N:void 0})}}),name$4d="matAlgo05xSfSf",dependencies$4d=["typed","equalScalar"],createMatAlgo05xSfSf=factory(name$4d,dependencies$4d,t=>{var{typed:r,equalScalar:a}=t;return function(s,o,l){var u=s._values,h=s._index,c=s._ptr,f=s._size,d=s._datatype||s._data===void 0?s._datatype:s.getDataType(),p=o._values,v=o._index,y=o._ptr,b=o._size,_=o._datatype||o._data===void 0?o._datatype:o.getDataType();if(f.length!==b.length)throw new DimensionError(f.length,b.length);if(f[0]!==b[0]||f[1]!==b[1])throw new RangeError("Dimension mismatch. Matrix A ("+f+") must match Matrix B ("+b+")");var N=f[0],M=f[1],C,$=a,w=0,A=l;typeof d=="string"&&d===_&&d!=="mixed"&&(C=d,$=r.find(a,[C,C]),w=r.convert(0,C),A=r.find(l,[C,C]));var X=u&&p?[]:void 0,O=[],G=[],R=X?[]:void 0,B=X?[]:void 0,F=[],U=[],q,ee,z,Y;for(ee=0;ee<M;ee++){G[ee]=O.length;var K=ee+1;for(z=c[ee],Y=c[ee+1];z<Y;z++)q=h[z],O.push(q),F[q]=K,R&&(R[q]=u[z]);for(z=y[ee],Y=y[ee+1];z<Y;z++)q=v[z],F[q]!==K&&O.push(q),U[q]=K,B&&(B[q]=p[z]);if(X)for(z=G[ee];z<O.length;){q=O[z];var Z=F[q],ne=U[q];if(Z===K||ne===K){var j=Z===K?R[q]:w,V=ne===K?B[q]:w,L=A(j,V);$(L,w)?O.splice(z,1):(X.push(L),z++)}}}return G[M]=O.length,s.createSparseMatrix({values:X,index:O,ptr:G,size:[N,M],datatype:d===s._datatype&&_===o._datatype?C:void 0})}}),name$4c="matAlgo13xDD",dependencies$4c=["typed"],createMatAlgo13xDD=factory(name$4c,dependencies$4c,t=>{var{typed:r}=t;return function(s,o,l){var u=s._data,h=s._size,c=s._datatype,f=o._data,d=o._size,p=o._datatype,v=[];if(h.length!==d.length)throw new DimensionError(h.length,d.length);for(var y=0;y<h.length;y++){if(h[y]!==d[y])throw new RangeError("Dimension mismatch. Matrix A ("+h+") must match Matrix B ("+d+")");v[y]=h[y]}var b,_=l;typeof c=="string"&&c===p&&(b=c,_=r.find(l,[b,b]));var N=v.length>0?a(_,0,v,v[0],u,f):[];return s.createDenseMatrix({data:N,size:v,datatype:b})};function a(n,s,o,l,u,h){var c=[];if(s===o.length-1)for(var f=0;f<l;f++)c[f]=n(u[f],h[f]);else for(var d=0;d<l;d++)c[d]=a(n,s+1,o,o[s+1],u[d],h[d]);return c}});function broadcast(t,r){if(deepStrictEqual(t.size(),r.size()))return[t,r];var a=broadcastSizes(t.size(),r.size());return[t,r].map(n=>_broadcastTo(n,a))}function _broadcastTo(t,r){return deepStrictEqual(t.size(),r)?t:t.create(broadcastTo(t.valueOf(),r),t.datatype())}var name$4b="matrixAlgorithmSuite",dependencies$4b=["typed","matrix"],createMatrixAlgorithmSuite=factory(name$4b,dependencies$4b,t=>{var{typed:r,matrix:a}=t,n=createMatAlgo13xDD({typed:r}),s=createMatAlgo14xDs({typed:r});return function(l){var u=l.elop,h=l.SD||l.DS,c;u?(c={"DenseMatrix, DenseMatrix":(v,y)=>n(...broadcast(v,y),u),"Array, Array":(v,y)=>n(...broadcast(a(v),a(y)),u).valueOf(),"Array, DenseMatrix":(v,y)=>n(...broadcast(a(v),y),u),"DenseMatrix, Array":(v,y)=>n(...broadcast(v,a(y)),u)},l.SS&&(c["SparseMatrix, SparseMatrix"]=(v,y)=>l.SS(...broadcast(v,y),u,!1)),l.DS&&(c["DenseMatrix, SparseMatrix"]=(v,y)=>l.DS(...broadcast(v,y),u,!1),c["Array, SparseMatrix"]=(v,y)=>l.DS(...broadcast(a(v),y),u,!1)),h&&(c["SparseMatrix, DenseMatrix"]=(v,y)=>h(...broadcast(y,v),u,!0),c["SparseMatrix, Array"]=(v,y)=>h(...broadcast(a(y),v),u,!0))):(c={"DenseMatrix, DenseMatrix":r.referToSelf(v=>(y,b)=>n(...broadcast(y,b),v)),"Array, Array":r.referToSelf(v=>(y,b)=>n(...broadcast(a(y),a(b)),v).valueOf()),"Array, DenseMatrix":r.referToSelf(v=>(y,b)=>n(...broadcast(a(y),b),v)),"DenseMatrix, Array":r.referToSelf(v=>(y,b)=>n(...broadcast(y,a(b)),v))},l.SS&&(c["SparseMatrix, SparseMatrix"]=r.referToSelf(v=>(y,b)=>l.SS(...broadcast(y,b),v,!1))),l.DS&&(c["DenseMatrix, SparseMatrix"]=r.referToSelf(v=>(y,b)=>l.DS(...broadcast(y,b),v,!1)),c["Array, SparseMatrix"]=r.referToSelf(v=>(y,b)=>l.DS(...broadcast(a(y),b),v,!1))),h&&(c["SparseMatrix, DenseMatrix"]=r.referToSelf(v=>(y,b)=>h(...broadcast(b,y),v,!0)),c["SparseMatrix, Array"]=r.referToSelf(v=>(y,b)=>h(...broadcast(a(b),y),v,!0))));var f=l.scalar||"any",d=l.Ds||l.Ss;d&&(u?(c["DenseMatrix,"+f]=(v,y)=>s(v,y,u,!1),c[f+", DenseMatrix"]=(v,y)=>s(y,v,u,!0),c["Array,"+f]=(v,y)=>s(a(v),y,u,!1).valueOf(),c[f+", Array"]=(v,y)=>s(a(y),v,u,!0).valueOf()):(c["DenseMatrix,"+f]=r.referToSelf(v=>(y,b)=>s(y,b,v,!1)),c[f+", DenseMatrix"]=r.referToSelf(v=>(y,b)=>s(b,y,v,!0)),c["Array,"+f]=r.referToSelf(v=>(y,b)=>s(a(y),b,v,!1).valueOf()),c[f+", Array"]=r.referToSelf(v=>(y,b)=>s(a(b),y,v,!0).valueOf())));var p=l.sS!==void 0?l.sS:l.Ss;return u?(l.Ss&&(c["SparseMatrix,"+f]=(v,y)=>l.Ss(v,y,u,!1)),p&&(c[f+", SparseMatrix"]=(v,y)=>p(y,v,u,!0))):(l.Ss&&(c["SparseMatrix,"+f]=r.referToSelf(v=>(y,b)=>l.Ss(y,b,v,!1))),p&&(c[f+", SparseMatrix"]=r.referToSelf(v=>(y,b)=>p(b,y,v,!0)))),u&&u.signatures&&extend(c,u.signatures),c}}),name$4a="mod",dependencies$4a=["typed","config","round","matrix","equalScalar","zeros","DenseMatrix","concat"],createMod=factory(name$4a,dependencies$4a,t=>{var{typed:r,config:a,round:n,matrix:s,equalScalar:o,zeros:l,DenseMatrix:u,concat:h}=t,c=createFloor({typed:r,config:a,round:n,matrix:s,equalScalar:o,zeros:l,DenseMatrix:u}),f=createMatAlgo02xDS0({typed:r,equalScalar:o}),d=createMatAlgo03xDSf({typed:r}),p=createMatAlgo05xSfSf({typed:r,equalScalar:o}),v=createMatAlgo11xS0s({typed:r,equalScalar:o}),y=createMatAlgo12xSfs({typed:r,DenseMatrix:u}),b=createMatrixAlgorithmSuite({typed:r,matrix:s,concat:h});return r(name$4a,{"number, number":_,"BigNumber, BigNumber":function(M,C){return C.isZero()?M:M.sub(C.mul(c(M.div(C))))},"bigint, bigint":function(M,C){if(C===0n)return M;if(M<0){var $=M%C;return $===0n?$:$+C}return M%C},"Fraction, Fraction":function(M,C){return C.equals(0)?M:M.sub(C.mul(c(M.div(C))))}},b({SS:p,DS:d,SD:f,Ss:v,sS:y}));function _(N,M){return M===0?N:N-M*c(N/M)}}),name$49="matAlgo01xDSid",dependencies$49=["typed"],createMatAlgo01xDSid=factory(name$49,dependencies$49,t=>{var{typed:r}=t;return function(n,s,o,l){var u=n._data,h=n._size,c=n._datatype||n.getDataType(),f=s._values,d=s._index,p=s._ptr,v=s._size,y=s._datatype||s._data===void 0?s._datatype:s.getDataType();if(h.length!==v.length)throw new DimensionError(h.length,v.length);if(h[0]!==v[0]||h[1]!==v[1])throw new RangeError("Dimension mismatch. Matrix A ("+h+") must match Matrix B ("+v+")");if(!f)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var b=h[0],_=h[1],N=typeof c=="string"&&c!=="mixed"&&c===y?c:void 0,M=N?r.find(o,[N,N]):o,C,$,w=[];for(C=0;C<b;C++)w[C]=[];var A=[],X=[];for($=0;$<_;$++){for(var O=$+1,G=p[$],R=p[$+1],B=G;B<R;B++)C=d[B],A[C]=l?M(f[B],u[C][$]):M(u[C][$],f[B]),X[C]=O;for(C=0;C<b;C++)X[C]===O?w[C][$]=A[C]:w[C][$]=u[C][$]}return n.createDenseMatrix({data:w,size:[b,_],datatype:c===n._datatype&&y===s._datatype?N:void 0})}}),name$48="matAlgo04xSidSid",dependencies$48=["typed","equalScalar"],createMatAlgo04xSidSid=factory(name$48,dependencies$48,t=>{var{typed:r,equalScalar:a}=t;return function(s,o,l){var u=s._values,h=s._index,c=s._ptr,f=s._size,d=s._datatype||s._data===void 0?s._datatype:s.getDataType(),p=o._values,v=o._index,y=o._ptr,b=o._size,_=o._datatype||o._data===void 0?o._datatype:o.getDataType();if(f.length!==b.length)throw new DimensionError(f.length,b.length);if(f[0]!==b[0]||f[1]!==b[1])throw new RangeError("Dimension mismatch. Matrix A ("+f+") must match Matrix B ("+b+")");var N=f[0],M=f[1],C,$=a,w=0,A=l;typeof d=="string"&&d===_&&d!=="mixed"&&(C=d,$=r.find(a,[C,C]),w=r.convert(0,C),A=r.find(l,[C,C]));var X=u&&p?[]:void 0,O=[],G=[],R=u&&p?[]:void 0,B=u&&p?[]:void 0,F=[],U=[],q,ee,z,Y,K;for(ee=0;ee<M;ee++){G[ee]=O.length;var Z=ee+1;for(Y=c[ee],K=c[ee+1],z=Y;z<K;z++)q=h[z],O.push(q),F[q]=Z,R&&(R[q]=u[z]);for(Y=y[ee],K=y[ee+1],z=Y;z<K;z++)if(q=v[z],F[q]===Z){if(R){var ne=A(R[q],p[z]);$(ne,w)?F[q]=null:R[q]=ne}}else O.push(q),U[q]=Z,B&&(B[q]=p[z]);if(R&&B)for(z=G[ee];z<O.length;)q=O[z],F[q]===Z?(X[z]=R[q],z++):U[q]===Z?(X[z]=B[q],z++):O.splice(z,1)}return G[M]=O.length,s.createSparseMatrix({values:X,index:O,ptr:G,size:[N,M],datatype:d===s._datatype&&_===o._datatype?C:void 0})}}),name$47="matAlgo10xSids",dependencies$47=["typed","DenseMatrix"],createMatAlgo10xSids=factory(name$47,dependencies$47,t=>{var{typed:r,DenseMatrix:a}=t;return function(s,o,l,u){var h=s._values,c=s._index,f=s._ptr,d=s._size,p=s._datatype;if(!h)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var v=d[0],y=d[1],b,_=l;typeof p=="string"&&(b=p,o=r.convert(o,b),_=r.find(l,[b,b]));for(var N=[],M=[],C=[],$=0;$<y;$++){for(var w=$+1,A=f[$],X=f[$+1],O=A;O<X;O++){var G=c[O];M[G]=h[O],C[G]=w}for(var R=0;R<v;R++)$===0&&(N[R]=[]),C[R]===w?N[R][$]=u?_(o,M[R]):_(M[R],o):N[R][$]=o}return new a({data:N,size:[v,y],datatype:b})}});function ArgumentsError(t,r,a,n){if(!(this instanceof ArgumentsError))throw new SyntaxError("Constructor must be called with the new operator");this.fn=t,this.count=r,this.min=a,this.max=n,this.message="Wrong number of arguments in function "+t+" ("+r+" provided, "+a+(n!=null?"-"+n:"")+" expected)",this.stack=new Error().stack}ArgumentsError.prototype=new Error;ArgumentsError.prototype.constructor=Error;ArgumentsError.prototype.name="ArgumentsError";ArgumentsError.prototype.isArgumentsError=!0;var name$46="gcd",dependencies$46=["typed","config","round","matrix","equalScalar","zeros","BigNumber","DenseMatrix","concat"],gcdTypes="number | BigNumber | Fraction | Matrix | Array",gcdManyTypesSignature="".concat(gcdTypes,", ").concat(gcdTypes,", ...").concat(gcdTypes);function is1d(t){return!t.some(r=>Array.isArray(r))}var createGcd=factory(name$46,dependencies$46,t=>{var{typed:r,matrix:a,config:n,round:s,equalScalar:o,zeros:l,BigNumber:u,DenseMatrix:h,concat:c}=t,f=createMod({typed:r,config:n,round:s,matrix:a,equalScalar:o,zeros:l,DenseMatrix:h,concat:c}),d=createMatAlgo01xDSid({typed:r}),p=createMatAlgo04xSidSid({typed:r,equalScalar:o}),v=createMatAlgo10xSids({typed:r,DenseMatrix:h}),y=createMatrixAlgorithmSuite({typed:r,matrix:a,concat:c});return r(name$46,{"number, number":b,"BigNumber, BigNumber":_,"Fraction, Fraction":(N,M)=>N.gcd(M)},y({SS:p,DS:d,Ss:v}),{[gcdManyTypesSignature]:r.referToSelf(N=>(M,C,$)=>{for(var w=N(M,C),A=0;A<$.length;A++)w=N(w,$[A]);return w}),Array:r.referToSelf(N=>M=>{if(M.length===1&&Array.isArray(M[0])&&is1d(M[0]))return N(...M[0]);if(is1d(M))return N(...M);throw new ArgumentsError("gcd() supports only 1d matrices!")}),Matrix:r.referToSelf(N=>M=>N(M.toArray()))});function b(N,M){if(!isInteger$1(N)||!isInteger$1(M))throw new Error("Parameters in function gcd must be integer numbers");for(var C;M!==0;)C=f(N,M),N=M,M=C;return N<0?-N:N}function _(N,M){if(!N.isInt()||!M.isInt())throw new Error("Parameters in function gcd must be integer numbers");for(var C=new u(0);!M.isZero();){var $=f(N,M);N=M,M=$}return N.lt(C)?N.neg():N}}),name$45="matAlgo06xS0S0",dependencies$45=["typed","equalScalar"],createMatAlgo06xS0S0=factory(name$45,dependencies$45,t=>{var{typed:r,equalScalar:a}=t;return function(s,o,l){var u=s._values,h=s._size,c=s._datatype||s._data===void 0?s._datatype:s.getDataType(),f=o._values,d=o._size,p=o._datatype||o._data===void 0?o._datatype:o.getDataType();if(h.length!==d.length)throw new DimensionError(h.length,d.length);if(h[0]!==d[0]||h[1]!==d[1])throw new RangeError("Dimension mismatch. Matrix A ("+h+") must match Matrix B ("+d+")");var v=h[0],y=h[1],b,_=a,N=0,M=l;typeof c=="string"&&c===p&&c!=="mixed"&&(b=c,_=r.find(a,[b,b]),N=r.convert(0,b),M=r.find(l,[b,b]));for(var C=u&&f?[]:void 0,$=[],w=[],A=C?[]:void 0,X=[],O=[],G=0;G<y;G++){w[G]=$.length;var R=G+1;if(scatter(s,G,X,A,O,R,$,M),scatter(o,G,X,A,O,R,$,M),A)for(var B=w[G];B<$.length;){var F=$[B];if(O[F]===R){var U=A[F];_(U,N)?$.splice(B,1):(C.push(U),B++)}else $.splice(B,1)}else for(var q=w[G];q<$.length;){var ee=$[q];O[ee]!==R?$.splice(q,1):q++}}return w[y]=$.length,s.createSparseMatrix({values:C,index:$,ptr:w,size:[v,y],datatype:c===s._datatype&&p===o._datatype?b:void 0})}}),name$44="lcm",dependencies$44=["typed","matrix","equalScalar","concat"],createLcm=factory(name$44,dependencies$44,t=>{var{typed:r,matrix:a,equalScalar:n,concat:s}=t,o=createMatAlgo02xDS0({typed:r,equalScalar:n}),l=createMatAlgo06xS0S0({typed:r,equalScalar:n}),u=createMatAlgo11xS0s({typed:r,equalScalar:n}),h=createMatrixAlgorithmSuite({typed:r,matrix:a,concat:s}),c="number | BigNumber | Fraction | Matrix | Array",f={};return f["".concat(c,", ").concat(c,", ...").concat(c)]=r.referToSelf(p=>(v,y,b)=>{for(var _=p(v,y),N=0;N<b.length;N++)_=p(_,b[N]);return _}),r(name$44,{"number, number":lcmNumber,"BigNumber, BigNumber":d,"Fraction, Fraction":(p,v)=>p.lcm(v)},h({SS:l,DS:o,Ss:u}),f);function d(p,v){if(!p.isInt()||!v.isInt())throw new Error("Parameters in function lcm must be integer numbers");if(p.isZero())return p;if(v.isZero())return v;for(var y=p.times(v);!v.isZero();){var b=v;v=p.mod(b),p=b}return y.div(p).abs()}});function promoteLogarithm(t,r,a,n){return function(s){if(s>0||a.predictable){if(s<=0)return NaN;var o=s.toString(16),l=o.substring(0,15);return t*(o.length-l.length)+r(+("0x"+l))}return n(s.toNumber())}}var name$43="log10",dependencies$43=["typed","config","Complex"],log16=log10Number(16),createLog10=factory(name$43,dependencies$43,t=>{var{typed:r,config:a,Complex:n}=t;function s(l){return l.log().div(Math.LN10)}function o(l){return s(new n(l,0))}return r(name$43,{number:function(u){return u>=0||a.predictable?log10Number(u):o(u)},bigint:promoteLogarithm(log16,log10Number,a,o),Complex:s,BigNumber:function(u){return!u.isNegative()||a.predictable?u.log():o(u.toNumber())},"Array | Matrix":r.referToSelf(l=>u=>deepMap(u,l))})}),name$42="log2",dependencies$42=["typed","config","Complex"],createLog2=factory(name$42,dependencies$42,t=>{var{typed:r,config:a,Complex:n}=t;function s(l){return o(new n(l,0))}return r(name$42,{number:function(u){return u>=0||a.predictable?log2Number(u):s(u)},bigint:promoteLogarithm(4,log2Number,a,s),Complex:o,BigNumber:function(u){return!u.isNegative()||a.predictable?u.log(2):s(u.toNumber())},"Array | Matrix":r.referToSelf(l=>u=>deepMap(u,l))});function o(l){var u=Math.sqrt(l.re*l.re+l.im*l.im);return new n(Math.log2?Math.log2(u):Math.log(u)/Math.LN2,Math.atan2(l.im,l.re)/Math.LN2)}}),name$41="multiplyScalar",dependencies$41=["typed"],createMultiplyScalar=factory(name$41,dependencies$41,t=>{var{typed:r}=t;return r("multiplyScalar",{"number, number":multiplyNumber,"Complex, Complex":function(n,s){return n.mul(s)},"BigNumber, BigNumber":function(n,s){return n.times(s)},"bigint, bigint":function(n,s){return n*s},"Fraction, Fraction":function(n,s){return n.mul(s)},"number | Fraction | BigNumber | Complex, Unit":(a,n)=>n.multiply(a),"Unit, number | Fraction | BigNumber | Complex | Unit":(a,n)=>a.multiply(n)})}),name$40="multiply",dependencies$40=["typed","matrix","addScalar","multiplyScalar","equalScalar","dot"],createMultiply=factory(name$40,dependencies$40,t=>{var{typed:r,matrix:a,addScalar:n,multiplyScalar:s,equalScalar:o,dot:l}=t,u=createMatAlgo11xS0s({typed:r,equalScalar:o}),h=createMatAlgo14xDs({typed:r});function c(w,A){switch(w.length){case 1:switch(A.length){case 1:if(w[0]!==A[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(w[0]!==A[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+w[0]+") must match Matrix rows ("+A[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+A.length+" dimensions)")}break;case 2:switch(A.length){case 1:if(w[1]!==A[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+w[1]+") must match Vector length ("+A[0]+")");break;case 2:if(w[1]!==A[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+w[1]+") must match Matrix B rows ("+A[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+A.length+" dimensions)")}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+w.length+" dimensions)")}}function f(w,A,X){if(X===0)throw new Error("Cannot multiply two empty vectors");return l(w,A)}function d(w,A){if(A.storage()!=="dense")throw new Error("Support for SparseMatrix not implemented");return p(w,A)}function p(w,A){var X=w._data,O=w._size,G=w._datatype||w.getDataType(),R=A._data,B=A._size,F=A._datatype||A.getDataType(),U=O[0],q=B[1],ee,z=n,Y=s;G&&F&&G===F&&typeof G=="string"&&G!=="mixed"&&(ee=G,z=r.find(n,[ee,ee]),Y=r.find(s,[ee,ee]));for(var K=[],Z=0;Z<q;Z++){for(var ne=Y(X[0],R[0][Z]),j=1;j<U;j++)ne=z(ne,Y(X[j],R[j][Z]));K[Z]=ne}return w.createDenseMatrix({data:K,size:[q],datatype:G===w._datatype&&F===A._datatype?ee:void 0})}var v=r("_multiplyMatrixVector",{"DenseMatrix, any":b,"SparseMatrix, any":M}),y=r("_multiplyMatrixMatrix",{"DenseMatrix, DenseMatrix":_,"DenseMatrix, SparseMatrix":N,"SparseMatrix, DenseMatrix":C,"SparseMatrix, SparseMatrix":$});function b(w,A){var X=w._data,O=w._size,G=w._datatype||w.getDataType(),R=A._data,B=A._datatype||A.getDataType(),F=O[0],U=O[1],q,ee=n,z=s;G&&B&&G===B&&typeof G=="string"&&G!=="mixed"&&(q=G,ee=r.find(n,[q,q]),z=r.find(s,[q,q]));for(var Y=[],K=0;K<F;K++){for(var Z=X[K],ne=z(Z[0],R[0]),j=1;j<U;j++)ne=ee(ne,z(Z[j],R[j]));Y[K]=ne}return w.createDenseMatrix({data:Y,size:[F],datatype:G===w._datatype&&B===A._datatype?q:void 0})}function _(w,A){var X=w._data,O=w._size,G=w._datatype||w.getDataType(),R=A._data,B=A._size,F=A._datatype||A.getDataType(),U=O[0],q=O[1],ee=B[1],z,Y=n,K=s;G&&F&&G===F&&typeof G=="string"&&G!=="mixed"&&G!=="mixed"&&(z=G,Y=r.find(n,[z,z]),K=r.find(s,[z,z]));for(var Z=[],ne=0;ne<U;ne++){var j=X[ne];Z[ne]=[];for(var V=0;V<ee;V++){for(var L=K(j[0],R[0][V]),ae=1;ae<q;ae++)L=Y(L,K(j[ae],R[ae][V]));Z[ne][V]=L}}return w.createDenseMatrix({data:Z,size:[U,ee],datatype:G===w._datatype&&F===A._datatype?z:void 0})}function N(w,A){var X=w._data,O=w._size,G=w._datatype||w.getDataType(),R=A._values,B=A._index,F=A._ptr,U=A._size,q=A._datatype||A._data===void 0?A._datatype:A.getDataType();if(!R)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var ee=O[0],z=U[1],Y,K=n,Z=s,ne=o,j=0;G&&q&&G===q&&typeof G=="string"&&G!=="mixed"&&(Y=G,K=r.find(n,[Y,Y]),Z=r.find(s,[Y,Y]),ne=r.find(o,[Y,Y]),j=r.convert(0,Y));for(var V=[],L=[],ae=[],W=A.createSparseMatrix({values:V,index:L,ptr:ae,size:[ee,z],datatype:G===w._datatype&&q===A._datatype?Y:void 0}),ve=0;ve<z;ve++){ae[ve]=L.length;var de=F[ve],se=F[ve+1];if(se>de)for(var ie=0,ce=0;ce<ee;ce++){for(var xe=ce+1,fe=void 0,Ne=de;Ne<se;Ne++){var we=B[Ne];ie!==xe?(fe=Z(X[ce][we],R[Ne]),ie=xe):fe=K(fe,Z(X[ce][we],R[Ne]))}ie===xe&&!ne(fe,j)&&(L.push(ce),V.push(fe))}}return ae[z]=L.length,W}function M(w,A){var X=w._values,O=w._index,G=w._ptr,R=w._datatype||w._data===void 0?w._datatype:w.getDataType();if(!X)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var B=A._data,F=A._datatype||A.getDataType(),U=w._size[0],q=A._size[0],ee=[],z=[],Y=[],K,Z=n,ne=s,j=o,V=0;R&&F&&R===F&&typeof R=="string"&&R!=="mixed"&&(K=R,Z=r.find(n,[K,K]),ne=r.find(s,[K,K]),j=r.find(o,[K,K]),V=r.convert(0,K));var L=[],ae=[];Y[0]=0;for(var W=0;W<q;W++){var ve=B[W];if(!j(ve,V))for(var de=G[W],se=G[W+1],ie=de;ie<se;ie++){var ce=O[ie];ae[ce]?L[ce]=Z(L[ce],ne(ve,X[ie])):(ae[ce]=!0,z.push(ce),L[ce]=ne(ve,X[ie]))}}for(var xe=z.length,fe=0;fe<xe;fe++){var Ne=z[fe];ee[fe]=L[Ne]}return Y[1]=z.length,w.createSparseMatrix({values:ee,index:z,ptr:Y,size:[U,1],datatype:R===w._datatype&&F===A._datatype?K:void 0})}function C(w,A){var X=w._values,O=w._index,G=w._ptr,R=w._datatype||w._data===void 0?w._datatype:w.getDataType();if(!X)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var B=A._data,F=A._datatype||A.getDataType(),U=w._size[0],q=A._size[0],ee=A._size[1],z,Y=n,K=s,Z=o,ne=0;R&&F&&R===F&&typeof R=="string"&&R!=="mixed"&&(z=R,Y=r.find(n,[z,z]),K=r.find(s,[z,z]),Z=r.find(o,[z,z]),ne=r.convert(0,z));for(var j=[],V=[],L=[],ae=w.createSparseMatrix({values:j,index:V,ptr:L,size:[U,ee],datatype:R===w._datatype&&F===A._datatype?z:void 0}),W=[],ve=[],de=0;de<ee;de++){L[de]=V.length;for(var se=de+1,ie=0;ie<q;ie++){var ce=B[ie][de];if(!Z(ce,ne))for(var xe=G[ie],fe=G[ie+1],Ne=xe;Ne<fe;Ne++){var we=O[Ne];ve[we]!==se?(ve[we]=se,V.push(we),W[we]=K(ce,X[Ne])):W[we]=Y(W[we],K(ce,X[Ne]))}}for(var Pe=L[de],Ie=V.length,Ye=Pe;Ye<Ie;Ye++){var Le=V[Ye];j[Ye]=W[Le]}}return L[ee]=V.length,ae}function $(w,A){var X=w._values,O=w._index,G=w._ptr,R=w._datatype||w._data===void 0?w._datatype:w.getDataType(),B=A._values,F=A._index,U=A._ptr,q=A._datatype||A._data===void 0?A._datatype:A.getDataType(),ee=w._size[0],z=A._size[1],Y=X&&B,K,Z=n,ne=s;R&&q&&R===q&&typeof R=="string"&&R!=="mixed"&&(K=R,Z=r.find(n,[K,K]),ne=r.find(s,[K,K]));for(var j=Y?[]:void 0,V=[],L=[],ae=w.createSparseMatrix({values:j,index:V,ptr:L,size:[ee,z],datatype:R===w._datatype&&q===A._datatype?K:void 0}),W=Y?[]:void 0,ve=[],de,se,ie,ce,xe,fe,Ne,we,Pe=0;Pe<z;Pe++){L[Pe]=V.length;var Ie=Pe+1;for(xe=U[Pe],fe=U[Pe+1],ce=xe;ce<fe;ce++)if(we=F[ce],Y)for(se=G[we],ie=G[we+1],de=se;de<ie;de++)Ne=O[de],ve[Ne]!==Ie?(ve[Ne]=Ie,V.push(Ne),W[Ne]=ne(B[ce],X[de])):W[Ne]=Z(W[Ne],ne(B[ce],X[de]));else for(se=G[we],ie=G[we+1],de=se;de<ie;de++)Ne=O[de],ve[Ne]!==Ie&&(ve[Ne]=Ie,V.push(Ne));if(Y)for(var Ye=L[Pe],Le=V.length,Ve=Ye;Ve<Le;Ve++){var Ze=V[Ve];j[Ve]=W[Ze]}}return L[z]=V.length,ae}return r(name$40,s,{"Array, Array":r.referTo("Matrix, Matrix",w=>(A,X)=>{c(arraySize(A),arraySize(X));var O=w(a(A),a(X));return isMatrix(O)?O.valueOf():O}),"Matrix, Matrix":function(A,X){var O=A.size(),G=X.size();return c(O,G),O.length===1?G.length===1?f(A,X,O[0]):d(A,X):G.length===1?v(A,X):y(A,X)},"Matrix, Array":r.referTo("Matrix,Matrix",w=>(A,X)=>w(A,a(X))),"Array, Matrix":r.referToSelf(w=>(A,X)=>w(a(A,X.storage()),X)),"SparseMatrix, any":function(A,X){return u(A,X,s,!1)},"DenseMatrix, any":function(A,X){return h(A,X,s,!1)},"any, SparseMatrix":function(A,X){return u(X,A,s,!0)},"any, DenseMatrix":function(A,X){return h(X,A,s,!0)},"Array, any":function(A,X){return h(a(A),X,s,!1).valueOf()},"any, Array":function(A,X){return h(a(X),A,s,!0).valueOf()},"any, any":s,"any, any, ...any":r.referToSelf(w=>(A,X,O)=>{for(var G=w(A,X),R=0;R<O.length;R++)G=w(G,O[R]);return G})})}),name$3$="nthRoot",dependencies$3$=["typed","matrix","equalScalar","BigNumber","concat"],createNthRoot=factory(name$3$,dependencies$3$,t=>{var{typed:r,matrix:a,equalScalar:n,BigNumber:s,concat:o}=t,l=createMatAlgo01xDSid({typed:r}),u=createMatAlgo02xDS0({typed:r,equalScalar:n}),h=createMatAlgo06xS0S0({typed:r,equalScalar:n}),c=createMatAlgo11xS0s({typed:r,equalScalar:n}),f=createMatrixAlgorithmSuite({typed:r,matrix:a,concat:o});function d(){throw new Error("Complex number not supported in function nthRoot. Use nthRoots instead.")}return r(name$3$,{number:nthRootNumber,"number, number":nthRootNumber,BigNumber:v=>p(v,new s(2)),"BigNumber, BigNumber":p,Complex:d,"Complex, number":d,Array:r.referTo("DenseMatrix,number",v=>y=>v(a(y),2).valueOf()),DenseMatrix:r.referTo("DenseMatrix,number",v=>y=>v(y,2)),SparseMatrix:r.referTo("SparseMatrix,number",v=>y=>v(y,2)),"SparseMatrix, SparseMatrix":r.referToSelf(v=>(y,b)=>{if(b.density()===1)return h(y,b,v);throw new Error("Root must be non-zero")}),"DenseMatrix, SparseMatrix":r.referToSelf(v=>(y,b)=>{if(b.density()===1)return l(y,b,v,!1);throw new Error("Root must be non-zero")}),"Array, SparseMatrix":r.referTo("DenseMatrix,SparseMatrix",v=>(y,b)=>v(a(y),b)),"number | BigNumber, SparseMatrix":r.referToSelf(v=>(y,b)=>{if(b.density()===1)return c(b,y,v,!0);throw new Error("Root must be non-zero")})},f({scalar:"number | BigNumber",SD:u,Ss:c,sS:!1}));function p(v,y){var b=s.precision,_=s.clone({precision:b+2}),N=new s(0),M=new _(1),C=y.isNegative();if(C&&(y=y.neg()),y.isZero())throw new Error("Root must be non-zero");if(v.isNegative()&&!y.abs().mod(2).equals(1))throw new Error("Root must be odd when a is negative.");if(v.isZero())return C?new _(1/0):0;if(!v.isFinite())return C?N:v;var $=v.abs().pow(M.div(y));return $=v.isNeg()?$.neg():$,new s((C?M.div($):$).toPrecision(b))}}),name$3_="sign",dependencies$3_=["typed","BigNumber","Fraction","complex"],createSign=factory(name$3_,dependencies$3_,t=>{var{typed:r,BigNumber:a,complex:n,Fraction:s}=t;return r(name$3_,{number:signNumber,Complex:function(l){return l.im===0?n(signNumber(l.re)):l.sign()},BigNumber:function(l){return new a(l.cmp(0))},bigint:function(l){return l>0n?1n:l<0n?-1n:0n},Fraction:function(l){return l.n===0n?new s(0):new s(l.s)},"Array | Matrix":r.referToSelf(o=>l=>deepMap(l,o,!0)),Unit:r.referToSelf(o=>l=>{if(!l._isDerived()&&l.units[0].unit.offset!==0)throw new TypeError("sign is ambiguous for units with offset");return r.find(o,l.valueType())(l.value)})})}),name$3Z="sqrt",dependencies$3Z=["config","typed","Complex"],createSqrt=factory(name$3Z,dependencies$3Z,t=>{var{config:r,typed:a,Complex:n}=t;return a("sqrt",{number:s,Complex:function(l){return l.sqrt()},BigNumber:function(l){return!l.isNegative()||r.predictable?l.sqrt():s(l.toNumber())},Unit:function(l){return l.pow(.5)}});function s(o){return isNaN(o)?NaN:o>=0||r.predictable?Math.sqrt(o):new n(o,0).sqrt()}}),name$3Y="square",dependencies$3Y=["typed"],createSquare=factory(name$3Y,dependencies$3Y,t=>{var{typed:r}=t;return r(name$3Y,{number:squareNumber,Complex:function(n){return n.mul(n)},BigNumber:function(n){return n.times(n)},bigint:function(n){return n*n},Fraction:function(n){return n.mul(n)},Unit:function(n){return n.pow(2)}})}),name$3X="subtract",dependencies$3X=["typed","matrix","equalScalar","subtractScalar","unaryMinus","DenseMatrix","concat"],createSubtract=factory(name$3X,dependencies$3X,t=>{var{typed:r,matrix:a,equalScalar:n,subtractScalar:s,unaryMinus:o,DenseMatrix:l,concat:u}=t,h=createMatAlgo01xDSid({typed:r}),c=createMatAlgo03xDSf({typed:r}),f=createMatAlgo05xSfSf({typed:r,equalScalar:n}),d=createMatAlgo10xSids({typed:r,DenseMatrix:l}),p=createMatAlgo12xSfs({typed:r,DenseMatrix:l}),v=createMatrixAlgorithmSuite({typed:r,matrix:a,concat:u});return r(name$3X,{"any, any":s},v({elop:s,SS:f,DS:h,SD:c,Ss:p,sS:d}))}),name$3W="xgcd",dependencies$3W=["typed","config","matrix","BigNumber"],createXgcd=factory(name$3W,dependencies$3W,t=>{var{typed:r,config:a,matrix:n,BigNumber:s}=t;return r(name$3W,{"number, number":function(u,h){var c=xgcdNumber(u,h);return a.matrix==="Array"?c:n(c)},"BigNumber, BigNumber":o});function o(l,u){var h,c,f,d=new s(0),p=new s(1),v=d,y=p,b=p,_=d;if(!l.isInt()||!u.isInt())throw new Error("Parameters in function xgcd must be integer numbers");for(;!u.isZero();)c=l.div(u).floor(),f=l.mod(u),h=v,v=y.minus(c.times(v)),y=h,h=b,b=_.minus(c.times(b)),_=h,l=u,u=f;var N;return l.lt(d)?N=[l.neg(),y.neg(),_.neg()]:N=[l,l.isZero()?0:y,_],a.matrix==="Array"?N:n(N)}}),name$3V="invmod",dependencies$3V=["typed","config","BigNumber","xgcd","equal","smaller","mod","add","isInteger"],createInvmod=factory(name$3V,dependencies$3V,t=>{var{typed:r,config:a,BigNumber:n,xgcd:s,equal:o,smaller:l,mod:u,add:h,isInteger:c}=t;return r(name$3V,{"number, number":f,"BigNumber, BigNumber":f});function f(d,p){if(!c(d)||!c(p))throw new Error("Parameters in function invmod must be integer numbers");if(d=u(d,p),o(p,0))throw new Error("Divisor must be non zero");var v=s(d,p);v=v.valueOf();var[y,b]=v;return o(y,n(1))?(b=u(b,p),l(b,n(0))&&(b=h(b,p)),b):NaN}}),name$3U="matAlgo09xS0Sf",dependencies$3U=["typed","equalScalar"],createMatAlgo09xS0Sf=factory(name$3U,dependencies$3U,t=>{var{typed:r,equalScalar:a}=t;return function(s,o,l){var u=s._values,h=s._index,c=s._ptr,f=s._size,d=s._datatype||s._data===void 0?s._datatype:s.getDataType(),p=o._values,v=o._index,y=o._ptr,b=o._size,_=o._datatype||o._data===void 0?o._datatype:o.getDataType();if(f.length!==b.length)throw new DimensionError(f.length,b.length);if(f[0]!==b[0]||f[1]!==b[1])throw new RangeError("Dimension mismatch. Matrix A ("+f+") must match Matrix B ("+b+")");var N=f[0],M=f[1],C,$=a,w=0,A=l;typeof d=="string"&&d===_&&d!=="mixed"&&(C=d,$=r.find(a,[C,C]),w=r.convert(0,C),A=r.find(l,[C,C]));var X=u&&p?[]:void 0,O=[],G=[],R=X?[]:void 0,B=[],F,U,q,ee,z;for(U=0;U<M;U++){G[U]=O.length;var Y=U+1;if(R)for(ee=y[U],z=y[U+1],q=ee;q<z;q++)F=v[q],B[F]=Y,R[F]=p[q];for(ee=c[U],z=c[U+1],q=ee;q<z;q++)if(F=h[q],R){var K=B[F]===Y?R[F]:w,Z=A(u[q],K);$(Z,w)||(O.push(F),X.push(Z))}else O.push(F)}return G[M]=O.length,s.createSparseMatrix({values:X,index:O,ptr:G,size:[N,M],datatype:d===s._datatype&&_===o._datatype?C:void 0})}}),name$3T="dotMultiply",dependencies$3T=["typed","matrix","equalScalar","multiplyScalar","concat"],createDotMultiply=factory(name$3T,dependencies$3T,t=>{var{typed:r,matrix:a,equalScalar:n,multiplyScalar:s,concat:o}=t,l=createMatAlgo02xDS0({typed:r,equalScalar:n}),u=createMatAlgo09xS0Sf({typed:r,equalScalar:n}),h=createMatAlgo11xS0s({typed:r,equalScalar:n}),c=createMatrixAlgorithmSuite({typed:r,matrix:a,concat:o});return r(name$3T,c({elop:s,SS:u,DS:l,Ss:h}))});function bitAndBigNumber(t,r){if(t.isFinite()&&!t.isInteger()||r.isFinite()&&!r.isInteger())throw new Error("Integers expected in function bitAnd");var a=t.constructor;if(t.isNaN()||r.isNaN())return new a(NaN);if(t.isZero()||r.eq(-1)||t.eq(r))return t;if(r.isZero()||t.eq(-1))return r;if(!t.isFinite()||!r.isFinite()){if(!t.isFinite()&&!r.isFinite())return t.isNegative()===r.isNegative()?t:new a(0);if(!t.isFinite())return r.isNegative()?t:t.isNegative()?new a(0):r;if(!r.isFinite())return t.isNegative()?r:r.isNegative()?new a(0):t}return bitwise(t,r,function(n,s){return n&s})}function bitNotBigNumber(t){if(t.isFinite()&&!t.isInteger())throw new Error("Integer expected in function bitNot");var r=t.constructor,a=r.precision;r.config({precision:1e9});var n=t.plus(new r(1));return n.s=-n.s||null,r.config({precision:a}),n}function bitOrBigNumber(t,r){if(t.isFinite()&&!t.isInteger()||r.isFinite()&&!r.isInteger())throw new Error("Integers expected in function bitOr");var a=t.constructor;if(t.isNaN()||r.isNaN())return new a(NaN);var n=new a(-1);return t.isZero()||r.eq(n)||t.eq(r)?r:r.isZero()||t.eq(n)?t:!t.isFinite()||!r.isFinite()?!t.isFinite()&&!t.isNegative()&&r.isNegative()||t.isNegative()&&!r.isNegative()&&!r.isFinite()?n:t.isNegative()&&r.isNegative()?t.isFinite()?t:r:t.isFinite()?r:t:bitwise(t,r,function(s,o){return s|o})}function bitwise(t,r,a){var n=t.constructor,s,o,l=+(t.s<0),u=+(r.s<0);if(l){s=decCoefficientToBinaryString(bitNotBigNumber(t));for(var h=0;h<s.length;++h)s[h]^=1}else s=decCoefficientToBinaryString(t);if(u){o=decCoefficientToBinaryString(bitNotBigNumber(r));for(var c=0;c<o.length;++c)o[c]^=1}else o=decCoefficientToBinaryString(r);var f,d,p;s.length<=o.length?(f=s,d=o,p=l):(f=o,d=s,p=u);var v=f.length,y=d.length,b=a(l,u)^1,_=new n(b^1),N=new n(1),M=new n(2),C=n.precision;for(n.config({precision:1e9});v>0;)a(f[--v],d[--y])===b&&(_=_.plus(N)),N=N.times(M);for(;y>0;)a(p,d[--y])===b&&(_=_.plus(N)),N=N.times(M);return n.config({precision:C}),b===0&&(_.s=-_.s),_}function decCoefficientToBinaryString(t){for(var r=t.d,a=r[0]+"",n=1;n<r.length;++n){for(var s=r[n]+"",o=7-s.length;o--;)s="0"+s;a+=s}for(var l=a.length;a.charAt(l)==="0";)l--;var u=t.e,h=a.slice(0,l+1||1),c=h.length;if(u>0)if(++u>c)for(u-=c;u--;)h+="0";else u<c&&(h=h.slice(0,u)+"."+h.slice(u));for(var f=[0],d=0;d<h.length;){for(var p=f.length;p--;)f[p]*=10;f[0]+=parseInt(h.charAt(d++));for(var v=0;v<f.length;++v)f[v]>1&&((f[v+1]===null||f[v+1]===void 0)&&(f[v+1]=0),f[v+1]+=f[v]>>1,f[v]&=1)}return f.reverse()}function bitXor$1(t,r){if(t.isFinite()&&!t.isInteger()||r.isFinite()&&!r.isInteger())throw new Error("Integers expected in function bitXor");var a=t.constructor;if(t.isNaN()||r.isNaN())return new a(NaN);if(t.isZero())return r;if(r.isZero())return t;if(t.eq(r))return new a(0);var n=new a(-1);return t.eq(n)?bitNotBigNumber(r):r.eq(n)?bitNotBigNumber(t):!t.isFinite()||!r.isFinite()?!t.isFinite()&&!r.isFinite()?n:new a(t.isNegative()===r.isNegative()?1/0:-1/0):bitwise(t,r,function(s,o){return s^o})}function leftShiftBigNumber(t,r){if(t.isFinite()&&!t.isInteger()||r.isFinite()&&!r.isInteger())throw new Error("Integers expected in function leftShift");var a=t.constructor;return t.isNaN()||r.isNaN()||r.isNegative()&&!r.isZero()?new a(NaN):t.isZero()||r.isZero()?t:!t.isFinite()&&!r.isFinite()?new a(NaN):r.lt(55)?t.times(Math.pow(2,r.toNumber())+""):t.times(new a(2).pow(r))}function rightArithShiftBigNumber(t,r){if(t.isFinite()&&!t.isInteger()||r.isFinite()&&!r.isInteger())throw new Error("Integers expected in function rightArithShift");var a=t.constructor;return t.isNaN()||r.isNaN()||r.isNegative()&&!r.isZero()?new a(NaN):t.isZero()||r.isZero()?t:r.isFinite()?r.lt(55)?t.div(Math.pow(2,r.toNumber())+"").floor():t.div(new a(2).pow(r)).floor():t.isNegative()?new a(-1):t.isFinite()?new a(0):new a(NaN)}var name$3S="bitAnd",dependencies$3S=["typed","matrix","equalScalar","concat"],createBitAnd=factory(name$3S,dependencies$3S,t=>{var{typed:r,matrix:a,equalScalar:n,concat:s}=t,o=createMatAlgo02xDS0({typed:r,equalScalar:n}),l=createMatAlgo06xS0S0({typed:r,equalScalar:n}),u=createMatAlgo11xS0s({typed:r,equalScalar:n}),h=createMatrixAlgorithmSuite({typed:r,matrix:a,concat:s});return r(name$3S,{"number, number":bitAndNumber,"BigNumber, BigNumber":bitAndBigNumber,"bigint, bigint":(c,f)=>c&f},h({SS:l,DS:o,Ss:u}))}),name$3R="bitNot",dependencies$3R=["typed"],createBitNot=factory(name$3R,dependencies$3R,t=>{var{typed:r}=t;return r(name$3R,{number:bitNotNumber,BigNumber:bitNotBigNumber,bigint:a=>~a,"Array | Matrix":r.referToSelf(a=>n=>deepMap(n,a))})}),name$3Q="bitOr",dependencies$3Q=["typed","matrix","equalScalar","DenseMatrix","concat"],createBitOr=factory(name$3Q,dependencies$3Q,t=>{var{typed:r,matrix:a,equalScalar:n,DenseMatrix:s,concat:o}=t,l=createMatAlgo01xDSid({typed:r}),u=createMatAlgo04xSidSid({typed:r,equalScalar:n}),h=createMatAlgo10xSids({typed:r,DenseMatrix:s}),c=createMatrixAlgorithmSuite({typed:r,matrix:a,concat:o});return r(name$3Q,{"number, number":bitOrNumber,"BigNumber, BigNumber":bitOrBigNumber,"bigint, bigint":(f,d)=>f|d},c({SS:u,DS:l,Ss:h}))}),name$3P="matAlgo07xSSf",dependencies$3P=["typed","SparseMatrix"],createMatAlgo07xSSf=factory(name$3P,dependencies$3P,t=>{var{typed:r,SparseMatrix:a}=t;return function(o,l,u){var h=o._size,c=o._datatype||o._data===void 0?o._datatype:o.getDataType(),f=l._size,d=l._datatype||l._data===void 0?l._datatype:l.getDataType();if(h.length!==f.length)throw new DimensionError(h.length,f.length);if(h[0]!==f[0]||h[1]!==f[1])throw new RangeError("Dimension mismatch. Matrix A ("+h+") must match Matrix B ("+f+")");var p=h[0],v=h[1],y,b=0,_=u;typeof c=="string"&&c===d&&c!=="mixed"&&(y=c,b=r.convert(0,y),_=r.find(u,[y,y]));for(var N=[],M=[],C=new Array(v+1).fill(0),$=[],w=[],A=[],X=[],O=0;O<v;O++){var G=O+1,R=0;n(o,O,A,$,G),n(l,O,X,w,G);for(var B=0;B<p;B++){var F=A[B]===G?$[B]:b,U=X[B]===G?w[B]:b,q=_(F,U);q!==0&&q!==!1&&(M.push(B),N.push(q),R++)}C[O+1]=C[O]+R}return new a({values:N,index:M,ptr:C,size:[p,v],datatype:c===o._datatype&&d===l._datatype?y:void 0})};function n(s,o,l,u,h){for(var c=s._values,f=s._index,d=s._ptr,p=d[o],v=d[o+1];p<v;p++){var y=f[p];l[y]=h,u[y]=c[p]}}}),name$3O="bitXor",dependencies$3O=["typed","matrix","DenseMatrix","concat","SparseMatrix"],createBitXor=factory(name$3O,dependencies$3O,t=>{var{typed:r,matrix:a,DenseMatrix:n,concat:s,SparseMatrix:o}=t,l=createMatAlgo03xDSf({typed:r}),u=createMatAlgo07xSSf({typed:r,SparseMatrix:o}),h=createMatAlgo12xSfs({typed:r,DenseMatrix:n}),c=createMatrixAlgorithmSuite({typed:r,matrix:a,concat:s});return r(name$3O,{"number, number":bitXorNumber,"BigNumber, BigNumber":bitXor$1,"bigint, bigint":(f,d)=>f^d},c({SS:u,DS:l,Ss:h}))}),name$3N="arg",dependencies$3N=["typed"],createArg=factory(name$3N,dependencies$3N,t=>{var{typed:r}=t;return r(name$3N,{number:function(n){return Math.atan2(0,n)},BigNumber:function(n){return n.constructor.atan2(0,n)},Complex:function(n){return n.arg()},"Array | Matrix":r.referToSelf(a=>n=>deepMap(n,a))})}),name$3M="conj",dependencies$3M=["typed"],createConj=factory(name$3M,dependencies$3M,t=>{var{typed:r}=t;return r(name$3M,{"number | BigNumber | Fraction":a=>a,Complex:a=>a.conjugate(),Unit:r.referToSelf(a=>n=>new n.constructor(a(n.toNumeric()),n.formatUnits())),"Array | Matrix":r.referToSelf(a=>n=>deepMap(n,a))})}),name$3L="im",dependencies$3L=["typed"],createIm=factory(name$3L,dependencies$3L,t=>{var{typed:r}=t;return r(name$3L,{number:()=>0,"BigNumber | Fraction":a=>a.mul(0),Complex:a=>a.im,"Array | Matrix":r.referToSelf(a=>n=>deepMap(n,a))})}),name$3K="re",dependencies$3K=["typed"],createRe=factory(name$3K,dependencies$3K,t=>{var{typed:r}=t;return r(name$3K,{"number | BigNumber | Fraction":a=>a,Complex:a=>a.re,"Array | Matrix":r.referToSelf(a=>n=>deepMap(n,a))})}),name$3J="not",dependencies$3J=["typed"],createNot=factory(name$3J,dependencies$3J,t=>{var{typed:r}=t;return r(name$3J,{"null | undefined":()=>!0,number:notNumber,Complex:function(n){return n.re===0&&n.im===0},BigNumber:function(n){return n.isZero()||n.isNaN()},bigint:a=>!a,Unit:r.referToSelf(a=>n=>r.find(a,n.valueType())(n.value)),"Array | Matrix":r.referToSelf(a=>n=>deepMap(n,a))})}),name$3I="nullish",dependencies$3I=["typed","matrix","size","flatten","deepEqual"],createNullish=factory(name$3I,dependencies$3I,t=>{var{typed:r,matrix:a,size:n,flatten:s,deepEqual:o}=t,l=createMatAlgo03xDSf({typed:r}),u=createMatAlgo14xDs({typed:r}),h=createMatAlgo13xDD({typed:r});return r(name$3I,{"number|bigint|Complex|BigNumber|Fraction|Unit|string|boolean|SparseMatrix, any":(c,f)=>c,"null, any":(c,f)=>f,"undefined, any":(c,f)=>f,"SparseMatrix, Array | Matrix":(c,f)=>{var d=n(c),p=n(f);if(o(d,p))return c;throw new DimensionError(d,p)},"DenseMatrix, DenseMatrix":r.referToSelf(c=>(f,d)=>h(f,d,c)),"DenseMatrix, SparseMatrix":r.referToSelf(c=>(f,d)=>l(f,d,c,!1)),"DenseMatrix, Array":r.referToSelf(c=>(f,d)=>h(f,a(d),c)),"DenseMatrix, any":r.referToSelf(c=>(f,d)=>u(f,d,c,!1)),"Array, Array":r.referToSelf(c=>(f,d)=>h(a(f),a(d),c).valueOf()),"Array, DenseMatrix":r.referToSelf(c=>(f,d)=>h(a(f),d,c)),"Array, SparseMatrix":r.referToSelf(c=>(f,d)=>l(a(f),d,c,!1)),"Array, any":r.referToSelf(c=>(f,d)=>u(a(f),d,c,!1).valueOf())})}),name$3H="or",dependencies$3H=["typed","matrix","equalScalar","DenseMatrix","concat"],createOr=factory(name$3H,dependencies$3H,t=>{var{typed:r,matrix:a,equalScalar:n,DenseMatrix:s,concat:o}=t,l=createMatAlgo03xDSf({typed:r}),u=createMatAlgo05xSfSf({typed:r,equalScalar:n}),h=createMatAlgo12xSfs({typed:r,DenseMatrix:s}),c=createMatrixAlgorithmSuite({typed:r,matrix:a,concat:o});return r(name$3H,{"number, number":orNumber,"Complex, Complex":function(d,p){return d.re!==0||d.im!==0||p.re!==0||p.im!==0},"BigNumber, BigNumber":function(d,p){return!d.isZero()&&!d.isNaN()||!p.isZero()&&!p.isNaN()},"bigint, bigint":orNumber,"Unit, Unit":r.referToSelf(f=>(d,p)=>f(d.value||0,p.value||0))},c({SS:u,DS:l,Ss:h}))}),name$3G="xor",dependencies$3G=["typed","matrix","DenseMatrix","concat","SparseMatrix"],createXor=factory(name$3G,dependencies$3G,t=>{var{typed:r,matrix:a,DenseMatrix:n,concat:s,SparseMatrix:o}=t,l=createMatAlgo03xDSf({typed:r}),u=createMatAlgo07xSSf({typed:r,SparseMatrix:o}),h=createMatAlgo12xSfs({typed:r,DenseMatrix:n}),c=createMatrixAlgorithmSuite({typed:r,matrix:a,concat:s});return r(name$3G,{"number, number":xorNumber,"Complex, Complex":function(d,p){return(d.re!==0||d.im!==0)!=(p.re!==0||p.im!==0)},"bigint, bigint":xorNumber,"BigNumber, BigNumber":function(d,p){return(!d.isZero()&&!d.isNaN())!=(!p.isZero()&&!p.isNaN())},"Unit, Unit":r.referToSelf(f=>(d,p)=>f(d.value||0,p.value||0))},c({SS:u,DS:l,Ss:h}))}),name$3F="concat",dependencies$3F=["typed","matrix","isInteger"],createConcat=factory(name$3F,dependencies$3F,t=>{var{typed:r,matrix:a,isInteger:n}=t;return r(name$3F,{"...Array | Matrix | number | BigNumber":function(o){var l,u=o.length,h=-1,c,f=!1,d=[];for(l=0;l<u;l++){var p=o[l];if(isMatrix(p)&&(f=!0),isNumber(p)||isBigNumber(p)){if(l!==u-1)throw new Error("Dimension must be specified as last argument");if(c=h,h=p.valueOf(),!n(h))throw new TypeError("Integer number expected for dimension");if(h<0||l>0&&h>c)throw new IndexError(h,c+1)}else{var v=clone$3(p).valueOf(),y=arraySize(v);if(d[l]=v,c=h,h=y.length-1,l>0&&h!==c)throw new DimensionError(c+1,h+1)}}if(d.length===0)throw new SyntaxError("At least one matrix expected");for(var b=d.shift();d.length;)b=concat$1(b,d.shift(),h);return f?a(b):b},"...string":function(o){return o.join("")}})}),name$3E="column",dependencies$3E=["typed","Index","matrix","range"],createColumn=factory(name$3E,dependencies$3E,t=>{var{typed:r,Index:a,matrix:n,range:s}=t;return r(name$3E,{"Matrix, number":o,"Array, number":function(u,h){return o(n(clone$3(u)),h).valueOf()}});function o(l,u){if(l.size().length!==2)throw new Error("Only two dimensional matrix is supported");validateIndex(u,l.size()[1]);var h=s(0,l.size()[0]),c=new a(h,[u]),f=l.subset(c);return isMatrix(f)?f:n([[f]])}}),name$3D="count",dependencies$3D=["typed","size","prod"],createCount=factory(name$3D,dependencies$3D,t=>{var{typed:r,size:a,prod:n}=t;return r(name$3D,{string:function(o){return o.length},"Matrix | Array":function(o){return n(a(o))}})}),name$3C="cross",dependencies$3C=["typed","matrix","subtract","multiply"],createCross=factory(name$3C,dependencies$3C,t=>{var{typed:r,matrix:a,subtract:n,multiply:s}=t;return r(name$3C,{"Matrix, Matrix":function(u,h){return a(o(u.toArray(),h.toArray()))},"Matrix, Array":function(u,h){return a(o(u.toArray(),h))},"Array, Matrix":function(u,h){return a(o(u,h.toArray()))},"Array, Array":o});function o(l,u){var h=Math.max(arraySize(l).length,arraySize(u).length);l=squeeze$1(l),u=squeeze$1(u);var c=arraySize(l),f=arraySize(u);if(c.length!==1||f.length!==1||c[0]!==3||f[0]!==3)throw new RangeError("Vectors with length 3 expected (Size A = ["+c.join(", ")+"], B = ["+f.join(", ")+"])");var d=[n(s(l[1],u[2]),s(l[2],u[1])),n(s(l[2],u[0]),s(l[0],u[2])),n(s(l[0],u[1]),s(l[1],u[0]))];return h>1?[d]:d}}),name$3B="diag",dependencies$3B=["typed","matrix","DenseMatrix","SparseMatrix"],createDiag=factory(name$3B,dependencies$3B,t=>{var{typed:r,matrix:a,DenseMatrix:n,SparseMatrix:s}=t;return r(name$3B,{Array:function(c){return o(c,0,arraySize(c),null)},"Array, number":function(c,f){return o(c,f,arraySize(c),null)},"Array, BigNumber":function(c,f){return o(c,f.toNumber(),arraySize(c),null)},"Array, string":function(c,f){return o(c,0,arraySize(c),f)},"Array, number, string":function(c,f,d){return o(c,f,arraySize(c),d)},"Array, BigNumber, string":function(c,f,d){return o(c,f.toNumber(),arraySize(c),d)},Matrix:function(c){return o(c,0,c.size(),c.storage())},"Matrix, number":function(c,f){return o(c,f,c.size(),c.storage())},"Matrix, BigNumber":function(c,f){return o(c,f.toNumber(),c.size(),c.storage())},"Matrix, string":function(c,f){return o(c,0,c.size(),f)},"Matrix, number, string":function(c,f,d){return o(c,f,c.size(),d)},"Matrix, BigNumber, string":function(c,f,d){return o(c,f.toNumber(),c.size(),d)}});function o(h,c,f,d){if(!isInteger$1(c))throw new TypeError("Second parameter in function diag must be an integer");var p=c>0?c:0,v=c<0?-c:0;switch(f.length){case 1:return l(h,c,d,f[0],v,p);case 2:return u(h,c,d,f,v,p)}throw new RangeError("Matrix for function diag must be 2 dimensional")}function l(h,c,f,d,p,v){var y=[d+p,d+v];if(f&&f!=="sparse"&&f!=="dense")throw new TypeError("Unknown matrix type ".concat(f,'"'));var b=f==="sparse"?s.diagonal(y,h,c):n.diagonal(y,h,c);return f!==null?b:b.valueOf()}function u(h,c,f,d,p,v){if(isMatrix(h)){var y=h.diagonal(c);return f!==null?f!==y.storage()?a(y,f):y:y.valueOf()}for(var b=Math.min(d[0]-p,d[1]-v),_=[],N=0;N<b;N++)_[N]=h[N+p][N+v];return f!==null?a(_):_}}),name$3A="filter",dependencies$3A=["typed"],createFilter=factory(name$3A,dependencies$3A,t=>{var{typed:r}=t;return r("filter",{"Array, function":_filterCallback,"Matrix, function":function(n,s){return n.create(_filterCallback(n.valueOf(),s),n.datatype())},"Array, RegExp":filterRegExp,"Matrix, RegExp":function(n,s){return n.create(filterRegExp(n.valueOf(),s),n.datatype())}})});function _filterCallback(t,r){var a=optimizeCallback(r,t,"filter");return a.isUnary?filter$1(t,a.fn):filter$1(t,function(n,s,o){return a.fn(n,[s],o)})}var name$3z="flatten",dependencies$3z=["typed"],createFlatten=factory(name$3z,dependencies$3z,t=>{var{typed:r}=t;return r(name$3z,{Array:function(n){return flatten$1(n)},DenseMatrix:function(n){return n.create(flatten$1(n.valueOf(),!0),n.datatype())},SparseMatrix:function(n){throw new TypeError("SparseMatrix is not supported by function flatten because it does not support 1D vectors. Convert to a DenseMatrix or Array first. Example: flatten(x.toArray())")}})}),name$3y="forEach",dependencies$3y=["typed"],createForEach=factory(name$3y,dependencies$3y,t=>{var{typed:r}=t;return r(name$3y,{"Array, function":_forEach,"Matrix, function":function(n,s){n.forEach(s)}})});function _forEach(t,r){var a=optimizeCallback(r,t,name$3y);deepForEach$1(t,a.fn,a.isUnary)}var name$3x="getMatrixDataType",dependencies$3x=["typed"],createGetMatrixDataType=factory(name$3x,dependencies$3x,t=>{var{typed:r}=t;return r(name$3x,{Array:function(n){return getArrayDataType(n,typeOf$1)},Matrix:function(n){return n.getDataType()}})}),name$3w="identity",dependencies$3w=["typed","config","matrix","BigNumber","DenseMatrix","SparseMatrix"],createIdentity=factory(name$3w,dependencies$3w,t=>{var{typed:r,config:a,matrix:n,BigNumber:s,DenseMatrix:o,SparseMatrix:l}=t;return r(name$3w,{"":function(){return a.matrix==="Matrix"?n([]):[]},string:function(f){return n(f)},"number | BigNumber":function(f){return h(f,f,a.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, string":function(f,d){return h(f,f,d)},"number | BigNumber, number | BigNumber":function(f,d){return h(f,d,a.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, number | BigNumber, string":function(f,d,p){return h(f,d,p)},Array:function(f){return u(f)},"Array, string":function(f,d){return u(f,d)},Matrix:function(f){return u(f.valueOf(),f.storage())},"Matrix, string":function(f,d){return u(f.valueOf(),d)}});function u(c,f){switch(c.length){case 0:return f?n(f):[];case 1:return h(c[0],c[0],f);case 2:return h(c[0],c[1],f);default:throw new Error("Vector containing two values expected")}}function h(c,f,d){var p=isBigNumber(c)||isBigNumber(f)?s:null;if(isBigNumber(c)&&(c=c.toNumber()),isBigNumber(f)&&(f=f.toNumber()),!isInteger$1(c)||c<1)throw new Error("Parameters in function identity must be positive integers");if(!isInteger$1(f)||f<1)throw new Error("Parameters in function identity must be positive integers");var v=p?new s(1):1,y=p?new p(0):0,b=[c,f];if(d){if(d==="sparse")return l.diagonal(b,v,0,y);if(d==="dense")return o.diagonal(b,v,0,y);throw new TypeError('Unknown matrix type "'.concat(d,'"'))}for(var _=resize$1([],b,y),N=c<f?c:f,M=0;M<N;M++)_[M][M]=v;return _}}),name$3v="kron",dependencies$3v=["typed","matrix","multiplyScalar"],createKron=factory(name$3v,dependencies$3v,t=>{var{typed:r,matrix:a,multiplyScalar:n}=t;return r(name$3v,{"Matrix, Matrix":function(u,h){return a(o(u.toArray(),h.toArray()))},"Matrix, Array":function(u,h){return a(o(u.toArray(),h))},"Array, Matrix":function(u,h){return a(o(u,h.toArray()))},"Array, Array":o});function s(l,u){return l.flatMap(h=>u.map(c=>n(h,c)))}function o(l,u){var h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:-1;if(h<0){var c=arraySize(l).length,f=arraySize(u).length;for(h=Math.max(c,f);c++<h;)l=[l];for(;f++<h;)u=[u]}return h===1?s(l,u):l.flatMap(d=>u.map(p=>o(d,p,h-1)))}}),name$3u="map",dependencies$3u=["typed"],createMap=factory(name$3u,dependencies$3u,t=>{var{typed:r}=t;return r(name$3u,{"Array, function":u,"Matrix, function":function(c,f){return c.map(f)},"Array|Matrix, Array|Matrix, ...Array|Matrix|function":(h,c,f)=>a([h,c,...f.slice(0,f.length-1)],f[f.length-1])});function a(h,c){if(typeof c!="function")throw new Error("Last argument must be a callback function");var f=h[0].isMatrix,d=h.map(w=>w.isMatrix?w.size():arraySize(w)),p=broadcastSizes(...d),v=h.length,y=f?(w,A)=>w.get(A):get,b=h.map((w,A)=>{var X=d[A].map(()=>0);return w.isMatrix?w.get(X):get(w,X)}),_=r.isTypedFunction(c)?l(c,b,p.map(()=>0),h):o(c,v);if(_<2){var N=s(_,c,null);return n(h,N)}var M=f?h.map(w=>w.isMatrix?w.create(broadcastTo(w.toArray(),p),w.datatype()):h[0].create(broadcastTo(w.valueOf(),p))):h.map(w=>w.isMatrix?broadcastTo(w.toArray(),p):broadcastTo(w,p)),C=s(_,c,M),$=(w,A)=>C([w,...M.slice(1).map(X=>y(X,A))],A);return f?M[0].map($):u(M[0],$)}function n(h,c){var f=h[0],d=h.map(w=>w.isMatrix?w.valueOf():w),p=h.map(w=>w.isMatrix?w.size():arraySize(w)),v=broadcastSizes(...p),y=p.map(w=>v.length-w.length),b=v.length-1,_=c.length>1,N=_?[]:null,M=$(d,0);if(f.isMatrix){var C=f.create();return C._data=M,C._size=v,C}else return M;function $(w){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,X=v[A],O=Array(X);if(A<b)for(var G=function(q){N&&(N[A]=q),O[q]=$(w.map((ee,z)=>y[z]>A?ee:ee.length===1?ee[0]:ee[q]),A+1)},R=0;R<X;R++)G(R);else for(var B=function(q){N&&(N[A]=q),O[q]=c(w.map(ee=>ee.length===1?ee[0]:ee[q]),N?N.slice():void 0)},F=0;F<X;F++)B(F);return O}}function s(h,c,f){switch(h){case 0:return d=>c(...d);case 1:return(d,p)=>c(...d,p);case 2:return(d,p)=>c(...d,p,...f)}}function o(h,c){var f=h.toString();if(/arguments/.test(f))return 2;var d=f.match(/\(.*?\)/);return/\.\.\./.test(d)||h.length>c+1?2:h.length===c+1?1:0}function l(h,c,f,d){return r.resolve(h,[...c,f,...d])!==null?2:r.resolve(h,[...c,f])!==null?1:(r.resolve(h,c)!==null,0)}function u(h,c){var f=optimizeCallback(c,h,name$3u);return deepMap$1(h,f.fn,f.isUnary)}}),name$3t="diff",dependencies$3t=["typed","matrix","subtract","number"],createDiff=factory(name$3t,dependencies$3t,t=>{var{typed:r,matrix:a,subtract:n,number:s}=t;return r(name$3t,{"Array | Matrix":function(f){return isMatrix(f)?a(l(f.toArray())):l(f)},"Array | Matrix, number":function(f,d){if(!isInteger$1(d))throw new RangeError("Dimension must be a whole number");return isMatrix(f)?a(o(f.toArray(),d)):o(f,d)},"Array, BigNumber":r.referTo("Array,number",c=>(f,d)=>c(f,s(d))),"Matrix, BigNumber":r.referTo("Matrix,number",c=>(f,d)=>c(f,s(d)))});function o(c,f){if(isMatrix(c)&&(c=c.toArray()),!Array.isArray(c))throw RangeError("Array/Matrix does not have that many dimensions");if(f>0){var d=[];return c.forEach(p=>{d.push(o(p,f-1))}),d}else{if(f===0)return l(c);throw RangeError("Cannot have negative dimension")}}function l(c){for(var f=[],d=c.length,p=1;p<d;p++)f.push(u(c[p-1],c[p]));return f}function u(c,f){isMatrix(c)&&(c=c.toArray()),isMatrix(f)&&(f=f.toArray());var d=Array.isArray(c),p=Array.isArray(f);if(d&&p)return h(c,f);if(!d&&!p)return n(f,c);throw TypeError("Cannot calculate difference between 1 array and 1 non-array")}function h(c,f){if(c.length!==f.length)throw RangeError("Not all sub-arrays have the same length");for(var d=[],p=c.length,v=0;v<p;v++)d.push(u(c[v],f[v]));return d}}),name$3s="ones",dependencies$3s=["typed","config","matrix","BigNumber"],createOnes=factory(name$3s,dependencies$3s,t=>{var{typed:r,config:a,matrix:n,BigNumber:s}=t;return r("ones",{"":function(){return a.matrix==="Array"?o([]):o([],"default")},"...number | BigNumber | string":function(c){var f=c[c.length-1];if(typeof f=="string"){var d=c.pop();return o(c,d)}else return a.matrix==="Array"?o(c):o(c,"default")},Array:o,Matrix:function(c){var f=c.storage();return o(c.valueOf(),f)},"Array | Matrix, string":function(c,f){return o(c.valueOf(),f)}});function o(h,c){var f=l(h),d=f?new s(1):1;if(u(h),c){var p=n(c);return h.length>0?p.resize(h,d):p}else{var v=[];return h.length>0?resize$1(v,h,d):v}}function l(h){var c=!1;return h.forEach(function(f,d,p){isBigNumber(f)&&(c=!0,p[d]=f.toNumber())}),c}function u(h){h.forEach(function(c){if(typeof c!="number"||!isInteger$1(c)||c<0)throw new Error("Parameters in function ones must be positive integers")})}});function noBignumber(){throw new Error('No "bignumber" implementation available')}function noFraction(){throw new Error('No "fraction" implementation available')}function noMatrix(){throw new Error('No "matrix" implementation available')}var name$3r="range",dependencies$3r=["typed","config","?matrix","?bignumber","equal","smaller","smallerEq","larger","largerEq","add","isZero","isPositive"],createRange=factory(name$3r,dependencies$3r,t=>{var{typed:r,config:a,matrix:n,bignumber:s,smaller:o,smallerEq:l,larger:u,largerEq:h,add:c,isZero:f,isPositive:d}=t;return r(name$3r,{string:v,"string, boolean":v,number:function(N){throw new TypeError("Too few arguments to function range(): ".concat(N))},boolean:function(N){throw new TypeError("Unexpected type of argument 1 to function range(): ".concat(N,", number|bigint|BigNumber|Fraction"))},"number, number":function(N,M){return p(y(N,M,1,!1))},"number, number, number":function(N,M,C){return p(y(N,M,C,!1))},"number, number, boolean":function(N,M,C){return p(y(N,M,1,C))},"number, number, number, boolean":function(N,M,C,$){return p(y(N,M,C,$))},"bigint, bigint|number":function(N,M){return p(y(N,M,1n,!1))},"number, bigint":function(N,M){return p(y(BigInt(N),M,1n,!1))},"bigint, bigint|number, bigint|number":function(N,M,C){return p(y(N,M,BigInt(C),!1))},"number, bigint, bigint|number":function(N,M,C){return p(y(BigInt(N),M,BigInt(C),!1))},"bigint, bigint|number, boolean":function(N,M,C){return p(y(N,M,1n,C))},"number, bigint, boolean":function(N,M,C){return p(y(BigInt(N),M,1n,C))},"bigint, bigint|number, bigint|number, boolean":function(N,M,C,$){return p(y(N,M,BigInt(C),$))},"number, bigint, bigint|number, boolean":function(N,M,C,$){return p(y(BigInt(N),M,BigInt(C),$))},"BigNumber, BigNumber":function(N,M){var C=N.constructor;return p(y(N,M,new C(1),!1))},"BigNumber, BigNumber, BigNumber":function(N,M,C){return p(y(N,M,C,!1))},"BigNumber, BigNumber, boolean":function(N,M,C){var $=N.constructor;return p(y(N,M,new $(1),C))},"BigNumber, BigNumber, BigNumber, boolean":function(N,M,C,$){return p(y(N,M,C,$))},"Fraction, Fraction":function(N,M){return p(y(N,M,1,!1))},"Fraction, Fraction, Fraction":function(N,M,C){return p(y(N,M,C,!1))},"Fraction, Fraction, boolean":function(N,M,C){return p(y(N,M,1,C))},"Fraction, Fraction, Fraction, boolean":function(N,M,C,$){return p(y(N,M,C,$))},"Unit, Unit, Unit":function(N,M,C){return p(y(N,M,C,!1))},"Unit, Unit, Unit, boolean":function(N,M,C,$){return p(y(N,M,C,$))}});function p(_){return a.matrix==="Matrix"?n?n(_):noMatrix():_}function v(_,N){var M=b(_);if(!M)throw new SyntaxError('String "'+_+'" is no valid range');return a.number==="BigNumber"?(s===void 0&&noBignumber(),p(y(s(M.start),s(M.end),s(M.step)))):p(y(M.start,M.end,M.step,N))}function y(_,N,M,C){var $=[];if(f(M))throw new Error("Step must be non-zero");for(var w=d(M)?C?l:o:C?h:u,A=_;w(A,N);)$.push(A),A=c(A,M);return $}function b(_){var N=_.split(":"),M=N.map(function($){return Number($)}),C=M.some(function($){return isNaN($)});if(C)return null;switch(M.length){case 2:return{start:M[0],end:M[1],step:1};case 3:return{start:M[0],end:M[2],step:M[1]};default:return null}}}),name$3q="reshape",dependencies$3q=["typed","isInteger","matrix"],createReshape=factory(name$3q,dependencies$3q,t=>{var{typed:r,isInteger:a}=t;return r(name$3q,{"Matrix, Array":function(s,o){return s.reshape(o,!0)},"Array, Array":function(s,o){return o.forEach(function(l){if(!a(l))throw new TypeError("Invalid size for dimension: "+l)}),reshape$1(s,o)}})}),name$3p="resize",dependencies$3p=["config","matrix"],createResize=factory(name$3p,dependencies$3p,t=>{var{config:r,matrix:a}=t;return function(o,l,u){if(arguments.length!==2&&arguments.length!==3)throw new ArgumentsError("resize",arguments.length,2,3);if(isMatrix(l)&&(l=l.valueOf()),isBigNumber(l[0])&&(l=l.map(function(f){return isBigNumber(f)?f.toNumber():f})),isMatrix(o))return o.resize(l,u,!0);if(typeof o=="string")return n(o,l,u);var h=Array.isArray(o)?!1:r.matrix!=="Array";if(l.length===0){for(;Array.isArray(o);)o=o[0];return clone$3(o)}else{Array.isArray(o)||(o=[o]),o=clone$3(o);var c=resize$1(o,l,u);return h?a(c):c}};function n(s,o,l){if(l!==void 0){if(typeof l!="string"||l.length!==1)throw new TypeError("Single character expected as defaultValue")}else l=" ";if(o.length!==1)throw new DimensionError(o.length,1);var u=o[0];if(typeof u!="number"||!isInteger$1(u))throw new TypeError("Invalid size, must contain positive integers (size: "+format$1(o)+")");if(s.length>u)return s.substring(0,u);if(s.length<u){for(var h=s,c=0,f=u-s.length;c<f;c++)h+=l;return h}else return s}}),name$3o="rotate",dependencies$3o=["typed","multiply","rotationMatrix"],createRotate=factory(name$3o,dependencies$3o,t=>{var{typed:r,multiply:a,rotationMatrix:n}=t;return r(name$3o,{"Array , number | BigNumber | Complex | Unit":function(l,u){s(l,2);var h=a(n(u),l);return h.toArray()},"Matrix , number | BigNumber | Complex | Unit":function(l,u){return s(l,2),a(n(u),l)},"Array, number | BigNumber | Complex | Unit, Array | Matrix":function(l,u,h){s(l,3);var c=a(n(u,h),l);return c},"Matrix, number | BigNumber | Complex | Unit, Array | Matrix":function(l,u,h){return s(l,3),a(n(u,h),l)}});function s(o,l){var u=Array.isArray(o)?arraySize(o):o.size();if(u.length>2)throw new RangeError("Vector must be of dimensions 1x".concat(l));if(u.length===2&&u[1]!==1)throw new RangeError("Vector must be of dimensions 1x".concat(l));if(u[0]!==l)throw new RangeError("Vector must be of dimensions 1x".concat(l))}}),name$3n="rotationMatrix",dependencies$3n=["typed","config","multiplyScalar","addScalar","unaryMinus","norm","matrix","BigNumber","DenseMatrix","SparseMatrix","cos","sin"],createRotationMatrix=factory(name$3n,dependencies$3n,t=>{var{typed:r,config:a,multiplyScalar:n,addScalar:s,unaryMinus:o,norm:l,BigNumber:u,matrix:h,DenseMatrix:c,SparseMatrix:f,cos:d,sin:p}=t;return r(name$3n,{"":function(){return a.matrix==="Matrix"?h([]):[]},string:function(C){return h(C)},"number | BigNumber | Complex | Unit":function(C){return v(C,a.matrix==="Matrix"?"dense":void 0)},"number | BigNumber | Complex | Unit, string":function(C,$){return v(C,$)},"number | BigNumber | Complex | Unit, Array":function(C,$){var w=h($);return y(w),N(C,w,void 0)},"number | BigNumber | Complex | Unit, Matrix":function(C,$){y($);var w=$.storage()||(a.matrix==="Matrix"?"dense":void 0);return N(C,$,w)},"number | BigNumber | Complex | Unit, Array, string":function(C,$,w){var A=h($);return y(A),N(C,A,w)},"number | BigNumber | Complex | Unit, Matrix, string":function(C,$,w){return y($),N(C,$,w)}});function v(M,C){var $=isBigNumber(M),w=$?new u(-1):-1,A=d(M),X=p(M),O=[[A,n(w,X)],[X,A]];return _(O,C)}function y(M){var C=M.size();if(C.length<1||C[0]!==3)throw new RangeError("Vector must be of dimensions 1x3")}function b(M){return M.reduce((C,$)=>n(C,$))}function _(M,C){if(C){if(C==="sparse")return new f(M);if(C==="dense")return new c(M);throw new TypeError('Unknown matrix type "'.concat(C,'"'))}return M}function N(M,C,$){var w=l(C);if(w===0)throw new RangeError("Rotation around zero vector");var A=isBigNumber(M)?u:null,X=A?new A(1):1,O=A?new A(-1):-1,G=A?new A(C.get([0])/w):C.get([0])/w,R=A?new A(C.get([1])/w):C.get([1])/w,B=A?new A(C.get([2])/w):C.get([2])/w,F=d(M),U=s(X,o(F)),q=p(M),ee=s(F,b([G,G,U])),z=s(b([G,R,U]),b([O,B,q])),Y=s(b([G,B,U]),b([R,q])),K=s(b([G,R,U]),b([B,q])),Z=s(F,b([R,R,U])),ne=s(b([R,B,U]),b([O,G,q])),j=s(b([G,B,U]),b([O,R,q])),V=s(b([R,B,U]),b([G,q])),L=s(F,b([B,B,U])),ae=[[ee,z,Y],[K,Z,ne],[j,V,L]];return _(ae,$)}}),name$3m="row",dependencies$3m=["typed","Index","matrix","range"],createRow=factory(name$3m,dependencies$3m,t=>{var{typed:r,Index:a,matrix:n,range:s}=t;return r(name$3m,{"Matrix, number":o,"Array, number":function(u,h){return o(n(clone$3(u)),h).valueOf()}});function o(l,u){if(l.size().length!==2)throw new Error("Only two dimensional matrix is supported");validateIndex(u,l.size()[0]);var h=s(0,l.size()[1]),c=new a([u],h),f=l.subset(c);return isMatrix(f)?f:n([[f]])}}),name$3l="size",dependencies$3l=["typed"],createSize=factory(name$3l,dependencies$3l,t=>{var{typed:r}=t;return r(name$3l,{Matrix:a=>a.size(),Array:arraySize,string:a=>[a.length],"number | Complex | BigNumber | Unit | boolean | null":a=>[]})}),name$3k="squeeze",dependencies$3k=["typed"],createSqueeze=factory(name$3k,dependencies$3k,t=>{var{typed:r}=t;return r(name$3k,{Array:function(n){return squeeze$1(clone$3(n))},Matrix:function(n){var s=squeeze$1(n.toArray());return Array.isArray(s)?n.create(s,n.datatype()):s},any:function(n){return clone$3(n)}})}),name$3j="subset",dependencies$3j=["typed","matrix","zeros","add"],createSubset=factory(name$3j,dependencies$3j,t=>{var{typed:r,matrix:a,zeros:n,add:s}=t;return r(name$3j,{"Matrix, Index":function(u,h){return isEmptyIndex(h)?a():(validateIndexSourceSize(u,h),u.subset(h))},"Array, Index":r.referTo("Matrix, Index",function(l){return function(u,h){var c=l(a(u),h);return h.isScalar()?c:c.valueOf()}}),"Object, Index":_getObjectProperty,"string, Index":_getSubstring,"Matrix, Index, any, any":function(u,h,c,f){return isEmptyIndex(h)?u:(validateIndexSourceSize(u,h),u.clone().subset(h,o(c,h),f))},"Array, Index, any, any":r.referTo("Matrix, Index, any, any",function(l){return function(u,h,c,f){var d=l(a(u),h,c,f);return d.isMatrix?d.valueOf():d}}),"Array, Index, any":r.referTo("Matrix, Index, any, any",function(l){return function(u,h,c){return l(a(u),h,c,void 0).valueOf()}}),"Matrix, Index, any":r.referTo("Matrix, Index, any, any",function(l){return function(u,h,c){return l(u,h,c,void 0)}}),"string, Index, string":_setSubstring,"string, Index, string, string":_setSubstring,"Object, Index, any":_setObjectProperty});function o(l,u){if(typeof l=="string")throw new Error("can't boradcast a string");if(u.isScalar())return l;var h=u.size();if(h.every(c=>c>0))try{return s(l,n(h))}catch{return l}else return l}});function _getSubstring(t,r){if(!isIndex(r))throw new TypeError("Index expected");if(isEmptyIndex(r))return"";if(validateIndexSourceSize(Array.from(t),r),r.size().length!==1)throw new DimensionError(r.size().length,1);var a=t.length;validateIndex(r.min()[0],a),validateIndex(r.max()[0],a);var n=r.dimension(0),s="";function o(l){s+=t.charAt(l)}return Number.isInteger(n)?o(n):n.forEach(o),s}function _setSubstring(t,r,a,n){if(!r||r.isIndex!==!0)throw new TypeError("Index expected");if(isEmptyIndex(r))return t;if(validateIndexSourceSize(Array.from(t),r),r.size().length!==1)throw new DimensionError(r.size().length,1);if(n!==void 0){if(typeof n!="string"||n.length!==1)throw new TypeError("Single character expected as defaultValue")}else n=" ";var s=r.dimension(0),o=Number.isInteger(s)?1:s.size()[0];if(o!==a.length)throw new DimensionError(s.size()[0],a.length);var l=t.length;validateIndex(r.min()[0]),validateIndex(r.max()[0]);for(var u=[],h=0;h<l;h++)u[h]=t.charAt(h);function c(p,v){u[p]=a.charAt(v[0])}if(Number.isInteger(s)?c(s,[0]):s.forEach(c),u.length>l)for(var f=l-1,d=u.length;f<d;f++)u[f]||(u[f]=n);return u.join("")}function _getObjectProperty(t,r){if(!isEmptyIndex(r)){if(r.size().length!==1)throw new DimensionError(r.size(),1);var a=r.dimension(0);if(typeof a!="string")throw new TypeError("String expected as index to retrieve an object property");return getSafeProperty(t,a)}}function _setObjectProperty(t,r,a){if(isEmptyIndex(r))return t;if(r.size().length!==1)throw new DimensionError(r.size(),1);var n=r.dimension(0);if(typeof n!="string")throw new TypeError("String expected as index to retrieve an object property");var s=clone$3(t);return setSafeProperty(s,n,a),s}var name$3i="transpose",dependencies$3i=["typed","matrix"],createTranspose=factory(name$3i,dependencies$3i,t=>{var{typed:r,matrix:a}=t;return r(name$3i,{Array:l=>n(a(l)).valueOf(),Matrix:n,any:clone$3});function n(l){var u=l.size(),h;switch(u.length){case 1:h=l.clone();break;case 2:{var c=u[0],f=u[1];if(f===0)throw new RangeError("Cannot transpose a 2D matrix with no columns (size: "+format$1(u)+")");switch(l.storage()){case"dense":h=s(l,c,f);break;case"sparse":h=o(l,c,f);break}}break;default:throw new RangeError("Matrix must be a vector or two dimensional (size: "+format$1(u)+")")}return h}function s(l,u,h){for(var c=l._data,f=[],d,p=0;p<h;p++){d=f[p]=[];for(var v=0;v<u;v++)d[v]=clone$3(c[v][p])}return l.createDenseMatrix({data:f,size:[h,u],datatype:l._datatype})}function o(l,u,h){for(var c=l._values,f=l._index,d=l._ptr,p=c?[]:void 0,v=[],y=[],b=[],_=0;_<u;_++)b[_]=0;var N,M,C;for(N=0,M=f.length;N<M;N++)b[f[N]]++;for(var $=0,w=0;w<u;w++)y.push($),$+=b[w],b[w]=y[w];for(y.push($),C=0;C<h;C++)for(var A=d[C],X=d[C+1],O=A;O<X;O++){var G=b[f[O]]++;v[G]=C,c&&(p[G]=clone$3(c[O]))}return l.createSparseMatrix({values:p,index:v,ptr:y,size:[h,u],datatype:l._datatype})}}),name$3h="ctranspose",dependencies$3h=["typed","transpose","conj"],createCtranspose=factory(name$3h,dependencies$3h,t=>{var{typed:r,transpose:a,conj:n}=t;return r(name$3h,{any:function(o){return n(a(o))}})}),name$3g="zeros",dependencies$3g=["typed","config","matrix","BigNumber"],createZeros=factory(name$3g,dependencies$3g,t=>{var{typed:r,config:a,matrix:n,BigNumber:s}=t;return r(name$3g,{"":function(){return a.matrix==="Array"?o([]):o([],"default")},"...number | BigNumber | string":function(c){var f=c[c.length-1];if(typeof f=="string"){var d=c.pop();return o(c,d)}else return a.matrix==="Array"?o(c):o(c,"default")},Array:o,Matrix:function(c){var f=c.storage();return o(c.valueOf(),f)},"Array | Matrix, string":function(c,f){return o(c.valueOf(),f)}});function o(h,c){var f=l(h),d=f?new s(0):0;if(u(h),c){var p=n(c);return h.length>0?p.resize(h,d):p}else{var v=[];return h.length>0?resize$1(v,h,d):v}}function l(h){var c=!1;return h.forEach(function(f,d,p){isBigNumber(f)&&(c=!0,p[d]=f.toNumber())}),c}function u(h){h.forEach(function(c){if(typeof c!="number"||!isInteger$1(c)||c<0)throw new Error("Parameters in function zeros must be positive integers")})}}),name$3f="fft",dependencies$3f=["typed","matrix","addScalar","multiplyScalar","divideScalar","exp","tau","i","dotDivide","conj","pow","ceil","log2"],createFft=factory(name$3f,dependencies$3f,t=>{var{typed:r,matrix:a,addScalar:n,multiplyScalar:s,divideScalar:o,exp:l,tau:u,i:h,dotDivide:c,conj:f,pow:d,ceil:p,log2:v}=t;return r(name$3f,{Array:y,Matrix:function(C){return C.create(y(C.valueOf()),C.datatype())}});function y(M){var C=arraySize(M);return C.length===1?N(M,C[0]):b(M.map($=>y($,C.slice(1))),0)}function b(M,C){var $=arraySize(M);if(C!==0)return new Array($[0]).fill(0).map((A,X)=>b(M[X],C-1));if($.length===1)return N(M);function w(A){var X=arraySize(A);return new Array(X[1]).fill(0).map((O,G)=>new Array(X[0]).fill(0).map((R,B)=>A[B][G]))}return w(b(w(M),1))}function _(M){for(var C=M.length,$=l(o(s(-1,s(h,u)),C)),w=[],A=1-C;A<C;A++)w.push(d($,o(d(A,2),2)));for(var X=d(2,p(v(C+C-1))),O=[...new Array(C).fill(0).map((z,Y)=>s(M[Y],w[C-1+Y])),...new Array(X-C).fill(0)],G=[...new Array(C+C-1).fill(0).map((z,Y)=>o(1,w[Y])),...new Array(X-(C+C-1)).fill(0)],R=N(O),B=N(G),F=new Array(X).fill(0).map((z,Y)=>s(R[Y],B[Y])),U=c(f(y(f(F))),X),q=[],ee=C-1;ee<C+C-1;ee++)q.push(s(U[ee],w[ee]));return q}function N(M){var C=M.length;if(C===1)return[M[0]];if(C%2===0){for(var $=[...N(M.filter((O,G)=>G%2===0)),...N(M.filter((O,G)=>G%2===1))],w=0;w<C/2;w++){var A=$[w],X=s($[w+C/2],l(s(s(u,h),o(-w,C))));$[w]=n(A,X),$[w+C/2]=n(A,s(-1,X))}return $}else return _(M)}}),name$3e="ifft",dependencies$3e=["typed","fft","dotDivide","conj"],createIfft=factory(name$3e,dependencies$3e,t=>{var{typed:r,fft:a,dotDivide:n,conj:s}=t;return r(name$3e,{"Array | Matrix":function(l){var u=isMatrix(l)?l.size():arraySize(l);return n(s(a(s(l))),u.reduce((h,c)=>h*c,1))}})});function _typeof(t){"@babel/helpers - typeof";return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},_typeof(t)}function toPrimitive(t,r){if(_typeof(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var n=a.call(t,r);if(_typeof(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function toPropertyKey(t){var r=toPrimitive(t,"string");return _typeof(r)=="symbol"?r:r+""}function _defineProperty(t,r,a){return(r=toPropertyKey(r))in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function ownKeys$3(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,n)}return a}function _objectSpread$3(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?ownKeys$3(Object(a),!0).forEach(function(n){_defineProperty(t,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):ownKeys$3(Object(a)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(a,n))})}return t}var name$3d="solveODE",dependencies$3d=["typed","add","subtract","multiply","divide","max","map","abs","isPositive","isNegative","larger","smaller","matrix","bignumber","unaryMinus"],createSolveODE=factory(name$3d,dependencies$3d,t=>{var{typed:r,add:a,subtract:n,multiply:s,divide:o,max:l,map:u,abs:h,isPositive:c,isNegative:f,larger:d,smaller:p,matrix:v,bignumber:y,unaryMinus:b}=t;function _(O){return function(G,R,B,F){var U=!(R.length===2&&(R.every(A)||R.every(isUnit)));if(U)throw new Error('"tspan" must be an Array of two numeric values or two units [tStart, tEnd]');var q=R[0],ee=R[1],z=d(ee,q),Y=F.firstStep;if(Y!==void 0&&!c(Y))throw new Error('"firstStep" must be positive');var K=F.maxStep;if(K!==void 0&&!c(K))throw new Error('"maxStep" must be positive');var Z=F.minStep;if(Z&&f(Z))throw new Error('"minStep" must be positive or zero');var ne=[q,ee,Y,Z,K].filter(te=>te!==void 0);if(!(ne.every(A)||ne.every(isUnit)))throw new Error('Inconsistent type of "t" dependant variables');for(var j=1,V=F.tol?F.tol:1e-4,L=F.minDelta?F.minDelta:.2,ae=F.maxDelta?F.maxDelta:5,W=F.maxIter?F.maxIter:1e4,ve=[q,ee,...B,K,Z].some(isBigNumber),[de,se,ie,ce]=ve?[y(O.a),y(O.c),y(O.b),y(O.bp)]:[O.a,O.c,O.b,O.bp],xe=Y?z?Y:b(Y):o(n(ee,q),j),fe=[q],Ne=[B],we=n(ie,ce),Pe=0,Ie=0,Ye=$(z),Le=w(z);Ye(fe[Pe],ee);){var Ve=[];xe=Le(fe[Pe],ee,xe),Ve.push(G(fe[Pe],Ne[Pe]));for(var Ze=1;Ze<se.length;++Ze)Ve.push(G(a(fe[Pe],s(se[Ze],xe)),a(Ne[Pe],s(xe,de[Ze],Ve))));var ue=l(h(u(s(we,Ve),te=>isUnit(te)?te.value:te)));ue<V&&V/ue>1/4&&(fe.push(a(fe[Pe],xe)),Ne.push(a(Ne[Pe],s(xe,ie,Ve))),Pe++);var ge=.84*(V/ue)**(1/5);if(p(ge,L)?ge=L:d(ge,ae)&&(ge=ae),ge=ve?y(ge):ge,xe=s(xe,ge),K&&d(h(xe),K)?xe=z?K:b(K):Z&&p(h(xe),Z)&&(xe=z?Z:b(Z)),Ie++,Ie>W)throw new Error("Maximum number of iterations reached, try changing options")}return{t:fe,y:Ne}}}function N(O,G,R,B){var F=[[],[.5],[0,.75],[.2222222222222222,.3333333333333333,.4444444444444444]],U=[null,1/2,3/4,1],q=[2/9,1/3,4/9,0],ee=[7/24,1/4,1/3,1/8],z={a:F,c:U,b:q,bp:ee};return _(z)(O,G,R,B)}function M(O,G,R,B){var F=[[],[.2],[.075,.225],[.9777777777777777,-3.7333333333333334,3.5555555555555554],[2.9525986892242035,-11.595793324188385,9.822892851699436,-.2908093278463649],[2.8462752525252526,-10.757575757575758,8.906422717743473,.2784090909090909,-.2735313036020583],[.09114583333333333,0,.44923629829290207,.6510416666666666,-.322376179245283,.13095238095238096]],U=[null,1/5,3/10,4/5,8/9,1,1],q=[35/384,0,500/1113,125/192,-2187/6784,11/84,0],ee=[5179/57600,0,7571/16695,393/640,-92097/339200,187/2100,1/40],z={a:F,c:U,b:q,bp:ee};return _(z)(O,G,R,B)}function C(O,G,R,B){var F=B.method?B.method:"RK45",U={RK23:N,RK45:M};if(F.toUpperCase()in U){var q=_objectSpread$3({},B);return delete q.method,U[F.toUpperCase()](O,G,R,q)}else{var ee=Object.keys(U).map(Y=>'"'.concat(Y,'"')),z="".concat(ee.slice(0,-1).join(", ")," and ").concat(ee.slice(-1));throw new Error('Unavailable method "'.concat(F,'". Available methods are ').concat(z))}}function $(O){return O?p:d}function w(O){var G=O?d:p;return function(R,B,F){var U=a(R,F);return G(U,B)?n(B,R):F}}function A(O){return isBigNumber(O)||isNumber(O)}function X(O,G,R,B){var F=C(O,G.toArray(),R.toArray(),B);return{t:v(F.t),y:v(F.y)}}return r("solveODE",{"function, Array, Array, Object":C,"function, Matrix, Matrix, Object":X,"function, Array, Array":(O,G,R)=>C(O,G,R,{}),"function, Matrix, Matrix":(O,G,R)=>X(O,G,R,{}),"function, Array, number | BigNumber | Unit":(O,G,R)=>{var B=C(O,G,[R],{});return{t:B.t,y:B.y.map(F=>F[0])}},"function, Matrix, number | BigNumber | Unit":(O,G,R)=>{var B=C(O,G.toArray(),[R],{});return{t:v(B.t),y:v(B.y.map(F=>F[0]))}},"function, Array, number | BigNumber | Unit, Object":(O,G,R,B)=>{var F=C(O,G,[R],B);return{t:F.t,y:F.y.map(U=>U[0])}},"function, Matrix, number | BigNumber | Unit, Object":(O,G,R,B)=>{var F=C(O,G.toArray(),[R],B);return{t:v(F.t),y:v(F.y.map(U=>U[0]))}}})}),name$3c="erf",dependencies$3c=["typed"],createErf=factory(name$3c,dependencies$3c,t=>{var{typed:r}=t;return r("name",{number:function(l){var u=Math.abs(l);return u>=MAX_NUM?sign$2(l):u<=THRESH?sign$2(l)*a(u):u<=4?sign$2(l)*(1-n(u)):sign$2(l)*(1-s(u))},"Array | Matrix":r.referToSelf(o=>l=>deepMap(l,o))});function a(o){var l=o*o,u=P[0][4]*l,h=l,c;for(c=0;c<3;c+=1)u=(u+P[0][c])*l,h=(h+Q[0][c])*l;return o*(u+P[0][3])/(h+Q[0][3])}function n(o){var l=P[1][8]*o,u=o,h;for(h=0;h<7;h+=1)l=(l+P[1][h])*o,u=(u+Q[1][h])*o;var c=(l+P[1][7])/(u+Q[1][7]),f=parseInt(o*16)/16,d=(o-f)*(o+f);return Math.exp(-f*f)*Math.exp(-d)*c}function s(o){var l=1/(o*o),u=P[2][5]*l,h=l,c;for(c=0;c<4;c+=1)u=(u+P[2][c])*l,h=(h+Q[2][c])*l;var f=l*(u+P[2][4])/(h+Q[2][4]);f=(SQRPI-f)/o,l=parseInt(o*16)/16;var d=(o-l)*(o+l);return Math.exp(-l*l)*Math.exp(-d)*f}}),THRESH=.46875,SQRPI=.5641895835477563,P=[[3.1611237438705655,113.86415415105016,377.485237685302,3209.3775891384694,.18577770618460315],[.5641884969886701,8.883149794388377,66.11919063714163,298.6351381974001,881.952221241769,1712.0476126340707,2051.0783778260716,1230.3393547979972,21531153547440383e-24],[.30532663496123236,.36034489994980445,.12578172611122926,.016083785148742275,.0006587491615298378,.016315387137302097]],Q=[[23.601290952344122,244.02463793444417,1282.6165260773723,2844.236833439171],[15.744926110709835,117.6939508913125,537.1811018620099,1621.3895745666903,3290.7992357334597,4362.619090143247,3439.3676741437216,1230.3393548037495],[2.568520192289822,1.8729528499234604,.5279051029514285,.06051834131244132,.0023352049762686918]],MAX_NUM=Math.pow(2,53),name$3b="zeta",dependencies$3b=["typed","config","multiply","pow","divide","factorial","equal","smallerEq","isBounded","isNegative","gamma","sin","subtract","add","?Complex","?BigNumber","pi"],createZeta=factory(name$3b,dependencies$3b,t=>{var{typed:r,config:a,multiply:n,pow:s,divide:o,factorial:l,equal:u,smallerEq:h,isBounded:c,isNegative:f,gamma:d,sin:p,subtract:v,add:y,Complex:b,BigNumber:_,pi:N}=t;return r(name$3b,{number:X=>M(X,O=>O,()=>20),BigNumber:X=>M(X,O=>new _(O),()=>Math.abs(Math.log10(a.relTol))),Complex:C});function M(X,O,G){return u(X,0)?O(-.5):u(X,1)?O(NaN):c(X)?$(X,O,G,R=>R):f(X)?O(NaN):O(1)}function C(X){return X.re===0&&X.im===0?new b(-.5):X.re===1?new b(NaN,NaN):X.re===1/0&&X.im===0?new b(1):X.im===1/0||X.re===-1/0?new b(NaN,NaN):$(X,O=>O,O=>Math.round(1.3*15+.9*Math.abs(O.im)),O=>O.re)}function $(X,O,G,R){var B=G(X);if(R(X)>-(B-1)/2)return A(X,O(B),O);var F=n(s(2,X),s(O(N),v(X,1)));return F=n(F,p(n(o(O(N),2),X))),F=n(F,d(v(1,X))),n(F,$(v(1,X),O,G,R))}function w(X,O){for(var G=X,R=X;h(R,O);R=y(R,1)){var B=o(n(l(y(O,v(R,1))),s(4,R)),n(l(v(O,R)),l(n(2,R))));G=y(G,B)}return n(O,G)}function A(X,O,G){for(var R=o(1,n(w(G(0),O),v(1,s(2,v(1,X))))),B=G(0),F=G(1);h(F,O);F=y(F,1))B=y(B,o(n((-1)**(F-1),w(F,O)),s(F,X)));return n(R,B)}}),name$3a="mode",dependencies$3a=["typed","isNaN","isNumeric"],createMode=factory(name$3a,dependencies$3a,t=>{var{typed:r,isNaN:a,isNumeric:n}=t;return r(name$3a,{"Array | Matrix":s,"...":function(l){return s(l)}});function s(o){o=flatten$1(o.valueOf());var l=o.length;if(l===0)throw new Error("Cannot calculate mode of an empty array");for(var u={},h=[],c=0,f=0;f<o.length;f++){var d=o[f];if(n(d)&&a(d))throw new Error("Cannot calculate mode of an array containing NaN values");d in u||(u[d]=0),u[d]++,u[d]===c?h.push(d):u[d]>c&&(c=u[d],h=[d])}return h}});function improveErrorMessage(t,r,a){var n;return String(t).includes("Unexpected type")?(n=arguments.length>2?" (type: "+typeOf$1(a)+", value: "+JSON.stringify(a)+")":" (type: "+t.data.actual+")",new TypeError("Cannot calculate "+r+", unexpected type of argument"+n)):String(t).includes("complex numbers")?(n=arguments.length>2?" (type: "+typeOf$1(a)+", value: "+JSON.stringify(a)+")":"",new TypeError("Cannot calculate "+r+", no ordering relation is defined for complex numbers"+n)):t}var name$39="prod",dependencies$39=["typed","config","multiplyScalar","numeric"],createProd=factory(name$39,dependencies$39,t=>{var{typed:r,config:a,multiplyScalar:n,numeric:s}=t;return r(name$39,{"Array | Matrix":o,"Array | Matrix, number | BigNumber":function(u,h){throw new Error("prod(A, dim) is not yet supported")},"...":function(u){return o(u)}});function o(l){var u;if(deepForEach(l,function(h){try{u=u===void 0?h:n(u,h)}catch(c){throw improveErrorMessage(c,"prod",h)}}),typeof u=="string"&&(u=s(u,safeNumberType(u,a))),u===void 0)throw new Error("Cannot calculate prod of an empty array");return u}}),name$38="format",dependencies$38=["typed"],createFormat=factory(name$38,dependencies$38,t=>{var{typed:r}=t;return r(name$38,{any:format$1,"any, Object | function | number | BigNumber":format$1})}),name$37="bin",dependencies$37=["typed","format"],createBin=factory(name$37,dependencies$37,t=>{var{typed:r,format:a}=t;return r(name$37,{"number | BigNumber":function(s){return a(s,{notation:"bin"})},"number | BigNumber, number | BigNumber":function(s,o){return a(s,{notation:"bin",wordSize:o})}})}),name$36="oct",dependencies$36=["typed","format"],createOct=factory(name$36,dependencies$36,t=>{var{typed:r,format:a}=t;return r(name$36,{"number | BigNumber":function(s){return a(s,{notation:"oct"})},"number | BigNumber, number | BigNumber":function(s,o){return a(s,{notation:"oct",wordSize:o})}})}),name$35="hex",dependencies$35=["typed","format"],createHex=factory(name$35,dependencies$35,t=>{var{typed:r,format:a}=t;return r(name$35,{"number | BigNumber":function(s){return a(s,{notation:"hex"})},"number | BigNumber, number | BigNumber":function(s,o){return a(s,{notation:"hex",wordSize:o})}})}),printTemplate=/\$([\w.]+)/g,name$34="print",dependencies$34=["typed"],createPrint=factory(name$34,dependencies$34,t=>{var{typed:r}=t;return r(name$34,{"string, Object | Array":_print,"string, Object | Array, number | Object":_print})});function _print(t,r,a){return t.replace(printTemplate,function(n,s){var o=s.split("."),l=r[o.shift()];for(l!==void 0&&l.isMatrix&&(l=l.toArray());o.length&&l!==void 0;){var u=o.shift();l=u?l[u]:l+"."}return l!==void 0?isString(l)?l:format$1(l,a):n})}var name$33="to",dependencies$33=["typed","matrix","concat"],createTo=factory(name$33,dependencies$33,t=>{var{typed:r,matrix:a,concat:n}=t,s=createMatrixAlgorithmSuite({typed:r,matrix:a,concat:n});return r(name$33,{"Unit, Unit | string":(o,l)=>o.to(l)},s({Ds:!0}))}),name$32="toBest",dependencies$32=["typed"],createToBest=factory(name$32,dependencies$32,t=>{var{typed:r}=t;return r(name$32,{Unit:a=>a.toBest(),"Unit, string":(a,n)=>a.toBest(n.split(",")),"Unit, string, Object":(a,n,s)=>a.toBest(n.split(","),s),"Unit, Array":(a,n)=>a.toBest(n),"Unit, Array, Object":(a,n,s)=>a.toBest(n,s)})}),name$31="isPrime",dependencies$31=["typed"],createIsPrime=factory(name$31,dependencies$31,t=>{var{typed:r}=t;return r(name$31,{number:function(n){if(n<=3)return n>1;if(n%2===0||n%3===0)return!1;for(var s=5;s*s<=n;s+=6)if(n%s===0||n%(s+2)===0)return!1;return!0},bigint:function(n){if(n<=3n)return n>1n;if(n%2n===0n||n%3n===0n)return!1;for(var s=5n;s*s<=n;s+=6n)if(n%s===0n||n%(s+2n)===0n)return!1;return!0},BigNumber:function(n){if(n.lte(3))return n.gt(1);if(n.mod(2).eq(0)||n.mod(3).eq(0))return!1;if(n.lt(Math.pow(2,32))){for(var s=n.toNumber(),o=5;o*o<=s;o+=6)if(s%o===0||s%(o+2)===0)return!1;return!0}function l(M,C,$){for(var w=1;!C.eq(0);)C.mod(2).eq(0)?(C=C.div(2),M=M.mul(M).mod($)):(C=C.sub(1),w=M.mul(w).mod($));return w}var u=n.constructor.clone({precision:n.toFixed(0).length*2});n=new u(n);for(var h=0,c=n.sub(1);c.mod(2).eq(0);)c=c.div(2),h+=1;var f=null;if(n.lt("3317044064679887385961981"))f=[2,3,5,7,11,13,17,19,23,29,31,37,41].filter(M=>M<n);else{var d=Math.min(n.toNumber()-2,Math.floor(2*Math.pow(n.toFixed(0).length*Math.log(10),2)));f=[];for(var p=2;p<=d;p+=1)f.push(d)}for(var v=0;v<f.length;v+=1){var y=f[v],b=l(n.sub(n).add(y),c,n);if(!b.eq(1)){for(var _=0,N=b;!N.eq(n.sub(1));_+=1,N=N.mul(N).mod(n))if(_===h-1)return!1}}return!0},"Array | Matrix":r.referToSelf(a=>n=>deepMap(n,a))})}),name$30="numeric",dependencies$30=["number","?bignumber","?fraction"],createNumeric=factory(name$30,dependencies$30,t=>{var{number:r,bignumber:a,fraction:n}=t,s={string:!0,number:!0,BigNumber:!0,Fraction:!0},o={number:l=>r(l),BigNumber:a?l=>a(l):noBignumber,bigint:l=>BigInt(l),Fraction:n?l=>n(l):noFraction};return function(u){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"number",c=arguments.length>2?arguments[2]:void 0;if(c!==void 0)throw new SyntaxError("numeric() takes one or two arguments");var f=typeOf$1(u);if(!(f in s))throw new TypeError("Cannot convert "+u+' of type "'+f+'"; valid input types are '+Object.keys(s).join(", "));if(!(h in o))throw new TypeError("Cannot convert "+u+' to type "'+h+'"; valid output types are '+Object.keys(o).join(", "));return h===f?u:o[h](u)}}),name$2$="divideScalar",dependencies$2$=["typed","numeric"],createDivideScalar=factory(name$2$,dependencies$2$,t=>{var{typed:r,numeric:a}=t;return r(name$2$,{"number, number":function(s,o){return s/o},"Complex, Complex":function(s,o){return s.div(o)},"BigNumber, BigNumber":function(s,o){return s.div(o)},"bigint, bigint":function(s,o){return s/o},"Fraction, Fraction":function(s,o){return s.div(o)},"Unit, number | Complex | Fraction | BigNumber | Unit":(n,s)=>n.divide(s),"number | Fraction | Complex | BigNumber, Unit":(n,s)=>s.divideInto(n)})}),name$2_="pow",dependencies$2_=["typed","config","identity","multiply","matrix","inv","fraction","number","Complex"],createPow=factory(name$2_,dependencies$2_,t=>{var{typed:r,config:a,identity:n,multiply:s,matrix:o,inv:l,number:u,fraction:h,Complex:c}=t;return r(name$2_,{"number, number":f,"Complex, Complex":function(y,b){return y.pow(b)},"BigNumber, BigNumber":function(y,b){return b.isInteger()||y>=0||a.predictable?y.pow(b):new c(y.toNumber(),0).pow(b.toNumber(),0)},"bigint, bigint":(v,y)=>v**y,"Fraction, Fraction":function(y,b){var _=y.pow(b);if(_!=null)return _;if(a.predictable)throw new Error("Result of pow is non-rational and cannot be expressed as a fraction");return f(y.valueOf(),b.valueOf())},"Array, number":d,"Array, BigNumber":function(y,b){return d(y,b.toNumber())},"Matrix, number":p,"Matrix, BigNumber":function(y,b){return p(y,b.toNumber())},"Unit, number | BigNumber":function(y,b){return y.pow(b)}});function f(v,y){if(a.predictable&&!isInteger$1(y)&&v<0)try{var b=h(y),_=u(b);if((y===_||Math.abs((y-_)/y)<1e-14)&&b.d%2n===1n)return(b.n%2n===0n?1:-1)*Math.pow(-v,y)}catch{}return a.predictable&&(v<-1&&y===1/0||v>-1&&v<0&&y===-1/0)?NaN:isInteger$1(y)||v>=0||a.predictable?powNumber(v,y):v*v<1&&y===1/0||v*v>1&&y===-1/0?0:new c(v,0).pow(y,0)}function d(v,y){if(!isInteger$1(y))throw new TypeError("For A^b, b must be an integer (value is "+y+")");var b=arraySize(v);if(b.length!==2)throw new Error("For A^b, A must be 2 dimensional (A has "+b.length+" dimensions)");if(b[0]!==b[1])throw new Error("For A^b, A must be square (size is "+b[0]+"x"+b[1]+")");if(y<0)try{return d(l(v),-y)}catch(M){throw M.message==="Cannot calculate inverse, determinant is zero"?new TypeError("For A^b, when A is not invertible, b must be a positive integer (value is "+y+")"):M}for(var _=n(b[0]).valueOf(),N=v;y>=1;)(y&1)===1&&(_=s(N,_)),y>>=1,N=s(N,N);return _}function p(v,y){return o(d(v.valueOf(),y))}}),NO_INT="Number of decimals in function round must be an integer",name$2Z="round",dependencies$2Z=["typed","config","matrix","equalScalar","zeros","BigNumber","DenseMatrix"],createRound=factory(name$2Z,dependencies$2Z,t=>{var{typed:r,config:a,matrix:n,equalScalar:s,zeros:o,BigNumber:l,DenseMatrix:u}=t,h=createMatAlgo11xS0s({typed:r,equalScalar:s}),c=createMatAlgo12xSfs({typed:r,DenseMatrix:u}),f=createMatAlgo14xDs({typed:r});function d(p){return Math.abs(splitNumber(p).exponent)}return r(name$2Z,{number:function(v){var y=roundNumber(v,d(a.relTol)),b=nearlyEqual$1(v,y,a.relTol,a.absTol)?y:v;return roundNumber(b)},"number, number":function(v,y){var b=d(a.relTol);if(y>=b)return roundNumber(v,y);var _=roundNumber(v,b),N=nearlyEqual$1(v,_,a.relTol,a.absTol)?_:v;return roundNumber(N,y)},"number, BigNumber":function(v,y){if(!y.isInteger())throw new TypeError(NO_INT);return new l(v).toDecimalPlaces(y.toNumber())},Complex:function(v){return v.round()},"Complex, number":function(v,y){if(y%1)throw new TypeError(NO_INT);return v.round(y)},"Complex, BigNumber":function(v,y){if(!y.isInteger())throw new TypeError(NO_INT);var b=y.toNumber();return v.round(b)},BigNumber:function(v){var y=new l(v).toDecimalPlaces(d(a.relTol)),b=nearlyEqual(v,y,a.relTol,a.absTol)?y:v;return b.toDecimalPlaces(0)},"BigNumber, BigNumber":function(v,y){if(!y.isInteger())throw new TypeError(NO_INT);var b=d(a.relTol);if(y>=b)return v.toDecimalPlaces(y.toNumber());var _=v.toDecimalPlaces(b),N=nearlyEqual(v,_,a.relTol,a.absTol)?_:v;return N.toDecimalPlaces(y.toNumber())},bigint:p=>p,"bigint, number":(p,v)=>p,"bigint, BigNumber":(p,v)=>p,Fraction:function(v){return v.round()},"Fraction, number":function(v,y){if(y%1)throw new TypeError(NO_INT);return v.round(y)},"Fraction, BigNumber":function(v,y){if(!y.isInteger())throw new TypeError(NO_INT);return v.round(y.toNumber())},"Unit, number, Unit":r.referToSelf(p=>function(v,y,b){var _=v.toNumeric(b);return b.multiply(p(_,y))}),"Unit, BigNumber, Unit":r.referToSelf(p=>(v,y,b)=>p(v,y.toNumber(),b)),"Array | Matrix, number | BigNumber, Unit":r.referToSelf(p=>(v,y,b)=>deepMap(v,_=>p(_,y,b),!0)),"Array | Matrix | Unit, Unit":r.referToSelf(p=>(v,y)=>p(v,0,y)),"Array | Matrix":r.referToSelf(p=>v=>deepMap(v,p,!0)),"SparseMatrix, number | BigNumber":r.referToSelf(p=>(v,y)=>h(v,y,p,!1)),"DenseMatrix, number | BigNumber":r.referToSelf(p=>(v,y)=>f(v,y,p,!1)),"Array, number | BigNumber":r.referToSelf(p=>(v,y)=>f(n(v),y,p,!1).valueOf()),"number | Complex | BigNumber | Fraction, SparseMatrix":r.referToSelf(p=>(v,y)=>s(v,0)?o(y.size(),y.storage()):c(y,v,p,!0)),"number | Complex | BigNumber | Fraction, DenseMatrix":r.referToSelf(p=>(v,y)=>s(v,0)?o(y.size(),y.storage()):f(y,v,p,!0)),"number | Complex | BigNumber | Fraction, Array":r.referToSelf(p=>(v,y)=>f(n(y),v,p,!0).valueOf())})}),name$2Y="log",dependencies$2Y=["config","typed","typeOf","divideScalar","Complex"],nlg16=Math.log(16),createLog=factory(name$2Y,dependencies$2Y,t=>{var{typed:r,typeOf:a,config:n,divideScalar:s,Complex:o}=t;function l(h){return h.log()}function u(h){return l(new o(h,0))}return r(name$2Y,{number:function(c){return c>=0||n.predictable?logNumber(c):u(c)},bigint:promoteLogarithm(nlg16,logNumber,n,u),Complex:l,BigNumber:function(c){return!c.isNegative()||n.predictable?c.ln():u(c.toNumber())},"any, any":r.referToSelf(h=>(c,f)=>{if(a(c)==="Fraction"&&a(f)==="Fraction"){var d=c.log(f);if(d!==null)return d}return s(h(c),h(f))})})}),name$2X="log1p",dependencies$2X=["typed","config","divideScalar","log","Complex"],createLog1p=factory(name$2X,dependencies$2X,t=>{var{typed:r,config:a,divideScalar:n,log:s,Complex:o}=t;return r(name$2X,{number:function(h){return h>=-1||a.predictable?log1p$1(h):l(new o(h,0))},Complex:l,BigNumber:function(h){var c=h.plus(1);return!c.isNegative()||a.predictable?c.ln():l(new o(h.toNumber(),0))},"Array | Matrix":r.referToSelf(u=>h=>deepMap(h,u)),"any, any":r.referToSelf(u=>(h,c)=>n(u(h),s(c)))});function l(u){var h=u.re+1;return new o(Math.log(Math.sqrt(h*h+u.im*u.im)),Math.atan2(u.im,h))}}),name$2W="nthRoots",dependencies$2W=["config","typed","divideScalar","Complex"],createNthRoots=factory(name$2W,dependencies$2W,t=>{var{typed:r,config:a,divideScalar:n,Complex:s}=t,o=[function(h){return new s(h,0)},function(h){return new s(0,h)},function(h){return new s(-h,0)},function(h){return new s(0,-h)}];function l(u,h){if(h<0)throw new Error("Root must be greater than zero");if(h===0)throw new Error("Root must be non-zero");if(h%1!==0)throw new Error("Root must be an integer");if(u===0||u.abs()===0)return[new s(0,0)];var c=typeof u=="number",f;(c||u.re===0||u.im===0)&&(c?f=2*+(u<0):u.im===0?f=2*+(u.re<0):f=2*+(u.im<0)+1);for(var d=u.arg(),p=u.abs(),v=[],y=Math.pow(p,1/h),b=0;b<h;b++){var _=(f+4*b)/h;if(_===Math.round(_)){v.push(o[_%4](y));continue}v.push(new s({r:y,phi:(d+2*Math.PI*b)/h}))}return v}return r(name$2W,{Complex:function(h){return l(h,2)},"Complex, number":l})}),name$2V="dotPow",dependencies$2V=["typed","equalScalar","matrix","pow","DenseMatrix","concat","SparseMatrix"],createDotPow=factory(name$2V,dependencies$2V,t=>{var{typed:r,equalScalar:a,matrix:n,pow:s,DenseMatrix:o,concat:l,SparseMatrix:u}=t,h=createMatAlgo03xDSf({typed:r}),c=createMatAlgo07xSSf({typed:r,SparseMatrix:u}),f=createMatAlgo11xS0s({typed:r,equalScalar:a}),d=createMatAlgo12xSfs({typed:r,DenseMatrix:o}),p=createMatrixAlgorithmSuite({typed:r,matrix:n,concat:l}),v={};for(var y in s.signatures)Object.prototype.hasOwnProperty.call(s.signatures,y)&&!y.includes("Matrix")&&!y.includes("Array")&&(v[y]=s.signatures[y]);var b=r(v);return r(name$2V,p({elop:b,SS:c,DS:h,Ss:f,sS:d}))}),name$2U="dotDivide",dependencies$2U=["typed","matrix","equalScalar","divideScalar","DenseMatrix","concat","SparseMatrix"],createDotDivide=factory(name$2U,dependencies$2U,t=>{var{typed:r,matrix:a,equalScalar:n,divideScalar:s,DenseMatrix:o,concat:l,SparseMatrix:u}=t,h=createMatAlgo02xDS0({typed:r,equalScalar:n}),c=createMatAlgo03xDSf({typed:r}),f=createMatAlgo07xSSf({typed:r,SparseMatrix:u}),d=createMatAlgo11xS0s({typed:r,equalScalar:n}),p=createMatAlgo12xSfs({typed:r,DenseMatrix:o}),v=createMatrixAlgorithmSuite({typed:r,matrix:a,concat:l});return r(name$2U,v({elop:s,SS:f,DS:c,SD:h,Ss:d,sS:p}))});function createSolveValidation(t){var{DenseMatrix:r}=t;return function(n,s,o){var l=n.size();if(l.length!==2)throw new RangeError("Matrix must be two dimensional (size: "+format$1(l)+")");var u=l[0],h=l[1];if(u!==h)throw new RangeError("Matrix must be square (size: "+format$1(l)+")");var c=[];if(isMatrix(s)){var f=s.size(),d=s._data;if(f.length===1){if(f[0]!==u)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var p=0;p<u;p++)c[p]=[d[p]];return new r({data:c,size:[u,1],datatype:s._datatype})}if(f.length===2){if(f[0]!==u||f[1]!==1)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");if(isDenseMatrix(s)){if(o){c=[];for(var v=0;v<u;v++)c[v]=[d[v][0]];return new r({data:c,size:[u,1],datatype:s._datatype})}return s}if(isSparseMatrix(s)){for(var y=0;y<u;y++)c[y]=[0];for(var b=s._values,_=s._index,N=s._ptr,M=N[1],C=N[0];C<M;C++){var $=_[C];c[$][0]=b[C]}return new r({data:c,size:[u,1],datatype:s._datatype})}}throw new RangeError("Dimension mismatch. The right side has to be either 1- or 2-dimensional vector.")}if(isArray(s)){var w=arraySize(s);if(w.length===1){if(w[0]!==u)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var A=0;A<u;A++)c[A]=[s[A]];return new r({data:c,size:[u,1]})}if(w.length===2){if(w[0]!==u||w[1]!==1)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var X=0;X<u;X++)c[X]=[s[X][0]];return new r({data:c,size:[u,1]})}throw new RangeError("Dimension mismatch. The right side has to be either 1- or 2-dimensional vector.")}}}var name$2T="lsolve",dependencies$2T=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],createLsolve=factory(name$2T,dependencies$2T,t=>{var{typed:r,matrix:a,divideScalar:n,multiplyScalar:s,subtractScalar:o,equalScalar:l,DenseMatrix:u}=t,h=createSolveValidation({DenseMatrix:u});return r(name$2T,{"SparseMatrix, Array | Matrix":function(p,v){return f(p,v)},"DenseMatrix, Array | Matrix":function(p,v){return c(p,v)},"Array, Array | Matrix":function(p,v){var y=a(p),b=c(y,v);return b.valueOf()}});function c(d,p){p=h(d,p,!0);for(var v=p._data,y=d._size[0],b=d._size[1],_=[],N=d._data,M=0;M<b;M++){var C=v[M][0]||0,$=void 0;if(l(C,0))$=0;else{var w=N[M][M];if(l(w,0))throw new Error("Linear system cannot be solved since matrix is singular");$=n(C,w);for(var A=M+1;A<y;A++)v[A]=[o(v[A][0]||0,s($,N[A][M]))]}_[M]=[$]}return new u({data:_,size:[y,1]})}function f(d,p){p=h(d,p,!0);for(var v=p._data,y=d._size[0],b=d._size[1],_=d._values,N=d._index,M=d._ptr,C=[],$=0;$<b;$++){var w=v[$][0]||0;if(l(w,0))C[$]=[0];else{for(var A=0,X=[],O=[],G=M[$],R=M[$+1],B=G;B<R;B++){var F=N[B];F===$?A=_[B]:F>$&&(X.push(_[B]),O.push(F))}if(l(A,0))throw new Error("Linear system cannot be solved since matrix is singular");for(var U=n(w,A),q=0,ee=O.length;q<ee;q++){var z=O[q];v[z]=[o(v[z][0]||0,s(U,X[q]))]}C[$]=[U]}}return new u({data:C,size:[y,1]})}}),name$2S="usolve",dependencies$2S=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],createUsolve=factory(name$2S,dependencies$2S,t=>{var{typed:r,matrix:a,divideScalar:n,multiplyScalar:s,subtractScalar:o,equalScalar:l,DenseMatrix:u}=t,h=createSolveValidation({DenseMatrix:u});return r(name$2S,{"SparseMatrix, Array | Matrix":function(p,v){return f(p,v)},"DenseMatrix, Array | Matrix":function(p,v){return c(p,v)},"Array, Array | Matrix":function(p,v){var y=a(p),b=c(y,v);return b.valueOf()}});function c(d,p){p=h(d,p,!0);for(var v=p._data,y=d._size[0],b=d._size[1],_=[],N=d._data,M=b-1;M>=0;M--){var C=v[M][0]||0,$=void 0;if(l(C,0))$=0;else{var w=N[M][M];if(l(w,0))throw new Error("Linear system cannot be solved since matrix is singular");$=n(C,w);for(var A=M-1;A>=0;A--)v[A]=[o(v[A][0]||0,s($,N[A][M]))]}_[M]=[$]}return new u({data:_,size:[y,1]})}function f(d,p){p=h(d,p,!0);for(var v=p._data,y=d._size[0],b=d._size[1],_=d._values,N=d._index,M=d._ptr,C=[],$=b-1;$>=0;$--){var w=v[$][0]||0;if(l(w,0))C[$]=[0];else{for(var A=0,X=[],O=[],G=M[$],R=M[$+1],B=R-1;B>=G;B--){var F=N[B];F===$?A=_[B]:F<$&&(X.push(_[B]),O.push(F))}if(l(A,0))throw new Error("Linear system cannot be solved since matrix is singular");for(var U=n(w,A),q=0,ee=O.length;q<ee;q++){var z=O[q];v[z]=[o(v[z][0],s(U,X[q]))]}C[$]=[U]}}return new u({data:C,size:[y,1]})}}),name$2R="lsolveAll",dependencies$2R=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],createLsolveAll=factory(name$2R,dependencies$2R,t=>{var{typed:r,matrix:a,divideScalar:n,multiplyScalar:s,subtractScalar:o,equalScalar:l,DenseMatrix:u}=t,h=createSolveValidation({DenseMatrix:u});return r(name$2R,{"SparseMatrix, Array | Matrix":function(p,v){return f(p,v)},"DenseMatrix, Array | Matrix":function(p,v){return c(p,v)},"Array, Array | Matrix":function(p,v){var y=a(p),b=c(y,v);return b.map(_=>_.valueOf())}});function c(d,p){for(var v=[h(d,p,!0)._data.map(O=>O[0])],y=d._data,b=d._size[0],_=d._size[1],N=0;N<_;N++)for(var M=v.length,C=0;C<M;C++){var $=v[C];if(l(y[N][N],0))if(l($[N],0)){if(C===0){var A=[...$];A[N]=1;for(var X=N+1;X<_;X++)A[X]=o(A[X],y[X][N]);v.push(A)}}else{if(C===0)return[];v.splice(C,1),C-=1,M-=1}else{$[N]=n($[N],y[N][N]);for(var w=N+1;w<_;w++)$[w]=o($[w],s($[N],y[w][N]))}}return v.map(O=>new u({data:O.map(G=>[G]),size:[b,1]}))}function f(d,p){for(var v=[h(d,p,!0)._data.map(j=>j[0])],y=d._size[0],b=d._size[1],_=d._values,N=d._index,M=d._ptr,C=0;C<b;C++)for(var $=v.length,w=0;w<$;w++){for(var A=v[w],X=[],O=[],G=M[C],R=M[C+1],B=0,F=G;F<R;F++){var U=N[F];U===C?B=_[F]:U>C&&(X.push(_[F]),O.push(U))}if(l(B,0))if(l(A[C],0)){if(w===0){var Y=[...A];Y[C]=1;for(var K=0,Z=O.length;K<Z;K++){var ne=O[K];Y[ne]=o(Y[ne],X[K])}v.push(Y)}}else{if(w===0)return[];v.splice(w,1),w-=1,$-=1}else{A[C]=n(A[C],B);for(var q=0,ee=O.length;q<ee;q++){var z=O[q];A[z]=o(A[z],s(A[C],X[q]))}}}return v.map(j=>new u({data:j.map(V=>[V]),size:[y,1]}))}}),name$2Q="usolveAll",dependencies$2Q=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],createUsolveAll=factory(name$2Q,dependencies$2Q,t=>{var{typed:r,matrix:a,divideScalar:n,multiplyScalar:s,subtractScalar:o,equalScalar:l,DenseMatrix:u}=t,h=createSolveValidation({DenseMatrix:u});return r(name$2Q,{"SparseMatrix, Array | Matrix":function(p,v){return f(p,v)},"DenseMatrix, Array | Matrix":function(p,v){return c(p,v)},"Array, Array | Matrix":function(p,v){var y=a(p),b=c(y,v);return b.map(_=>_.valueOf())}});function c(d,p){for(var v=[h(d,p,!0)._data.map(O=>O[0])],y=d._data,b=d._size[0],_=d._size[1],N=_-1;N>=0;N--)for(var M=v.length,C=0;C<M;C++){var $=v[C];if(l(y[N][N],0))if(l($[N],0)){if(C===0){var A=[...$];A[N]=1;for(var X=N-1;X>=0;X--)A[X]=o(A[X],y[X][N]);v.push(A)}}else{if(C===0)return[];v.splice(C,1),C-=1,M-=1}else{$[N]=n($[N],y[N][N]);for(var w=N-1;w>=0;w--)$[w]=o($[w],s($[N],y[w][N]))}}return v.map(O=>new u({data:O.map(G=>[G]),size:[b,1]}))}function f(d,p){for(var v=[h(d,p,!0)._data.map(j=>j[0])],y=d._size[0],b=d._size[1],_=d._values,N=d._index,M=d._ptr,C=b-1;C>=0;C--)for(var $=v.length,w=0;w<$;w++){for(var A=v[w],X=[],O=[],G=M[C],R=M[C+1],B=0,F=R-1;F>=G;F--){var U=N[F];U===C?B=_[F]:U<C&&(X.push(_[F]),O.push(U))}if(l(B,0))if(l(A[C],0)){if(w===0){var Y=[...A];Y[C]=1;for(var K=0,Z=O.length;K<Z;K++){var ne=O[K];Y[ne]=o(Y[ne],X[K])}v.push(Y)}}else{if(w===0)return[];v.splice(w,1),w-=1,$-=1}else{A[C]=n(A[C],B);for(var q=0,ee=O.length;q<ee;q++){var z=O[q];A[z]=o(A[z],s(A[C],X[q]))}}}return v.map(j=>new u({data:j.map(V=>[V]),size:[y,1]}))}}),name$2P="matAlgo08xS0Sid",dependencies$2P=["typed","equalScalar"],createMatAlgo08xS0Sid=factory(name$2P,dependencies$2P,t=>{var{typed:r,equalScalar:a}=t;return function(s,o,l){var u=s._values,h=s._index,c=s._ptr,f=s._size,d=s._datatype||s._data===void 0?s._datatype:s.getDataType(),p=o._values,v=o._index,y=o._ptr,b=o._size,_=o._datatype||o._data===void 0?o._datatype:o.getDataType();if(f.length!==b.length)throw new DimensionError(f.length,b.length);if(f[0]!==b[0]||f[1]!==b[1])throw new RangeError("Dimension mismatch. Matrix A ("+f+") must match Matrix B ("+b+")");if(!u||!p)throw new Error("Cannot perform operation on Pattern Sparse Matrices");var N=f[0],M=f[1],C,$=a,w=0,A=l;typeof d=="string"&&d===_&&d!=="mixed"&&(C=d,$=r.find(a,[C,C]),w=r.convert(0,C),A=r.find(l,[C,C]));for(var X=[],O=[],G=[],R=[],B=[],F,U,q,ee,z=0;z<M;z++){G[z]=O.length;var Y=z+1;for(U=c[z],q=c[z+1],F=U;F<q;F++)ee=h[F],B[ee]=Y,R[ee]=u[F],O.push(ee);for(U=y[z],q=y[z+1],F=U;F<q;F++)ee=v[F],B[ee]===Y&&(R[ee]=A(R[ee],p[F]));for(F=G[z];F<O.length;){ee=O[F];var K=R[ee];$(K,w)?O.splice(F,1):(X.push(K),F++)}}return G[M]=O.length,s.createSparseMatrix({values:X,index:O,ptr:G,size:[N,M],datatype:d===s._datatype&&_===o._datatype?C:void 0})}}),createUseMatrixForArrayScalar=factory("useMatrixForArrayScalar",["typed","matrix"],t=>{var{typed:r,matrix:a}=t;return{"Array, number":r.referTo("DenseMatrix, number",n=>(s,o)=>n(a(s),o).valueOf()),"Array, BigNumber":r.referTo("DenseMatrix, BigNumber",n=>(s,o)=>n(a(s),o).valueOf()),"number, Array":r.referTo("number, DenseMatrix",n=>(s,o)=>n(s,a(o)).valueOf()),"BigNumber, Array":r.referTo("BigNumber, DenseMatrix",n=>(s,o)=>n(s,a(o)).valueOf())}}),name$2O="leftShift",dependencies$2O=["typed","matrix","equalScalar","zeros","DenseMatrix","concat"],createLeftShift=factory(name$2O,dependencies$2O,t=>{var{typed:r,matrix:a,equalScalar:n,zeros:s,DenseMatrix:o,concat:l}=t,u=createMatAlgo01xDSid({typed:r}),h=createMatAlgo02xDS0({typed:r,equalScalar:n}),c=createMatAlgo08xS0Sid({typed:r,equalScalar:n}),f=createMatAlgo10xSids({typed:r,DenseMatrix:o}),d=createMatAlgo11xS0s({typed:r,equalScalar:n}),p=createMatAlgo14xDs({typed:r}),v=createMatrixAlgorithmSuite({typed:r,matrix:a,concat:l}),y=createUseMatrixForArrayScalar({typed:r,matrix:a});return r(name$2O,{"number, number":leftShiftNumber,"BigNumber, BigNumber":leftShiftBigNumber,"bigint, bigint":(b,_)=>b<<_,"SparseMatrix, number | BigNumber":r.referToSelf(b=>(_,N)=>n(N,0)?_.clone():d(_,N,b,!1)),"DenseMatrix, number | BigNumber":r.referToSelf(b=>(_,N)=>n(N,0)?_.clone():p(_,N,b,!1)),"number | BigNumber, SparseMatrix":r.referToSelf(b=>(_,N)=>n(_,0)?s(N.size(),N.storage()):f(N,_,b,!0)),"number | BigNumber, DenseMatrix":r.referToSelf(b=>(_,N)=>n(_,0)?s(N.size(),N.storage()):p(N,_,b,!0))},y,v({SS:c,DS:u,SD:h}))}),name$2N="rightArithShift",dependencies$2N=["typed","matrix","equalScalar","zeros","DenseMatrix","concat"],createRightArithShift=factory(name$2N,dependencies$2N,t=>{var{typed:r,matrix:a,equalScalar:n,zeros:s,DenseMatrix:o,concat:l}=t,u=createMatAlgo01xDSid({typed:r}),h=createMatAlgo02xDS0({typed:r,equalScalar:n}),c=createMatAlgo08xS0Sid({typed:r,equalScalar:n}),f=createMatAlgo10xSids({typed:r,DenseMatrix:o}),d=createMatAlgo11xS0s({typed:r,equalScalar:n}),p=createMatAlgo14xDs({typed:r}),v=createMatrixAlgorithmSuite({typed:r,matrix:a,concat:l}),y=createUseMatrixForArrayScalar({typed:r,matrix:a});return r(name$2N,{"number, number":rightArithShiftNumber,"BigNumber, BigNumber":rightArithShiftBigNumber,"bigint, bigint":(b,_)=>b>>_,"SparseMatrix, number | BigNumber":r.referToSelf(b=>(_,N)=>n(N,0)?_.clone():d(_,N,b,!1)),"DenseMatrix, number | BigNumber":r.referToSelf(b=>(_,N)=>n(N,0)?_.clone():p(_,N,b,!1)),"number | BigNumber, SparseMatrix":r.referToSelf(b=>(_,N)=>n(_,0)?s(N.size(),N.storage()):f(N,_,b,!0)),"number | BigNumber, DenseMatrix":r.referToSelf(b=>(_,N)=>n(_,0)?s(N.size(),N.storage()):p(N,_,b,!0))},y,v({SS:c,DS:u,SD:h}))}),name$2M="rightLogShift",dependencies$2M=["typed","matrix","equalScalar","zeros","DenseMatrix","concat"],createRightLogShift=factory(name$2M,dependencies$2M,t=>{var{typed:r,matrix:a,equalScalar:n,zeros:s,DenseMatrix:o,concat:l}=t,u=createMatAlgo01xDSid({typed:r}),h=createMatAlgo02xDS0({typed:r,equalScalar:n}),c=createMatAlgo08xS0Sid({typed:r,equalScalar:n}),f=createMatAlgo10xSids({typed:r,DenseMatrix:o}),d=createMatAlgo11xS0s({typed:r,equalScalar:n}),p=createMatAlgo14xDs({typed:r}),v=createMatrixAlgorithmSuite({typed:r,matrix:a,concat:l}),y=createUseMatrixForArrayScalar({typed:r,matrix:a});return r(name$2M,{"number, number":rightLogShiftNumber,"SparseMatrix, number | BigNumber":r.referToSelf(b=>(_,N)=>n(N,0)?_.clone():d(_,N,b,!1)),"DenseMatrix, number | BigNumber":r.referToSelf(b=>(_,N)=>n(N,0)?_.clone():p(_,N,b,!1)),"number | BigNumber, SparseMatrix":r.referToSelf(b=>(_,N)=>n(_,0)?s(N.size(),N.storage()):f(N,_,b,!0)),"number | BigNumber, DenseMatrix":r.referToSelf(b=>(_,N)=>n(_,0)?s(N.size(),N.storage()):p(N,_,b,!0))},y,v({SS:c,DS:u,SD:h}))}),name$2L="and",dependencies$2L=["typed","matrix","equalScalar","zeros","not","concat"],createAnd=factory(name$2L,dependencies$2L,t=>{var{typed:r,matrix:a,equalScalar:n,zeros:s,not:o,concat:l}=t,u=createMatAlgo02xDS0({typed:r,equalScalar:n}),h=createMatAlgo06xS0S0({typed:r,equalScalar:n}),c=createMatAlgo11xS0s({typed:r,equalScalar:n}),f=createMatAlgo14xDs({typed:r}),d=createMatrixAlgorithmSuite({typed:r,matrix:a,concat:l});return r(name$2L,{"number, number":andNumber,"Complex, Complex":function(v,y){return(v.re!==0||v.im!==0)&&(y.re!==0||y.im!==0)},"BigNumber, BigNumber":function(v,y){return!v.isZero()&&!y.isZero()&&!v.isNaN()&&!y.isNaN()},"bigint, bigint":andNumber,"Unit, Unit":r.referToSelf(p=>(v,y)=>p(v.value||0,y.value||0)),"SparseMatrix, any":r.referToSelf(p=>(v,y)=>o(y)?s(v.size(),v.storage()):c(v,y,p,!1)),"DenseMatrix, any":r.referToSelf(p=>(v,y)=>o(y)?s(v.size(),v.storage()):f(v,y,p,!1)),"any, SparseMatrix":r.referToSelf(p=>(v,y)=>o(v)?s(v.size(),v.storage()):c(y,v,p,!0)),"any, DenseMatrix":r.referToSelf(p=>(v,y)=>o(v)?s(v.size(),v.storage()):f(y,v,p,!0)),"Array, any":r.referToSelf(p=>(v,y)=>p(a(v),y).valueOf()),"any, Array":r.referToSelf(p=>(v,y)=>p(v,a(y)).valueOf())},d({SS:h,DS:u}))}),name$2K="compare",dependencies$2K=["typed","config","matrix","equalScalar","BigNumber","Fraction","DenseMatrix","concat"],createCompare=factory(name$2K,dependencies$2K,t=>{var{typed:r,config:a,equalScalar:n,matrix:s,BigNumber:o,Fraction:l,DenseMatrix:u,concat:h}=t,c=createMatAlgo03xDSf({typed:r}),f=createMatAlgo05xSfSf({typed:r,equalScalar:n}),d=createMatAlgo12xSfs({typed:r,DenseMatrix:u}),p=createMatrixAlgorithmSuite({typed:r,matrix:s,concat:h}),v=createCompareUnits({typed:r});return r(name$2K,createCompareNumber({typed:r,config:a}),{"boolean, boolean":function(b,_){return b===_?0:b>_?1:-1},"BigNumber, BigNumber":function(b,_){return nearlyEqual(b,_,a.relTol,a.absTol)?new o(0):new o(b.cmp(_))},"bigint, bigint":function(b,_){return b===_?0n:b>_?1n:-1n},"Fraction, Fraction":function(b,_){return new l(b.compare(_))},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},v,p({SS:f,DS:c,Ss:d}))}),createCompareNumber=factory(name$2K,["typed","config"],t=>{var{typed:r,config:a}=t;return r(name$2K,{"number, number":function(s,o){return nearlyEqual$1(s,o,a.relTol,a.absTol)?0:s>o?1:-1}})}),naturalSort$1,hasRequiredNaturalSort;function requireNaturalSort(){return hasRequiredNaturalSort||(hasRequiredNaturalSort=1,naturalSort$1=function t(r,a){var n=/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,s=/(^[ ]*|[ ]*$)/g,o=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,l=/^0x[0-9a-f]+$/i,u=/^0/,h=function(C){return t.insensitive&&(""+C).toLowerCase()||""+C},c=h(r).replace(s,"")||"",f=h(a).replace(s,"")||"",d=c.replace(n,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),p=f.replace(n,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),v=parseInt(c.match(l),16)||d.length!==1&&c.match(o)&&Date.parse(c),y=parseInt(f.match(l),16)||v&&f.match(o)&&Date.parse(f)||null,b,_;if(y){if(v<y)return-1;if(v>y)return 1}for(var N=0,M=Math.max(d.length,p.length);N<M;N++){if(b=!(d[N]||"").match(u)&&parseFloat(d[N])||d[N]||0,_=!(p[N]||"").match(u)&&parseFloat(p[N])||p[N]||0,isNaN(b)!==isNaN(_))return isNaN(b)?1:-1;if(typeof b!=typeof _&&(b+="",_+=""),b<_)return-1;if(b>_)return 1}return 0}),naturalSort$1}var naturalSortExports=requireNaturalSort();const naturalSort=getDefaultExportFromCjs(naturalSortExports);var name$2J="compareNatural",dependencies$2J=["typed","compare"],createCompareNatural=factory(name$2J,dependencies$2J,t=>{var{typed:r,compare:a}=t,n=a.signatures["boolean,boolean"];return r(name$2J,{"any, any":s});function s(h,c){var f=typeOf$1(h),d=typeOf$1(c),p;if((f==="number"||f==="BigNumber"||f==="Fraction")&&(d==="number"||d==="BigNumber"||d==="Fraction"))return p=a(h,c),p.toString()!=="0"?p>0?1:-1:naturalSort(f,d);var v=["Array","DenseMatrix","SparseMatrix"];if(v.includes(f)||v.includes(d))return p=o(s,h,c),p!==0?p:naturalSort(f,d);if(f!==d)return naturalSort(f,d);if(f==="Complex")return compareComplexNumbers(h,c);if(f==="Unit")return h.equalBase(c)?s(h.value,c.value):l(s,h.formatUnits(),c.formatUnits());if(f==="boolean")return n(h,c);if(f==="string")return naturalSort(h,c);if(f==="Object")return u(s,h,c);if(f==="null"||f==="undefined")return 0;throw new TypeError('Unsupported type of value "'+f+'"')}function o(h,c,f){return isSparseMatrix(c)&&isSparseMatrix(f)?l(h,c.toJSON().values,f.toJSON().values):isSparseMatrix(c)?o(h,c.toArray(),f):isSparseMatrix(f)?o(h,c,f.toArray()):isDenseMatrix(c)?o(h,c.toJSON().data,f):isDenseMatrix(f)?o(h,c,f.toJSON().data):Array.isArray(c)?Array.isArray(f)?l(h,c,f):o(h,c,[f]):o(h,[c],f)}function l(h,c,f){for(var d=0,p=Math.min(c.length,f.length);d<p;d++){var v=h(c[d],f[d]);if(v!==0)return v}return c.length>f.length?1:c.length<f.length?-1:0}function u(h,c,f){var d=Object.keys(c),p=Object.keys(f);d.sort(naturalSort),p.sort(naturalSort);var v=l(h,d,p);if(v!==0)return v;for(var y=0;y<d.length;y++){var b=h(c[d[y]],f[p[y]]);if(b!==0)return b}return 0}});function compareComplexNumbers(t,r){return t.re>r.re?1:t.re<r.re?-1:t.im>r.im?1:t.im<r.im?-1:0}var name$2I="compareText",dependencies$2I=["typed","matrix","concat"];compareText$1.signature="any, any";var createCompareText=factory(name$2I,dependencies$2I,t=>{var{typed:r,matrix:a,concat:n}=t,s=createMatrixAlgorithmSuite({typed:r,matrix:a,concat:n});return r(name$2I,compareText$1,s({elop:compareText$1,Ds:!0}))}),name$2H="equal",dependencies$2H=["typed","matrix","equalScalar","DenseMatrix","SparseMatrix"],createEqual=factory(name$2H,dependencies$2H,t=>{var{typed:r,matrix:a,equalScalar:n,DenseMatrix:s,concat:o,SparseMatrix:l}=t,u=createMatAlgo03xDSf({typed:r}),h=createMatAlgo07xSSf({typed:r,SparseMatrix:l}),c=createMatAlgo12xSfs({typed:r,DenseMatrix:s}),f=createMatrixAlgorithmSuite({typed:r,matrix:a});return r(name$2H,createEqualNumber({typed:r,equalScalar:n}),f({elop:n,SS:h,DS:u,Ss:c}))}),createEqualNumber=factory(name$2H,["typed","equalScalar"],t=>{var{typed:r,equalScalar:a}=t;return r(name$2H,{"any, any":function(s,o){return s===null?o===null:o===null?s===null:s===void 0?o===void 0:o===void 0?s===void 0:a(s,o)}})}),name$2G="equalText",dependencies$2G=["typed","compareText","isZero"],createEqualText=factory(name$2G,dependencies$2G,t=>{var{typed:r,compareText:a,isZero:n}=t;return r(name$2G,{"any, any":function(o,l){return n(a(o,l))}})}),name$2F="smaller",dependencies$2F=["typed","config","bignumber","matrix","DenseMatrix","concat","SparseMatrix"],createSmaller=factory(name$2F,dependencies$2F,t=>{var{typed:r,config:a,bignumber:n,matrix:s,DenseMatrix:o,concat:l,SparseMatrix:u}=t,h=createMatAlgo03xDSf({typed:r}),c=createMatAlgo07xSSf({typed:r,SparseMatrix:u}),f=createMatAlgo12xSfs({typed:r,DenseMatrix:o}),d=createMatrixAlgorithmSuite({typed:r,matrix:s,concat:l}),p=createCompareUnits({typed:r});function v(y,b){return y.lt(b)&&!nearlyEqual(y,b,a.relTol,a.absTol)}return r(name$2F,createSmallerNumber({typed:r,config:a}),{"boolean, boolean":(y,b)=>y<b,"BigNumber, BigNumber":v,"bigint, bigint":(y,b)=>y<b,"Fraction, Fraction":(y,b)=>y.compare(b)===-1,"Fraction, BigNumber":function(b,_){return v(n(b),_)},"BigNumber, Fraction":function(b,_){return v(b,n(_))},"Complex, Complex":function(b,_){throw new TypeError("No ordering relation is defined for complex numbers")}},p,d({SS:c,DS:h,Ss:f}))}),createSmallerNumber=factory(name$2F,["typed","config"],t=>{var{typed:r,config:a}=t;return r(name$2F,{"number, number":function(s,o){return s<o&&!nearlyEqual$1(s,o,a.relTol,a.absTol)}})}),name$2E="smallerEq",dependencies$2E=["typed","config","matrix","DenseMatrix","concat","SparseMatrix"],createSmallerEq=factory(name$2E,dependencies$2E,t=>{var{typed:r,config:a,matrix:n,DenseMatrix:s,concat:o,SparseMatrix:l}=t,u=createMatAlgo03xDSf({typed:r}),h=createMatAlgo07xSSf({typed:r,SparseMatrix:l}),c=createMatAlgo12xSfs({typed:r,DenseMatrix:s}),f=createMatrixAlgorithmSuite({typed:r,matrix:n,concat:o}),d=createCompareUnits({typed:r});return r(name$2E,createSmallerEqNumber({typed:r,config:a}),{"boolean, boolean":(p,v)=>p<=v,"BigNumber, BigNumber":function(v,y){return v.lte(y)||nearlyEqual(v,y,a.relTol,a.absTol)},"bigint, bigint":(p,v)=>p<=v,"Fraction, Fraction":(p,v)=>p.compare(v)!==1,"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},d,f({SS:h,DS:u,Ss:c}))}),createSmallerEqNumber=factory(name$2E,["typed","config"],t=>{var{typed:r,config:a}=t;return r(name$2E,{"number, number":function(s,o){return s<=o||nearlyEqual$1(s,o,a.relTol,a.absTol)}})}),name$2D="larger",dependencies$2D=["typed","config","bignumber","matrix","DenseMatrix","concat","SparseMatrix"],createLarger=factory(name$2D,dependencies$2D,t=>{var{typed:r,config:a,bignumber:n,matrix:s,DenseMatrix:o,concat:l,SparseMatrix:u}=t,h=createMatAlgo03xDSf({typed:r}),c=createMatAlgo07xSSf({typed:r,SparseMatrix:u}),f=createMatAlgo12xSfs({typed:r,DenseMatrix:o}),d=createMatrixAlgorithmSuite({typed:r,matrix:s,concat:l}),p=createCompareUnits({typed:r});function v(y,b){return y.gt(b)&&!nearlyEqual(y,b,a.relTol,a.absTol)}return r(name$2D,createLargerNumber({typed:r,config:a}),{"boolean, boolean":(y,b)=>y>b,"BigNumber, BigNumber":v,"bigint, bigint":(y,b)=>y>b,"Fraction, Fraction":(y,b)=>y.compare(b)===1,"Fraction, BigNumber":function(b,_){return v(n(b),_)},"BigNumber, Fraction":function(b,_){return v(b,n(_))},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},p,d({SS:c,DS:h,Ss:f}))}),createLargerNumber=factory(name$2D,["typed","config"],t=>{var{typed:r,config:a}=t;return r(name$2D,{"number, number":function(s,o){return s>o&&!nearlyEqual$1(s,o,a.relTol,a.absTol)}})}),name$2C="largerEq",dependencies$2C=["typed","config","matrix","DenseMatrix","concat","SparseMatrix"],createLargerEq=factory(name$2C,dependencies$2C,t=>{var{typed:r,config:a,matrix:n,DenseMatrix:s,concat:o,SparseMatrix:l}=t,u=createMatAlgo03xDSf({typed:r}),h=createMatAlgo07xSSf({typed:r,SparseMatrix:l}),c=createMatAlgo12xSfs({typed:r,DenseMatrix:s}),f=createMatrixAlgorithmSuite({typed:r,matrix:n,concat:o}),d=createCompareUnits({typed:r});return r(name$2C,createLargerEqNumber({typed:r,config:a}),{"boolean, boolean":(p,v)=>p>=v,"BigNumber, BigNumber":function(v,y){return v.gte(y)||nearlyEqual(v,y,a.relTol,a.absTol)},"bigint, bigint":function(v,y){return v>=y},"Fraction, Fraction":(p,v)=>p.compare(v)!==-1,"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},d,f({SS:h,DS:u,Ss:c}))}),createLargerEqNumber=factory(name$2C,["typed","config"],t=>{var{typed:r,config:a}=t;return r(name$2C,{"number, number":function(s,o){return s>=o||nearlyEqual$1(s,o,a.relTol,a.absTol)}})}),name$2B="deepEqual",dependencies$2B=["typed","equal"],createDeepEqual=factory(name$2B,dependencies$2B,t=>{var{typed:r,equal:a}=t;return r(name$2B,{"any, any":function(o,l){return n(o.valueOf(),l.valueOf())}});function n(s,o){if(Array.isArray(s))if(Array.isArray(o)){var l=s.length;if(l!==o.length)return!1;for(var u=0;u<l;u++)if(!n(s[u],o[u]))return!1;return!0}else return!1;else return Array.isArray(o)?!1:a(s,o)}}),name$2A="unequal",dependencies$2A=["typed","config","equalScalar","matrix","DenseMatrix","concat","SparseMatrix"],createUnequal=factory(name$2A,dependencies$2A,t=>{var{typed:r,config:a,equalScalar:n,matrix:s,DenseMatrix:o,concat:l,SparseMatrix:u}=t,h=createMatAlgo03xDSf({typed:r}),c=createMatAlgo07xSSf({typed:r,SparseMatrix:u}),f=createMatAlgo12xSfs({typed:r,DenseMatrix:o}),d=createMatrixAlgorithmSuite({typed:r,matrix:s,concat:l});return r(name$2A,createUnequalNumber({typed:r,equalScalar:n}),d({elop:p,SS:c,DS:h,Ss:f}));function p(v,y){return!n(v,y)}}),createUnequalNumber=factory(name$2A,["typed","equalScalar"],t=>{var{typed:r,equalScalar:a}=t;return r(name$2A,{"any, any":function(s,o){return s===null?o!==null:o===null?s!==null:s===void 0?o!==void 0:o===void 0?s!==void 0:!a(s,o)}})}),name$2z="partitionSelect",dependencies$2z=["typed","isNumeric","isNaN","compare"],createPartitionSelect=factory(name$2z,dependencies$2z,t=>{var{typed:r,isNumeric:a,isNaN:n,compare:s}=t,o=s,l=(c,f)=>-s(c,f);return r(name$2z,{"Array | Matrix, number":function(f,d){return u(f,d,o)},"Array | Matrix, number, string":function(f,d,p){if(p==="asc")return u(f,d,o);if(p==="desc")return u(f,d,l);throw new Error('Compare string must be "asc" or "desc"')},"Array | Matrix, number, function":u});function u(c,f,d){if(!isInteger$1(f)||f<0)throw new Error("k must be a non-negative integer");if(isMatrix(c)){var p=c.size();if(p.length>1)throw new Error("Only one dimensional matrices supported");return h(c.valueOf(),f,d)}if(Array.isArray(c))return h(c,f,d)}function h(c,f,d){if(f>=c.length)throw new Error("k out of bounds");for(var p=0;p<c.length;p++)if(a(c[p])&&n(c[p]))return c[p];for(var v=0,y=c.length-1;v<y;){for(var b=v,_=y,N=c[Math.floor(Math.random()*(y-v+1))+v];b<_;)if(d(c[b],N)>=0){var M=c[_];c[_]=c[b],c[b]=M,--_}else++b;d(c[b],N)>0&&--b,f<=b?y=b:v=b+1}return c[f]}}),name$2y="sort",dependencies$2y=["typed","matrix","compare","compareNatural"],createSort=factory(name$2y,dependencies$2y,t=>{var{typed:r,matrix:a,compare:n,compareNatural:s}=t,o=n,l=(f,d)=>-n(f,d);return r(name$2y,{Array:function(d){return h(d),d.sort(o)},Matrix:function(d){return c(d),a(d.toArray().sort(o),d.storage())},"Array, function":function(d,p){return h(d),d.sort(p)},"Matrix, function":function(d,p){return c(d),a(d.toArray().sort(p),d.storage())},"Array, string":function(d,p){return h(d),d.sort(u(p))},"Matrix, string":function(d,p){return c(d),a(d.toArray().sort(u(p)),d.storage())}});function u(f){if(f==="asc")return o;if(f==="desc")return l;if(f==="natural")return s;throw new Error('String "asc", "desc", or "natural" expected')}function h(f){if(arraySize(f).length!==1)throw new Error("One dimensional array expected")}function c(f){if(f.size().length!==1)throw new Error("One dimensional matrix expected")}}),name$2x="max",dependencies$2x=["typed","config","numeric","larger","isNaN"],createMax=factory(name$2x,dependencies$2x,t=>{var{typed:r,config:a,numeric:n,larger:s,isNaN:o}=t;return r(name$2x,{"Array | Matrix":u,"Array | Matrix, number | BigNumber":function(c,f){return reduce(c,f.valueOf(),l)},"...":function(c){if(containsCollections(c))throw new TypeError("Scalar values expected in function max");return u(c)}});function l(h,c){try{return s(h,c)?h:c}catch(f){throw improveErrorMessage(f,"max",c)}}function u(h){var c;if(deepForEach(h,function(f){try{(o(f)||c===void 0||s(f,c))&&(c=f)}catch(d){throw improveErrorMessage(d,"max",f)}}),c===void 0)throw new Error("Cannot calculate max of an empty array");return typeof c=="string"&&(c=n(c,safeNumberType(c,a))),c}}),name$2w="min",dependencies$2w=["typed","config","numeric","smaller","isNaN"],createMin=factory(name$2w,dependencies$2w,t=>{var{typed:r,config:a,numeric:n,smaller:s,isNaN:o}=t;return r(name$2w,{"Array | Matrix":u,"Array | Matrix, number | BigNumber":function(c,f){return reduce(c,f.valueOf(),l)},"...":function(c){if(containsCollections(c))throw new TypeError("Scalar values expected in function min");return u(c)}});function l(h,c){try{return s(h,c)?h:c}catch(f){throw improveErrorMessage(f,"min",c)}}function u(h){var c;if(deepForEach(h,function(f){try{(o(f)||c===void 0||s(f,c))&&(c=f)}catch(d){throw improveErrorMessage(d,"min",f)}}),c===void 0)throw new Error("Cannot calculate min of an empty array");return typeof c=="string"&&(c=n(c,safeNumberType(c,a))),c}}),name$2v="ImmutableDenseMatrix",dependencies$2v=["smaller","DenseMatrix"],createImmutableDenseMatrixClass=factory(name$2v,dependencies$2v,t=>{var{smaller:r,DenseMatrix:a}=t;function n(s,o){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(o&&!isString(o))throw new Error("Invalid datatype: "+o);if(isMatrix(s)||isArray(s)){var l=new a(s,o);this._data=l._data,this._size=l._size,this._datatype=l._datatype,this._min=null,this._max=null}else if(s&&isArray(s.data)&&isArray(s.size))this._data=s.data,this._size=s.size,this._datatype=s.datatype,this._min=typeof s.min<"u"?s.min:null,this._max=typeof s.max<"u"?s.max:null;else{if(s)throw new TypeError("Unsupported type of data ("+typeOf$1(s)+")");this._data=[],this._size=[0],this._datatype=o,this._min=null,this._max=null}}return n.prototype=new a,n.prototype.type="ImmutableDenseMatrix",n.prototype.isImmutableDenseMatrix=!0,n.prototype.subset=function(s){switch(arguments.length){case 1:{var o=a.prototype.subset.call(this,s);return isMatrix(o)?new n({data:o._data,size:o._size,datatype:o._datatype}):o}case 2:case 3:throw new Error("Cannot invoke set subset on an Immutable Matrix instance");default:throw new SyntaxError("Wrong number of arguments")}},n.prototype.set=function(){throw new Error("Cannot invoke set on an Immutable Matrix instance")},n.prototype.resize=function(){throw new Error("Cannot invoke resize on an Immutable Matrix instance")},n.prototype.reshape=function(){throw new Error("Cannot invoke reshape on an Immutable Matrix instance")},n.prototype.clone=function(){return new n({data:clone$3(this._data),size:clone$3(this._size),datatype:this._datatype})},n.prototype.toJSON=function(){return{mathjs:"ImmutableDenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},n.fromJSON=function(s){return new n(s)},n.prototype.swapRows=function(){throw new Error("Cannot invoke swapRows on an Immutable Matrix instance")},n.prototype.min=function(){if(this._min===null){var s=null;this.forEach(function(o){(s===null||r(o,s))&&(s=o)}),this._min=s!==null?s:void 0}return this._min},n.prototype.max=function(){if(this._max===null){var s=null;this.forEach(function(o){(s===null||r(s,o))&&(s=o)}),this._max=s!==null?s:void 0}return this._max},n},{isClass:!0}),name$2u="Index",dependencies$2u=["ImmutableDenseMatrix","getMatrixDataType"],createIndexClass=factory(name$2u,dependencies$2u,t=>{var{ImmutableDenseMatrix:r,getMatrixDataType:a}=t;function n(){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");this._dimensions=[],this._sourceSize=[],this._isScalar=!0;for(var o=0,l=arguments.length;o<l;o++){var u=o<0||arguments.length<=o?void 0:arguments[o],h=isArray(u),c=isMatrix(u),f=typeof u,d=null;if(isRange(u))this._dimensions.push(u),this._isScalar=!1;else if(h||c){var p=void 0;this._isScalar=!1,a(u)==="boolean"?(h&&(p=s(_booleansArrayToNumbersForIndex(u).valueOf())),c&&(p=s(_booleansArrayToNumbersForIndex(u._data).valueOf())),d=u.valueOf().length):p=s(u.valueOf()),this._dimensions.push(p)}else if(f==="number")this._dimensions.push(u);else if(f==="bigint")this._dimensions.push(Number(u));else if(f==="string")this._dimensions.push(u);else throw new TypeError("Dimension must be an Array, Matrix, number, bigint, string, or Range");this._sourceSize.push(d)}}n.prototype.type="Index",n.prototype.isIndex=!0;function s(o){for(var l=0,u=o.length;l<u;l++)if(!isNumber(o[l])||!isInteger$1(o[l]))throw new TypeError("Index parameters must be positive integer numbers");var h=new r;return h._data=o,h._size=[o.length],h}return n.prototype.clone=function(){var o=new n;return o._dimensions=clone$3(this._dimensions),o._isScalar=this._isScalar,o._sourceSize=this._sourceSize,o},n.create=function(o){var l=new n;return n.apply(l,o),l},n.prototype.size=function(){for(var o=[],l=0,u=this._dimensions.length;l<u;l++){var h=this._dimensions[l];o[l]=isString(h)||isNumber(h)?1:h.size()[0]}return o},n.prototype.max=function(){for(var o=[],l=0,u=this._dimensions.length;l<u;l++){var h=this._dimensions[l];o[l]=isString(h)||isNumber(h)?h:h.max()}return o},n.prototype.min=function(){for(var o=[],l=0,u=this._dimensions.length;l<u;l++){var h=this._dimensions[l];o[l]=isString(h)||isNumber(h)?h:h.min()}return o},n.prototype.forEach=function(o){for(var l=0,u=this._dimensions.length;l<u;l++)o(this._dimensions[l],l,this)},n.prototype.dimension=function(o){var l;return isNumber(o)&&(l=this._dimensions[o])!==null&&l!==void 0?l:null},n.prototype.isObjectProperty=function(){return this._dimensions.length===1&&isString(this._dimensions[0])},n.prototype.getObjectProperty=function(){return this.isObjectProperty()?this._dimensions[0]:null},n.prototype.isScalar=function(){return this._isScalar},n.prototype.toArray=function(){for(var o=[],l=0,u=this._dimensions.length;l<u;l++){var h=this._dimensions[l];o.push(isString(h)||isNumber(h)?h:h.toArray())}return o},n.prototype.valueOf=n.prototype.toArray,n.prototype.toString=function(){for(var o=[],l=0,u=this._dimensions.length;l<u;l++){var h=this._dimensions[l];isString(h)?o.push(JSON.stringify(h)):o.push(h.toString())}return"["+o.join(", ")+"]"},n.prototype.toJSON=function(){return{mathjs:"Index",dimensions:this._dimensions}},n.fromJSON=function(o){return n.create(o.dimensions)},n},{isClass:!0});function _booleansArrayToNumbersForIndex(t){var r=[];return t.forEach((a,n)=>{a&&r.push(n)}),r}var name$2t="FibonacciHeap",dependencies$2t=["smaller","larger"],createFibonacciHeapClass=factory(name$2t,dependencies$2t,t=>{var{smaller:r,larger:a}=t,n=1/Math.log((1+Math.sqrt(5))/2);function s(){if(!(this instanceof s))throw new SyntaxError("Constructor must be called with the new operator");this._minimum=null,this._size=0}s.prototype.type="FibonacciHeap",s.prototype.isFibonacciHeap=!0,s.prototype.insert=function(f,d){var p={key:f,value:d,degree:0};if(this._minimum){var v=this._minimum;p.left=v,p.right=v.right,v.right=p,p.right.left=p,r(f,v.key)&&(this._minimum=p)}else p.left=p,p.right=p,this._minimum=p;return this._size++,p},s.prototype.size=function(){return this._size},s.prototype.clear=function(){this._minimum=null,this._size=0},s.prototype.isEmpty=function(){return this._size===0},s.prototype.extractMinimum=function(){var f=this._minimum;if(f===null)return f;for(var d=this._minimum,p=f.degree,v=f.child;p>0;){var y=v.right;v.left.right=v.right,v.right.left=v.left,v.left=d,v.right=d.right,d.right=v,v.right.left=v,v.parent=null,v=y,p--}return f.left.right=f.right,f.right.left=f.left,f===f.right?d=null:(d=f.right,d=c(d,this._size)),this._size--,this._minimum=d,f},s.prototype.remove=function(f){this._minimum=o(this._minimum,f,-1),this.extractMinimum()};function o(f,d,p){d.key=p;var v=d.parent;return v&&r(d.key,v.key)&&(l(f,d,v),u(f,v)),r(d.key,f.key)&&(f=d),f}function l(f,d,p){d.left.right=d.right,d.right.left=d.left,p.degree--,p.child===d&&(p.child=d.right),p.degree===0&&(p.child=null),d.left=f,d.right=f.right,f.right=d,d.right.left=d,d.parent=null,d.mark=!1}function u(f,d){var p=d.parent;p&&(d.mark?(l(f,d,p),u(p)):d.mark=!0)}var h=function(d,p){d.left.right=d.right,d.right.left=d.left,d.parent=p,p.child?(d.left=p.child,d.right=p.child.right,p.child.right=d,d.right.left=d):(p.child=d,d.right=d,d.left=d),p.degree++,d.mark=!1};function c(f,d){var p=Math.floor(Math.log(d)*n)+1,v=new Array(p),y=0,b=f;if(b)for(y++,b=b.right;b!==f;)y++,b=b.right;for(var _;y>0;){for(var N=b.degree,M=b.right;_=v[N],!!_;){if(a(b.key,_.key)){var C=_;_=b,b=C}h(_,b),v[N]=null,N++}v[N]=b,b=M,y--}f=null;for(var $=0;$<p;$++)_=v[$],_&&(f?(_.left.right=_.right,_.right.left=_.left,_.left=f,_.right=f.right,f.right=_,_.right.left=_,r(_.key,f.key)&&(f=_)):f=_);return f}return s},{isClass:!0}),name$2s="Spa",dependencies$2s=["addScalar","equalScalar","FibonacciHeap"],createSpaClass=factory(name$2s,dependencies$2s,t=>{var{addScalar:r,equalScalar:a,FibonacciHeap:n}=t;function s(){if(!(this instanceof s))throw new SyntaxError("Constructor must be called with the new operator");this._values=[],this._heap=new n}return s.prototype.type="Spa",s.prototype.isSpa=!0,s.prototype.set=function(o,l){if(this._values[o])this._values[o].value=l;else{var u=this._heap.insert(o,l);this._values[o]=u}},s.prototype.get=function(o){var l=this._values[o];return l?l.value:0},s.prototype.accumulate=function(o,l){var u=this._values[o];u?u.value=r(u.value,l):(u=this._heap.insert(o,l),this._values[o]=u)},s.prototype.forEach=function(o,l,u){var h=this._heap,c=this._values,f=[],d=h.extractMinimum();for(d&&f.push(d);d&&d.key<=l;)d.key>=o&&(a(d.value,0)||u(d.key,d.value,this)),d=h.extractMinimum(),d&&f.push(d);for(var p=0;p<f.length;p++){var v=f[p];d=h.insert(v.key,v.value),c[d.key]=d}},s.prototype.swap=function(o,l){var u=this._values[o],h=this._values[l];if(!u&&h)u=this._heap.insert(o,h.value),this._heap.remove(h),this._values[o]=u,this._values[l]=void 0;else if(u&&!h)h=this._heap.insert(l,u.value),this._heap.remove(u),this._values[l]=h,this._values[o]=void 0;else if(u&&h){var c=u.value;u.value=h.value,h.value=c}},s},{isClass:!0});function lruQueue(t){var r=0,a=1,n=Object.create(null),s=Object.create(null),o=0,l=function(h){var c=s[h];if(c&&(delete n[c],delete s[h],--r,a===c)){if(!r){o=0,a=1;return}for(;!Object.prototype.hasOwnProperty.call(n,++a););}};return t=Math.abs(t),{hit:function(h){var c=s[h],f=++o;if(n[f]=h,s[h]=f,!c)return++r,r<=t?void 0:(h=n[a],l(h),h);if(delete n[c],a===c)for(;!Object.prototype.hasOwnProperty.call(n,++a););},delete:l,clear:function(){r=o=0,a=1,n=Object.create(null),s=Object.create(null)}}}function memoize(t){var{hasher:r,limit:a}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return a=a??Number.POSITIVE_INFINITY,r=r??JSON.stringify,function n(){typeof n.cache!="object"&&(n.cache={values:new Map,lru:lruQueue(a||Number.POSITIVE_INFINITY)});for(var s=[],o=0;o<arguments.length;o++)s[o]=arguments[o];var l=r(s);if(n.cache.values.has(l))return n.cache.lru.hit(l),n.cache.values.get(l);var u=t.apply(t,s);return n.cache.values.set(l,u),n.cache.values.delete(n.cache.lru.hit(l)),u}}var createBigNumberE=memoize(function(t){return new t(1).exp()},{hasher}),createBigNumberPhi=memoize(function(t){return new t(1).plus(new t(5).sqrt()).div(2)},{hasher}),createBigNumberPi=memoize(function(t){return t.acos(-1)},{hasher}),createBigNumberTau=memoize(function(t){return createBigNumberPi(t).times(2)},{hasher});function hasher(t){return t[0].precision}function ownKeys$2(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,n)}return a}function _objectSpread$2(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?ownKeys$2(Object(a),!0).forEach(function(n){_defineProperty(t,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):ownKeys$2(Object(a)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(a,n))})}return t}var name$2r="Unit",dependencies$2r=["?on","config","addScalar","subtractScalar","multiplyScalar","divideScalar","pow","abs","fix","round","equal","isNumeric","format","number","Complex","BigNumber","Fraction"],createUnitClass=factory(name$2r,dependencies$2r,t=>{var{on:r,config:a,addScalar:n,subtractScalar:s,multiplyScalar:o,divideScalar:l,pow:u,abs:h,fix:c,round:f,equal:d,isNumeric:p,format:v,number:y,Complex:b,BigNumber:_,Fraction:N}=t,M=y,C=!1,$=!0;function w(ue,ge){if(!(this instanceof w))throw new Error("Constructor must be called with the new operator");if(!(ue==null||p(ue)||isComplex(ue)))throw new TypeError("First parameter in Unit constructor must be number, BigNumber, Fraction, Complex, or undefined");if(this.fixPrefix=C,this.skipAutomaticSimplification=$,ge===void 0)this.units=[],this.dimensions=ae.map(le=>0);else if(typeof ge=="string"){var te=w.parse(ge);this.units=te.units,this.dimensions=te.dimensions}else if(isUnit(ge)&&ge.value===null)this.fixPrefix=ge.fixPrefix,this.skipAutomaticSimplification=ge.skipAutomaticSimplification,this.dimensions=ge.dimensions.slice(0),this.units=ge.units.map(le=>_extends({},le));else throw new TypeError("Second parameter in Unit constructor must be a string or valueless Unit");this.value=this._normalize(ue)}Object.defineProperty(w,"name",{value:"Unit"}),w.prototype.constructor=w,w.prototype.type="Unit",w.prototype.isUnit=!0;var A,X,O;function G(){for(;O===" "||O==="	";)F()}function R(ue){return ue>="0"&&ue<="9"||ue==="."}function B(ue){return ue>="0"&&ue<="9"}function F(){X++,O=A.charAt(X)}function U(ue){X=ue,O=A.charAt(X)}function q(){var ue="",ge=X;if(O==="+"?F():O==="-"&&(ue+=O,F()),!R(O))return U(ge),null;if(O==="."){if(ue+=O,F(),!B(O))return U(ge),null}else{for(;B(O);)ue+=O,F();O==="."&&(ue+=O,F())}for(;B(O);)ue+=O,F();if(O==="E"||O==="e"){var te="",le=X;if(te+=O,F(),(O==="+"||O==="-")&&(te+=O,F()),!B(O))return U(le),ue;for(ue=ue+te;B(O);)ue+=O,F()}return ue}function ee(){for(var ue="";B(O)||w.isValidAlpha(O);)ue+=O,F();var ge=ue.charAt(0);return w.isValidAlpha(ge)?ue:null}function z(ue){return O===ue?(F(),ue):null}w.parse=function(ue,ge){if(ge=ge||{},A=ue,X=-1,O="",typeof A!="string")throw new TypeError("Invalid argument in Unit.parse, string expected");var te=new w;te.units=[];var le=1,me=!1;F(),G();var he=q(),ye=null;if(he){if(a.number==="BigNumber")ye=new _(he);else if(a.number==="Fraction")try{ye=new N(he)}catch{ye=parseFloat(he)}else ye=parseFloat(he);G(),z("*")?(le=1,me=!0):z("/")&&(le=-1,me=!0)}for(var Se=[],Be=1;;){for(G();O==="(";)Se.push(le),Be*=le,le=1,F(),G();var Te=void 0;if(O){var Xe=O;if(Te=ee(),Te===null)throw new SyntaxError('Unexpected "'+Xe+'" in "'+A+'" at index '+X.toString())}else break;var Me=Y(Te);if(Me===null)throw new SyntaxError('Unit "'+Te+'" not found.');var ze=le*Be;if(G(),z("^")){G();var Ue=q();if(Ue===null)throw new SyntaxError('In "'+ue+'", "^" must be followed by a floating-point number');ze*=Ue}te.units.push({unit:Me.unit,prefix:Me.prefix,power:ze});for(var je=0;je<ae.length;je++)te.dimensions[je]+=(Me.unit.dimensions[je]||0)*ze;for(G();O===")";){if(Se.length===0)throw new SyntaxError('Unmatched ")" in "'+A+'" at index '+X.toString());Be/=Se.pop(),F(),G()}if(me=!1,z("*")?(le=1,me=!0):z("/")?(le=-1,me=!0):le=1,Me.unit.base){var Ee=Me.unit.base.key;fe.auto[Ee]={unit:Me.unit,prefix:Me.prefix}}}if(G(),O)throw new SyntaxError('Could not parse: "'+ue+'"');if(me)throw new SyntaxError('Trailing characters: "'+ue+'"');if(Se.length!==0)throw new SyntaxError('Unmatched "(" in "'+A+'"');if(te.units.length===0&&!ge.allowNoUnits)throw new SyntaxError('"'+ue+'" contains no units');return te.value=ye!==void 0?te._normalize(ye):null,te},w.prototype.clone=function(){var ue=new w;ue.fixPrefix=this.fixPrefix,ue.skipAutomaticSimplification=this.skipAutomaticSimplification,ue.value=clone$3(this.value),ue.dimensions=this.dimensions.slice(0),ue.units=[];for(var ge=0;ge<this.units.length;ge++){ue.units[ge]={};for(var te in this.units[ge])hasOwnProperty(this.units[ge],te)&&(ue.units[ge][te]=this.units[ge][te])}return ue},w.prototype.valueType=function(){return typeOf$1(this.value)},w.prototype._isDerived=function(){return this.units.length===0?!1:this.units.length>1||Math.abs(this.units[0].power-1)>1e-15},w.prototype._normalize=function(ue){if(ue==null||this.units.length===0)return ue;for(var ge=ue,te=w._getNumberConverter(typeOf$1(ue)),le=0;le<this.units.length;le++){var me=te(this.units[le].unit.value),he=te(this.units[le].prefix.value),ye=te(this.units[le].power);ge=o(ge,u(o(me,he),ye))}return ge},w.prototype._denormalize=function(ue,ge){if(ue==null||this.units.length===0)return ue;for(var te=ue,le=w._getNumberConverter(typeOf$1(ue)),me=0;me<this.units.length;me++){var he=le(this.units[me].unit.value),ye=le(this.units[me].prefix.value),Se=le(this.units[me].power);te=l(te,u(o(he,ye),Se))}return te};var Y=memoize(ue=>{if(hasOwnProperty(ie,ue)){var ge=ie[ue],te=ge.prefixes[""];return{unit:ge,prefix:te}}for(var le in ie)if(hasOwnProperty(ie,le)&&endsWith(ue,le)){var me=ie[le],he=ue.length-le.length,ye=ue.substring(0,he),Se=hasOwnProperty(me.prefixes,ye)?me.prefixes[ye]:void 0;if(Se!==void 0)return{unit:me,prefix:Se}}return null},{hasher:ue=>ue[0],limit:100});w.isValuelessUnit=function(ue){return Y(ue)!==null},w.prototype.hasBase=function(ue){if(typeof ue=="string"&&(ue=W[ue]),!ue)return!1;for(var ge=0;ge<ae.length;ge++)if(Math.abs((this.dimensions[ge]||0)-(ue.dimensions[ge]||0))>1e-12)return!1;return!0},w.prototype.equalBase=function(ue){for(var ge=0;ge<ae.length;ge++)if(Math.abs((this.dimensions[ge]||0)-(ue.dimensions[ge]||0))>1e-12)return!1;return!0},w.prototype.equals=function(ue){return this.equalBase(ue)&&d(this.value,ue.value)},w.prototype.multiply=function(ue){for(var ge=this.clone(),te=isUnit(ue)?ue:new w(ue),le=0;le<ae.length;le++)ge.dimensions[le]=(this.dimensions[le]||0)+(te.dimensions[le]||0);for(var me=0;me<te.units.length;me++){var he=_objectSpread$2({},te.units[me]);ge.units.push(he)}if(this.value!==null||te.value!==null){var ye=this.value===null?this._normalize(Z(te.value)):this.value,Se=te.value===null?te._normalize(Z(this.value)):te.value;ge.value=o(ye,Se)}else ge.value=null;return isUnit(ue)&&(ge.skipAutomaticSimplification=!1),K(ge)},w.prototype.divideInto=function(ue){return new w(ue).divide(this)},w.prototype.divide=function(ue){for(var ge=this.clone(),te=isUnit(ue)?ue:new w(ue),le=0;le<ae.length;le++)ge.dimensions[le]=(this.dimensions[le]||0)-(te.dimensions[le]||0);for(var me=0;me<te.units.length;me++){var he=_objectSpread$2(_objectSpread$2({},te.units[me]),{},{power:-te.units[me].power});ge.units.push(he)}if(this.value!==null||te.value!==null){var ye=this.value===null?this._normalize(Z(te.value)):this.value,Se=te.value===null?te._normalize(Z(this.value)):te.value;ge.value=l(ye,Se)}else ge.value=null;return isUnit(ue)&&(ge.skipAutomaticSimplification=!1),K(ge)},w.prototype.pow=function(ue){for(var ge=this.clone(),te=0;te<ae.length;te++)ge.dimensions[te]=(this.dimensions[te]||0)*ue;for(var le=0;le<ge.units.length;le++)ge.units[le].power*=ue;return ge.value!==null?ge.value=u(ge.value,ue):ge.value=null,ge.skipAutomaticSimplification=!1,K(ge)};function K(ue){return ue.equalBase(W.NONE)&&ue.value!==null&&!a.predictable?ue.value:ue}function Z(ue){var ge=w._getNumberConverter(typeOf$1(ue));return ge(1)}w.prototype.abs=function(){var ue=this.clone();if(ue.value!==null)if(ue._isDerived()||ue.units.length===0||ue.units[0].unit.offset===0)ue.value=h(ue.value);else{var ge=ue._numberConverter(),te=ge(ue.units[0].unit.value),le=ge(ue.units[0].unit.offset),me=o(te,le);ue.value=s(h(n(ue.value,me)),me)}for(var he in ue.units)(ue.units[he].unit.name==="VA"||ue.units[he].unit.name==="VAR")&&(ue.units[he].unit=ie.W);return ue},w.prototype.to=function(ue){var ge=this.value===null?this._normalize(1):this.value,te;if(typeof ue=="string")te=w.parse(ue);else if(isUnit(ue))te=ue.clone();else throw new Error("String or Unit expected as parameter");if(!this.equalBase(te))throw new Error("Units do not match ('".concat(te.toString(),"' != '").concat(this.toString(),"')"));if(te.value!==null)throw new Error("Cannot convert to a unit with a value");if(this.value===null||this._isDerived()||this.units.length===0||te.units.length===0||this.units[0].unit.offset===te.units[0].unit.offset)te.value=clone$3(ge);else{var le=w._getNumberConverter(typeOf$1(ge)),me=this.units[0].unit.value,he=this.units[0].unit.offset,ye=o(me,he),Se=te.units[0].unit.value,Be=te.units[0].unit.offset,Te=o(Se,Be);te.value=n(ge,le(s(ye,Te)))}return te.fixPrefix=!0,te.skipAutomaticSimplification=!0,te},w.prototype.toNumber=function(ue){return M(this.toNumeric(ue))},w.prototype.toNumeric=function(ue){var ge;return ue?ge=this.to(ue):ge=this.clone(),ge._isDerived()||ge.units.length===0?ge._denormalize(ge.value):ge._denormalize(ge.value,ge.units[0].prefix.value)},w.prototype.toString=function(){return this.format()},w.prototype.toJSON=function(){return{mathjs:"Unit",value:this._denormalize(this.value),unit:this.units.length>0?this.formatUnits():null,fixPrefix:this.fixPrefix,skipSimp:this.skipAutomaticSimplification}},w.fromJSON=function(ue){var ge,te,le,me=new w(ue.value,(ge=ue.unit)!==null&&ge!==void 0?ge:void 0);return me.fixPrefix=(te=ue.fixPrefix)!==null&&te!==void 0?te:C,me.skipAutomaticSimplification=(le=ue.skipSimp)!==null&&le!==void 0?le:$,me},w.prototype.valueOf=w.prototype.toString,w.prototype.simplify=function(){var ue=this.clone(),ge=[],te;for(var le in Ne)if(hasOwnProperty(Ne,le)&&ue.hasBase(W[le])){te=le;break}if(te==="NONE")ue.units=[];else{var me;if(te&&hasOwnProperty(Ne,te)&&(me=Ne[te]),me)ue.units=[{unit:me.unit,prefix:me.prefix,power:1}];else{for(var he=!1,ye=0;ye<ae.length;ye++){var Se=ae[ye];Math.abs(ue.dimensions[ye]||0)>1e-12&&(hasOwnProperty(Ne,Se)?ge.push({unit:Ne[Se].unit,prefix:Ne[Se].prefix,power:ue.dimensions[ye]||0}):he=!0)}ge.length<ue.units.length&&!he&&(ue.units=ge)}}return ue},w.prototype.toSI=function(){for(var ue=this.clone(),ge=[],te=0;te<ae.length;te++){var le=ae[te];if(Math.abs(ue.dimensions[te]||0)>1e-12)if(hasOwnProperty(fe.si,le))ge.push({unit:fe.si[le].unit,prefix:fe.si[le].prefix,power:ue.dimensions[te]||0});else throw new Error("Cannot express custom unit "+le+" in SI units")}return ue.units=ge,ue.fixPrefix=!0,ue.skipAutomaticSimplification=!0,this.value!==null?(ue.value=null,this.to(ue)):ue},w.prototype.formatUnits=function(){for(var ue="",ge="",te=0,le=0,me=0;me<this.units.length;me++)this.units[me].power>0?(te++,ue+=" "+this.units[me].prefix.name+this.units[me].unit.name,Math.abs(this.units[me].power-1)>1e-15&&(ue+="^"+this.units[me].power)):this.units[me].power<0&&le++;if(le>0)for(var he=0;he<this.units.length;he++)this.units[he].power<0&&(te>0?(ge+=" "+this.units[he].prefix.name+this.units[he].unit.name,Math.abs(this.units[he].power+1)>1e-15&&(ge+="^"+-this.units[he].power)):(ge+=" "+this.units[he].prefix.name+this.units[he].unit.name,ge+="^"+this.units[he].power));ue=ue.substr(1),ge=ge.substr(1),te>1&&le>0&&(ue="("+ue+")"),le>1&&te>0&&(ge="("+ge+")");var ye=ue;return te>0&&le>0&&(ye+=" / "),ye+=ge,ye},w.prototype.toBest=function(){var ue=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],ge=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(ue&&!Array.isArray(ue))throw new Error("Invalid unit type. Expected string or Unit.");var te=this.units[0].unit.prefixes;if(ue&&ue.length>0){var le=ue.map(ye=>{var Se=null;if(typeof ye=="string"){if(Se=w.parse(ye),!Se)throw new Error("Invalid unit type. Expected compatible string or Unit.")}else if(!isUnit(ye))throw new Error("Invalid unit type. Expected compatible string or Unit.");Se===null&&(Se=ye.clone());try{return this.to(Se.formatUnits()),Se}catch{throw new Error("Invalid unit type. Expected compatible string or Unit.")}}),me=le.map(ye=>ye.units[0].prefix);this.units[0].unit.prefixes=me.reduce((ye,Se)=>(ye[Se.name]=Se,ye),{}),this.units[0].prefix=me[0]}var he=ne(this,ge).simp;return this.units[0].unit.prefixes=te,he.fixPrefix=!0,he},w.prototype.format=function(ue){var{simp:ge,valueStr:te,unitStr:le}=ne(this,ue),me=te;return ge.value&&isComplex(ge.value)&&(me="("+me+")"),le.length>0&&me.length>0&&(me+=" "),me+=le,me};function ne(ue){var ge=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},te=ue.skipAutomaticSimplification||ue.value===null?ue.clone():ue.simplify();j(te),V(te,ge.offset);var le=te._denormalize(te.value),me=te.value!==null?v(le,ge||{}):"",he=te.formatUnits();return{simp:te,valueStr:me,unitStr:he}}function j(ue){var ge=!1;typeof ue.value<"u"&&ue.value!==null&&isComplex(ue.value)&&(ge=Math.abs(ue.value.re)<1e-14);for(var te in ue.units)hasOwnProperty(ue.units,te)&&ue.units[te].unit&&(ue.units[te].unit.name==="VA"&&ge?ue.units[te].unit=ie.VAR:ue.units[te].unit.name==="VAR"&&!ge&&(ue.units[te].unit=ie.VA))}function V(ue,ge){ue.units.length===1&&!ue.fixPrefix&&Math.abs(ue.units[0].power-Math.round(ue.units[0].power))<1e-14&&(ue.units[0].prefix=ue._bestPrefix(ge))}w.prototype._bestPrefix=function(){var ue=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1.2;if(this.units.length!==1)throw new Error("Can only compute the best prefix for single units with integer powers, like kg, s^2, N^-1, and so forth!");if(Math.abs(this.units[0].power-Math.round(this.units[0].power))>=1e-14)throw new Error("Can only compute the best prefix for single units with integer powers, like kg, s^2, N^-1, and so forth!");var ge=this.value!==null?h(this.value):0,te=h(this.units[0].unit.value),le=this.units[0].prefix;if(ge===0)return le;var me=this.units[0].power,he=Math.log(ge/Math.pow(le.value*te,me))/Math.LN10-ue;if(he>-2.200001&&he<1.800001)return le;he=Math.abs(he);var ye=this.units[0].unit.prefixes;for(var Se in ye)if(hasOwnProperty(ye,Se)){var Be=ye[Se];if(Be.scientific){var Te=Math.abs(Math.log(ge/Math.pow(Be.value*te,me))/Math.LN10-ue);(Te<he||Te===he&&Be.name.length<le.name.length)&&(le=Be,he=Te)}}return le},w.prototype.splitUnit=function(ue){for(var ge=this.clone(),te=[],le=0;le<ue.length&&(ge=ge.to(ue[le]),le!==ue.length-1);le++){var me=ge.toNumeric(),he=f(me),ye=void 0,Se=d(he,me);Se?ye=he:ye=c(ge.toNumeric());var Be=new w(ye,ue[le].toString());te.push(Be),ge=s(ge,Be)}for(var Te=0,Xe=0;Xe<te.length;Xe++)Te=n(Te,te[Xe].value);return d(Te,this.value)&&(ge.value=0),te.push(ge),te};var L={NONE:{"":{name:"",value:1,scientific:!0}},SHORT:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:10,scientific:!1},h:{name:"h",value:100,scientific:!1},k:{name:"k",value:1e3,scientific:!0},M:{name:"M",value:1e6,scientific:!0},G:{name:"G",value:1e9,scientific:!0},T:{name:"T",value:1e12,scientific:!0},P:{name:"P",value:1e15,scientific:!0},E:{name:"E",value:1e18,scientific:!0},Z:{name:"Z",value:1e21,scientific:!0},Y:{name:"Y",value:1e24,scientific:!0},R:{name:"R",value:1e27,scientific:!0},Q:{name:"Q",value:1e30,scientific:!0},d:{name:"d",value:.1,scientific:!1},c:{name:"c",value:.01,scientific:!1},m:{name:"m",value:.001,scientific:!0},u:{name:"u",value:1e-6,scientific:!0},n:{name:"n",value:1e-9,scientific:!0},p:{name:"p",value:1e-12,scientific:!0},f:{name:"f",value:1e-15,scientific:!0},a:{name:"a",value:1e-18,scientific:!0},z:{name:"z",value:1e-21,scientific:!0},y:{name:"y",value:1e-24,scientific:!0},r:{name:"r",value:1e-27,scientific:!0},q:{name:"q",value:1e-30,scientific:!0}},LONG:{"":{name:"",value:1,scientific:!0},deca:{name:"deca",value:10,scientific:!1},hecto:{name:"hecto",value:100,scientific:!1},kilo:{name:"kilo",value:1e3,scientific:!0},mega:{name:"mega",value:1e6,scientific:!0},giga:{name:"giga",value:1e9,scientific:!0},tera:{name:"tera",value:1e12,scientific:!0},peta:{name:"peta",value:1e15,scientific:!0},exa:{name:"exa",value:1e18,scientific:!0},zetta:{name:"zetta",value:1e21,scientific:!0},yotta:{name:"yotta",value:1e24,scientific:!0},ronna:{name:"ronna",value:1e27,scientific:!0},quetta:{name:"quetta",value:1e30,scientific:!0},deci:{name:"deci",value:.1,scientific:!1},centi:{name:"centi",value:.01,scientific:!1},milli:{name:"milli",value:.001,scientific:!0},micro:{name:"micro",value:1e-6,scientific:!0},nano:{name:"nano",value:1e-9,scientific:!0},pico:{name:"pico",value:1e-12,scientific:!0},femto:{name:"femto",value:1e-15,scientific:!0},atto:{name:"atto",value:1e-18,scientific:!0},zepto:{name:"zepto",value:1e-21,scientific:!0},yocto:{name:"yocto",value:1e-24,scientific:!0},ronto:{name:"ronto",value:1e-27,scientific:!0},quecto:{name:"quecto",value:1e-30,scientific:!0}},SQUARED:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:100,scientific:!1},h:{name:"h",value:1e4,scientific:!1},k:{name:"k",value:1e6,scientific:!0},M:{name:"M",value:1e12,scientific:!0},G:{name:"G",value:1e18,scientific:!0},T:{name:"T",value:1e24,scientific:!0},P:{name:"P",value:1e30,scientific:!0},E:{name:"E",value:1e36,scientific:!0},Z:{name:"Z",value:1e42,scientific:!0},Y:{name:"Y",value:1e48,scientific:!0},R:{name:"R",value:1e54,scientific:!0},Q:{name:"Q",value:1e60,scientific:!0},d:{name:"d",value:.01,scientific:!1},c:{name:"c",value:1e-4,scientific:!1},m:{name:"m",value:1e-6,scientific:!0},u:{name:"u",value:1e-12,scientific:!0},n:{name:"n",value:1e-18,scientific:!0},p:{name:"p",value:1e-24,scientific:!0},f:{name:"f",value:1e-30,scientific:!0},a:{name:"a",value:1e-36,scientific:!0},z:{name:"z",value:1e-42,scientific:!0},y:{name:"y",value:1e-48,scientific:!0},r:{name:"r",value:1e-54,scientific:!0},q:{name:"q",value:1e-60,scientific:!0}},CUBIC:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:1e3,scientific:!1},h:{name:"h",value:1e6,scientific:!1},k:{name:"k",value:1e9,scientific:!0},M:{name:"M",value:1e18,scientific:!0},G:{name:"G",value:1e27,scientific:!0},T:{name:"T",value:1e36,scientific:!0},P:{name:"P",value:1e45,scientific:!0},E:{name:"E",value:1e54,scientific:!0},Z:{name:"Z",value:1e63,scientific:!0},Y:{name:"Y",value:1e72,scientific:!0},R:{name:"R",value:1e81,scientific:!0},Q:{name:"Q",value:1e90,scientific:!0},d:{name:"d",value:.001,scientific:!1},c:{name:"c",value:1e-6,scientific:!1},m:{name:"m",value:1e-9,scientific:!0},u:{name:"u",value:1e-18,scientific:!0},n:{name:"n",value:1e-27,scientific:!0},p:{name:"p",value:1e-36,scientific:!0},f:{name:"f",value:1e-45,scientific:!0},a:{name:"a",value:1e-54,scientific:!0},z:{name:"z",value:1e-63,scientific:!0},y:{name:"y",value:1e-72,scientific:!0},r:{name:"r",value:1e-81,scientific:!0},q:{name:"q",value:1e-90,scientific:!0}},BINARY_SHORT_SI:{"":{name:"",value:1,scientific:!0},k:{name:"k",value:1e3,scientific:!0},M:{name:"M",value:1e6,scientific:!0},G:{name:"G",value:1e9,scientific:!0},T:{name:"T",value:1e12,scientific:!0},P:{name:"P",value:1e15,scientific:!0},E:{name:"E",value:1e18,scientific:!0},Z:{name:"Z",value:1e21,scientific:!0},Y:{name:"Y",value:1e24,scientific:!0}},BINARY_SHORT_IEC:{"":{name:"",value:1,scientific:!0},Ki:{name:"Ki",value:1024,scientific:!0},Mi:{name:"Mi",value:Math.pow(1024,2),scientific:!0},Gi:{name:"Gi",value:Math.pow(1024,3),scientific:!0},Ti:{name:"Ti",value:Math.pow(1024,4),scientific:!0},Pi:{name:"Pi",value:Math.pow(1024,5),scientific:!0},Ei:{name:"Ei",value:Math.pow(1024,6),scientific:!0},Zi:{name:"Zi",value:Math.pow(1024,7),scientific:!0},Yi:{name:"Yi",value:Math.pow(1024,8),scientific:!0}},BINARY_LONG_SI:{"":{name:"",value:1,scientific:!0},kilo:{name:"kilo",value:1e3,scientific:!0},mega:{name:"mega",value:1e6,scientific:!0},giga:{name:"giga",value:1e9,scientific:!0},tera:{name:"tera",value:1e12,scientific:!0},peta:{name:"peta",value:1e15,scientific:!0},exa:{name:"exa",value:1e18,scientific:!0},zetta:{name:"zetta",value:1e21,scientific:!0},yotta:{name:"yotta",value:1e24,scientific:!0}},BINARY_LONG_IEC:{"":{name:"",value:1,scientific:!0},kibi:{name:"kibi",value:1024,scientific:!0},mebi:{name:"mebi",value:Math.pow(1024,2),scientific:!0},gibi:{name:"gibi",value:Math.pow(1024,3),scientific:!0},tebi:{name:"tebi",value:Math.pow(1024,4),scientific:!0},pebi:{name:"pebi",value:Math.pow(1024,5),scientific:!0},exi:{name:"exi",value:Math.pow(1024,6),scientific:!0},zebi:{name:"zebi",value:Math.pow(1024,7),scientific:!0},yobi:{name:"yobi",value:Math.pow(1024,8),scientific:!0}},BTU:{"":{name:"",value:1,scientific:!0},MM:{name:"MM",value:1e6,scientific:!0}}};L.SHORTLONG=_extends({},L.SHORT,L.LONG),L.BINARY_SHORT=_extends({},L.BINARY_SHORT_SI,L.BINARY_SHORT_IEC),L.BINARY_LONG=_extends({},L.BINARY_LONG_SI,L.BINARY_LONG_IEC);var ae=["MASS","LENGTH","TIME","CURRENT","TEMPERATURE","LUMINOUS_INTENSITY","AMOUNT_OF_SUBSTANCE","ANGLE","BIT"],W={NONE:{dimensions:[0,0,0,0,0,0,0,0,0]},MASS:{dimensions:[1,0,0,0,0,0,0,0,0]},LENGTH:{dimensions:[0,1,0,0,0,0,0,0,0]},TIME:{dimensions:[0,0,1,0,0,0,0,0,0]},CURRENT:{dimensions:[0,0,0,1,0,0,0,0,0]},TEMPERATURE:{dimensions:[0,0,0,0,1,0,0,0,0]},LUMINOUS_INTENSITY:{dimensions:[0,0,0,0,0,1,0,0,0]},AMOUNT_OF_SUBSTANCE:{dimensions:[0,0,0,0,0,0,1,0,0]},FORCE:{dimensions:[1,1,-2,0,0,0,0,0,0]},SURFACE:{dimensions:[0,2,0,0,0,0,0,0,0]},VOLUME:{dimensions:[0,3,0,0,0,0,0,0,0]},ENERGY:{dimensions:[1,2,-2,0,0,0,0,0,0]},POWER:{dimensions:[1,2,-3,0,0,0,0,0,0]},PRESSURE:{dimensions:[1,-1,-2,0,0,0,0,0,0]},ELECTRIC_CHARGE:{dimensions:[0,0,1,1,0,0,0,0,0]},ELECTRIC_CAPACITANCE:{dimensions:[-1,-2,4,2,0,0,0,0,0]},ELECTRIC_POTENTIAL:{dimensions:[1,2,-3,-1,0,0,0,0,0]},ELECTRIC_RESISTANCE:{dimensions:[1,2,-3,-2,0,0,0,0,0]},ELECTRIC_INDUCTANCE:{dimensions:[1,2,-2,-2,0,0,0,0,0]},ELECTRIC_CONDUCTANCE:{dimensions:[-1,-2,3,2,0,0,0,0,0]},MAGNETIC_FLUX:{dimensions:[1,2,-2,-1,0,0,0,0,0]},MAGNETIC_FLUX_DENSITY:{dimensions:[1,0,-2,-1,0,0,0,0,0]},FREQUENCY:{dimensions:[0,0,-1,0,0,0,0,0,0]},ANGLE:{dimensions:[0,0,0,0,0,0,0,1,0]},BIT:{dimensions:[0,0,0,0,0,0,0,0,1]}};for(var ve in W)hasOwnProperty(W,ve)&&(W[ve].key=ve);var de={},se={name:"",base:de,value:1,offset:0,dimensions:ae.map(ue=>0)},ie={meter:{name:"meter",base:W.LENGTH,prefixes:L.LONG,value:1,offset:0},inch:{name:"inch",base:W.LENGTH,prefixes:L.NONE,value:.0254,offset:0},foot:{name:"foot",base:W.LENGTH,prefixes:L.NONE,value:.3048,offset:0},yard:{name:"yard",base:W.LENGTH,prefixes:L.NONE,value:.9144,offset:0},mile:{name:"mile",base:W.LENGTH,prefixes:L.NONE,value:1609.344,offset:0},link:{name:"link",base:W.LENGTH,prefixes:L.NONE,value:.201168,offset:0},rod:{name:"rod",base:W.LENGTH,prefixes:L.NONE,value:5.0292,offset:0},chain:{name:"chain",base:W.LENGTH,prefixes:L.NONE,value:20.1168,offset:0},angstrom:{name:"angstrom",base:W.LENGTH,prefixes:L.NONE,value:1e-10,offset:0},m:{name:"m",base:W.LENGTH,prefixes:L.SHORT,value:1,offset:0},in:{name:"in",base:W.LENGTH,prefixes:L.NONE,value:.0254,offset:0},ft:{name:"ft",base:W.LENGTH,prefixes:L.NONE,value:.3048,offset:0},yd:{name:"yd",base:W.LENGTH,prefixes:L.NONE,value:.9144,offset:0},mi:{name:"mi",base:W.LENGTH,prefixes:L.NONE,value:1609.344,offset:0},li:{name:"li",base:W.LENGTH,prefixes:L.NONE,value:.201168,offset:0},rd:{name:"rd",base:W.LENGTH,prefixes:L.NONE,value:5.02921,offset:0},ch:{name:"ch",base:W.LENGTH,prefixes:L.NONE,value:20.1168,offset:0},mil:{name:"mil",base:W.LENGTH,prefixes:L.NONE,value:254e-7,offset:0},m2:{name:"m2",base:W.SURFACE,prefixes:L.SQUARED,value:1,offset:0},sqin:{name:"sqin",base:W.SURFACE,prefixes:L.NONE,value:64516e-8,offset:0},sqft:{name:"sqft",base:W.SURFACE,prefixes:L.NONE,value:.09290304,offset:0},sqyd:{name:"sqyd",base:W.SURFACE,prefixes:L.NONE,value:.83612736,offset:0},sqmi:{name:"sqmi",base:W.SURFACE,prefixes:L.NONE,value:2589988110336e-6,offset:0},sqrd:{name:"sqrd",base:W.SURFACE,prefixes:L.NONE,value:25.29295,offset:0},sqch:{name:"sqch",base:W.SURFACE,prefixes:L.NONE,value:404.6873,offset:0},sqmil:{name:"sqmil",base:W.SURFACE,prefixes:L.NONE,value:64516e-14,offset:0},acre:{name:"acre",base:W.SURFACE,prefixes:L.NONE,value:4046.86,offset:0},hectare:{name:"hectare",base:W.SURFACE,prefixes:L.NONE,value:1e4,offset:0},m3:{name:"m3",base:W.VOLUME,prefixes:L.CUBIC,value:1,offset:0},L:{name:"L",base:W.VOLUME,prefixes:L.SHORT,value:.001,offset:0},l:{name:"l",base:W.VOLUME,prefixes:L.SHORT,value:.001,offset:0},litre:{name:"litre",base:W.VOLUME,prefixes:L.LONG,value:.001,offset:0},cuin:{name:"cuin",base:W.VOLUME,prefixes:L.NONE,value:16387064e-12,offset:0},cuft:{name:"cuft",base:W.VOLUME,prefixes:L.NONE,value:.028316846592,offset:0},cuyd:{name:"cuyd",base:W.VOLUME,prefixes:L.NONE,value:.764554857984,offset:0},teaspoon:{name:"teaspoon",base:W.VOLUME,prefixes:L.NONE,value:5e-6,offset:0},tablespoon:{name:"tablespoon",base:W.VOLUME,prefixes:L.NONE,value:15e-6,offset:0},drop:{name:"drop",base:W.VOLUME,prefixes:L.NONE,value:5e-8,offset:0},gtt:{name:"gtt",base:W.VOLUME,prefixes:L.NONE,value:5e-8,offset:0},minim:{name:"minim",base:W.VOLUME,prefixes:L.NONE,value:61611519921875e-21,offset:0},fluiddram:{name:"fluiddram",base:W.VOLUME,prefixes:L.NONE,value:36966911953125e-19,offset:0},fluidounce:{name:"fluidounce",base:W.VOLUME,prefixes:L.NONE,value:295735295625e-16,offset:0},gill:{name:"gill",base:W.VOLUME,prefixes:L.NONE,value:.00011829411825,offset:0},cc:{name:"cc",base:W.VOLUME,prefixes:L.NONE,value:1e-6,offset:0},cup:{name:"cup",base:W.VOLUME,prefixes:L.NONE,value:.0002365882365,offset:0},pint:{name:"pint",base:W.VOLUME,prefixes:L.NONE,value:.000473176473,offset:0},quart:{name:"quart",base:W.VOLUME,prefixes:L.NONE,value:.000946352946,offset:0},gallon:{name:"gallon",base:W.VOLUME,prefixes:L.NONE,value:.003785411784,offset:0},beerbarrel:{name:"beerbarrel",base:W.VOLUME,prefixes:L.NONE,value:.117347765304,offset:0},oilbarrel:{name:"oilbarrel",base:W.VOLUME,prefixes:L.NONE,value:.158987294928,offset:0},hogshead:{name:"hogshead",base:W.VOLUME,prefixes:L.NONE,value:.238480942392,offset:0},g:{name:"g",base:W.MASS,prefixes:L.SHORT,value:.001,offset:0},gram:{name:"gram",base:W.MASS,prefixes:L.LONG,value:.001,offset:0},ton:{name:"ton",base:W.MASS,prefixes:L.SHORT,value:907.18474,offset:0},t:{name:"t",base:W.MASS,prefixes:L.SHORT,value:1e3,offset:0},tonne:{name:"tonne",base:W.MASS,prefixes:L.LONG,value:1e3,offset:0},grain:{name:"grain",base:W.MASS,prefixes:L.NONE,value:6479891e-11,offset:0},dram:{name:"dram",base:W.MASS,prefixes:L.NONE,value:.0017718451953125,offset:0},ounce:{name:"ounce",base:W.MASS,prefixes:L.NONE,value:.028349523125,offset:0},poundmass:{name:"poundmass",base:W.MASS,prefixes:L.NONE,value:.45359237,offset:0},hundredweight:{name:"hundredweight",base:W.MASS,prefixes:L.NONE,value:45.359237,offset:0},stick:{name:"stick",base:W.MASS,prefixes:L.NONE,value:.115,offset:0},stone:{name:"stone",base:W.MASS,prefixes:L.NONE,value:6.35029318,offset:0},gr:{name:"gr",base:W.MASS,prefixes:L.NONE,value:6479891e-11,offset:0},dr:{name:"dr",base:W.MASS,prefixes:L.NONE,value:.0017718451953125,offset:0},oz:{name:"oz",base:W.MASS,prefixes:L.NONE,value:.028349523125,offset:0},lbm:{name:"lbm",base:W.MASS,prefixes:L.NONE,value:.45359237,offset:0},cwt:{name:"cwt",base:W.MASS,prefixes:L.NONE,value:45.359237,offset:0},s:{name:"s",base:W.TIME,prefixes:L.SHORT,value:1,offset:0},min:{name:"min",base:W.TIME,prefixes:L.NONE,value:60,offset:0},h:{name:"h",base:W.TIME,prefixes:L.NONE,value:3600,offset:0},second:{name:"second",base:W.TIME,prefixes:L.LONG,value:1,offset:0},sec:{name:"sec",base:W.TIME,prefixes:L.LONG,value:1,offset:0},minute:{name:"minute",base:W.TIME,prefixes:L.NONE,value:60,offset:0},hour:{name:"hour",base:W.TIME,prefixes:L.NONE,value:3600,offset:0},day:{name:"day",base:W.TIME,prefixes:L.NONE,value:86400,offset:0},week:{name:"week",base:W.TIME,prefixes:L.NONE,value:7*86400,offset:0},month:{name:"month",base:W.TIME,prefixes:L.NONE,value:2629800,offset:0},year:{name:"year",base:W.TIME,prefixes:L.NONE,value:31557600,offset:0},decade:{name:"decade",base:W.TIME,prefixes:L.NONE,value:315576e3,offset:0},century:{name:"century",base:W.TIME,prefixes:L.NONE,value:315576e4,offset:0},millennium:{name:"millennium",base:W.TIME,prefixes:L.NONE,value:315576e5,offset:0},hertz:{name:"Hertz",base:W.FREQUENCY,prefixes:L.LONG,value:1,offset:0,reciprocal:!0},Hz:{name:"Hz",base:W.FREQUENCY,prefixes:L.SHORT,value:1,offset:0,reciprocal:!0},rad:{name:"rad",base:W.ANGLE,prefixes:L.SHORT,value:1,offset:0},radian:{name:"radian",base:W.ANGLE,prefixes:L.LONG,value:1,offset:0},deg:{name:"deg",base:W.ANGLE,prefixes:L.SHORT,value:null,offset:0},degree:{name:"degree",base:W.ANGLE,prefixes:L.LONG,value:null,offset:0},grad:{name:"grad",base:W.ANGLE,prefixes:L.SHORT,value:null,offset:0},gradian:{name:"gradian",base:W.ANGLE,prefixes:L.LONG,value:null,offset:0},cycle:{name:"cycle",base:W.ANGLE,prefixes:L.NONE,value:null,offset:0},arcsec:{name:"arcsec",base:W.ANGLE,prefixes:L.NONE,value:null,offset:0},arcmin:{name:"arcmin",base:W.ANGLE,prefixes:L.NONE,value:null,offset:0},A:{name:"A",base:W.CURRENT,prefixes:L.SHORT,value:1,offset:0},ampere:{name:"ampere",base:W.CURRENT,prefixes:L.LONG,value:1,offset:0},K:{name:"K",base:W.TEMPERATURE,prefixes:L.SHORT,value:1,offset:0},degC:{name:"degC",base:W.TEMPERATURE,prefixes:L.SHORT,value:1,offset:273.15},degF:{name:"degF",base:W.TEMPERATURE,prefixes:L.SHORT,value:new N(5,9),offset:459.67},degR:{name:"degR",base:W.TEMPERATURE,prefixes:L.SHORT,value:new N(5,9),offset:0},kelvin:{name:"kelvin",base:W.TEMPERATURE,prefixes:L.LONG,value:1,offset:0},celsius:{name:"celsius",base:W.TEMPERATURE,prefixes:L.LONG,value:1,offset:273.15},fahrenheit:{name:"fahrenheit",base:W.TEMPERATURE,prefixes:L.LONG,value:new N(5,9),offset:459.67},rankine:{name:"rankine",base:W.TEMPERATURE,prefixes:L.LONG,value:new N(5,9),offset:0},mol:{name:"mol",base:W.AMOUNT_OF_SUBSTANCE,prefixes:L.SHORT,value:1,offset:0},mole:{name:"mole",base:W.AMOUNT_OF_SUBSTANCE,prefixes:L.LONG,value:1,offset:0},cd:{name:"cd",base:W.LUMINOUS_INTENSITY,prefixes:L.SHORT,value:1,offset:0},candela:{name:"candela",base:W.LUMINOUS_INTENSITY,prefixes:L.LONG,value:1,offset:0},N:{name:"N",base:W.FORCE,prefixes:L.SHORT,value:1,offset:0},newton:{name:"newton",base:W.FORCE,prefixes:L.LONG,value:1,offset:0},dyn:{name:"dyn",base:W.FORCE,prefixes:L.SHORT,value:1e-5,offset:0},dyne:{name:"dyne",base:W.FORCE,prefixes:L.LONG,value:1e-5,offset:0},lbf:{name:"lbf",base:W.FORCE,prefixes:L.NONE,value:4.4482216152605,offset:0},poundforce:{name:"poundforce",base:W.FORCE,prefixes:L.NONE,value:4.4482216152605,offset:0},kip:{name:"kip",base:W.FORCE,prefixes:L.LONG,value:4448.2216,offset:0},kilogramforce:{name:"kilogramforce",base:W.FORCE,prefixes:L.NONE,value:9.80665,offset:0},J:{name:"J",base:W.ENERGY,prefixes:L.SHORT,value:1,offset:0},joule:{name:"joule",base:W.ENERGY,prefixes:L.LONG,value:1,offset:0},erg:{name:"erg",base:W.ENERGY,prefixes:L.SHORTLONG,value:1e-7,offset:0},Wh:{name:"Wh",base:W.ENERGY,prefixes:L.SHORT,value:3600,offset:0},BTU:{name:"BTU",base:W.ENERGY,prefixes:L.BTU,value:1055.05585262,offset:0},eV:{name:"eV",base:W.ENERGY,prefixes:L.SHORT,value:1602176565e-28,offset:0},electronvolt:{name:"electronvolt",base:W.ENERGY,prefixes:L.LONG,value:1602176565e-28,offset:0},W:{name:"W",base:W.POWER,prefixes:L.SHORT,value:1,offset:0},watt:{name:"watt",base:W.POWER,prefixes:L.LONG,value:1,offset:0},hp:{name:"hp",base:W.POWER,prefixes:L.NONE,value:745.6998715386,offset:0},VAR:{name:"VAR",base:W.POWER,prefixes:L.SHORT,value:b.I,offset:0},VA:{name:"VA",base:W.POWER,prefixes:L.SHORT,value:1,offset:0},Pa:{name:"Pa",base:W.PRESSURE,prefixes:L.SHORT,value:1,offset:0},psi:{name:"psi",base:W.PRESSURE,prefixes:L.NONE,value:6894.75729276459,offset:0},atm:{name:"atm",base:W.PRESSURE,prefixes:L.NONE,value:101325,offset:0},bar:{name:"bar",base:W.PRESSURE,prefixes:L.SHORTLONG,value:1e5,offset:0},torr:{name:"torr",base:W.PRESSURE,prefixes:L.NONE,value:133.322,offset:0},mmHg:{name:"mmHg",base:W.PRESSURE,prefixes:L.NONE,value:133.322,offset:0},mmH2O:{name:"mmH2O",base:W.PRESSURE,prefixes:L.NONE,value:9.80665,offset:0},cmH2O:{name:"cmH2O",base:W.PRESSURE,prefixes:L.NONE,value:98.0665,offset:0},coulomb:{name:"coulomb",base:W.ELECTRIC_CHARGE,prefixes:L.LONG,value:1,offset:0},C:{name:"C",base:W.ELECTRIC_CHARGE,prefixes:L.SHORT,value:1,offset:0},farad:{name:"farad",base:W.ELECTRIC_CAPACITANCE,prefixes:L.LONG,value:1,offset:0},F:{name:"F",base:W.ELECTRIC_CAPACITANCE,prefixes:L.SHORT,value:1,offset:0},volt:{name:"volt",base:W.ELECTRIC_POTENTIAL,prefixes:L.LONG,value:1,offset:0},V:{name:"V",base:W.ELECTRIC_POTENTIAL,prefixes:L.SHORT,value:1,offset:0},ohm:{name:"ohm",base:W.ELECTRIC_RESISTANCE,prefixes:L.SHORTLONG,value:1,offset:0},henry:{name:"henry",base:W.ELECTRIC_INDUCTANCE,prefixes:L.LONG,value:1,offset:0},H:{name:"H",base:W.ELECTRIC_INDUCTANCE,prefixes:L.SHORT,value:1,offset:0},siemens:{name:"siemens",base:W.ELECTRIC_CONDUCTANCE,prefixes:L.LONG,value:1,offset:0},S:{name:"S",base:W.ELECTRIC_CONDUCTANCE,prefixes:L.SHORT,value:1,offset:0},weber:{name:"weber",base:W.MAGNETIC_FLUX,prefixes:L.LONG,value:1,offset:0},Wb:{name:"Wb",base:W.MAGNETIC_FLUX,prefixes:L.SHORT,value:1,offset:0},tesla:{name:"tesla",base:W.MAGNETIC_FLUX_DENSITY,prefixes:L.LONG,value:1,offset:0},T:{name:"T",base:W.MAGNETIC_FLUX_DENSITY,prefixes:L.SHORT,value:1,offset:0},b:{name:"b",base:W.BIT,prefixes:L.BINARY_SHORT,value:1,offset:0},bits:{name:"bits",base:W.BIT,prefixes:L.BINARY_LONG,value:1,offset:0},B:{name:"B",base:W.BIT,prefixes:L.BINARY_SHORT,value:8,offset:0},bytes:{name:"bytes",base:W.BIT,prefixes:L.BINARY_LONG,value:8,offset:0}},ce={meters:"meter",inches:"inch",feet:"foot",yards:"yard",miles:"mile",links:"link",rods:"rod",chains:"chain",angstroms:"angstrom",lt:"l",litres:"litre",liter:"litre",liters:"litre",teaspoons:"teaspoon",tablespoons:"tablespoon",minims:"minim",fldr:"fluiddram",fluiddrams:"fluiddram",floz:"fluidounce",fluidounces:"fluidounce",gi:"gill",gills:"gill",cp:"cup",cups:"cup",pt:"pint",pints:"pint",qt:"quart",quarts:"quart",gal:"gallon",gallons:"gallon",bbl:"beerbarrel",beerbarrels:"beerbarrel",obl:"oilbarrel",oilbarrels:"oilbarrel",hogsheads:"hogshead",gtts:"gtt",grams:"gram",tons:"ton",tonnes:"tonne",grains:"grain",drams:"dram",ounces:"ounce",poundmasses:"poundmass",hundredweights:"hundredweight",sticks:"stick",lb:"lbm",lbs:"lbm",kips:"kip",kgf:"kilogramforce",acres:"acre",hectares:"hectare",sqfeet:"sqft",sqyard:"sqyd",sqmile:"sqmi",sqmiles:"sqmi",mmhg:"mmHg",mmh2o:"mmH2O",cmh2o:"cmH2O",seconds:"second",secs:"second",minutes:"minute",mins:"minute",hours:"hour",hr:"hour",hrs:"hour",days:"day",weeks:"week",months:"month",years:"year",decades:"decade",centuries:"century",millennia:"millennium",hertz:"hertz",radians:"radian",degrees:"degree",gradians:"gradian",cycles:"cycle",arcsecond:"arcsec",arcseconds:"arcsec",arcminute:"arcmin",arcminutes:"arcmin",BTUs:"BTU",watts:"watt",joules:"joule",amperes:"ampere",amps:"ampere",amp:"ampere",coulombs:"coulomb",volts:"volt",ohms:"ohm",farads:"farad",webers:"weber",teslas:"tesla",electronvolts:"electronvolt",moles:"mole",bit:"bits",byte:"bytes"};function xe(ue){if(ue.number==="BigNumber"){var ge=createBigNumberPi(_);ie.rad.value=new _(1),ie.deg.value=ge.div(180),ie.grad.value=ge.div(200),ie.cycle.value=ge.times(2),ie.arcsec.value=ge.div(648e3),ie.arcmin.value=ge.div(10800)}else ie.rad.value=1,ie.deg.value=Math.PI/180,ie.grad.value=Math.PI/200,ie.cycle.value=Math.PI*2,ie.arcsec.value=Math.PI/648e3,ie.arcmin.value=Math.PI/10800;ie.radian.value=ie.rad.value,ie.degree.value=ie.deg.value,ie.gradian.value=ie.grad.value}xe(a),r&&r("config",function(ue,ge){ue.number!==ge.number&&xe(ue)});var fe={si:{NONE:{unit:se,prefix:L.NONE[""]},LENGTH:{unit:ie.m,prefix:L.SHORT[""]},MASS:{unit:ie.g,prefix:L.SHORT.k},TIME:{unit:ie.s,prefix:L.SHORT[""]},CURRENT:{unit:ie.A,prefix:L.SHORT[""]},TEMPERATURE:{unit:ie.K,prefix:L.SHORT[""]},LUMINOUS_INTENSITY:{unit:ie.cd,prefix:L.SHORT[""]},AMOUNT_OF_SUBSTANCE:{unit:ie.mol,prefix:L.SHORT[""]},ANGLE:{unit:ie.rad,prefix:L.SHORT[""]},BIT:{unit:ie.bits,prefix:L.SHORT[""]},FORCE:{unit:ie.N,prefix:L.SHORT[""]},ENERGY:{unit:ie.J,prefix:L.SHORT[""]},POWER:{unit:ie.W,prefix:L.SHORT[""]},PRESSURE:{unit:ie.Pa,prefix:L.SHORT[""]},ELECTRIC_CHARGE:{unit:ie.C,prefix:L.SHORT[""]},ELECTRIC_CAPACITANCE:{unit:ie.F,prefix:L.SHORT[""]},ELECTRIC_POTENTIAL:{unit:ie.V,prefix:L.SHORT[""]},ELECTRIC_RESISTANCE:{unit:ie.ohm,prefix:L.SHORT[""]},ELECTRIC_INDUCTANCE:{unit:ie.H,prefix:L.SHORT[""]},ELECTRIC_CONDUCTANCE:{unit:ie.S,prefix:L.SHORT[""]},MAGNETIC_FLUX:{unit:ie.Wb,prefix:L.SHORT[""]},MAGNETIC_FLUX_DENSITY:{unit:ie.T,prefix:L.SHORT[""]},FREQUENCY:{unit:ie.Hz,prefix:L.SHORT[""]}}};fe.cgs=JSON.parse(JSON.stringify(fe.si)),fe.cgs.LENGTH={unit:ie.m,prefix:L.SHORT.c},fe.cgs.MASS={unit:ie.g,prefix:L.SHORT[""]},fe.cgs.FORCE={unit:ie.dyn,prefix:L.SHORT[""]},fe.cgs.ENERGY={unit:ie.erg,prefix:L.NONE[""]},fe.us=JSON.parse(JSON.stringify(fe.si)),fe.us.LENGTH={unit:ie.ft,prefix:L.NONE[""]},fe.us.MASS={unit:ie.lbm,prefix:L.NONE[""]},fe.us.TEMPERATURE={unit:ie.degF,prefix:L.NONE[""]},fe.us.FORCE={unit:ie.lbf,prefix:L.NONE[""]},fe.us.ENERGY={unit:ie.BTU,prefix:L.BTU[""]},fe.us.POWER={unit:ie.hp,prefix:L.NONE[""]},fe.us.PRESSURE={unit:ie.psi,prefix:L.NONE[""]},fe.auto=JSON.parse(JSON.stringify(fe.si));var Ne=fe.auto;w.setUnitSystem=function(ue){if(hasOwnProperty(fe,ue))Ne=fe[ue];else throw new Error("Unit system "+ue+" does not exist. Choices are: "+Object.keys(fe).join(", "))},w.getUnitSystem=function(){for(var ue in fe)if(hasOwnProperty(fe,ue)&&fe[ue]===Ne)return ue},w.typeConverters={BigNumber:function(ge){return ge!=null&&ge.isFraction?new _(String(ge.n)).div(String(ge.d)).times(String(ge.s)):new _(ge+"")},Fraction:function(ge){return new N(ge)},Complex:function(ge){return ge},number:function(ge){return ge!=null&&ge.isFraction?y(ge):ge}},w.prototype._numberConverter=function(){var ue=w.typeConverters[this.valueType()];if(ue)return ue;throw new TypeError('Unsupported Unit value type "'+this.valueType()+'"')},w._getNumberConverter=function(ue){if(!w.typeConverters[ue])throw new TypeError('Unsupported type "'+ue+'"');return w.typeConverters[ue]};for(var we in ie)if(hasOwnProperty(ie,we)){var Pe=ie[we];Pe.dimensions=Pe.base.dimensions}for(var Ie in ce)if(hasOwnProperty(ce,Ie)){var Ye=ie[ce[Ie]],Le={};for(var Ve in Ye)hasOwnProperty(Ye,Ve)&&(Le[Ve]=Ye[Ve]);Le.name=Ie,ie[Ie]=Le}w.isValidAlpha=function(ge){return/^[a-zA-Z]$/.test(ge)};function Ze(ue){for(var ge=0;ge<ue.length;ge++){if(O=ue.charAt(ge),ge===0&&!w.isValidAlpha(O))throw new Error('Invalid unit name (must begin with alpha character): "'+ue+'"');if(ge>0&&!(w.isValidAlpha(O)||B(O)))throw new Error('Invalid unit name (only alphanumeric characters are allowed): "'+ue+'"')}}return w.createUnit=function(ue,ge){if(typeof ue!="object")throw new TypeError("createUnit expects first parameter to be of type 'Object'");if(ge&&ge.override){for(var te in ue)if(hasOwnProperty(ue,te)&&w.deleteUnit(te),ue[te].aliases)for(var le=0;le<ue[te].aliases.length;le++)w.deleteUnit(ue[te].aliases[le])}var me;for(var he in ue)hasOwnProperty(ue,he)&&(me=w.createUnitSingle(he,ue[he]));return me},w.createUnitSingle=function(ue,ge){if((typeof ge>"u"||ge===null)&&(ge={}),typeof ue!="string")throw new TypeError("createUnitSingle expects first parameter to be of type 'string'");if(hasOwnProperty(ie,ue))throw new Error('Cannot create unit "'+ue+'": a unit with that name already exists');Ze(ue);var te=null,le=[],me=0,he,ye,Se;if(ge&&ge.type==="Unit")te=ge.clone();else if(typeof ge=="string")ge!==""&&(he=ge);else if(typeof ge=="object")he=ge.definition,ye=ge.prefixes,me=ge.offset,Se=ge.baseName,ge.aliases&&(le=ge.aliases.valueOf());else throw new TypeError('Cannot create unit "'+ue+'" from "'+ge.toString()+'": expecting "string" or "Unit" or "Object"');if(le){for(var Be=0;Be<le.length;Be++)if(hasOwnProperty(ie,le[Be]))throw new Error('Cannot create alias "'+le[Be]+'": a unit with that name already exists')}if(he&&typeof he=="string"&&!te)try{te=w.parse(he,{allowNoUnits:!0})}catch(He){throw He.message='Could not create unit "'+ue+'" from "'+he+'": '+He.message,He}else he&&he.type==="Unit"&&(te=he.clone());le=le||[],me=me||0,ye&&ye.toUpperCase?ye=L[ye.toUpperCase()]||L.NONE:ye=L.NONE;var Te={};if(te){Te={name:ue,value:te.value,dimensions:te.dimensions.slice(0),prefixes:ye,offset:me};var Ue=!1;for(var je in W)if(hasOwnProperty(W,je)){for(var Ee=!0,qe=0;qe<ae.length;qe++)if(Math.abs((Te.dimensions[qe]||0)-(W[je].dimensions[qe]||0))>1e-12){Ee=!1;break}if(Ee){Ue=!0,Te.base=W[je];break}}if(!Ue){Se=Se||ue+"_STUFF";var I={dimensions:te.dimensions.slice(0)};I.key=Se,W[Se]=I,Ne[Se]={unit:Te,prefix:L.NONE[""]},Te.base=W[Se]}}else{if(Se=Se||ue+"_STUFF",ae.indexOf(Se)>=0)throw new Error('Cannot create new base unit "'+ue+'": a base unit with that name already exists (and cannot be overridden)');ae.push(Se);for(var Xe in W)hasOwnProperty(W,Xe)&&(W[Xe].dimensions[ae.length-1]=0);for(var Me={dimensions:[]},ze=0;ze<ae.length;ze++)Me.dimensions[ze]=0;Me.dimensions[ae.length-1]=1,Me.key=Se,W[Se]=Me,Te={name:ue,value:1,dimensions:W[Se].dimensions.slice(0),prefixes:ye,offset:me,base:W[Se]},Ne[Se]={unit:Te,prefix:L.NONE[""]}}w.UNITS[ue]=Te;for(var pe=0;pe<le.length;pe++){var De=le[pe],Fe={};for(var We in Te)hasOwnProperty(Te,We)&&(Fe[We]=Te[We]);Fe.name=De,w.UNITS[De]=Fe}return delete Y.cache,new w(null,ue)},w.deleteUnit=function(ue){delete w.UNITS[ue],delete Y.cache},w.PREFIXES=L,w.BASE_DIMENSIONS=ae,w.BASE_UNITS=W,w.UNIT_SYSTEMS=fe,w.UNITS=ie,w},{isClass:!0}),name$2q="unit",dependencies$2q=["typed","Unit"],createUnitFunction=factory(name$2q,dependencies$2q,t=>{var{typed:r,Unit:a}=t;return r(name$2q,{Unit:function(s){return s.clone()},string:function(s){return a.isValuelessUnit(s)?new a(null,s):a.parse(s,{allowNoUnits:!0})},"number | BigNumber | Fraction | Complex, string | Unit":function(s,o){return new a(s,o)},"number | BigNumber | Fraction":function(s){return new a(s)},"Array | Matrix":r.referToSelf(n=>s=>deepMap(s,n))})}),name$2p="sparse",dependencies$2p=["typed","SparseMatrix"],createSparse=factory(name$2p,dependencies$2p,t=>{var{typed:r,SparseMatrix:a}=t;return r(name$2p,{"":function(){return new a([])},string:function(s){return new a([],s)},"Array | Matrix":function(s){return new a(s)},"Array | Matrix, string":function(s,o){return new a(s,o)}})}),name$2o="createUnit",dependencies$2o=["typed","Unit"],createCreateUnit=factory(name$2o,dependencies$2o,t=>{var{typed:r,Unit:a}=t;return r(name$2o,{"Object, Object":function(s,o){return a.createUnit(s,o)},Object:function(s){return a.createUnit(s,{})},"string, Unit | string | Object, Object":function(s,o,l){var u={};return u[s]=o,a.createUnit(u,l)},"string, Unit | string | Object":function(s,o){var l={};return l[s]=o,a.createUnit(l,{})},string:function(s){var o={};return o[s]={},a.createUnit(o,{})}})}),name$2n="acos",dependencies$2n=["typed","config","Complex"],createAcos=factory(name$2n,dependencies$2n,t=>{var{typed:r,config:a,Complex:n}=t;return r(name$2n,{number:function(o){return o>=-1&&o<=1||a.predictable?Math.acos(o):new n(o,0).acos()},Complex:function(o){return o.acos()},BigNumber:function(o){return o.acos()}})}),name$2m="acosh",dependencies$2m=["typed","config","Complex"],createAcosh=factory(name$2m,dependencies$2m,t=>{var{typed:r,config:a,Complex:n}=t;return r(name$2m,{number:function(o){return o>=1||a.predictable?acoshNumber(o):o<=-1?new n(Math.log(Math.sqrt(o*o-1)-o),Math.PI):new n(o,0).acosh()},Complex:function(o){return o.acosh()},BigNumber:function(o){return o.acosh()}})}),name$2l="acot",dependencies$2l=["typed","BigNumber"],createAcot=factory(name$2l,dependencies$2l,t=>{var{typed:r,BigNumber:a}=t;return r(name$2l,{number:acotNumber,Complex:function(s){return s.acot()},BigNumber:function(s){return new a(1).div(s).atan()}})}),name$2k="acoth",dependencies$2k=["typed","config","Complex","BigNumber"],createAcoth=factory(name$2k,dependencies$2k,t=>{var{typed:r,config:a,Complex:n,BigNumber:s}=t;return r(name$2k,{number:function(l){return l>=1||l<=-1||a.predictable?acothNumber(l):new n(l,0).acoth()},Complex:function(l){return l.acoth()},BigNumber:function(l){return new s(1).div(l).atanh()}})}),name$2j="acsc",dependencies$2j=["typed","config","Complex","BigNumber"],createAcsc=factory(name$2j,dependencies$2j,t=>{var{typed:r,config:a,Complex:n,BigNumber:s}=t;return r(name$2j,{number:function(l){return l<=-1||l>=1||a.predictable?acscNumber(l):new n(l,0).acsc()},Complex:function(l){return l.acsc()},BigNumber:function(l){return new s(1).div(l).asin()}})}),name$2i="acsch",dependencies$2i=["typed","BigNumber"],createAcsch=factory(name$2i,dependencies$2i,t=>{var{typed:r,BigNumber:a}=t;return r(name$2i,{number:acschNumber,Complex:function(s){return s.acsch()},BigNumber:function(s){return new a(1).div(s).asinh()}})}),name$2h="asec",dependencies$2h=["typed","config","Complex","BigNumber"],createAsec=factory(name$2h,dependencies$2h,t=>{var{typed:r,config:a,Complex:n,BigNumber:s}=t;return r(name$2h,{number:function(l){return l<=-1||l>=1||a.predictable?asecNumber(l):new n(l,0).asec()},Complex:function(l){return l.asec()},BigNumber:function(l){return new s(1).div(l).acos()}})}),name$2g="asech",dependencies$2g=["typed","config","Complex","BigNumber"],createAsech=factory(name$2g,dependencies$2g,t=>{var{typed:r,config:a,Complex:n,BigNumber:s}=t;return r(name$2g,{number:function(l){if(l<=1&&l>=-1||a.predictable){var u=1/l;if(u>0||a.predictable)return asechNumber(l);var h=Math.sqrt(u*u-1);return new n(Math.log(h-u),Math.PI)}return new n(l,0).asech()},Complex:function(l){return l.asech()},BigNumber:function(l){return new s(1).div(l).acosh()}})}),name$2f="asin",dependencies$2f=["typed","config","Complex"],createAsin=factory(name$2f,dependencies$2f,t=>{var{typed:r,config:a,Complex:n}=t;return r(name$2f,{number:function(o){return o>=-1&&o<=1||a.predictable?Math.asin(o):new n(o,0).asin()},Complex:function(o){return o.asin()},BigNumber:function(o){return o.asin()}})}),name$2e="asinh",dependencies$2e=["typed"],createAsinh=factory(name$2e,dependencies$2e,t=>{var{typed:r}=t;return r("asinh",{number:asinhNumber,Complex:function(n){return n.asinh()},BigNumber:function(n){return n.asinh()}})}),name$2d="atan",dependencies$2d=["typed"],createAtan=factory(name$2d,dependencies$2d,t=>{var{typed:r}=t;return r("atan",{number:function(n){return Math.atan(n)},Complex:function(n){return n.atan()},BigNumber:function(n){return n.atan()}})}),name$2c="atan2",dependencies$2c=["typed","matrix","equalScalar","BigNumber","DenseMatrix","concat"],createAtan2=factory(name$2c,dependencies$2c,t=>{var{typed:r,matrix:a,equalScalar:n,BigNumber:s,DenseMatrix:o,concat:l}=t,u=createMatAlgo02xDS0({typed:r,equalScalar:n}),h=createMatAlgo03xDSf({typed:r}),c=createMatAlgo09xS0Sf({typed:r,equalScalar:n}),f=createMatAlgo11xS0s({typed:r,equalScalar:n}),d=createMatAlgo12xSfs({typed:r,DenseMatrix:o}),p=createMatrixAlgorithmSuite({typed:r,matrix:a,concat:l});return r(name$2c,{"number, number":Math.atan2,"BigNumber, BigNumber":(v,y)=>s.atan2(v,y)},p({scalar:"number | BigNumber",SS:c,DS:h,SD:u,Ss:f,sS:d}))}),name$2b="atanh",dependencies$2b=["typed","config","Complex"],createAtanh=factory(name$2b,dependencies$2b,t=>{var{typed:r,config:a,Complex:n}=t;return r(name$2b,{number:function(o){return o<=1&&o>=-1||a.predictable?atanhNumber(o):new n(o,0).atanh()},Complex:function(o){return o.atanh()},BigNumber:function(o){return o.atanh()}})}),createTrigUnit=factory("trigUnit",["typed"],t=>{var{typed:r}=t;return{Unit:r.referToSelf(a=>n=>{if(!n.hasBase(n.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function cot is no angle");return r.find(a,n.valueType())(n.value)})}}),name$2a="cos",dependencies$2a=["typed"],createCos=factory(name$2a,dependencies$2a,t=>{var{typed:r}=t,a=createTrigUnit({typed:r});return r(name$2a,{number:Math.cos,"Complex | BigNumber":n=>n.cos()},a)}),name$29="cosh",dependencies$29=["typed"],createCosh=factory(name$29,dependencies$29,t=>{var{typed:r}=t;return r(name$29,{number:cosh$3,"Complex | BigNumber":a=>a.cosh()})}),name$28="cot",dependencies$28=["typed","BigNumber"],createCot=factory(name$28,dependencies$28,t=>{var{typed:r,BigNumber:a}=t,n=createTrigUnit({typed:r});return r(name$28,{number:cotNumber,Complex:s=>s.cot(),BigNumber:s=>new a(1).div(s.tan())},n)}),name$27="coth",dependencies$27=["typed","BigNumber"],createCoth=factory(name$27,dependencies$27,t=>{var{typed:r,BigNumber:a}=t;return r(name$27,{number:cothNumber,Complex:n=>n.coth(),BigNumber:n=>new a(1).div(n.tanh())})}),name$26="csc",dependencies$26=["typed","BigNumber"],createCsc=factory(name$26,dependencies$26,t=>{var{typed:r,BigNumber:a}=t,n=createTrigUnit({typed:r});return r(name$26,{number:cscNumber,Complex:s=>s.csc(),BigNumber:s=>new a(1).div(s.sin())},n)}),name$25="csch",dependencies$25=["typed","BigNumber"],createCsch=factory(name$25,dependencies$25,t=>{var{typed:r,BigNumber:a}=t;return r(name$25,{number:cschNumber,Complex:n=>n.csch(),BigNumber:n=>new a(1).div(n.sinh())})}),name$24="sec",dependencies$24=["typed","BigNumber"],createSec=factory(name$24,dependencies$24,t=>{var{typed:r,BigNumber:a}=t,n=createTrigUnit({typed:r});return r(name$24,{number:secNumber,Complex:s=>s.sec(),BigNumber:s=>new a(1).div(s.cos())},n)}),name$23="sech",dependencies$23=["typed","BigNumber"],createSech=factory(name$23,dependencies$23,t=>{var{typed:r,BigNumber:a}=t;return r(name$23,{number:sechNumber,Complex:n=>n.sech(),BigNumber:n=>new a(1).div(n.cosh())})}),name$22="sin",dependencies$22=["typed"],createSin=factory(name$22,dependencies$22,t=>{var{typed:r}=t,a=createTrigUnit({typed:r});return r(name$22,{number:Math.sin,"Complex | BigNumber":n=>n.sin()},a)}),name$21="sinh",dependencies$21=["typed"],createSinh=factory(name$21,dependencies$21,t=>{var{typed:r}=t;return r(name$21,{number:sinhNumber,"Complex | BigNumber":a=>a.sinh()})}),name$20="tan",dependencies$20=["typed"],createTan=factory(name$20,dependencies$20,t=>{var{typed:r}=t,a=createTrigUnit({typed:r});return r(name$20,{number:Math.tan,"Complex | BigNumber":n=>n.tan()},a)}),name$1$="tanh",dependencies$1$=["typed"],createTanh=factory(name$1$,dependencies$1$,t=>{var{typed:r}=t;return r("tanh",{number:tanh$2,"Complex | BigNumber":a=>a.tanh()})}),name$1_="setCartesian",dependencies$1_=["typed","size","subset","compareNatural","Index","DenseMatrix"],createSetCartesian=factory(name$1_,dependencies$1_,t=>{var{typed:r,size:a,subset:n,compareNatural:s,Index:o,DenseMatrix:l}=t;return r(name$1_,{"Array | Matrix, Array | Matrix":function(h,c){var f=[];if(n(a(h),new o(0))!==0&&n(a(c),new o(0))!==0){var d=flatten$1(Array.isArray(h)?h:h.toArray()).sort(s),p=flatten$1(Array.isArray(c)?c:c.toArray()).sort(s);f=[];for(var v=0;v<d.length;v++)for(var y=0;y<p.length;y++)f.push([d[v],p[y]])}return Array.isArray(h)&&Array.isArray(c)?f:new l(f)}})}),name$1Z="setDifference",dependencies$1Z=["typed","size","subset","compareNatural","Index","DenseMatrix"],createSetDifference=factory(name$1Z,dependencies$1Z,t=>{var{typed:r,size:a,subset:n,compareNatural:s,Index:o,DenseMatrix:l}=t;return r(name$1Z,{"Array | Matrix, Array | Matrix":function(h,c){var f;if(n(a(h),new o(0))===0)f=[];else{if(n(a(c),new o(0))===0)return flatten$1(h.toArray());var d=identify(flatten$1(Array.isArray(h)?h:h.toArray()).sort(s)),p=identify(flatten$1(Array.isArray(c)?c:c.toArray()).sort(s));f=[];for(var v,y=0;y<d.length;y++){v=!1;for(var b=0;b<p.length;b++)if(s(d[y].value,p[b].value)===0&&d[y].identifier===p[b].identifier){v=!0;break}v||f.push(d[y])}}return Array.isArray(h)&&Array.isArray(c)?generalize(f):new l(generalize(f))}})}),name$1Y="setDistinct",dependencies$1Y=["typed","size","subset","compareNatural","Index","DenseMatrix"],createSetDistinct=factory(name$1Y,dependencies$1Y,t=>{var{typed:r,size:a,subset:n,compareNatural:s,Index:o,DenseMatrix:l}=t;return r(name$1Y,{"Array | Matrix":function(h){var c;if(n(a(h),new o(0))===0)c=[];else{var f=flatten$1(Array.isArray(h)?h:h.toArray()).sort(s);c=[],c.push(f[0]);for(var d=1;d<f.length;d++)s(f[d],f[d-1])!==0&&c.push(f[d])}return Array.isArray(h)?c:new l(c)}})}),name$1X="setIntersect",dependencies$1X=["typed","size","subset","compareNatural","Index","DenseMatrix"],createSetIntersect=factory(name$1X,dependencies$1X,t=>{var{typed:r,size:a,subset:n,compareNatural:s,Index:o,DenseMatrix:l}=t;return r(name$1X,{"Array | Matrix, Array | Matrix":function(h,c){var f;if(n(a(h),new o(0))===0||n(a(c),new o(0))===0)f=[];else{var d=identify(flatten$1(Array.isArray(h)?h:h.toArray()).sort(s)),p=identify(flatten$1(Array.isArray(c)?c:c.toArray()).sort(s));f=[];for(var v=0;v<d.length;v++)for(var y=0;y<p.length;y++)if(s(d[v].value,p[y].value)===0&&d[v].identifier===p[y].identifier){f.push(d[v]);break}}return Array.isArray(h)&&Array.isArray(c)?generalize(f):new l(generalize(f))}})}),name$1W="setIsSubset",dependencies$1W=["typed","size","subset","compareNatural","Index"],createSetIsSubset=factory(name$1W,dependencies$1W,t=>{var{typed:r,size:a,subset:n,compareNatural:s,Index:o}=t;return r(name$1W,{"Array | Matrix, Array | Matrix":function(u,h){if(n(a(u),new o(0))===0)return!0;if(n(a(h),new o(0))===0)return!1;for(var c=identify(flatten$1(Array.isArray(u)?u:u.toArray()).sort(s)),f=identify(flatten$1(Array.isArray(h)?h:h.toArray()).sort(s)),d,p=0;p<c.length;p++){d=!1;for(var v=0;v<f.length;v++)if(s(c[p].value,f[v].value)===0&&c[p].identifier===f[v].identifier){d=!0;break}if(d===!1)return!1}return!0}})}),name$1V="setMultiplicity",dependencies$1V=["typed","size","subset","compareNatural","Index"],createSetMultiplicity=factory(name$1V,dependencies$1V,t=>{var{typed:r,size:a,subset:n,compareNatural:s,Index:o}=t;return r(name$1V,{"number | BigNumber | Fraction | Complex, Array | Matrix":function(u,h){if(n(a(h),new o(0))===0)return 0;for(var c=flatten$1(Array.isArray(h)?h:h.toArray()),f=0,d=0;d<c.length;d++)s(c[d],u)===0&&f++;return f}})}),name$1U="setPowerset",dependencies$1U=["typed","size","subset","compareNatural","Index"],createSetPowerset=factory(name$1U,dependencies$1U,t=>{var{typed:r,size:a,subset:n,compareNatural:s,Index:o}=t;return r(name$1U,{"Array | Matrix":function(c){if(n(a(c),new o(0))===0)return[];for(var f=flatten$1(Array.isArray(c)?c:c.toArray()).sort(s),d=[],p=0;p.toString(2).length<=f.length;)d.push(l(f,p.toString(2).split("").reverse())),p++;return u(d)}});function l(h,c){for(var f=[],d=0;d<c.length;d++)c[d]==="1"&&f.push(h[d]);return f}function u(h){for(var c=[],f=h.length-1;f>0;f--)for(var d=0;d<f;d++)h[d].length>h[d+1].length&&(c=h[d],h[d]=h[d+1],h[d+1]=c);return h}}),name$1T="setSize",dependencies$1T=["typed","compareNatural"],createSetSize=factory(name$1T,dependencies$1T,t=>{var{typed:r,compareNatural:a}=t;return r(name$1T,{"Array | Matrix":function(s){return Array.isArray(s)?flatten$1(s).length:flatten$1(s.toArray()).length},"Array | Matrix, boolean":function(s,o){if(o===!1||s.length===0)return Array.isArray(s)?flatten$1(s).length:flatten$1(s.toArray()).length;for(var l=flatten$1(Array.isArray(s)?s:s.toArray()).sort(a),u=1,h=1;h<l.length;h++)a(l[h],l[h-1])!==0&&u++;return u}})}),name$1S="setSymDifference",dependencies$1S=["typed","size","concat","subset","setDifference","Index"],createSetSymDifference=factory(name$1S,dependencies$1S,t=>{var{typed:r,size:a,concat:n,subset:s,setDifference:o,Index:l}=t;return r(name$1S,{"Array | Matrix, Array | Matrix":function(h,c){if(s(a(h),new l(0))===0)return flatten$1(c);if(s(a(c),new l(0))===0)return flatten$1(h);var f=flatten$1(h),d=flatten$1(c);return n(o(f,d),o(d,f))}})}),name$1R="setUnion",dependencies$1R=["typed","size","concat","subset","setIntersect","setSymDifference","Index"],createSetUnion=factory(name$1R,dependencies$1R,t=>{var{typed:r,size:a,concat:n,subset:s,setIntersect:o,setSymDifference:l,Index:u}=t;return r(name$1R,{"Array | Matrix, Array | Matrix":function(c,f){if(s(a(c),new u(0))===0)return flatten$1(f);if(s(a(f),new u(0))===0)return flatten$1(c);var d=flatten$1(c),p=flatten$1(f);return n(l(d,p),o(d,p))}})}),name$1Q="add",dependencies$1Q=["typed","matrix","addScalar","equalScalar","DenseMatrix","SparseMatrix","concat"],createAdd=factory(name$1Q,dependencies$1Q,t=>{var{typed:r,matrix:a,addScalar:n,equalScalar:s,DenseMatrix:o,SparseMatrix:l,concat:u}=t,h=createMatAlgo01xDSid({typed:r}),c=createMatAlgo04xSidSid({typed:r,equalScalar:s}),f=createMatAlgo10xSids({typed:r,DenseMatrix:o}),d=createMatrixAlgorithmSuite({typed:r,matrix:a,concat:u});return r(name$1Q,{"any, any":n,"any, any, ...any":r.referToSelf(p=>(v,y,b)=>{for(var _=p(v,y),N=0;N<b.length;N++)_=p(_,b[N]);return _})},d({elop:n,DS:h,SS:c,Ss:f}))}),name$1P="hypot",dependencies$1P=["typed","abs","addScalar","divideScalar","multiplyScalar","sqrt","smaller","isPositive"],createHypot=factory(name$1P,dependencies$1P,t=>{var{typed:r,abs:a,addScalar:n,divideScalar:s,multiplyScalar:o,sqrt:l,smaller:u,isPositive:h}=t;return r(name$1P,{"... number | BigNumber":c,Array:c,Matrix:f=>c(flatten$1(f.toArray(),!0))});function c(f){for(var d=0,p=0,v=0;v<f.length;v++){if(isComplex(f[v]))throw new TypeError("Unexpected type of argument to hypot");var y=a(f[v]);u(p,y)?(d=o(d,o(s(p,y),s(p,y))),d=n(d,1),p=y):d=n(d,h(y)?o(s(y,p),s(y,p)):y)}return o(p,l(d))}}),name$1O="norm",dependencies$1O=["typed","abs","add","pow","conj","sqrt","multiply","equalScalar","larger","smaller","matrix","ctranspose","eigs"],createNorm=factory(name$1O,dependencies$1O,t=>{var{typed:r,abs:a,add:n,pow:s,conj:o,sqrt:l,multiply:u,equalScalar:h,larger:c,smaller:f,matrix:d,ctranspose:p,eigs:v}=t;return r(name$1O,{number:Math.abs,Complex:function(O){return O.abs()},BigNumber:function(O){return O.abs()},boolean:function(O){return Math.abs(O)},Array:function(O){return A(d(O),2)},Matrix:function(O){return A(O,2)},"Array, number | BigNumber | string":function(O,G){return A(d(O),G)},"Matrix, number | BigNumber | string":function(O,G){return A(O,G)}});function y(X){var O=0;return X.forEach(function(G){var R=a(G);c(R,O)&&(O=R)},!0),O}function b(X){var O;return X.forEach(function(G){var R=a(G);(!O||f(R,O))&&(O=R)},!0),O||0}function _(X,O){if(O===Number.POSITIVE_INFINITY||O==="inf")return y(X);if(O===Number.NEGATIVE_INFINITY||O==="-inf")return b(X);if(O==="fro")return A(X,2);if(typeof O=="number"&&!isNaN(O)){if(!h(O,0)){var G=0;return X.forEach(function(R){G=n(s(a(R),O),G)},!0),s(G,1/O)}return Number.POSITIVE_INFINITY}throw new Error("Unsupported parameter value")}function N(X){var O=0;return X.forEach(function(G,R){O=n(O,u(G,o(G)))}),a(l(O))}function M(X){var O=[],G=0;return X.forEach(function(R,B){var F=B[1],U=n(O[F]||0,a(R));c(U,G)&&(G=U),O[F]=U},!0),G}function C(X){var O=X.size();if(O[0]!==O[1])throw new RangeError("Invalid matrix dimensions");var G=p(X),R=u(G,X),B=v(R).values.toArray(),F=B[B.length-1];return a(l(F))}function $(X){var O=[],G=0;return X.forEach(function(R,B){var F=B[0],U=n(O[F]||0,a(R));c(U,G)&&(G=U),O[F]=U},!0),G}function w(X,O){if(O===1)return M(X);if(O===Number.POSITIVE_INFINITY||O==="inf")return $(X);if(O==="fro")return N(X);if(O===2)return C(X);throw new Error("Unsupported parameter value "+O)}function A(X,O){var G=X.size();if(G.length===1)return _(X,O);if(G.length===2){if(G[0]&&G[1])return w(X,O);throw new RangeError("Invalid matrix dimensions")}}}),name$1N="dot",dependencies$1N=["typed","addScalar","multiplyScalar","conj","size"],createDot=factory(name$1N,dependencies$1N,t=>{var{typed:r,addScalar:a,multiplyScalar:n,conj:s,size:o}=t;return r(name$1N,{"Array | DenseMatrix, Array | DenseMatrix":u,"SparseMatrix, SparseMatrix":h});function l(c,f){var d=o(c),p=o(f),v,y;if(d.length===1)v=d[0];else if(d.length===2&&d[1]===1)v=d[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+d.join(", ")+")");if(p.length===1)y=p[0];else if(p.length===2&&p[1]===1)y=p[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+p.join(", ")+")");if(v!==y)throw new RangeError("Vectors must have equal length ("+v+" != "+y+")");if(v===0)throw new RangeError("Cannot calculate the dot product of empty vectors");return v}function u(c,f){var d=l(c,f),p=isMatrix(c)?c._data:c,v=isMatrix(c)?c._datatype||c.getDataType():void 0,y=isMatrix(f)?f._data:f,b=isMatrix(f)?f._datatype||f.getDataType():void 0,_=o(c).length===2,N=o(f).length===2,M=a,C=n;if(v&&b&&v===b&&typeof v=="string"&&v!=="mixed"){var $=v;M=r.find(a,[$,$]),C=r.find(n,[$,$])}if(!_&&!N){for(var w=C(s(p[0]),y[0]),A=1;A<d;A++)w=M(w,C(s(p[A]),y[A]));return w}if(!_&&N){for(var X=C(s(p[0]),y[0][0]),O=1;O<d;O++)X=M(X,C(s(p[O]),y[O][0]));return X}if(_&&!N){for(var G=C(s(p[0][0]),y[0]),R=1;R<d;R++)G=M(G,C(s(p[R][0]),y[R]));return G}if(_&&N){for(var B=C(s(p[0][0]),y[0][0]),F=1;F<d;F++)B=M(B,C(s(p[F][0]),y[F][0]));return B}}function h(c,f){l(c,f);for(var d=c._index,p=c._values,v=f._index,y=f._values,b=0,_=a,N=n,M=0,C=0;M<d.length&&C<v.length;){var $=d[M],w=v[C];if($<w){M++;continue}if($>w){C++;continue}$===w&&(b=_(b,N(p[M],y[C])),M++,C++)}return b}}),name$1M="trace",dependencies$1M=["typed","matrix","add"],createTrace=factory(name$1M,dependencies$1M,t=>{var{typed:r,matrix:a,add:n}=t;return r("trace",{Array:function(u){return s(a(u))},SparseMatrix:o,DenseMatrix:s,any:clone$3});function s(l){var u=l._size,h=l._data;switch(u.length){case 1:if(u[0]===1)return clone$3(h[0]);throw new RangeError("Matrix must be square (size: "+format$1(u)+")");case 2:{var c=u[0],f=u[1];if(c===f){for(var d=0,p=0;p<c;p++)d=n(d,h[p][p]);return d}else throw new RangeError("Matrix must be square (size: "+format$1(u)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+format$1(u)+")")}}function o(l){var u=l._values,h=l._index,c=l._ptr,f=l._size,d=f[0],p=f[1];if(d===p){var v=0;if(u.length>0)for(var y=0;y<p;y++)for(var b=c[y],_=c[y+1],N=b;N<_;N++){var M=h[N];if(M===y){v=n(v,u[N]);break}if(M>y)break}return v}throw new RangeError("Matrix must be square (size: "+format$1(f)+")")}}),name$1L="index",dependencies$1L=["typed","Index"],createIndex=factory(name$1L,dependencies$1L,t=>{var{typed:r,Index:a}=t;return r(name$1L,{"...number | string | BigNumber | Range | Array | Matrix":function(s){var o=s.map(function(u){return isBigNumber(u)?u.toNumber():isArray(u)||isMatrix(u)?u.map(function(h){return isBigNumber(h)?h.toNumber():h}):u}),l=new a;return a.apply(l,o),l}})}),keywords=new Set(["end"]),name$1K="Node",dependencies$1K=["mathWithTransform"],createNode=factory(name$1K,dependencies$1K,t=>{var{mathWithTransform:r}=t;function a(s){for(var o of[...keywords])if(s.has(o))throw new Error('Scope contains an illegal symbol, "'+o+'" is a reserved keyword')}class n{get type(){return"Node"}get isNode(){return!0}evaluate(o){return this.compile().evaluate(o)}compile(){var o=this._compile(r,{}),l={},u=null;function h(c){var f=createMap$1(c);return a(f),o(f,l,u)}return{evaluate:h}}_compile(o,l){throw new Error("Method _compile must be implemented by type "+this.type)}forEach(o){throw new Error("Cannot run forEach on a Node interface")}map(o){throw new Error("Cannot run map on a Node interface")}_ifNode(o){if(!isNode(o))throw new TypeError("Callback function must return a Node");return o}traverse(o){o(this,null,null);function l(u,h){u.forEach(function(c,f,d){h(c,f,d),l(c,h)})}l(this,o)}transform(o){function l(u,h,c){var f=o(u,h,c);return f!==u?f:u.map(l)}return l(this,null,null)}filter(o){var l=[];return this.traverse(function(u,h,c){o(u,h,c)&&l.push(u)}),l}clone(){throw new Error("Cannot clone a Node interface")}cloneDeep(){return this.map(function(o){return o.cloneDeep()})}equals(o){return o?this.type===o.type&&deepStrictEqual(this,o):!1}toString(o){var l=this._getCustomString(o);return typeof l<"u"?l:this._toString(o)}_toString(){throw new Error("_toString not implemented for "+this.type)}toJSON(){throw new Error("Cannot serialize object: toJSON not implemented by "+this.type)}toHTML(o){var l=this._getCustomString(o);return typeof l<"u"?l:this._toHTML(o)}_toHTML(){throw new Error("_toHTML not implemented for "+this.type)}toTex(o){var l=this._getCustomString(o);return typeof l<"u"?l:this._toTex(o)}_toTex(o){throw new Error("_toTex not implemented for "+this.type)}_getCustomString(o){if(o&&typeof o=="object")switch(typeof o.handler){case"object":case"undefined":return;case"function":return o.handler(this,o);default:throw new TypeError("Object or function expected as callback")}}getIdentifier(){return this.type}getContent(){return this}}return n},{isClass:!0,isNode:!0});function errorTransform(t){return t&&t.isIndexError?new IndexError(t.index+1,t.min+1,t.max!==void 0?t.max+1:void 0):t}function accessFactory(t){var{subset:r}=t;return function(n,s){try{if(Array.isArray(n))return r(n,s);if(n&&typeof n.subset=="function")return n.subset(s);if(typeof n=="string")return r(n,s);if(typeof n=="object"){if(!s.isObjectProperty())throw new TypeError("Cannot apply a numeric index as object property");return getSafeProperty(n,s.getObjectProperty())}else throw new TypeError("Cannot apply index: unsupported type of object")}catch(o){throw errorTransform(o)}}}var name$1J="AccessorNode",dependencies$1J=["subset","Node"],createAccessorNode=factory(name$1J,dependencies$1J,t=>{var{subset:r,Node:a}=t,n=accessFactory({subset:r});function s(l){return!(isAccessorNode(l)||isArrayNode(l)||isConstantNode(l)||isFunctionNode(l)||isObjectNode(l)||isParenthesisNode(l)||isSymbolNode(l))}class o extends a{constructor(u,h){var c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(super(),!isNode(u))throw new TypeError('Node expected for parameter "object"');if(!isIndexNode(h))throw new TypeError('IndexNode expected for parameter "index"');this.object=u,this.index=h,this.optionalChaining=c}get name(){return this.index?this.index.isObjectProperty()?this.index.getObjectProperty():"":this.object.name||""}get type(){return name$1J}get isAccessorNode(){return!0}_compile(u,h){var c=this.object._compile(u,h),f=this.index._compile(u,h),d=this.optionalChaining,p=isAccessorNode(this.object)&&this.object.optionalChaining;if(this.index.isObjectProperty()){var v=this.index.getObjectProperty();return function(b,_,N){var M=N||{},C=c(b,_,M);if(d&&C==null){M.optionalShortCircuit=!0;return}if(!(p&&M!==null&&M!==void 0&&M.optionalShortCircuit))return getSafeProperty(C,v)}}else return function(b,_,N){var M=N||{},C=c(b,_,M);if(d&&C==null){M.optionalShortCircuit=!0;return}if(!(p&&M!==null&&M!==void 0&&M.optionalShortCircuit)){var $=f(b,_,C);return n(C,$)}}}forEach(u){u(this.object,"object",this),u(this.index,"index",this)}map(u){return new o(this._ifNode(u(this.object,"object",this)),this._ifNode(u(this.index,"index",this)),this.optionalChaining)}clone(){return new o(this.object,this.index,this.optionalChaining)}_toString(u){var h=this.object.toString(u);s(this.object)&&(h="("+h+")");var c=this.optionalChaining?this.index.dotNotation?"?":"?.":"";return h+c+this.index.toString(u)}_toHTML(u){var h=this.object.toHTML(u);return s(this.object)&&(h='<span class="math-parenthesis math-round-parenthesis">(</span>'+h+'<span class="math-parenthesis math-round-parenthesis">)</span>'),h+this.index.toHTML(u)}_toTex(u){var h=this.object.toTex(u);return s(this.object)&&(h="\\left(' + object + '\\right)"),h+this.index.toTex(u)}toJSON(){return{mathjs:name$1J,object:this.object,index:this.index,optionalChaining:this.optionalChaining}}static fromJSON(u){return new o(u.object,u.index,u.optionalChaining)}}return _defineProperty(o,"name",name$1J),o},{isClass:!0,isNode:!0}),name$1I="ArrayNode",dependencies$1I=["Node"],createArrayNode=factory(name$1I,dependencies$1I,t=>{var{Node:r}=t;class a extends r{constructor(s){if(super(),this.items=s||[],!Array.isArray(this.items)||!this.items.every(isNode))throw new TypeError("Array containing Nodes expected")}get type(){return name$1I}get isArrayNode(){return!0}_compile(s,o){var l=map$1(this.items,function(c){return c._compile(s,o)}),u=s.config.matrix!=="Array";if(u){var h=s.matrix;return function(f,d,p){return h(map$1(l,function(v){return v(f,d,p)}))}}else return function(f,d,p){return map$1(l,function(v){return v(f,d,p)})}}forEach(s){for(var o=0;o<this.items.length;o++){var l=this.items[o];s(l,"items["+o+"]",this)}}map(s){for(var o=[],l=0;l<this.items.length;l++)o[l]=this._ifNode(s(this.items[l],"items["+l+"]",this));return new a(o)}clone(){return new a(this.items.slice(0))}_toString(s){var o=this.items.map(function(l){return l.toString(s)});return"["+o.join(", ")+"]"}toJSON(){return{mathjs:name$1I,items:this.items}}static fromJSON(s){return new a(s.items)}_toHTML(s){var o=this.items.map(function(l){return l.toHTML(s)});return'<span class="math-parenthesis math-square-parenthesis">[</span>'+o.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-square-parenthesis">]</span>'}_toTex(s){function o(l,u){var h=l.some(isArrayNode)&&!l.every(isArrayNode),c=u||h,f=c?"&":"\\\\",d=l.map(function(p){return p.items?o(p.items,!u):p.toTex(s)}).join(f);return h||!c||c&&!u?"\\begin{bmatrix}"+d+"\\end{bmatrix}":d}return o(this.items,!1)}}return _defineProperty(a,"name",name$1I),a},{isClass:!0,isNode:!0});function assignFactory(t){var{subset:r,matrix:a}=t;return function(s,o,l){try{if(Array.isArray(s)){var u=a(s).subset(o,l).valueOf();return u.forEach((h,c)=>{s[c]=h}),s}else{if(s&&typeof s.subset=="function")return s.subset(o,l);if(typeof s=="string")return r(s,o,l);if(typeof s=="object"){if(!o.isObjectProperty())throw TypeError("Cannot apply a numeric index as object property");return setSafeProperty(s,o.getObjectProperty(),l),s}else throw new TypeError("Cannot apply index: unsupported type of object")}}catch(h){throw errorTransform(h)}}}var properties=[{AssignmentNode:{},FunctionAssignmentNode:{}},{ConditionalNode:{latexLeftParens:!1,latexRightParens:!1,latexParens:!1}},{"OperatorNode:or":{op:"or",associativity:"left",associativeWith:[]}},{"OperatorNode:xor":{op:"xor",associativity:"left",associativeWith:[]}},{"OperatorNode:and":{op:"and",associativity:"left",associativeWith:[]}},{"OperatorNode:bitOr":{op:"|",associativity:"left",associativeWith:[]}},{"OperatorNode:bitXor":{op:"^|",associativity:"left",associativeWith:[]}},{"OperatorNode:bitAnd":{op:"&",associativity:"left",associativeWith:[]}},{"OperatorNode:equal":{op:"==",associativity:"left",associativeWith:[]},"OperatorNode:unequal":{op:"!=",associativity:"left",associativeWith:[]},"OperatorNode:smaller":{op:"<",associativity:"left",associativeWith:[]},"OperatorNode:larger":{op:">",associativity:"left",associativeWith:[]},"OperatorNode:smallerEq":{op:"<=",associativity:"left",associativeWith:[]},"OperatorNode:largerEq":{op:">=",associativity:"left",associativeWith:[]},RelationalNode:{associativity:"left",associativeWith:[]}},{"OperatorNode:leftShift":{op:"<<",associativity:"left",associativeWith:[]},"OperatorNode:rightArithShift":{op:">>",associativity:"left",associativeWith:[]},"OperatorNode:rightLogShift":{op:">>>",associativity:"left",associativeWith:[]}},{"OperatorNode:to":{op:"to",associativity:"left",associativeWith:[]}},{RangeNode:{}},{"OperatorNode:add":{op:"+",associativity:"left",associativeWith:["OperatorNode:add","OperatorNode:subtract"]},"OperatorNode:subtract":{op:"-",associativity:"left",associativeWith:[]}},{"OperatorNode:multiply":{op:"*",associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","Operator:dotMultiply","Operator:dotDivide"]},"OperatorNode:divide":{op:"/",associativity:"left",associativeWith:[],latexLeftParens:!1,latexRightParens:!1,latexParens:!1},"OperatorNode:dotMultiply":{op:".*",associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","OperatorNode:dotMultiply","OperatorNode:doDivide"]},"OperatorNode:dotDivide":{op:"./",associativity:"left",associativeWith:[]},"OperatorNode:mod":{op:"mod",associativity:"left",associativeWith:[]}},{"OperatorNode:multiply":{associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","Operator:dotMultiply","Operator:dotDivide"]}},{"OperatorNode:unaryPlus":{op:"+",associativity:"right"},"OperatorNode:unaryMinus":{op:"-",associativity:"right"},"OperatorNode:bitNot":{op:"~",associativity:"right"},"OperatorNode:not":{op:"not",associativity:"right"}},{"OperatorNode:pow":{op:"^",associativity:"right",associativeWith:[],latexRightParens:!1},"OperatorNode:dotPow":{op:".^",associativity:"right",associativeWith:[]}},{"OperatorNode:nullish":{op:"??",associativity:"left",associativeWith:[]}},{"OperatorNode:factorial":{op:"!",associativity:"left"}},{"OperatorNode:ctranspose":{op:"'",associativity:"left"}}];function unwrapParen(t,r){if(!r||r!=="auto")return t;for(var a=t;isParenthesisNode(a);)a=a.content;return a}function getPrecedence(t,r,a,n){var s=t;r!=="keep"&&(s=t.getContent());for(var o=s.getIdentifier(),l=null,u=0;u<properties.length;u++)if(o in properties[u]){l=u;break}if(o==="OperatorNode:multiply"&&s.implicit&&a!=="show"){var h=unwrapParen(s.args[0],r);!(isConstantNode(h)&&n&&n.getIdentifier()==="OperatorNode:divide"&&rule2Node(unwrapParen(n.args[0],r)))&&!(h.getIdentifier()==="OperatorNode:divide"&&rule2Node(unwrapParen(h.args[0],r))&&isConstantNode(unwrapParen(h.args[1])))&&(l+=1)}return l}function getAssociativity(t,r){var a=t;r!=="keep"&&(a=t.getContent());var n=a.getIdentifier(),s=getPrecedence(a,r);if(s===null)return null;var o=properties[s][n];if(hasOwnProperty(o,"associativity")){if(o.associativity==="left")return"left";if(o.associativity==="right")return"right";throw Error("'"+n+"' has the invalid associativity '"+o.associativity+"'.")}return null}function isAssociativeWith(t,r,a){var n=a!=="keep"?t.getContent():t,s=a!=="keep"?t.getContent():r,o=n.getIdentifier(),l=s.getIdentifier(),u=getPrecedence(n,a);if(u===null)return null;var h=properties[u][o];if(hasOwnProperty(h,"associativeWith")&&h.associativeWith instanceof Array){for(var c=0;c<h.associativeWith.length;c++)if(h.associativeWith[c]===l)return!0;return!1}return null}function getOperator(t){var r="OperatorNode:"+t;for(var a of properties)if(r in a)return a[r].op;return null}var name$1H="AssignmentNode",dependencies$1H=["subset","?matrix","Node"],createAssignmentNode=factory(name$1H,dependencies$1H,t=>{var{subset:r,matrix:a,Node:n}=t,s=accessFactory({subset:r}),o=assignFactory({subset:r,matrix:a});function l(h,c,f){c||(c="keep");var d=getPrecedence(h,c,f),p=getPrecedence(h.value,c,f);return c==="all"||p!==null&&p<=d}class u extends n{constructor(c,f,d){if(super(),this.object=c,this.index=d?f:null,this.value=d||f,!isSymbolNode(c)&&!isAccessorNode(c))throw new TypeError('SymbolNode or AccessorNode expected as "object"');if(isSymbolNode(c)&&c.name==="end")throw new Error('Cannot assign to symbol "end"');if(this.index&&!isIndexNode(this.index))throw new TypeError('IndexNode expected as "index"');if(!isNode(this.value))throw new TypeError('Node expected as "value"')}get name(){return this.index?this.index.isObjectProperty()?this.index.getObjectProperty():"":this.object.name||""}get type(){return name$1H}get isAssignmentNode(){return!0}_compile(c,f){var d=this.object._compile(c,f),p=this.index?this.index._compile(c,f):null,v=this.value._compile(c,f),y=this.object.name;if(this.index)if(this.index.isObjectProperty()){var b=this.index.getObjectProperty();return function($,w,A){var X=d($,w,A),O=v($,w,A);return setSafeProperty(X,b,O),O}}else{if(isSymbolNode(this.object))return function($,w,A){var X=d($,w,A),O=v($,w,A),G=p($,w,X);return $.set(y,o(X,G,O)),O};var _=this.object.object._compile(c,f);if(this.object.index.isObjectProperty()){var N=this.object.index.getObjectProperty();return function($,w,A){var X=_($,w,A),O=getSafeProperty(X,N),G=p($,w,O),R=v($,w,A);return setSafeProperty(X,N,o(O,G,R)),R}}else{var M=this.object.index._compile(c,f);return function($,w,A){var X=_($,w,A),O=M($,w,X),G=s(X,O),R=p($,w,G),B=v($,w,A);return o(X,O,o(G,R,B)),B}}}else{if(!isSymbolNode(this.object))throw new TypeError("SymbolNode expected as object");return function($,w,A){var X=v($,w,A);return $.set(y,X),X}}}forEach(c){c(this.object,"object",this),this.index&&c(this.index,"index",this),c(this.value,"value",this)}map(c){var f=this._ifNode(c(this.object,"object",this)),d=this.index?this._ifNode(c(this.index,"index",this)):null,p=this._ifNode(c(this.value,"value",this));return new u(f,d,p)}clone(){return new u(this.object,this.index,this.value)}_toString(c){var f=this.object.toString(c),d=this.index?this.index.toString(c):"",p=this.value.toString(c);return l(this,c&&c.parenthesis,c&&c.implicit)&&(p="("+p+")"),f+d+" = "+p}toJSON(){return{mathjs:name$1H,object:this.object,index:this.index,value:this.value}}static fromJSON(c){return new u(c.object,c.index,c.value)}_toHTML(c){var f=this.object.toHTML(c),d=this.index?this.index.toHTML(c):"",p=this.value.toHTML(c);return l(this,c&&c.parenthesis,c&&c.implicit)&&(p='<span class="math-paranthesis math-round-parenthesis">(</span>'+p+'<span class="math-paranthesis math-round-parenthesis">)</span>'),f+d+'<span class="math-operator math-assignment-operator math-variable-assignment-operator math-binary-operator">=</span>'+p}_toTex(c){var f=this.object.toTex(c),d=this.index?this.index.toTex(c):"",p=this.value.toTex(c);return l(this,c&&c.parenthesis,c&&c.implicit)&&(p="\\left(".concat(p,"\\right)")),f+d+"="+p}}return _defineProperty(u,"name",name$1H),u},{isClass:!0,isNode:!0}),name$1G="BlockNode",dependencies$1G=["ResultSet","Node"],createBlockNode=factory(name$1G,dependencies$1G,t=>{var{ResultSet:r,Node:a}=t;class n extends a{constructor(o){if(super(),!Array.isArray(o))throw new Error("Array expected");this.blocks=o.map(function(l){var u=l&&l.node,h=l&&l.visible!==void 0?l.visible:!0;if(!isNode(u))throw new TypeError('Property "node" must be a Node');if(typeof h!="boolean")throw new TypeError('Property "visible" must be a boolean');return{node:u,visible:h}})}get type(){return name$1G}get isBlockNode(){return!0}_compile(o,l){var u=map$1(this.blocks,function(h){return{evaluate:h.node._compile(o,l),visible:h.visible}});return function(c,f,d){var p=[];return forEach$1(u,function(y){var b=y.evaluate(c,f,d);y.visible&&p.push(b)}),new r(p)}}forEach(o){for(var l=0;l<this.blocks.length;l++)o(this.blocks[l].node,"blocks["+l+"].node",this)}map(o){for(var l=[],u=0;u<this.blocks.length;u++){var h=this.blocks[u],c=this._ifNode(o(h.node,"blocks["+u+"].node",this));l[u]={node:c,visible:h.visible}}return new n(l)}clone(){var o=this.blocks.map(function(l){return{node:l.node,visible:l.visible}});return new n(o)}_toString(o){return this.blocks.map(function(l){return l.node.toString(o)+(l.visible?"":";")}).join(`
`)}toJSON(){return{mathjs:name$1G,blocks:this.blocks}}static fromJSON(o){return new n(o.blocks)}_toHTML(o){return this.blocks.map(function(l){return l.node.toHTML(o)+(l.visible?"":'<span class="math-separator">;</span>')}).join('<span class="math-separator"><br /></span>')}_toTex(o){return this.blocks.map(function(l){return l.node.toTex(o)+(l.visible?"":";")}).join(`\\;\\;
`)}}return _defineProperty(n,"name",name$1G),n},{isClass:!0,isNode:!0}),name$1F="ConditionalNode",dependencies$1F=["Node"],createConditionalNode=factory(name$1F,dependencies$1F,t=>{var{Node:r}=t;function a(s){if(typeof s=="number"||typeof s=="boolean"||typeof s=="string")return!!s;if(s){if(isBigNumber(s))return!s.isZero();if(isComplex(s))return!!(s.re||s.im);if(isUnit(s))return!!s.value}if(s==null)return!1;throw new TypeError('Unsupported type of condition "'+typeOf$1(s)+'"')}class n extends r{constructor(o,l,u){if(super(),!isNode(o))throw new TypeError("Parameter condition must be a Node");if(!isNode(l))throw new TypeError("Parameter trueExpr must be a Node");if(!isNode(u))throw new TypeError("Parameter falseExpr must be a Node");this.condition=o,this.trueExpr=l,this.falseExpr=u}get type(){return name$1F}get isConditionalNode(){return!0}_compile(o,l){var u=this.condition._compile(o,l),h=this.trueExpr._compile(o,l),c=this.falseExpr._compile(o,l);return function(d,p,v){return a(u(d,p,v))?h(d,p,v):c(d,p,v)}}forEach(o){o(this.condition,"condition",this),o(this.trueExpr,"trueExpr",this),o(this.falseExpr,"falseExpr",this)}map(o){return new n(this._ifNode(o(this.condition,"condition",this)),this._ifNode(o(this.trueExpr,"trueExpr",this)),this._ifNode(o(this.falseExpr,"falseExpr",this)))}clone(){return new n(this.condition,this.trueExpr,this.falseExpr)}_toString(o){var l=o&&o.parenthesis?o.parenthesis:"keep",u=getPrecedence(this,l,o&&o.implicit),h=this.condition.toString(o),c=getPrecedence(this.condition,l,o&&o.implicit);(l==="all"||this.condition.type==="OperatorNode"||c!==null&&c<=u)&&(h="("+h+")");var f=this.trueExpr.toString(o),d=getPrecedence(this.trueExpr,l,o&&o.implicit);(l==="all"||this.trueExpr.type==="OperatorNode"||d!==null&&d<=u)&&(f="("+f+")");var p=this.falseExpr.toString(o),v=getPrecedence(this.falseExpr,l,o&&o.implicit);return(l==="all"||this.falseExpr.type==="OperatorNode"||v!==null&&v<=u)&&(p="("+p+")"),h+" ? "+f+" : "+p}toJSON(){return{mathjs:name$1F,condition:this.condition,trueExpr:this.trueExpr,falseExpr:this.falseExpr}}static fromJSON(o){return new n(o.condition,o.trueExpr,o.falseExpr)}_toHTML(o){var l=o&&o.parenthesis?o.parenthesis:"keep",u=getPrecedence(this,l,o&&o.implicit),h=this.condition.toHTML(o),c=getPrecedence(this.condition,l,o&&o.implicit);(l==="all"||this.condition.type==="OperatorNode"||c!==null&&c<=u)&&(h='<span class="math-parenthesis math-round-parenthesis">(</span>'+h+'<span class="math-parenthesis math-round-parenthesis">)</span>');var f=this.trueExpr.toHTML(o),d=getPrecedence(this.trueExpr,l,o&&o.implicit);(l==="all"||this.trueExpr.type==="OperatorNode"||d!==null&&d<=u)&&(f='<span class="math-parenthesis math-round-parenthesis">(</span>'+f+'<span class="math-parenthesis math-round-parenthesis">)</span>');var p=this.falseExpr.toHTML(o),v=getPrecedence(this.falseExpr,l,o&&o.implicit);return(l==="all"||this.falseExpr.type==="OperatorNode"||v!==null&&v<=u)&&(p='<span class="math-parenthesis math-round-parenthesis">(</span>'+p+'<span class="math-parenthesis math-round-parenthesis">)</span>'),h+'<span class="math-operator math-conditional-operator">?</span>'+f+'<span class="math-operator math-conditional-operator">:</span>'+p}_toTex(o){return"\\begin{cases} {"+this.trueExpr.toTex(o)+"}, &\\quad{\\text{if }\\;"+this.condition.toTex(o)+"}\\\\{"+this.falseExpr.toTex(o)+"}, &\\quad{\\text{otherwise}}\\end{cases}"}}return _defineProperty(n,"name",name$1F),n},{isClass:!0,isNode:!0}),dist,hasRequiredDist;function requireDist(){if(hasRequiredDist)return dist;hasRequiredDist=1;var t=Object.assign||function(s){for(var o=1;o<arguments.length;o++){var l=arguments[o];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(s[u]=l[u])}return s},r={"{":"\\{","}":"\\}","\\":"\\textbackslash{}","#":"\\#",$:"\\$","%":"\\%","&":"\\&","^":"\\textasciicircum{}",_:"\\_","~":"\\textasciitilde{}"},a={"":"\\--","":"\\---"," ":"~","	":"\\qquad{}","\r\n":"\\newline{}","\n":"\\newline{}"},n=function(o,l){return t({},o,l)};return dist=function(s){for(var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l=o.preserveFormatting,u=l===void 0?!1:l,h=o.escapeMapFn,c=h===void 0?n:h,f=String(s),d="",p=c(t({},r),u?t({},a):{}),v=Object.keys(p),y=function(){var _=!1;v.forEach(function(N,M){_||f.length>=N.length&&f.slice(0,N.length)===N&&(d+=p[v[M]],f=f.slice(N.length,f.length),_=!0)}),_||(d+=f.slice(0,1),f=f.slice(1,f.length))};f;)y();return d},dist}var distExports=requireDist();const escapeLatexLib=getDefaultExportFromCjs(distExports);var latexSymbols={Alpha:"A",alpha:"\\alpha",Beta:"B",beta:"\\beta",Gamma:"\\Gamma",gamma:"\\gamma",Delta:"\\Delta",delta:"\\delta",Epsilon:"E",epsilon:"\\epsilon",varepsilon:"\\varepsilon",Zeta:"Z",zeta:"\\zeta",Eta:"H",eta:"\\eta",Theta:"\\Theta",theta:"\\theta",vartheta:"\\vartheta",Iota:"I",iota:"\\iota",Kappa:"K",kappa:"\\kappa",varkappa:"\\varkappa",Lambda:"\\Lambda",lambda:"\\lambda",Mu:"M",mu:"\\mu",Nu:"N",nu:"\\nu",Xi:"\\Xi",xi:"\\xi",Omicron:"O",omicron:"o",Pi:"\\Pi",pi:"\\pi",varpi:"\\varpi",Rho:"P",rho:"\\rho",varrho:"\\varrho",Sigma:"\\Sigma",sigma:"\\sigma",varsigma:"\\varsigma",Tau:"T",tau:"\\tau",Upsilon:"\\Upsilon",upsilon:"\\upsilon",Phi:"\\Phi",phi:"\\phi",varphi:"\\varphi",Chi:"X",chi:"\\chi",Psi:"\\Psi",psi:"\\psi",Omega:"\\Omega",omega:"\\omega",true:"\\mathrm{True}",false:"\\mathrm{False}",i:"i",inf:"\\infty",Inf:"\\infty",infinity:"\\infty",Infinity:"\\infty",oo:"\\infty",lim:"\\lim",undefined:"\\mathbf{?}"},latexOperators={transpose:"^\\top",ctranspose:"^H",factorial:"!",pow:"^",dotPow:".^\\wedge",unaryPlus:"+",unaryMinus:"-",bitNot:"\\~",not:"\\neg",multiply:"\\cdot",divide:"\\frac",dotMultiply:".\\cdot",dotDivide:".:",mod:"\\mod",add:"+",subtract:"-",to:"\\rightarrow",leftShift:"<<",rightArithShift:">>",rightLogShift:">>>",equal:"=",unequal:"\\neq",smaller:"<",larger:">",smallerEq:"\\leq",largerEq:"\\geq",bitAnd:"\\&",bitXor:"\\underline{|}",bitOr:"|",and:"\\wedge",xor:"\\veebar",or:"\\vee"},latexFunctions={abs:{1:"\\left|${args[0]}\\right|"},add:{2:"\\left(${args[0]}".concat(latexOperators.add,"${args[1]}\\right)")},cbrt:{1:"\\sqrt[3]{${args[0]}}"},ceil:{1:"\\left\\lceil${args[0]}\\right\\rceil"},cube:{1:"\\left(${args[0]}\\right)^3"},divide:{2:"\\frac{${args[0]}}{${args[1]}}"},dotDivide:{2:"\\left(${args[0]}".concat(latexOperators.dotDivide,"${args[1]}\\right)")},dotMultiply:{2:"\\left(${args[0]}".concat(latexOperators.dotMultiply,"${args[1]}\\right)")},dotPow:{2:"\\left(${args[0]}".concat(latexOperators.dotPow,"${args[1]}\\right)")},exp:{1:"\\exp\\left(${args[0]}\\right)"},expm1:"\\left(e".concat(latexOperators.pow,"{${args[0]}}-1\\right)"),fix:{1:"\\mathrm{${name}}\\left(${args[0]}\\right)"},floor:{1:"\\left\\lfloor${args[0]}\\right\\rfloor"},fraction:{2:"\\frac{${args[0]}}{${args[1]}}"},gcd:"\\gcd\\left(${args}\\right)",hypot:"\\hypot\\left(${args}\\right)",log:{1:"\\ln\\left(${args[0]}\\right)",2:"\\log_{${args[1]}}\\left(${args[0]}\\right)"},log10:{1:"\\log_{10}\\left(${args[0]}\\right)"},log1p:{1:"\\ln\\left(${args[0]}+1\\right)",2:"\\log_{${args[1]}}\\left(${args[0]}+1\\right)"},log2:"\\log_{2}\\left(${args[0]}\\right)",mod:{2:"\\left(${args[0]}".concat(latexOperators.mod,"${args[1]}\\right)")},multiply:{2:"\\left(${args[0]}".concat(latexOperators.multiply,"${args[1]}\\right)")},norm:{1:"\\left\\|${args[0]}\\right\\|",2:void 0},nthRoot:{2:"\\sqrt[${args[1]}]{${args[0]}}"},nthRoots:{2:"\\{y : y^${args[1]} = {${args[0]}}\\}"},pow:{2:"\\left(${args[0]}\\right)".concat(latexOperators.pow,"{${args[1]}}")},round:{1:"\\left\\lfloor${args[0]}\\right\\rceil",2:void 0},sign:{1:"\\mathrm{${name}}\\left(${args[0]}\\right)"},sqrt:{1:"\\sqrt{${args[0]}}"},square:{1:"\\left(${args[0]}\\right)^2"},subtract:{2:"\\left(${args[0]}".concat(latexOperators.subtract,"${args[1]}\\right)")},unaryMinus:{1:"".concat(latexOperators.unaryMinus,"\\left(${args[0]}\\right)")},unaryPlus:{1:"".concat(latexOperators.unaryPlus,"\\left(${args[0]}\\right)")},bitAnd:{2:"\\left(${args[0]}".concat(latexOperators.bitAnd,"${args[1]}\\right)")},bitNot:{1:latexOperators.bitNot+"\\left(${args[0]}\\right)"},bitOr:{2:"\\left(${args[0]}".concat(latexOperators.bitOr,"${args[1]}\\right)")},bitXor:{2:"\\left(${args[0]}".concat(latexOperators.bitXor,"${args[1]}\\right)")},leftShift:{2:"\\left(${args[0]}".concat(latexOperators.leftShift,"${args[1]}\\right)")},rightArithShift:{2:"\\left(${args[0]}".concat(latexOperators.rightArithShift,"${args[1]}\\right)")},rightLogShift:{2:"\\left(${args[0]}".concat(latexOperators.rightLogShift,"${args[1]}\\right)")},bellNumbers:{1:"\\mathrm{B}_{${args[0]}}"},catalan:{1:"\\mathrm{C}_{${args[0]}}"},stirlingS2:{2:"\\mathrm{S}\\left(${args}\\right)"},arg:{1:"\\arg\\left(${args[0]}\\right)"},conj:{1:"\\left(${args[0]}\\right)^*"},im:{1:"\\Im\\left\\lbrace${args[0]}\\right\\rbrace"},re:{1:"\\Re\\left\\lbrace${args[0]}\\right\\rbrace"},and:{2:"\\left(${args[0]}".concat(latexOperators.and,"${args[1]}\\right)")},not:{1:latexOperators.not+"\\left(${args[0]}\\right)"},or:{2:"\\left(${args[0]}".concat(latexOperators.or,"${args[1]}\\right)")},xor:{2:"\\left(${args[0]}".concat(latexOperators.xor,"${args[1]}\\right)")},cross:{2:"\\left(${args[0]}\\right)\\times\\left(${args[1]}\\right)"},ctranspose:{1:"\\left(${args[0]}\\right)".concat(latexOperators.ctranspose)},det:{1:"\\det\\left(${args[0]}\\right)"},dot:{2:"\\left(${args[0]}\\cdot${args[1]}\\right)"},expm:{1:"\\exp\\left(${args[0]}\\right)"},inv:{1:"\\left(${args[0]}\\right)^{-1}"},pinv:{1:"\\left(${args[0]}\\right)^{+}"},sqrtm:{1:"{${args[0]}}".concat(latexOperators.pow,"{\\frac{1}{2}}")},trace:{1:"\\mathrm{tr}\\left(${args[0]}\\right)"},transpose:{1:"\\left(${args[0]}\\right)".concat(latexOperators.transpose)},combinations:{2:"\\binom{${args[0]}}{${args[1]}}"},combinationsWithRep:{2:"\\left(\\!\\!{\\binom{${args[0]}}{${args[1]}}}\\!\\!\\right)"},factorial:{1:"\\left(${args[0]}\\right)".concat(latexOperators.factorial)},gamma:{1:"\\Gamma\\left(${args[0]}\\right)"},lgamma:{1:"\\ln\\Gamma\\left(${args[0]}\\right)"},equal:{2:"\\left(${args[0]}".concat(latexOperators.equal,"${args[1]}\\right)")},larger:{2:"\\left(${args[0]}".concat(latexOperators.larger,"${args[1]}\\right)")},largerEq:{2:"\\left(${args[0]}".concat(latexOperators.largerEq,"${args[1]}\\right)")},smaller:{2:"\\left(${args[0]}".concat(latexOperators.smaller,"${args[1]}\\right)")},smallerEq:{2:"\\left(${args[0]}".concat(latexOperators.smallerEq,"${args[1]}\\right)")},unequal:{2:"\\left(${args[0]}".concat(latexOperators.unequal,"${args[1]}\\right)")},erf:{1:"erf\\left(${args[0]}\\right)"},max:"\\max\\left(${args}\\right)",min:"\\min\\left(${args}\\right)",variance:"\\mathrm{Var}\\left(${args}\\right)",acos:{1:"\\cos^{-1}\\left(${args[0]}\\right)"},acosh:{1:"\\cosh^{-1}\\left(${args[0]}\\right)"},acot:{1:"\\cot^{-1}\\left(${args[0]}\\right)"},acoth:{1:"\\coth^{-1}\\left(${args[0]}\\right)"},acsc:{1:"\\csc^{-1}\\left(${args[0]}\\right)"},acsch:{1:"\\mathrm{csch}^{-1}\\left(${args[0]}\\right)"},asec:{1:"\\sec^{-1}\\left(${args[0]}\\right)"},asech:{1:"\\mathrm{sech}^{-1}\\left(${args[0]}\\right)"},asin:{1:"\\sin^{-1}\\left(${args[0]}\\right)"},asinh:{1:"\\sinh^{-1}\\left(${args[0]}\\right)"},atan:{1:"\\tan^{-1}\\left(${args[0]}\\right)"},atan2:{2:"\\mathrm{atan2}\\left(${args}\\right)"},atanh:{1:"\\tanh^{-1}\\left(${args[0]}\\right)"},cos:{1:"\\cos\\left(${args[0]}\\right)"},cosh:{1:"\\cosh\\left(${args[0]}\\right)"},cot:{1:"\\cot\\left(${args[0]}\\right)"},coth:{1:"\\coth\\left(${args[0]}\\right)"},csc:{1:"\\csc\\left(${args[0]}\\right)"},csch:{1:"\\mathrm{csch}\\left(${args[0]}\\right)"},sec:{1:"\\sec\\left(${args[0]}\\right)"},sech:{1:"\\mathrm{sech}\\left(${args[0]}\\right)"},sin:{1:"\\sin\\left(${args[0]}\\right)"},sinh:{1:"\\sinh\\left(${args[0]}\\right)"},tan:{1:"\\tan\\left(${args[0]}\\right)"},tanh:{1:"\\tanh\\left(${args[0]}\\right)"},to:{2:"\\left(${args[0]}".concat(latexOperators.to,"${args[1]}\\right)")},numeric:function(r,a){return r.args[0].toTex()},number:{0:"0",1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)${args[1]}\\right)"},string:{0:'\\mathtt{""}',1:"\\mathrm{string}\\left(${args[0]}\\right)"},bignumber:{0:"0",1:"\\left(${args[0]}\\right)"},bigint:{0:"0",1:"\\left(${args[0]}\\right)"},complex:{0:"0",1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)+".concat(latexSymbols.i,"\\cdot\\left(${args[1]}\\right)\\right)")},matrix:{0:"\\begin{bmatrix}\\end{bmatrix}",1:"\\left(${args[0]}\\right)",2:"\\left(${args[0]}\\right)"},sparse:{0:"\\begin{bsparse}\\end{bsparse}",1:"\\left(${args[0]}\\right)"},unit:{1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)${args[1]}\\right)"}},defaultTemplate="\\mathrm{${name}}\\left(${args}\\right)",latexUnits={deg:"^\\circ"};function escapeLatex(t){return escapeLatexLib(t,{preserveFormatting:!0})}function toSymbol(t,r){return r=typeof r>"u"?!1:r,r?hasOwnProperty(latexUnits,t)?latexUnits[t]:"\\mathrm{"+escapeLatex(t)+"}":hasOwnProperty(latexSymbols,t)?latexSymbols[t]:escapeLatex(t)}var name$1E="ConstantNode",dependencies$1E=["Node","isBounded"],createConstantNode=factory(name$1E,dependencies$1E,t=>{var{Node:r,isBounded:a}=t;class n extends r{constructor(o){super(),this.value=o}get type(){return name$1E}get isConstantNode(){return!0}_compile(o,l){var u=this.value;return function(){return u}}forEach(o){}map(o){return this.clone()}clone(){return new n(this.value)}_toString(o){return format$1(this.value,o)}_toHTML(o){var l=this._toString(o);switch(typeOf$1(this.value)){case"number":case"bigint":case"BigNumber":case"Fraction":return'<span class="math-number">'+l+"</span>";case"string":return'<span class="math-string">'+l+"</span>";case"boolean":return'<span class="math-boolean">'+l+"</span>";case"null":return'<span class="math-null-symbol">'+l+"</span>";case"undefined":return'<span class="math-undefined">'+l+"</span>";default:return'<span class="math-symbol">'+l+"</span>"}}toJSON(){return{mathjs:name$1E,value:this.value}}static fromJSON(o){return new n(o.value)}_toTex(o){var l=this._toString(o),u=typeOf$1(this.value);switch(u){case"string":return"\\mathtt{"+escapeLatex(l)+"}";case"number":case"BigNumber":{if(!a(this.value))return this.value.valueOf()<0?"-\\infty":"\\infty";var h=l.toLowerCase().indexOf("e");return h!==-1?l.substring(0,h)+"\\cdot10^{"+l.substring(h+1)+"}":l}case"bigint":return l.toString();case"Fraction":return this.value.toLatex();default:return l}}}return _defineProperty(n,"name",name$1E),n},{isClass:!0,isNode:!0}),name$1D="FunctionAssignmentNode",dependencies$1D=["typed","Node"],createFunctionAssignmentNode=factory(name$1D,dependencies$1D,t=>{var{typed:r,Node:a}=t;function n(o,l,u){var h=getPrecedence(o,l,u),c=getPrecedence(o.expr,l,u);return l==="all"||c!==null&&c<=h}class s extends a{constructor(l,u,h){if(super(),typeof l!="string")throw new TypeError('String expected for parameter "name"');if(!Array.isArray(u))throw new TypeError('Array containing strings or objects expected for parameter "params"');if(!isNode(h))throw new TypeError('Node expected for parameter "expr"');if(keywords.has(l))throw new Error('Illegal function name, "'+l+'" is a reserved keyword');var c=new Set;for(var f of u){var d=typeof f=="string"?f:f.name;if(c.has(d))throw new Error('Duplicate parameter name "'.concat(d,'"'));c.add(d)}this.name=l,this.params=u.map(function(p){return p&&p.name||p}),this.types=u.map(function(p){return p&&p.type||"any"}),this.expr=h}get type(){return name$1D}get isFunctionAssignmentNode(){return!0}_compile(l,u){var h=Object.create(u);forEach$1(this.params,function(b){h[b]=!0});var c=this.expr,f=c._compile(l,h),d=this.name,p=this.params,v=join(this.types,","),y=d+"("+join(this.params,", ")+")";return function(_,N,M){var C={};C[v]=function(){for(var w=Object.create(N),A=0;A<p.length;A++)w[p[A]]=arguments[A];return f(_,w,M)};var $=r(d,C);return $.syntax=y,$.expr=c.toString(),_.set(d,$),$}}forEach(l){l(this.expr,"expr",this)}map(l){var u=this._ifNode(l(this.expr,"expr",this));return new s(this.name,this.params.slice(0),u)}clone(){return new s(this.name,this.params.slice(0),this.expr)}_toString(l){var u=l&&l.parenthesis?l.parenthesis:"keep",h=this.expr.toString(l);return n(this,u,l&&l.implicit)&&(h="("+h+")"),this.name+"("+this.params.join(", ")+") = "+h}toJSON(){var l=this.types;return{mathjs:name$1D,name:this.name,params:this.params.map(function(u,h){return{name:u,type:l[h]}}),expr:this.expr}}static fromJSON(l){return new s(l.name,l.params,l.expr)}_toHTML(l){for(var u=l&&l.parenthesis?l.parenthesis:"keep",h=[],c=0;c<this.params.length;c++)h.push('<span class="math-symbol math-parameter">'+escape$1(this.params[c])+"</span>");var f=this.expr.toHTML(l);return n(this,u,l&&l.implicit)&&(f='<span class="math-parenthesis math-round-parenthesis">(</span>'+f+'<span class="math-parenthesis math-round-parenthesis">)</span>'),'<span class="math-function">'+escape$1(this.name)+'</span><span class="math-parenthesis math-round-parenthesis">(</span>'+h.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-round-parenthesis">)</span><span class="math-operator math-assignment-operator math-variable-assignment-operator math-binary-operator">=</span>'+f}_toTex(l){var u=l&&l.parenthesis?l.parenthesis:"keep",h=this.expr.toTex(l);return n(this,u,l&&l.implicit)&&(h="\\left(".concat(h,"\\right)")),"\\mathrm{"+this.name+"}\\left("+this.params.map(toSymbol).join(",")+"\\right)="+h}}return _defineProperty(s,"name",name$1D),s},{isClass:!0,isNode:!0}),name$1C="IndexNode",dependencies$1C=["Node","size"],createIndexNode=factory(name$1C,dependencies$1C,t=>{var{Node:r,size:a}=t;class n extends r{constructor(o,l){if(super(),this.dimensions=o,this.dotNotation=l||!1,!Array.isArray(o)||!o.every(isNode))throw new TypeError('Array containing Nodes expected for parameter "dimensions"');if(this.dotNotation&&!this.isObjectProperty())throw new Error("dotNotation only applicable for object properties")}get type(){return name$1C}get isIndexNode(){return!0}_compile(o,l){var u=map$1(this.dimensions,function(c,f){var d=c.filter(y=>y.isSymbolNode&&y.name==="end").length>0;if(d){var p=Object.create(l);p.end=!0;var v=c._compile(o,p);return function(b,_,N){if(!isMatrix(N)&&!isArray(N)&&!isString(N))throw new TypeError('Cannot resolve "end": context must be a Matrix, Array, or string but is '+typeOf$1(N));var M=a(N),C=Object.create(_);return C.end=M[f],v(b,C,N)}}else return c._compile(o,l)}),h=getSafeProperty(o,"index");return function(f,d,p){var v=map$1(u,function(y){return y(f,d,p)});return h(...v)}}forEach(o){for(var l=0;l<this.dimensions.length;l++)o(this.dimensions[l],"dimensions["+l+"]",this)}map(o){for(var l=[],u=0;u<this.dimensions.length;u++)l[u]=this._ifNode(o(this.dimensions[u],"dimensions["+u+"]",this));return new n(l,this.dotNotation)}clone(){return new n(this.dimensions.slice(0),this.dotNotation)}isObjectProperty(){return this.dimensions.length===1&&isConstantNode(this.dimensions[0])&&typeof this.dimensions[0].value=="string"}getObjectProperty(){return this.isObjectProperty()?this.dimensions[0].value:null}_toString(o){return this.dotNotation?"."+this.getObjectProperty():"["+this.dimensions.join(", ")+"]"}toJSON(){return{mathjs:name$1C,dimensions:this.dimensions,dotNotation:this.dotNotation}}static fromJSON(o){return new n(o.dimensions,o.dotNotation)}_toHTML(o){for(var l=[],u=0;u<this.dimensions.length;u++)l[u]=this.dimensions[u].toHTML();return this.dotNotation?'<span class="math-operator math-accessor-operator">.</span><span class="math-symbol math-property">'+escape$1(this.getObjectProperty())+"</span>":'<span class="math-parenthesis math-square-parenthesis">[</span>'+l.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-square-parenthesis">]</span>'}_toTex(o){var l=this.dimensions.map(function(u){return u.toTex(o)});return this.dotNotation?"."+this.getObjectProperty():"_{"+l.join(",")+"}"}}return _defineProperty(n,"name",name$1C),n},{isClass:!0,isNode:!0}),name$1B="ObjectNode",dependencies$1B=["Node"],createObjectNode=factory(name$1B,dependencies$1B,t=>{var{Node:r}=t;class a extends r{constructor(s){if(super(),this.properties=s||{},s&&(typeof s!="object"||!Object.keys(s).every(function(o){return isNode(s[o])})))throw new TypeError("Object containing Nodes expected")}get type(){return name$1B}get isObjectNode(){return!0}_compile(s,o){var l={};for(var u in this.properties)if(hasOwnProperty(this.properties,u)){var h=stringify(u),c=JSON.parse(h),f=getSafeProperty(this.properties,u);l[c]=f._compile(s,o)}return function(p,v,y){var b={};for(var _ in l)hasOwnProperty(l,_)&&(b[_]=l[_](p,v,y));return b}}forEach(s){for(var o in this.properties)hasOwnProperty(this.properties,o)&&s(this.properties[o],"properties["+stringify(o)+"]",this)}map(s){var o={};for(var l in this.properties)hasOwnProperty(this.properties,l)&&(o[l]=this._ifNode(s(this.properties[l],"properties["+stringify(l)+"]",this)));return new a(o)}clone(){var s={};for(var o in this.properties)hasOwnProperty(this.properties,o)&&(s[o]=this.properties[o]);return new a(s)}_toString(s){var o=[];for(var l in this.properties)hasOwnProperty(this.properties,l)&&o.push(stringify(l)+": "+this.properties[l].toString(s));return"{"+o.join(", ")+"}"}toJSON(){return{mathjs:name$1B,properties:this.properties}}static fromJSON(s){return new a(s.properties)}_toHTML(s){var o=[];for(var l in this.properties)hasOwnProperty(this.properties,l)&&o.push('<span class="math-symbol math-property">'+escape$1(l)+'</span><span class="math-operator math-assignment-operator math-property-assignment-operator math-binary-operator">:</span>'+this.properties[l].toHTML(s));return'<span class="math-parenthesis math-curly-parenthesis">{</span>'+o.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-curly-parenthesis">}</span>'}_toTex(s){var o=[];for(var l in this.properties)hasOwnProperty(this.properties,l)&&o.push("\\mathbf{"+l+":} & "+this.properties[l].toTex(s)+"\\\\");var u="\\left\\{\\begin{array}{ll}"+o.join(`
`)+"\\end{array}\\right\\}";return u}}return _defineProperty(a,"name",name$1B),a},{isClass:!0,isNode:!0});function createSubScope(t,r){return new PartitionedMap(t,new ObjectWrappingMap(r),new Set(Object.keys(r)))}var name$1A="OperatorNode",dependencies$1A=["Node"],createOperatorNode=factory(name$1A,dependencies$1A,t=>{var{Node:r}=t;function a(o,l){var u=o;if(l==="auto")for(;isParenthesisNode(u);)u=u.content;return isConstantNode(u)?!0:isOperatorNode(u)?a(u.args[0],l):!1}function n(o,l,u,h,c){var f=getPrecedence(o,l,u),d=getAssociativity(o,l);if(l==="all"||h.length>2&&o.getIdentifier()!=="OperatorNode:add"&&o.getIdentifier()!=="OperatorNode:multiply")return h.map(function(R){switch(R.getContent().type){case"ArrayNode":case"ConstantNode":case"SymbolNode":case"ParenthesisNode":return!1;default:return!0}});var p;switch(h.length){case 0:p=[];break;case 1:{var v=getPrecedence(h[0],l,u,o);if(c&&v!==null){var y,b;if(l==="keep"?(y=h[0].getIdentifier(),b=o.getIdentifier()):(y=h[0].getContent().getIdentifier(),b=o.getContent().getIdentifier()),properties[f][b].latexLeftParens===!1){p=[!1];break}if(properties[v][y].latexParens===!1){p=[!1];break}}if(v===null){p=[!1];break}if(v<=f){p=[!0];break}p=[!1]}break;case 2:{var _,N=getPrecedence(h[0],l,u,o),M=isAssociativeWith(o,h[0],l);N===null?_=!1:N===f&&d==="right"&&!M||N<f?_=!0:_=!1;var C,$=getPrecedence(h[1],l,u,o),w=isAssociativeWith(o,h[1],l);if($===null?C=!1:$===f&&d==="left"&&!w||$<f?C=!0:C=!1,c){var A,X,O;l==="keep"?(A=o.getIdentifier(),X=o.args[0].getIdentifier(),O=o.args[1].getIdentifier()):(A=o.getContent().getIdentifier(),X=o.args[0].getContent().getIdentifier(),O=o.args[1].getContent().getIdentifier()),N!==null&&(properties[f][A].latexLeftParens===!1&&(_=!1),properties[N][X].latexParens===!1&&(_=!1)),$!==null&&(properties[f][A].latexRightParens===!1&&(C=!1),properties[$][O].latexParens===!1&&(C=!1))}p=[_,C]}break;default:(o.getIdentifier()==="OperatorNode:add"||o.getIdentifier()==="OperatorNode:multiply")&&(p=h.map(function(R){var B=getPrecedence(R,l,u,o),F=isAssociativeWith(o,R,l),U=getAssociativity(R,l);return B===null?!1:f===B&&d===U&&!F?!0:B<f}));break}if(h.length>=2&&o.getIdentifier()==="OperatorNode:multiply"&&o.implicit&&l!=="all"&&u==="hide")for(var G=1;G<p.length;++G)a(h[G],l)&&!p[G-1]&&(l!=="keep"||!isParenthesisNode(h[G-1]))&&(p[G]=!0);return p}class s extends r{constructor(l,u,h,c,f){if(super(),typeof l!="string")throw new TypeError('string expected for parameter "op"');if(typeof u!="string")throw new TypeError('string expected for parameter "fn"');if(!Array.isArray(h)||!h.every(isNode))throw new TypeError('Array containing Nodes expected for parameter "args"');this.implicit=c===!0,this.isPercentage=f===!0,this.op=l,this.fn=u,this.args=h||[]}get type(){return name$1A}get isOperatorNode(){return!0}_compile(l,u){if(typeof this.fn!="string"||!isSafeMethod(l,this.fn))throw l[this.fn]?new Error('No access to function "'+this.fn+'"'):new Error("Function "+this.fn+' missing in provided namespace "math"');var h=getSafeProperty(l,this.fn),c=map$1(this.args,function(y){return y._compile(l,u)});if(typeof h=="function"&&h.rawArgs===!0){var f=this.args;return function(b,_,N){return h(f,l,createSubScope(b,_))}}else if(c.length===1){var d=c[0];return function(b,_,N){return h(d(b,_,N))}}else if(c.length===2){var p=c[0],v=c[1];return function(b,_,N){return h(p(b,_,N),v(b,_,N))}}else return function(b,_,N){return h.apply(null,map$1(c,function(M){return M(b,_,N)}))}}forEach(l){for(var u=0;u<this.args.length;u++)l(this.args[u],"args["+u+"]",this)}map(l){for(var u=[],h=0;h<this.args.length;h++)u[h]=this._ifNode(l(this.args[h],"args["+h+"]",this));return new s(this.op,this.fn,u,this.implicit,this.isPercentage)}clone(){return new s(this.op,this.fn,this.args.slice(0),this.implicit,this.isPercentage)}isUnary(){return this.args.length===1}isBinary(){return this.args.length===2}_toString(l){var u=l&&l.parenthesis?l.parenthesis:"keep",h=l&&l.implicit?l.implicit:"hide",c=this.args,f=n(this,u,h,c,!1);if(c.length===1){var d=getAssociativity(this,u),p=c[0].toString(l);f[0]&&(p="("+p+")");var v=/[a-zA-Z]+/.test(this.op);return d==="right"?this.op+(v?" ":"")+p:d==="left"?p+(v?" ":"")+this.op:p+this.op}else if(c.length===2){var y=c[0].toString(l),b=c[1].toString(l);return f[0]&&(y="("+y+")"),f[1]&&(b="("+b+")"),this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&h==="hide"?y+" "+b:y+" "+this.op+" "+b}else if(c.length>2&&(this.getIdentifier()==="OperatorNode:add"||this.getIdentifier()==="OperatorNode:multiply")){var _=c.map(function(N,M){return N=N.toString(l),f[M]&&(N="("+N+")"),N});return this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&h==="hide"?_.join(" "):_.join(" "+this.op+" ")}else return this.fn+"("+this.args.join(", ")+")"}toJSON(){return{mathjs:name$1A,op:this.op,fn:this.fn,args:this.args,implicit:this.implicit,isPercentage:this.isPercentage}}static fromJSON(l){return new s(l.op,l.fn,l.args,l.implicit,l.isPercentage)}_toHTML(l){var u=l&&l.parenthesis?l.parenthesis:"keep",h=l&&l.implicit?l.implicit:"hide",c=this.args,f=n(this,u,h,c,!1);if(c.length===1){var d=getAssociativity(this,u),p=c[0].toHTML(l);return f[0]&&(p='<span class="math-parenthesis math-round-parenthesis">(</span>'+p+'<span class="math-parenthesis math-round-parenthesis">)</span>'),d==="right"?'<span class="math-operator math-unary-operator math-lefthand-unary-operator">'+escape$1(this.op)+"</span>"+p:p+'<span class="math-operator math-unary-operator math-righthand-unary-operator">'+escape$1(this.op)+"</span>"}else if(c.length===2){var v=c[0].toHTML(l),y=c[1].toHTML(l);return f[0]&&(v='<span class="math-parenthesis math-round-parenthesis">(</span>'+v+'<span class="math-parenthesis math-round-parenthesis">)</span>'),f[1]&&(y='<span class="math-parenthesis math-round-parenthesis">(</span>'+y+'<span class="math-parenthesis math-round-parenthesis">)</span>'),this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&h==="hide"?v+'<span class="math-operator math-binary-operator math-implicit-binary-operator"></span>'+y:v+'<span class="math-operator math-binary-operator math-explicit-binary-operator">'+escape$1(this.op)+"</span>"+y}else{var b=c.map(function(_,N){return _=_.toHTML(l),f[N]&&(_='<span class="math-parenthesis math-round-parenthesis">(</span>'+_+'<span class="math-parenthesis math-round-parenthesis">)</span>'),_});return c.length>2&&(this.getIdentifier()==="OperatorNode:add"||this.getIdentifier()==="OperatorNode:multiply")?this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&h==="hide"?b.join('<span class="math-operator math-binary-operator math-implicit-binary-operator"></span>'):b.join('<span class="math-operator math-binary-operator math-explicit-binary-operator">'+escape$1(this.op)+"</span>"):'<span class="math-function">'+escape$1(this.fn)+'</span><span class="math-paranthesis math-round-parenthesis">(</span>'+b.join('<span class="math-separator">,</span>')+'<span class="math-paranthesis math-round-parenthesis">)</span>'}}_toTex(l){var u=l&&l.parenthesis?l.parenthesis:"keep",h=l&&l.implicit?l.implicit:"hide",c=this.args,f=n(this,u,h,c,!0),d=latexOperators[this.fn];if(d=typeof d>"u"?this.op:d,c.length===1){var p=getAssociativity(this,u),v=c[0].toTex(l);return f[0]&&(v="\\left(".concat(v,"\\right)")),p==="right"?d+v:v+d}else if(c.length===2){var y=c[0],b=y.toTex(l);f[0]&&(b="\\left(".concat(b,"\\right)"));var _=c[1],N=_.toTex(l);f[1]&&(N="\\left(".concat(N,"\\right)"));var M;switch(u==="keep"?M=y.getIdentifier():M=y.getContent().getIdentifier(),this.getIdentifier()){case"OperatorNode:divide":return d+"{"+b+"}{"+N+"}";case"OperatorNode:pow":switch(b="{"+b+"}",N="{"+N+"}",M){case"ConditionalNode":case"OperatorNode:divide":b="\\left(".concat(b,"\\right)")}break;case"OperatorNode:multiply":if(this.implicit&&h==="hide")return b+"~"+N}return b+d+N}else if(c.length>2&&(this.getIdentifier()==="OperatorNode:add"||this.getIdentifier()==="OperatorNode:multiply")){var C=c.map(function($,w){return $=$.toTex(l),f[w]&&($="\\left(".concat($,"\\right)")),$});return this.getIdentifier()==="OperatorNode:multiply"&&this.implicit&&h==="hide"?C.join("~"):C.join(d)}else return"\\mathrm{"+this.fn+"}\\left("+c.map(function($){return $.toTex(l)}).join(",")+"\\right)"}getIdentifier(){return this.type+":"+this.fn}}return _defineProperty(s,"name",name$1A),s},{isClass:!0,isNode:!0}),name$1z="ParenthesisNode",dependencies$1z=["Node"],createParenthesisNode=factory(name$1z,dependencies$1z,t=>{var{Node:r}=t;class a extends r{constructor(s){if(super(),!isNode(s))throw new TypeError('Node expected for parameter "content"');this.content=s}get type(){return name$1z}get isParenthesisNode(){return!0}_compile(s,o){return this.content._compile(s,o)}getContent(){return this.content.getContent()}forEach(s){s(this.content,"content",this)}map(s){var o=s(this.content,"content",this);return new a(o)}clone(){return new a(this.content)}_toString(s){return!s||s&&!s.parenthesis||s&&s.parenthesis==="keep"?"("+this.content.toString(s)+")":this.content.toString(s)}toJSON(){return{mathjs:name$1z,content:this.content}}static fromJSON(s){return new a(s.content)}_toHTML(s){return!s||s&&!s.parenthesis||s&&s.parenthesis==="keep"?'<span class="math-parenthesis math-round-parenthesis">(</span>'+this.content.toHTML(s)+'<span class="math-parenthesis math-round-parenthesis">)</span>':this.content.toHTML(s)}_toTex(s){return!s||s&&!s.parenthesis||s&&s.parenthesis==="keep"?"\\left(".concat(this.content.toTex(s),"\\right)"):this.content.toTex(s)}}return _defineProperty(a,"name",name$1z),a},{isClass:!0,isNode:!0}),name$1y="RangeNode",dependencies$1y=["Node"],createRangeNode=factory(name$1y,dependencies$1y,t=>{var{Node:r}=t;function a(s,o,l){var u=getPrecedence(s,o,l),h={},c=getPrecedence(s.start,o,l);if(h.start=c!==null&&c<=u||o==="all",s.step){var f=getPrecedence(s.step,o,l);h.step=f!==null&&f<=u||o==="all"}var d=getPrecedence(s.end,o,l);return h.end=d!==null&&d<=u||o==="all",h}class n extends r{constructor(o,l,u){if(super(),!isNode(o))throw new TypeError("Node expected");if(!isNode(l))throw new TypeError("Node expected");if(u&&!isNode(u))throw new TypeError("Node expected");if(arguments.length>3)throw new Error("Too many arguments");this.start=o,this.end=l,this.step=u||null}get type(){return name$1y}get isRangeNode(){return!0}needsEnd(){var o=this.filter(function(l){return isSymbolNode(l)&&l.name==="end"});return o.length>0}_compile(o,l){var u=o.range,h=this.start._compile(o,l),c=this.end._compile(o,l);if(this.step){var f=this.step._compile(o,l);return function(p,v,y){return u(h(p,v,y),c(p,v,y),f(p,v,y))}}else return function(p,v,y){return u(h(p,v,y),c(p,v,y))}}forEach(o){o(this.start,"start",this),o(this.end,"end",this),this.step&&o(this.step,"step",this)}map(o){return new n(this._ifNode(o(this.start,"start",this)),this._ifNode(o(this.end,"end",this)),this.step&&this._ifNode(o(this.step,"step",this)))}clone(){return new n(this.start,this.end,this.step&&this.step)}_toString(o){var l=o&&o.parenthesis?o.parenthesis:"keep",u=a(this,l,o&&o.implicit),h,c=this.start.toString(o);if(u.start&&(c="("+c+")"),h=c,this.step){var f=this.step.toString(o);u.step&&(f="("+f+")"),h+=":"+f}var d=this.end.toString(o);return u.end&&(d="("+d+")"),h+=":"+d,h}toJSON(){return{mathjs:name$1y,start:this.start,end:this.end,step:this.step}}static fromJSON(o){return new n(o.start,o.end,o.step)}_toHTML(o){var l=o&&o.parenthesis?o.parenthesis:"keep",u=a(this,l,o&&o.implicit),h,c=this.start.toHTML(o);if(u.start&&(c='<span class="math-parenthesis math-round-parenthesis">(</span>'+c+'<span class="math-parenthesis math-round-parenthesis">)</span>'),h=c,this.step){var f=this.step.toHTML(o);u.step&&(f='<span class="math-parenthesis math-round-parenthesis">(</span>'+f+'<span class="math-parenthesis math-round-parenthesis">)</span>'),h+='<span class="math-operator math-range-operator">:</span>'+f}var d=this.end.toHTML(o);return u.end&&(d='<span class="math-parenthesis math-round-parenthesis">(</span>'+d+'<span class="math-parenthesis math-round-parenthesis">)</span>'),h+='<span class="math-operator math-range-operator">:</span>'+d,h}_toTex(o){var l=o&&o.parenthesis?o.parenthesis:"keep",u=a(this,l,o&&o.implicit),h=this.start.toTex(o);if(u.start&&(h="\\left(".concat(h,"\\right)")),this.step){var c=this.step.toTex(o);u.step&&(c="\\left(".concat(c,"\\right)")),h+=":"+c}var f=this.end.toTex(o);return u.end&&(f="\\left(".concat(f,"\\right)")),h+=":"+f,h}}return _defineProperty(n,"name",name$1y),n},{isClass:!0,isNode:!0}),name$1x="RelationalNode",dependencies$1x=["Node"],createRelationalNode=factory(name$1x,dependencies$1x,t=>{var{Node:r}=t,a={equal:"==",unequal:"!=",smaller:"<",larger:">",smallerEq:"<=",largerEq:">="};class n extends r{constructor(o,l){if(super(),!Array.isArray(o))throw new TypeError("Parameter conditionals must be an array");if(!Array.isArray(l))throw new TypeError("Parameter params must be an array");if(o.length!==l.length-1)throw new TypeError("Parameter params must contain exactly one more element than parameter conditionals");this.conditionals=o,this.params=l}get type(){return name$1x}get isRelationalNode(){return!0}_compile(o,l){var u=this,h=this.params.map(c=>c._compile(o,l));return function(f,d,p){for(var v,y=h[0](f,d,p),b=0;b<u.conditionals.length;b++){v=y,y=h[b+1](f,d,p);var _=getSafeProperty(o,u.conditionals[b]);if(!_(v,y))return!1}return!0}}forEach(o){this.params.forEach((l,u)=>o(l,"params["+u+"]",this),this)}map(o){return new n(this.conditionals.slice(),this.params.map((l,u)=>this._ifNode(o(l,"params["+u+"]",this)),this))}clone(){return new n(this.conditionals,this.params)}_toString(o){for(var l=o&&o.parenthesis?o.parenthesis:"keep",u=getPrecedence(this,l,o&&o.implicit),h=this.params.map(function(d,p){var v=getPrecedence(d,l,o&&o.implicit);return l==="all"||v!==null&&v<=u?"("+d.toString(o)+")":d.toString(o)}),c=h[0],f=0;f<this.conditionals.length;f++)c+=" "+a[this.conditionals[f]],c+=" "+h[f+1];return c}toJSON(){return{mathjs:name$1x,conditionals:this.conditionals,params:this.params}}static fromJSON(o){return new n(o.conditionals,o.params)}_toHTML(o){for(var l=o&&o.parenthesis?o.parenthesis:"keep",u=getPrecedence(this,l,o&&o.implicit),h=this.params.map(function(d,p){var v=getPrecedence(d,l,o&&o.implicit);return l==="all"||v!==null&&v<=u?'<span class="math-parenthesis math-round-parenthesis">(</span>'+d.toHTML(o)+'<span class="math-parenthesis math-round-parenthesis">)</span>':d.toHTML(o)}),c=h[0],f=0;f<this.conditionals.length;f++)c+='<span class="math-operator math-binary-operator math-explicit-binary-operator">'+escape$1(a[this.conditionals[f]])+"</span>"+h[f+1];return c}_toTex(o){for(var l=o&&o.parenthesis?o.parenthesis:"keep",u=getPrecedence(this,l,o&&o.implicit),h=this.params.map(function(d,p){var v=getPrecedence(d,l,o&&o.implicit);return l==="all"||v!==null&&v<=u?"\\left("+d.toTex(o)+"\right)":d.toTex(o)}),c=h[0],f=0;f<this.conditionals.length;f++)c+=latexOperators[this.conditionals[f]]+h[f+1];return c}}return _defineProperty(n,"name",name$1x),n},{isClass:!0,isNode:!0}),name$1w="SymbolNode",dependencies$1w=["math","?Unit","Node"],createSymbolNode=factory(name$1w,dependencies$1w,t=>{var{math:r,Unit:a,Node:n}=t;function s(l){return a?a.isValuelessUnit(l):!1}class o extends n{constructor(u){if(super(),typeof u!="string")throw new TypeError('String expected for parameter "name"');this.name=u}get type(){return"SymbolNode"}get isSymbolNode(){return!0}_compile(u,h){var c=this.name;if(h[c]===!0)return function(d,p,v){return getSafeProperty(p,c)};if(c in u)return function(d,p,v){return d.has(c)?d.get(c):getSafeProperty(u,c)};var f=s(c);return function(d,p,v){return d.has(c)?d.get(c):f?new a(null,c):o.onUndefinedSymbol(c)}}forEach(u){}map(u){return this.clone()}static onUndefinedSymbol(u){throw new Error("Undefined symbol "+u)}clone(){return new o(this.name)}_toString(u){return this.name}_toHTML(u){var h=escape$1(this.name);return h==="true"||h==="false"?'<span class="math-symbol math-boolean">'+h+"</span>":h==="i"?'<span class="math-symbol math-imaginary-symbol">'+h+"</span>":h==="Infinity"?'<span class="math-symbol math-infinity-symbol">'+h+"</span>":h==="NaN"?'<span class="math-symbol math-nan-symbol">'+h+"</span>":h==="null"?'<span class="math-symbol math-null-symbol">'+h+"</span>":h==="undefined"?'<span class="math-symbol math-undefined-symbol">'+h+"</span>":'<span class="math-symbol">'+h+"</span>"}toJSON(){return{mathjs:"SymbolNode",name:this.name}}static fromJSON(u){return new o(u.name)}_toTex(u){var h=!1;typeof r[this.name]>"u"&&s(this.name)&&(h=!0);var c=toSymbol(this.name,h);return c[0]==="\\"?c:" "+c}}return o},{isClass:!0,isNode:!0}),name$1v="FunctionNode",dependencies$1v=["math","Node","SymbolNode"],createFunctionNode=factory(name$1v,dependencies$1v,t=>{var r,{math:a,Node:n,SymbolNode:s}=t,o=h=>format$1(h,{truncate:78});function l(h,c,f){for(var d="",p=/\$(?:\{([a-z_][a-z_0-9]*)(?:\[([0-9]+)\])?\}|\$)/gi,v=0,y;(y=p.exec(h))!==null;)if(d+=h.substring(v,y.index),v=y.index,y[0]==="$$")d+="$",v++;else{v+=y[0].length;var b=c[y[1]];if(!b)throw new ReferenceError("Template: Property "+y[1]+" does not exist.");if(y[2]===void 0)switch(typeof b){case"string":d+=b;break;case"object":if(isNode(b))d+=b.toTex(f);else if(Array.isArray(b))d+=b.map(function(_,N){if(isNode(_))return _.toTex(f);throw new TypeError("Template: "+y[1]+"["+N+"] is not a Node.")}).join(",");else throw new TypeError("Template: "+y[1]+" has to be a Node, String or array of Nodes");break;default:throw new TypeError("Template: "+y[1]+" has to be a Node, String or array of Nodes")}else if(isNode(b[y[2]]&&b[y[2]]))d+=b[y[2]].toTex(f);else throw new TypeError("Template: "+y[1]+"["+y[2]+"] is not a Node.")}return d+=h.slice(v),d}class u extends n{constructor(c,f,d){if(super(),typeof c=="string"&&(c=new s(c)),!isNode(c))throw new TypeError('Node expected as parameter "fn"');if(!Array.isArray(f)||!f.every(isNode))throw new TypeError('Array containing Nodes expected for parameter "args"');var p=typeof d;if(!(p==="undefined"||p==="boolean"))throw new TypeError("optional flag, if specified, must be boolean");this.fn=c,this.args=f||[],this.optional=!!d}get name(){return this.fn.name||""}get type(){return name$1v}get isFunctionNode(){return!0}_compile(c,f){var d=this.args.map(G=>G._compile(c,f)),p=this.optional||isAccessorNode(this.fn)&&this.fn.optionalChaining;if(isSymbolNode(this.fn)){var v=this.fn.name;if(f[v]){var M=this.args;return function(R,B,F){var U=getSafeProperty(B,v);if(!(p&&U===void 0)){if(typeof U!="function")throw new TypeError("Argument '".concat(v,"' was not a function; received: ").concat(o(U)));if(U.rawArgs)return U(M,c,createSubScope(R,B));var q=d.map(ee=>ee(R,B,F));return U.apply(U,q)}}}else{var y=v in c?getSafeProperty(c,v):void 0,b=typeof y=="function"&&y.rawArgs===!0,_=G=>{var R;if(G.has(v))R=G.get(v);else if(v in c)R=getSafeProperty(c,v);else if(p)R=void 0;else return u.onUndefinedFunction(v);if(typeof R=="function"||p&&R===void 0)return R;throw new TypeError("'".concat(v,`' is not a function; its value is:
  `).concat(o(R)))};if(b){var N=this.args;return function(R,B,F){var U=_(R);if(U.rawArgs===!0)return U(N,c,createSubScope(R,B));var q=d.map(ee=>ee(R,B,F));return U(...q)}}else switch(d.length){case 0:return function(R,B,F){var U=_(R);if(!(p&&U===void 0))return U()};case 1:return function(R,B,F){var U=_(R);if(!(p&&U===void 0)){var q=d[0];return U(q(R,B,F))}};case 2:return function(R,B,F){var U=_(R);if(!(p&&U===void 0)){var q=d[0],ee=d[1];return U(q(R,B,F),ee(R,B,F))}};default:return function(R,B,F){var U=_(R);if(!(p&&U===void 0)){var q=d.map(ee=>ee(R,B,F));return U(...q)}}}}}else if(isAccessorNode(this.fn)&&isIndexNode(this.fn.index)&&this.fn.index.isObjectProperty()){var C=this.fn.object._compile(c,f),$=this.fn.index.getObjectProperty(),w=this.args;return function(R,B,F){var U=C(R,B,F);if(!(p&&(U==null||U[$]===void 0))){var q=getSafeMethod(U,$);if(q!=null&&q.rawArgs)return q(w,c,createSubScope(R,B));var ee=d.map(z=>z(R,B,F));return q.apply(U,ee)}}}else{var A=this.fn.toString(),X=this.fn._compile(c,f),O=this.args;return function(R,B,F){var U=X(R,B,F);if(!(p&&U===void 0)){if(typeof U!="function")throw new TypeError("Expression '".concat(A,"' did not evaluate to a function; value is:")+`
  `.concat(o(U)));if(U.rawArgs)return U(O,c,createSubScope(R,B));var q=d.map(ee=>ee(R,B,F));return U.apply(U,q)}}}}forEach(c){c(this.fn,"fn",this);for(var f=0;f<this.args.length;f++)c(this.args[f],"args["+f+"]",this)}map(c){for(var f=this._ifNode(c(this.fn,"fn",this)),d=[],p=0;p<this.args.length;p++)d[p]=this._ifNode(c(this.args[p],"args["+p+"]",this));return new u(f,d)}clone(){return new u(this.fn,this.args.slice(0))}toString(c){var f,d=this.fn.toString(c);return c&&typeof c.handler=="object"&&hasOwnProperty(c.handler,d)&&(f=c.handler[d](this,c)),typeof f<"u"?f:super.toString(c)}_toString(c){var f=this.args.map(function(p){return p.toString(c)}),d=isFunctionAssignmentNode(this.fn)?"("+this.fn.toString(c)+")":this.fn.toString(c);return d+"("+f.join(", ")+")"}toJSON(){return{mathjs:name$1v,fn:this.fn,args:this.args}}_toHTML(c){var f=this.args.map(function(d){return d.toHTML(c)});return'<span class="math-function">'+escape$1(this.fn)+'</span><span class="math-paranthesis math-round-parenthesis">(</span>'+f.join('<span class="math-separator">,</span>')+'<span class="math-paranthesis math-round-parenthesis">)</span>'}toTex(c){var f;return c&&typeof c.handler=="object"&&hasOwnProperty(c.handler,this.name)&&(f=c.handler[this.name](this,c)),typeof f<"u"?f:super.toTex(c)}_toTex(c){var f=this.args.map(function(v){return v.toTex(c)}),d;latexFunctions[this.name]&&(d=latexFunctions[this.name]),a[this.name]&&(typeof a[this.name].toTex=="function"||typeof a[this.name].toTex=="object"||typeof a[this.name].toTex=="string")&&(d=a[this.name].toTex);var p;switch(typeof d){case"function":p=d(this,c);break;case"string":p=l(d,this,c);break;case"object":switch(typeof d[f.length]){case"function":p=d[f.length](this,c);break;case"string":p=l(d[f.length],this,c);break}}return typeof p<"u"?p:l(defaultTemplate,this,c)}getIdentifier(){return this.type+":"+this.name}}return r=u,_defineProperty(u,"name",name$1v),_defineProperty(u,"onUndefinedFunction",function(h){throw new Error("Undefined function "+h)}),_defineProperty(u,"fromJSON",function(h){return new r(h.fn,h.args)}),u},{isClass:!0,isNode:!0}),name$1u="parse",dependencies$1u=["typed","numeric","config","AccessorNode","ArrayNode","AssignmentNode","BlockNode","ConditionalNode","ConstantNode","FunctionAssignmentNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","ParenthesisNode","RangeNode","RelationalNode","SymbolNode"],createParse=factory(name$1u,dependencies$1u,t=>{var{typed:r,numeric:a,config:n,AccessorNode:s,ArrayNode:o,AssignmentNode:l,BlockNode:u,ConditionalNode:h,ConstantNode:c,FunctionAssignmentNode:f,FunctionNode:d,IndexNode:p,ObjectNode:v,OperatorNode:y,ParenthesisNode:b,RangeNode:_,RelationalNode:N,SymbolNode:M}=t,C=r(name$1u,{string:function(pe){return j(pe,{})},"Array | Matrix":function(pe){return $(pe,{})},"string, Object":function(pe,De){var Fe=De.nodes!==void 0?De.nodes:{};return j(pe,Fe)},"Array | Matrix, Object":$});function $(I){var pe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},De=pe.nodes!==void 0?pe.nodes:{};return deepMap(I,function(Fe){if(typeof Fe!="string")throw new TypeError("String expected");return j(Fe,De)})}var w={NULL:0,DELIMITER:1,NUMBER:2,SYMBOL:3,UNKNOWN:4},A={",":!0,"(":!0,")":!0,"[":!0,"]":!0,"{":!0,"}":!0,'"':!0,"'":!0,";":!0,"+":!0,"-":!0,"*":!0,".*":!0,"/":!0,"./":!0,"%":!0,"^":!0,".^":!0,"~":!0,"!":!0,"&":!0,"|":!0,"^|":!0,"=":!0,":":!0,"?":!0,"?.":!0,"??":!0,"==":!0,"!=":!0,"<":!0,">":!0,"<=":!0,">=":!0,"<<":!0,">>":!0,">>>":!0},X={mod:!0,to:!0,in:!0,and:!0,xor:!0,or:!0,not:!0},O={true:!0,false:!1,null:null,undefined:void 0},G=["NaN","Infinity"],R={'"':'"',"'":"'","\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"};function B(){return{extraNodes:{},expression:"",comment:"",index:0,token:"",tokenType:w.NULL,nestingLevel:0,conditionalLevel:null}}function F(I,pe){return I.expression.substr(I.index,pe)}function U(I){return F(I,1)}function q(I){I.index++}function ee(I){return I.expression.charAt(I.index-1)}function z(I){return I.expression.charAt(I.index+1)}function Y(I){for(I.tokenType=w.NULL,I.token="",I.comment="";;){if(U(I)==="#")for(;U(I)!==`
`&&U(I)!=="";)I.comment+=U(I),q(I);if(C.isWhitespace(U(I),I.nestingLevel))q(I);else break}if(U(I)===""){I.tokenType=w.DELIMITER;return}if(U(I)===`
`&&!I.nestingLevel){I.tokenType=w.DELIMITER,I.token=U(I),q(I);return}var pe=U(I),De=F(I,2),Fe=F(I,3);if(Fe.length===3&&A[Fe]){I.tokenType=w.DELIMITER,I.token=Fe,q(I),q(I),q(I);return}if(De.length===2&&A[De]&&(De!=="?."||!C.isDigit(I.expression.charAt(I.index+2)))){I.tokenType=w.DELIMITER,I.token=De,q(I),q(I);return}if(A[pe]){I.tokenType=w.DELIMITER,I.token=pe,q(I);return}if(C.isDigitDot(pe)){I.tokenType=w.NUMBER;var We=F(I,2);if(We==="0b"||We==="0o"||We==="0x"){for(I.token+=U(I),q(I),I.token+=U(I),q(I);C.isAlpha(U(I),ee(I),z(I))||C.isDigit(U(I));)I.token+=U(I),q(I);if(U(I)===".")for(I.token+=".",q(I);C.isAlpha(U(I),ee(I),z(I))||C.isDigit(U(I));)I.token+=U(I),q(I);else if(U(I)==="i")for(I.token+="i",q(I);C.isDigit(U(I));)I.token+=U(I),q(I);return}if(U(I)==="."){if(I.token+=U(I),q(I),!C.isDigit(U(I))){I.tokenType=w.DELIMITER;return}}else{for(;C.isDigit(U(I));)I.token+=U(I),q(I);C.isDecimalMark(U(I),z(I))&&(I.token+=U(I),q(I))}for(;C.isDigit(U(I));)I.token+=U(I),q(I);if(U(I)==="E"||U(I)==="e"){if(C.isDigit(z(I))||z(I)==="-"||z(I)==="+"){if(I.token+=U(I),q(I),(U(I)==="+"||U(I)==="-")&&(I.token+=U(I),q(I)),!C.isDigit(U(I)))throw Ee(I,'Digit expected, got "'+U(I)+'"');for(;C.isDigit(U(I));)I.token+=U(I),q(I);if(C.isDecimalMark(U(I),z(I)))throw Ee(I,'Digit expected, got "'+U(I)+'"')}else if(C.isDecimalMark(z(I),I.expression.charAt(I.index+2)))throw q(I),Ee(I,'Digit expected, got "'+U(I)+'"')}return}if(C.isAlpha(U(I),ee(I),z(I))){for(;C.isAlpha(U(I),ee(I),z(I))||C.isDigit(U(I));)I.token+=U(I),q(I);hasOwnProperty(X,I.token)?I.tokenType=w.DELIMITER:I.tokenType=w.SYMBOL;return}for(I.tokenType=w.UNKNOWN;U(I)!=="";)I.token+=U(I),q(I);throw Ee(I,'Syntax error in part "'+I.token+'"')}function K(I){do Y(I);while(I.token===`
`)}function Z(I){I.nestingLevel++}function ne(I){I.nestingLevel--}C.isAlpha=function(pe,De,Fe){return C.isValidLatinOrGreek(pe)||C.isValidMathSymbol(pe,Fe)||C.isValidMathSymbol(De,pe)},C.isValidLatinOrGreek=function(pe){return/^[a-zA-Z_$\u00C0-\u02AF\u0370-\u03FF\u2100-\u214F]$/.test(pe)},C.isValidMathSymbol=function(pe,De){return/^[\uD835]$/.test(pe)&&/^[\uDC00-\uDFFF]$/.test(De)&&/^[^\uDC55\uDC9D\uDCA0\uDCA1\uDCA3\uDCA4\uDCA7\uDCA8\uDCAD\uDCBA\uDCBC\uDCC4\uDD06\uDD0B\uDD0C\uDD15\uDD1D\uDD3A\uDD3F\uDD45\uDD47-\uDD49\uDD51\uDEA6\uDEA7\uDFCC\uDFCD]$/.test(De)},C.isWhitespace=function(pe,De){return pe===" "||pe==="	"||pe===""||pe===`
`&&De>0},C.isDecimalMark=function(pe,De){return pe==="."&&De!=="/"&&De!=="*"&&De!=="^"},C.isDigitDot=function(pe){return pe>="0"&&pe<="9"||pe==="."},C.isDigit=function(pe){return pe>="0"&&pe<="9"};function j(I,pe){var De=B();_extends(De,{expression:I,extraNodes:pe}),Y(De);var Fe=V(De);if(De.token!=="")throw De.tokenType===w.DELIMITER?qe(De,"Unexpected operator "+De.token):Ee(De,'Unexpected part "'+De.token+'"');return Fe}function V(I){var pe,De=[],Fe;for(I.token!==""&&I.token!==`
`&&I.token!==";"&&(pe=L(I),I.comment&&(pe.comment=I.comment));I.token===`
`||I.token===";";)De.length===0&&pe&&(Fe=I.token!==";",De.push({node:pe,visible:Fe})),Y(I),I.token!==`
`&&I.token!==";"&&I.token!==""&&(pe=L(I),I.comment&&(pe.comment=I.comment),Fe=I.token!==";",De.push({node:pe,visible:Fe}));return De.length>0?new u(De):(pe||(pe=new c(void 0),I.comment&&(pe.comment=I.comment)),pe)}function L(I){var pe,De,Fe,We,He=ae(I);if(I.token==="="){if(isSymbolNode(He))return pe=He.name,K(I),Fe=L(I),new l(new M(pe),Fe);if(isAccessorNode(He)){if(He.optionalChaining)throw Ee(I,"Cannot assign to optional chain");return K(I),Fe=L(I),new l(He.object,He.index,Fe)}else if(isFunctionNode(He)&&isSymbolNode(He.fn)&&(We=!0,De=[],pe=He.name,He.args.forEach(function(vt,zt){isSymbolNode(vt)?De[zt]=vt.name:We=!1}),We))return K(I),Fe=L(I),new f(pe,De,Fe);throw Ee(I,"Invalid left hand side of assignment operator =")}return He}function ae(I){for(var pe=W(I);I.token==="?";){var De=I.conditionalLevel;I.conditionalLevel=I.nestingLevel,K(I);var Fe=pe,We=L(I);if(I.token!==":")throw Ee(I,"False part of conditional expression expected");I.conditionalLevel=null,K(I);var He=L(I);pe=new h(Fe,We,He),I.conditionalLevel=De}return pe}function W(I){for(var pe=ve(I);I.token==="or";)K(I),pe=new y("or","or",[pe,ve(I)]);return pe}function ve(I){for(var pe=de(I);I.token==="xor";)K(I),pe=new y("xor","xor",[pe,de(I)]);return pe}function de(I){for(var pe=se(I);I.token==="and";)K(I),pe=new y("and","and",[pe,se(I)]);return pe}function se(I){for(var pe=ie(I);I.token==="|";)K(I),pe=new y("|","bitOr",[pe,ie(I)]);return pe}function ie(I){for(var pe=ce(I);I.token==="^|";)K(I),pe=new y("^|","bitXor",[pe,ce(I)]);return pe}function ce(I){for(var pe=xe(I);I.token==="&";)K(I),pe=new y("&","bitAnd",[pe,xe(I)]);return pe}function xe(I){for(var pe=[fe(I)],De=[],Fe={"==":"equal","!=":"unequal","<":"smaller",">":"larger","<=":"smallerEq",">=":"largerEq"};hasOwnProperty(Fe,I.token);){var We={name:I.token,fn:Fe[I.token]};De.push(We),K(I),pe.push(fe(I))}return pe.length===1?pe[0]:pe.length===2?new y(De[0].name,De[0].fn,pe):new N(De.map(He=>He.fn),pe)}function fe(I){var pe,De,Fe,We;pe=Ne(I);for(var He={"<<":"leftShift",">>":"rightArithShift",">>>":"rightLogShift"};hasOwnProperty(He,I.token);)De=I.token,Fe=He[De],K(I),We=[pe,Ne(I)],pe=new y(De,Fe,We);return pe}function Ne(I){var pe,De,Fe,We;pe=we(I);for(var He={to:"to",in:"to"};hasOwnProperty(He,I.token);)De=I.token,Fe=He[De],K(I),De==="in"&&"])},;".includes(I.token)?pe=new y("*","multiply",[pe,new M("in")],!0):(We=[pe,we(I)],pe=new y(De,Fe,We));return pe}function we(I){var pe,De=[];if(I.token===":"?pe=new c(1):pe=Pe(I),I.token===":"&&I.conditionalLevel!==I.nestingLevel){for(De.push(pe);I.token===":"&&De.length<3;)K(I),I.token===")"||I.token==="]"||I.token===","||I.token===""?De.push(new M("end")):De.push(Pe(I));De.length===3?pe=new _(De[0],De[2],De[1]):pe=new _(De[0],De[1])}return pe}function Pe(I){var pe,De,Fe,We;pe=Ie(I);for(var He={"+":"add","-":"subtract"};hasOwnProperty(He,I.token);){De=I.token,Fe=He[De],K(I);var vt=Ie(I);vt.isPercentage?We=[pe,new y("*","multiply",[pe,vt])]:We=[pe,vt],pe=new y(De,Fe,We)}return pe}function Ie(I){var pe,De,Fe,We;pe=Ye(I),De=pe;for(var He={"*":"multiply",".*":"dotMultiply","/":"divide","./":"dotDivide","%":"mod",mod:"mod"};hasOwnProperty(He,I.token);)Fe=I.token,We=He[Fe],K(I),De=Ye(I),pe=new y(Fe,We,[pe,De]);return pe}function Ye(I){var pe,De;for(pe=Le(I),De=pe;I.tokenType===w.SYMBOL||I.token==="in"&&isConstantNode(pe)||I.token==="in"&&isOperatorNode(pe)&&pe.fn==="unaryMinus"&&isConstantNode(pe.args[0])||I.tokenType===w.NUMBER&&!isConstantNode(De)&&(!isOperatorNode(De)||De.op==="!")||I.token==="(";)De=Le(I),pe=new y("*","multiply",[pe,De],!0);return pe}function Le(I){for(var pe=Ve(I),De=pe,Fe=[];I.token==="/"&&rule2Node(De);)if(Fe.push(_extends({},I)),K(I),I.tokenType===w.NUMBER)if(Fe.push(_extends({},I)),K(I),I.tokenType===w.SYMBOL||I.token==="("||I.token==="in")_extends(I,Fe.pop()),Fe.pop(),De=Ve(I),pe=new y("/","divide",[pe,De]);else{Fe.pop(),_extends(I,Fe.pop());break}else{_extends(I,Fe.pop());break}return pe}function Ve(I){var pe=Ze(I);if(I.token==="%"){var De=_extends({},I);K(I);try{Ze(I),_extends(I,De)}catch{pe=new y("/","divide",[pe,new c(100)],!1,!0)}}return pe}function Ze(I){var pe,De,Fe,We={"-":"unaryMinus","+":"unaryPlus","~":"bitNot",not:"not"};return hasOwnProperty(We,I.token)?(Fe=We[I.token],pe=I.token,K(I),De=[Ze(I)],new y(pe,Fe,De)):ue(I)}function ue(I){var pe,De,Fe,We;return pe=ge(I),(I.token==="^"||I.token===".^")&&(De=I.token,Fe=De==="^"?"pow":"dotPow",K(I),We=[pe,Ze(I)],pe=new y(De,Fe,We)),pe}function ge(I){for(var pe=te(I);I.token==="??";)K(I),pe=new y("??","nullish",[pe,te(I)]);return pe}function te(I){var pe,De,Fe,We;pe=le(I);for(var He={"!":"factorial","'":"ctranspose"};hasOwnProperty(He,I.token);)De=I.token,Fe=He[De],Y(I),We=[pe],pe=new y(De,Fe,We),pe=he(I,pe);return pe}function le(I){var pe=[];if(I.tokenType===w.SYMBOL&&hasOwnProperty(I.extraNodes,I.token)){var De=I.extraNodes[I.token];if(Y(I),I.token==="("){if(pe=[],Z(I),Y(I),I.token!==")")for(pe.push(L(I));I.token===",";)Y(I),pe.push(L(I));if(I.token!==")")throw Ee(I,"Parenthesis ) expected");ne(I),Y(I)}return new De(pe)}return me(I)}function me(I){var pe,De;return I.tokenType===w.SYMBOL||I.tokenType===w.DELIMITER&&I.token in X?(De=I.token,Y(I),hasOwnProperty(O,De)?pe=new c(O[De]):G.includes(De)?pe=new c(a(De,"number")):pe=new M(De),pe=he(I,pe),pe):ye(I)}function he(I,pe,De){for(var Fe;;){var We=!1;I.token==="?."&&(We=!0,Y(I));var He=(I.token==="("||I.token==="["||I.token===".")&&!0;if(!(We||He))break;if(Fe=[],I.token==="(")if(We||isSymbolNode(pe)||isAccessorNode(pe)){if(Z(I),Y(I),I.token!==")")for(Fe.push(L(I));I.token===",";)Y(I),Fe.push(L(I));if(I.token!==")")throw Ee(I,"Parenthesis ) expected");ne(I),Y(I),pe=new d(pe,Fe,We)}else return pe;else if(I.token==="["){if(Z(I),Y(I),I.token!=="]")for(Fe.push(L(I));I.token===",";)Y(I),Fe.push(L(I));if(I.token!=="]")throw Ee(I,"Parenthesis ] expected");ne(I),Y(I),pe=new s(pe,new p(Fe),We)}else{We||Y(I);var vt=I.tokenType===w.SYMBOL||I.tokenType===w.DELIMITER&&I.token in X;if(!vt){var zt="Property name expected after ";throw zt+=We?"optional chain":"dot",Ee(I,zt)}Fe.push(new c(I.token)),Y(I);var $r=!0;pe=new s(pe,new p(Fe,$r),We)}}return pe}function ye(I){var pe,De;return I.token==='"'||I.token==="'"?(De=Se(I,I.token),pe=new c(De),pe=he(I,pe),pe):Be(I)}function Se(I,pe){for(var De="";U(I)!==""&&U(I)!==pe;)if(U(I)==="\\"){q(I);var Fe=U(I),We=R[Fe];if(We!==void 0)De+=We,I.index+=1;else if(Fe==="u"){var He=I.expression.slice(I.index+1,I.index+5);if(/^[0-9A-Fa-f]{4}$/.test(He))De+=String.fromCharCode(parseInt(He,16)),I.index+=5;else throw Ee(I,"Invalid unicode character \\u".concat(He))}else throw Ee(I,"Bad escape character \\".concat(Fe))}else De+=U(I),q(I);if(Y(I),I.token!==pe)throw Ee(I,"End of string ".concat(pe," expected"));return Y(I),De}function Be(I){var pe,De,Fe,We;if(I.token==="["){if(Z(I),Y(I),I.token!=="]"){var He=Te(I);if(I.token===";"){for(Fe=1,De=[He];I.token===";";)Y(I),I.token!=="]"&&(De[Fe]=Te(I),Fe++);if(I.token!=="]")throw Ee(I,"End of matrix ] expected");ne(I),Y(I),We=De[0].items.length;for(var vt=1;vt<Fe;vt++)if(De[vt].items.length!==We)throw qe(I,"Column dimensions mismatch ("+De[vt].items.length+" !== "+We+")");pe=new o(De)}else{if(I.token!=="]")throw Ee(I,"End of matrix ] expected");ne(I),Y(I),pe=He}}else ne(I),Y(I),pe=new o([]);return he(I,pe)}return Xe(I)}function Te(I){for(var pe=[L(I)],De=1;I.token===",";)Y(I),I.token!=="]"&&I.token!==";"&&(pe[De]=L(I),De++);return new o(pe)}function Xe(I){if(I.token==="{"){Z(I);var pe,De={};do if(Y(I),I.token!=="}"){if(I.token==='"'||I.token==="'")pe=Se(I,I.token);else if(I.tokenType===w.SYMBOL||I.tokenType===w.DELIMITER&&I.token in X)pe=I.token,Y(I);else throw Ee(I,"Symbol or string expected as object key");if(I.token!==":")throw Ee(I,"Colon : expected after object key");Y(I),De[pe]=L(I)}while(I.token===",");if(I.token!=="}")throw Ee(I,"Comma , or bracket } expected after object value");ne(I),Y(I);var Fe=new v(De);return Fe=he(I,Fe),Fe}return Me(I)}function Me(I){var pe;if(I.tokenType===w.NUMBER){pe=I.token,Y(I);var De=safeNumberType(pe,n),Fe=a(pe,De);return new c(Fe)}return ze(I)}function ze(I){var pe;if(I.token==="("){if(Z(I),Y(I),pe=L(I),I.token!==")")throw Ee(I,"Parenthesis ) expected");return ne(I),Y(I),pe=new b(pe),pe=he(I,pe),pe}return Ue(I)}function Ue(I){throw I.token===""?Ee(I,"Unexpected end of expression"):Ee(I,"Value expected")}function je(I){return I.index-I.token.length+1}function Ee(I,pe){var De=je(I),Fe=new SyntaxError(pe+" (char "+De+")");return Fe.char=De,Fe}function qe(I,pe){var De=je(I),Fe=new SyntaxError(pe+" (char "+De+")");return Fe.char=De,Fe}return r.addConversion({from:"string",to:"Node",convert:C}),C}),name$1t="compile",dependencies$1t=["typed","parse"],createCompile=factory(name$1t,dependencies$1t,t=>{var{typed:r,parse:a}=t;return r(name$1t,{string:function(s){return a(s).compile()},"Array | Matrix":function(s){return deepMap(s,function(o){return a(o).compile()})}})}),name$1s="evaluate",dependencies$1s=["typed","parse"],createEvaluate=factory(name$1s,dependencies$1s,t=>{var{typed:r,parse:a}=t;return r(name$1s,{string:function(s){var o=createEmptyMap();return a(s).compile().evaluate(o)},"string, Map | Object":function(s,o){return a(s).compile().evaluate(o)},"Array | Matrix":function(s){var o=createEmptyMap();return deepMap(s,function(l){return a(l).compile().evaluate(o)})},"Array | Matrix, Map | Object":function(s,o){return deepMap(s,function(l){return a(l).compile().evaluate(o)})}})}),name$1r="Parser",dependencies$1r=["evaluate","parse"],createParserClass=factory(name$1r,dependencies$1r,t=>{var{evaluate:r,parse:a}=t;function n(){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");Object.defineProperty(this,"scope",{value:createEmptyMap(),writable:!1})}n.prototype.type="Parser",n.prototype.isParser=!0,n.prototype.evaluate=function(o){return r(o,this.scope)},n.prototype.get=function(o){if(this.scope.has(o))return this.scope.get(o)},n.prototype.getAll=function(){return toObject(this.scope)},n.prototype.getAllAsMap=function(){return this.scope};function s(o){if(o.length===0)return!1;for(var l=0;l<o.length;l++){var u=o.charAt(l-1),h=o.charAt(l),c=o.charAt(l+1),f=a.isAlpha(h,u,c)||l>0&&a.isDigit(h);if(!f)return!1}return!0}return n.prototype.set=function(o,l){if(!s(o))throw new Error("Invalid variable name: '".concat(o,"'. Variable names must follow the specified rules."));return this.scope.set(o,l),l},n.prototype.remove=function(o){this.scope.delete(o)},n.prototype.clear=function(){this.scope.clear()},n.prototype.toJSON=function(){var o={mathjs:"Parser",variables:{},functions:{}};for(var[l,u]of this.scope)if(isFunction(u)){if(!isExpressionFunction(u))throw new Error("Cannot serialize external function ".concat(l));o.functions[l]="".concat(u.syntax," = ").concat(u.expr)}else o.variables[l]=u;return o},n.fromJSON=function(o){var l=new n;return Object.entries(o.variables).forEach(u=>{var[h,c]=u;return l.set(h,c)}),Object.entries(o.functions).forEach(u=>{var[h,c]=u;return l.evaluate(c)}),l},n},{isClass:!0});function isExpressionFunction(t){return typeof t=="function"&&typeof t.syntax=="string"&&typeof t.expr=="string"}var name$1q="parser",dependencies$1q=["typed","Parser"],createParser=factory(name$1q,dependencies$1q,t=>{var{typed:r,Parser:a}=t;return r(name$1q,{"":function(){return new a}})}),name$1p="lup",dependencies$1p=["typed","matrix","abs","addScalar","divideScalar","multiplyScalar","subtractScalar","larger","equalScalar","unaryMinus","DenseMatrix","SparseMatrix","Spa"],createLup=factory(name$1p,dependencies$1p,t=>{var{typed:r,matrix:a,abs:n,addScalar:s,divideScalar:o,multiplyScalar:l,subtractScalar:u,larger:h,equalScalar:c,unaryMinus:f,DenseMatrix:d,SparseMatrix:p,Spa:v}=t;return r(name$1p,{DenseMatrix:function(N){return y(N)},SparseMatrix:function(N){return b(N)},Array:function(N){var M=a(N),C=y(M);return{L:C.L.valueOf(),U:C.U.valueOf(),p:C.p}}});function y(_){var N=_._size[0],M=_._size[1],C=Math.min(N,M),$=clone$3(_._data),w=[],A=[N,C],X=[],O=[C,M],G,R,B,F=[];for(G=0;G<N;G++)F[G]=G;for(R=0;R<M;R++){if(R>0)for(G=0;G<N;G++){var U=Math.min(G,R),q=0;for(B=0;B<U;B++)q=s(q,l($[G][B],$[B][R]));$[G][R]=u($[G][R],q)}var ee=R,z=0,Y=0;for(G=R;G<N;G++){var K=$[G][R],Z=n(K);h(Z,z)&&(ee=G,z=Z,Y=K)}if(R!==ee&&(F[R]=[F[ee],F[ee]=F[R]][0],d._swapRows(R,ee,$)),R<N)for(G=R+1;G<N;G++){var ne=$[G][R];c(ne,0)||($[G][R]=o($[G][R],Y))}}for(R=0;R<M;R++)for(G=0;G<N;G++){if(R===0&&(G<M&&(X[G]=[]),w[G]=[]),G<R){G<M&&(X[G][R]=$[G][R]),R<N&&(w[G][R]=0);continue}if(G===R){G<M&&(X[G][R]=$[G][R]),R<N&&(w[G][R]=1);continue}G<M&&(X[G][R]=0),R<N&&(w[G][R]=$[G][R])}var j=new d({data:w,size:A}),V=new d({data:X,size:O}),L=[];for(G=0,C=F.length;G<C;G++)L[F[G]]=G;return{L:j,U:V,p:L,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
P: `+this.p}}}function b(_){var N=_._size[0],M=_._size[1],C=Math.min(N,M),$=_._values,w=_._index,A=_._ptr,X=[],O=[],G=[],R=[N,C],B=[],F=[],U=[],q=[C,M],ee,z,Y,K=[],Z=[];for(ee=0;ee<N;ee++)K[ee]=ee,Z[ee]=ee;var ne=function(L,ae){var W=Z[L],ve=Z[ae];K[W]=ae,K[ve]=L,Z[L]=ve,Z[ae]=W},j=function(){var L=new v;z<N&&(G.push(X.length),X.push(1),O.push(z)),U.push(B.length);var ae=A[z],W=A[z+1];for(Y=ae;Y<W;Y++)ee=w[Y],L.set(K[ee],$[Y]);z>0&&L.forEach(0,z-1,function(ie,ce){p._forEachRow(ie,X,O,G,function(xe,fe){xe>ie&&L.accumulate(xe,f(l(fe,ce)))})});var ve=z,de=L.get(z),se=n(de);L.forEach(z+1,N-1,function(ie,ce){var xe=n(ce);h(xe,se)&&(ve=ie,se=xe,de=ce)}),z!==ve&&(p._swapRows(z,ve,R[1],X,O,G),p._swapRows(z,ve,q[1],B,F,U),L.swap(z,ve),ne(z,ve)),L.forEach(0,N-1,function(ie,ce){ie<=z?(B.push(ce),F.push(ie)):(ce=o(ce,de),c(ce,0)||(X.push(ce),O.push(ie)))})};for(z=0;z<M;z++)j();return U.push(B.length),G.push(X.length),{L:new p({values:X,index:O,ptr:G,size:R}),U:new p({values:B,index:F,ptr:U,size:q}),p:K,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
P: `+this.p}}}}),name$1o="qr",dependencies$1o=["typed","matrix","zeros","identity","isZero","equal","sign","sqrt","conj","unaryMinus","addScalar","divideScalar","multiplyScalar","subtractScalar","complex"],createQr=factory(name$1o,dependencies$1o,t=>{var{typed:r,matrix:a,zeros:n,identity:s,isZero:o,equal:l,sign:u,sqrt:h,conj:c,unaryMinus:f,addScalar:d,divideScalar:p,multiplyScalar:v,subtractScalar:y,complex:b}=t;return _extends(r(name$1o,{DenseMatrix:function($){return N($)},SparseMatrix:function($){return M()},Array:function($){var w=a($),A=N(w);return{Q:A.Q.valueOf(),R:A.R.valueOf()}}}),{_denseQRimpl:_});function _(C){var $=C._size[0],w=C._size[1],A=s([$],"dense"),X=A._data,O=C.clone(),G=O._data,R,B,F,U=n([$],"");for(F=0;F<Math.min(w,$);++F){var q=G[F][F],ee=f(l(q,0)?1:u(q)),z=c(ee),Y=0;for(R=F;R<$;R++)Y=d(Y,v(G[R][F],c(G[R][F])));var K=v(ee,h(Y));if(!o(K)){var Z=y(q,K);for(U[F]=1,R=F+1;R<$;R++)U[R]=p(G[R][F],Z);var ne=f(c(p(Z,K))),j=void 0;for(B=F;B<w;B++){for(j=0,R=F;R<$;R++)j=d(j,v(c(U[R]),G[R][B]));for(j=v(j,ne),R=F;R<$;R++)G[R][B]=v(y(G[R][B],v(U[R],j)),z)}for(R=0;R<$;R++){for(j=0,B=F;B<$;B++)j=d(j,v(X[R][B],U[B]));for(j=v(j,ne),B=F;B<$;++B)X[R][B]=p(y(X[R][B],v(j,c(U[B]))),z)}}}return{Q:A,R:O,toString:function(){return"Q: "+this.Q.toString()+`
R: `+this.R.toString()}}}function N(C){var $=_(C),w=$.R._data;if(C._data.length>0)for(var A=w[0][0].type==="Complex"?b(0):0,X=0;X<w.length;++X)for(var O=0;O<X&&O<(w[0]||[]).length;++O)w[X][O]=A;return $}function M(C){throw new Error("qr not implemented for sparse matrices yet")}});function csPermute(t,r,a,n){t._values;for(var s=t._index,o=t._ptr,l=t._size,u=t._datatype,h=l[0],c=l[1],f=null,d=[],p=[],v=0,y=0;y<c;y++){p[y]=v;for(var b=a?a[y]:y,_=o[b],N=o[b+1],M=_;M<N;M++){var C=s[M];d[v]=C,v++}}return p[c]=v,t.createSparseMatrix({values:f,index:d,ptr:p,size:[h,c],datatype:u})}function csTdfs(t,r,a,n,s,o,l){var u=0;for(a[l]=t;u>=0;){var h=a[l+u],c=a[n+h];c===-1?(u--,o[r++]=h):(a[n+h]=a[s+c],++u,a[l+u]=c)}return r}function csPost(t,r){if(!t)return null;var a=0,n,s=[],o=[],l=0,u=r,h=2*r;for(n=0;n<r;n++)o[l+n]=-1;for(n=r-1;n>=0;n--)t[n]!==-1&&(o[u+n]=o[l+t[n]],o[l+t[n]]=n);for(n=0;n<r;n++)t[n]===-1&&(a=csTdfs(n,a,o,l,u,s,h));return s}function csEtree(t,r){if(!t)return null;var a=t._index,n=t._ptr,s=t._size,o=s[0],l=s[1],u=[],h=[],c=0,f=l,d,p;for(d=0;d<o;d++)h[f+d]=-1;for(var v=0;v<l;v++){u[v]=-1,h[c+v]=-1;for(var y=n[v],b=n[v+1],_=y;_<b;_++){var N=a[_];for(d=h[f+N];d!==-1&&d<v;d=p)p=h[c+d],h[c+d]=v,p===-1&&(u[d]=v);h[f+N]=v}}return u}function csFkeep(t,r,a){for(var n=t._values,s=t._index,o=t._ptr,l=t._size,u=l[1],h=0,c=0;c<u;c++){var f=o[c];for(o[c]=h;f<o[c+1];f++)r(s[f],c,n?n[f]:1,a)&&(s[h]=s[f],n&&(n[h]=n[f]),h++)}return o[u]=h,s.splice(h,s.length-h),n&&n.splice(h,n.length-h),h}function csFlip(t){return-t-2}var name$1n="csAmd",dependencies$1n=["add","multiply","transpose"],createCsAmd=factory(name$1n,dependencies$1n,t=>{var{add:r,multiply:a,transpose:n}=t;return function(f,d){if(!d||f<=0||f>3)return null;var p=d._size,v=p[0],y=p[1],b=0,_=Math.max(16,10*Math.sqrt(y));_=Math.min(y-2,_);var N=s(f,d,v,y,_);csFkeep(N,h,null);for(var M=N._index,C=N._ptr,$=C[y],w=[],A=[],X=0,O=y+1,G=2*(y+1),R=3*(y+1),B=4*(y+1),F=5*(y+1),U=6*(y+1),q=7*(y+1),ee=w,z=o(y,C,A,X,R,ee,G,q,O,U,B,F),Y=l(y,C,A,F,B,U,_,O,R,ee,G),K=0,Z,ne,j,V,L,ae,W,ve,de,se,ie,ce,xe,fe,Ne,we;Y<y;){for(j=-1;K<y&&(j=A[R+K])===-1;K++);A[G+j]!==-1&&(ee[A[G+j]]=-1),A[R+K]=A[G+j];var Pe=A[B+j],Ie=A[O+j];Y+=Ie;var Ye=0;A[O+j]=-Ie;var Le=C[j],Ve=Pe===0?Le:$,Ze=Ve;for(V=1;V<=Pe+1;V++){for(V>Pe?(ae=j,W=Le,ve=A[X+j]-Pe):(ae=M[Le++],W=C[ae],ve=A[X+ae]),L=1;L<=ve;L++)Z=M[W++],!((de=A[O+Z])<=0)&&(Ye+=de,A[O+Z]=-de,M[Ze++]=Z,A[G+Z]!==-1&&(ee[A[G+Z]]=ee[Z]),ee[Z]!==-1?A[G+ee[Z]]=A[G+Z]:A[R+A[F+Z]]=A[G+Z]);ae!==j&&(C[ae]=csFlip(j),A[U+ae]=0)}for(Pe!==0&&($=Ze),A[F+j]=Ye,C[j]=Ve,A[X+j]=Ze-Ve,A[B+j]=-2,z=u(z,b,A,U,y),se=Ve;se<Ze;se++)if(Z=M[se],!((ie=A[B+Z])<=0)){de=-A[O+Z];var ue=z-de;for(Le=C[Z],ce=C[Z]+ie-1;Le<=ce;Le++)ae=M[Le],A[U+ae]>=z?A[U+ae]-=de:A[U+ae]!==0&&(A[U+ae]=A[F+ae]+ue)}for(se=Ve;se<Ze;se++){for(Z=M[se],ce=C[Z],xe=ce+A[B+Z]-1,fe=ce,Ne=0,we=0,Le=ce;Le<=xe;Le++)if(ae=M[Le],A[U+ae]!==0){var ge=A[U+ae]-z;ge>0?(we+=ge,M[fe++]=ae,Ne+=ae):(C[ae]=csFlip(j),A[U+ae]=0)}A[B+Z]=fe-ce+1;var te=fe,le=ce+A[X+Z];for(Le=xe+1;Le<le;Le++){ne=M[Le];var me=A[O+ne];me<=0||(we+=me,M[fe++]=ne,Ne+=ne)}we===0?(C[Z]=csFlip(j),de=-A[O+Z],Ye-=de,Ie+=de,Y+=de,A[O+Z]=0,A[B+Z]=-1):(A[F+Z]=Math.min(A[F+Z],we),M[fe]=M[te],M[te]=M[ce],M[ce]=j,A[X+Z]=fe-ce+1,Ne=(Ne<0?-Ne:Ne)%y,A[G+Z]=A[q+Ne],A[q+Ne]=Z,ee[Z]=Ne)}for(A[F+j]=Ye,b=Math.max(b,Ye),z=u(z+b,b,A,U,y),se=Ve;se<Ze;se++)if(Z=M[se],!(A[O+Z]>=0))for(Ne=ee[Z],Z=A[q+Ne],A[q+Ne]=-1;Z!==-1&&A[G+Z]!==-1;Z=A[G+Z],z++){for(ve=A[X+Z],ie=A[B+Z],Le=C[Z]+1;Le<=C[Z]+ve-1;Le++)A[U+M[Le]]=z;var he=Z;for(ne=A[G+Z];ne!==-1;){var ye=A[X+ne]===ve&&A[B+ne]===ie;for(Le=C[ne]+1;ye&&Le<=C[ne]+ve-1;Le++)A[U+M[Le]]!==z&&(ye=0);ye?(C[ne]=csFlip(Z),A[O+Z]+=A[O+ne],A[O+ne]=0,A[B+ne]=-1,ne=A[G+ne],A[G+he]=ne):(he=ne,ne=A[G+ne])}}for(Le=Ve,se=Ve;se<Ze;se++)Z=M[se],!((de=-A[O+Z])<=0)&&(A[O+Z]=de,we=A[F+Z]+Ye-de,we=Math.min(we,y-Y-de),A[R+we]!==-1&&(ee[A[R+we]]=Z),A[G+Z]=A[R+we],ee[Z]=-1,A[R+we]=Z,K=Math.min(K,we),A[F+Z]=we,M[Le++]=Z);A[O+j]=Ie,(A[X+j]=Le-Ve)===0&&(C[j]=-1,A[U+j]=0),Pe!==0&&($=Le)}for(Z=0;Z<y;Z++)C[Z]=csFlip(C[Z]);for(ne=0;ne<=y;ne++)A[R+ne]=-1;for(ne=y;ne>=0;ne--)A[O+ne]>0||(A[G+ne]=A[R+C[ne]],A[R+C[ne]]=ne);for(ae=y;ae>=0;ae--)A[O+ae]<=0||C[ae]!==-1&&(A[G+ae]=A[R+C[ae]],A[R+C[ae]]=ae);for(j=0,Z=0;Z<=y;Z++)C[Z]===-1&&(j=csTdfs(Z,j,A,R,G,w,U));return w.splice(w.length-1,1),w};function s(c,f,d,p,v){var y=n(f);if(c===1&&p===d)return r(f,y);if(c===2){for(var b=y._index,_=y._ptr,N=0,M=0;M<d;M++){var C=_[M];if(_[M]=N,!(_[M+1]-C>v))for(var $=_[M+1];C<$;C++)b[N++]=b[C]}return _[d]=N,f=n(y),a(y,f)}return a(y,f)}function o(c,f,d,p,v,y,b,_,N,M,C,$){for(var w=0;w<c;w++)d[p+w]=f[w+1]-f[w];d[p+c]=0;for(var A=0;A<=c;A++)d[v+A]=-1,y[A]=-1,d[b+A]=-1,d[_+A]=-1,d[N+A]=1,d[M+A]=1,d[C+A]=0,d[$+A]=d[p+A];var X=u(0,0,d,M,c);return d[C+c]=-2,f[c]=-1,d[M+c]=0,X}function l(c,f,d,p,v,y,b,_,N,M,C){for(var $=0,w=0;w<c;w++){var A=d[p+w];if(A===0)d[v+w]=-2,$++,f[w]=-1,d[y+w]=0;else if(A>b)d[_+w]=0,d[v+w]=-1,$++,f[w]=csFlip(c),d[_+c]++;else{var X=d[N+A];X!==-1&&(M[X]=w),d[C+w]=d[N+A],d[N+A]=w}}return $}function u(c,f,d,p,v){if(c<2||c+f<0){for(var y=0;y<v;y++)d[p+y]!==0&&(d[p+y]=1);c=2}return c}function h(c,f){return c!==f}});function csLeaf(t,r,a,n,s,o,l){var u,h,c=0,f;if(t<=r||a[n+r]<=a[s+t])return-1;a[s+t]=a[n+r];var d=a[o+t];if(a[o+t]=r,d===-1)c=1,f=t;else{for(c=2,f=d;f!==a[l+f];f=a[l+f]);for(u=d;u!==f;u=h)h=a[l+u],a[l+u]=f}return{jleaf:c,q:f}}var name$1m="csCounts",dependencies$1m=["transpose"],createCsCounts=factory(name$1m,dependencies$1m,t=>{var{transpose:r}=t;return function(a,n,s,o){if(!a||!n||!s)return null;var l=a._size,u=l[0],h=l[1],c,f,d,p,v,y,b,_=4*h+(o?h+u+1:0),N=[],M=0,C=h,$=2*h,w=3*h,A=4*h,X=5*h+1;for(d=0;d<_;d++)N[d]=-1;var O=[],G=r(a),R=G._index,B=G._ptr;for(d=0;d<h;d++)for(f=s[d],O[f]=N[w+f]===-1?1:0;f!==-1&&N[w+f]===-1;f=n[f])N[w+f]=d;if(o){for(d=0;d<h;d++)N[s[d]]=d;for(c=0;c<u;c++){for(d=h,y=B[c],b=B[c+1],v=y;v<b;v++)d=Math.min(d,N[R[v]]);N[X+c]=N[A+d],N[A+d]=c}}for(c=0;c<h;c++)N[M+c]=c;for(d=0;d<h;d++){for(f=s[d],n[f]!==-1&&O[n[f]]--,p=o?N[A+d]:f;p!==-1;p=o?N[X+p]:-1)for(v=B[p];v<B[p+1];v++){c=R[v];var F=csLeaf(c,f,N,w,C,$,M);F.jleaf>=1&&O[f]++,F.jleaf===2&&O[F.q]--}n[f]!==-1&&(N[M+f]=n[f])}for(f=0;f<h;f++)n[f]!==-1&&(O[n[f]]+=O[f]);return O}}),name$1l="csSqr",dependencies$1l=["add","multiply","transpose"],createCsSqr=factory(name$1l,dependencies$1l,t=>{var{add:r,multiply:a,transpose:n}=t,s=createCsAmd({add:r,multiply:a,transpose:n}),o=createCsCounts({transpose:n});return function(h,c,f){var d=c._ptr,p=c._size,v=p[1],y,b={};if(b.q=s(h,c),h&&!b.q)return null;if(f){var _=h?csPermute(c,null,b.q):c;b.parent=csEtree(_);var N=csPost(b.parent,v);if(b.cp=o(_,b.parent,N,1),_&&b.parent&&b.cp&&l(_,b))for(b.unz=0,y=0;y<v;y++)b.unz+=b.cp[y]}else b.unz=4*d[v]+v,b.lnz=b.unz;return b};function l(u,h){var c=u._ptr,f=u._index,d=u._size,p=d[0],v=d[1];h.pinv=[],h.leftmost=[];var y=h.parent,b=h.pinv,_=h.leftmost,N=[],M=0,C=p,$=p+v,w=p+2*v,A,X,O,G,R;for(X=0;X<v;X++)N[C+X]=-1,N[$+X]=-1,N[w+X]=0;for(A=0;A<p;A++)_[A]=-1;for(X=v-1;X>=0;X--)for(G=c[X],R=c[X+1],O=G;O<R;O++)_[f[O]]=X;for(A=p-1;A>=0;A--)b[A]=-1,X=_[A],X!==-1&&(N[w+X]++===0&&(N[$+X]=A),N[M+A]=N[C+X],N[C+X]=A);for(h.lnz=0,h.m2=p,X=0;X<v;X++)if(A=N[C+X],h.lnz++,A<0&&(A=h.m2++),b[A]=X,!(--w[X]<=0)){h.lnz+=N[w+X];var B=y[X];B!==-1&&(N[w+B]===0&&(N[$+B]=N[$+X]),N[M+N[$+X]]=N[C+B],N[C+B]=N[M+A],N[w+B]+=N[w+X])}for(A=0;A<p;A++)b[A]<0&&(b[A]=X++);return!0}});function csMarked(t,r){return t[r]<0}function csMark(t,r){t[r]=csFlip(t[r])}function csUnflip(t){return t<0?csFlip(t):t}function csDfs(t,r,a,n,s){var o=r._index,l=r._ptr,u=r._size,h=u[1],c,f,d,p=0;for(n[0]=t;p>=0;){t=n[p];var v=s?s[t]:t;csMarked(l,t)||(csMark(l,t),n[h+p]=v<0?0:csUnflip(l[v]));var y=1;for(f=n[h+p],d=v<0?0:csUnflip(l[v+1]);f<d;f++)if(c=o[f],!csMarked(l,c)){n[h+p]=f,n[++p]=c,y=0;break}y&&(p--,n[--a]=t)}return a}function csReach(t,r,a,n,s){var o=t._ptr,l=t._size,u=r._index,h=r._ptr,c=l[1],f,d,p,v=c;for(d=h[a],p=h[a+1],f=d;f<p;f++){var y=u[f];csMarked(o,y)||(v=csDfs(y,t,v,n,s))}for(f=v;f<c;f++)csMark(o,n[f]);return v}var name$1k="csSpsolve",dependencies$1k=["divideScalar","multiply","subtract"],createCsSpsolve=factory(name$1k,dependencies$1k,t=>{var{divideScalar:r,multiply:a,subtract:n}=t;return function(o,l,u,h,c,f,d){var p=o._values,v=o._index,y=o._ptr,b=o._size,_=b[1],N=l._values,M=l._index,C=l._ptr,$,w,A,X,O=csReach(o,l,u,h,f);for($=O;$<_;$++)c[h[$]]=0;for(w=C[u],A=C[u+1],$=w;$<A;$++)c[M[$]]=N[$];for(var G=O;G<_;G++){var R=h[G],B=f?f[R]:R;if(!(B<0))for(w=y[B],A=y[B+1],c[R]=r(c[R],p[d?w:A-1]),$=d?w+1:w,X=d?A:A-1;$<X;$++){var F=v[$];c[F]=n(c[F],a(p[$],c[R]))}}return O}}),name$1j="csLu",dependencies$1j=["abs","divideScalar","multiply","subtract","larger","largerEq","SparseMatrix"],createCsLu=factory(name$1j,dependencies$1j,t=>{var{abs:r,divideScalar:a,multiply:n,subtract:s,larger:o,largerEq:l,SparseMatrix:u}=t,h=createCsSpsolve({divideScalar:a,multiply:n,subtract:s});return function(f,d,p){if(!f)return null;var v=f._size,y=v[1],b,_=100,N=100;d&&(b=d.q,_=d.lnz||_,N=d.unz||N);var M=[],C=[],$=[],w=new u({values:M,index:C,ptr:$,size:[y,y]}),A=[],X=[],O=[],G=new u({values:A,index:X,ptr:O,size:[y,y]}),R=[],B,F,U=[],q=[];for(B=0;B<y;B++)U[B]=0,R[B]=-1,$[B+1]=0;_=0,N=0;for(var ee=0;ee<y;ee++){$[ee]=_,O[ee]=N;var z=b?b[ee]:ee,Y=h(w,f,z,q,U,R,1),K=-1,Z=-1;for(F=Y;F<y;F++)if(B=q[F],R[B]<0){var ne=r(U[B]);o(ne,Z)&&(Z=ne,K=B)}else X[N]=R[B],A[N++]=U[B];if(K===-1||Z<=0)return null;R[z]<0&&l(r(U[z]),n(Z,p))&&(K=z);var j=U[K];for(X[N]=ee,A[N++]=j,R[K]=ee,C[_]=K,M[_++]=1,F=Y;F<y;F++)B=q[F],R[B]<0&&(C[_]=B,M[_++]=a(U[B],j)),U[B]=0}for($[y]=_,O[y]=N,F=0;F<_;F++)C[F]=R[C[F]];return M.splice(_,M.length-_),C.splice(_,C.length-_),A.splice(N,A.length-N),X.splice(N,X.length-N),{L:w,U:G,pinv:R}}}),name$1i="slu",dependencies$1i=["typed","abs","add","multiply","transpose","divideScalar","subtract","larger","largerEq","SparseMatrix"],createSlu=factory(name$1i,dependencies$1i,t=>{var{typed:r,abs:a,add:n,multiply:s,transpose:o,divideScalar:l,subtract:u,larger:h,largerEq:c,SparseMatrix:f}=t,d=createCsSqr({add:n,multiply:s,transpose:o}),p=createCsLu({abs:a,divideScalar:l,multiply:s,subtract:u,larger:h,largerEq:c,SparseMatrix:f});return r(name$1i,{"SparseMatrix, number, number":function(y,b,_){if(!isInteger$1(b)||b<0||b>3)throw new Error("Symbolic Ordering and Analysis order must be an integer number in the interval [0, 3]");if(_<0||_>1)throw new Error("Partial pivoting threshold must be a number from 0 to 1");var N=d(b,y,!1),M=p(y,N,_);return{L:M.L,U:M.U,p:M.pinv,q:N.q,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
p: `+this.p.toString()+(this.q?`
q: `+this.q.toString():"")+`
`}}}})});function csIpvec(t,r){var a,n=r.length,s=[];if(t)for(a=0;a<n;a++)s[t[a]]=r[a];else for(a=0;a<n;a++)s[a]=r[a];return s}var name$1h="lusolve",dependencies$1h=["typed","matrix","lup","slu","usolve","lsolve","DenseMatrix"],createLusolve=factory(name$1h,dependencies$1h,t=>{var{typed:r,matrix:a,lup:n,slu:s,usolve:o,lsolve:l,DenseMatrix:u}=t,h=createSolveValidation({DenseMatrix:u});return r(name$1h,{"Array, Array | Matrix":function(p,v){p=a(p);var y=n(p),b=f(y.L,y.U,y.p,null,v);return b.valueOf()},"DenseMatrix, Array | Matrix":function(p,v){var y=n(p);return f(y.L,y.U,y.p,null,v)},"SparseMatrix, Array | Matrix":function(p,v){var y=n(p);return f(y.L,y.U,y.p,null,v)},"SparseMatrix, Array | Matrix, number, number":function(p,v,y,b){var _=s(p,y,b);return f(_.L,_.U,_.p,_.q,v)},"Object, Array | Matrix":function(p,v){return f(p.L,p.U,p.p,p.q,v)}});function c(d){if(isMatrix(d))return d;if(isArray(d))return a(d);throw new TypeError("Invalid Matrix LU decomposition")}function f(d,p,v,y,b){d=c(d),p=c(p),v&&(b=h(d,b,!0),b._data=csIpvec(v,b._data));var _=l(d,b),N=o(p,_);return y&&(N._data=csIpvec(y,N._data)),N}}),name$1g="polynomialRoot",dependencies$1g=["typed","isZero","equalScalar","add","subtract","multiply","divide","sqrt","unaryMinus","cbrt","typeOf","im","re"],createPolynomialRoot=factory(name$1g,dependencies$1g,t=>{var{typed:r,isZero:a,equalScalar:n,add:s,subtract:o,multiply:l,divide:u,sqrt:h,unaryMinus:c,cbrt:f,typeOf:d,im:p,re:v}=t;return r(name$1g,{"number|Complex, ...number|Complex":(y,b)=>{for(var _=[y,...b];_.length>0&&a(_[_.length-1]);)_.pop();if(_.length<2)throw new RangeError("Polynomial [".concat(y,", ").concat(b,"] must have a non-zero non-constant coefficient"));switch(_.length){case 2:return[c(u(_[0],_[1]))];case 3:{var[N,M,C]=_,$=l(2,C),w=l(M,M),A=l(4,C,N);if(n(w,A))return[u(c(M),$)];var X=h(o(w,A));return[u(o(X,M),$),u(o(c(X),M),$)]}case 4:{var[O,G,R,B]=_,F=c(l(3,B)),U=l(R,R),q=l(3,B,G),ee=s(l(2,R,R,R),l(27,B,B,O)),z=l(9,B,R,G);if(n(U,q)&&n(ee,z))return[u(R,F)];var Y=o(U,q),K=o(ee,z),Z=s(l(18,B,R,G,O),l(R,R,G,G)),ne=s(l(4,R,R,R,O),l(4,B,G,G,G),l(27,B,B,O,O));if(n(Z,ne))return[u(o(l(4,B,R,G),s(l(9,B,B,O),l(R,R,R))),l(B,Y)),u(o(l(9,B,O),l(R,G)),l(2,Y))];var j;n(U,q)?j=K:j=u(s(K,h(o(l(K,K),l(4,Y,Y,Y)))),2);var V=!0,L=f(j,V).toArray().map(ae=>u(s(R,ae,u(Y,ae)),F));return L.map(ae=>d(ae)==="Complex"&&n(v(ae),v(ae)+p(ae))?v(ae):ae)}default:throw new RangeError("only implemented for cubic or lower-order polynomials, not ".concat(_))}}})}),name$1f="Help",dependencies$1f=["evaluate"],createHelpClass=factory(name$1f,dependencies$1f,t=>{var{evaluate:r}=t;function a(n){if(!(this instanceof a))throw new SyntaxError("Constructor must be called with the new operator");if(!n)throw new Error('Argument "doc" missing');this.doc=n}return a.prototype.type="Help",a.prototype.isHelp=!0,a.prototype.toString=function(){var n=this.doc||{},s=`
`;if(n.name&&(s+="Name: "+n.name+`

`),n.category&&(s+="Category: "+n.category+`

`),n.description&&(s+=`Description:
    `+n.description+`

`),n.syntax&&(s+=`Syntax:
    `+n.syntax.join(`
    `)+`

`),n.examples){s+=`Examples:
`;for(var o=!1,l=r("config()"),u={config:d=>(o=!0,r("config(newConfig)",{newConfig:d}))},h=0;h<n.examples.length;h++){var c=n.examples[h];s+="    "+c+`
`;var f=void 0;try{f=r(c,u)}catch(d){f=d}f!==void 0&&!isHelp(f)&&(s+="        "+format$1(f,{precision:14})+`
`)}s+=`
`,o&&r("config(originalConfig)",{originalConfig:l})}return n.mayThrow&&n.mayThrow.length&&(s+="Throws: "+n.mayThrow.join(", ")+`

`),n.seealso&&n.seealso.length&&(s+="See also: "+n.seealso.join(", ")+`
`),s},a.prototype.toJSON=function(){var n=clone$3(this.doc);return n.mathjs="Help",n},a.fromJSON=function(n){var s={};return Object.keys(n).filter(o=>o!=="mathjs").forEach(o=>{s[o]=n[o]}),new a(s)},a.prototype.valueOf=a.prototype.toString,a},{isClass:!0}),name$1e="Chain",dependencies$1e=["?on","math","typed"],createChainClass=factory(name$1e,dependencies$1e,t=>{var{on:r,math:a,typed:n}=t;function s(c){if(!(this instanceof s))throw new SyntaxError("Constructor must be called with the new operator");isChain(c)?this.value=c.value:this.value=c}s.prototype.type="Chain",s.prototype.isChain=!0,s.prototype.done=function(){return this.value},s.prototype.valueOf=function(){return this.value},s.prototype.toString=function(){return format$1(this.value)},s.prototype.toJSON=function(){return{mathjs:"Chain",value:this.value}},s.fromJSON=function(c){return new s(c.value)};function o(c,f){typeof f=="function"&&(s.prototype[c]=u(f))}function l(c,f){lazy(s.prototype,c,function(){var p=f();if(typeof p=="function")return u(p)})}function u(c){return function(){if(arguments.length===0)return new s(c(this.value));for(var f=[this.value],d=0;d<arguments.length;d++)f[d+1]=arguments[d];if(n.isTypedFunction(c)){var p=n.resolve(c,f);if(p.params.length===1)throw new Error("chain function "+c.name+" cannot match rest parameter between chain value and additional arguments.");return new s(p.implementation.apply(c,f))}return new s(c.apply(c,f))}}s.createProxy=function(c,f){if(typeof c=="string")o(c,f);else{var d=function(y){hasOwnProperty(c,y)&&h[y]===void 0&&l(y,()=>c[y])};for(var p in c)d(p)}};var h={expression:!0,docs:!0,type:!0,classes:!0,json:!0,error:!0,isChain:!0};return s.createProxy(a),r&&r("import",function(c,f,d){d||l(c,f)}),s},{isClass:!0}),eDocs={name:"e",category:"Constants",syntax:["e"],description:"Euler's number, the base of the natural logarithm. Approximately equal to 2.71828",examples:["e","e ^ 2","exp(2)","log(e)"],seealso:["exp"]},falseDocs={name:"false",category:"Constants",syntax:["false"],description:"Boolean value false",examples:["false"],seealso:["true"]},iDocs={name:"i",category:"Constants",syntax:["i"],description:"Imaginary unit, defined as i*i=-1. A complex number is described as a + b*i, where a is the real part, and b is the imaginary part.",examples:["i","i * i","sqrt(-1)"],seealso:[]},InfinityDocs={name:"Infinity",category:"Constants",syntax:["Infinity"],description:"Infinity, a number which is larger than the maximum number that can be handled by a floating point number.",examples:["Infinity","1 / 0"],seealso:[]},LN10Docs={name:"LN10",category:"Constants",syntax:["LN10"],description:"Returns the natural logarithm of 10, approximately equal to 2.302",examples:["LN10","log(10)"],seealso:[]},LN2Docs={name:"LN2",category:"Constants",syntax:["LN2"],description:"Returns the natural logarithm of 2, approximately equal to 0.693",examples:["LN2","log(2)"],seealso:[]},LOG10EDocs={name:"LOG10E",category:"Constants",syntax:["LOG10E"],description:"Returns the base-10 logarithm of E, approximately equal to 0.434",examples:["LOG10E","log(e, 10)"],seealso:[]},LOG2EDocs={name:"LOG2E",category:"Constants",syntax:["LOG2E"],description:"Returns the base-2 logarithm of E, approximately equal to 1.442",examples:["LOG2E","log(e, 2)"],seealso:[]},NaNDocs={name:"NaN",category:"Constants",syntax:["NaN"],description:"Not a number",examples:["NaN","0 / 0"],seealso:[]},nullDocs={name:"null",category:"Constants",syntax:["null"],description:"Value null",examples:["null"],seealso:["true","false"]},phiDocs={name:"phi",category:"Constants",syntax:["phi"],description:"Phi is the golden ratio. Two quantities are in the golden ratio if their ratio is the same as the ratio of their sum to the larger of the two quantities. Phi is defined as `(1 + sqrt(5)) / 2` and is approximately 1.618034...",examples:["phi"],seealso:[]},piDocs={name:"pi",category:"Constants",syntax:["pi"],description:"The number pi is a mathematical constant that is the ratio of a circle's circumference to its diameter, and is approximately equal to 3.14159",examples:["pi","sin(pi/2)"],seealso:["tau"]},SQRT12Docs={name:"SQRT1_2",category:"Constants",syntax:["SQRT1_2"],description:"Returns the square root of 1/2, approximately equal to 0.707",examples:["SQRT1_2","sqrt(1/2)"],seealso:[]},SQRT2Docs={name:"SQRT2",category:"Constants",syntax:["SQRT2"],description:"Returns the square root of 2, approximately equal to 1.414",examples:["SQRT2","sqrt(2)"],seealso:[]},tauDocs={name:"tau",category:"Constants",syntax:["tau"],description:"Tau is the ratio constant of a circle's circumference to radius, equal to 2 * pi, approximately 6.2832.",examples:["tau","2 * pi"],seealso:["pi"]},trueDocs={name:"true",category:"Constants",syntax:["true"],description:"Boolean value true",examples:["true"],seealso:["false"]},versionDocs={name:"version",category:"Constants",syntax:["version"],description:"A string with the version number of math.js",examples:["version"],seealso:[]},bignumberDocs={name:"bignumber",category:"Construction",syntax:["bignumber(x)"],description:"Create a big number from a number or string.",examples:["0.1 + 0.2","bignumber(0.1) + bignumber(0.2)",'bignumber("7.2")','bignumber("7.2e500")',"bignumber([0.1, 0.2, 0.3])"],seealso:["boolean","bigint","complex","fraction","index","matrix","string","unit"]},bigintDocs={name:"bigint",category:"Construction",syntax:["bigint(x)"],description:"Create a bigint, an integer with an arbitrary number of digits, from a number or string.",examples:["123123123123123123 # a large number will lose digits",'bigint("123123123123123123")','bignumber(["1", "3", "5"])'],seealso:["boolean","bignumber","number","complex","fraction","index","matrix","string","unit"]},booleanDocs={name:"boolean",category:"Construction",syntax:["x","boolean(x)"],description:"Convert a string or number into a boolean.",examples:["boolean(0)","boolean(1)","boolean(3)",'boolean("true")','boolean("false")',"boolean([1, 0, 1, 1])"],seealso:["bignumber","complex","index","matrix","number","string","unit"]},complexDocs={name:"complex",category:"Construction",syntax:["complex()","complex(re, im)","complex(string)"],description:"Create a complex number.",examples:["complex()","complex(2, 3)",'complex("7 - 2i")'],seealso:["bignumber","boolean","index","matrix","number","string","unit"]},createUnitDocs={name:"createUnit",category:"Construction",syntax:["createUnit(definitions)","createUnit(name, definition)"],description:"Create a user-defined unit and register it with the Unit type.",examples:['createUnit("foo")','createUnit("knot", {definition: "0.514444444 m/s", aliases: ["knots", "kt", "kts"]})','createUnit("mph", "1 mile/hour")'],seealso:["unit","splitUnit"]},fractionDocs={name:"fraction",category:"Construction",syntax:["fraction(num)","fraction(matrix)","fraction(num,den)","fraction({n: num, d: den})"],description:"Create a fraction from a number or from integer numerator and denominator.",examples:["fraction(0.125)","fraction(1, 3) + fraction(2, 5)","fraction({n: 333, d: 53})","fraction([sqrt(9), sqrt(10), sqrt(11)])"],seealso:["bignumber","boolean","complex","index","matrix","string","unit"]},indexDocs={name:"index",category:"Construction",syntax:["[start]","[start:end]","[start:step:end]","[start1, start 2, ...]","[start1:end1, start2:end2, ...]","[start1:step1:end1, start2:step2:end2, ...]"],description:"Create an index to get or replace a subset of a matrix",examples:["A = [1, 2, 3; 4, 5, 6]","A[1, :]","A[1, 2] = 50","A[1:2, 1:2] = 1","B = [1, 2, 3]","B[B>1 and B<3]"],seealso:["bignumber","boolean","complex","matrix","number","range","string","unit"]},matrixDocs={name:"matrix",category:"Construction",syntax:["[]","[a1, b1, ...; a2, b2, ...]","matrix()",'matrix("dense")',"matrix([...])"],description:"Create a matrix.",examples:["[]","[1, 2, 3]","[1, 2, 3; 4, 5, 6]","matrix()","matrix([3, 4])",'matrix([3, 4; 5, 6], "sparse")','matrix([3, 4; 5, 6], "sparse", "number")'],seealso:["bignumber","boolean","complex","index","number","string","unit","sparse"]},numberDocs={name:"number",category:"Construction",syntax:["x","number(x)","number(unit, valuelessUnit)"],description:"Create a number or convert a string or boolean into a number.",examples:["2","2e3","4.05","number(2)",'number("7.2")',"number(true)","number([true, false, true, true])",'number(unit("52cm"), "m")'],seealso:["bignumber","bigint","boolean","complex","fraction","index","matrix","string","unit"]},sparseDocs={name:"sparse",category:"Construction",syntax:["sparse()","sparse([a1, b1, ...; a1, b2, ...])",'sparse([a1, b1, ...; a1, b2, ...], "number")'],description:"Create a sparse matrix.",examples:["sparse()","sparse([3, 4; 5, 6])",'sparse([3, 0; 5, 0], "number")'],seealso:["bignumber","boolean","complex","index","number","string","unit","matrix"]},splitUnitDocs={name:"splitUnit",category:"Construction",syntax:["splitUnit(unit: Unit, parts: Unit[])"],description:"Split a unit in an array of units whose sum is equal to the original unit.",examples:['splitUnit(1 m, ["feet", "inch"])'],seealso:["unit","createUnit"]},stringDocs={name:"string",category:"Construction",syntax:['"text"',"string(x)"],description:"Create a string or convert a value to a string",examples:['"Hello World!"',"string(4.2)","string(3 + 2i)"],seealso:["bignumber","boolean","complex","index","matrix","number","unit"]},unitDocs={name:"unit",category:"Construction",syntax:["value unit","unit(value, unit)","unit(string)"],description:"Create a unit.",examples:["5.5 mm","3 inch",'unit(7.1, "kilogram")','unit("23 deg")'],seealso:["bignumber","boolean","complex","index","matrix","number","string"]},configDocs={name:"config",category:"Core",syntax:["config()","config(options)"],description:"Get configuration or change configuration.",examples:["config()","1/3 + 1/4",'config({number: "Fraction"})',"1/3 + 1/4"],seealso:[]},importDocs={name:"import",category:"Core",syntax:["import(functions)","import(functions, options)"],description:"Import functions or constants from an object.",examples:["import({myFn: f(x)=x^2, myConstant: 32 })","myFn(2)","myConstant"],seealso:[]},typedDocs={name:"typed",category:"Core",syntax:["typed(signatures)","typed(name, signatures)"],description:"Create a typed function.",examples:['double = typed({ "number": f(x)=x+x, "string": f(x)=concat(x,x) })',"double(2)",'double("hello")'],seealso:[]},derivativeDocs={name:"derivative",category:"Algebra",syntax:["derivative(expr, variable)","derivative(expr, variable, {simplify: boolean})"],description:"Takes the derivative of an expression expressed in parser Nodes. The derivative will be taken over the supplied variable in the second parameter. If there are multiple variables in the expression, it will return a partial derivative.",examples:['derivative("2x^3", "x")','derivative("2x^3", "x", {simplify: false})','derivative("2x^2 + 3x + 4", "x")','derivative("sin(2x)", "x")','f = parse("x^2 + x")','x = parse("x")',"df = derivative(f, x)","df.evaluate({x: 3})"],seealso:["simplify","parse","evaluate"]},leafCountDocs={name:"leafCount",category:"Algebra",syntax:["leafCount(expr)"],description:"Computes the number of leaves in the parse tree of the given expression",examples:['leafCount("e^(i*pi)-1")','leafCount(parse("{a: 22/7, b: 10^(1/2)}"))'],seealso:["simplify"]},lsolveDocs={name:"lsolve",category:"Algebra",syntax:["x=lsolve(L, b)"],description:"Finds one solution of the linear system L * x = b where L is an [n x n] lower triangular matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lsolve(a, b)"],seealso:["lsolveAll","lup","lusolve","usolve","matrix","sparse"]},lsolveAllDocs={name:"lsolveAll",category:"Algebra",syntax:["x=lsolveAll(L, b)"],description:"Finds all solutions of the linear system L * x = b where L is an [n x n] lower triangular matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lsolve(a, b)"],seealso:["lsolve","lup","lusolve","usolve","matrix","sparse"]},lupDocs={name:"lup",category:"Algebra",syntax:["lup(m)"],description:"Calculate the Matrix LU decomposition with partial pivoting. Matrix A is decomposed in three matrices (L, U, P) where P * A = L * U",examples:["lup([[2, 1], [1, 4]])","lup(matrix([[2, 1], [1, 4]]))","lup(sparse([[2, 1], [1, 4]]))"],seealso:["lusolve","lsolve","usolve","matrix","sparse","slu","qr"]},lusolveDocs={name:"lusolve",category:"Algebra",syntax:["x=lusolve(A, b)","x=lusolve(lu, b)"],description:"Solves the linear system A * x = b where A is an [n x n] matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lusolve(a, b)"],seealso:["lup","slu","lsolve","usolve","matrix","sparse"]},polynomialRootDocs={name:"polynomialRoot",category:"Algebra",syntax:["x=polynomialRoot(-6, 3)","x=polynomialRoot(4, -4, 1)","x=polynomialRoot(-8, 12, -6, 1)"],description:"Finds the roots of a univariate polynomial given by its coefficients starting from constant, linear, and so on, increasing in degree.",examples:["a = polynomialRoot(-6, 11, -6, 1)"],seealso:["cbrt","sqrt"]},qrDocs={name:"qr",category:"Algebra",syntax:["qr(A)"],description:"Calculates the Matrix QR decomposition. Matrix `A` is decomposed in two matrices (`Q`, `R`) where `Q` is an orthogonal matrix and `R` is an upper triangular matrix.",examples:["qr([[1, -1,  4], [1,  4, -2], [1,  4,  2], [1,  -1, 0]])"],seealso:["lup","slu","matrix"]},rationalizeDocs={name:"rationalize",category:"Algebra",syntax:["rationalize(expr)","rationalize(expr, scope)","rationalize(expr, scope, detailed)"],description:"Transform a rationalizable expression in a rational fraction. If rational fraction is one variable polynomial then converts the numerator and denominator in canonical form, with decreasing exponents, returning the coefficients of numerator.",examples:['rationalize("2x/y - y/(x+1)")','rationalize("2x/y - y/(x+1)", true)'],seealso:["simplify"]},resolveDocs={name:"resolve",category:"Algebra",syntax:["resolve(node, scope)"],description:"Recursively substitute variables in an expression tree.",examples:['resolve(parse("1 + x"), { x: 7 })','resolve(parse("size(text)"), { text: "Hello World" })','resolve(parse("x + y"), { x: parse("3z") })','resolve(parse("3x"), { x: parse("y+z"), z: parse("w^y") })'],seealso:["simplify","evaluate"],mayThrow:["ReferenceError"]},simplifyDocs={name:"simplify",category:"Algebra",syntax:["simplify(expr)","simplify(expr, rules)"],description:"Simplify an expression tree.",examples:['simplify("3 + 2 / 4")','simplify("2x + x")','f = parse("x * (x + 2 + x)")',"simplified = simplify(f)","simplified.evaluate({x: 2})"],seealso:["simplifyCore","derivative","evaluate","parse","rationalize","resolve"]},simplifyConstantDocs={name:"simplifyConstant",category:"Algebra",syntax:["simplifyConstant(expr)","simplifyConstant(expr, options)"],description:"Replace constant subexpressions of node with their values.",examples:['simplifyConstant("(3-3)*x")','simplifyConstant(parse("z-cos(tau/8)"))'],seealso:["simplify","simplifyCore","evaluate"]},simplifyCoreDocs={name:"simplifyCore",category:"Algebra",syntax:["simplifyCore(node)"],description:"Perform simple one-pass simplifications on an expression tree.",examples:['simplifyCore(parse("0*x"))','simplifyCore(parse("(x+0)*2"))'],seealso:["simplify","simplifyConstant","evaluate"]},sluDocs={name:"slu",category:"Algebra",syntax:["slu(A, order, threshold)"],description:"Calculate the Matrix LU decomposition with full pivoting. Matrix A is decomposed in two matrices (L, U) and two permutation vectors (pinv, q) where P * A * Q = L * U",examples:["slu(sparse([4.5, 0, 3.2, 0; 3.1, 2.9, 0, 0.9; 0, 1.7, 3, 0; 3.5, 0.4, 0, 1]), 1, 0.001)"],seealso:["lusolve","lsolve","usolve","matrix","sparse","lup","qr"]},symbolicEqualDocs={name:"symbolicEqual",category:"Algebra",syntax:["symbolicEqual(expr1, expr2)","symbolicEqual(expr1, expr2, options)"],description:"Returns true if the difference of the expressions simplifies to 0",examples:['symbolicEqual("x*y","y*x")','symbolicEqual("abs(x^2)", "x^2")','symbolicEqual("abs(x)", "x", {context: {abs: {trivial: true}}})'],seealso:["simplify","evaluate"]},usolveDocs={name:"usolve",category:"Algebra",syntax:["x=usolve(U, b)"],description:"Finds one solution of the linear system U * x = b where U is an [n x n] upper triangular matrix and b is a [n] column vector.",examples:["x=usolve(sparse([1, 1, 1, 1; 0, 1, 1, 1; 0, 0, 1, 1; 0, 0, 0, 1]), [1; 2; 3; 4])"],seealso:["usolveAll","lup","lusolve","lsolve","matrix","sparse"]},usolveAllDocs={name:"usolveAll",category:"Algebra",syntax:["x=usolve(U, b)"],description:"Finds all solutions of the linear system U * x = b where U is an [n x n] upper triangular matrix and b is a [n] column vector.",examples:["x=usolve(sparse([1, 1, 1, 1; 0, 1, 1, 1; 0, 0, 1, 1; 0, 0, 0, 1]), [1; 2; 3; 4])"],seealso:["usolve","lup","lusolve","lsolve","matrix","sparse"]},absDocs={name:"abs",category:"Arithmetic",syntax:["abs(x)"],description:"Compute the absolute value.",examples:["abs(3.5)","abs(-4.2)"],seealso:["sign"]},addDocs={name:"add",category:"Operators",syntax:["x + y","add(x, y)"],description:"Add two values.",examples:["a = 2.1 + 3.6","a - 3.6","3 + 2i","3 cm + 2 inch",'"2.3" + "4"'],seealso:["subtract"]},cbrtDocs={name:"cbrt",category:"Arithmetic",syntax:["cbrt(x)","cbrt(x, allRoots)"],description:"Compute the cubic root value. If x = y * y * y, then y is the cubic root of x. When `x` is a number or complex number, an optional second argument `allRoots` can be provided to return all three cubic roots. If not provided, the principal root is returned",examples:["cbrt(64)","cube(4)","cbrt(-8)","cbrt(2 + 3i)","cbrt(8i)","cbrt(8i, true)","cbrt(27 m^3)"],seealso:["square","sqrt","cube","multiply"]},ceilDocs={name:"ceil",category:"Arithmetic",syntax:["ceil(x)","ceil(x, n)","ceil(unit, valuelessUnit)","ceil(unit, n, valuelessUnit)"],description:"Round a value towards plus infinity. If x is complex, both real and imaginary part are rounded towards plus infinity.",examples:["ceil(3.2)","ceil(3.8)","ceil(-4.2)","ceil(3.241cm, cm)","ceil(3.241cm, 2, cm)"],seealso:["floor","fix","round"]},cubeDocs={name:"cube",category:"Arithmetic",syntax:["cube(x)"],description:"Compute the cube of a value. The cube of x is x * x * x.",examples:["cube(2)","2^3","2 * 2 * 2"],seealso:["multiply","square","pow"]},divideDocs={name:"divide",category:"Operators",syntax:["x / y","divide(x, y)"],description:"Divide two values.",examples:["a = 2 / 3","a * 3","4.5 / 2","3 + 4 / 2","(3 + 4) / 2","18 km / 4.5"],seealso:["multiply"]},dotDivideDocs={name:"dotDivide",category:"Operators",syntax:["x ./ y","dotDivide(x, y)"],description:"Divide two values element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","b = [2, 1, 1; 3, 2, 5]","a ./ b"],seealso:["multiply","dotMultiply","divide"]},dotMultiplyDocs={name:"dotMultiply",category:"Operators",syntax:["x .* y","dotMultiply(x, y)"],description:"Multiply two values element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","b = [2, 1, 1; 3, 2, 5]","a .* b"],seealso:["multiply","divide","dotDivide"]},dotPowDocs={name:"dotPow",category:"Operators",syntax:["x .^ y","dotPow(x, y)"],description:"Calculates the power of x to y element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","a .^ 2"],seealso:["pow"]},expDocs={name:"exp",category:"Arithmetic",syntax:["exp(x)"],description:"Calculate the exponent of a value.",examples:["exp(1.3)","e ^ 1.3","log(exp(1.3))","x = 2.4","(exp(i*x) == cos(x) + i*sin(x))   # Euler's formula"],seealso:["expm","expm1","pow","log"]},expmDocs={name:"expm",category:"Arithmetic",syntax:["exp(x)"],description:"Compute the matrix exponential, expm(A) = e^A. The matrix must be square. Not to be confused with exp(a), which performs element-wise exponentiation.",examples:["expm([[0,2],[0,0]])"],seealso:["exp"]},expm1Docs={name:"expm1",category:"Arithmetic",syntax:["expm1(x)"],description:"Calculate the value of subtracting 1 from the exponential value.",examples:["expm1(2)","pow(e, 2) - 1","log(expm1(2) + 1)"],seealso:["exp","pow","log"]},fixDocs={name:"fix",category:"Arithmetic",syntax:["fix(x)","fix(x, n)","fix(unit, valuelessUnit)","fix(unit, n, valuelessUnit)"],description:"Round a value towards zero. If x is complex, both real and imaginary part are rounded towards zero.",examples:["fix(3.2)","fix(3.8)","fix(-4.2)","fix(-4.8)","fix(3.241cm, cm)","fix(3.241cm, 2, cm)"],seealso:["ceil","floor","round"]},floorDocs={name:"floor",category:"Arithmetic",syntax:["floor(x)","floor(x, n)","floor(unit, valuelessUnit)","floor(unit, n, valuelessUnit)"],description:"Round a value towards minus infinity.If x is complex, both real and imaginary part are rounded towards minus infinity.",examples:["floor(3.2)","floor(3.8)","floor(-4.2)","floor(3.241cm, cm)","floor(3.241cm, 2, cm)"],seealso:["ceil","fix","round"]},gcdDocs={name:"gcd",category:"Arithmetic",syntax:["gcd(a, b)","gcd(a, b, c, ...)"],description:"Compute the greatest common divisor.",examples:["gcd(8, 12)","gcd(-4, 6)","gcd(25, 15, -10)"],seealso:["lcm","xgcd"]},hypotDocs={name:"hypot",category:"Arithmetic",syntax:["hypot(a, b, c, ...)","hypot([a, b, c, ...])"],description:"Calculate the hypotenuse of a list with values.",examples:["hypot(3, 4)","sqrt(3^2 + 4^2)","hypot(-2)","hypot([3, 4, 5])"],seealso:["abs","norm"]},invmodDocs={name:"invmod",category:"Arithmetic",syntax:["invmod(a, b)"],description:"Calculate the (modular) multiplicative inverse of a modulo b. Solution to the equation ax  1 (mod b)",examples:["invmod(8, 12)","invmod(7, 13)","invmod(15151, 15122)"],seealso:["gcd","xgcd"]},lcmDocs={name:"lcm",category:"Arithmetic",syntax:["lcm(x, y)"],description:"Compute the least common multiple.",examples:["lcm(4, 6)","lcm(6, 21)","lcm(6, 21, 5)"],seealso:["gcd"]},logDocs={name:"log",category:"Arithmetic",syntax:["log(x)","log(x, base)"],description:"Compute the logarithm of a value. If no base is provided, the natural logarithm of x is calculated. If base if provided, the logarithm is calculated for the specified base. log(x, base) is defined as log(x) / log(base).",examples:["log(3.5)","a = log(2.4)","exp(a)","10 ^ 4","log(10000, 10)","log(10000) / log(10)","b = log(1024, 2)","2 ^ b"],seealso:["exp","log1p","log2","log10"]},log10Docs={name:"log10",category:"Arithmetic",syntax:["log10(x)"],description:"Compute the 10-base logarithm of a value.",examples:["log10(0.00001)","log10(10000)","10 ^ 4","log(10000) / log(10)","log(10000, 10)"],seealso:["exp","log"]},log1pDocs={name:"log1p",category:"Arithmetic",syntax:["log1p(x)","log1p(x, base)"],description:"Calculate the logarithm of a `value+1`",examples:["log1p(2.5)","exp(log1p(1.4))","pow(10, 4)","log1p(9999, 10)","log1p(9999) / log(10)"],seealso:["exp","log","log2","log10"]},log2Docs={name:"log2",category:"Arithmetic",syntax:["log2(x)"],description:"Calculate the 2-base of a value. This is the same as calculating `log(x, 2)`.",examples:["log2(0.03125)","log2(16)","log2(16) / log2(2)","pow(2, 4)"],seealso:["exp","log1p","log","log10"]},modDocs={name:"mod",category:"Operators",syntax:["x % y","x mod y","mod(x, y)"],description:"Calculates the modulus, the remainder of an integer division.",examples:["7 % 3","11 % 2","10 mod 4","isOdd(x) = x % 2","isOdd(2)","isOdd(3)"],seealso:["divide"]},multiplyDocs={name:"multiply",category:"Operators",syntax:["x * y","multiply(x, y)"],description:"multiply two values.",examples:["a = 2.1 * 3.4","a / 3.4","2 * 3 + 4","2 * (3 + 4)","3 * 2.1 km"],seealso:["divide"]},normDocs={name:"norm",category:"Arithmetic",syntax:["norm(x)","norm(x, p)"],description:"Calculate the norm of a number, vector or matrix.",examples:["abs(-3.5)","norm(-3.5)","norm(3 - 4i)","norm([1, 2, -3], Infinity)","norm([1, 2, -3], -Infinity)","norm([3, 4], 2)","norm([[1, 2], [3, 4]], 1)",'norm([[1, 2], [3, 4]], "inf")','norm([[1, 2], [3, 4]], "fro")']},nthRootDocs={name:"nthRoot",category:"Arithmetic",syntax:["nthRoot(a)","nthRoot(a, root)"],description:'Calculate the nth root of a value. The principal nth root of a positive real number A, is the positive real solution of the equation "x^root = A".',examples:["4 ^ 3","nthRoot(64, 3)","nthRoot(9, 2)","sqrt(9)"],seealso:["nthRoots","pow","sqrt"]},nthRootsDocs={name:"nthRoots",category:"Arithmetic",syntax:["nthRoots(A)","nthRoots(A, root)"],description:'Calculate the nth roots of a value. An nth root of a positive real number A, is a positive real solution of the equation "x^root = A". This function returns an array of complex values.',examples:["nthRoots(1)","nthRoots(1, 3)"],seealso:["sqrt","pow","nthRoot"]},powDocs={name:"pow",category:"Operators",syntax:["x ^ y","pow(x, y)"],description:"Calculates the power of x to y, x^y.",examples:["2^3","2*2*2","1 + e ^ (pi * i)","pow([[1, 2], [4, 3]], 2)","pow([[1, 2], [4, 3]], -1)"],seealso:["multiply","nthRoot","nthRoots","sqrt"]},roundDocs={name:"round",category:"Arithmetic",syntax:["round(x)","round(x, n)","round(unit, valuelessUnit)","round(unit, n, valuelessUnit)"],description:"round a value towards the nearest integer.If x is complex, both real and imaginary part are rounded towards the nearest integer. When n is specified, the value is rounded to n decimals.",examples:["round(3.2)","round(3.8)","round(-4.2)","round(-4.8)","round(pi, 3)","round(123.45678, 2)","round(3.241cm, 2, cm)","round([3.2, 3.8, -4.7])"],seealso:["ceil","floor","fix"]},signDocs={name:"sign",category:"Arithmetic",syntax:["sign(x)"],description:"Compute the sign of a value. The sign of a value x is 1 when x>0, -1 when x<0, and 0 when x=0.",examples:["sign(3.5)","sign(-4.2)","sign(0)"],seealso:["abs"]},sqrtDocs={name:"sqrt",category:"Arithmetic",syntax:["sqrt(x)"],description:"Compute the square root value. If x = y * y, then y is the square root of x.",examples:["sqrt(25)","5 * 5","sqrt(-1)"],seealso:["square","sqrtm","multiply","nthRoot","nthRoots","pow"]},sqrtmDocs={name:"sqrtm",category:"Arithmetic",syntax:["sqrtm(x)"],description:"Calculate the principal square root of a square matrix. The principal square root matrix `X` of another matrix `A` is such that `X * X = A`.",examples:["sqrtm([[33, 24], [48, 57]])"],seealso:["sqrt","abs","square","multiply"]},sylvesterDocs={name:"sylvester",category:"Algebra",syntax:["sylvester(A,B,C)"],description:"Solves the real-valued Sylvester equation AX+XB=C for X",examples:["sylvester([[-1, -2], [1, 1]], [[-2, 1], [-1, 2]], [[-3, 2], [3, 0]])","A = [[-1, -2], [1, 1]]; B = [[2, -1], [1, -2]]; C = [[-3, 2], [3, 0]]","sylvester(A, B, C)"],seealso:["schur","lyap"]},schurDocs={name:"schur",category:"Algebra",syntax:["schur(A)"],description:"Performs a real Schur decomposition of the real matrix A = UTU'",examples:["schur([[1, 0], [-4, 3]])","A = [[1, 0], [-4, 3]]","schur(A)"],seealso:["lyap","sylvester"]},lyapDocs={name:"lyap",category:"Algebra",syntax:["lyap(A,Q)"],description:"Solves the Continuous-time Lyapunov equation AP+PA'+Q=0 for P",examples:["lyap([[-2, 0], [1, -4]], [[3, 1], [1, 3]])","A = [[-2, 0], [1, -4]]","Q = [[3, 1], [1, 3]]","lyap(A,Q)"],seealso:["schur","sylvester"]},squareDocs={name:"square",category:"Arithmetic",syntax:["square(x)"],description:"Compute the square of a value. The square of x is x * x.",examples:["square(3)","sqrt(9)","3^2","3 * 3"],seealso:["multiply","pow","sqrt","cube"]},subtractDocs={name:"subtract",category:"Operators",syntax:["x - y","subtract(x, y)"],description:"subtract two values.",examples:["a = 5.3 - 2","a + 2","2/3 - 1/6","2 * 3 - 3","2.1 km - 500m"],seealso:["add"]},unaryMinusDocs={name:"unaryMinus",category:"Operators",syntax:["-x","unaryMinus(x)"],description:"Inverse the sign of a value. Converts booleans and strings to numbers.",examples:["-4.5","-(-5.6)",'-"22"'],seealso:["add","subtract","unaryPlus"]},unaryPlusDocs={name:"unaryPlus",category:"Operators",syntax:["+x","unaryPlus(x)"],description:"Converts booleans and strings to numbers.",examples:["+true",'+"2"'],seealso:["add","subtract","unaryMinus"]},xgcdDocs={name:"xgcd",category:"Arithmetic",syntax:["xgcd(a, b)"],description:"Calculate the extended greatest common divisor for two values. The result is an array [d, x, y] with 3 entries, where d is the greatest common divisor, and d = x * a + y * b.",examples:["xgcd(8, 12)","gcd(8, 12)","xgcd(36163, 21199)"],seealso:["gcd","lcm"]},bitAndDocs={name:"bitAnd",category:"Bitwise",syntax:["x & y","bitAnd(x, y)"],description:"Bitwise AND operation. Performs the logical AND operation on each pair of the corresponding bits of the two given values by multiplying them. If both bits in the compared position are 1, the bit in the resulting binary representation is 1, otherwise, the result is 0",examples:["5 & 3","bitAnd(53, 131)","[1, 12, 31] & 42"],seealso:["bitNot","bitOr","bitXor","leftShift","rightArithShift","rightLogShift"]},bitNotDocs={name:"bitNot",category:"Bitwise",syntax:["~x","bitNot(x)"],description:"Bitwise NOT operation. Performs a logical negation on each bit of the given value. Bits that are 0 become 1, and those that are 1 become 0.",examples:["~1","~2","bitNot([2, -3, 4])"],seealso:["bitAnd","bitOr","bitXor","leftShift","rightArithShift","rightLogShift"]},bitOrDocs={name:"bitOr",category:"Bitwise",syntax:["x | y","bitOr(x, y)"],description:"Bitwise OR operation. Performs the logical inclusive OR operation on each pair of corresponding bits of the two given values. The result in each position is 1 if the first bit is 1 or the second bit is 1 or both bits are 1, otherwise, the result is 0.",examples:["5 | 3","bitOr([1, 2, 3], 4)"],seealso:["bitAnd","bitNot","bitXor","leftShift","rightArithShift","rightLogShift"]},bitXorDocs={name:"bitXor",category:"Bitwise",syntax:["bitXor(x, y)"],description:"Bitwise XOR operation, exclusive OR. Performs the logical exclusive OR operation on each pair of corresponding bits of the two given values. The result in each position is 1 if only the first bit is 1 or only the second bit is 1, but will be 0 if both are 0 or both are 1.",examples:["bitOr(1, 2)","bitXor([2, 3, 4], 4)"],seealso:["bitAnd","bitNot","bitOr","leftShift","rightArithShift","rightLogShift"]},leftShiftDocs={name:"leftShift",category:"Bitwise",syntax:["x << y","leftShift(x, y)"],description:"Bitwise left logical shift of a value x by y number of bits.",examples:["4 << 1","8 >> 1"],seealso:["bitAnd","bitNot","bitOr","bitXor","rightArithShift","rightLogShift"]},rightArithShiftDocs={name:"rightArithShift",category:"Bitwise",syntax:["x >> y","rightArithShift(x, y)"],description:"Bitwise right arithmetic shift of a value x by y number of bits.",examples:["8 >> 1","4 << 1","-12 >> 2"],seealso:["bitAnd","bitNot","bitOr","bitXor","leftShift","rightLogShift"]},rightLogShiftDocs={name:"rightLogShift",category:"Bitwise",syntax:["x >>> y","rightLogShift(x, y)"],description:"Bitwise right logical shift of a value x by y number of bits.",examples:["8 >>> 1","4 << 1","-12 >>> 2"],seealso:["bitAnd","bitNot","bitOr","bitXor","leftShift","rightArithShift"]},bellNumbersDocs={name:"bellNumbers",category:"Combinatorics",syntax:["bellNumbers(n)"],description:"The Bell Numbers count the number of partitions of a set. A partition is a pairwise disjoint subset of S whose union is S. `bellNumbers` only takes integer arguments. The following condition must be enforced: n >= 0.",examples:["bellNumbers(3)","bellNumbers(8)"],seealso:["stirlingS2"]},catalanDocs={name:"catalan",category:"Combinatorics",syntax:["catalan(n)"],description:"The Catalan Numbers enumerate combinatorial structures of many different types. catalan only takes integer arguments. The following condition must be enforced: n >= 0.",examples:["catalan(3)","catalan(8)"],seealso:["bellNumbers"]},compositionDocs={name:"composition",category:"Combinatorics",syntax:["composition(n, k)"],description:"The composition counts of n into k parts. composition only takes integer arguments. The following condition must be enforced: k <= n.",examples:["composition(5, 3)"],seealso:["combinations"]},stirlingS2Docs={name:"stirlingS2",category:"Combinatorics",syntax:["stirlingS2(n, k)"],description:"The Stirling numbers of the second kind, counts the number of ways to partition a set of n labelled objects into k nonempty unlabelled subsets. `stirlingS2` only takes integer arguments. The following condition must be enforced: k <= n. If n = k or k = 1, then s(n,k) = 1.",examples:["stirlingS2(5, 3)"],seealso:["bellNumbers","bernoulli"]},argDocs={name:"arg",category:"Complex",syntax:["arg(x)"],description:"Compute the argument of a complex value. If x = a+bi, the argument is computed as atan2(b, a).",examples:["arg(2 + 2i)","atan2(3, 2)","arg(2 + 3i)"],seealso:["re","im","conj","abs"]},conjDocs={name:"conj",category:"Complex",syntax:["conj(x)"],description:"Compute the complex conjugate of a complex value. If x = a+bi, the complex conjugate is a-bi.",examples:["conj(2 + 3i)","conj(2 - 3i)","conj(-5.2i)"],seealso:["re","im","abs","arg"]},imDocs={name:"im",category:"Complex",syntax:["im(x)"],description:"Get the imaginary part of a complex number.",examples:["im(2 + 3i)","re(2 + 3i)","im(-5.2i)","im(2.4)"],seealso:["re","conj","abs","arg"]},reDocs={name:"re",category:"Complex",syntax:["re(x)"],description:"Get the real part of a complex number.",examples:["re(2 + 3i)","im(2 + 3i)","re(-5.2i)","re(2.4)"],seealso:["im","conj","abs","arg"]},evaluateDocs={name:"evaluate",category:"Expression",syntax:["evaluate(expression)","evaluate(expression, scope)","evaluate([expr1, expr2, expr3, ...])","evaluate([expr1, expr2, expr3, ...], scope)"],description:"Evaluate an expression or an array with expressions.",examples:['evaluate("2 + 3")','evaluate("sqrt(16)")','evaluate("2 inch to cm")','evaluate("sin(x * pi)", { "x": 1/2 })','evaluate(["width=2", "height=4","width*height"])'],seealso:["parser","parse","compile"]},parserDocs={name:"parser",category:"Expression",syntax:["parser()"],description:"Create a parser object that keeps a context of variables and their values, allowing the evaluation of expressions in that context.",examples:["myParser = parser()",'myParser.evaluate("sqrt(3^2 + 4^2)")','myParser.set("x", 3)','myParser.evaluate("y = x + 3")','myParser.evaluate(["y = x + 3", "y = y + 1"])','myParser.get("y")'],seealso:["evaluate","parse","compile"]},parseDocs={name:"parse",category:"Expression",syntax:["parse(expr)","parse(expr, options)","parse([expr1, expr2, expr3, ...])","parse([expr1, expr2, expr3, ...], options)"],description:"Parse an expression. Returns a node tree, which can be evaluated by invoking node.evaluate() or transformed into a functional object via node.compile().",examples:['node1 = parse("sqrt(3^2 + 4^2)")',"node1.evaluate()","code1 = node1.compile()","code1.evaluate()","scope = {a: 3, b: 4}",'node2 = parse("a * b")',"node2.evaluate(scope)","code2 = node2.compile()","code2.evaluate(scope)"],seealso:["parser","evaluate","compile"]},compileDocs={name:"compile",category:"Expression",syntax:["compile(expr) ","compile([expr1, expr2, expr3, ...])"],description:"Parse and compile an expression. Returns a an object with a function evaluate([scope]) to evaluate the compiled expression.",examples:['code1 = compile("sqrt(3^2 + 4^2)")',"code1.evaluate() ",'code2 = compile("a * b")',"code2.evaluate({a: 3, b: 4})"],seealso:["parser","parse","evaluate"]},helpDocs={name:"help",category:"Expression",syntax:["help(object)","help(string)"],description:"Display documentation on a function or data type.",examples:["help(sqrt)",'help("complex")'],seealso:[]},distanceDocs={name:"distance",category:"Geometry",syntax:["distance([x1, y1], [x2, y2])","distance([[x1, y1], [x2, y2]])"],description:"Calculates the Euclidean distance between two points.",examples:["distance([0,0], [4,4])","distance([[0,0], [4,4]])"],seealso:[]},intersectDocs={name:"intersect",category:"Geometry",syntax:["intersect(expr1, expr2, expr3, expr4)","intersect(expr1, expr2, expr3)"],description:"Computes the intersection point of lines and/or planes.",examples:["intersect([0, 0], [10, 10], [10, 0], [0, 10])","intersect([1, 0, 1],  [4, -2, 2], [1, 1, 1, 6])"],seealso:[]},andDocs={name:"and",category:"Logical",syntax:["x and y","and(x, y)"],description:"Logical and. Test whether two values are both defined with a nonzero/nonempty value.",examples:["true and false","true and true","2 and 4"],seealso:["not","or","xor"]},notDocs={name:"not",category:"Logical",syntax:["not x","not(x)"],description:"Logical not. Flips the boolean value of given argument.",examples:["not true","not false","not 2","not 0"],seealso:["and","or","xor"]},nullishDocs={name:"nullish",category:"Logical",syntax:["x ?? y","nullish(x, y)"],description:"Nullish coalescing operator. Returns the right-hand operand when the left-hand operand is null or undefined, and otherwise returns the left-hand operand.",examples:["null ?? 42","undefined ?? 42","0 ?? 42","false ?? 42","null ?? undefined ?? 42"],seealso:["and","or","not"]},orDocs={name:"or",category:"Logical",syntax:["x or y","or(x, y)"],description:"Logical or. Test if at least one value is defined with a nonzero/nonempty value.",examples:["true or false","false or false","0 or 4"],seealso:["not","and","xor"]},xorDocs={name:"xor",category:"Logical",syntax:["x xor y","xor(x, y)"],description:"Logical exclusive or, xor. Test whether one and only one value is defined with a nonzero/nonempty value.",examples:["true xor false","false xor false","true xor true","0 xor 4"],seealso:["not","and","or"]},mapSlicesDocs={name:"mapSlices",category:"Matrix",syntax:["mapSlices(A, dim, callback)"],description:"Generate a matrix one dimension less than A by applying callback to each slice of A along dimension dim.",examples:["A = [[1, 2], [3, 4]]","mapSlices(A, 1, sum)","mapSlices(A, 2, prod)"],seealso:["map","forEach"]},columnDocs={name:"column",category:"Matrix",syntax:["column(x, index)"],description:"Return a column from a matrix or array.",examples:["A = [[1, 2], [3, 4]]","column(A, 1)","column(A, 2)"],seealso:["row","matrixFromColumns"]},concatDocs={name:"concat",category:"Matrix",syntax:["concat(A, B, C, ...)","concat(A, B, C, ..., dim)"],description:"Concatenate matrices. By default, the matrices are concatenated by the last dimension. The dimension on which to concatenate can be provided as last argument.",examples:["A = [1, 2; 5, 6]","B = [3, 4; 7, 8]","concat(A, B)","concat(A, B, 1)","concat(A, B, 2)"],seealso:["det","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},countDocs={name:"count",category:"Matrix",syntax:["count(x)"],description:"Count the number of elements of a matrix, array or string.",examples:["a = [1, 2; 3, 4; 5, 6]","count(a)","size(a)",'count("hello world")'],seealso:["size"]},crossDocs={name:"cross",category:"Matrix",syntax:["cross(A, B)"],description:"Calculate the cross product for two vectors in three dimensional space.",examples:["cross([1, 1, 0],  [0, 1, 1])","cross([3, -3, 1], [4, 9, 2])","cross([2, 3, 4],  [5, 6, 7])"],seealso:["multiply","dot"]},ctransposeDocs={name:"ctranspose",category:"Matrix",syntax:["x'","ctranspose(x)"],description:"Complex Conjugate and Transpose a matrix",examples:["a = [1, 2, 3; 4, 5, 6]","a'","ctranspose(a)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","zeros"]},detDocs={name:"det",category:"Matrix",syntax:["det(x)"],description:"Calculate the determinant of a matrix",examples:["det([1, 2; 3, 4])","det([-2, 2, 3; -1, 1, 3; 2, 0, -1])"],seealso:["concat","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},diagDocs={name:"diag",category:"Matrix",syntax:["diag(x)","diag(x, k)"],description:"Create a diagonal matrix or retrieve the diagonal of a matrix. When x is a vector, a matrix with the vector values on the diagonal will be returned. When x is a matrix, a vector with the diagonal values of the matrix is returned. When k is provided, the k-th diagonal will be filled in or retrieved, if k is positive, the values are placed on the super diagonal. When k is negative, the values are placed on the sub diagonal.",examples:["diag(1:3)","diag(1:3, 1)","a = [1, 2, 3; 4, 5, 6; 7, 8, 9]","diag(a)"],seealso:["concat","det","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},diffDocs={name:"diff",category:"Matrix",syntax:["diff(arr)","diff(arr, dim)"],description:["Create a new matrix or array with the difference of the passed matrix or array.","Dim parameter is optional and used to indicate the dimension of the array/matrix to apply the difference","If no dimension parameter is passed it is assumed as dimension 0","Dimension is zero-based in javascript and one-based in the parser","Arrays must be 'rectangular' meaning arrays like [1, 2]","If something is passed as a matrix it will be returned as a matrix but other than that all matrices are converted to arrays"],examples:["A = [1, 2, 4, 7, 0]","diff(A)","diff(A, 1)","B = [[1, 2], [3, 4]]","diff(B)","diff(B, 1)","diff(B, 2)","diff(B, bignumber(2))","diff([[1, 2], matrix([3, 4])], 2)"],seealso:["subtract","partitionSelect"]},dotDocs={name:"dot",category:"Matrix",syntax:["dot(A, B)","A * B"],description:"Calculate the dot product of two vectors. The dot product of A = [a1, a2, a3, ..., an] and B = [b1, b2, b3, ..., bn] is defined as dot(A, B) = a1 * b1 + a2 * b2 + a3 * b3 + ... + an * bn",examples:["dot([2, 4, 1], [2, 2, 3])","[2, 4, 1] * [2, 2, 3]"],seealso:["multiply","cross"]},eigsDocs={name:"eigs",category:"Matrix",syntax:["eigs(x)"],description:"Calculate the eigenvalues and optionally eigenvectors of a square matrix",examples:["eigs([[5, 2.3], [2.3, 1]])","eigs([[1, 2, 3], [4, 5, 6], [7, 8, 9]], { precision: 1e-6, eigenvectors: false })"],seealso:["inv"]},filterDocs={name:"filter",category:"Matrix",syntax:["filter(x, test)"],description:"Filter items in a matrix.",examples:["isPositive(x) = x > 0","filter([6, -2, -1, 4, 3], isPositive)","filter([6, -2, 0, 1, 0], x != 0)"],seealso:["sort","map","forEach"]},flattenDocs={name:"flatten",category:"Matrix",syntax:["flatten(x)"],description:"Flatten a multi dimensional matrix into a single dimensional matrix.",examples:["a = [1, 2, 3; 4, 5, 6]","size(a)","b = flatten(a)","size(b)"],seealso:["concat","resize","size","squeeze"]},forEachDocs={name:"forEach",category:"Matrix",syntax:["forEach(x, callback)"],description:"Iterates over all elements of a matrix/array, and executes the given callback function.",examples:["numberOfPets = {}","addPet(n) = numberOfPets[n] = (numberOfPets[n] ? numberOfPets[n]:0 ) + 1;",'forEach(["Dog","Cat","Cat"], addPet)',"numberOfPets"],seealso:["map","sort","filter"]},getMatrixDataTypeDocs={name:"getMatrixDataType",category:"Matrix",syntax:["getMatrixDataType(x)"],description:'Find the data type of all elements in a matrix or array, for example "number" if all items are a number and "Complex" if all values are complex numbers. If a matrix contains more than one data type, it will return "mixed".',examples:["getMatrixDataType([1, 2, 3])","getMatrixDataType([[5 cm], [2 inch]])",'getMatrixDataType([1, "text"])',"getMatrixDataType([1, bignumber(4)])"],seealso:["matrix","sparse","typeOf"]},identityDocs={name:"identity",category:"Matrix",syntax:["identity(n)","identity(m, n)","identity([m, n])"],description:"Returns the identity matrix with size m-by-n. The matrix has ones on the diagonal and zeros elsewhere.",examples:["identity(3)","identity(3, 5)","a = [1, 2, 3; 4, 5, 6]","identity(size(a))"],seealso:["concat","det","diag","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},invDocs={name:"inv",category:"Matrix",syntax:["inv(x)"],description:"Calculate the inverse of a matrix",examples:["inv([1, 2; 3, 4])","inv(4)","1 / 4"],seealso:["concat","det","diag","identity","ones","range","size","squeeze","subset","trace","transpose","zeros"]},pinvDocs={name:"pinv",category:"Matrix",syntax:["pinv(x)"],description:"Calculate the MoorePenrose inverse of a matrix",examples:["pinv([1, 2; 3, 4])","pinv([[1, 0], [0, 1], [0, 1]])","pinv(4)"],seealso:["inv"]},kronDocs={name:"kron",category:"Matrix",syntax:["kron(x, y)"],description:"Calculates the Kronecker product of 2 matrices or vectors.",examples:["kron([[1, 0], [0, 1]], [[1, 2], [3, 4]])","kron([1,1], [2,3,4])"],seealso:["multiply","dot","cross"]},mapDocs={name:"map",category:"Matrix",syntax:["map(x, callback)","map(x, y, ..., callback)"],description:"Create a new matrix or array with the results of the callback function executed on each entry of the matrix/array or the matrices/arrays.",examples:["map([1, 2, 3], square)","map([1, 2], [3, 4], f(a,b) = a + b)"],seealso:["filter","forEach"]},matrixFromColumnsDocs={name:"matrixFromColumns",category:"Matrix",syntax:["matrixFromColumns(...arr)","matrixFromColumns(row1, row2)","matrixFromColumns(row1, row2, row3)"],description:"Create a dense matrix from vectors as individual columns.",examples:["matrixFromColumns([1, 2, 3], [[4],[5],[6]])"],seealso:["matrix","matrixFromRows","matrixFromFunction","zeros"]},matrixFromFunctionDocs={name:"matrixFromFunction",category:"Matrix",syntax:["matrixFromFunction(size, fn)","matrixFromFunction(size, fn, format)","matrixFromFunction(size, fn, format, datatype)","matrixFromFunction(size, format, fn)","matrixFromFunction(size, format, datatype, fn)"],description:"Create a matrix by evaluating a generating function at each index.",examples:["f(I) = I[1] - I[2]","matrixFromFunction([3,3], f)","g(I) = I[1] - I[2] == 1 ? 4 : 0",'matrixFromFunction([100, 100], "sparse", g)',"matrixFromFunction([5], random)"],seealso:["matrix","matrixFromRows","matrixFromColumns","zeros"]},matrixFromRowsDocs={name:"matrixFromRows",category:"Matrix",syntax:["matrixFromRows(...arr)","matrixFromRows(row1, row2)","matrixFromRows(row1, row2, row3)"],description:"Create a dense matrix from vectors as individual rows.",examples:["matrixFromRows([1, 2, 3], [[4],[5],[6]])"],seealso:["matrix","matrixFromColumns","matrixFromFunction","zeros"]},onesDocs={name:"ones",category:"Matrix",syntax:["ones(m)","ones(m, n)","ones(m, n, p, ...)","ones([m])","ones([m, n])","ones([m, n, p, ...])"],description:"Create a matrix containing ones.",examples:["ones(3)","ones(3, 5)","ones([2,3]) * 4.5","a = [1, 2, 3; 4, 5, 6]","ones(size(a))"],seealso:["concat","det","diag","identity","inv","range","size","squeeze","subset","trace","transpose","zeros"]},partitionSelectDocs={name:"partitionSelect",category:"Matrix",syntax:["partitionSelect(x, k)","partitionSelect(x, k, compare)"],description:"Partition-based selection of an array or 1D matrix. Will find the kth smallest value, and mutates the input array. Uses Quickselect.",examples:["partitionSelect([5, 10, 1], 2)",'partitionSelect(["C", "B", "A", "D"], 1, compareText)',"arr = [5, 2, 1]","partitionSelect(arr, 0) # returns 1, arr is now: [1, 2, 5]","arr","partitionSelect(arr, 1, 'desc') # returns 2, arr is now: [5, 2, 1]","arr"],seealso:["sort"]},rangeDocs={name:"range",category:"Type",syntax:["start:end","start:step:end","range(start, end)","range(start, end, step)","range(string)"],description:"Create a range. Lower bound of the range is included, upper bound is excluded.",examples:["1:5","3:-1:-3","range(3, 7)","range(0, 12, 2)",'range("4:10")',"range(1m, 1m, 3m)","a = [1, 2, 3, 4; 5, 6, 7, 8]","a[1:2, 1:2]"],seealso:["concat","det","diag","identity","inv","ones","size","squeeze","subset","trace","transpose","zeros"]},reshapeDocs={name:"reshape",category:"Matrix",syntax:["reshape(x, sizes)"],description:"Reshape a multi dimensional array to fit the specified dimensions.",examples:["reshape([1, 2, 3, 4, 5, 6], [2, 3])","reshape([[1, 2], [3, 4]], [1, 4])","reshape([[1, 2], [3, 4]], [4])","reshape([1, 2, 3, 4], [-1, 2])"],seealso:["size","squeeze","resize"]},resizeDocs={name:"resize",category:"Matrix",syntax:["resize(x, size)","resize(x, size, defaultValue)"],description:"Resize a matrix.",examples:["resize([1,2,3,4,5], [3])","resize([1,2,3], [5])","resize([1,2,3], [5], -1)","resize(2, [2, 3])",'resize("hello", [8], "!")'],seealso:["size","subset","squeeze","reshape"]},rotateDocs={name:"rotate",category:"Matrix",syntax:["rotate(w, theta)","rotate(w, theta, v)"],description:"Returns a 2-D rotation matrix (2x2) for a given angle (in radians). Returns a 2-D rotation matrix (3x3) of a given angle (in radians) around given axis.",examples:["rotate([1, 0], pi / 2)",'rotate(matrix([1, 0]), unit("35deg"))','rotate([1, 0, 0], unit("90deg"), [0, 0, 1])','rotate(matrix([1, 0, 0]), unit("90deg"), matrix([0, 0, 1]))'],seealso:["matrix","rotationMatrix"]},rotationMatrixDocs={name:"rotationMatrix",category:"Matrix",syntax:["rotationMatrix(theta)","rotationMatrix(theta, v)","rotationMatrix(theta, v, format)"],description:"Returns a 2-D rotation matrix (2x2) for a given angle (in radians). Returns a 2-D rotation matrix (3x3) of a given angle (in radians) around given axis.",examples:["rotationMatrix(pi / 2)",'rotationMatrix(unit("45deg"), [0, 0, 1])','rotationMatrix(1, matrix([0, 0, 1]), "sparse")'],seealso:["cos","sin"]},rowDocs={name:"row",category:"Matrix",syntax:["row(x, index)"],description:"Return a row from a matrix or array.",examples:["A = [[1, 2], [3, 4]]","row(A, 1)","row(A, 2)"],seealso:["column","matrixFromRows"]},sizeDocs={name:"size",category:"Matrix",syntax:["size(x)"],description:"Calculate the size of a matrix.",examples:["size(2.3)",'size("hello world")',"a = [1, 2; 3, 4; 5, 6]","size(a)","size(1:6)"],seealso:["concat","count","det","diag","identity","inv","ones","range","squeeze","subset","trace","transpose","zeros"]},sortDocs={name:"sort",category:"Matrix",syntax:["sort(x)","sort(x, compare)"],description:'Sort the items in a matrix. Compare can be a string "asc", "desc", "natural", or a custom sort function.',examples:["sort([5, 10, 1])",'sort(["C", "B", "A", "D"], "natural")',"sortByLength(a, b) = size(a)[1] - size(b)[1]",'sort(["Langdon", "Tom", "Sara"], sortByLength)','sort(["10", "1", "2"], "natural")'],seealso:["map","filter","forEach"]},squeezeDocs={name:"squeeze",category:"Matrix",syntax:["squeeze(x)"],description:"Remove inner and outer singleton dimensions from a matrix.",examples:["a = zeros(3,2,1)","size(squeeze(a))","b = zeros(1,1,3)","size(squeeze(b))"],seealso:["concat","det","diag","identity","inv","ones","range","size","subset","trace","transpose","zeros"]},subsetDocs={name:"subset",category:"Matrix",syntax:["value(index)","value(index) = replacement","subset(value, [index])","subset(value, [index], replacement)"],description:"Get or set a subset of the entries of a matrix or characters of a string. Indexes are one-based. There should be one index specification for each dimension of the target. Each specification can be a single index, a list of indices, or a range in colon notation `l:u`. In a range, both the lower bound l and upper bound u are included; and if a bound is omitted it defaults to the most extreme valid value. The cartesian product of the indices specified in each dimension determines the target of the operation.",examples:["d = [1, 2; 3, 4]","e = []","e[1, 1:2] = [5, 6]","e[2, :] = [7, 8]","f = d * e","f[2, 1]","f[:, 1]","f[[1,2], [1,3]] = [9, 10; 11, 12]","f"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","trace","transpose","zeros"]},traceDocs={name:"trace",category:"Matrix",syntax:["trace(A)"],description:"Calculate the trace of a matrix: the sum of the elements on the main diagonal of a square matrix.",examples:["A = [1, 2, 3; -1, 2, 3; 2, 0, 3]","trace(A)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","transpose","zeros"]},transposeDocs={name:"transpose",category:"Matrix",syntax:["x'","transpose(x)"],description:"Transpose a matrix",examples:["a = [1, 2, 3; 4, 5, 6]","a'","transpose(a)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","zeros"]},zerosDocs={name:"zeros",category:"Matrix",syntax:["zeros(m)","zeros(m, n)","zeros(m, n, p, ...)","zeros([m])","zeros([m, n])","zeros([m, n, p, ...])"],description:"Create a matrix containing zeros.",examples:["zeros(3)","zeros(3, 5)","a = [1, 2, 3; 4, 5, 6]","zeros(size(a))"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose"]},fftDocs={name:"fft",category:"Matrix",syntax:["fft(x)"],description:"Calculate N-dimensional Fourier transform",examples:["fft([[1, 0], [1, 0]])"],seealso:["ifft"]},ifftDocs={name:"ifft",category:"Matrix",syntax:["ifft(x)"],description:"Calculate N-dimensional inverse Fourier transform",examples:["ifft([[2, 2], [0, 0]])"],seealso:["fft"]},bernoulliDocs={name:"bernoulli",category:"Probability",syntax:["bernoulli(n)"],description:"The nth Bernoulli number",examples:["bernoulli(4)","bernoulli(fraction(12))"],seealso:["combinations","gamma","stirlingS2"]},combinationsDocs={name:"combinations",category:"Probability",syntax:["combinations(n, k)"],description:"Compute the number of combinations of n items taken k at a time",examples:["combinations(7, 5)"],seealso:["combinationsWithRep","permutations","factorial"]},combinationsWithRepDocs={name:"combinationsWithRep",category:"Probability",syntax:["combinationsWithRep(n, k)"],description:"Compute the number of combinations of n items taken k at a time with replacements.",examples:["combinationsWithRep(7, 5)"],seealso:["combinations","permutations","factorial"]},factorialDocs={name:"factorial",category:"Probability",syntax:["n!","factorial(n)"],description:"Compute the factorial of a value",examples:["5!","5 * 4 * 3 * 2 * 1","3!"],seealso:["combinations","combinationsWithRep","permutations","gamma"]},gammaDocs={name:"gamma",category:"Probability",syntax:["gamma(n)"],description:"Compute the gamma function. For small values, the Lanczos approximation is used, and for large values the extended Stirling approximation.",examples:["gamma(4)","3!","gamma(1/2)","sqrt(pi)"],seealso:["factorial"]},lgammaDocs={name:"lgamma",category:"Probability",syntax:["lgamma(n)"],description:"Logarithm of the gamma function for real, positive numbers and complex numbers, using Lanczos approximation for numbers and Stirling series for complex numbers.",examples:["lgamma(4)","lgamma(1/2)","lgamma(i)","lgamma(complex(1.1, 2))"],seealso:["gamma"]},kldivergenceDocs={name:"kldivergence",category:"Probability",syntax:["kldivergence(x, y)"],description:"Calculate the Kullback-Leibler (KL) divergence  between two distributions.",examples:["kldivergence([0.7,0.5,0.4], [0.2,0.9,0.5])"],seealso:[]},multinomialDocs={name:"multinomial",category:"Probability",syntax:["multinomial(A)"],description:"Multinomial Coefficients compute the number of ways of picking a1, a2, ..., ai unordered outcomes from `n` possibilities. multinomial takes one array of integers as an argument. The following condition must be enforced: every ai > 0.",examples:["multinomial([1, 2, 1])"],seealso:["combinations","factorial"]},permutationsDocs={name:"permutations",category:"Probability",syntax:["permutations(n)","permutations(n, k)"],description:"Compute the number of permutations of n items taken k at a time",examples:["permutations(5)","permutations(5, 3)"],seealso:["combinations","combinationsWithRep","factorial"]},pickRandomDocs={name:"pickRandom",category:"Probability",syntax:["pickRandom(array)","pickRandom(array, number)","pickRandom(array, weights)","pickRandom(array, number, weights)","pickRandom(array, weights, number)"],description:"Pick a random entry from a given array.",examples:["pickRandom(0:10)","pickRandom([1, 3, 1, 6])","pickRandom([1, 3, 1, 6], 2)","pickRandom([1, 3, 1, 6], [2, 3, 2, 1])","pickRandom([1, 3, 1, 6], 2, [2, 3, 2, 1])","pickRandom([1, 3, 1, 6], [2, 3, 2, 1], 2)"],seealso:["random","randomInt"]},randomDocs={name:"random",category:"Probability",syntax:["random()","random(max)","random(min, max)","random(size)","random(size, max)","random(size, min, max)"],description:"Return a random number.",examples:["random()","random(10, 20)","random([2, 3])"],seealso:["pickRandom","randomInt"]},randomIntDocs={name:"randomInt",category:"Probability",syntax:["randomInt(max)","randomInt(min, max)","randomInt(size)","randomInt(size, max)","randomInt(size, min, max)"],description:"Return a random integer number",examples:["randomInt(10, 20)","randomInt([2, 3], 10)"],seealso:["pickRandom","random"]},compareDocs={name:"compare",category:"Relational",syntax:["compare(x, y)"],description:"Compare two values. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:["compare(2, 3)","compare(3, 2)","compare(2, 2)","compare(5cm, 40mm)","compare(2, [1, 2, 3])"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compareNatural","compareText"]},compareNaturalDocs={name:"compareNatural",category:"Relational",syntax:["compareNatural(x, y)"],description:"Compare two values of any type in a deterministic, natural way. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:["compareNatural(2, 3)","compareNatural(3, 2)","compareNatural(2, 2)","compareNatural(5cm, 40mm)",'compareNatural("2", "10")',"compareNatural(2 + 3i, 2 + 4i)","compareNatural([1, 2, 4], [1, 2, 3])","compareNatural([1, 5], [1, 2, 3])","compareNatural([1, 2], [1, 2])","compareNatural({a: 2}, {a: 4})"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compare","compareText"]},compareTextDocs={name:"compareText",category:"Relational",syntax:["compareText(x, y)"],description:"Compare two strings lexically. Comparison is case sensitive. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:['compareText("B", "A")','compareText("A", "B")','compareText("A", "A")','compareText("2", "10")','compare("2", "10")',"compare(2, 10)",'compareNatural("2", "10")','compareText("B", ["A", "B", "C"])'],seealso:["compare","compareNatural"]},deepEqualDocs={name:"deepEqual",category:"Relational",syntax:["deepEqual(x, y)"],description:"Check equality of two matrices element wise. Returns true if the size of both matrices is equal and when and each of the elements are equal.",examples:["deepEqual([1,3,4], [1,3,4])","deepEqual([1,3,4], [1,3])"],seealso:["equal","unequal","smaller","larger","smallerEq","largerEq","compare"]},equalDocs={name:"equal",category:"Relational",syntax:["x == y","equal(x, y)"],description:"Check equality of two values. Returns true if the values are equal, and false if not.",examples:["2+2 == 3","2+2 == 4","a = 3.2","b = 6-2.8","a == b","50cm == 0.5m"],seealso:["unequal","smaller","larger","smallerEq","largerEq","compare","deepEqual","equalText"]},equalTextDocs={name:"equalText",category:"Relational",syntax:["equalText(x, y)"],description:"Check equality of two strings. Comparison is case sensitive. Returns true if the values are equal, and false if not.",examples:['equalText("Hello", "Hello")','equalText("a", "A")','equal("2e3", "2000")','equalText("2e3", "2000")','equalText("B", ["A", "B", "C"])'],seealso:["compare","compareNatural","compareText","equal"]},largerDocs={name:"larger",category:"Relational",syntax:["x > y","larger(x, y)"],description:"Check if value x is larger than y. Returns true if x is larger than y, and false if not. Comparing a value with NaN returns false.",examples:["2 > 3","5 > 2*2","a = 3.3","b = 6-2.8","(a > b)","(b < a)","5 cm > 2 inch"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compare"]},largerEqDocs={name:"largerEq",category:"Relational",syntax:["x >= y","largerEq(x, y)"],description:"Check if value x is larger or equal to y. Returns true if x is larger or equal to y, and false if not.",examples:["2 >= 1+1","2 > 1+1","a = 3.2","b = 6-2.8","(a >= b)"],seealso:["equal","unequal","smallerEq","smaller","compare"]},smallerDocs={name:"smaller",category:"Relational",syntax:["x < y","smaller(x, y)"],description:"Check if value x is smaller than value y. Returns true if x is smaller than y, and false if not. Comparing a value with NaN returns false.",examples:["2 < 3","5 < 2*2","a = 3.3","b = 6-2.8","(a < b)","5 cm < 2 inch"],seealso:["equal","unequal","larger","smallerEq","largerEq","compare"]},smallerEqDocs={name:"smallerEq",category:"Relational",syntax:["x <= y","smallerEq(x, y)"],description:"Check if value x is smaller or equal to value y. Returns true if x is smaller than y, and false if not.",examples:["2 <= 1+1","2 < 1+1","a = 3.2","b = 6-2.8","(a <= b)"],seealso:["equal","unequal","larger","smaller","largerEq","compare"]},unequalDocs={name:"unequal",category:"Relational",syntax:["x != y","unequal(x, y)"],description:"Check unequality of two values. Returns true if the values are unequal, and false if they are equal.",examples:["2+2 != 3","2+2 != 4","a = 3.2","b = 6-2.8","a != b","50cm != 0.5m","5 cm != 2 inch"],seealso:["equal","smaller","larger","smallerEq","largerEq","compare","deepEqual"]},setCartesianDocs={name:"setCartesian",category:"Set",syntax:["setCartesian(set1, set2)"],description:"Create the cartesian product of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays and the values will be sorted in ascending order before the operation.",examples:["setCartesian([1, 2], [3, 4])"],seealso:["setUnion","setIntersect","setDifference","setPowerset"]},setDifferenceDocs={name:"setDifference",category:"Set",syntax:["setDifference(set1, set2)"],description:"Create the difference of two (multi)sets: every element of set1, that is not the element of set2. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setDifference([1, 2, 3, 4], [3, 4, 5, 6])","setDifference([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setIntersect","setSymDifference"]},setDistinctDocs={name:"setDistinct",category:"Set",syntax:["setDistinct(set)"],description:"Collect the distinct elements of a multiset. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setDistinct([1, 1, 1, 2, 2, 3])"],seealso:["setMultiplicity"]},setIntersectDocs={name:"setIntersect",category:"Set",syntax:["setIntersect(set1, set2)"],description:"Create the intersection of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setIntersect([1, 2, 3, 4], [3, 4, 5, 6])","setIntersect([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setDifference"]},setIsSubsetDocs={name:"setIsSubset",category:"Set",syntax:["setIsSubset(set1, set2)"],description:"Check whether a (multi)set is a subset of another (multi)set: every element of set1 is the element of set2. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setIsSubset([1, 2], [3, 4, 5, 6])","setIsSubset([3, 4], [3, 4, 5, 6])"],seealso:["setUnion","setIntersect","setDifference"]},setMultiplicityDocs={name:"setMultiplicity",category:"Set",syntax:["setMultiplicity(element, set)"],description:"Count the multiplicity of an element in a multiset. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setMultiplicity(1, [1, 2, 2, 4])","setMultiplicity(2, [1, 2, 2, 4])"],seealso:["setDistinct","setSize"]},setPowersetDocs={name:"setPowerset",category:"Set",syntax:["setPowerset(set)"],description:"Create the powerset of a (multi)set: the powerset contains very possible subsets of a (multi)set. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setPowerset([1, 2, 3])"],seealso:["setCartesian"]},setSizeDocs={name:"setSize",category:"Set",syntax:["setSize(set)","setSize(set, unique)"],description:'Count the number of elements of a (multi)set. When the second parameter "unique" is true, count only the unique values. A multi-dimension array will be converted to a single-dimension array before the operation.',examples:["setSize([1, 2, 2, 4])","setSize([1, 2, 2, 4], true)"],seealso:["setUnion","setIntersect","setDifference"]},setSymDifferenceDocs={name:"setSymDifference",category:"Set",syntax:["setSymDifference(set1, set2)"],description:"Create the symmetric difference of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setSymDifference([1, 2, 3, 4], [3, 4, 5, 6])","setSymDifference([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setIntersect","setDifference"]},setUnionDocs={name:"setUnion",category:"Set",syntax:["setUnion(set1, set2)"],description:"Create the union of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setUnion([1, 2, 3, 4], [3, 4, 5, 6])","setUnion([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setIntersect","setDifference"]},zpk2tfDocs={name:"zpk2tf",category:"Signal",syntax:["zpk2tf(z, p, k)"],description:"Compute the transfer function of a zero-pole-gain model.",examples:["zpk2tf([1, 2], [-1, -2], 1)","zpk2tf([1, 2], [-1, -2])","zpk2tf([1 - 3i, 2 + 2i], [-1, -2])"],seealso:[]},freqzDocs={name:"freqz",category:"Signal",syntax:["freqz(b, a)","freqz(b, a, w)"],description:"Calculates the frequency response of a filter given its numerator and denominator coefficients.",examples:["freqz([1, 2], [1, 2, 3])","freqz([1, 2], [1, 2, 3], [0, 1])","freqz([1, 2], [1, 2, 3], 512)"],seealso:[]},erfDocs={name:"erf",category:"Special",syntax:["erf(x)"],description:"Compute the erf function of a value using a rational Chebyshev approximations for different intervals of x",examples:["erf(0.2)","erf(-0.5)","erf(4)"],seealso:[]},zetaDocs={name:"zeta",category:"Special",syntax:["zeta(s)"],description:"Compute the Riemann Zeta Function using an infinite series and Riemann's Functional Equation for the entire complex plane",examples:["zeta(0.2)","zeta(-0.5)","zeta(4)"],seealso:[]},madDocs={name:"mad",category:"Statistics",syntax:["mad(a, b, c, ...)","mad(A)"],description:"Compute the median absolute deviation of a matrix or a list with values. The median absolute deviation is defined as the median of the absolute deviations from the median.",examples:["mad(10, 20, 30)","mad([1, 2, 3])"],seealso:["mean","median","std","abs"]},maxDocs={name:"max",category:"Statistics",syntax:["max(a, b, c, ...)","max(A)","max(A, dimension)"],description:"Compute the maximum value of a list of values. If any NaN values are found, the function yields the last NaN in the input.",examples:["max(2, 3, 4, 1)","max([2, 3, 4, 1])","max([2, 5; 4, 3])","max([2, 5; 4, 3], 1)","max([2, 5; 4, 3], 2)","max(2.7, 7.1, -4.5, 2.0, 4.1)","min(2.7, 7.1, -4.5, 2.0, 4.1)"],seealso:["mean","median","min","prod","std","sum","variance"]},meanDocs={name:"mean",category:"Statistics",syntax:["mean(a, b, c, ...)","mean(A)","mean(A, dimension)"],description:"Compute the arithmetic mean of a list of values.",examples:["mean(2, 3, 4, 1)","mean([2, 3, 4, 1])","mean([2, 5; 4, 3])","mean([2, 5; 4, 3], 1)","mean([2, 5; 4, 3], 2)","mean([1.0, 2.7, 3.2, 4.0])"],seealso:["max","median","min","prod","std","sum","variance"]},medianDocs={name:"median",category:"Statistics",syntax:["median(a, b, c, ...)","median(A)"],description:"Compute the median of all values. The values are sorted and the middle value is returned. In case of an even number of values, the average of the two middle values is returned.",examples:["median(5, 2, 7)","median([3, -1, 5, 7])"],seealso:["max","mean","min","prod","std","sum","variance","quantileSeq"]},minDocs={name:"min",category:"Statistics",syntax:["min(a, b, c, ...)","min(A)","min(A, dimension)"],description:"Compute the minimum value of a list of values. If any NaN values are found, the function yields the last NaN in the input.",examples:["min(2, 3, 4, 1)","min([2, 3, 4, 1])","min([2, 5; 4, 3])","min([2, 5; 4, 3], 1)","min([2, 5; 4, 3], 2)","min(2.7, 7.1, -4.5, 2.0, 4.1)","max(2.7, 7.1, -4.5, 2.0, 4.1)"],seealso:["max","mean","median","prod","std","sum","variance"]},modeDocs={name:"mode",category:"Statistics",syntax:["mode(a, b, c, ...)","mode(A)","mode(A, a, b, B, c, ...)"],description:"Computes the mode of all values as an array. In case mode being more than one, multiple values are returned in an array.",examples:["mode(2, 1, 4, 3, 1)","mode([1, 2.7, 3.2, 4, 2.7])","mode(1, 4, 6, 1, 6)"],seealso:["max","mean","min","median","prod","std","sum","variance"]},prodDocs={name:"prod",category:"Statistics",syntax:["prod(a, b, c, ...)","prod(A)"],description:"Compute the product of all values.",examples:["prod(2, 3, 4)","prod([2, 3, 4])","prod([2, 5; 4, 3])"],seealso:["max","mean","min","median","min","std","sum","variance"]},quantileSeqDocs={name:"quantileSeq",category:"Statistics",syntax:["quantileSeq(A, prob[, sorted])","quantileSeq(A, [prob1, prob2, ...][, sorted])","quantileSeq(A, N[, sorted])"],description:`Compute the prob order quantile of a matrix or a list with values. The sequence is sorted and the middle value is returned. Supported types of sequence values are: Number, BigNumber, Unit Supported types of probability are: Number, BigNumber. 

In case of a (multi dimensional) array or matrix, the prob order quantile of all elements will be calculated.`,examples:["quantileSeq([3, -1, 5, 7], 0.5)","quantileSeq([3, -1, 5, 7], [1/3, 2/3])","quantileSeq([3, -1, 5, 7], 2)","quantileSeq([-1, 3, 5, 7], 0.5, true)"],seealso:["mean","median","min","max","prod","std","sum","variance"]},stdDocs={name:"std",category:"Statistics",syntax:["std(a, b, c, ...)","std(A)","std(A, dimension)","std(A, normalization)","std(A, dimension, normalization)"],description:'Compute the standard deviation of all values, defined as std(A) = sqrt(variance(A)). Optional parameter normalization can be "unbiased" (default), "uncorrected", or "biased".',examples:["std(2, 4, 6)","std([2, 4, 6, 8])",'std([2, 4, 6, 8], "uncorrected")','std([2, 4, 6, 8], "biased")',"std([1, 2, 3; 4, 5, 6])"],seealso:["max","mean","min","median","prod","sum","variance"]},cumSumDocs={name:"cumsum",category:"Statistics",syntax:["cumsum(a, b, c, ...)","cumsum(A)"],description:"Compute the cumulative sum of all values.",examples:["cumsum(2, 3, 4, 1)","cumsum([2, 3, 4, 1])","cumsum([1, 2; 3, 4])","cumsum([1, 2; 3, 4], 1)","cumsum([1, 2; 3, 4], 2)"],seealso:["max","mean","median","min","prod","std","sum","variance"]},sumDocs={name:"sum",category:"Statistics",syntax:["sum(a, b, c, ...)","sum(A)","sum(A, dimension)"],description:"Compute the sum of all values.",examples:["sum(2, 3, 4, 1)","sum([2, 3, 4, 1])","sum([2, 5; 4, 3])"],seealso:["max","mean","median","min","prod","std","variance"]},varianceDocs={name:"variance",category:"Statistics",syntax:["variance(a, b, c, ...)","variance(A)","variance(A, dimension)","variance(A, normalization)","variance(A, dimension, normalization)"],description:'Compute the variance of all values. Optional parameter normalization can be "unbiased" (default), "uncorrected", or "biased".',examples:["variance(2, 4, 6)","variance([2, 4, 6, 8])",'variance([2, 4, 6, 8], "uncorrected")','variance([2, 4, 6, 8], "biased")',"variance([1, 2, 3; 4, 5, 6])"],seealso:["max","mean","min","median","min","prod","std","sum"]},corrDocs={name:"corr",category:"Statistics",syntax:["corr(A,B)"],description:"Compute the correlation coefficient of a two list with values, For matrices, the matrix correlation coefficient is calculated.",examples:["corr([2, 4, 6, 8],[1, 2, 3, 6])","corr(matrix([[1, 2.2, 3, 4.8, 5], [1, 2, 3, 4, 5]]), matrix([[4, 5.3, 6.6, 7, 8], [1, 2, 3, 4, 5]]))"],seealso:["max","mean","min","median","min","prod","std","sum"]},acosDocs={name:"acos",category:"Trigonometry",syntax:["acos(x)"],description:"Compute the inverse cosine of a value in radians.",examples:["acos(0.5)","acos(cos(2.3))"],seealso:["cos","atan","asin"]},acoshDocs={name:"acosh",category:"Trigonometry",syntax:["acosh(x)"],description:"Calculate the hyperbolic arccos of a value, defined as `acosh(x) = ln(sqrt(x^2 - 1) + x)`.",examples:["acosh(1.5)"],seealso:["cosh","asinh","atanh"]},acotDocs={name:"acot",category:"Trigonometry",syntax:["acot(x)"],description:"Calculate the inverse cotangent of a value.",examples:["acot(0.5)","acot(cot(0.5))","acot(2)"],seealso:["cot","atan"]},acothDocs={name:"acoth",category:"Trigonometry",syntax:["acoth(x)"],description:"Calculate the inverse hyperbolic tangent of a value, defined as `acoth(x) = (ln((x+1)/x) + ln(x/(x-1))) / 2`.",examples:["acoth(2)","acoth(0.5)"],seealso:["acsch","asech"]},acscDocs={name:"acsc",category:"Trigonometry",syntax:["acsc(x)"],description:"Calculate the inverse cotangent of a value.",examples:["acsc(2)","acsc(csc(0.5))","acsc(0.5)"],seealso:["csc","asin","asec"]},acschDocs={name:"acsch",category:"Trigonometry",syntax:["acsch(x)"],description:"Calculate the inverse hyperbolic cosecant of a value, defined as `acsch(x) = ln(1/x + sqrt(1/x^2 + 1))`.",examples:["acsch(0.5)"],seealso:["asech","acoth"]},asecDocs={name:"asec",category:"Trigonometry",syntax:["asec(x)"],description:"Calculate the inverse secant of a value.",examples:["asec(0.5)","asec(sec(0.5))","asec(2)"],seealso:["acos","acot","acsc"]},asechDocs={name:"asech",category:"Trigonometry",syntax:["asech(x)"],description:"Calculate the inverse secant of a value.",examples:["asech(0.5)"],seealso:["acsch","acoth"]},asinDocs={name:"asin",category:"Trigonometry",syntax:["asin(x)"],description:"Compute the inverse sine of a value in radians.",examples:["asin(0.5)","asin(sin(0.5))"],seealso:["sin","acos","atan"]},asinhDocs={name:"asinh",category:"Trigonometry",syntax:["asinh(x)"],description:"Calculate the hyperbolic arcsine of a value, defined as `asinh(x) = ln(x + sqrt(x^2 + 1))`.",examples:["asinh(0.5)"],seealso:["acosh","atanh"]},atanDocs={name:"atan",category:"Trigonometry",syntax:["atan(x)"],description:"Compute the inverse tangent of a value in radians.",examples:["atan(0.5)","atan(tan(0.5))"],seealso:["tan","acos","asin"]},atan2Docs={name:"atan2",category:"Trigonometry",syntax:["atan2(y, x)"],description:"Computes the principal value of the arc tangent of y/x in radians.",examples:["atan2(2, 2) / pi","angle = 60 deg in rad","x = cos(angle)","y = sin(angle)","atan2(y, x)"],seealso:["sin","cos","tan"]},atanhDocs={name:"atanh",category:"Trigonometry",syntax:["atanh(x)"],description:"Calculate the hyperbolic arctangent of a value, defined as `atanh(x) = ln((1 + x)/(1 - x)) / 2`.",examples:["atanh(0.5)"],seealso:["acosh","asinh"]},cosDocs={name:"cos",category:"Trigonometry",syntax:["cos(x)"],description:"Compute the cosine of x in radians.",examples:["cos(2)","cos(pi / 4) ^ 2","cos(180 deg)","cos(60 deg)","sin(0.2)^2 + cos(0.2)^2"],seealso:["acos","sin","tan"]},coshDocs={name:"cosh",category:"Trigonometry",syntax:["cosh(x)"],description:"Compute the hyperbolic cosine of x in radians.",examples:["cosh(0.5)"],seealso:["sinh","tanh","coth"]},cotDocs={name:"cot",category:"Trigonometry",syntax:["cot(x)"],description:"Compute the cotangent of x in radians. Defined as 1/tan(x)",examples:["cot(2)","1 / tan(2)"],seealso:["sec","csc","tan"]},cothDocs={name:"coth",category:"Trigonometry",syntax:["coth(x)"],description:"Compute the hyperbolic cotangent of x in radians.",examples:["coth(2)","1 / tanh(2)"],seealso:["sech","csch","tanh"]},cscDocs={name:"csc",category:"Trigonometry",syntax:["csc(x)"],description:"Compute the cosecant of x in radians. Defined as 1/sin(x)",examples:["csc(2)","1 / sin(2)"],seealso:["sec","cot","sin"]},cschDocs={name:"csch",category:"Trigonometry",syntax:["csch(x)"],description:"Compute the hyperbolic cosecant of x in radians. Defined as 1/sinh(x)",examples:["csch(2)","1 / sinh(2)"],seealso:["sech","coth","sinh"]},secDocs={name:"sec",category:"Trigonometry",syntax:["sec(x)"],description:"Compute the secant of x in radians. Defined as 1/cos(x)",examples:["sec(2)","1 / cos(2)"],seealso:["cot","csc","cos"]},sechDocs={name:"sech",category:"Trigonometry",syntax:["sech(x)"],description:"Compute the hyperbolic secant of x in radians. Defined as 1/cosh(x)",examples:["sech(2)","1 / cosh(2)"],seealso:["coth","csch","cosh"]},sinDocs={name:"sin",category:"Trigonometry",syntax:["sin(x)"],description:"Compute the sine of x in radians.",examples:["sin(2)","sin(pi / 4) ^ 2","sin(90 deg)","sin(30 deg)","sin(0.2)^2 + cos(0.2)^2"],seealso:["asin","cos","tan"]},sinhDocs={name:"sinh",category:"Trigonometry",syntax:["sinh(x)"],description:"Compute the hyperbolic sine of x in radians.",examples:["sinh(0.5)"],seealso:["cosh","tanh"]},tanDocs={name:"tan",category:"Trigonometry",syntax:["tan(x)"],description:"Compute the tangent of x in radians.",examples:["tan(0.5)","sin(0.5) / cos(0.5)","tan(pi / 4)","tan(45 deg)"],seealso:["atan","sin","cos"]},tanhDocs={name:"tanh",category:"Trigonometry",syntax:["tanh(x)"],description:"Compute the hyperbolic tangent of x in radians.",examples:["tanh(0.5)","sinh(0.5) / cosh(0.5)"],seealso:["sinh","cosh"]},toDocs={name:"to",category:"Units",syntax:["x to unit","to(x, unit)"],description:"Change the unit of a value.",examples:["5 inch to cm","3.2kg to g","16 bytes in bits"],seealso:[]},toBestDocs={name:"toBest",category:"Units",syntax:["toBest(x)","toBest(x, unitList)","toBest(x, unitList, options)"],description:"Converts to the most appropriate display unit.",examples:['toBest(unit(5000, "m"))','toBest(unit(3500000, "W"))','toBest(unit(0.000000123, "A"))','toBest(unit(10, "m"), "cm")','toBest(unit(10, "m"), "mm,km", {offset: 1.5})'],seealso:[]},binDocs={name:"bin",category:"Utils",syntax:["bin(value)"],description:"Format a number as binary",examples:["bin(2)"],seealso:["oct","hex"]},cloneDocs={name:"clone",category:"Utils",syntax:["clone(x)"],description:"Clone a variable. Creates a copy of primitive variables, and a deep copy of matrices",examples:["clone(3.5)","clone(2 - 4i)","clone(45 deg)","clone([1, 2; 3, 4])",'clone("hello world")'],seealso:[]},formatDocs={name:"format",category:"Utils",syntax:["format(value)","format(value, precision)"],description:"Format a value of any type as string.",examples:["format(2.3)","format(3 - 4i)","format([])","format(pi, 3)"],seealso:["print"]},hasNumericValueDocs={name:"hasNumericValue",category:"Utils",syntax:["hasNumericValue(x)"],description:"Test whether a value is an numeric value. In case of a string, true is returned if the string contains a numeric value.",examples:["hasNumericValue(2)",'hasNumericValue("2")','isNumeric("2")',"hasNumericValue(0)","hasNumericValue(bignumber(500))","hasNumericValue(fraction(0.125))","hasNumericValue(2 + 3i)",'hasNumericValue([2.3, "foo", false])'],seealso:["isInteger","isZero","isNegative","isPositive","isNaN","isNumeric"]},hexDocs={name:"hex",category:"Utils",syntax:["hex(value)"],description:"Format a number as hexadecimal",examples:["hex(240)"],seealso:["bin","oct"]},isIntegerDocs={name:"isInteger",category:"Utils",syntax:["isInteger(x)"],description:"Test whether a value is an integer number.",examples:["isInteger(2)","isInteger(3.5)","isInteger([3, 0.5, -2])"],seealso:["isNegative","isNumeric","isPositive","isZero"]},isNaNDocs={name:"isNaN",category:"Utils",syntax:["isNaN(x)"],description:"Test whether a value is NaN (not a number)",examples:["isNaN(2)","isNaN(0 / 0)","isNaN(NaN)","isNaN(Infinity)"],seealso:["isNegative","isNumeric","isPositive","isZero","isFinite","isBounded"]},isBoundedDocs={name:"isBounded",category:"Utils",syntax:["isBounded(x)"],description:"Test whether a value or its entries are bounded.",examples:["isBounded(Infinity)","isBounded(bigint(3))","isBounded([3, -Infinity, -3])"],seealso:["isFinite","isNumeric","isNaN","isNegative","isPositive"]},isFiniteDocs={name:"isFinite",category:"Utils",syntax:["isFinite(x)"],description:"Test whether a value is finite, elementwise on collections.",examples:["isFinite(Infinity)","isFinite(bigint(3))","isFinite([3, -Infinity, -3])"],seealso:["isBounded","isNumeric","isNaN","isNegative","isPositive"]},isNegativeDocs={name:"isNegative",category:"Utils",syntax:["isNegative(x)"],description:"Test whether a value is negative: smaller than zero.",examples:["isNegative(2)","isNegative(0)","isNegative(-4)","isNegative([3, 0.5, -2])"],seealso:["isInteger","isNumeric","isPositive","isZero"]},isNumericDocs={name:"isNumeric",category:"Utils",syntax:["isNumeric(x)"],description:"Test whether a value is a numeric value. Returns true when the input is a number, BigNumber, Fraction, or boolean.",examples:["isNumeric(2)",'isNumeric("2")','hasNumericValue("2")',"isNumeric(0)","isNumeric(bignumber(500))","isNumeric(fraction(0.125))","isNumeric(2 + 3i)",'isNumeric([2.3, "foo", false])'],seealso:["isInteger","isZero","isNegative","isPositive","isNaN","hasNumericValue","isFinite","isBounded"]},isPositiveDocs={name:"isPositive",category:"Utils",syntax:["isPositive(x)"],description:"Test whether a value is positive: larger than zero.",examples:["isPositive(2)","isPositive(0)","isPositive(-4)","isPositive([3, 0.5, -2])"],seealso:["isInteger","isNumeric","isNegative","isZero"]},isPrimeDocs={name:"isPrime",category:"Utils",syntax:["isPrime(x)"],description:"Test whether a value is prime: has no divisors other than itself and one.",examples:["isPrime(3)","isPrime(-2)","isPrime([2, 17, 100])"],seealso:["isInteger","isNumeric","isNegative","isZero"]},isZeroDocs={name:"isZero",category:"Utils",syntax:["isZero(x)"],description:"Test whether a value is zero.",examples:["isZero(2)","isZero(0)","isZero(-4)","isZero([3, 0, -2, 0])"],seealso:["isInteger","isNumeric","isNegative","isPositive"]},numericDocs={name:"numeric",category:"Utils",syntax:["numeric(x)"],description:"Convert a numeric input to a specific numeric type: number, BigNumber, bigint, or Fraction.",examples:['numeric("4")','numeric("4", "number")','numeric("4", "bigint")','numeric("4", "BigNumber")','numeric("4", "Fraction")','numeric(4, "Fraction")','numeric(fraction(2, 5), "number")'],seealso:["number","bigint","fraction","bignumber","string","format"]},octDocs={name:"oct",category:"Utils",syntax:["oct(value)"],description:"Format a number as octal",examples:["oct(56)"],seealso:["bin","hex"]},printDocs={name:"print",category:"Utils",syntax:["print(template, values)","print(template, values, precision)"],description:"Interpolate values into a string template.",examples:['print("Lucy is $age years old", {age: 5})','print("The value of pi is $pi", {pi: pi}, 3)','print("Hello, $user.name!", {user: {name: "John"}})','print("Values: $1, $2, $3", [6, 9, 4])'],seealso:["format"]},typeOfDocs={name:"typeOf",category:"Utils",syntax:["typeOf(x)"],description:"Get the type of a variable.",examples:["typeOf(3.5)","typeOf(2 - 4i)","typeOf(45 deg)",'typeOf("hello world")'],seealso:["getMatrixDataType"]},solveODEDocs={name:"solveODE",category:"Numeric",syntax:["solveODE(func, tspan, y0)","solveODE(func, tspan, y0, options)"],description:"Numerical Integration of Ordinary Differential Equations.",examples:["f(t,y) = y","tspan = [0, 4]","solveODE(f, tspan, 1)","solveODE(f, tspan, [1, 2])",'solveODE(f, tspan, 1, { method:"RK23", maxStep:0.1 })'],seealso:["derivative","simplifyCore"]},embeddedDocs={bignumber:bignumberDocs,bigint:bigintDocs,boolean:booleanDocs,complex:complexDocs,createUnit:createUnitDocs,fraction:fractionDocs,index:indexDocs,matrix:matrixDocs,number:numberDocs,sparse:sparseDocs,splitUnit:splitUnitDocs,string:stringDocs,unit:unitDocs,e:eDocs,E:eDocs,false:falseDocs,i:iDocs,Infinity:InfinityDocs,LN2:LN2Docs,LN10:LN10Docs,LOG2E:LOG2EDocs,LOG10E:LOG10EDocs,NaN:NaNDocs,null:nullDocs,pi:piDocs,PI:piDocs,phi:phiDocs,SQRT1_2:SQRT12Docs,SQRT2:SQRT2Docs,tau:tauDocs,true:trueDocs,version:versionDocs,speedOfLight:{description:"Speed of light in vacuum",examples:["speedOfLight"]},gravitationConstant:{description:"Newtonian constant of gravitation",examples:["gravitationConstant"]},planckConstant:{description:"Planck constant",examples:["planckConstant"]},reducedPlanckConstant:{description:"Reduced Planck constant",examples:["reducedPlanckConstant"]},magneticConstant:{description:"Magnetic constant (vacuum permeability)",examples:["magneticConstant"]},electricConstant:{description:"Electric constant (vacuum permeability)",examples:["electricConstant"]},vacuumImpedance:{description:"Characteristic impedance of vacuum",examples:["vacuumImpedance"]},coulomb:{description:"Coulomb's constant. Deprecated in favor of coulombConstant",examples:["coulombConstant"]},coulombConstant:{description:"Coulomb's constant",examples:["coulombConstant"]},elementaryCharge:{description:"Elementary charge",examples:["elementaryCharge"]},bohrMagneton:{description:"Bohr magneton",examples:["bohrMagneton"]},conductanceQuantum:{description:"Conductance quantum",examples:["conductanceQuantum"]},inverseConductanceQuantum:{description:"Inverse conductance quantum",examples:["inverseConductanceQuantum"]},magneticFluxQuantum:{description:"Magnetic flux quantum",examples:["magneticFluxQuantum"]},nuclearMagneton:{description:"Nuclear magneton",examples:["nuclearMagneton"]},klitzing:{description:"Von Klitzing constant",examples:["klitzing"]},bohrRadius:{description:"Bohr radius",examples:["bohrRadius"]},classicalElectronRadius:{description:"Classical electron radius",examples:["classicalElectronRadius"]},electronMass:{description:"Electron mass",examples:["electronMass"]},fermiCoupling:{description:"Fermi coupling constant",examples:["fermiCoupling"]},fineStructure:{description:"Fine-structure constant",examples:["fineStructure"]},hartreeEnergy:{description:"Hartree energy",examples:["hartreeEnergy"]},protonMass:{description:"Proton mass",examples:["protonMass"]},deuteronMass:{description:"Deuteron Mass",examples:["deuteronMass"]},neutronMass:{description:"Neutron mass",examples:["neutronMass"]},quantumOfCirculation:{description:"Quantum of circulation",examples:["quantumOfCirculation"]},rydberg:{description:"Rydberg constant",examples:["rydberg"]},thomsonCrossSection:{description:"Thomson cross section",examples:["thomsonCrossSection"]},weakMixingAngle:{description:"Weak mixing angle",examples:["weakMixingAngle"]},efimovFactor:{description:"Efimov factor",examples:["efimovFactor"]},atomicMass:{description:"Atomic mass constant",examples:["atomicMass"]},avogadro:{description:"Avogadro's number",examples:["avogadro"]},boltzmann:{description:"Boltzmann constant",examples:["boltzmann"]},faraday:{description:"Faraday constant",examples:["faraday"]},firstRadiation:{description:"First radiation constant",examples:["firstRadiation"]},loschmidt:{description:"Loschmidt constant at T=273.15 K and p=101.325 kPa",examples:["loschmidt"]},gasConstant:{description:"Gas constant",examples:["gasConstant"]},molarPlanckConstant:{description:"Molar Planck constant",examples:["molarPlanckConstant"]},molarVolume:{description:"Molar volume of an ideal gas at T=273.15 K and p=101.325 kPa",examples:["molarVolume"]},sackurTetrode:{description:"Sackur-Tetrode constant at T=1 K and p=101.325 kPa",examples:["sackurTetrode"]},secondRadiation:{description:"Second radiation constant",examples:["secondRadiation"]},stefanBoltzmann:{description:"Stefan-Boltzmann constant",examples:["stefanBoltzmann"]},wienDisplacement:{description:"Wien displacement law constant",examples:["wienDisplacement"]},molarMass:{description:"Molar mass constant",examples:["molarMass"]},molarMassC12:{description:"Molar mass constant of carbon-12",examples:["molarMassC12"]},gravity:{description:"Standard acceleration of gravity (standard acceleration of free-fall on Earth)",examples:["gravity"]},planckLength:{description:"Planck length",examples:["planckLength"]},planckMass:{description:"Planck mass",examples:["planckMass"]},planckTime:{description:"Planck time",examples:["planckTime"]},planckCharge:{description:"Planck charge",examples:["planckCharge"]},planckTemperature:{description:"Planck temperature",examples:["planckTemperature"]},derivative:derivativeDocs,lsolve:lsolveDocs,lsolveAll:lsolveAllDocs,lup:lupDocs,lusolve:lusolveDocs,leafCount:leafCountDocs,polynomialRoot:polynomialRootDocs,resolve:resolveDocs,simplify:simplifyDocs,simplifyConstant:simplifyConstantDocs,simplifyCore:simplifyCoreDocs,symbolicEqual:symbolicEqualDocs,rationalize:rationalizeDocs,slu:sluDocs,usolve:usolveDocs,usolveAll:usolveAllDocs,qr:qrDocs,abs:absDocs,add:addDocs,cbrt:cbrtDocs,ceil:ceilDocs,cube:cubeDocs,divide:divideDocs,dotDivide:dotDivideDocs,dotMultiply:dotMultiplyDocs,dotPow:dotPowDocs,exp:expDocs,expm:expmDocs,expm1:expm1Docs,fix:fixDocs,floor:floorDocs,gcd:gcdDocs,hypot:hypotDocs,lcm:lcmDocs,log:logDocs,log2:log2Docs,log1p:log1pDocs,log10:log10Docs,mod:modDocs,multiply:multiplyDocs,norm:normDocs,nthRoot:nthRootDocs,nthRoots:nthRootsDocs,pow:powDocs,round:roundDocs,sign:signDocs,sqrt:sqrtDocs,sqrtm:sqrtmDocs,square:squareDocs,subtract:subtractDocs,unaryMinus:unaryMinusDocs,unaryPlus:unaryPlusDocs,xgcd:xgcdDocs,invmod:invmodDocs,bitAnd:bitAndDocs,bitNot:bitNotDocs,bitOr:bitOrDocs,bitXor:bitXorDocs,leftShift:leftShiftDocs,rightArithShift:rightArithShiftDocs,rightLogShift:rightLogShiftDocs,bellNumbers:bellNumbersDocs,catalan:catalanDocs,composition:compositionDocs,stirlingS2:stirlingS2Docs,config:configDocs,import:importDocs,typed:typedDocs,arg:argDocs,conj:conjDocs,re:reDocs,im:imDocs,evaluate:evaluateDocs,help:helpDocs,parse:parseDocs,parser:parserDocs,compile:compileDocs,distance:distanceDocs,intersect:intersectDocs,and:andDocs,not:notDocs,nullish:nullishDocs,or:orDocs,xor:xorDocs,mapSlices:mapSlicesDocs,concat:concatDocs,count:countDocs,cross:crossDocs,column:columnDocs,ctranspose:ctransposeDocs,det:detDocs,diag:diagDocs,diff:diffDocs,dot:dotDocs,getMatrixDataType:getMatrixDataTypeDocs,identity:identityDocs,filter:filterDocs,flatten:flattenDocs,forEach:forEachDocs,inv:invDocs,pinv:pinvDocs,eigs:eigsDocs,kron:kronDocs,matrixFromFunction:matrixFromFunctionDocs,matrixFromRows:matrixFromRowsDocs,matrixFromColumns:matrixFromColumnsDocs,map:mapDocs,ones:onesDocs,partitionSelect:partitionSelectDocs,range:rangeDocs,resize:resizeDocs,reshape:reshapeDocs,rotate:rotateDocs,rotationMatrix:rotationMatrixDocs,row:rowDocs,size:sizeDocs,sort:sortDocs,squeeze:squeezeDocs,subset:subsetDocs,trace:traceDocs,transpose:transposeDocs,zeros:zerosDocs,fft:fftDocs,ifft:ifftDocs,sylvester:sylvesterDocs,schur:schurDocs,lyap:lyapDocs,solveODE:solveODEDocs,bernoulli:bernoulliDocs,combinations:combinationsDocs,combinationsWithRep:combinationsWithRepDocs,factorial:factorialDocs,gamma:gammaDocs,kldivergence:kldivergenceDocs,lgamma:lgammaDocs,multinomial:multinomialDocs,permutations:permutationsDocs,pickRandom:pickRandomDocs,random:randomDocs,randomInt:randomIntDocs,compare:compareDocs,compareNatural:compareNaturalDocs,compareText:compareTextDocs,deepEqual:deepEqualDocs,equal:equalDocs,equalText:equalTextDocs,larger:largerDocs,largerEq:largerEqDocs,smaller:smallerDocs,smallerEq:smallerEqDocs,unequal:unequalDocs,setCartesian:setCartesianDocs,setDifference:setDifferenceDocs,setDistinct:setDistinctDocs,setIntersect:setIntersectDocs,setIsSubset:setIsSubsetDocs,setMultiplicity:setMultiplicityDocs,setPowerset:setPowersetDocs,setSize:setSizeDocs,setSymDifference:setSymDifferenceDocs,setUnion:setUnionDocs,zpk2tf:zpk2tfDocs,freqz:freqzDocs,erf:erfDocs,zeta:zetaDocs,cumsum:cumSumDocs,mad:madDocs,max:maxDocs,mean:meanDocs,median:medianDocs,min:minDocs,mode:modeDocs,prod:prodDocs,quantileSeq:quantileSeqDocs,std:stdDocs,sum:sumDocs,variance:varianceDocs,corr:corrDocs,acos:acosDocs,acosh:acoshDocs,acot:acotDocs,acoth:acothDocs,acsc:acscDocs,acsch:acschDocs,asec:asecDocs,asech:asechDocs,asin:asinDocs,asinh:asinhDocs,atan:atanDocs,atanh:atanhDocs,atan2:atan2Docs,cos:cosDocs,cosh:coshDocs,cot:cotDocs,coth:cothDocs,csc:cscDocs,csch:cschDocs,sec:secDocs,sech:sechDocs,sin:sinDocs,sinh:sinhDocs,tan:tanDocs,tanh:tanhDocs,to:toDocs,toBest:toBestDocs,clone:cloneDocs,format:formatDocs,bin:binDocs,oct:octDocs,hex:hexDocs,isNaN:isNaNDocs,isBounded:isBoundedDocs,isFinite:isFiniteDocs,isInteger:isIntegerDocs,isNegative:isNegativeDocs,isNumeric:isNumericDocs,hasNumericValue:hasNumericValueDocs,isPositive:isPositiveDocs,isPrime:isPrimeDocs,isZero:isZeroDocs,print:printDocs,typeOf:typeOfDocs,numeric:numericDocs},name$1d="help",dependencies$1d=["typed","mathWithTransform","Help"],createHelp=factory(name$1d,dependencies$1d,t=>{var{typed:r,mathWithTransform:a,Help:n}=t;return r(name$1d,{any:function(o){var l,u=o;if(typeof o!="string"){for(l in a)if(hasOwnProperty(a,l)&&o===a[l]){u=l;break}}var h=getSafeProperty(embeddedDocs,u);if(!h){var c=typeof u=="function"?u.name:u;throw new Error('No documentation found on "'+c+'"')}return new n(h)}})}),name$1c="chain",dependencies$1c=["typed","Chain"],createChain=factory(name$1c,dependencies$1c,t=>{var{typed:r,Chain:a}=t;return r(name$1c,{"":function(){return new a},any:function(s){return new a(s)}})}),name$1b="det",dependencies$1b=["typed","matrix","subtractScalar","multiply","divideScalar","isZero","unaryMinus"],createDet=factory(name$1b,dependencies$1b,t=>{var{typed:r,matrix:a,subtractScalar:n,multiply:s,divideScalar:o,isZero:l,unaryMinus:u}=t;return r(name$1b,{any:function(f){return clone$3(f)},"Array | Matrix":function(f){var d;switch(isMatrix(f)?d=f.size():Array.isArray(f)?(f=a(f),d=f.size()):d=[],d.length){case 0:return clone$3(f);case 1:if(d[0]===1)return clone$3(f.valueOf()[0]);if(d[0]===0)return 1;throw new RangeError("Matrix must be square (size: "+format$1(d)+")");case 2:{var p=d[0],v=d[1];if(p===v)return h(f.clone().valueOf(),p);if(v===0)return 1;throw new RangeError("Matrix must be square (size: "+format$1(d)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+format$1(d)+")")}}});function h(c,f,d){if(f===1)return clone$3(c[0][0]);if(f===2)return n(s(c[0][0],c[1][1]),s(c[1][0],c[0][1]));for(var p=!1,v=new Array(f).fill(0).map((X,O)=>O),y=0;y<f;y++){var b=v[y];if(l(c[b][y])){var _=void 0;for(_=y+1;_<f;_++)if(!l(c[v[_]][y])){b=v[_],v[_]=v[y],v[y]=b,p=!p;break}if(_===f)return c[b][y]}for(var N=c[b][y],M=y===0?1:c[v[y-1]][y-1],C=y+1;C<f;C++)for(var $=v[C],w=y+1;w<f;w++)c[$][w]=o(n(s(c[$][w],N),s(c[$][y],c[b][w])),M)}var A=c[v[f-1]][f-1];return p?u(A):A}}),name$1a="inv",dependencies$1a=["typed","matrix","divideScalar","addScalar","multiply","unaryMinus","det","identity","abs"],createInv=factory(name$1a,dependencies$1a,t=>{var{typed:r,matrix:a,divideScalar:n,addScalar:s,multiply:o,unaryMinus:l,det:u,identity:h,abs:c}=t;return r(name$1a,{"Array | Matrix":function(p){var v=isMatrix(p)?p.size():arraySize(p);switch(v.length){case 1:if(v[0]===1)return isMatrix(p)?a([n(1,p.valueOf()[0])]):[n(1,p[0])];throw new RangeError("Matrix must be square (size: "+format$1(v)+")");case 2:{var y=v[0],b=v[1];if(y===b)return isMatrix(p)?a(f(p.valueOf(),y,b),p.storage()):f(p,y,b);throw new RangeError("Matrix must be square (size: "+format$1(v)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+format$1(v)+")")}},any:function(p){return n(1,p)}});function f(d,p,v){var y,b,_,N,M;if(p===1){if(N=d[0][0],N===0)throw Error("Cannot calculate inverse, determinant is zero");return[[n(1,N)]]}else if(p===2){var C=u(d);if(C===0)throw Error("Cannot calculate inverse, determinant is zero");return[[n(d[1][1],C),n(l(d[0][1]),C)],[n(l(d[1][0]),C),n(d[0][0],C)]]}else{var $=d.concat();for(y=0;y<p;y++)$[y]=$[y].concat();for(var w=h(p).valueOf(),A=0;A<v;A++){var X=c($[A][A]),O=A;for(y=A+1;y<p;)c($[y][A])>X&&(X=c($[y][A]),O=y),y++;if(X===0)throw Error("Cannot calculate inverse, determinant is zero");y=O,y!==A&&(M=$[A],$[A]=$[y],$[y]=M,M=w[A],w[A]=w[y],w[y]=M);var G=$[A],R=w[A];for(y=0;y<p;y++){var B=$[y],F=w[y];if(y!==A){if(B[A]!==0){for(_=n(l(B[A]),G[A]),b=A;b<v;b++)B[b]=s(B[b],o(_,G[b]));for(b=0;b<v;b++)F[b]=s(F[b],o(_,R[b]))}}else{for(_=G[A],b=A;b<v;b++)B[b]=n(B[b],_);for(b=0;b<v;b++)F[b]=n(F[b],_)}}}return w}}}),name$19="pinv",dependencies$19=["typed","matrix","inv","deepEqual","equal","dotDivide","dot","ctranspose","divideScalar","multiply","add","Complex"],createPinv=factory(name$19,dependencies$19,t=>{var{typed:r,matrix:a,inv:n,deepEqual:s,equal:o,dotDivide:l,dot:u,ctranspose:h,divideScalar:c,multiply:f,add:d,Complex:p}=t;return r(name$19,{"Array | Matrix":function(C){var $=isMatrix(C)?C.size():arraySize(C);switch($.length){case 1:return N(C)?h(C):$[0]===1?n(C):l(h(C),u(C,C));case 2:{if(N(C))return h(C);var w=$[0],A=$[1];if(w===A)try{return n(C)}catch(X){if(!(X instanceof Error&&X.message.match(/Cannot calculate inverse, determinant is zero/)))throw X}return isMatrix(C)?a(v(C.valueOf(),w,A),C.storage()):v(C,w,A)}default:throw new RangeError("Matrix must be two dimensional (size: "+format$1($)+")")}},any:function(C){return o(C,0)?clone$3(C):c(1,C)}});function v(M,C,$){var{C:w,F:A}=b(M,C,$),X=f(n(f(h(w),w)),h(w)),O=f(h(A),n(f(A,h(A))));return f(O,X)}function y(M,C,$){for(var w=clone$3(M),A=0,X=0;X<C;X++){if($<=A)return w;for(var O=X;_(w[O][A]);)if(O++,C===O&&(O=X,A++,$===A))return w;[w[O],w[X]]=[w[X],w[O]];for(var G=w[X][A],R=0;R<$;R++)w[X][R]=l(w[X][R],G);for(var B=0;B<C;B++)if(B!==X){G=w[B][A];for(var F=0;F<$;F++)w[B][F]=d(w[B][F],f(-1,f(G,w[X][F])))}A++}return w}function b(M,C,$){var w=y(M,C,$),A=M.map((O,G)=>O.filter((R,B)=>B<C&&!_(u(w[B],w[B])))),X=w.filter((O,G)=>!_(u(w[G],w[G])));return{C:A,F:X}}function _(M){return o(d(M,p(1,1)),d(0,p(1,1)))}function N(M){return s(d(M,p(1,1)),d(f(M,0),p(1,1)))}});function createComplexEigs(t){var{addScalar:r,subtract:a,flatten:n,multiply:s,multiplyScalar:o,divideScalar:l,sqrt:u,abs:h,bignumber:c,diag:f,size:d,reshape:p,inv:v,qr:y,usolve:b,usolveAll:_,equal:N,complex:M,larger:C,smaller:$,matrixFromColumns:w,dot:A}=t;function X(V,L,ae,W){var ve=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,de=O(V,L,ae,W,ve);G(V,L,ae,W,ve,de);var{values:se,C:ie}=R(V,L,ae,W,ve);if(ve){var ce=B(V,L,ie,de,se,ae,W);return{values:se,eigenvectors:ce}}return{values:se}}function O(V,L,ae,W,ve){var de=W==="BigNumber",se=W==="Complex",ie=de?c(0):0,ce=de?c(1):se?M(1):1,xe=de?c(1):1,fe=de?c(10):2,Ne=o(fe,fe),we;ve&&(we=Array(L).fill(ce));for(var Pe=!1;!Pe;){Pe=!0;for(var Ie=0;Ie<L;Ie++){for(var Ye=ie,Le=ie,Ve=0;Ve<L;Ve++)Ie!==Ve&&(Ye=r(Ye,h(V[Ve][Ie])),Le=r(Le,h(V[Ie][Ve])));if(!N(Ye,0)&&!N(Le,0)){for(var Ze=xe,ue=Ye,ge=l(Le,fe),te=o(Le,fe);$(ue,ge);)ue=o(ue,Ne),Ze=o(Ze,fe);for(;C(ue,te);)ue=l(ue,Ne),Ze=l(Ze,fe);var le=$(l(r(ue,Le),Ze),o(r(Ye,Le),.95));if(le){Pe=!1;for(var me=l(1,Ze),he=0;he<L;he++)Ie!==he&&(V[Ie][he]=o(V[Ie][he],me),V[he][Ie]=o(V[he][Ie],Ze));ve&&(we[Ie]=o(we[Ie],me))}}}}return ve?f(we):null}function G(V,L,ae,W,ve,de){var se=W==="BigNumber",ie=W==="Complex",ce=se?c(0):ie?M(0):0;se&&(ae=c(ae));for(var xe=0;xe<L-2;xe++){for(var fe=0,Ne=ce,we=xe+1;we<L;we++){var Pe=V[we][xe];$(h(Ne),h(Pe))&&(Ne=Pe,fe=we)}if(!$(h(Ne),ae)){if(fe!==xe+1){var Ie=V[fe];V[fe]=V[xe+1],V[xe+1]=Ie;for(var Ye=0;Ye<L;Ye++){var Le=V[Ye][fe];V[Ye][fe]=V[Ye][xe+1],V[Ye][xe+1]=Le}if(ve){var Ve=de[fe];de[fe]=de[xe+1],de[xe+1]=Ve}}for(var Ze=xe+2;Ze<L;Ze++){var ue=l(V[Ze][xe],Ne);if(ue!==0){for(var ge=0;ge<L;ge++)V[Ze][ge]=a(V[Ze][ge],o(ue,V[xe+1][ge]));for(var te=0;te<L;te++)V[te][xe+1]=r(V[te][xe+1],o(ue,V[te][Ze]));if(ve)for(var le=0;le<L;le++)de[Ze][le]=a(de[Ze][le],o(ue,de[xe+1][le]))}}}}return de}function R(V,L,ae,W,ve){var de=W==="BigNumber",se=W==="Complex",ie=de?c(1):se?M(1):1;de&&(ae=c(ae));for(var ce=clone$3(V),xe=[],fe=L,Ne=[],we=ve?f(Array(L).fill(ie)):void 0,Pe=ve?f(Array(fe).fill(ie)):void 0,Ie=0;Ie<=100;){Ie+=1;for(var Ye=ce[fe-1][fe-1],Le=0;Le<fe;Le++)ce[Le][Le]=a(ce[Le][Le],Ye);var{Q:Ve,R:Ze}=y(ce);ce=s(Ze,Ve);for(var ue=0;ue<fe;ue++)ce[ue][ue]=r(ce[ue][ue],Ye);if(ve&&(Pe=s(Pe,Ve)),fe===1||$(h(ce[fe-1][fe-2]),ae)){Ie=0,xe.push(ce[fe-1][fe-1]),ve&&(Ne.unshift([[1]]),q(Pe,L),we=s(we,Pe),fe>1&&(Pe=f(Array(fe-1).fill(ie)))),fe-=1,ce.pop();for(var ge=0;ge<fe;ge++)ce[ge].pop()}else if(fe===2||$(h(ce[fe-2][fe-3]),ae)){Ie=0;var te=F(ce[fe-2][fe-2],ce[fe-2][fe-1],ce[fe-1][fe-2],ce[fe-1][fe-1]);xe.push(...te),ve&&(Ne.unshift(U(ce[fe-2][fe-2],ce[fe-2][fe-1],ce[fe-1][fe-2],ce[fe-1][fe-1],te[0],te[1],ae,W)),q(Pe,L),we=s(we,Pe),fe>2&&(Pe=f(Array(fe-2).fill(ie)))),fe-=2,ce.pop(),ce.pop();for(var le=0;le<fe;le++)ce[le].pop(),ce[le].pop()}if(fe===0)break}if(xe.sort((ye,Se)=>+a(h(ye),h(Se))),Ie>100){var me=Error("The eigenvalues failed to converge. Only found these eigenvalues: "+xe.join(", "));throw me.values=xe,me.vectors=[],me}var he=ve?s(we,ee(Ne,L)):void 0;return{values:xe,C:he}}function B(V,L,ae,W,ve,de,se){var ie=v(ae),ce=s(ie,V,ae),xe=se==="BigNumber",fe=se==="Complex",Ne=xe?c(0):fe?M(0):0,we=xe?c(1):fe?M(1):1,Pe=[],Ie=[];for(var Ye of ve){var Le=z(Pe,Ye,N);Le===-1?(Pe.push(Ye),Ie.push(1)):Ie[Le]+=1}for(var Ve=[],Ze=Pe.length,ue=Array(L).fill(Ne),ge=f(Array(L).fill(we)),te=function(){var he=Pe[le],ye=a(ce,s(he,ge)),Se=_(ye,ue);for(Se.shift();Se.length<Ie[le];){var Be=Y(ye,L,Se,de,se);if(Be===null)break;Se.push(Be)}var Te=s(v(W),ae);Se=Se.map(Xe=>s(Te,Xe)),Ve.push(...Se.map(Xe=>({value:he,vector:n(Xe)})))},le=0;le<Ze;le++)te();return Ve}function F(V,L,ae,W){var ve=r(V,W),de=a(o(V,W),o(L,ae)),se=o(ve,.5),ie=o(u(a(o(ve,ve),o(4,de))),.5);return[r(se,ie),a(se,ie)]}function U(V,L,ae,W,ve,de,se,ie){var ce=ie==="BigNumber",xe=ie==="Complex",fe=ce?c(0):xe?M(0):0,Ne=ce?c(1):xe?M(1):1;if($(h(ae),se))return[[Ne,fe],[fe,Ne]];if(C(h(a(ve,de)),se))return[[a(ve,W),a(de,W)],[ae,ae]];var we=a(V,ve),Pe=a(W,ve);return $(h(L),se)&&$(h(Pe),se)?[[we,Ne],[ae,fe]]:[[L,fe],[Pe,Ne]]}function q(V,L){for(var ae=0;ae<V.length;ae++)V[ae].push(...Array(L-V[ae].length).fill(0));for(var W=V.length;W<L;W++)V.push(Array(L).fill(0)),V[W][W]=1;return V}function ee(V,L){for(var ae=[],W=0;W<L;W++)ae[W]=Array(L).fill(0);var ve=0;for(var de of V){for(var se=de.length,ie=0;ie<se;ie++)for(var ce=0;ce<se;ce++)ae[ve+ie][ve+ce]=de[ie][ce];ve+=se}return ae}function z(V,L,ae){for(var W=0;W<V.length;W++)if(ae(V[W],L))return W;return-1}function Y(V,L,ae,W,ve){for(var de=ve==="BigNumber"?c(1e3):1e3,se,ie=0;ie<5;++ie){se=K(L,ae,ve);try{se=b(V,se)}catch{continue}if(C(ne(se),de))break}if(ie>=5)return null;for(ie=0;;){var ce=b(V,se);if($(ne(Z(se,[ce])),W))break;if(++ie>=10)return null;se=j(ce)}return se}function K(V,L,ae){var W=ae==="BigNumber",ve=ae==="Complex",de=Array(V).fill(0).map(se=>2*Math.random()-1);return W&&(de=de.map(se=>c(se))),ve&&(de=de.map(se=>M(se))),de=Z(de,L),j(de,ae)}function Z(V,L){var ae=d(V);for(var W of L)W=p(W,ae),V=a(V,s(l(A(W,V),A(W,W)),W));return V}function ne(V){return h(u(A(V,V)))}function j(V,L){var ae=L==="BigNumber",W=L==="Complex",ve=ae?c(1):W?M(1):1;return s(l(ve,ne(V)),V)}return X}function createRealSymmetric(t){var{config:r,addScalar:a,subtract:n,abs:s,atan:o,cos:l,sin:u,multiplyScalar:h,inv:c,bignumber:f,multiply:d,add:p}=t;function v(G,R){var B=arguments.length>2&&arguments[2]!==void 0?arguments[2]:r.relTol,F=arguments.length>3?arguments[3]:void 0,U=arguments.length>4?arguments[4]:void 0;if(F==="number")return y(G,B,U);if(F==="BigNumber")return b(G,B,U);throw TypeError("Unsupported data type: "+F)}function y(G,R,B){var F=G.length,U=Math.abs(R/F),q,ee;if(B){ee=new Array(F);for(var z=0;z<F;z++)ee[z]=Array(F).fill(0),ee[z][z]=1}for(var Y=A(G);Math.abs(Y[1])>=Math.abs(U);){var K=Y[0][0],Z=Y[0][1];q=_(G[K][K],G[Z][Z],G[K][Z]),G=w(G,q,K,Z),B&&(ee=M(ee,q,K,Z)),Y=A(G)}for(var ne=Array(F).fill(0),j=0;j<F;j++)ne[j]=G[j][j];return O(clone$3(ne),ee,B)}function b(G,R,B){var F=G.length,U=s(R/F),q,ee;if(B){ee=new Array(F);for(var z=0;z<F;z++)ee[z]=Array(F).fill(0),ee[z][z]=1}for(var Y=X(G);s(Y[1])>=s(U);){var K=Y[0][0],Z=Y[0][1];q=N(G[K][K],G[Z][Z],G[K][Z]),G=$(G,q,K,Z),B&&(ee=C(ee,q,K,Z)),Y=X(G)}for(var ne=Array(F).fill(0),j=0;j<F;j++)ne[j]=G[j][j];return O(clone$3(ne),ee,B)}function _(G,R,B){var F=R-G;return Math.abs(F)<=r.relTol?Math.PI/4:.5*Math.atan(2*B/(R-G))}function N(G,R,B){var F=n(R,G);return s(F)<=r.relTol?f(-1).acos().div(4):h(.5,o(d(2,B,c(F))))}function M(G,R,B,F){for(var U=G.length,q=Math.cos(R),ee=Math.sin(R),z=Array(U).fill(0),Y=Array(U).fill(0),K=0;K<U;K++)z[K]=q*G[K][B]-ee*G[K][F],Y[K]=ee*G[K][B]+q*G[K][F];for(var Z=0;Z<U;Z++)G[Z][B]=z[Z],G[Z][F]=Y[Z];return G}function C(G,R,B,F){for(var U=G.length,q=l(R),ee=u(R),z=Array(U).fill(f(0)),Y=Array(U).fill(f(0)),K=0;K<U;K++)z[K]=n(h(q,G[K][B]),h(ee,G[K][F])),Y[K]=a(h(ee,G[K][B]),h(q,G[K][F]));for(var Z=0;Z<U;Z++)G[Z][B]=z[Z],G[Z][F]=Y[Z];return G}function $(G,R,B,F){for(var U=G.length,q=f(l(R)),ee=f(u(R)),z=h(q,q),Y=h(ee,ee),K=Array(U).fill(f(0)),Z=Array(U).fill(f(0)),ne=d(f(2),q,ee,G[B][F]),j=a(n(h(z,G[B][B]),ne),h(Y,G[F][F])),V=p(h(Y,G[B][B]),ne,h(z,G[F][F])),L=0;L<U;L++)K[L]=n(h(q,G[B][L]),h(ee,G[F][L])),Z[L]=a(h(ee,G[B][L]),h(q,G[F][L]));G[B][B]=j,G[F][F]=V,G[B][F]=f(0),G[F][B]=f(0);for(var ae=0;ae<U;ae++)ae!==B&&ae!==F&&(G[B][ae]=K[ae],G[ae][B]=K[ae],G[F][ae]=Z[ae],G[ae][F]=Z[ae]);return G}function w(G,R,B,F){for(var U=G.length,q=Math.cos(R),ee=Math.sin(R),z=q*q,Y=ee*ee,K=Array(U).fill(0),Z=Array(U).fill(0),ne=z*G[B][B]-2*q*ee*G[B][F]+Y*G[F][F],j=Y*G[B][B]+2*q*ee*G[B][F]+z*G[F][F],V=0;V<U;V++)K[V]=q*G[B][V]-ee*G[F][V],Z[V]=ee*G[B][V]+q*G[F][V];G[B][B]=ne,G[F][F]=j,G[B][F]=0,G[F][B]=0;for(var L=0;L<U;L++)L!==B&&L!==F&&(G[B][L]=K[L],G[L][B]=K[L],G[F][L]=Z[L],G[L][F]=Z[L]);return G}function A(G){for(var R=G.length,B=0,F=[0,1],U=0;U<R;U++)for(var q=U+1;q<R;q++)Math.abs(B)<Math.abs(G[U][q])&&(B=Math.abs(G[U][q]),F=[U,q]);return[F,B]}function X(G){for(var R=G.length,B=0,F=[0,1],U=0;U<R;U++)for(var q=U+1;q<R;q++)s(B)<s(G[U][q])&&(B=s(G[U][q]),F=[U,q]);return[F,B]}function O(G,R,B){var F=G.length,U=Array(F),q;if(B){q=Array(F);for(var ee=0;ee<F;ee++)q[ee]=Array(F)}for(var z=0;z<F;z++){for(var Y=0,K=G[0],Z=0;Z<G.length;Z++)s(G[Z])<s(K)&&(Y=Z,K=G[Y]);if(U[z]=G.splice(Y,1)[0],B)for(var ne=0;ne<F;ne++)q[z][ne]=R[ne][Y],R[ne].splice(Y,1)}if(!B)return{values:U};var j=q.map((V,L)=>({value:U[L],vector:V}));return{values:U,eigenvectors:j}}return v}var name$18="eigs",dependencies$18=["config","typed","matrix","addScalar","equal","subtract","abs","atan","cos","sin","multiplyScalar","divideScalar","inv","bignumber","multiply","add","larger","column","flatten","number","complex","sqrt","diag","size","reshape","qr","usolve","usolveAll","im","re","smaller","matrixFromColumns","dot"],createEigs=factory(name$18,dependencies$18,t=>{var{config:r,typed:a,matrix:n,addScalar:s,subtract:o,equal:l,abs:u,atan:h,cos:c,sin:f,multiplyScalar:d,divideScalar:p,inv:v,bignumber:y,multiply:b,add:_,larger:N,column:M,flatten:C,number:$,complex:w,sqrt:A,diag:X,size:O,reshape:G,qr:R,usolve:B,usolveAll:F,im:U,re:q,smaller:ee,matrixFromColumns:z,dot:Y}=t,K=createRealSymmetric({config:r,addScalar:s,subtract:o,abs:u,atan:h,cos:c,sin:f,multiplyScalar:d,inv:v,bignumber:y,multiply:b,add:_}),Z=createComplexEigs({addScalar:s,subtract:o,multiply:b,multiplyScalar:d,flatten:C,divideScalar:p,sqrt:A,abs:u,bignumber:y,diag:X,size:O,reshape:G,qr:R,inv:v,usolve:B,usolveAll:F,equal:l,complex:w,larger:N,smaller:ee,matrixFromColumns:z,dot:Y});return a("eigs",{Array:function(de){return ne(n(de))},"Array, number|BigNumber":function(de,se){return ne(n(de),{precision:se})},"Array, Object"(ve,de){return ne(n(ve),de)},Matrix:function(de){return ne(de,{matricize:!0})},"Matrix, number|BigNumber":function(de,se){return ne(de,{precision:se,matricize:!0})},"Matrix, Object":function(de,se){var ie={matricize:!0};return _extends(ie,se),ne(de,ie)}});function ne(ve){var de,se=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ie="eigenvectors"in se?se.eigenvectors:!0,ce=(de=se.precision)!==null&&de!==void 0?de:r.relTol,xe=j(ve,ce,ie);return se.matricize&&(xe.values=n(xe.values),ie&&(xe.eigenvectors=xe.eigenvectors.map(fe=>{var{value:Ne,vector:we}=fe;return{value:Ne,vector:n(we)}}))),ie&&Object.defineProperty(xe,"vectors",{enumerable:!1,get:()=>{throw new Error("eigs(M).vectors replaced with eigs(M).eigenvectors")}}),xe}function j(ve,de,se){var ie=ve.toArray(),ce=ve.size();if(ce.length!==2||ce[0]!==ce[1])throw new RangeError("Matrix must be square (size: ".concat(format$1(ce),")"));var xe=ce[0];if(L(ie,xe,de)&&(ae(ie,xe),V(ie,xe,de))){var fe=W(ve,ie,xe);return K(ie,xe,de,fe,se)}var Ne=W(ve,ie,xe);return Z(ie,xe,de,Ne,se)}function V(ve,de,se){for(var ie=0;ie<de;ie++)for(var ce=ie;ce<de;ce++)if(N(y(u(o(ve[ie][ce],ve[ce][ie]))),se))return!1;return!0}function L(ve,de,se){for(var ie=0;ie<de;ie++)for(var ce=0;ce<de;ce++)if(N(y(u(U(ve[ie][ce]))),se))return!1;return!0}function ae(ve,de){for(var se=0;se<de;se++)for(var ie=0;ie<de;ie++)ve[se][ie]=q(ve[se][ie])}function W(ve,de,se){var ie=ve.datatype();if(ie==="number"||ie==="BigNumber"||ie==="Complex")return ie;for(var ce=!1,xe=!1,fe=!1,Ne=0;Ne<se;Ne++)for(var we=0;we<se;we++){var Pe=de[Ne][we];if(isNumber(Pe)||isFraction(Pe))ce=!0;else if(isBigNumber(Pe))xe=!0;else if(isComplex(Pe))fe=!0;else throw TypeError("Unsupported type in Matrix: "+typeOf$1(Pe))}if(xe&&fe&&console.warn("Complex BigNumbers not supported, this operation will lose precission."),fe){for(var Ie=0;Ie<se;Ie++)for(var Ye=0;Ye<se;Ye++)de[Ie][Ye]=w(de[Ie][Ye]);return"Complex"}if(xe){for(var Le=0;Le<se;Le++)for(var Ve=0;Ve<se;Ve++)de[Le][Ve]=y(de[Le][Ve]);return"BigNumber"}if(ce){for(var Ze=0;Ze<se;Ze++)for(var ue=0;ue<se;ue++)de[Ze][ue]=$(de[Ze][ue]);return"number"}else throw TypeError("Matrix contains unsupported types only.")}}),name$17="expm",dependencies$17=["typed","abs","add","identity","inv","multiply"],createExpm=factory(name$17,dependencies$17,t=>{var{typed:r,abs:a,add:n,identity:s,inv:o,multiply:l}=t;return r(name$17,{Matrix:function(d){var p=d.size();if(p.length!==2||p[0]!==p[1])throw new RangeError("Matrix must be square (size: "+format$1(p)+")");for(var v=p[0],y=1e-15,b=u(d),_=h(b,y),N=_.q,M=_.j,C=l(d,Math.pow(2,-M)),$=s(v),w=s(v),A=1,X=C,O=-1,G=1;G<=N;G++)G>1&&(X=l(X,C),O=-O),A=A*(N-G+1)/((2*N-G+1)*G),$=n($,l(A,X)),w=n(w,l(A*O,X));for(var R=l(o(w),$),B=0;B<M;B++)R=l(R,R);return isSparseMatrix(d)?d.createSparseMatrix(R):R}});function u(f){for(var d=f.size()[0],p=0,v=0;v<d;v++){for(var y=0,b=0;b<d;b++)y+=a(f.get([v,b]));p=Math.max(y,p)}return p}function h(f,d){for(var p=30,v=0;v<p;v++)for(var y=0;y<=v;y++){var b=v-y;if(c(f,y,b)<d)return{q:y,j:b}}throw new Error("Could not find acceptable parameters to compute the matrix exponential (try increasing maxSearchSize in expm.js)")}function c(f,d,p){for(var v=1,y=2;y<=d;y++)v*=y;for(var b=v,_=d+1;_<=2*d;_++)b*=_;var N=b*(2*d+1);return 8*Math.pow(f/Math.pow(2,p),2*d)*v*v/(b*N)}}),name$16="sqrtm",dependencies$16=["typed","abs","add","multiply","map","sqrt","subtract","inv","size","max","identity"],createSqrtm=factory(name$16,dependencies$16,t=>{var{typed:r,abs:a,add:n,multiply:s,map:o,sqrt:l,subtract:u,inv:h,size:c,max:f,identity:d}=t,p=1e3,v=1e-6;function y(b){var _,N=0,M=b,C=d(c(b));do{var $=M;if(M=s(.5,n($,h(C))),C=s(.5,n(C,h($))),_=f(a(u(M,$))),_>v&&++N>p)throw new Error("computing square root of matrix: iterative method could not converge")}while(_>v);return M}return r(name$16,{"Array | Matrix":function(_){var N=isMatrix(_)?_.size():arraySize(_);switch(N.length){case 1:if(N[0]===1)return o(_,l);throw new RangeError("Matrix must be square (size: "+format$1(N)+")");case 2:{var M=N[0],C=N[1];if(M===C)return y(_);throw new RangeError("Matrix must be square (size: "+format$1(N)+")")}default:throw new RangeError("Matrix must be at most two dimensional (size: "+format$1(N)+")")}}})}),name$15="sylvester",dependencies$15=["typed","schur","matrixFromColumns","matrix","multiply","range","concat","transpose","index","subset","add","subtract","identity","lusolve","abs"],createSylvester=factory(name$15,dependencies$15,t=>{var{typed:r,schur:a,matrixFromColumns:n,matrix:s,multiply:o,range:l,concat:u,transpose:h,index:c,subset:f,add:d,subtract:p,identity:v,lusolve:y,abs:b,config:_}=t;return r(name$15,{"Matrix, Matrix, Matrix":N,"Array, Matrix, Matrix":function(C,$,w){return N(s(C),$,w)},"Array, Array, Matrix":function(C,$,w){return N(s(C),s($),w)},"Array, Matrix, Array":function(C,$,w){return N(s(C),$,s(w))},"Matrix, Array, Matrix":function(C,$,w){return N(C,s($),w)},"Matrix, Array, Array":function(C,$,w){return N(C,s($),s(w))},"Matrix, Matrix, Array":function(C,$,w){return N(C,$,s(w))},"Array, Array, Array":function(C,$,w){return N(s(C),s($),s(w)).toArray()}});function N(M,C,$){for(var w=C.size()[0],A=M.size()[0],X=a(M),O=X.T,G=X.U,R=a(o(-1,C)),B=R.T,F=R.U,U=o(o(h(G),$),F),q=l(0,A),ee=[],z=(Ne,we)=>u(Ne,we,1),Y=(Ne,we)=>u(Ne,we,0),K=0;K<w;K++)if(K<w-1&&b(f(B,c(K+1,K)))>1e-5){for(var Z=Y(f(U,c(q,[K])),f(U,c(q,[K+1]))),ne=0;ne<K;ne++)Z=d(Z,Y(o(ee[ne],f(B,c(ne,K))),o(ee[ne],f(B,c(ne,K+1)))));var j=o(v(A),o(-1,f(B,c(K,K)))),V=o(v(A),o(-1,f(B,c(K+1,K)))),L=o(v(A),o(-1,f(B,c(K,K+1)))),ae=o(v(A),o(-1,f(B,c(K+1,K+1)))),W=Y(z(d(O,j),V),z(L,d(O,ae))),ve=y(W,Z);ee[K]=ve.subset(c(l(0,A),[0])),ee[K+1]=ve.subset(c(l(A,2*A),[0])),K++}else{for(var de=f(U,c(q,[K])),se=0;se<K;se++)de=d(de,o(ee[se],f(B,c(se,K))));var ie=f(B,c(K,K)),ce=p(O,o(ie,v(A)));ee[K]=y(ce,de)}var xe=s(n(...ee)),fe=o(G,o(xe,h(F)));return fe}}),name$14="schur",dependencies$14=["typed","matrix","identity","multiply","qr","norm","subtract"],createSchur=factory(name$14,dependencies$14,t=>{var{typed:r,matrix:a,identity:n,multiply:s,qr:o,norm:l,subtract:u}=t;return r(name$14,{Array:function(f){var d=h(a(f));return{U:d.U.valueOf(),T:d.T.valueOf()}},Matrix:function(f){return h(f)}});function h(c){var f=c.size()[0],d=c,p=n(f),v=0,y;do{y=d;var b=o(d),_=b.Q,N=b.R;if(d=s(N,_),p=s(p,_),v++>100)break}while(l(u(d,y))>1e-4);return{U:p,T:d}}}),name$13="lyap",dependencies$13=["typed","matrix","sylvester","multiply","transpose"],createLyap=factory(name$13,dependencies$13,t=>{var{typed:r,matrix:a,sylvester:n,multiply:s,transpose:o}=t;return r(name$13,{"Matrix, Matrix":function(u,h){return n(u,o(u),s(-1,h))},"Array, Matrix":function(u,h){return n(a(u),o(a(u)),s(-1,h))},"Matrix, Array":function(u,h){return n(u,o(a(u)),a(s(-1,h)))},"Array, Array":function(u,h){return n(a(u),o(a(u)),a(s(-1,h))).toArray()}})}),name$12="divide",dependencies$12=["typed","matrix","multiply","equalScalar","divideScalar","inv"],createDivide=factory(name$12,dependencies$12,t=>{var{typed:r,matrix:a,multiply:n,equalScalar:s,divideScalar:o,inv:l}=t,u=createMatAlgo11xS0s({typed:r,equalScalar:s}),h=createMatAlgo14xDs({typed:r});return r("divide",extend({"Array | Matrix, Array | Matrix":function(f,d){return n(f,l(d))},"DenseMatrix, any":function(f,d){return h(f,d,o,!1)},"SparseMatrix, any":function(f,d){return u(f,d,o,!1)},"Array, any":function(f,d){return h(a(f),d,o,!1).valueOf()},"any, Array | Matrix":function(f,d){return n(f,l(d))}},o.signatures))}),name$11="distance",dependencies$11=["typed","addScalar","subtractScalar","divideScalar","multiplyScalar","deepEqual","sqrt","abs"],createDistance=factory(name$11,dependencies$11,t=>{var{typed:r,addScalar:a,subtractScalar:n,multiplyScalar:s,divideScalar:o,deepEqual:l,sqrt:u,abs:h}=t;return r(name$11,{"Array, Array, Array":function(w,A,X){if(w.length===2&&A.length===2&&X.length===2){if(!f(w))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!f(A))throw new TypeError("Array with 2 numbers or BigNumbers expected for second argument");if(!f(X))throw new TypeError("Array with 2 numbers or BigNumbers expected for third argument");if(l(A,X))throw new TypeError("LinePoint1 should not be same with LinePoint2");var O=n(X[1],A[1]),G=n(A[0],X[0]),R=n(s(X[0],A[1]),s(A[0],X[1]));return _(w[0],w[1],O,G,R)}else throw new TypeError("Invalid Arguments: Try again")},"Object, Object, Object":function(w,A,X){if(Object.keys(w).length===2&&Object.keys(A).length===2&&Object.keys(X).length===2){if(!f(w))throw new TypeError("Values of pointX and pointY should be numbers or BigNumbers");if(!f(A))throw new TypeError("Values of lineOnePtX and lineOnePtY should be numbers or BigNumbers");if(!f(X))throw new TypeError("Values of lineTwoPtX and lineTwoPtY should be numbers or BigNumbers");if(l(y(A),y(X)))throw new TypeError("LinePoint1 should not be same with LinePoint2");if("pointX"in w&&"pointY"in w&&"lineOnePtX"in A&&"lineOnePtY"in A&&"lineTwoPtX"in X&&"lineTwoPtY"in X){var O=n(X.lineTwoPtY,A.lineOnePtY),G=n(A.lineOnePtX,X.lineTwoPtX),R=n(s(X.lineTwoPtX,A.lineOnePtY),s(A.lineOnePtX,X.lineTwoPtY));return _(w.pointX,w.pointY,O,G,R)}else throw new TypeError("Key names do not match")}else throw new TypeError("Invalid Arguments: Try again")},"Array, Array":function(w,A){if(w.length===2&&A.length===3){if(!f(w))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!d(A))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");return _(w[0],w[1],A[0],A[1],A[2])}else if(w.length===3&&A.length===6){if(!d(w))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!v(A))throw new TypeError("Array with 6 numbers or BigNumbers expected for second argument");return N(w[0],w[1],w[2],A[0],A[1],A[2],A[3],A[4],A[5])}else if(w.length===A.length&&w.length>0){if(!p(w))throw new TypeError("All values of an array should be numbers or BigNumbers");if(!p(A))throw new TypeError("All values of an array should be numbers or BigNumbers");return M(w,A)}else throw new TypeError("Invalid Arguments: Try again")},"Object, Object":function(w,A){if(Object.keys(w).length===2&&Object.keys(A).length===3){if(!f(w))throw new TypeError("Values of pointX and pointY should be numbers or BigNumbers");if(!d(A))throw new TypeError("Values of xCoeffLine, yCoeffLine and constant should be numbers or BigNumbers");if("pointX"in w&&"pointY"in w&&"xCoeffLine"in A&&"yCoeffLine"in A&&"constant"in A)return _(w.pointX,w.pointY,A.xCoeffLine,A.yCoeffLine,A.constant);throw new TypeError("Key names do not match")}else if(Object.keys(w).length===3&&Object.keys(A).length===6){if(!d(w))throw new TypeError("Values of pointX, pointY and pointZ should be numbers or BigNumbers");if(!v(A))throw new TypeError("Values of x0, y0, z0, a, b and c should be numbers or BigNumbers");if("pointX"in w&&"pointY"in w&&"x0"in A&&"y0"in A&&"z0"in A&&"a"in A&&"b"in A&&"c"in A)return N(w.pointX,w.pointY,w.pointZ,A.x0,A.y0,A.z0,A.a,A.b,A.c);throw new TypeError("Key names do not match")}else if(Object.keys(w).length===2&&Object.keys(A).length===2){if(!f(w))throw new TypeError("Values of pointOneX and pointOneY should be numbers or BigNumbers");if(!f(A))throw new TypeError("Values of pointTwoX and pointTwoY should be numbers or BigNumbers");if("pointOneX"in w&&"pointOneY"in w&&"pointTwoX"in A&&"pointTwoY"in A)return M([w.pointOneX,w.pointOneY],[A.pointTwoX,A.pointTwoY]);throw new TypeError("Key names do not match")}else if(Object.keys(w).length===3&&Object.keys(A).length===3){if(!d(w))throw new TypeError("Values of pointOneX, pointOneY and pointOneZ should be numbers or BigNumbers");if(!d(A))throw new TypeError("Values of pointTwoX, pointTwoY and pointTwoZ should be numbers or BigNumbers");if("pointOneX"in w&&"pointOneY"in w&&"pointOneZ"in w&&"pointTwoX"in A&&"pointTwoY"in A&&"pointTwoZ"in A)return M([w.pointOneX,w.pointOneY,w.pointOneZ],[A.pointTwoX,A.pointTwoY,A.pointTwoZ]);throw new TypeError("Key names do not match")}else throw new TypeError("Invalid Arguments: Try again")},Array:function(w){if(!b(w))throw new TypeError("Incorrect array format entered for pairwise distance calculation");return C(w)}});function c($){return typeof $=="number"||isBigNumber($)}function f($){return $.constructor!==Array&&($=y($)),c($[0])&&c($[1])}function d($){return $.constructor!==Array&&($=y($)),c($[0])&&c($[1])&&c($[2])}function p($){return Array.isArray($)||($=y($)),$.every(c)}function v($){return $.constructor!==Array&&($=y($)),c($[0])&&c($[1])&&c($[2])&&c($[3])&&c($[4])&&c($[5])}function y($){for(var w=Object.keys($),A=[],X=0;X<w.length;X++)A.push($[w[X]]);return A}function b($){if($[0].length===2&&c($[0][0])&&c($[0][1])){if($.some(w=>w.length!==2||!c(w[0])||!c(w[1])))return!1}else if($[0].length===3&&c($[0][0])&&c($[0][1])&&c($[0][2])){if($.some(w=>w.length!==3||!c(w[0])||!c(w[1])||!c(w[2])))return!1}else return!1;return!0}function _($,w,A,X,O){var G=h(a(a(s(A,$),s(X,w)),O)),R=u(a(s(A,A),s(X,X)));return o(G,R)}function N($,w,A,X,O,G,R,B,F){var U=[n(s(n(O,w),F),s(n(G,A),B)),n(s(n(G,A),R),s(n(X,$),F)),n(s(n(X,$),B),s(n(O,w),R))];U=u(a(a(s(U[0],U[0]),s(U[1],U[1])),s(U[2],U[2])));var q=u(a(a(s(R,R),s(B,B)),s(F,F)));return o(U,q)}function M($,w){for(var A=$.length,X=0,O=0,G=0;G<A;G++)O=n($[G],w[G]),X=a(s(O,O),X);return u(X)}function C($){for(var w=[],A=[],X=[],O=0;O<$.length-1;O++)for(var G=O+1;G<$.length;G++)$[0].length===2?(A=[$[O][0],$[O][1]],X=[$[G][0],$[G][1]]):$[0].length===3&&(A=[$[O][0],$[O][1],$[O][2]],X=[$[G][0],$[G][1],$[G][2]]),w.push(M(A,X));return w}}),name$10="intersect",dependencies$10=["typed","config","abs","add","addScalar","matrix","multiply","multiplyScalar","divideScalar","subtract","smaller","equalScalar","flatten","isZero","isNumeric"],createIntersect=factory(name$10,dependencies$10,t=>{var{typed:r,config:a,abs:n,add:s,addScalar:o,matrix:l,multiply:u,multiplyScalar:h,divideScalar:c,subtract:f,smaller:d,equalScalar:p,flatten:v,isZero:y,isNumeric:b}=t;return r("intersect",{"Array, Array, Array":_,"Array, Array, Array, Array":N,"Matrix, Matrix, Matrix":function(B,F,U){var q=_(B.valueOf(),F.valueOf(),U.valueOf());return q===null?null:l(q)},"Matrix, Matrix, Matrix, Matrix":function(B,F,U,q){var ee=N(B.valueOf(),F.valueOf(),U.valueOf(),q.valueOf());return ee===null?null:l(ee)}});function _(R,B,F){if(R=M(R),B=M(B),F=M(F),!$(R))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!$(B))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");if(!w(F))throw new TypeError("Array with 4 numbers expected as third argument");return G(R[0],R[1],R[2],B[0],B[1],B[2],F[0],F[1],F[2],F[3])}function N(R,B,F,U){if(R=M(R),B=M(B),F=M(F),U=M(U),R.length===2){if(!C(R))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!C(B))throw new TypeError("Array with 2 numbers or BigNumbers expected for second argument");if(!C(F))throw new TypeError("Array with 2 numbers or BigNumbers expected for third argument");if(!C(U))throw new TypeError("Array with 2 numbers or BigNumbers expected for fourth argument");return A(R,B,F,U)}else if(R.length===3){if(!$(R))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!$(B))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");if(!$(F))throw new TypeError("Array with 3 numbers or BigNumbers expected for third argument");if(!$(U))throw new TypeError("Array with 3 numbers or BigNumbers expected for fourth argument");return O(R[0],R[1],R[2],B[0],B[1],B[2],F[0],F[1],F[2],U[0],U[1],U[2])}else throw new TypeError("Arrays with two or thee dimensional points expected")}function M(R){return R.length===1?R[0]:R.length>1&&Array.isArray(R[0])&&R.every(B=>Array.isArray(B)&&B.length===1)?v(R):R}function C(R){return R.length===2&&b(R[0])&&b(R[1])}function $(R){return R.length===3&&b(R[0])&&b(R[1])&&b(R[2])}function w(R){return R.length===4&&b(R[0])&&b(R[1])&&b(R[2])&&b(R[3])}function A(R,B,F,U){var q=R,ee=F,z=f(q,B),Y=f(ee,U),K=f(h(z[0],Y[1]),h(Y[0],z[1]));if(y(K)||d(n(K),a.relTol))return null;var Z=h(Y[0],q[1]),ne=h(Y[1],q[0]),j=h(Y[0],ee[1]),V=h(Y[1],ee[0]),L=c(o(f(f(Z,ne),j),V),K);return s(u(z,L),q)}function X(R,B,F,U,q,ee,z,Y,K,Z,ne,j){var V=h(f(R,B),f(F,U)),L=h(f(q,ee),f(z,Y)),ae=h(f(K,Z),f(ne,j));return o(o(V,L),ae)}function O(R,B,F,U,q,ee,z,Y,K,Z,ne,j){var V=X(R,z,Z,z,B,Y,ne,Y,F,K,j,K),L=X(Z,z,U,R,ne,Y,q,B,j,K,ee,F),ae=X(R,z,U,R,B,Y,q,B,F,K,ee,F),W=X(Z,z,Z,z,ne,Y,ne,Y,j,K,j,K),ve=X(U,R,U,R,q,B,q,B,ee,F,ee,F),de=f(h(V,L),h(ae,W)),se=f(h(ve,W),h(L,L));if(y(se))return null;var ie=c(de,se),ce=c(o(V,h(ie,L)),W),xe=o(R,h(ie,f(U,R))),fe=o(B,h(ie,f(q,B))),Ne=o(F,h(ie,f(ee,F))),we=o(z,h(ce,f(Z,z))),Pe=o(Y,h(ce,f(ne,Y))),Ie=o(K,h(ce,f(j,K)));return p(xe,we)&&p(fe,Pe)&&p(Ne,Ie)?[xe,fe,Ne]:null}function G(R,B,F,U,q,ee,z,Y,K,Z){var ne=h(R,z),j=h(U,z),V=h(B,Y),L=h(q,Y),ae=h(F,K),W=h(ee,K),ve=f(f(f(Z,ne),V),ae),de=f(f(f(o(o(j,L),W),ne),V),ae),se=c(ve,de),ie=o(R,h(se,f(U,R))),ce=o(B,h(se,f(q,B))),xe=o(F,h(se,f(ee,F)));return[ie,ce,xe]}}),name$$="sum",dependencies$$=["typed","config","add","numeric"],createSum=factory(name$$,dependencies$$,t=>{var{typed:r,config:a,add:n,numeric:s}=t;return r(name$$,{"Array | Matrix":o,"Array | Matrix, number | BigNumber":l,"...":function(h){if(containsCollections(h))throw new TypeError("Scalar values expected in function sum");return o(h)}});function o(u){var h;return deepForEach(u,function(c){try{h=h===void 0?c:n(h,c)}catch(f){throw improveErrorMessage(f,"sum",c)}}),h===void 0&&(h=s(0,a.number)),typeof h=="string"&&(h=s(h,safeNumberType(h,a))),h}function l(u,h){try{var c=reduce(u,h,n);return c}catch(f){throw improveErrorMessage(f,"sum")}}}),name$_="cumsum",dependencies$_=["typed","add","unaryPlus"],createCumSum=factory(name$_,dependencies$_,t=>{var{typed:r,add:a,unaryPlus:n}=t;return r(name$_,{Array:s,Matrix:function(c){return c.create(s(c.valueOf(),c.datatype()))},"Array, number | BigNumber":l,"Matrix, number | BigNumber":function(c,f){return c.create(l(c.valueOf(),f),c.datatype())},"...":function(c){if(containsCollections(c))throw new TypeError("All values expected to be scalar in function cumsum");return s(c)}});function s(h){try{return o(h)}catch(c){throw improveErrorMessage(c,name$_)}}function o(h){if(h.length===0)return[];for(var c=[n(h[0])],f=1;f<h.length;++f)c.push(a(c[f-1],h[f]));return c}function l(h,c){var f=arraySize(h);if(c<0||c>=f.length)throw new IndexError(c,f.length);try{return u(h,c)}catch(d){throw improveErrorMessage(d,name$_)}}function u(h,c){var f,d,p;if(c<=0){var v=h[0][0];if(Array.isArray(v)){for(p=_switch$1(h),d=[],f=0;f<p.length;f++)d[f]=u(p[f],c-1);return d}else return o(h)}else{for(d=[],f=0;f<h.length;f++)d[f]=u(h[f],c-1);return d}}}),name$Z="mean",dependencies$Z=["typed","add","divide"],createMean=factory(name$Z,dependencies$Z,t=>{var{typed:r,add:a,divide:n}=t;return r(name$Z,{"Array | Matrix":o,"Array | Matrix, number | BigNumber":s,"...":function(u){if(containsCollections(u))throw new TypeError("Scalar values expected in function mean");return o(u)}});function s(l,u){try{var h=reduce(l,u,a),c=Array.isArray(l)?arraySize(l):l.size();return n(h,c[u])}catch(f){throw improveErrorMessage(f,"mean")}}function o(l){var u,h=0;if(deepForEach(l,function(c){try{u=u===void 0?c:a(u,c),h++}catch(f){throw improveErrorMessage(f,"mean",c)}}),h===0)throw new Error("Cannot calculate the mean of an empty array");return n(u,h)}}),name$Y="median",dependencies$Y=["typed","add","divide","compare","partitionSelect"],createMedian=factory(name$Y,dependencies$Y,t=>{var{typed:r,add:a,divide:n,compare:s,partitionSelect:o}=t;function l(c){try{c=flatten$1(c.valueOf());var f=c.length;if(f===0)throw new Error("Cannot calculate median of an empty array");if(f%2===0){for(var d=f/2-1,p=o(c,d+1),v=c[d],y=0;y<d;++y)s(c[y],v)>0&&(v=c[y]);return h(v,p)}else{var b=o(c,(f-1)/2);return u(b)}}catch(_){throw improveErrorMessage(_,"median")}}var u=r({"number | BigNumber | Complex | Unit":function(f){return f}}),h=r({"number | BigNumber | Complex | Unit, number | BigNumber | Complex | Unit":function(f,d){return n(a(f,d),2)}});return r(name$Y,{"Array | Matrix":l,"Array | Matrix, number | BigNumber":function(f,d){throw new Error("median(A, dim) is not yet supported")},"...":function(f){if(containsCollections(f))throw new TypeError("Scalar values expected in function median");return l(f)}})}),name$X="mad",dependencies$X=["typed","abs","map","median","subtract"],createMad=factory(name$X,dependencies$X,t=>{var{typed:r,abs:a,map:n,median:s,subtract:o}=t;return r(name$X,{"Array | Matrix":l,"...":function(h){return l(h)}});function l(u){if(u=flatten$1(u.valueOf()),u.length===0)throw new Error("Cannot calculate median absolute deviation (mad) of an empty array");try{var h=s(u);return s(n(u,function(c){return a(o(c,h))}))}catch(c){throw c instanceof TypeError&&c.message.includes("median")?new TypeError(c.message.replace("median","mad")):improveErrorMessage(c,"mad")}}}),DEFAULT_NORMALIZATION="unbiased",name$W="variance",dependencies$W=["typed","add","subtract","multiply","divide","mapSlices","isNaN"],createVariance=factory(name$W,dependencies$W,t=>{var{typed:r,add:a,subtract:n,multiply:s,divide:o,mapSlices:l,isNaN:u}=t;return r(name$W,{"Array | Matrix":function(d){return h(d,DEFAULT_NORMALIZATION)},"Array | Matrix, string":h,"Array | Matrix, number | BigNumber":function(d,p){return c(d,p,DEFAULT_NORMALIZATION)},"Array | Matrix, number | BigNumber, string":c,"...":function(d){return h(d,DEFAULT_NORMALIZATION)}});function h(f,d){var p,v=0;if(f.length===0)throw new SyntaxError("Function variance requires one or more parameters (0 provided)");if(deepForEach(f,function(_){try{p=p===void 0?_:a(p,_),v++}catch(N){throw improveErrorMessage(N,"variance",_)}}),v===0)throw new Error("Cannot calculate variance of an empty array");var y=o(p,v);if(p=void 0,deepForEach(f,function(_){var N=n(_,y);p=p===void 0?s(N,N):a(p,s(N,N))}),u(p))return p;switch(d){case"uncorrected":return o(p,v);case"biased":return o(p,v+1);case"unbiased":{var b=isBigNumber(p)?p.mul(0):0;return v===1?b:o(p,v-1)}default:throw new Error('Unknown normalization "'+d+'". Choose "unbiased" (default), "uncorrected", or "biased".')}}function c(f,d,p){try{if(f.length===0)throw new SyntaxError("Function variance requires one or more parameters (0 provided)");return l(f,d,v=>h(v,p))}catch(v){throw improveErrorMessage(v,"variance")}}}),name$V="quantileSeq",dependencies$V=["typed","?bignumber","add","subtract","divide","multiply","partitionSelect","compare","isInteger","smaller","smallerEq","larger","mapSlices"],createQuantileSeq=factory(name$V,dependencies$V,t=>{var{typed:r,bignumber:a,add:n,subtract:s,divide:o,multiply:l,partitionSelect:u,compare:h,isInteger:c,smaller:f,smallerEq:d,larger:p,mapSlices:v}=t;return r(name$V,{"Array | Matrix, number | BigNumber":(M,C)=>b(M,C,!1),"Array | Matrix, number | BigNumber, number":(M,C,$)=>y(M,C,!1,$,b),"Array | Matrix, number | BigNumber, boolean":b,"Array | Matrix, number | BigNumber, boolean, number":(M,C,$,w)=>y(M,C,$,w,b),"Array | Matrix, Array | Matrix":(M,C)=>_(M,C,!1),"Array | Matrix, Array | Matrix, number":(M,C,$)=>y(M,C,!1,$,_),"Array | Matrix, Array | Matrix, boolean":_,"Array | Matrix, Array | Matrix, boolean, number":(M,C,$,w)=>y(M,C,$,w,_)});function y(M,C,$,w,A){return v(M,w,X=>A(X,C,$))}function b(M,C,$){var w,A=M.valueOf();if(f(C,0))throw new Error("N/prob must be non-negative");if(d(C,1))return isNumber(C)?N(A,C,$):a(N(A,C,$));if(p(C,1)){if(!c(C))throw new Error("N must be a positive integer");if(p(C,4294967295))throw new Error("N must be less than or equal to 2^32-1, as that is the maximum length of an Array");var X=n(C,1);w=[];for(var O=0;f(O,C);O++){var G=o(O+1,X);w.push(N(A,G,$))}return isNumber(C)?w:a(w)}}function _(M,C,$){for(var w=M.valueOf(),A=C.valueOf(),X=[],O=0;O<A.length;++O)X.push(N(w,A[O],$));return X}function N(M,C,$){var w=flatten$1(M),A=w.length;if(A===0)throw new Error("Cannot calculate quantile of an empty sequence");var X=isNumber(C)?C*(A-1):C.times(A-1),O=isNumber(C)?Math.floor(X):X.floor().toNumber(),G=isNumber(C)?X%1:X.minus(O);if(c(X))return $?w[X]:u(w,isNumber(C)?X:X.valueOf());var R,B;if($)R=w[O],B=w[O+1];else{B=u(w,O+1),R=w[O];for(var F=0;F<O;++F)h(w[F],R)>0&&(R=w[F])}return n(l(R,s(1,G)),l(B,G))}}),name$U="std",dependencies$U=["typed","map","sqrt","variance"],createStd=factory(name$U,dependencies$U,t=>{var{typed:r,map:a,sqrt:n,variance:s}=t;return r(name$U,{"Array | Matrix":o,"Array | Matrix, string":o,"Array | Matrix, number | BigNumber":o,"Array | Matrix, number | BigNumber, string":o,"...":function(u){return o(u)}});function o(l,u){if(l.length===0)throw new SyntaxError("Function std requires one or more parameters (0 provided)");try{var h=s.apply(null,arguments);return isCollection(h)?a(h,n):n(h)}catch(c){throw c instanceof TypeError&&c.message.includes(" variance")?new TypeError(c.message.replace(" variance"," std")):c}}}),name$T="corr",dependencies$T=["typed","matrix","mean","sqrt","sum","add","subtract","multiply","pow","divide"],createCorr=factory(name$T,dependencies$T,t=>{var{typed:r,matrix:a,sqrt:n,sum:s,add:o,subtract:l,multiply:u,pow:h,divide:c}=t;return r(name$T,{"Array, Array":function(v,y){return f(v,y)},"Matrix, Matrix":function(v,y){var b=f(v.toArray(),y.toArray());return Array.isArray(b)?a(b):b}});function f(p,v){var y=[];if(Array.isArray(p[0])&&Array.isArray(v[0])){if(p.length!==v.length)throw new SyntaxError("Dimension mismatch. Array A and B must have the same length.");for(var b=0;b<p.length;b++){if(p[b].length!==v[b].length)throw new SyntaxError("Dimension mismatch. Array A and B must have the same number of elements.");y.push(d(p[b],v[b]))}return y}else{if(p.length!==v.length)throw new SyntaxError("Dimension mismatch. Array A and B must have the same number of elements.");return d(p,v)}}function d(p,v){var y=p.length,b=s(p),_=s(v),N=p.reduce((A,X,O)=>o(A,u(X,v[O])),0),M=s(p.map(A=>h(A,2))),C=s(v.map(A=>h(A,2))),$=l(u(y,N),u(b,_)),w=n(u(l(u(y,M),h(b,2)),l(u(y,C),h(_,2))));return c($,w)}}),name$S="bernoulli",dependencies$S=["typed","config","isInteger","number","?BigNumber","?Fraction"],createBernoulli=factory(name$S,dependencies$S,t=>{var{typed:r,config:a,number:n,BigNumber:s,Fraction:o}=t,l=[void 0],u=[void 0],h=[void 0],c=50;return r(name$S,{number:f=>_bernoulli(f,d=>d,l,(d,p)=>d+p,(d,p)=>d*p,(d,p)=>d/p),"bigint | Fraction":f=>_bernoulli(n(f),d=>new o(d),u,(d,p)=>d.add(p),(d,p)=>d.mul(p),(d,p)=>d.div(p)),BigNumber:f=>(a.precision!==c&&(h=[void 0],c=a.precision),_bernoulli(n(f),d=>new s(d),h,(d,p)=>d.add(p),(d,p)=>d.mul(p),(d,p)=>d.div(p)))})});function _bernoulli(t,r,a,n,s,o){if(t<0||!isInteger$1(t))throw new RangeError("Bernoulli index must be nonnegative integer");if(t===0)return r(1);if(t===1)return o(r(-1),r(2));if(t%2===1)return r(0);var l=r(1);a.length===1&&a.push([o(l,r(-3)),o(l,r(-2)),o(l,r(6))]);for(var u=t/2,h=r(0),c=r(2);a.length<=u;){for(var f=a.length,d=Math.floor((f+1)/2),p=h,v=1;v<d;++v)p=n(p,s(a[v][0],a[f-v][0]));p=s(p,c),f%2===0&&(p=n(p,s(a[d][0],a[d][0]))),p=o(p,r(-(2*f+1)));var y=o(s(a[f-1][1],r(-f*(2*f-1))),c);a.push([p,y,s(y,p)])}return a[u][2]}var name$R="combinations",dependencies$R=["typed"],createCombinations=factory(name$R,dependencies$R,t=>{var{typed:r}=t;return r(name$R,{"number, number":combinationsNumber,"BigNumber, BigNumber":function(n,s){var o=n.constructor,l,u,h=n.minus(s),c=new o(1);if(!isPositiveInteger$2(n)||!isPositiveInteger$2(s))throw new TypeError("Positive integer value expected in function combinations");if(s.gt(n))throw new TypeError("k must be less than n in function combinations");if(l=c,s.lt(h))for(u=c;u.lte(h);u=u.plus(c))l=l.times(s.plus(u)).dividedBy(u);else for(u=c;u.lte(s);u=u.plus(c))l=l.times(h.plus(u)).dividedBy(u);return l}})});function isPositiveInteger$2(t){return t.isInteger()&&t.gte(0)}var name$Q="combinationsWithRep",dependencies$Q=["typed"],createCombinationsWithRep=factory(name$Q,dependencies$Q,t=>{var{typed:r}=t;return r(name$Q,{"number, number":function(n,s){if(!isInteger$1(n)||n<0)throw new TypeError("Positive integer value expected in function combinationsWithRep");if(!isInteger$1(s)||s<0)throw new TypeError("Positive integer value expected in function combinationsWithRep");if(n<1)throw new TypeError("k must be less than or equal to n + k - 1");if(s<n-1){var o=product(n,n+s-1);return o/product(1,s)}var l=product(s+1,n+s-1);return l/product(1,n-1)},"BigNumber, BigNumber":function(n,s){var o=n.constructor,l,u,h=new o(1),c=n.minus(h);if(!isPositiveInteger$1(n)||!isPositiveInteger$1(s))throw new TypeError("Positive integer value expected in function combinationsWithRep");if(n.lt(h))throw new TypeError("k must be less than or equal to n + k - 1 in function combinationsWithRep");if(l=h,s.lt(c))for(u=h;u.lte(c);u=u.plus(h))l=l.times(s.plus(u)).dividedBy(u);else for(u=h;u.lte(s);u=u.plus(h))l=l.times(c.plus(u)).dividedBy(u);return l}})});function isPositiveInteger$1(t){return t.isInteger()&&t.gte(0)}var name$P="gamma",dependencies$P=["typed","config","multiplyScalar","pow","BigNumber","Complex"],createGamma=factory(name$P,dependencies$P,t=>{var{typed:r,config:a,multiplyScalar:n,pow:s,BigNumber:o,Complex:l}=t;function u(c){if(c.im===0)return gammaNumber(c.re);if(c.re<.5){var f=new l(1-c.re,-c.im),d=new l(Math.PI*c.re,Math.PI*c.im);return new l(Math.PI).div(d.sin()).div(u(f))}c=new l(c.re-1,c.im);for(var p=new l(gammaP[0],0),v=1;v<gammaP.length;++v){var y=new l(gammaP[v],0);p=p.add(y.div(c.add(v)))}var b=new l(c.re+gammaG+.5,c.im),_=Math.sqrt(2*Math.PI),N=b.pow(c.add(.5)),M=b.neg().exp();return p.mul(_).mul(N).mul(M)}return r(name$P,{number:gammaNumber,Complex:u,BigNumber:function(f){if(f.isInteger())return f.isNegative()||f.isZero()?new o(1/0):h(f.minus(1));if(!f.isFinite())return new o(f.isNegative()?NaN:1/0);throw new Error("Integer BigNumber expected")}});function h(c){if(c<8)return new o([1,1,2,6,24,120,720,5040][c]);var f=a.precision+(Math.log(c.toNumber())|0),d=o.clone({precision:f});if(c%2===1)return c.times(h(new o(c-1)));for(var p=c,v=new d(c),y=c.toNumber();p>2;)p-=2,y+=p,v=v.times(y);return new o(v.toPrecision(o.precision))}}),name$O="lgamma",dependencies$O=["Complex","typed"],createLgamma=factory(name$O,dependencies$O,t=>{var{Complex:r,typed:a}=t,n=7,s=7,o=[-.029550653594771242,.00641025641025641,-.0019175269175269176,.0008417508417508417,-.0005952380952380953,.0007936507936507937,-.002777777777777778,.08333333333333333];return a(name$O,{number:lgammaNumber,Complex:l,BigNumber:function(){throw new Error("mathjs doesn't yet provide an implementation of the algorithm lgamma for BigNumber")}});function l(c){var f=6.283185307179586,d=1.1447298858494002,p=.1;if(c.isNaN())return new r(NaN,NaN);if(c.im===0)return new r(lgammaNumber(c.re),0);if(c.re>=n||Math.abs(c.im)>=s)return u(c);if(c.re<=p){var v=copysign(f,c.im)*Math.floor(.5*c.re+.25),y=c.mul(Math.PI).sin().log(),b=l(new r(1-c.re,-c.im));return new r(d,v).sub(y).sub(b)}else return c.im>=0?h(c):h(c.conjugate()).conjugate()}function u(c){for(var f=c.sub(.5).mul(c.log()).sub(c).add(lnSqrt2PI),d=new r(1,0).div(c),p=d.div(c),v=o[0],y=o[1],b=2*p.re,_=p.re*p.re+p.im*p.im,N=2;N<8;N++){var M=y;y=-_*v+o[N],v=b*v+M}var C=d.mul(p.mul(v).add(y));return f.add(C)}function h(c){var f=0,d=0,p=c;for(c=c.add(1);c.re<=n;){p=p.mul(c);var v=p.im<0?1:0;v!==0&&d===0&&f++,d=v,c=c.add(1)}return u(c).sub(p.log()).sub(new r(0,f*2*Math.PI*1))}}),name$N="factorial",dependencies$N=["typed","gamma"],createFactorial=factory(name$N,dependencies$N,t=>{var{typed:r,gamma:a}=t;return r(name$N,{number:function(s){if(s<0)throw new Error("Value must be non-negative");return a(s+1)},BigNumber:function(s){if(s.isNegative())throw new Error("Value must be non-negative");return a(s.plus(1))},"Array | Matrix":r.referToSelf(n=>s=>deepMap(s,n))})}),name$M="kldivergence",dependencies$M=["typed","matrix","divide","sum","multiply","map","dotDivide","log","isNumeric"],createKldivergence=factory(name$M,dependencies$M,t=>{var{typed:r,matrix:a,divide:n,sum:s,multiply:o,map:l,dotDivide:u,log:h,isNumeric:c}=t;return r(name$M,{"Array, Array":function(p,v){return f(a(p),a(v))},"Matrix, Array":function(p,v){return f(p,a(v))},"Array, Matrix":function(p,v){return f(a(p),v)},"Matrix, Matrix":function(p,v){return f(p,v)}});function f(d,p){var v=p.size().length,y=d.size().length;if(v>1)throw new Error("first object must be one dimensional");if(y>1)throw new Error("second object must be one dimensional");if(v!==y)throw new Error("Length of two vectors must be equal");var b=s(d);if(b===0)throw new Error("Sum of elements in first object must be non zero");var _=s(p);if(_===0)throw new Error("Sum of elements in second object must be non zero");var N=n(d,s(d)),M=n(p,s(p)),C=s(o(N,l(u(N,M),$=>h($))));return c(C)?C:Number.NaN}}),name$L="multinomial",dependencies$L=["typed","add","divide","multiply","factorial","isInteger","isPositive"],createMultinomial=factory(name$L,dependencies$L,t=>{var{typed:r,add:a,divide:n,multiply:s,factorial:o,isInteger:l,isPositive:u}=t;return r(name$L,{"Array | Matrix":function(c){var f=0,d=1;return deepForEach(c,function(p){if(!l(p)||!u(p))throw new TypeError("Positive integer value expected in function multinomial");f=a(f,p),d=s(d,o(p))}),n(o(f),d)}})}),name$K="permutations",dependencies$K=["typed","factorial"],createPermutations=factory(name$K,dependencies$K,t=>{var{typed:r,factorial:a}=t;return r(name$K,{"number | BigNumber":a,"number, number":function(s,o){if(!isInteger$1(s)||s<0)throw new TypeError("Positive integer value expected in function permutations");if(!isInteger$1(o)||o<0)throw new TypeError("Positive integer value expected in function permutations");if(o>s)throw new TypeError("second argument k must be less than or equal to first argument n");return product(s-o+1,s)},"BigNumber, BigNumber":function(s,o){var l,u;if(!isPositiveInteger(s)||!isPositiveInteger(o))throw new TypeError("Positive integer value expected in function permutations");if(o.gt(s))throw new TypeError("second argument k must be less than or equal to first argument n");var h=s.mul(0).add(1);for(l=h,u=s.minus(o).plus(1);u.lte(s);u=u.plus(1))l=l.times(u);return l}})});function isPositiveInteger(t){return t.isInteger()&&t.gte(0)}var alea$1={exports:{}},alea=alea$1.exports,hasRequiredAlea;function requireAlea(){return hasRequiredAlea||(hasRequiredAlea=1,(function(t){(function(r,a,n){function s(h){var c=this,f=u();c.next=function(){var d=2091639*c.s0+c.c*23283064365386963e-26;return c.s0=c.s1,c.s1=c.s2,c.s2=d-(c.c=d|0)},c.c=1,c.s0=f(" "),c.s1=f(" "),c.s2=f(" "),c.s0-=f(h),c.s0<0&&(c.s0+=1),c.s1-=f(h),c.s1<0&&(c.s1+=1),c.s2-=f(h),c.s2<0&&(c.s2+=1),f=null}function o(h,c){return c.c=h.c,c.s0=h.s0,c.s1=h.s1,c.s2=h.s2,c}function l(h,c){var f=new s(h),d=c&&c.state,p=f.next;return p.int32=function(){return f.next()*4294967296|0},p.double=function(){return p()+(p()*2097152|0)*11102230246251565e-32},p.quick=p,d&&(typeof d=="object"&&o(d,f),p.state=function(){return o(f,{})}),p}function u(){var h=4022871197,c=function(f){f=String(f);for(var d=0;d<f.length;d++){h+=f.charCodeAt(d);var p=.02519603282416938*h;h=p>>>0,p-=h,p*=h,h=p>>>0,p-=h,h+=p*4294967296}return(h>>>0)*23283064365386963e-26};return c}a&&a.exports?a.exports=l:this.alea=l})(alea,t)})(alea$1)),alea$1.exports}var xor128$1={exports:{}},xor128=xor128$1.exports,hasRequiredXor128;function requireXor128(){return hasRequiredXor128||(hasRequiredXor128=1,(function(t){(function(r,a,n){function s(u){var h=this,c="";h.x=0,h.y=0,h.z=0,h.w=0,h.next=function(){var d=h.x^h.x<<11;return h.x=h.y,h.y=h.z,h.z=h.w,h.w^=h.w>>>19^d^d>>>8},u===(u|0)?h.x=u:c+=u;for(var f=0;f<c.length+64;f++)h.x^=c.charCodeAt(f)|0,h.next()}function o(u,h){return h.x=u.x,h.y=u.y,h.z=u.z,h.w=u.w,h}function l(u,h){var c=new s(u),f=h&&h.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var p=c.next()>>>11,v=(c.next()>>>0)/4294967296,y=(p+v)/(1<<21);while(y===0);return y},d.int32=c.next,d.quick=d,f&&(typeof f=="object"&&o(f,c),d.state=function(){return o(c,{})}),d}a&&a.exports?a.exports=l:this.xor128=l})(xor128,t)})(xor128$1)),xor128$1.exports}var xorwow$1={exports:{}},xorwow=xorwow$1.exports,hasRequiredXorwow;function requireXorwow(){return hasRequiredXorwow||(hasRequiredXorwow=1,(function(t){(function(r,a,n){function s(u){var h=this,c="";h.next=function(){var d=h.x^h.x>>>2;return h.x=h.y,h.y=h.z,h.z=h.w,h.w=h.v,(h.d=h.d+362437|0)+(h.v=h.v^h.v<<4^(d^d<<1))|0},h.x=0,h.y=0,h.z=0,h.w=0,h.v=0,u===(u|0)?h.x=u:c+=u;for(var f=0;f<c.length+64;f++)h.x^=c.charCodeAt(f)|0,f==c.length&&(h.d=h.x<<10^h.x>>>4),h.next()}function o(u,h){return h.x=u.x,h.y=u.y,h.z=u.z,h.w=u.w,h.v=u.v,h.d=u.d,h}function l(u,h){var c=new s(u),f=h&&h.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var p=c.next()>>>11,v=(c.next()>>>0)/4294967296,y=(p+v)/(1<<21);while(y===0);return y},d.int32=c.next,d.quick=d,f&&(typeof f=="object"&&o(f,c),d.state=function(){return o(c,{})}),d}a&&a.exports?a.exports=l:this.xorwow=l})(xorwow,t)})(xorwow$1)),xorwow$1.exports}var xorshift7$1={exports:{}},xorshift7=xorshift7$1.exports,hasRequiredXorshift7;function requireXorshift7(){return hasRequiredXorshift7||(hasRequiredXorshift7=1,(function(t){(function(r,a,n){function s(u){var h=this;h.next=function(){var f=h.x,d=h.i,p,v;return p=f[d],p^=p>>>7,v=p^p<<24,p=f[d+1&7],v^=p^p>>>10,p=f[d+3&7],v^=p^p>>>3,p=f[d+4&7],v^=p^p<<7,p=f[d+7&7],p=p^p<<13,v^=p^p<<9,f[d]=v,h.i=d+1&7,v};function c(f,d){var p,v=[];if(d===(d|0))v[0]=d;else for(d=""+d,p=0;p<d.length;++p)v[p&7]=v[p&7]<<15^d.charCodeAt(p)+v[p+1&7]<<13;for(;v.length<8;)v.push(0);for(p=0;p<8&&v[p]===0;++p);for(p==8?v[7]=-1:v[p],f.x=v,f.i=0,p=256;p>0;--p)f.next()}c(h,u)}function o(u,h){return h.x=u.x.slice(),h.i=u.i,h}function l(u,h){u==null&&(u=+new Date);var c=new s(u),f=h&&h.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var p=c.next()>>>11,v=(c.next()>>>0)/4294967296,y=(p+v)/(1<<21);while(y===0);return y},d.int32=c.next,d.quick=d,f&&(f.x&&o(f,c),d.state=function(){return o(c,{})}),d}a&&a.exports?a.exports=l:this.xorshift7=l})(xorshift7,t)})(xorshift7$1)),xorshift7$1.exports}var xor4096$1={exports:{}},xor4096=xor4096$1.exports,hasRequiredXor4096;function requireXor4096(){return hasRequiredXor4096||(hasRequiredXor4096=1,(function(t){(function(r,a,n){function s(u){var h=this;h.next=function(){var f=h.w,d=h.X,p=h.i,v,y;return h.w=f=f+1640531527|0,y=d[p+34&127],v=d[p=p+1&127],y^=y<<13,v^=v<<17,y^=y>>>15,v^=v>>>12,y=d[p]=y^v,h.i=p,y+(f^f>>>16)|0};function c(f,d){var p,v,y,b,_,N=[],M=128;for(d===(d|0)?(v=d,d=null):(d=d+"\0",v=0,M=Math.max(M,d.length)),y=0,b=-32;b<M;++b)d&&(v^=d.charCodeAt((b+32)%d.length)),b===0&&(_=v),v^=v<<10,v^=v>>>15,v^=v<<4,v^=v>>>13,b>=0&&(_=_+1640531527|0,p=N[b&127]^=v+_,y=p==0?y+1:0);for(y>=128&&(N[(d&&d.length||0)&127]=-1),y=127,b=512;b>0;--b)v=N[y+34&127],p=N[y=y+1&127],v^=v<<13,p^=p<<17,v^=v>>>15,p^=p>>>12,N[y]=v^p;f.w=_,f.X=N,f.i=y}c(h,u)}function o(u,h){return h.i=u.i,h.w=u.w,h.X=u.X.slice(),h}function l(u,h){u==null&&(u=+new Date);var c=new s(u),f=h&&h.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var p=c.next()>>>11,v=(c.next()>>>0)/4294967296,y=(p+v)/(1<<21);while(y===0);return y},d.int32=c.next,d.quick=d,f&&(f.X&&o(f,c),d.state=function(){return o(c,{})}),d}a&&a.exports?a.exports=l:this.xor4096=l})(xor4096,t)})(xor4096$1)),xor4096$1.exports}var tychei$1={exports:{}},tychei=tychei$1.exports,hasRequiredTychei;function requireTychei(){return hasRequiredTychei||(hasRequiredTychei=1,(function(t){(function(r,a,n){function s(u){var h=this,c="";h.next=function(){var d=h.b,p=h.c,v=h.d,y=h.a;return d=d<<25^d>>>7^p,p=p-v|0,v=v<<24^v>>>8^y,y=y-d|0,h.b=d=d<<20^d>>>12^p,h.c=p=p-v|0,h.d=v<<16^p>>>16^y,h.a=y-d|0},h.a=0,h.b=0,h.c=-1640531527,h.d=1367130551,u===Math.floor(u)?(h.a=u/4294967296|0,h.b=u|0):c+=u;for(var f=0;f<c.length+20;f++)h.b^=c.charCodeAt(f)|0,h.next()}function o(u,h){return h.a=u.a,h.b=u.b,h.c=u.c,h.d=u.d,h}function l(u,h){var c=new s(u),f=h&&h.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var p=c.next()>>>11,v=(c.next()>>>0)/4294967296,y=(p+v)/(1<<21);while(y===0);return y},d.int32=c.next,d.quick=d,f&&(typeof f=="object"&&o(f,c),d.state=function(){return o(c,{})}),d}a&&a.exports?a.exports=l:this.tychei=l})(tychei,t)})(tychei$1)),tychei$1.exports}var seedrandom$3={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$0=getAugmentedNamespace(__viteBrowserExternal$1);var seedrandom$2=seedrandom$3.exports,hasRequiredSeedrandom$1;function requireSeedrandom$1(){return hasRequiredSeedrandom$1||(hasRequiredSeedrandom$1=1,(function(t){(function(r,a,n){var s=256,o=6,l=52,u="random",h=n.pow(s,o),c=n.pow(2,l),f=c*2,d=s-1,p;function v($,w,A){var X=[];w=w==!0?{entropy:!0}:w||{};var O=N(_(w.entropy?[$,C(a)]:$??M(),3),X),G=new y(X),R=function(){for(var B=G.g(o),F=h,U=0;B<c;)B=(B+U)*s,F*=s,U=G.g(1);for(;B>=f;)B/=2,F/=2,U>>>=1;return(B+U)/F};return R.int32=function(){return G.g(4)|0},R.quick=function(){return G.g(4)/4294967296},R.double=R,N(C(G.S),a),(w.pass||A||function(B,F,U,q){return q&&(q.S&&b(q,G),B.state=function(){return b(G,{})}),U?(n[u]=B,F):B})(R,O,"global"in w?w.global:this==n,w.state)}function y($){var w,A=$.length,X=this,O=0,G=X.i=X.j=0,R=X.S=[];for(A||($=[A++]);O<s;)R[O]=O++;for(O=0;O<s;O++)R[O]=R[G=d&G+$[O%A]+(w=R[O])],R[G]=w;(X.g=function(B){for(var F,U=0,q=X.i,ee=X.j,z=X.S;B--;)F=z[q=d&q+1],U=U*s+z[d&(z[q]=z[ee=d&ee+F])+(z[ee]=F)];return X.i=q,X.j=ee,U})(s)}function b($,w){return w.i=$.i,w.j=$.j,w.S=$.S.slice(),w}function _($,w){var A=[],X=typeof $,O;if(w&&X=="object")for(O in $)try{A.push(_($[O],w-1))}catch{}return A.length?A:X=="string"?$:$+"\0"}function N($,w){for(var A=$+"",X,O=0;O<A.length;)w[d&O]=d&(X^=w[d&O]*19)+A.charCodeAt(O++);return C(w)}function M(){try{var $;return p&&($=p.randomBytes)?$=$(s):($=new Uint8Array(s),(r.crypto||r.msCrypto).getRandomValues($)),C($)}catch{var w=r.navigator,A=w&&w.plugins;return[+new Date,r,A,r.screen,C(a)]}}function C($){return String.fromCharCode.apply(0,$)}if(N(n.random(),a),t.exports){t.exports=v;try{p=require$$0}catch{}}else n["seed"+u]=v})(typeof self<"u"?self:seedrandom$2,[],Math)})(seedrandom$3)),seedrandom$3.exports}var seedrandom$1,hasRequiredSeedrandom;function requireSeedrandom(){if(hasRequiredSeedrandom)return seedrandom$1;hasRequiredSeedrandom=1;var t=requireAlea(),r=requireXor128(),a=requireXorwow(),n=requireXorshift7(),s=requireXor4096(),o=requireTychei(),l=requireSeedrandom$1();return l.alea=t,l.xor128=r,l.xorwow=a,l.xorshift7=n,l.xor4096=s,l.tychei=o,seedrandom$1=l,seedrandom$1}var seedrandomExports=requireSeedrandom();const seedrandom=getDefaultExportFromCjs(seedrandomExports);var singletonRandom=seedrandom(Date.now());function createRng(t){var r;function a(s){r=s===null?singletonRandom:seedrandom(String(s))}a(t);function n(){return r()}return n}var name$J="pickRandom",dependencies$J=["typed","config","?on"],createPickRandom=factory(name$J,dependencies$J,t=>{var{typed:r,config:a,on:n}=t,s=createRng(a.randomSeed);return n&&n("config",function(l,u){l.randomSeed!==u.randomSeed&&(s=createRng(l.randomSeed))}),r(name$J,{"Array | Matrix":function(u){return o(u,{})},"Array | Matrix, Object":function(u,h){return o(u,h)},"Array | Matrix, number":function(u,h){return o(u,{number:h})},"Array | Matrix, Array | Matrix":function(u,h){return o(u,{weights:h})},"Array | Matrix, Array | Matrix, number":function(u,h,c){return o(u,{number:c,weights:h})},"Array | Matrix, number, Array | Matrix":function(u,h,c){return o(u,{number:h,weights:c})}});function o(l,u){var{number:h,weights:c,elementWise:f=!0}=u,d=typeof h>"u";d&&(h=1);var p=isMatrix(l)?l.create:isMatrix(c)?c.create:null;l=l.valueOf(),c&&(c=c.valueOf()),f===!0&&(l=flatten$1(l),c=flatten$1(c));var v=0;if(typeof c<"u"){if(c.length!==l.length)throw new Error("Weights must have the same length as possibles");for(var y=0,b=c.length;y<b;y++){if(!isNumber(c[y])||c[y]<0)throw new Error("Weights must be an array of positive numbers");v+=c[y]}}for(var _=l.length,N=[],M;N.length<h;){if(typeof c>"u")M=l[Math.floor(s()*_)];else for(var C=s()*v,$=0,w=l.length;$<w;$++)if(C-=c[$],C<0){M=l[$];break}N.push(M)}return d?N[0]:p?p(N):N}});function randomMatrix(t,r){var a=[];if(t=t.slice(0),t.length>1)for(var n=0,s=t.shift();n<s;n++)a.push(randomMatrix(t,r));else for(var o=0,l=t.shift();o<l;o++)a.push(r());return a}var name$I="random",dependencies$I=["typed","config","?on"],createRandom=factory(name$I,dependencies$I,t=>{var{typed:r,config:a,on:n}=t,s=createRng(a.randomSeed);return n&&n("config",function(u,h){u.randomSeed!==h.randomSeed&&(s=createRng(u.randomSeed))}),r(name$I,{"":()=>l(0,1),number:u=>l(0,u),"number, number":(u,h)=>l(u,h),"Array | Matrix":u=>o(u,0,1),"Array | Matrix, number":(u,h)=>o(u,0,h),"Array | Matrix, number, number":(u,h,c)=>o(u,h,c)});function o(u,h,c){var f=randomMatrix(u.valueOf(),()=>l(h,c));return isMatrix(u)?u.create(f,"number"):f}function l(u,h){return u+s()*(h-u)}}),name$H="randomInt",dependencies$H=["typed","config","log2","?on"],createRandomInt=factory(name$H,dependencies$H,t=>{var{typed:r,config:a,log2:n,on:s}=t,o=createRng(a.randomSeed);return s&&s("config",function(c,f){c.randomSeed!==f.randomSeed&&(o=createRng(c.randomSeed))}),r(name$H,{"":()=>u(0,2),number:c=>u(0,c),"number, number":(c,f)=>u(c,f),bigint:c=>h(0n,c),"bigint, bigint":h,"Array | Matrix":c=>l(c,0,1),"Array | Matrix, number":(c,f)=>l(c,0,f),"Array | Matrix, number, number":(c,f,d)=>l(c,f,d)});function l(c,f,d){var p=randomMatrix(c.valueOf(),()=>u(f,d));return isMatrix(c)?c.create(p,"number"):p}function u(c,f){return Math.floor(c+o()*(f-c))}function h(c,f){var d=2n**30n,p=f-c;if(p<=d)return c+BigInt(u(0,Number(p)));for(var v=n(p),y=p;y>=p;){y=0n;for(var b=0;b<v;++b)y=2n*y+(o()<.5?0n:1n)}return c+y}}),name$G="stirlingS2",dependencies$G=["typed","addScalar","subtractScalar","multiplyScalar","divideScalar","pow","factorial","combinations","isNegative","isInteger","number","?bignumber","larger"],createStirlingS2=factory(name$G,dependencies$G,t=>{var{typed:r,addScalar:a,subtractScalar:n,multiplyScalar:s,divideScalar:o,pow:l,factorial:u,combinations:h,isNegative:c,isInteger:f,number:d,bignumber:p,larger:v}=t,y=[],b=[];return r(name$G,{"number | BigNumber, number | BigNumber":function(N,M){if(!f(N)||c(N)||!f(M)||c(M))throw new TypeError("Non-negative integer value expected in function stirlingS2");if(v(M,N))throw new TypeError("k must be less than or equal to n in function stirlingS2");var C=!(isNumber(N)&&isNumber(M)),$=C?b:y,w=C?p:d,A=d(N),X=d(M);if($[A]&&$[A].length>X)return $[A][X];for(var O=0;O<=A;++O)if($[O]||($[O]=[w(O===0?1:0)]),O!==0)for(var G=$[O],R=$[O-1],B=G.length;B<=O&&B<=X;++B)B===O?G[B]=1:G[B]=a(s(w(B),R[B]),R[B-1]);return $[A][X]}})}),name$F="bellNumbers",dependencies$F=["typed","addScalar","isNegative","isInteger","stirlingS2"],createBellNumbers=factory(name$F,dependencies$F,t=>{var{typed:r,addScalar:a,isNegative:n,isInteger:s,stirlingS2:o}=t;return r(name$F,{"number | BigNumber":function(u){if(!s(u)||n(u))throw new TypeError("Non-negative integer value expected in function bellNumbers");for(var h=0,c=0;c<=u;c++)h=a(h,o(u,c));return h}})}),name$E="catalan",dependencies$E=["typed","addScalar","divideScalar","multiplyScalar","combinations","isNegative","isInteger"],createCatalan=factory(name$E,dependencies$E,t=>{var{typed:r,addScalar:a,divideScalar:n,multiplyScalar:s,combinations:o,isNegative:l,isInteger:u}=t;return r(name$E,{"number | BigNumber":function(c){if(!u(c)||l(c))throw new TypeError("Non-negative integer value expected in function catalan");return n(o(s(c,2),c),a(c,1))}})}),name$D="composition",dependencies$D=["typed","addScalar","combinations","isNegative","isPositive","isInteger","larger"],createComposition=factory(name$D,dependencies$D,t=>{var{typed:r,addScalar:a,combinations:n,isPositive:s,isNegative:o,isInteger:l,larger:u}=t;return r(name$D,{"number | BigNumber, number | BigNumber":function(c,f){if(!l(c)||!s(c)||!l(f)||!s(f))throw new TypeError("Positive integer value expected in function composition");if(u(f,c))throw new TypeError("k must be less than or equal to n in function composition");return n(a(c,-1),a(f,-1))}})}),name$C="leafCount",dependencies$C=["parse","typed"],createLeafCount=factory(name$C,dependencies$C,t=>{var{parse:r,typed:a}=t;function n(s){var o=0;return s.forEach(l=>{o+=n(l)}),o||1}return a(name$C,{Node:function(o){return n(o)}})});function isNumericNode(t){return isConstantNode(t)||isOperatorNode(t)&&t.isUnary()&&isConstantNode(t.args[0])}function isConstantExpression(t){return!!(isConstantNode(t)||(isFunctionNode(t)||isOperatorNode(t))&&t.args.every(isConstantExpression)||isParenthesisNode(t)&&isConstantExpression(t.content))}function ownKeys$1(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,n)}return a}function _objectSpread$1(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?ownKeys$1(Object(a),!0).forEach(function(n){_defineProperty(t,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):ownKeys$1(Object(a)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(a,n))})}return t}var name$B="simplifyUtil",dependencies$B=["FunctionNode","OperatorNode","SymbolNode"],createUtil=factory(name$B,dependencies$B,t=>{var{FunctionNode:r,OperatorNode:a,SymbolNode:n}=t,s=!0,o=!1,l="defaultF",u={add:{trivial:s,total:s,commutative:s,associative:s},unaryPlus:{trivial:s,total:s,commutative:s,associative:s},subtract:{trivial:o,total:s,commutative:o,associative:o},multiply:{trivial:s,total:s,commutative:s,associative:s},divide:{trivial:o,total:s,commutative:o,associative:o},paren:{trivial:s,total:s,commutative:s,associative:o},defaultF:{trivial:o,total:s,commutative:o,associative:o}},h={divide:{total:o},log:{total:o}},c={subtract:{total:o},abs:{trivial:s},log:{total:s}};function f(C,$){var w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:u,A=l;if(typeof C=="string"?A=C:isOperatorNode(C)?A=C.fn.toString():isFunctionNode(C)?A=C.name:isParenthesisNode(C)&&(A="paren"),hasOwnProperty(w,A)){var X=w[A];if(hasOwnProperty(X,$))return X[$];if(hasOwnProperty(u,A))return u[A][$]}if(hasOwnProperty(w,l)){var O=w[l];return hasOwnProperty(O,$)?O[$]:u[l][$]}if(hasOwnProperty(u,A)){var G=u[A];if(hasOwnProperty(G,$))return G[$]}return u[l][$]}function d(C){var $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:u;return f(C,"commutative",$)}function p(C){var $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:u;return f(C,"associative",$)}function v(C,$){var w=_objectSpread$1({},C);for(var A in $)hasOwnProperty(C,A)?w[A]=_objectSpread$1(_objectSpread$1({},$[A]),C[A]):w[A]=$[A];return w}function y(C,$){if(!C.args||C.args.length===0)return C;C.args=b(C,$);for(var w=0;w<C.args.length;w++)y(C.args[w],$)}function b(C,$){var w,A=[],X=function(G){for(var R=0;R<G.args.length;R++){var B=G.args[R];isOperatorNode(B)&&w===B.op?X(B):A.push(B)}};return p(C,$)?(w=C.op,X(C),A):C.args}function _(C,$){if(!(!C.args||C.args.length===0)){for(var w=M(C),A=C.args.length,X=0;X<A;X++)_(C.args[X],$);if(A>2&&p(C,$)){for(var O=C.args.pop();C.args.length>0;)O=w([C.args.pop(),O]);C.args=O.args}}}function N(C,$){if(!(!C.args||C.args.length===0)){for(var w=M(C),A=C.args.length,X=0;X<A;X++)N(C.args[X],$);if(A>2&&p(C,$)){for(var O=C.args.shift();C.args.length>0;)O=w([O,C.args.shift()]);C.args=O.args}}}function M(C){return isOperatorNode(C)?function($){try{return new a(C.op,C.fn,$,C.implicit)}catch(w){return console.error(w),[]}}:function($){return new r(new n(C.name),$)}}return{createMakeNodeFunction:M,hasProperty:f,isCommutative:d,isAssociative:p,mergeContext:v,flatten:y,allChildren:b,unflattenr:_,unflattenl:N,defaultContext:u,realContext:h,positiveContext:c}}),name$A="simplify",dependencies$A=["typed","parse","equal","resolve","simplifyConstant","simplifyCore","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","ParenthesisNode","SymbolNode","replacer"],createSimplify=factory(name$A,dependencies$A,t=>{var{typed:r,parse:a,equal:n,resolve:s,simplifyConstant:o,simplifyCore:l,AccessorNode:u,ArrayNode:h,ConstantNode:c,FunctionNode:f,IndexNode:d,ObjectNode:p,OperatorNode:v,ParenthesisNode:y,SymbolNode:b,replacer:_}=t,{hasProperty:N,isCommutative:M,isAssociative:C,mergeContext:$,flatten:w,unflattenr:A,unflattenl:X,createMakeNodeFunction:O,defaultContext:G,realContext:R,positiveContext:B}=createUtil({FunctionNode:f,OperatorNode:v,SymbolNode:b});r.addConversion({from:"Object",to:"Map",convert:createMap$1});var F=r("simplify",{Node:Z,"Node, Map":(se,ie)=>Z(se,!1,ie),"Node, Map, Object":(se,ie,ce)=>Z(se,!1,ie,ce),"Node, Array":Z,"Node, Array, Map":Z,"Node, Array, Map, Object":Z});r.removeConversion({from:"Object",to:"Map",convert:createMap$1}),F.defaultContext=G,F.realContext=R,F.positiveContext=B;function U(se){return se.transform(function(ie){return isParenthesisNode(ie)?U(ie.content):ie})}var q={true:!0,false:!0,e:!0,i:!0,Infinity:!0,LN2:!0,LN10:!0,LOG2E:!0,LOG10E:!0,NaN:!0,phi:!0,pi:!0,SQRT1_2:!0,SQRT2:!0,tau:!0};F.rules=[l,{l:"log(e)",r:"1"},{s:"n-n1 -> n+-n1",assuming:{subtract:{total:!0}}},{s:"n-n -> 0",assuming:{subtract:{total:!1}}},{s:"-(cl*v) -> v * (-cl)",assuming:{multiply:{commutative:!0},subtract:{total:!0}}},{s:"-(cl*v) -> (-cl) * v",assuming:{multiply:{commutative:!1},subtract:{total:!0}}},{s:"-(v*cl) -> v * (-cl)",assuming:{multiply:{commutative:!1},subtract:{total:!0}}},{l:"-(n1/n2)",r:"-n1/n2"},{l:"-v",r:"v * (-1)"},{l:"(n1 + n2)*(-1)",r:"n1*(-1) + n2*(-1)",repeat:!0},{l:"n/n1^n2",r:"n*n1^-n2"},{l:"n/n1",r:"n*n1^-1"},{s:"(n1*n2)^n3 -> n1^n3 * n2^n3",assuming:{multiply:{commutative:!0}}},{s:"(n1*n2)^(-1) -> n2^(-1) * n1^(-1)",assuming:{multiply:{commutative:!1}}},{s:"(n ^ n1) ^ n2 -> n ^ (n1 * n2)",assuming:{divide:{total:!0}}},{l:" vd   * ( vd   * n1 + n2)",r:"vd^2       * n1 +  vd   * n2"},{s:" vd   * (vd^n4 * n1 + n2)   ->  vd^(1+n4)  * n1 +  vd   * n2",assuming:{divide:{total:!0}}},{s:"vd^n3 * ( vd   * n1 + n2)   ->  vd^(n3+1)  * n1 + vd^n3 * n2",assuming:{divide:{total:!0}}},{s:"vd^n3 * (vd^n4 * n1 + n2)   ->  vd^(n3+n4) * n1 + vd^n3 * n2",assuming:{divide:{total:!0}}},{l:"n*n",r:"n^2"},{s:"n * n^n1 -> n^(n1+1)",assuming:{divide:{total:!0}}},{s:"n^n1 * n^n2 -> n^(n1+n2)",assuming:{divide:{total:!0}}},o,{s:"n+n -> 2*n",assuming:{add:{total:!0}}},{l:"n+-n",r:"0"},{l:"vd*n + vd",r:"vd*(n+1)"},{l:"n3*n1 + n3*n2",r:"n3*(n1+n2)"},{l:"n3^(-n4)*n1 +   n3  * n2",r:"n3^(-n4)*(n1 + n3^(n4+1) *n2)"},{l:"n3^(-n4)*n1 + n3^n5 * n2",r:"n3^(-n4)*(n1 + n3^(n4+n5)*n2)"},{s:"n*vd + vd -> (n+1)*vd",assuming:{multiply:{commutative:!1}}},{s:"vd + n*vd -> (1+n)*vd",assuming:{multiply:{commutative:!1}}},{s:"n1*n3 + n2*n3 -> (n1+n2)*n3",assuming:{multiply:{commutative:!1}}},{s:"n^n1 * n -> n^(n1+1)",assuming:{divide:{total:!0},multiply:{commutative:!1}}},{s:"n1*n3^(-n4) + n2 * n3    -> (n1 + n2*n3^(n4 +  1))*n3^(-n4)",assuming:{multiply:{commutative:!1}}},{s:"n1*n3^(-n4) + n2 * n3^n5 -> (n1 + n2*n3^(n4 + n5))*n3^(-n4)",assuming:{multiply:{commutative:!1}}},{l:"n*cd + cd",r:"(n+1)*cd"},{s:"cd*n + cd -> cd*(n+1)",assuming:{multiply:{commutative:!1}}},{s:"cd + cd*n -> cd*(1+n)",assuming:{multiply:{commutative:!1}}},o,{s:"(-n)*n1 -> -(n*n1)",assuming:{subtract:{total:!0}}},{s:"n1*(-n) -> -(n1*n)",assuming:{subtract:{total:!0},multiply:{commutative:!1}}},{s:"ce+ve -> ve+ce",assuming:{add:{commutative:!0}},imposeContext:{add:{commutative:!1}}},{s:"vd*cd -> cd*vd",assuming:{multiply:{commutative:!0}},imposeContext:{multiply:{commutative:!1}}},{l:"n+-n1",r:"n-n1"},{l:"n+-(n1)",r:"n-(n1)"},{s:"n*(n1^-1) -> n/n1",assuming:{multiply:{commutative:!0}}},{s:"n*n1^-n2 -> n/n1^n2",assuming:{multiply:{commutative:!0}}},{s:"n^-1 -> 1/n",assuming:{multiply:{commutative:!0}}},{l:"n^1",r:"n"},{s:"n*(n1/n2) -> (n*n1)/n2",assuming:{multiply:{associative:!0}}},{s:"n-(n1+n2) -> n-n1-n2",assuming:{addition:{associative:!0,commutative:!0}}},{l:"1*n",r:"n",imposeContext:{multiply:{commutative:!0}}},{s:"n1/(n2/n3) -> (n1*n3)/n2",assuming:{multiply:{associative:!0}}},{l:"n1/(-n2)",r:"-n1/n2"}];function ee(se,ie){var ce={};if(se.s){var xe=se.s.split("->");if(xe.length===2)ce.l=xe[0],ce.r=xe[1];else throw SyntaxError("Could not parse rule: "+se.s)}else ce.l=se.l,ce.r=se.r;ce.l=U(a(ce.l)),ce.r=U(a(ce.r));for(var fe of["imposeContext","repeat","assuming"])fe in se&&(ce[fe]=se[fe]);if(se.evaluate&&(ce.evaluate=a(se.evaluate)),C(ce.l,ie)){var Ne=!M(ce.l,ie),we;Ne&&(we=K());var Pe=O(ce.l),Ie=K();ce.expanded={},ce.expanded.l=Pe([ce.l,Ie]),w(ce.expanded.l,ie),A(ce.expanded.l,ie),ce.expanded.r=Pe([ce.r,Ie]),Ne&&(ce.expandedNC1={},ce.expandedNC1.l=Pe([we,ce.l]),ce.expandedNC1.r=Pe([we,ce.r]),ce.expandedNC2={},ce.expandedNC2.l=Pe([we,ce.expanded.l]),ce.expandedNC2.r=Pe([we,ce.expanded.r]))}return ce}function z(se,ie){for(var ce=[],xe=0;xe<se.length;xe++){var fe=se[xe],Ne=void 0,we=typeof fe;switch(we){case"string":fe={s:fe};case"object":Ne=ee(fe,ie);break;case"function":Ne=fe;break;default:throw TypeError("Unsupported type of rule: "+we)}ce.push(Ne)}return ce}var Y=0;function K(){return new b("_p"+Y++)}function Z(se,ie){var ce=arguments.length>2&&arguments[2]!==void 0?arguments[2]:createEmptyMap(),xe=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},fe=xe.consoleDebug;ie=z(ie||F.rules,xe.context);var Ne=s(se,ce);Ne=U(Ne);for(var we={},Pe=Ne.toString({parenthesis:"all"});!we[Pe];){we[Pe]=!0,Y=0;var Ie=Pe;fe&&console.log("Working on: ",Pe);for(var Ye=0;Ye<ie.length;Ye++){var Le="";if(typeof ie[Ye]=="function"?(Ne=ie[Ye](Ne,xe),fe&&(Le=ie[Ye].name)):(w(Ne,xe.context),Ne=j(Ne,ie[Ye],xe.context),fe&&(Le="".concat(ie[Ye].l.toString()," -> ").concat(ie[Ye].r.toString()))),fe){var Ve=Ne.toString({parenthesis:"all"});Ve!==Ie&&(console.log("Applying",Le,"produced",Ve),Ie=Ve)}X(Ne,xe.context)}Pe=Ne.toString({parenthesis:"all"})}return Ne}function ne(se,ie,ce){var xe=se;if(se)for(var fe=0;fe<se.length;++fe){var Ne=j(se[fe],ie,ce);Ne!==se[fe]&&(xe===se&&(xe=se.slice()),xe[fe]=Ne)}return xe}function j(se,ie,ce){if(ie.assuming){for(var xe in ie.assuming)for(var fe in ie.assuming[xe])if(N(xe,fe,ce)!==ie.assuming[xe][fe])return se}var Ne=$(ie.imposeContext,ce),we=se;if(we instanceof v||we instanceof f){var Pe=ne(we.args,ie,ce);Pe!==we.args&&(we=we.clone(),we.args=Pe)}else if(we instanceof y){if(we.content){var Ie=j(we.content,ie,ce);Ie!==we.content&&(we=new y(Ie))}}else if(we instanceof h){var Ye=ne(we.items,ie,ce);Ye!==we.items&&(we=new h(Ye))}else if(we instanceof u){var Le=we.object;we.object&&(Le=j(we.object,ie,ce));var Ve=we.index;we.index&&(Ve=j(we.index,ie,ce)),(Le!==we.object||Ve!==we.index)&&(we=new u(Le,Ve))}else if(we instanceof d){var Ze=ne(we.dimensions,ie,ce);Ze!==we.dimensions&&(we=new d(Ze))}else if(we instanceof p){var ue=!1,ge={};for(var te in we.properties)ge[te]=j(we.properties[te],ie,ce),ge[te]!==we.properties[te]&&(ue=!0);ue&&(we=new p(ge))}var le=ie.r,me=ve(ie.l,we,Ne)[0];if(!me&&ie.expanded&&(le=ie.expanded.r,me=ve(ie.expanded.l,we,Ne)[0]),!me&&ie.expandedNC1&&(le=ie.expandedNC1.r,me=ve(ie.expandedNC1.l,we,Ne)[0],me||(le=ie.expandedNC2.r,me=ve(ie.expandedNC2.l,we,Ne)[0])),me){var he=we.implicit;we=le.clone(),he&&"implicit"in le&&(we.implicit=!0),we=we.transform(function(ye){return ye.isSymbolNode&&hasOwnProperty(me.placeholders,ye.name)?me.placeholders[ye.name].clone():ye})}return ie.repeat&&we!==se&&(we=j(we,ie,ce)),we}function V(se,ie){var ce=[],xe,fe,Ne=O(se);if(M(se,ie))for(var we=0;we<se.args.length;we++)fe=se.args.slice(0),fe.splice(we,1),xe=fe.length===1?fe[0]:Ne(fe),ce.push(Ne([se.args[we],xe]));else for(var Pe=1;Pe<se.args.length;Pe++){var Ie=se.args[0];Pe>1&&(Ie=Ne(se.args.slice(0,Pe))),fe=se.args.slice(Pe),xe=fe.length===1?fe[0]:Ne(fe),ce.push(Ne([Ie,xe]))}return ce}function L(se,ie){var ce={placeholders:{}};if(!se.placeholders&&!ie.placeholders)return ce;if(se.placeholders){if(!ie.placeholders)return se}else return ie;for(var xe in se.placeholders)if(hasOwnProperty(se.placeholders,xe)&&(ce.placeholders[xe]=se.placeholders[xe],hasOwnProperty(ie.placeholders,xe)&&!de(se.placeholders[xe],ie.placeholders[xe])))return null;for(var fe in ie.placeholders)hasOwnProperty(ie.placeholders,fe)&&(ce.placeholders[fe]=ie.placeholders[fe]);return ce}function ae(se,ie){var ce=[];if(se.length===0||ie.length===0)return ce;for(var xe,fe=0;fe<se.length;fe++)for(var Ne=0;Ne<ie.length;Ne++)xe=L(se[fe],ie[Ne]),xe&&ce.push(xe);return ce}function W(se){if(se.length===0)return se;for(var ie=se.reduce(ae),ce=[],xe={},fe=0;fe<ie.length;fe++){var Ne=JSON.stringify(ie[fe],_);xe[Ne]||(xe[Ne]=!0,ce.push(ie[fe]))}return ce}function ve(se,ie,ce,xe){var fe=[{placeholders:{}}];if(se instanceof v&&ie instanceof v||se instanceof f&&ie instanceof f){if(se instanceof v){if(se.op!==ie.op||se.fn!==ie.fn)return[]}else if(se instanceof f&&se.name!==ie.name)return[];if(ie.args.length===1&&se.args.length===1||!C(ie,ce)&&ie.args.length===se.args.length||xe){for(var Ne=[],we=0;we<se.args.length;we++){var Pe=ve(se.args[we],ie.args[we],ce);if(Pe.length===0)break;Ne.push(Pe)}if(Ne.length!==se.args.length){if(!M(ie,ce)||se.args.length===1)return[];if(se.args.length>2)throw new Error("permuting >2 commutative non-associative rule arguments not yet implemented");var Ie=ve(se.args[0],ie.args[1],ce);if(Ie.length===0)return[];var Ye=ve(se.args[1],ie.args[0],ce);if(Ye.length===0)return[];Ne=[Ie,Ye]}fe=W(Ne)}else if(ie.args.length>=2&&se.args.length===2){for(var Le=V(ie,ce),Ve=[],Ze=0;Ze<Le.length;Ze++){var ue=ve(se,Le[Ze],ce,!0);Ve=Ve.concat(ue)}return Ve}else{if(se.args.length>2)throw Error("Unexpected non-binary associative function: "+se.toString());return[]}}else if(se instanceof b){if(se.name.length===0)throw new Error("Symbol in rule has 0 length...!?");if(q[se.name]){if(se.name!==ie.name)return[]}else switch(se.name[1]>="a"&&se.name[1]<="z"?se.name.substring(0,2):se.name[0]){case"n":case"_p":fe[0].placeholders[se.name]=ie;break;case"c":case"cl":if(isConstantNode(ie))fe[0].placeholders[se.name]=ie;else return[];break;case"v":if(!isConstantNode(ie))fe[0].placeholders[se.name]=ie;else return[];break;case"vl":if(isSymbolNode(ie))fe[0].placeholders[se.name]=ie;else return[];break;case"cd":if(isNumericNode(ie))fe[0].placeholders[se.name]=ie;else return[];break;case"vd":if(!isNumericNode(ie))fe[0].placeholders[se.name]=ie;else return[];break;case"ce":if(isConstantExpression(ie))fe[0].placeholders[se.name]=ie;else return[];break;case"ve":if(!isConstantExpression(ie))fe[0].placeholders[se.name]=ie;else return[];break;default:throw new Error("Invalid symbol in rule: "+se.name)}}else if(se instanceof c){if(!n(se.value,ie.value))return[]}else return[];return fe}function de(se,ie){if(se instanceof c&&ie instanceof c){if(!n(se.value,ie.value))return!1}else if(se instanceof b&&ie instanceof b){if(se.name!==ie.name)return!1}else if(se instanceof v&&ie instanceof v||se instanceof f&&ie instanceof f){if(se instanceof v){if(se.op!==ie.op||se.fn!==ie.fn)return!1}else if(se instanceof f&&se.name!==ie.name)return!1;if(se.args.length!==ie.args.length)return!1;for(var ce=0;ce<se.args.length;ce++)if(!de(se.args[ce],ie.args[ce]))return!1}else return!1;return!0}return F}),name$z="simplifyConstant",dependencies$z=["typed","config","mathWithTransform","matrix","isBounded","?fraction","?bignumber","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","SymbolNode"],createSimplifyConstant=factory(name$z,dependencies$z,t=>{var{typed:r,config:a,mathWithTransform:n,matrix:s,isBounded:o,fraction:l,bignumber:u,AccessorNode:h,ArrayNode:c,ConstantNode:f,FunctionNode:d,IndexNode:p,ObjectNode:v,OperatorNode:y,SymbolNode:b}=t,{isCommutative:_,isAssociative:N,allChildren:M,createMakeNodeFunction:C}=createUtil({FunctionNode:d,OperatorNode:y,SymbolNode:b}),$=r("simplifyConstant",{Node:z=>O(ee(z,{})),"Node, Object":function(Y,K){return O(ee(Y,K))}});function w(z){return isFraction(z)?z.valueOf():z instanceof Array?z.map(w):isMatrix(z)?s(w(z.valueOf())):z}function A(z,Y,K){try{return n[z].apply(null,Y)}catch{return Y=Y.map(w),R(n[z].apply(null,Y),K)}}var X=r({Fraction:F,number:function(Y){return Y<0?B(new f(-Y)):new f(Y)},BigNumber:function(Y){return Y<0?B(new f(-Y)):new f(Y)},bigint:function(Y){return Y<0n?B(new f(-Y)):new f(Y)},Complex:function(Y){throw new Error("Cannot convert Complex number to Node")},string:function(Y){return new f(Y)},Matrix:function(Y){return new c(Y.valueOf().map(K=>X(K)))}});function O(z){return isNode(z)?z:X(z)}function G(z,Y){var K=Y&&Y.exactFractions!==!1;if(K&&o(z)&&l){var Z=l(z),ne=Y&&typeof Y.fractionsLimit=="number"?Y.fractionsLimit:1/0;if(Z.valueOf()===z&&Z.n<ne&&Z.d<ne)return Z}return z}var R=r({"string, Object":function(Y,K){var Z=safeNumberType(Y,a);if(Z==="BigNumber")return u===void 0&&noBignumber(),u(Y);if(Z==="bigint")return BigInt(Y);if(Z==="Fraction")return l===void 0&&noFraction(),l(Y);var ne=parseFloat(Y);return G(ne,K)},"Fraction, Object":function(Y,K){return Y},"BigNumber, Object":function(Y,K){return Y},"number, Object":function(Y,K){return G(Y,K)},"bigint, Object":function(Y,K){return Y},"Complex, Object":function(Y,K){return Y.im!==0?Y:G(Y.re,K)},"Matrix, Object":function(Y,K){return s(G(Y.valueOf()))},"Array, Object":function(Y,K){return Y.map(G)}});function B(z){return new y("-","unaryMinus",[z])}function F(z){var Y=ne=>a.number==="BigNumber"&&u?u(ne):Number(ne),K=z.s*z.n,Z=K<0n?new y("-","unaryMinus",[new f(-Y(K))]):new f(Y(K));return z.d===1n?Z:new y("/","divide",[Z,new f(Y(z.d))])}function U(z,Y,K){if(!isIndexNode(Y))return new h(O(z),O(Y));if(isArrayNode(z)||isMatrix(z)){for(var Z=Array.from(Y.dimensions);Z.length>0;)if(isConstantNode(Z[0])&&typeof Z[0].value!="string"){var ne=R(Z.shift().value,K);isArrayNode(z)?z=z.items[ne-1]:(z=z.valueOf()[ne-1],z instanceof Array&&(z=s(z)))}else if(Z.length>1&&isConstantNode(Z[1])&&typeof Z[1].value!="string"){var j=R(Z[1].value,K),V=[],L=isArrayNode(z)?z.items:z.valueOf();for(var ae of L)if(isArrayNode(ae))V.push(ae.items[j-1]);else if(isMatrix(z))V.push(ae[j-1]);else break;if(V.length===L.length)isArrayNode(z)?z=new c(V):z=s(V),Z.splice(1,1);else break}else break;return Z.length===Y.dimensions.length?new h(O(z),Y):Z.length>0?(Y=new p(Z),new h(O(z),Y)):z}if(isObjectNode(z)&&Y.dimensions.length===1&&isConstantNode(Y.dimensions[0])){var W=Y.dimensions[0].value;return W in z.properties?z.properties[W]:new f}return new h(O(z),Y)}function q(z,Y,K,Z){var ne=Y.shift(),j=Y.reduce((V,L)=>{if(!isNode(L)){var ae=V.pop();if(isNode(ae))return[ae,L];try{return V.push(A(z,[ae,L],Z)),V}catch{V.push(ae)}}V.push(O(V.pop()));var W=V.length===1?V[0]:K(V);return[K([W,O(L)])]},[ne]);return j.length===1?j[0]:K([j[0],X(j[1])])}function ee(z,Y){switch(z.type){case"SymbolNode":return z;case"ConstantNode":switch(typeof z.value){case"number":return R(z.value,Y);case"bigint":return R(z.value,Y);case"string":return z.value;default:if(!isNaN(z.value))return R(z.value,Y)}return z;case"FunctionNode":if(n[z.name]&&n[z.name].rawArgs)return z;{var K=["add","multiply"];if(!K.includes(z.name)){var Z=z.args.map(fe=>ee(fe,Y));if(!Z.some(isNode))try{return A(z.name,Z,Y)}catch{}if(z.name==="size"&&Z.length===1&&isArrayNode(Z[0])){for(var ne=[],j=Z[0];isArrayNode(j);)ne.push(j.items.length),j=j.items[0];return s(ne)}return new d(z.name,Z.map(O))}}case"OperatorNode":{var V=z.fn.toString(),L,ae,W=C(z);if(isOperatorNode(z)&&z.isUnary())L=[ee(z.args[0],Y)],isNode(L[0])?ae=W(L):ae=A(V,L,Y);else if(N(z,Y.context))if(L=M(z,Y.context),L=L.map(fe=>ee(fe,Y)),_(V,Y.context)){for(var ve=[],de=[],se=0;se<L.length;se++)isNode(L[se])?de.push(L[se]):ve.push(L[se]);ve.length>1?(ae=q(V,ve,W,Y),de.unshift(ae),ae=q(V,de,W,Y)):ae=q(V,L,W,Y)}else ae=q(V,L,W,Y);else L=z.args.map(fe=>ee(fe,Y)),ae=q(V,L,W,Y);return ae}case"ParenthesisNode":return ee(z.content,Y);case"AccessorNode":return U(ee(z.object,Y),ee(z.index,Y),Y);case"ArrayNode":{var ie=z.items.map(fe=>ee(fe,Y));return ie.some(isNode)?new c(ie.map(O)):s(ie)}case"IndexNode":return new p(z.dimensions.map(fe=>$(fe,Y)));case"ObjectNode":{var ce={};for(var xe in z.properties)ce[xe]=$(z.properties[xe],Y);return new v(ce)}default:throw new Error("Unimplemented node type in simplifyConstant: ".concat(z.type))}}return $}),name$y="simplifyCore",dependencies$y=["typed","parse","equal","isZero","add","subtract","multiply","divide","pow","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","ParenthesisNode","SymbolNode"],createSimplifyCore=factory(name$y,dependencies$y,t=>{var{typed:r,parse:a,equal:n,isZero:s,add:o,subtract:l,multiply:u,divide:h,pow:c,AccessorNode:f,ArrayNode:d,ConstantNode:p,FunctionNode:v,IndexNode:y,ObjectNode:b,OperatorNode:_,ParenthesisNode:N,SymbolNode:M}=t,C=new p(0),$=new p(1),w=new p(!0),A=new p(!1);function X(B){return isOperatorNode(B)&&["and","not","or"].includes(B.op)}var{hasProperty:O,isCommutative:G}=createUtil({FunctionNode:v,OperatorNode:_,SymbolNode:M});function R(B){var F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},U=F?F.context:void 0;if(O(B,"trivial",U)){if(isFunctionNode(B)&&B.args.length===1)return R(B.args[0],F);var q=!1,ee=0;if(B.forEach(ve=>{++ee,ee===1&&(q=R(ve,F))}),ee===1)return q}var z=B;if(isFunctionNode(z)){var Y=getOperator(z.name);if(Y){if(z.args.length>2&&O(z,"associative",U))for(;z.args.length>2;){var K=z.args.pop(),Z=z.args.pop();z.args.push(new _(Y,z.name,[K,Z]))}z=new _(Y,z.name,z.args)}else return new v(R(z.fn),z.args.map(ve=>R(ve,F)))}if(isOperatorNode(z)&&z.isUnary()){var ne=R(z.args[0],F);if(z.op==="~"&&isOperatorNode(ne)&&ne.isUnary()&&ne.op==="~"||z.op==="not"&&isOperatorNode(ne)&&ne.isUnary()&&ne.op==="not"&&X(ne.args[0]))return ne.args[0];var j=!0;if(z.op==="-"&&isOperatorNode(ne)&&(ne.isBinary()&&ne.fn==="subtract"&&(z=new _("-","subtract",[ne.args[1],ne.args[0]]),j=!1),ne.isUnary()&&ne.op==="-"))return ne.args[0];if(j)return new _(z.op,z.fn,[ne])}if(isOperatorNode(z)&&z.isBinary()){var V=R(z.args[0],F),L=R(z.args[1],F);if(z.op==="+"){if(isConstantNode(V)&&s(V.value))return L;if(isConstantNode(L)&&s(L.value))return V;isOperatorNode(L)&&L.isUnary()&&L.op==="-"&&(L=L.args[0],z=new _("-","subtract",[V,L]))}if(z.op==="-")return isOperatorNode(L)&&L.isUnary()&&L.op==="-"?R(new _("+","add",[V,L.args[0]]),F):isConstantNode(V)&&s(V.value)?R(new _("-","unaryMinus",[L])):isConstantNode(L)&&s(L.value)?V:new _(z.op,z.fn,[V,L]);if(z.op==="*"){if(isConstantNode(V)){if(s(V.value))return C;if(n(V.value,1))return L}if(isConstantNode(L)){if(s(L.value))return C;if(n(L.value,1))return V;if(G(z,U))return new _(z.op,z.fn,[L,V],z.implicit)}return new _(z.op,z.fn,[V,L],z.implicit)}if(z.op==="/")return isConstantNode(V)&&s(V.value)?C:isConstantNode(L)&&n(L.value,1)?V:new _(z.op,z.fn,[V,L]);if(z.op==="^"&&isConstantNode(L)){if(s(L.value))return $;if(n(L.value,1))return V}if(z.op==="and"){if(isConstantNode(V))if(V.value){if(X(L))return L;if(isConstantNode(L))return L.value?w:A}else return A;if(isConstantNode(L))if(L.value){if(X(V))return V}else return A}if(z.op==="or"){if(isConstantNode(V)){if(V.value)return w;if(X(L))return L}if(isConstantNode(L)){if(L.value)return w;if(X(V))return V}}return new _(z.op,z.fn,[V,L])}if(isOperatorNode(z))return new _(z.op,z.fn,z.args.map(ve=>R(ve,F)));if(isArrayNode(z))return new d(z.items.map(ve=>R(ve,F)));if(isAccessorNode(z))return new f(R(z.object,F),R(z.index,F));if(isIndexNode(z))return new y(z.dimensions.map(ve=>R(ve,F)));if(isObjectNode(z)){var ae={};for(var W in z.properties)ae[W]=R(z.properties[W],F);return new b(ae)}return z}return r(name$y,{Node:R,"Node,Object":R})}),name$x="resolve",dependencies$x=["typed","parse","ConstantNode","FunctionNode","OperatorNode","ParenthesisNode"],createResolve=factory(name$x,dependencies$x,t=>{var{typed:r,parse:a,ConstantNode:n,FunctionNode:s,OperatorNode:o,ParenthesisNode:l}=t;function u(h,c){var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:new Set;if(!c)return h;if(isSymbolNode(h)){if(f.has(h.name)){var d=Array.from(f).join(", ");throw new ReferenceError("recursive loop of variable definitions among {".concat(d,"}"))}var p=c.get(h.name);if(isNode(p)){var v=new Set(f);return v.add(h.name),u(p,c,v)}else return typeof p=="number"?a(String(p)):p!==void 0?new n(p):h}else if(isOperatorNode(h)){var y=h.args.map(function(_){return u(_,c,f)});return new o(h.op,h.fn,y,h.implicit)}else{if(isParenthesisNode(h))return new l(u(h.content,c,f));if(isFunctionNode(h)){var b=h.args.map(function(_){return u(_,c,f)});return new s(h.name,b)}}return h.map(_=>u(_,c,f))}return r("resolve",{Node:u,"Node, Map | null | undefined":u,"Node, Object":(h,c)=>u(h,createMap$1(c)),"Array | Matrix":r.referToSelf(h=>c=>c.map(f=>h(f))),"Array | Matrix, null | undefined":r.referToSelf(h=>c=>c.map(f=>h(f))),"Array, Object":r.referTo("Array,Map",h=>(c,f)=>h(c,createMap$1(f))),"Matrix, Object":r.referTo("Matrix,Map",h=>(c,f)=>h(c,createMap$1(f))),"Array | Matrix, Map":r.referToSelf(h=>(c,f)=>c.map(d=>h(d,f)))})}),name$w="symbolicEqual",dependencies$w=["parse","simplify","typed","OperatorNode"],createSymbolicEqual=factory(name$w,dependencies$w,t=>{var{parse:r,simplify:a,typed:n,OperatorNode:s}=t;function o(l,u){var h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},c=new s("-","subtract",[l,u]),f=a(c,{},h);return isConstantNode(f)&&!f.value}return n(name$w,{"Node, Node":o,"Node, Node, Object":o})}),name$v="derivative",dependencies$v=["typed","config","parse","simplify","equal","isZero","numeric","ConstantNode","FunctionNode","OperatorNode","ParenthesisNode","SymbolNode"],createDerivative=factory(name$v,dependencies$v,t=>{var{typed:r,config:a,parse:n,simplify:s,equal:o,isZero:l,numeric:u,ConstantNode:h,FunctionNode:c,OperatorNode:f,ParenthesisNode:d,SymbolNode:p}=t;function v($,w){var A=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{simplify:!0},X=new Map,O=w.name;function G(B){var F=X.get(B);if(F!==void 0)return F;var U=N(G,B,O);return X.set(B,U),U}var R=M($,G);return A.simplify?s(R):R}function y($){var w=n($);if(!w.isSymbolNode)throw new TypeError("Invalid variable. "+"Cannot parse ".concat(JSON.stringify($)," into a variable in function derivative"));return w}var b=r(name$v,{"Node, SymbolNode":v,"Node, SymbolNode, Object":v,"Node, string":($,w)=>v($,y(w)),"Node, string, Object":($,w,A)=>v($,y(w),A)});b._simplify=!0,b.toTex=function($){return _.apply(null,$.args)};var _=r("_derivTex",{"Node, SymbolNode":function(w,A){return isConstantNode(w)&&typeOf$1(w.value)==="string"?_(n(w.value).toString(),A.toString(),1):_(w.toTex(),A.toString(),1)},"Node, ConstantNode":function(w,A){if(typeOf$1(A.value)==="string")return _(w,n(A.value));throw new Error("The second parameter to 'derivative' is a non-string constant")},"Node, SymbolNode, ConstantNode":function(w,A,X){return _(w.toString(),A.name,X.value)},"string, string, number":function(w,A,X){var O;return X===1?O="{d\\over d"+A+"}":O="{d^{"+X+"}\\over d"+A+"^{"+X+"}}",O+"\\left[".concat(w,"\\right]")}}),N=r("_isConst",{"function, ConstantNode, string":function(){return!0},"function, SymbolNode, string":function(w,A,X){return A.name!==X},"function, ParenthesisNode, string":function(w,A,X){return w(A.content,X)},"function, FunctionAssignmentNode, string":function(w,A,X){return A.params.includes(X)?w(A.expr,X):!0},"function, FunctionNode | OperatorNode, string":function(w,A,X){return A.args.every(O=>w(O,X))}}),M=r("_derivative",{"ConstantNode, function":function(){return C(0)},"SymbolNode, function":function(w,A){return A(w)?C(0):C(1)},"ParenthesisNode, function":function(w,A){return new d(M(w.content,A))},"FunctionAssignmentNode, function":function(w,A){return A(w)?C(0):M(w.expr,A)},"FunctionNode, function":function(w,A){if(A(w))return C(0);var X=w.args[0],O,G=!1,R=!1,B;switch(w.name){case"cbrt":G=!0,B=new f("*","multiply",[C(3),new f("^","pow",[X,new f("/","divide",[C(2),C(3)])])]);break;case"sqrt":case"nthRoot":if(w.args.length===1)G=!0,B=new f("*","multiply",[C(2),new c("sqrt",[X])]);else if(w.args.length===2)return O=new f("/","divide",[C(1),w.args[1]]),M(new f("^","pow",[X,O]),A);break;case"log10":O=C(10);case"log":if(!O&&w.args.length===1)B=X.clone(),G=!0;else if(w.args.length===1&&O||w.args.length===2&&A(w.args[1]))B=new f("*","multiply",[X.clone(),new c("log",[O||w.args[1]])]),G=!0;else if(w.args.length===2)return M(new f("/","divide",[new c("log",[X]),new c("log",[w.args[1]])]),A);break;case"pow":if(w.args.length===2)return M(new f("^","pow",[X,w.args[1]]),A);break;case"exp":B=new c("exp",[X.clone()]);break;case"sin":B=new c("cos",[X.clone()]);break;case"cos":B=new f("-","unaryMinus",[new c("sin",[X.clone()])]);break;case"tan":B=new f("^","pow",[new c("sec",[X.clone()]),C(2)]);break;case"sec":B=new f("*","multiply",[w,new c("tan",[X.clone()])]);break;case"csc":R=!0,B=new f("*","multiply",[w,new c("cot",[X.clone()])]);break;case"cot":R=!0,B=new f("^","pow",[new c("csc",[X.clone()]),C(2)]);break;case"asin":G=!0,B=new c("sqrt",[new f("-","subtract",[C(1),new f("^","pow",[X.clone(),C(2)])])]);break;case"acos":G=!0,R=!0,B=new c("sqrt",[new f("-","subtract",[C(1),new f("^","pow",[X.clone(),C(2)])])]);break;case"atan":G=!0,B=new f("+","add",[new f("^","pow",[X.clone(),C(2)]),C(1)]);break;case"asec":G=!0,B=new f("*","multiply",[new c("abs",[X.clone()]),new c("sqrt",[new f("-","subtract",[new f("^","pow",[X.clone(),C(2)]),C(1)])])]);break;case"acsc":G=!0,R=!0,B=new f("*","multiply",[new c("abs",[X.clone()]),new c("sqrt",[new f("-","subtract",[new f("^","pow",[X.clone(),C(2)]),C(1)])])]);break;case"acot":G=!0,R=!0,B=new f("+","add",[new f("^","pow",[X.clone(),C(2)]),C(1)]);break;case"sinh":B=new c("cosh",[X.clone()]);break;case"cosh":B=new c("sinh",[X.clone()]);break;case"tanh":B=new f("^","pow",[new c("sech",[X.clone()]),C(2)]);break;case"sech":R=!0,B=new f("*","multiply",[w,new c("tanh",[X.clone()])]);break;case"csch":R=!0,B=new f("*","multiply",[w,new c("coth",[X.clone()])]);break;case"coth":R=!0,B=new f("^","pow",[new c("csch",[X.clone()]),C(2)]);break;case"asinh":G=!0,B=new c("sqrt",[new f("+","add",[new f("^","pow",[X.clone(),C(2)]),C(1)])]);break;case"acosh":G=!0,B=new c("sqrt",[new f("-","subtract",[new f("^","pow",[X.clone(),C(2)]),C(1)])]);break;case"atanh":G=!0,B=new f("-","subtract",[C(1),new f("^","pow",[X.clone(),C(2)])]);break;case"asech":G=!0,R=!0,B=new f("*","multiply",[X.clone(),new c("sqrt",[new f("-","subtract",[C(1),new f("^","pow",[X.clone(),C(2)])])])]);break;case"acsch":G=!0,R=!0,B=new f("*","multiply",[new c("abs",[X.clone()]),new c("sqrt",[new f("+","add",[new f("^","pow",[X.clone(),C(2)]),C(1)])])]);break;case"acoth":G=!0,R=!0,B=new f("-","subtract",[C(1),new f("^","pow",[X.clone(),C(2)])]);break;case"abs":B=new f("/","divide",[new c(new p("abs"),[X.clone()]),X.clone()]);break;default:throw new Error('Cannot process function "'+w.name+'" in derivative: the function is not supported, undefined, or the number of arguments passed to it are not supported')}var F,U;G?(F="/",U="divide"):(F="*",U="multiply");var q=M(X,A);return R&&(q=new f("-","unaryMinus",[q])),new f(F,U,[q,B])},"OperatorNode, function":function(w,A){if(A(w))return C(0);if(w.op==="+")return new f(w.op,w.fn,w.args.map(function(z){return M(z,A)}));if(w.op==="-"){if(w.isUnary())return new f(w.op,w.fn,[M(w.args[0],A)]);if(w.isBinary())return new f(w.op,w.fn,[M(w.args[0],A),M(w.args[1],A)])}if(w.op==="*"){var X=w.args.filter(function(z){return A(z)});if(X.length>0){var O=w.args.filter(function(z){return!A(z)}),G=O.length===1?O[0]:new f("*","multiply",O),R=X.concat(M(G,A));return new f("*","multiply",R)}return new f("+","add",w.args.map(function(z){return new f("*","multiply",w.args.map(function(Y){return Y===z?M(Y,A):Y.clone()}))}))}if(w.op==="/"&&w.isBinary()){var B=w.args[0],F=w.args[1];return A(F)?new f("/","divide",[M(B,A),F]):A(B)?new f("*","multiply",[new f("-","unaryMinus",[B]),new f("/","divide",[M(F,A),new f("^","pow",[F.clone(),C(2)])])]):new f("/","divide",[new f("-","subtract",[new f("*","multiply",[M(B,A),F.clone()]),new f("*","multiply",[B.clone(),M(F,A)])]),new f("^","pow",[F.clone(),C(2)])])}if(w.op==="^"&&w.isBinary()){var U=w.args[0],q=w.args[1];if(A(U))return isConstantNode(U)&&(l(U.value)||o(U.value,1))?C(0):new f("*","multiply",[w,new f("*","multiply",[new c("log",[U.clone()]),M(q.clone(),A)])]);if(A(q)){if(isConstantNode(q)){if(l(q.value))return C(0);if(o(q.value,1))return M(U,A)}var ee=new f("^","pow",[U.clone(),new f("-","subtract",[q,C(1)])]);return new f("*","multiply",[q.clone(),new f("*","multiply",[M(U,A),ee])])}return new f("*","multiply",[new f("^","pow",[U.clone(),q.clone()]),new f("+","add",[new f("*","multiply",[M(U,A),new f("/","divide",[q.clone(),U.clone()])]),new f("*","multiply",[M(q,A),new c("log",[U.clone()])])])])}throw new Error('Cannot process operator "'+w.op+'" in derivative: the operator is not supported, undefined, or the number of arguments passed to it are not supported')}});function C($,w){return new h(u($,safeNumberType(String($),a)))}return b}),name$u="rationalize",dependencies$u=["config","typed","equal","isZero","add","subtract","multiply","divide","pow","parse","simplifyConstant","simplifyCore","simplify","?bignumber","?fraction","mathWithTransform","matrix","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","SymbolNode","ParenthesisNode"],createRationalize=factory(name$u,dependencies$u,t=>{var{config:r,typed:a,equal:n,isZero:s,add:o,subtract:l,multiply:u,divide:h,pow:c,parse:f,simplifyConstant:d,simplifyCore:p,simplify:v,fraction:y,bignumber:b,mathWithTransform:_,matrix:N,AccessorNode:M,ArrayNode:C,ConstantNode:$,FunctionNode:w,IndexNode:A,ObjectNode:X,OperatorNode:O,SymbolNode:G,ParenthesisNode:R}=t;function B(z){var Y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},K=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,Z=U(),ne=F(z,Y,!0,Z.firstRules),j=ne.variables.length,V={exactFractions:!1},L={exactFractions:!0};if(z=ne.expression,j>=1){z=q(z);var ae,W,ve=!0,de=!1;z=v(z,Z.firstRules,{},V);for(var se;W=ve?Z.distrDivRules:Z.sucDivRules,z=v(z,W,{},L),ve=!ve,se=z.toString(),se!==ae;)de=!0,ae=se;de&&(z=v(z,Z.firstRulesAgain,{},V)),z=v(z,Z.finalRules,{},V)}var ie=[],ce={};return z.type==="OperatorNode"&&z.isBinary()&&z.op==="/"?(j===1&&(z.args[0]=ee(z.args[0],ie),z.args[1]=ee(z.args[1])),K&&(ce.numerator=z.args[0],ce.denominator=z.args[1])):(j===1&&(z=ee(z,ie)),K&&(ce.numerator=z,ce.denominator=null)),K?(ce.coefficients=ie,ce.variables=ne.variables,ce.expression=z,ce):z}return a(name$u,{Node:B,"Node, boolean":(z,Y)=>B(z,{},Y),"Node, Object":B,"Node, Object, boolean":B});function F(z,Y,K,Z){var ne=[],j=v(z,Z,Y,{exactFractions:!1});K=!!K;var V="+-*"+(K?"/":"");ae(j);var L={};return L.expression=j,L.variables=ne,L;function ae(W){var ve=W.type;if(ve==="FunctionNode")throw new Error("There is an unsolved function call");if(ve==="OperatorNode")if(W.op==="^"){if(W.args[1].type!=="ConstantNode"||!isInteger$1(parseFloat(W.args[1].value)))throw new Error("There is a non-integer exponent");ae(W.args[0])}else{if(!V.includes(W.op))throw new Error("Operator "+W.op+" invalid in polynomial expression");for(var de=0;de<W.args.length;de++)ae(W.args[de])}else if(ve==="SymbolNode"){var se=W.name,ie=ne.indexOf(se);ie===-1&&ne.push(se)}else if(ve==="ParenthesisNode")ae(W.content);else if(ve!=="ConstantNode")throw new Error("type "+ve+" is not allowed in polynomial expression")}}function U(){var z=[p,{l:"n+n",r:"2*n"},{l:"n+-n",r:"0"},d,{l:"n*(n1^-1)",r:"n/n1"},{l:"n*n1^-n2",r:"n/n1^n2"},{l:"n1^-1",r:"1/n1"},{l:"n*(n1/n2)",r:"(n*n1)/n2"},{l:"1*n",r:"n"}],Y=[{l:"(-n1)/(-n2)",r:"n1/n2"},{l:"(-n1)*(-n2)",r:"n1*n2"},{l:"n1--n2",r:"n1+n2"},{l:"n1-n2",r:"n1+(-n2)"},{l:"(n1+n2)*n3",r:"(n1*n3 + n2*n3)"},{l:"n1*(n2+n3)",r:"(n1*n2+n1*n3)"},{l:"c1*n + c2*n",r:"(c1+c2)*n"},{l:"c1*n + n",r:"(c1+1)*n"},{l:"c1*n - c2*n",r:"(c1-c2)*n"},{l:"c1*n - n",r:"(c1-1)*n"},{l:"v/c",r:"(1/c)*v"},{l:"v/-c",r:"-(1/c)*v"},{l:"-v*-c",r:"c*v"},{l:"-v*c",r:"-c*v"},{l:"v*-c",r:"-c*v"},{l:"v*c",r:"c*v"},{l:"-(-n1*n2)",r:"(n1*n2)"},{l:"-(n1*n2)",r:"(-n1*n2)"},{l:"-(-n1+n2)",r:"(n1-n2)"},{l:"-(n1+n2)",r:"(-n1-n2)"},{l:"(n1^n2)^n3",r:"(n1^(n2*n3))"},{l:"-(-n1/n2)",r:"(n1/n2)"},{l:"-(n1/n2)",r:"(-n1/n2)"}],K=[{l:"(n1/n2 + n3/n4)",r:"((n1*n4 + n3*n2)/(n2*n4))"},{l:"(n1/n2 + n3)",r:"((n1 + n3*n2)/n2)"},{l:"(n1 + n2/n3)",r:"((n1*n3 + n2)/n3)"}],Z=[{l:"(n1/(n2/n3))",r:"((n1*n3)/n2)"},{l:"(n1/n2/n3)",r:"(n1/(n2*n3))"}],ne={};return ne.firstRules=z.concat(Y,Z),ne.distrDivRules=K,ne.sucDivRules=Z,ne.firstRulesAgain=z.concat(Y),ne.finalRules=[p,{l:"n*-n",r:"-n^2"},{l:"n*n",r:"n^2"},d,{l:"n*-n^n1",r:"-n^(n1+1)"},{l:"n*n^n1",r:"n^(n1+1)"},{l:"n^n1*-n^n2",r:"-n^(n1+n2)"},{l:"n^n1*n^n2",r:"n^(n1+n2)"},{l:"n^n1*-n",r:"-n^(n1+1)"},{l:"n^n1*n",r:"n^(n1+1)"},{l:"n^n1/-n",r:"-n^(n1-1)"},{l:"n^n1/n",r:"n^(n1-1)"},{l:"n/-n^n1",r:"-n^(1-n1)"},{l:"n/n^n1",r:"n^(1-n1)"},{l:"n^n1/-n^n2",r:"n^(n1-n2)"},{l:"n^n1/n^n2",r:"n^(n1-n2)"},{l:"n1+(-n2*n3)",r:"n1-n2*n3"},{l:"v*(-c)",r:"-c*v"},{l:"n1+-n2",r:"n1-n2"},{l:"v*c",r:"c*v"},{l:"(n1^n2)^n3",r:"(n1^(n2*n3))"}],ne}function q(z,Y,K){var Z=z.type,ne=arguments.length>1;if(Z==="OperatorNode"&&z.isBinary()){var j=!1,V;if(z.op==="^"&&(z.args[0].type==="ParenthesisNode"||z.args[0].type==="OperatorNode")&&z.args[1].type==="ConstantNode"&&(V=parseFloat(z.args[1].value),j=V>=2&&isInteger$1(V)),j){if(V>2){var L=z.args[0],ae=new O("^","pow",[z.args[0].cloneDeep(),new $(V-1)]);z=new O("*","multiply",[L,ae])}else z=new O("*","multiply",[z.args[0],z.args[0].cloneDeep()]);ne&&(K==="content"?Y.content=z:Y.args[K]=z)}}if(Z==="ParenthesisNode")q(z.content,z,"content");else if(Z!=="ConstantNode"&&Z!=="SymbolNode")for(var W=0;W<z.args.length;W++)q(z.args[W],z,W);if(!ne)return z}function ee(z,Y){Y===void 0&&(Y=[]),Y[0]=0;var K={};K.cte=1,K.oper="+",K.fire="";var Z=0,ne="";se(z,null,K),Z=Y.length-1;for(var j=!0,V,L=Z;L>=0;L--)if(Y[L]!==0){var ae=new $(j?Y[L]:Math.abs(Y[L])),W=Y[L]<0?"-":"+";if(L>0){var ve=new G(ne);if(L>1){var de=new $(L);ve=new O("^","pow",[ve,de])}Y[L]===-1&&j?ae=new O("-","unaryMinus",[ve]):Math.abs(Y[L])===1?ae=ve:ae=new O("*","multiply",[ae,ve])}j?V=ae:W==="+"?V=new O("+","add",[V,ae]):V=new O("-","subtract",[V,ae]),j=!1}if(j)return new $(0);return V;function se(ie,ce,xe){var fe=ie.type;if(fe==="FunctionNode")throw new Error("There is an unsolved function call");if(fe==="OperatorNode"){if(!"+-*^".includes(ie.op))throw new Error("Operator "+ie.op+" invalid");if(ce!==null){if((ie.fn==="unaryMinus"||ie.fn==="pow")&&ce.fn!=="add"&&ce.fn!=="subtract"&&ce.fn!=="multiply")throw new Error("Invalid "+ie.op+" placing");if((ie.fn==="subtract"||ie.fn==="add"||ie.fn==="multiply")&&ce.fn!=="add"&&ce.fn!=="subtract")throw new Error("Invalid "+ie.op+" placing");if((ie.fn==="subtract"||ie.fn==="add"||ie.fn==="unaryMinus")&&xe.noFil!==0)throw new Error("Invalid "+ie.op+" placing")}(ie.op==="^"||ie.op==="*")&&(xe.fire=ie.op);for(var Ne=0;Ne<ie.args.length;Ne++)ie.fn==="unaryMinus"&&(xe.oper="-"),(ie.op==="+"||ie.fn==="subtract")&&(xe.fire="",xe.cte=1,xe.oper=Ne===0?"+":ie.op),xe.noFil=Ne,se(ie.args[Ne],ie,xe)}else if(fe==="SymbolNode"){if(ie.name!==ne&&ne!=="")throw new Error("There is more than one variable");if(ne=ie.name,ce===null){Y[1]=1;return}if(ce.op==="^"&&xe.noFil!==0)throw new Error("In power the variable should be the first parameter");if(ce.op==="*"&&xe.noFil!==1)throw new Error("In multiply the variable should be the second parameter");(xe.fire===""||xe.fire==="*")&&(Z<1&&(Y[1]=0),Y[1]+=xe.cte*(xe.oper==="+"?1:-1),Z=Math.max(1,Z))}else if(fe==="ConstantNode"){var we=parseFloat(ie.value);if(ce===null){Y[0]=we;return}if(ce.op==="^"){if(xe.noFil!==1)throw new Error("Constant cannot be powered");if(!isInteger$1(we)||we<=0)throw new Error("Non-integer exponent is not allowed");for(var Pe=Z+1;Pe<we;Pe++)Y[Pe]=0;we>Z&&(Y[we]=0),Y[we]+=xe.cte*(xe.oper==="+"?1:-1),Z=Math.max(we,Z);return}xe.cte=we,xe.fire===""&&(Y[0]+=xe.cte*(xe.oper==="+"?1:-1))}else throw new Error("Type "+fe+" is not allowed")}}}),name$t="zpk2tf",dependencies$t=["typed","add","multiply","Complex","number"],createZpk2tf=factory(name$t,dependencies$t,t=>{var{typed:r,add:a,multiply:n,Complex:s,number:o}=t;return r(name$t,{"Array,Array,number":function(c,f,d){return l(c,f,d)},"Array,Array":function(c,f){return l(c,f,1)},"Matrix,Matrix,number":function(c,f,d){return l(c.valueOf(),f.valueOf(),d)},"Matrix,Matrix":function(c,f){return l(c.valueOf(),f.valueOf(),1)}});function l(h,c,f){h.some(M=>M.type==="BigNumber")&&(h=h.map(M=>o(M))),c.some(M=>M.type==="BigNumber")&&(c=c.map(M=>o(M)));for(var d=[s(1,0)],p=[s(1,0)],v=0;v<h.length;v++){var y=h[v];typeof y=="number"&&(y=s(y,0)),d=u(d,[s(1,0),s(-y.re,-y.im)])}for(var b=0;b<c.length;b++){var _=c[b];typeof _=="number"&&(_=s(_,0)),p=u(p,[s(1,0),s(-_.re,-_.im)])}for(var N=0;N<d.length;N++)d[N]=n(d[N],f);return[d,p]}function u(h,c){for(var f=[],d=0;d<h.length+c.length-1;d++){f[d]=s(0,0);for(var p=0;p<h.length;p++)d-p>=0&&d-p<c.length&&(f[d]=a(f[d],n(h[p],c[d-p])))}return f}}),name$s="freqz",dependencies$s=["typed","add","multiply","Complex","divide","matrix"],createFreqz=factory(name$s,dependencies$s,t=>{var{typed:r,add:a,multiply:n,Complex:s,divide:o,matrix:l}=t;return r(name$s,{"Array, Array":function(f,d){var p=h(512);return u(f,d,p)},"Array, Array, Array":function(f,d,p){return u(f,d,p)},"Array, Array, number":function(f,d,p){if(p<0)throw new Error("w must be a positive number");var v=h(p);return u(f,d,v)},"Matrix, Matrix":function(f,d){var p=h(512),{w:v,h:y}=u(f.valueOf(),d.valueOf(),p);return{w:l(v),h:l(y)}},"Matrix, Matrix, Matrix":function(f,d,p){var{h:v}=u(f.valueOf(),d.valueOf(),p.valueOf());return{h:l(v),w:l(p)}},"Matrix, Matrix, number":function(f,d,p){if(p<0)throw new Error("w must be a positive number");var v=h(p),{h:y}=u(f.valueOf(),d.valueOf(),v);return{h:l(y),w:l(v)}}});function u(c,f,d){for(var p=[],v=[],y=0;y<d.length;y++){for(var b=s(0,0),_=s(0,0),N=0;N<c.length;N++)b=a(b,n(c[N],s(Math.cos(-N*d[y]),Math.sin(-N*d[y]))));for(var M=0;M<f.length;M++)_=a(_,n(f[M],s(Math.cos(-M*d[y]),Math.sin(-M*d[y]))));p.push(b),v.push(_)}for(var C=[],$=0;$<p.length;$++)C.push(o(p[$],v[$]));return{h:C,w:d}}function h(c){for(var f=[],d=0;d<c;d++)f.push(d/c*Math.PI);return f}}),name$r="reviver",dependencies$r=["classes"],createReviver=factory(name$r,dependencies$r,t=>{var{classes:r}=t;return function(n,s){var o=r[s&&s.mathjs];return o&&typeof o.fromJSON=="function"?o.fromJSON(s):s}}),name$q="replacer",dependencies$q=[],createReplacer=factory(name$q,dependencies$q,()=>function(r,a){return typeof a=="number"&&(!Number.isFinite(a)||isNaN(a))?{mathjs:"number",value:String(a)}:typeof a=="bigint"?{mathjs:"bigint",value:String(a)}:a}),version$3="15.1.0",createTrue=factory("true",[],()=>!0),createFalse=factory("false",[],()=>!1),createNull=factory("null",[],()=>null),createInfinity=recreateFactory("Infinity",["config","?BigNumber"],t=>{var{config:r,BigNumber:a}=t;return r.number==="BigNumber"?new a(1/0):1/0}),createNaN=recreateFactory("NaN",["config","?BigNumber"],t=>{var{config:r,BigNumber:a}=t;return r.number==="BigNumber"?new a(NaN):NaN}),createPi=recreateFactory("pi",["config","?BigNumber"],t=>{var{config:r,BigNumber:a}=t;return r.number==="BigNumber"?createBigNumberPi(a):pi$1}),createTau=recreateFactory("tau",["config","?BigNumber"],t=>{var{config:r,BigNumber:a}=t;return r.number==="BigNumber"?createBigNumberTau(a):tau$1}),createE=recreateFactory("e",["config","?BigNumber"],t=>{var{config:r,BigNumber:a}=t;return r.number==="BigNumber"?createBigNumberE(a):e$1}),createPhi=recreateFactory("phi",["config","?BigNumber"],t=>{var{config:r,BigNumber:a}=t;return r.number==="BigNumber"?createBigNumberPhi(a):phi$1}),createLN2=recreateFactory("LN2",["config","?BigNumber"],t=>{var{config:r,BigNumber:a}=t;return r.number==="BigNumber"?new a(2).ln():Math.LN2}),createLN10=recreateFactory("LN10",["config","?BigNumber"],t=>{var{config:r,BigNumber:a}=t;return r.number==="BigNumber"?new a(10).ln():Math.LN10}),createLOG2E=recreateFactory("LOG2E",["config","?BigNumber"],t=>{var{config:r,BigNumber:a}=t;return r.number==="BigNumber"?new a(1).div(new a(2).ln()):Math.LOG2E}),createLOG10E=recreateFactory("LOG10E",["config","?BigNumber"],t=>{var{config:r,BigNumber:a}=t;return r.number==="BigNumber"?new a(1).div(new a(10).ln()):Math.LOG10E}),createSQRT1_2=recreateFactory("SQRT1_2",["config","?BigNumber"],t=>{var{config:r,BigNumber:a}=t;return r.number==="BigNumber"?new a("0.5").sqrt():Math.SQRT1_2}),createSQRT2=recreateFactory("SQRT2",["config","?BigNumber"],t=>{var{config:r,BigNumber:a}=t;return r.number==="BigNumber"?new a(2).sqrt():Math.SQRT2}),createI=recreateFactory("i",["Complex"],t=>{var{Complex:r}=t;return r.I}),createVersion=factory("version",[],()=>version$3);function recreateFactory(t,r,a){return factory(t,r,a,{recreateOnConfigChange:!0})}var createSpeedOfLight=unitFactory("speedOfLight","299792458","m s^-1"),createGravitationConstant=unitFactory("gravitationConstant","6.67430e-11","m^3 kg^-1 s^-2"),createPlanckConstant=unitFactory("planckConstant","6.62607015e-34","J s"),createReducedPlanckConstant=unitFactory("reducedPlanckConstant","1.0545718176461565e-34","J s"),createMagneticConstant=unitFactory("magneticConstant","1.25663706212e-6","N A^-2"),createElectricConstant=unitFactory("electricConstant","8.8541878128e-12","F m^-1"),createVacuumImpedance=unitFactory("vacuumImpedance","376.730313667","ohm"),createCoulomb=unitFactory("coulomb","8.987551792261171e9","N m^2 C^-2"),createCoulombConstant=unitFactory("coulombConstant","8.987551792261171e9","N m^2 C^-2"),createElementaryCharge=unitFactory("elementaryCharge","1.602176634e-19","C"),createBohrMagneton=unitFactory("bohrMagneton","9.2740100783e-24","J T^-1"),createConductanceQuantum=unitFactory("conductanceQuantum","7.748091729863649e-5","S"),createInverseConductanceQuantum=unitFactory("inverseConductanceQuantum","12906.403729652257","ohm"),createMagneticFluxQuantum=unitFactory("magneticFluxQuantum","2.0678338484619295e-15","Wb"),createNuclearMagneton=unitFactory("nuclearMagneton","5.0507837461e-27","J T^-1"),createKlitzing=unitFactory("klitzing","25812.807459304513","ohm"),createBohrRadius=unitFactory("bohrRadius","5.29177210903e-11","m"),createClassicalElectronRadius=unitFactory("classicalElectronRadius","2.8179403262e-15","m"),createElectronMass=unitFactory("electronMass","9.1093837015e-31","kg"),createFermiCoupling=unitFactory("fermiCoupling","1.1663787e-5","GeV^-2"),createFineStructure=numberFactory("fineStructure",.0072973525693),createHartreeEnergy=unitFactory("hartreeEnergy","4.3597447222071e-18","J"),createProtonMass=unitFactory("protonMass","1.67262192369e-27","kg"),createDeuteronMass=unitFactory("deuteronMass","3.3435830926e-27","kg"),createNeutronMass=unitFactory("neutronMass","1.6749271613e-27","kg"),createQuantumOfCirculation=unitFactory("quantumOfCirculation","3.6369475516e-4","m^2 s^-1"),createRydberg=unitFactory("rydberg","10973731.568160","m^-1"),createThomsonCrossSection=unitFactory("thomsonCrossSection","6.6524587321e-29","m^2"),createWeakMixingAngle=numberFactory("weakMixingAngle",.2229),createEfimovFactor=numberFactory("efimovFactor",22.7),createAtomicMass=unitFactory("atomicMass","1.66053906660e-27","kg"),createAvogadro=unitFactory("avogadro","6.02214076e23","mol^-1"),createBoltzmann=unitFactory("boltzmann","1.380649e-23","J K^-1"),createFaraday=unitFactory("faraday","96485.33212331001","C mol^-1"),createFirstRadiation=unitFactory("firstRadiation","3.7417718521927573e-16","W m^2"),createLoschmidt=unitFactory("loschmidt","2.686780111798444e25","m^-3"),createGasConstant=unitFactory("gasConstant","8.31446261815324","J K^-1 mol^-1"),createMolarPlanckConstant=unitFactory("molarPlanckConstant","3.990312712893431e-10","J s mol^-1"),createMolarVolume=unitFactory("molarVolume","0.022413969545014137","m^3 mol^-1"),createSackurTetrode=numberFactory("sackurTetrode",-1.16487052358),createSecondRadiation=unitFactory("secondRadiation","0.014387768775039337","m K"),createStefanBoltzmann=unitFactory("stefanBoltzmann","5.67037441918443e-8","W m^-2 K^-4"),createWienDisplacement=unitFactory("wienDisplacement","2.897771955e-3","m K"),createMolarMass=unitFactory("molarMass","0.99999999965e-3","kg mol^-1"),createMolarMassC12=unitFactory("molarMassC12","11.9999999958e-3","kg mol^-1"),createGravity=unitFactory("gravity","9.80665","m s^-2"),createPlanckLength=unitFactory("planckLength","1.616255e-35","m"),createPlanckMass=unitFactory("planckMass","2.176435e-8","kg"),createPlanckTime=unitFactory("planckTime","5.391245e-44","s"),createPlanckCharge=unitFactory("planckCharge","1.87554603778e-18","C"),createPlanckTemperature=unitFactory("planckTemperature","1.416785e+32","K");function unitFactory(t,r,a){var n=["config","Unit","BigNumber"];return factory(t,n,s=>{var{config:o,Unit:l,BigNumber:u}=s,h=o.number==="BigNumber"?new u(r):parseFloat(r),c=new l(h,a);return c.fixPrefix=!0,c})}function numberFactory(t,r){var a=["config","BigNumber"];return factory(t,a,n=>{var{config:s,BigNumber:o}=n;return s.number==="BigNumber"?new o(r):r})}function ownKeys(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,n)}return a}function _objectSpread(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?ownKeys(Object(a),!0).forEach(function(n){_defineProperty(t,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):ownKeys(Object(a)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(a,n))})}return t}var name$p="mapSlices",dependencies$p=["typed","isInteger"],createMapSlicesTransform=factory(name$p,dependencies$p,t=>{var{typed:r,isInteger:a}=t,n=createMapSlices({typed:r,isInteger:a});return r("mapSlices",{"...any":function(o){var l=o[1];isNumber(l)?o[1]=l-1:isBigNumber(l)&&(o[1]=l.minus(1));try{return n.apply(null,o)}catch(u){throw errorTransform(u)}}})},_objectSpread({isTransformFunction:!0},createMapSlices.meta)),name$o="column",dependencies$o=["typed","Index","matrix","range"],createColumnTransform=factory(name$o,dependencies$o,t=>{var{typed:r,Index:a,matrix:n,range:s}=t,o=createColumn({typed:r,Index:a,matrix:n,range:s});return r("column",{"...any":function(u){var h=u.length-1,c=u[h];isNumber(c)&&(u[h]=c-1);try{return o.apply(null,u)}catch(f){throw errorTransform(f)}}})},{isTransformFunction:!0});function compileInlineExpression(t,r,a){var n=t.filter(function(h){return isSymbolNode(h)&&!(h.name in r)&&!a.has(h.name)})[0];if(!n)throw new Error('No undefined variable found in inline expression "'+t+'"');var s=n.name,o=new Map,l=new PartitionedMap(a,o,new Set([s])),u=t.compile();return function(c){return o.set(s,c),u.evaluate(l)}}var name$n="transformCallback",dependencies$n=["typed"],createTransformCallback=factory(name$n,dependencies$n,t=>{var{typed:r}=t;return function(n,s){return r.isTypedFunction(n)?a(n,s):_transformCallbackFunction(n,n.length,s)};function a(n,s){var o=Object.fromEntries(Object.entries(n.signatures).map(l=>{var[u,h]=l,c=u.split(",").length;return r.isTypedFunction(h)?[u,a(h,s)]:[u,_transformCallbackFunction(h,c,s)]}));return typeof n.name=="string"?r(n.name,o):r(o)}});function _transformCallbackFunction(t,r,a){return r===a?t:r===a+1?function(){for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];var l=s.slice(0,a),u=_transformDims(s[a]);return t(...l,u)}:r>a+1?function(){for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];var l=s.slice(0,a),u=_transformDims(s[a]),h=s.slice(a+1);return t(...l,u,...h)}:t}function _transformDims(t){return t.map(r=>r+1)}var name$m="filter",dependencies$m=["typed"],createFilterTransform=factory(name$m,dependencies$m,t=>{var{typed:r}=t;function a(s,o,l){var u=createFilter({typed:r}),h=createTransformCallback({typed:r});if(s.length===0)return u();var c=s[0];if(s.length===1)return u(c);var f=s.length-1,d=s[f];return c&&(c=n(c,l)),d&&(isSymbolNode(d)||isFunctionAssignmentNode(d)?d=n(d,l):d=compileInlineExpression(d,o,l)),u(c,h(d,f))}a.rawArgs=!0;function n(s,o){return s.compile().evaluate(o)}return a},{isTransformFunction:!0}),name$l="forEach",dependencies$l=["typed"],createForEachTransform=factory(name$l,dependencies$l,t=>{var{typed:r}=t,a=createForEach({typed:r}),n=createTransformCallback({typed:r});function s(l,u,h){if(l.length===0)return a();var c=l[0];if(l.length===1)return a(c);var f=l.length-1,d=l[f];return c&&(c=o(c,h)),d&&(isSymbolNode(d)||isFunctionAssignmentNode(d)?d=o(d,h):d=compileInlineExpression(d,u,h)),a(c,n(d,f))}s.rawArgs=!0;function o(l,u){return l.compile().evaluate(u)}return s},{isTransformFunction:!0}),name$k="index",dependencies$k=["Index","getMatrixDataType"],createIndexTransform=factory(name$k,dependencies$k,t=>{var{Index:r,getMatrixDataType:a}=t;return function(){for(var s=[],o=0,l=arguments.length;o<l;o++){var u=arguments[o];if(isRange(u))u.start--,u.end-=u.step>0?0:2;else if(u&&u.isSet===!0)u=u.map(function(c){return c-1});else if(isArray(u)||isMatrix(u))a(u)!=="boolean"&&(u=u.map(function(c){return c-1}));else if(isNumber(u)||isBigInt(u))u--;else if(isBigNumber(u))u=u.toNumber()-1;else if(typeof u!="string")throw new TypeError("Dimension must be an Array, Matrix, number, bigint, string, or Range");s[o]=u}var h=new r;return r.apply(h,s),h}},{isTransformFunction:!0}),name$j="map",dependencies$j=["typed"],createMapTransform=factory(name$j,dependencies$j,t=>{var{typed:r}=t,a=createMap({typed:r}),n=createTransformCallback({typed:r});function s(o,l,u){if(o.length===0)return a();if(o.length===1)return a(o[0]);var h=o.length-1,c=o.slice(0,h),f=o[h];return c=c.map(p=>d(p,u)),f&&(isSymbolNode(f)||isFunctionAssignmentNode(f)?f=d(f,u):f=compileInlineExpression(f,l,u)),a(...c,n(f,h));function d(p,v){return p.compile().evaluate(v)}}return s.rawArgs=!0,s},{isTransformFunction:!0});function dimToZeroBase(t){return isNumber(t)?t-1:isBigNumber(t)?t.minus(1):t}function isNumberOrBigNumber(t){return isNumber(t)||isBigNumber(t)}function lastDimToZeroBase(t){if(t.length===2&&isCollection(t[0])){t=t.slice();var r=t[1];isNumberOrBigNumber(r)&&(t[1]=dimToZeroBase(r))}return t}var name$i="max",dependencies$i=["typed","config","numeric","larger","isNaN"],createMaxTransform=factory(name$i,dependencies$i,t=>{var{typed:r,config:a,numeric:n,larger:s,isNaN:o}=t,l=createMax({typed:r,config:a,numeric:n,larger:s,isNaN:o});return r("max",{"...any":function(h){h=lastDimToZeroBase(h);try{return l.apply(null,h)}catch(c){throw errorTransform(c)}}})},{isTransformFunction:!0}),name$h="mean",dependencies$h=["typed","add","divide"],createMeanTransform=factory(name$h,dependencies$h,t=>{var{typed:r,add:a,divide:n}=t,s=createMean({typed:r,add:a,divide:n});return r("mean",{"...any":function(l){l=lastDimToZeroBase(l);try{return s.apply(null,l)}catch(u){throw errorTransform(u)}}})},{isTransformFunction:!0}),name$g="min",dependencies$g=["typed","config","numeric","smaller","isNaN"],createMinTransform=factory(name$g,dependencies$g,t=>{var{typed:r,config:a,numeric:n,smaller:s,isNaN:o}=t,l=createMin({typed:r,config:a,numeric:n,smaller:s,isNaN:o});return r("min",{"...any":function(h){h=lastDimToZeroBase(h);try{return l.apply(null,h)}catch(c){throw errorTransform(c)}}})},{isTransformFunction:!0}),name$f="range",dependencies$f=["typed","config","?matrix","?bignumber","equal","smaller","smallerEq","larger","largerEq","add","isZero","isPositive"],createRangeTransform=factory(name$f,dependencies$f,t=>{var{typed:r,config:a,matrix:n,bignumber:s,equal:o,smaller:l,smallerEq:u,larger:h,largerEq:c,add:f,isZero:d,isPositive:p}=t,v=createRange({typed:r,config:a,matrix:n,bignumber:s,equal:o,smaller:l,smallerEq:u,larger:h,largerEq:c,add:f,isZero:d,isPositive:p});return r("range",{"...any":function(b){var _=b.length-1,N=b[_];return typeof N!="boolean"&&b.push(!0),v.apply(null,b)}})},{isTransformFunction:!0}),name$e="row",dependencies$e=["typed","Index","matrix","range"],createRowTransform=factory(name$e,dependencies$e,t=>{var{typed:r,Index:a,matrix:n,range:s}=t,o=createRow({typed:r,Index:a,matrix:n,range:s});return r("row",{"...any":function(u){var h=u.length-1,c=u[h];isNumber(c)&&(u[h]=c-1);try{return o.apply(null,u)}catch(f){throw errorTransform(f)}}})},{isTransformFunction:!0}),name$d="subset",dependencies$d=["typed","matrix","zeros","add"],createSubsetTransform=factory(name$d,dependencies$d,t=>{var{typed:r,matrix:a,zeros:n,add:s}=t,o=createSubset({typed:r,matrix:a,zeros:n,add:s});return r("subset",{"...any":function(u){try{return o.apply(null,u)}catch(h){throw errorTransform(h)}}})},{isTransformFunction:!0}),name$c="concat",dependencies$c=["typed","matrix","isInteger"],createConcatTransform=factory(name$c,dependencies$c,t=>{var{typed:r,matrix:a,isInteger:n}=t,s=createConcat({typed:r,matrix:a,isInteger:n});return r("concat",{"...any":function(l){var u=l.length-1,h=l[u];isNumber(h)?l[u]=h-1:isBigNumber(h)&&(l[u]=h.minus(1));try{return s.apply(null,l)}catch(c){throw errorTransform(c)}}})},{isTransformFunction:!0}),name$b="diff",dependencies$b=["typed","matrix","subtract","number","bignumber"],createDiffTransform=factory(name$b,dependencies$b,t=>{var{typed:r,matrix:a,subtract:n,number:s,bignumber:o}=t,l=createDiff({typed:r,matrix:a,subtract:n,number:s,bignumber:o});return r(name$b,{"...any":function(h){h=lastDimToZeroBase(h);try{return l.apply(null,h)}catch(c){throw errorTransform(c)}}})},{isTransformFunction:!0}),name$a="std",dependencies$a=["typed","map","sqrt","variance"],createStdTransform=factory(name$a,dependencies$a,t=>{var{typed:r,map:a,sqrt:n,variance:s}=t,o=createStd({typed:r,map:a,sqrt:n,variance:s});return r("std",{"...any":function(u){u=lastDimToZeroBase(u);try{return o.apply(null,u)}catch(h){throw errorTransform(h)}}})},{isTransformFunction:!0}),name$9="sum",dependencies$9=["typed","config","add","numeric"],createSumTransform=factory(name$9,dependencies$9,t=>{var{typed:r,config:a,add:n,numeric:s}=t,o=createSum({typed:r,config:a,add:n,numeric:s});return r(name$9,{"...any":function(u){u=lastDimToZeroBase(u);try{return o.apply(null,u)}catch(h){throw errorTransform(h)}}})},{isTransformFunction:!0}),name$8="quantileSeq",dependencies$8=["typed","bignumber","add","subtract","divide","multiply","partitionSelect","compare","isInteger","smaller","smallerEq","larger","mapSlices"],createQuantileSeqTransform=factory(name$8,dependencies$8,t=>{var{typed:r,bignumber:a,add:n,subtract:s,divide:o,multiply:l,partitionSelect:u,compare:h,isInteger:c,smaller:f,smallerEq:d,larger:p,mapSlices:v}=t,y=createQuantileSeq({typed:r,bignumber:a,add:n,subtract:s,divide:o,multiply:l,partitionSelect:u,compare:h,isInteger:c,smaller:f,smallerEq:d,larger:p,mapSlices:v});return r("quantileSeq",{"Array | Matrix, number | BigNumber":y,"Array | Matrix, number | BigNumber, number":(_,N,M)=>y(_,N,b(M)),"Array | Matrix, number | BigNumber, boolean":y,"Array | Matrix, number | BigNumber, boolean, number":(_,N,M,C)=>y(_,N,M,b(C)),"Array | Matrix, Array | Matrix":y,"Array | Matrix, Array | Matrix, number":(_,N,M)=>y(_,N,b(M)),"Array | Matrix, Array | Matrix, boolean":y,"Array | Matrix, Array | Matrix, boolean, number":(_,N,M,C)=>y(_,N,M,b(C))});function b(_){return lastDimToZeroBase([[],_])[1]}},{isTransformFunction:!0}),name$7="cumsum",dependencies$7=["typed","add","unaryPlus"],createCumSumTransform=factory(name$7,dependencies$7,t=>{var{typed:r,add:a,unaryPlus:n}=t,s=createCumSum({typed:r,add:a,unaryPlus:n});return r(name$7,{"...any":function(l){if(l.length===2&&isCollection(l[0])){var u=l[1];isNumber(u)?l[1]=u-1:isBigNumber(u)&&(l[1]=u.minus(1))}try{return s.apply(null,l)}catch(h){throw errorTransform(h)}}})},{isTransformFunction:!0}),name$6="variance",dependencies$6=["typed","add","subtract","multiply","divide","mapSlices","isNaN"],createVarianceTransform=factory(name$6,dependencies$6,t=>{var{typed:r,add:a,subtract:n,multiply:s,divide:o,mapSlices:l,isNaN:u}=t,h=createVariance({typed:r,add:a,subtract:n,multiply:s,divide:o,mapSlices:l,isNaN:u});return r(name$6,{"...any":function(f){f=lastDimToZeroBase(f);try{return h.apply(null,f)}catch(d){throw errorTransform(d)}}})},{isTransformFunction:!0}),name$5="print",dependencies$5=["typed","matrix","zeros","add"],createPrintTransform=factory(name$5,dependencies$5,t=>{var{typed:r,matrix:a,zeros:n,add:s}=t,o=createPrint({typed:r,matrix:a,zeros:n,add:s});return r(name$5,{"string, Object | Array":function(h,c){return o(l(h),c)},"string, Object | Array, number | Object":function(h,c,f){return o(l(h),c,f)}});function l(u){return u.replace(printTemplate,h=>{var c=h.slice(1).split("."),f=c.map(function(d){return!isNaN(d)&&d.length>0?parseInt(d)-1:d});return"$"+f.join(".")})}},{isTransformFunction:!0}),name$4="and",dependencies$4=["typed","matrix","zeros","add","equalScalar","not","concat"],createAndTransform=factory(name$4,dependencies$4,t=>{var{typed:r,matrix:a,equalScalar:n,zeros:s,not:o,concat:l}=t,u=createAnd({typed:r,matrix:a,equalScalar:n,zeros:s,not:o,concat:l});function h(c,f,d){var p=c[0].compile().evaluate(d);if(!isCollection(p)&&!u(p,!0))return!1;var v=c[1].compile().evaluate(d);return u(p,v)}return h.rawArgs=!0,h},{isTransformFunction:!0}),name$3="or",dependencies$3=["typed","matrix","equalScalar","DenseMatrix","concat"],createOrTransform=factory(name$3,dependencies$3,t=>{var{typed:r,matrix:a,equalScalar:n,DenseMatrix:s,concat:o}=t,l=createOr({typed:r,matrix:a,equalScalar:n,DenseMatrix:s,concat:o});function u(h,c,f){var d=h[0].compile().evaluate(f);if(!isCollection(d)&&l(d,!1))return!0;var p=h[1].compile().evaluate(f);return l(d,p)}return u.rawArgs=!0,u},{isTransformFunction:!0}),name$2="nullish",dependencies$2=["typed","matrix","size","flatten","deepEqual"],createNullishTransform=factory(name$2,dependencies$2,t=>{var{typed:r,matrix:a,size:n,flatten:s,deepEqual:o}=t,l=createNullish({typed:r,matrix:a,size:n,flatten:s,deepEqual:o});function u(h,c,f){var d=h[0].compile().evaluate(f);if(!isCollection(d)&&d!=null&&d!==void 0)return d;var p=h[1].compile().evaluate(f);return l(d,p)}return u.rawArgs=!0,u},{isTransformFunction:!0}),name$1="bitAnd",dependencies$1=["typed","matrix","zeros","add","equalScalar","not","concat"],createBitAndTransform=factory(name$1,dependencies$1,t=>{var{typed:r,matrix:a,equalScalar:n,zeros:s,not:o,concat:l}=t,u=createBitAnd({typed:r,matrix:a,equalScalar:n,zeros:s,not:o,concat:l});function h(c,f,d){var p=c[0].compile().evaluate(d);if(!isCollection(p)){if(isNaN(p))return NaN;if(p===0||p===!1)return 0}var v=c[1].compile().evaluate(d);return u(p,v)}return h.rawArgs=!0,h},{isTransformFunction:!0}),name="bitOr",dependencies=["typed","matrix","equalScalar","DenseMatrix","concat"],createBitOrTransform=factory(name,dependencies,t=>{var{typed:r,matrix:a,equalScalar:n,DenseMatrix:s,concat:o}=t,l=createBitOr({typed:r,matrix:a,equalScalar:n,DenseMatrix:s,concat:o});function u(h,c,f){var d=h[0].compile().evaluate(f);if(!isCollection(d)){if(isNaN(d))return NaN;if(d===-1)return-1;if(d===!0)return 1}var p=h[1].compile().evaluate(f);return l(d,p)}return u.rawArgs=!0,u},{isTransformFunction:!0}),BigNumber=createBigNumberClass({config:config$1}),Complex$1=createComplexClass({}),e=createE({BigNumber,config:config$1}),_false=createFalse({}),fineStructure=createFineStructure({BigNumber,config:config$1}),Fraction=createFractionClass({}),i$1=createI({Complex:Complex$1}),_Infinity=createInfinity({BigNumber,config:config$1}),LN10=createLN10({BigNumber,config:config$1}),LOG10E=createLOG10E({BigNumber,config:config$1}),Matrix=createMatrixClass({}),_NaN=createNaN({BigNumber,config:config$1}),_null=createNull({}),phi=createPhi({BigNumber,config:config$1}),Range=createRangeClass({}),ResultSet=createResultSet({}),SQRT1_2=createSQRT1_2({BigNumber,config:config$1}),sackurTetrode=createSackurTetrode({BigNumber,config:config$1}),tau=createTau({BigNumber,config:config$1}),_true=createTrue({}),version$2=createVersion({}),DenseMatrix=createDenseMatrixClass({Matrix,config:config$1}),efimovFactor=createEfimovFactor({BigNumber,config:config$1}),LN2=createLN2({BigNumber,config:config$1}),pi=createPi({BigNumber,config:config$1}),replacer=createReplacer({}),SQRT2=createSQRT2({BigNumber,config:config$1}),typed=createTyped({BigNumber,Complex:Complex$1,DenseMatrix,Fraction}),weakMixingAngle=createWeakMixingAngle({BigNumber,config:config$1}),abs=createAbs({typed}),acos=createAcos({Complex:Complex$1,config:config$1,typed}),acot=createAcot({BigNumber,typed}),acsc=createAcsc({BigNumber,Complex:Complex$1,config:config$1,typed}),addScalar=createAddScalar({typed}),arg=createArg({typed}),asech=createAsech({BigNumber,Complex:Complex$1,config:config$1,typed}),asinh=createAsinh({typed}),atan=createAtan({typed}),atanh=createAtanh({Complex:Complex$1,config:config$1,typed}),bigint=createBigint({typed}),bitNot=createBitNot({typed}),boolean=createBoolean({typed}),clone=createClone({typed}),combinations=createCombinations({typed}),complex=createComplex({Complex:Complex$1,typed}),conj=createConj({typed}),cos=createCos({typed}),cot=createCot({BigNumber,typed}),csc=createCsc({BigNumber,typed}),cube=createCube({typed}),equalScalar=createEqualScalar({config:config$1,typed}),erf=createErf({typed}),exp=createExp({typed}),expm1=createExpm1({Complex:Complex$1,typed}),filter=createFilter({typed}),flatten=createFlatten({typed}),forEach=createForEach({typed}),format=createFormat({typed}),getMatrixDataType=createGetMatrixDataType({typed}),hex=createHex({format,typed}),im=createIm({typed}),isBounded=createIsBounded({typed}),isNaN$1=createIsNaN({typed}),isNumeric=createIsNumeric({typed}),isPrime=createIsPrime({typed}),LOG2E=createLOG2E({BigNumber,config:config$1}),lgamma=createLgamma({Complex:Complex$1,typed}),log10=createLog10({Complex:Complex$1,config:config$1,typed}),log2=createLog2({Complex:Complex$1,config:config$1,typed}),map=createMap({typed}),mode=createMode({isNaN:isNaN$1,isNumeric,typed}),multiplyScalar=createMultiplyScalar({typed}),not=createNot({typed}),number=createNumber({typed}),oct=createOct({format,typed}),pickRandom=createPickRandom({config:config$1,typed}),print=createPrint({typed}),random=createRandom({config:config$1,typed}),re=createRe({typed}),sec=createSec({BigNumber,typed}),sign=createSign({BigNumber,Fraction,complex,typed}),sin=createSin({typed}),size$1=createSize({typed}),SparseMatrix=createSparseMatrixClass({Matrix,equalScalar,typed}),splitUnit=createSplitUnit({typed}),square=createSquare({typed}),string=createString({typed}),subtractScalar=createSubtractScalar({typed}),tan=createTan({typed}),toBest=createToBest({typed}),typeOf=createTypeOf({typed}),acosh=createAcosh({Complex:Complex$1,config:config$1,typed}),acsch=createAcsch({BigNumber,typed}),asec=createAsec({BigNumber,Complex:Complex$1,config:config$1,typed}),bignumber=createBignumber({BigNumber,typed}),combinationsWithRep=createCombinationsWithRep({typed}),cosh=createCosh({typed}),csch=createCsch({BigNumber,typed}),dot=createDot({addScalar,conj,multiplyScalar,size:size$1,typed}),hasNumericValue=createHasNumericValue({isNumeric,typed}),isFinite$1=createIsFinite({isBounded,map,typed}),isNegative=createIsNegative({config:config$1,typed}),isZero=createIsZero({equalScalar,typed}),matrix=createMatrix({DenseMatrix,Matrix,SparseMatrix,typed}),matrixFromFunction=createMatrixFromFunction({isZero,matrix,typed}),multiply=createMultiply({addScalar,dot,equalScalar,matrix,multiplyScalar,typed}),ones=createOnes({BigNumber,config:config$1,matrix,typed}),randomInt=createRandomInt({config:config$1,log2,typed}),resize=createResize({config:config$1,matrix}),sech=createSech({BigNumber,typed}),sinh=createSinh({typed}),sparse=createSparse({SparseMatrix,typed}),sqrt=createSqrt({Complex:Complex$1,config:config$1,typed}),squeeze=createSqueeze({typed}),tanh=createTanh({typed}),transpose=createTranspose({matrix,typed}),xgcd=createXgcd({BigNumber,config:config$1,matrix,typed}),zeros=createZeros({BigNumber,config:config$1,matrix,typed}),acoth=createAcoth({BigNumber,Complex:Complex$1,config:config$1,typed}),asin=createAsin({Complex:Complex$1,config:config$1,typed}),bin$1=createBin({format,typed}),coth=createCoth({BigNumber,typed}),ctranspose=createCtranspose({conj,transpose,typed}),diag=createDiag({DenseMatrix,SparseMatrix,matrix,typed}),equal=createEqual({DenseMatrix,SparseMatrix,equalScalar,matrix,typed}),fraction=createFraction({Fraction,typed}),identity=createIdentity({BigNumber,DenseMatrix,SparseMatrix,config:config$1,matrix,typed}),isInteger=createIsInteger({equal,typed}),kron=createKron({matrix,multiplyScalar,typed}),mapSlices=createMapSlices({isInteger,typed}),matrixFromColumns=createMatrixFromColumns({flatten,matrix,size:size$1,typed}),numeric=createNumeric({bignumber,fraction,number}),prod=createProd({config:config$1,multiplyScalar,numeric,typed}),reshape=createReshape({isInteger,matrix,typed}),round=createRound({BigNumber,DenseMatrix,config:config$1,equalScalar,matrix,typed,zeros}),unaryMinus=createUnaryMinus({typed}),bernoulli=createBernoulli({BigNumber,Fraction,config:config$1,isInteger,number,typed}),cbrt=createCbrt({BigNumber,Complex:Complex$1,Fraction,config:config$1,isNegative,matrix,typed,unaryMinus}),concat=createConcat({isInteger,matrix,typed}),count=createCount({prod,size:size$1,typed}),deepEqual=createDeepEqual({equal,typed}),divideScalar=createDivideScalar({numeric,typed}),dotMultiply=createDotMultiply({concat,equalScalar,matrix,multiplyScalar,typed}),floor=createFloor({DenseMatrix,config:config$1,equalScalar,matrix,round,typed,zeros}),gcd=createGcd({BigNumber,DenseMatrix,concat,config:config$1,equalScalar,matrix,round,typed,zeros}),isPositive=createIsPositive({config:config$1,typed}),larger=createLarger({DenseMatrix,SparseMatrix,bignumber,concat,config:config$1,matrix,typed}),lcm=createLcm({concat,equalScalar,matrix,typed}),leftShift=createLeftShift({DenseMatrix,concat,equalScalar,matrix,typed,zeros}),lsolve=createLsolve({DenseMatrix,divideScalar,equalScalar,matrix,multiplyScalar,subtractScalar,typed}),max=createMax({config:config$1,isNaN:isNaN$1,larger,numeric,typed}),mod=createMod({DenseMatrix,concat,config:config$1,equalScalar,matrix,round,typed,zeros}),nthRoot=createNthRoot({BigNumber,concat,equalScalar,matrix,typed}),nullish=createNullish({deepEqual,flatten,matrix,size:size$1,typed}),or=createOr({DenseMatrix,concat,equalScalar,matrix,typed}),qr=createQr({addScalar,complex,conj,divideScalar,equal,identity,isZero,matrix,multiplyScalar,sign,sqrt,subtractScalar,typed,unaryMinus,zeros}),rightArithShift=createRightArithShift({DenseMatrix,concat,equalScalar,matrix,typed,zeros}),smaller=createSmaller({DenseMatrix,SparseMatrix,bignumber,concat,config:config$1,matrix,typed}),subtract=createSubtract({DenseMatrix,concat,equalScalar,matrix,subtractScalar,typed,unaryMinus}),to=createTo({concat,matrix,typed}),unaryPlus=createUnaryPlus({config:config$1,numeric,typed}),usolve=createUsolve({DenseMatrix,divideScalar,equalScalar,matrix,multiplyScalar,subtractScalar,typed}),xor=createXor({DenseMatrix,SparseMatrix,concat,matrix,typed}),add=createAdd({DenseMatrix,SparseMatrix,addScalar,concat,equalScalar,matrix,typed}),atan2=createAtan2({BigNumber,DenseMatrix,concat,equalScalar,matrix,typed}),bitAnd=createBitAnd({concat,equalScalar,matrix,typed}),bitOr=createBitOr({DenseMatrix,concat,equalScalar,matrix,typed}),bitXor=createBitXor({DenseMatrix,SparseMatrix,concat,matrix,typed}),catalan=createCatalan({addScalar,combinations,divideScalar,isInteger,isNegative,multiplyScalar,typed}),compare=createCompare({BigNumber,DenseMatrix,Fraction,concat,config:config$1,equalScalar,matrix,typed}),compareText=createCompareText({concat,matrix,typed}),composition=createComposition({addScalar,combinations,isInteger,isNegative,isPositive,larger,typed}),cross=createCross({matrix,multiply,subtract,typed}),det=createDet({divideScalar,isZero,matrix,multiply,subtractScalar,typed,unaryMinus}),diff=createDiff({matrix,number,subtract,typed}),distance=createDistance({abs,addScalar,deepEqual,divideScalar,multiplyScalar,sqrt,subtractScalar,typed}),dotDivide=createDotDivide({DenseMatrix,SparseMatrix,concat,divideScalar,equalScalar,matrix,typed}),equalText=createEqualText({compareText,isZero,typed}),FibonacciHeap=createFibonacciHeapClass({larger,smaller}),hypot=createHypot({abs,addScalar,divideScalar,isPositive,multiplyScalar,smaller,sqrt,typed}),ImmutableDenseMatrix=createImmutableDenseMatrixClass({DenseMatrix,smaller}),Index=createIndexClass({ImmutableDenseMatrix,getMatrixDataType}),intersect=createIntersect({abs,add,addScalar,config:config$1,divideScalar,equalScalar,flatten,isNumeric,isZero,matrix,multiply,multiplyScalar,smaller,subtract,typed}),invmod=createInvmod({BigNumber,add,config:config$1,equal,isInteger,mod,smaller,typed,xgcd}),largerEq=createLargerEq({DenseMatrix,SparseMatrix,concat,config:config$1,matrix,typed}),log=createLog({Complex:Complex$1,config:config$1,divideScalar,typeOf,typed}),lsolveAll=createLsolveAll({DenseMatrix,divideScalar,equalScalar,matrix,multiplyScalar,subtractScalar,typed}),matrixFromRows=createMatrixFromRows({flatten,matrix,size:size$1,typed}),min=createMin({config:config$1,isNaN:isNaN$1,numeric,smaller,typed}),nthRoots=createNthRoots({Complex:Complex$1,config:config$1,divideScalar,typed}),partitionSelect=createPartitionSelect({compare,isNaN:isNaN$1,isNumeric,typed}),rightLogShift=createRightLogShift({DenseMatrix,concat,equalScalar,matrix,typed,zeros}),slu=createSlu({SparseMatrix,abs,add,divideScalar,larger,largerEq,multiply,subtract,transpose,typed}),Spa=createSpaClass({FibonacciHeap,addScalar,equalScalar}),subset=createSubset({add,matrix,typed,zeros}),sum=createSum({add,config:config$1,numeric,typed}),trace=createTrace({add,matrix,typed}),usolveAll=createUsolveAll({DenseMatrix,divideScalar,equalScalar,matrix,multiplyScalar,subtractScalar,typed}),zpk2tf=createZpk2tf({Complex:Complex$1,add,multiply,number,typed}),ceil=createCeil({DenseMatrix,config:config$1,equalScalar,matrix,round,typed,zeros}),compareNatural=createCompareNatural({compare,typed}),cumsum=createCumSum({add,typed,unaryPlus}),fix=createFix({Complex:Complex$1,DenseMatrix,ceil,equalScalar,floor,matrix,typed,zeros}),index=createIndex({Index,typed}),inv=createInv({abs,addScalar,det,divideScalar,identity,matrix,multiply,typed,unaryMinus}),log1p=createLog1p({Complex:Complex$1,config:config$1,divideScalar,log,typed}),lup=createLup({DenseMatrix,Spa,SparseMatrix,abs,addScalar,divideScalar,equalScalar,larger,matrix,multiplyScalar,subtractScalar,typed,unaryMinus}),pinv=createPinv({Complex:Complex$1,add,ctranspose,deepEqual,divideScalar,dot,dotDivide,equal,inv,matrix,multiply,typed}),pow=createPow({Complex:Complex$1,config:config$1,fraction,identity,inv,matrix,multiply,number,typed}),setCartesian=createSetCartesian({DenseMatrix,Index,compareNatural,size:size$1,subset,typed}),setDistinct=createSetDistinct({DenseMatrix,Index,compareNatural,size:size$1,subset,typed}),setIsSubset=createSetIsSubset({Index,compareNatural,size:size$1,subset,typed}),setPowerset=createSetPowerset({Index,compareNatural,size:size$1,subset,typed}),smallerEq=createSmallerEq({DenseMatrix,SparseMatrix,concat,config:config$1,matrix,typed}),sort=createSort({compare,compareNatural,matrix,typed}),sqrtm=createSqrtm({abs,add,identity,inv,map,max,multiply,size:size$1,sqrt,subtract,typed}),unequal=createUnequal({DenseMatrix,SparseMatrix,concat,config:config$1,equalScalar,matrix,typed}),and=createAnd({concat,equalScalar,matrix,not,typed,zeros}),divide=createDivide({divideScalar,equalScalar,inv,matrix,multiply,typed}),expm=createExpm({abs,add,identity,inv,multiply,typed}),fft=createFft({addScalar,ceil,conj,divideScalar,dotDivide,exp,i:i$1,log2,matrix,multiplyScalar,pow,tau,typed}),freqz=createFreqz({Complex:Complex$1,add,divide,matrix,multiply,typed}),gamma=createGamma({BigNumber,Complex:Complex$1,config:config$1,multiplyScalar,pow,typed}),ifft=createIfft({conj,dotDivide,fft,typed}),kldivergence=createKldivergence({divide,dotDivide,isNumeric,log,map,matrix,multiply,sum,typed}),lusolve=createLusolve({DenseMatrix,lsolve,lup,matrix,slu,typed,usolve}),mean=createMean({add,divide,typed}),median=createMedian({add,compare,divide,partitionSelect,typed}),polynomialRoot=createPolynomialRoot({add,cbrt,divide,equalScalar,im,isZero,multiply,re,sqrt,subtract,typeOf,typed,unaryMinus}),quantileSeq=createQuantileSeq({bignumber,add,compare,divide,isInteger,larger,mapSlices,multiply,partitionSelect,smaller,smallerEq,subtract,typed}),range=createRange({bignumber,matrix,add,config:config$1,equal,isPositive,isZero,larger,largerEq,smaller,smallerEq,typed}),row=createRow({Index,matrix,range,typed}),setDifference=createSetDifference({DenseMatrix,Index,compareNatural,size:size$1,subset,typed}),setMultiplicity=createSetMultiplicity({Index,compareNatural,size:size$1,subset,typed}),setSymDifference=createSetSymDifference({Index,concat,setDifference,size:size$1,subset,typed}),solveODE=createSolveODE({abs,add,bignumber,divide,isNegative,isPositive,larger,map,matrix,max,multiply,smaller,subtract,typed,unaryMinus}),Unit=createUnitClass({BigNumber,Complex:Complex$1,Fraction,abs,addScalar,config:config$1,divideScalar,equal,fix,format,isNumeric,multiplyScalar,number,pow,round,subtractScalar}),vacuumImpedance=createVacuumImpedance({BigNumber,Unit,config:config$1}),atomicMass=createAtomicMass({BigNumber,Unit,config:config$1}),bohrMagneton=createBohrMagneton({BigNumber,Unit,config:config$1}),boltzmann=createBoltzmann({BigNumber,Unit,config:config$1}),column=createColumn({Index,matrix,range,typed}),conductanceQuantum=createConductanceQuantum({BigNumber,Unit,config:config$1}),coulomb=createCoulomb({BigNumber,Unit,config:config$1}),createUnit=createCreateUnit({Unit,typed}),deuteronMass=createDeuteronMass({BigNumber,Unit,config:config$1}),eigs=createEigs({abs,add,addScalar,atan,bignumber,column,complex,config:config$1,cos,diag,divideScalar,dot,equal,flatten,im,inv,larger,matrix,matrixFromColumns,multiply,multiplyScalar,number,qr,re,reshape,sin,size:size$1,smaller,sqrt,subtract,typed,usolve,usolveAll}),electronMass=createElectronMass({BigNumber,Unit,config:config$1}),factorial=createFactorial({gamma,typed}),fermiCoupling=createFermiCoupling({BigNumber,Unit,config:config$1}),gasConstant=createGasConstant({BigNumber,Unit,config:config$1}),gravity=createGravity({BigNumber,Unit,config:config$1}),klitzing=createKlitzing({BigNumber,Unit,config:config$1}),loschmidt=createLoschmidt({BigNumber,Unit,config:config$1}),mad=createMad({abs,map,median,subtract,typed}),magneticFluxQuantum=createMagneticFluxQuantum({BigNumber,Unit,config:config$1}),molarMass=createMolarMass({BigNumber,Unit,config:config$1}),molarPlanckConstant=createMolarPlanckConstant({BigNumber,Unit,config:config$1}),multinomial=createMultinomial({add,divide,factorial,isInteger,isPositive,multiply,typed}),norm=createNorm({abs,add,conj,ctranspose,eigs,equalScalar,larger,matrix,multiply,pow,smaller,sqrt,typed}),permutations=createPermutations({factorial,typed}),planckConstant=createPlanckConstant({BigNumber,Unit,config:config$1}),planckMass=createPlanckMass({BigNumber,Unit,config:config$1}),planckTime=createPlanckTime({BigNumber,Unit,config:config$1}),reducedPlanckConstant=createReducedPlanckConstant({BigNumber,Unit,config:config$1}),rotationMatrix=createRotationMatrix({BigNumber,DenseMatrix,SparseMatrix,addScalar,config:config$1,cos,matrix,multiplyScalar,norm,sin,typed,unaryMinus}),rydberg=createRydberg({BigNumber,Unit,config:config$1}),secondRadiation=createSecondRadiation({BigNumber,Unit,config:config$1}),setSize=createSetSize({compareNatural,typed}),speedOfLight=createSpeedOfLight({BigNumber,Unit,config:config$1}),stefanBoltzmann=createStefanBoltzmann({BigNumber,Unit,config:config$1}),thomsonCrossSection=createThomsonCrossSection({BigNumber,Unit,config:config$1}),variance=createVariance({add,divide,isNaN:isNaN$1,mapSlices,multiply,subtract,typed}),zeta=createZeta({BigNumber,Complex:Complex$1,add,config:config$1,divide,equal,factorial,gamma,isBounded,isNegative,multiply,pi,pow,sin,smallerEq,subtract,typed}),avogadro=createAvogadro({BigNumber,Unit,config:config$1}),bohrRadius=createBohrRadius({BigNumber,Unit,config:config$1}),corr=createCorr({add,divide,matrix,mean,multiply,pow,sqrt,subtract,sum,typed}),dotPow=createDotPow({DenseMatrix,SparseMatrix,concat,equalScalar,matrix,pow,typed}),elementaryCharge=createElementaryCharge({BigNumber,Unit,config:config$1}),faraday=createFaraday({BigNumber,Unit,config:config$1}),hartreeEnergy=createHartreeEnergy({BigNumber,Unit,config:config$1}),inverseConductanceQuantum=createInverseConductanceQuantum({BigNumber,Unit,config:config$1}),magneticConstant=createMagneticConstant({BigNumber,Unit,config:config$1}),molarMassC12=createMolarMassC12({BigNumber,Unit,config:config$1}),neutronMass=createNeutronMass({BigNumber,Unit,config:config$1}),planckCharge=createPlanckCharge({BigNumber,Unit,config:config$1}),planckTemperature=createPlanckTemperature({BigNumber,Unit,config:config$1}),quantumOfCirculation=createQuantumOfCirculation({BigNumber,Unit,config:config$1}),setIntersect=createSetIntersect({DenseMatrix,Index,compareNatural,size:size$1,subset,typed}),std=createStd({map,sqrt,typed,variance}),stirlingS2=createStirlingS2({bignumber,addScalar,combinations,divideScalar,factorial,isInteger,isNegative,larger,multiplyScalar,number,pow,subtractScalar,typed}),unit=createUnitFunction({Unit,typed}),bellNumbers=createBellNumbers({addScalar,isInteger,isNegative,stirlingS2,typed}),electricConstant=createElectricConstant({BigNumber,Unit,config:config$1}),firstRadiation=createFirstRadiation({BigNumber,Unit,config:config$1}),nuclearMagneton=createNuclearMagneton({BigNumber,Unit,config:config$1}),planckLength=createPlanckLength({BigNumber,Unit,config:config$1}),rotate=createRotate({multiply,rotationMatrix,typed}),setUnion=createSetUnion({Index,concat,setIntersect,setSymDifference,size:size$1,subset,typed}),wienDisplacement=createWienDisplacement({BigNumber,Unit,config:config$1}),classicalElectronRadius=createClassicalElectronRadius({BigNumber,Unit,config:config$1}),molarVolume=createMolarVolume({BigNumber,Unit,config:config$1}),schur=createSchur({identity,matrix,multiply,norm,qr,subtract,typed}),coulombConstant=createCoulombConstant({BigNumber,Unit,config:config$1}),gravitationConstant=createGravitationConstant({BigNumber,Unit,config:config$1}),protonMass=createProtonMass({BigNumber,Unit,config:config$1}),sylvester=createSylvester({abs,add,concat,identity,index,lusolve,matrix,matrixFromColumns,multiply,range,schur,subset,subtract,transpose,typed}),lyap=createLyap({matrix,multiply,sylvester,transpose,typed}),math$1={},mathWithTransform={},classes={},Node=createNode({mathWithTransform}),ObjectNode=createObjectNode({Node}),OperatorNode=createOperatorNode({Node}),ParenthesisNode=createParenthesisNode({Node}),RelationalNode=createRelationalNode({Node}),ArrayNode=createArrayNode({Node}),BlockNode=createBlockNode({Node,ResultSet}),ConditionalNode=createConditionalNode({Node}),RangeNode=createRangeNode({Node}),reviver=createReviver({classes}),Chain=createChainClass({math:math$1,typed}),FunctionAssignmentNode=createFunctionAssignmentNode({Node,typed}),chain=createChain({Chain,typed}),ConstantNode=createConstantNode({Node,isBounded}),IndexNode=createIndexNode({Node,size:size$1}),AccessorNode=createAccessorNode({Node,subset}),AssignmentNode=createAssignmentNode({matrix,Node,subset}),SymbolNode$1=createSymbolNode({Unit,Node,math:math$1}),FunctionNode=createFunctionNode({Node,SymbolNode:SymbolNode$1,math:math$1}),parse=createParse({AccessorNode,ArrayNode,AssignmentNode,BlockNode,ConditionalNode,ConstantNode,FunctionAssignmentNode,FunctionNode,IndexNode,ObjectNode,OperatorNode,ParenthesisNode,RangeNode,RelationalNode,SymbolNode:SymbolNode$1,config:config$1,numeric,typed}),resolve=createResolve({ConstantNode,FunctionNode,OperatorNode,ParenthesisNode,parse,typed}),simplifyConstant=createSimplifyConstant({bignumber,fraction,AccessorNode,ArrayNode,ConstantNode,FunctionNode,IndexNode,ObjectNode,OperatorNode,SymbolNode:SymbolNode$1,config:config$1,isBounded,mathWithTransform,matrix,typed}),compile=createCompile({parse,typed}),leafCount=createLeafCount({parse,typed}),simplifyCore=createSimplifyCore({AccessorNode,ArrayNode,ConstantNode,FunctionNode,IndexNode,ObjectNode,OperatorNode,ParenthesisNode,SymbolNode:SymbolNode$1,add,divide,equal,isZero,multiply,parse,pow,subtract,typed}),evaluate=createEvaluate({parse,typed}),Help=createHelpClass({evaluate}),Parser$1=createParserClass({evaluate,parse}),parser$1=createParser({Parser:Parser$1,typed}),simplify=createSimplify({AccessorNode,ArrayNode,ConstantNode,FunctionNode,IndexNode,ObjectNode,OperatorNode,ParenthesisNode,SymbolNode:SymbolNode$1,equal,parse,replacer,resolve,simplifyConstant,simplifyCore,typed}),symbolicEqual=createSymbolicEqual({OperatorNode,parse,simplify,typed}),derivative=createDerivative({ConstantNode,FunctionNode,OperatorNode,ParenthesisNode,SymbolNode:SymbolNode$1,config:config$1,equal,isZero,numeric,parse,simplify,typed}),help=createHelp({Help,mathWithTransform,typed}),rationalize=createRationalize({bignumber,fraction,AccessorNode,ArrayNode,ConstantNode,FunctionNode,IndexNode,ObjectNode,OperatorNode,ParenthesisNode,SymbolNode:SymbolNode$1,add,config:config$1,divide,equal,isZero,mathWithTransform,matrix,multiply,parse,pow,simplify,simplifyConstant,simplifyCore,subtract,typed});_extends(math$1,{e,false:_false,fineStructure,i:i$1,Infinity:_Infinity,LN10,LOG10E,NaN:_NaN,null:_null,phi,SQRT1_2,sackurTetrode,tau,true:_true,E:e,version:version$2,efimovFactor,LN2,pi,replacer,reviver,SQRT2,typed,PI:pi,weakMixingAngle,abs,acos,acot,acsc,addScalar,arg,asech,asinh,atan,atanh,bigint,bitNot,boolean,clone,combinations,complex,conj,cos,cot,csc,cube,equalScalar,erf,exp,expm1,filter,flatten,forEach,format,getMatrixDataType,hex,im,isBounded,isNaN:isNaN$1,isNumeric,isPrime,LOG2E,lgamma,log10,log2,map,mode,multiplyScalar,not,number,oct,pickRandom,print,random,re,sec,sign,sin,size:size$1,splitUnit,square,string,subtractScalar,tan,toBest,typeOf,acosh,acsch,asec,bignumber,chain,combinationsWithRep,cosh,csch,dot,hasNumericValue,isFinite:isFinite$1,isNegative,isZero,matrix,matrixFromFunction,multiply,ones,randomInt,resize,sech,sinh,sparse,sqrt,squeeze,tanh,transpose,xgcd,zeros,acoth,asin,bin:bin$1,coth,ctranspose,diag,equal,fraction,identity,isInteger,kron,mapSlices,matrixFromColumns,numeric,prod,reshape,round,unaryMinus,bernoulli,cbrt,concat,count,deepEqual,divideScalar,dotMultiply,floor,gcd,isPositive,larger,lcm,leftShift,lsolve,max,mod,nthRoot,nullish,or,qr,rightArithShift,smaller,subtract,to,unaryPlus,usolve,xor,add,atan2,bitAnd,bitOr,bitXor,catalan,compare,compareText,composition,cross,det,diff,distance,dotDivide,equalText,hypot,intersect,invmod,largerEq,log,lsolveAll,matrixFromRows,min,nthRoots,partitionSelect,rightLogShift,slu,subset,sum,trace,usolveAll,zpk2tf,ceil,compareNatural,cumsum,fix,index,inv,log1p,lup,pinv,pow,setCartesian,setDistinct,setIsSubset,setPowerset,smallerEq,sort,sqrtm,unequal,and,divide,expm,fft,freqz,gamma,ifft,kldivergence,lusolve,mean,median,polynomialRoot,quantileSeq,range,row,setDifference,setMultiplicity,setSymDifference,solveODE,vacuumImpedance,atomicMass,bohrMagneton,boltzmann,column,conductanceQuantum,coulomb,createUnit,deuteronMass,eigs,electronMass,factorial,fermiCoupling,gasConstant,gravity,klitzing,loschmidt,mad,magneticFluxQuantum,molarMass,molarPlanckConstant,multinomial,norm,permutations,planckConstant,planckMass,planckTime,reducedPlanckConstant,rotationMatrix,rydberg,secondRadiation,setSize,speedOfLight,stefanBoltzmann,thomsonCrossSection,variance,zeta,avogadro,bohrRadius,corr,dotPow,elementaryCharge,faraday,hartreeEnergy,inverseConductanceQuantum,magneticConstant,molarMassC12,neutronMass,parse,planckCharge,planckTemperature,quantumOfCirculation,resolve,setIntersect,simplifyConstant,std,stirlingS2,unit,bellNumbers,compile,electricConstant,firstRadiation,leafCount,nuclearMagneton,planckLength,rotate,setUnion,simplifyCore,wienDisplacement,classicalElectronRadius,evaluate,molarVolume,schur,coulombConstant,gravitationConstant,parser:parser$1,simplify,symbolicEqual,derivative,protonMass,sylvester,help,rationalize,lyap,config:config$1});_extends(mathWithTransform,math$1,{map:createMapTransform({typed}),filter:createFilterTransform({typed}),forEach:createForEachTransform({typed}),mapSlices:createMapSlicesTransform({isInteger,typed}),and:createAndTransform({add,concat,equalScalar,matrix,not,typed,zeros}),cumsum:createCumSumTransform({add,typed,unaryPlus}),nullish:createNullishTransform({deepEqual,flatten,matrix,size:size$1,typed}),print:createPrintTransform({add,matrix,typed,zeros}),bitAnd:createBitAndTransform({add,concat,equalScalar,matrix,not,typed,zeros}),concat:createConcatTransform({isInteger,matrix,typed}),diff:createDiffTransform({bignumber,matrix,number,subtract,typed}),max:createMaxTransform({config:config$1,isNaN:isNaN$1,larger,numeric,typed}),min:createMinTransform({config:config$1,isNaN:isNaN$1,numeric,smaller,typed}),or:createOrTransform({DenseMatrix,concat,equalScalar,matrix,typed}),subset:createSubsetTransform({add,matrix,typed,zeros}),bitOr:createBitOrTransform({DenseMatrix,concat,equalScalar,matrix,typed}),sum:createSumTransform({add,config:config$1,numeric,typed}),variance:createVarianceTransform({add,divide,isNaN:isNaN$1,mapSlices,multiply,subtract,typed}),index:createIndexTransform({Index,getMatrixDataType}),quantileSeq:createQuantileSeqTransform({add,bignumber,compare,divide,isInteger,larger,mapSlices,multiply,partitionSelect,smaller,smallerEq,subtract,typed}),range:createRangeTransform({bignumber,matrix,add,config:config$1,equal,isPositive,isZero,larger,largerEq,smaller,smallerEq,typed}),column:createColumnTransform({Index,matrix,range,typed}),row:createRowTransform({Index,matrix,range,typed}),mean:createMeanTransform({add,divide,typed}),std:createStdTransform({map,sqrt,typed,variance})});_extends(classes,{BigNumber,Complex:Complex$1,Fraction,Matrix,Node,ObjectNode,OperatorNode,ParenthesisNode,Range,RelationalNode,ResultSet,ArrayNode,BlockNode,ConditionalNode,DenseMatrix,RangeNode,Chain,FunctionAssignmentNode,SparseMatrix,ConstantNode,IndexNode,FibonacciHeap,ImmutableDenseMatrix,Index,Spa,AccessorNode,AssignmentNode,Unit,SymbolNode:SymbolNode$1,FunctionNode,Help,Parser:Parser$1});Chain.createProxy(math$1);const SUPPORTED_FUNCTIONS=[{name:"sin(x)",description:"Sine function"},{name:"cos(x)",description:"Cosine function"},{name:"tan(x)",description:"Tangent function"},{name:"asin(x)",description:"Inverse sine"},{name:"acos(x)",description:"Inverse cosine"},{name:"atan(x)",description:"Inverse tangent"},{name:"exp(x)",description:"Exponential (e^x)"},{name:"log(x)",description:"Natural logarithm"},{name:"log10(x)",description:"Base-10 logarithm"},{name:"sqrt(x)",description:"Square root"},{name:"abs(x)",description:"Absolute value"},{name:"x^n",description:"Power (e.g., x^2)"},{name:"pi",description:"  3.14159..."},{name:"e",description:"Euler's number  2.71828..."}],EXAMPLE_FUNCTIONS=[{expr:"x^2",label:"x",latex:"x^2"},{expr:"x^3",label:"x",latex:"x^3"},{expr:"sin(x)",label:"sin(x)",latex:"\\sin(x)"},{expr:"cos(x)",label:"cos(x)",latex:"\\cos(x)"},{expr:"exp(x)",label:"e",latex:"e^x"},{expr:"exp(-x^2)",label:"e",latex:"e^{-x^2}"},{expr:"1/(1+x^2)",label:"1/(1+x)",latex:"\\frac{1}{1+x^2}"},{expr:"sqrt(1-x^2)",label:"(1-x)",latex:"\\sqrt{1-x^2}"},{expr:"sin(x)*cos(x)",label:"sin(x)cos(x)",latex:"\\sin(x)\\cos(x)"},{expr:"x*sin(x)",label:"xsin(x)",latex:"x\\sin(x)"}];function parseFunction(t){if(!t||t.trim()==="")return{success:!1,error:"Expression cannot be empty"};try{const r=compile(t),a=r.evaluate({x:1});return typeof a!="number"||isFinite(a),{success:!0,fn:s=>{try{const o=r.evaluate({x:s});return typeof o=="number"?o:NaN}catch{return NaN}}}}catch(r){return{success:!1,error:r.message||"Failed to parse expression"}}}function toLatex(t){if(!t)return"";try{return parse(t).toTex({parenthesis:"auto",implicit:"hide"})}catch{return t}}function useMultiQuadrature(t="sin(x)",r=4,a=0,n=Math.PI){const[s,o]=reactExports.useState(t),[l,u]=reactExports.useState(r),[h,c]=reactExports.useState(a),[f,d]=reactExports.useState(n),[p,v]=reactExports.useState([...METHOD_IDS]),[y,b]=reactExports.useState(42),[_,N]=reactExports.useState("gaussLegendre"),M=reactExports.useMemo(()=>parseFunction(s),[s]),C=h<f,$=reactExports.useMemo(()=>!M.success||!M.fn||!C?{valid:!0}:validateFunctionOnInterval(M.fn,h,f),[M,h,f,C]),w=reactExports.useMemo(()=>{if(!M.success||!M.fn||!C||!$.valid)return null;const U={};try{for(const q of p){const ee=q==="random"?{seed:y}:{},z=computeQuadrature(q,M.fn,h,f,l,ee),Y=z.details.some(K=>!isFinite(K.fValue));U[q]={...z,hasInvalidValues:Y,error:Y?"Function is undefined or infinite at some quadrature nodes":null}}}catch{return null}return U},[M,h,f,l,p,y,C]),A=reactExports.useMemo(()=>{if(!M.success||!M.fn||!C||!$.valid)return null;try{return computeReferenceValue(M.fn,h,f)}catch{return null}},[M,h,f,C,$]),X=reactExports.useMemo(()=>{if(!M.success||!M.fn||!C||!$.valid)return null;try{return computeConvergenceData(M.fn,h,f,p,y)}catch{return null}},[M,h,f,p,y,C,$]),O=reactExports.useCallback(U=>{const q=Math.max(1,Math.min(10,parseInt(U)||1));u(q)},[]),G=reactExports.useCallback(U=>{const q=parseFloat(U);isNaN(q)||c(q)},[]),R=reactExports.useCallback(U=>{const q=parseFloat(U);isNaN(q)||d(q)},[]),B=reactExports.useCallback(()=>{b(Math.floor(Math.random()*100)+1)},[]),F=reactExports.useCallback(U=>{v(q=>{if(q.includes(U)){if(q.length<=1)return q;const ee=q.filter(z=>z!==U);return U===_&&N(ee[0]),ee}return METHOD_IDS.filter(ee=>q.includes(ee)||ee===U)})},[_]);return{expression:s,degree:l,intervalA:h,intervalB:f,parsedFunction:M,enabledMethods:p,randomSeed:y,activeMethod:_,allResults:w,referenceValue:A,convergenceData:X,functionValidation:$,isValid:M.success&&C&&$.valid&&w!==null,setExpression:o,setDegree:O,setIntervalA:G,setIntervalB:R,setEnabledMethods:v,setRandomSeed:b,setActiveMethod:N,toggleMethod:F,reshuffleRandom:B}}var jxg={};try{typeof JXG=="object"&&!JXG.extend&&(jxg=JXG)}catch{}jxg.extend=function(t,r,a,n){var s,o;a=a||!1,n=n||!1;for(s in r)(!a||a&&r.hasOwnProperty(s))&&(n?o=s.toLowerCase():o=s,t[o]=r[s])};jxg.defineConstant=function(t,r,a,n){n=n||!1,!(n&&jxg.exists(t[r]))&&Object.defineProperty(t,r,{value:a,writable:!1,enumerable:!0,configurable:!1})};jxg.extendConstants=function(t,r,a,n){var s,o;a=a||!1,n=n||!1;for(s in r)(!a||a&&r.hasOwnProperty(s))&&(n?o=s.toUpperCase():o=s,this.defineConstant(t,o,r[s]))};jxg.extend(jxg,{boards:{},readers:{},elements:{},registerElement:function(t,r){t=t.toLowerCase(),this.elements[t]=r},registerReader:function(t,r){var a,n;for(a=0;a<r.length;a++)n=r[a].toLowerCase(),typeof this.readers[n]!="function"&&(this.readers[n]=t)},shortcut:function(t,r){return function(){return t[r].apply(this,arguments)}},getRef:function(t,r){return jxg.deprecated("JXG.getRef()","Board.select()"),t.select(r)},getReference:function(t,r){return jxg.deprecated("JXG.getReference()","Board.select()"),t.select(r)},getBoardByContainerId:function(t){var r;for(r in JXG.boards)if(JXG.boards.hasOwnProperty(r)&&JXG.boards[r].container===t)return JXG.boards[r];return null},deprecated:function(t,r){var a=t+" is deprecated.";r&&(a+=" Please use "+r+" instead."),jxg.warn(a)},warn:function(t){typeof window=="object"&&window.console&&console.warn?console.warn("WARNING:",t):typeof document=="object"&&document.getElementById("warning")&&(document.getElementById("debug").innerText+="WARNING: "+t+`
`)},debugInt:function(t){var r,a;for(r=0;r<arguments.length;r++)a=arguments[r],typeof window=="object"&&window.console&&console.log?console.log(a):typeof document=="object"&&document.getElementById("debug")&&(document.getElementById("debug").innerText+=a+`
`)},debugWST:function(t){var r=new Error;jxg.debugInt.apply(this,arguments),r&&r.stack&&(jxg.debugInt("stacktrace"),jxg.debugInt(r.stack.split(`
`).slice(1).join(`
`)))},debugLine:function(t){var r=new Error;jxg.debugInt.apply(this,arguments),r&&r.stack&&jxg.debugInt("Called from",r.stack.split(`
`).slice(2,3).join(`
`))},debug:function(t){jxg.debugInt.apply(this,arguments)},themes:{}});const JXG$1=jxg;var major=1,minor=12,patch=2,version$1=major+"."+minor+"."+patch,constants;constants={version:version$1,licenseText:"JSXGraph v"+version$1+"  jsxgraph.org",licenseLogo:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJ8AAACfCAYAAADnGwvgAAAACXBIWXMAAAsSAAALEgHS3X78AAAIPklEQVR4nO2d21XjSBCG/96z75ABzgBPBHgiWDLARDCeCBAZeCMYO4KFCEbOwM7AZIAjqH1QiTHGF7XUF7X6/87xw4APqodv+qaqaiMiICQGf8UOgOQL5SPRoHwkGpSPROPv2AH4whhzDWCs/xwDuI4YTu4sRGR7+MPByGeMGQG4BzBBJdtNxHDIZ0oA28MfJi2fCjfVD2VLjCTlU+kKAA9RAyGdSEo+SjcskpHPGFMAmAG4ihwKcUTv5dPR7gXAbdxIiGt6fc5njJkAWIPiDZLeymeMmQL4DU6zg6WX8ql4v2LHQfzSO/koXj70Sj6Klxd92+2uAXyPHQS5yBQOzlp7JZ+IrGPHQC6jpxCd6dW0S/KC8pFoUD4SDcpHokH5SDQoH4kG5SPRoHwkGpSPRCPaGw5jzBjACFWl2Ug/JB4LEVmEfGAw+bSO9h5/yhuZp9cvytAP9C6fvgecAfjH97NIWniTT9OjCrCelpzAuXw60hUA7lz/bTIsnMmna7oCwA9Xf5MMGyfy6c51AVaZEQs6n/Pp2q4ExSOWdBr5WHNButB65KN4pCut5KN4xAXW8ulRCsUjnbGSb69pDyGdsR35XsB3ssQRjeXT/ng8TiHOaCSfTrczr5GQ7Gg68hXgdEscc/GQWUc99kC+zArAO6p+M4fU94Aw2WKPJm84Ct9BJMorqteKpU2PGX0PPkGVVJu1jGfl46j3hTcAc1Qp5+9t/oCKugYwz/0ekUtrvmmIIBLgDcCjiIxEZN5WvENEZCsihYiMADzqc7KB8p1nB+BZpVv4fJD+/TGAZ5/P6RMn5dMpIbupYI8NgLGIFKEeKCLv+rxv+vxBc27kuw8WRf9Yisj42E2JIdB14QTAMsbzQ3FOvkmoIHrGTxGZxg5CR8EpBizgud3u+Mzvhspj6MLpS4jI1BgDDPDU4ejIp8VAua33nvsmXs1QR8BT025uo94y5MaiDSrga+w4XNKrbvSR2MBR0oS+vbjG5/VyCeDdUaf9KaoD6kHMSqfky2nkm3Y5NDbG1P1n7nE8+eJJv7dDlQ+5EJGyzbNE5H3vTrrkOTXtXgeNIh7PbUckY8y9MWYL4D9Um4FLWT9X+r3fxph127ssVNxBrP9y7s+3Q/We1gpjzLUx5gWVdG2nv1tUEi50c2fLDFX8SZOzfDPb6VbXdCXcddx6AFDaCqhxW//H6Ru5ylevvxqzJ57rUoJbtBAQlC9ZrFKiVIwF/GVz38KyOaPGn/TaL1f5bEeNAv6Lp261SMuGhYc4gpGjfG82CQO6Kw3V9u1Js4kaoTvfZDceOcpnW/Re+AjC4fOSLeLPUb6y6Rd1kxG6zuLBZvRDhEberqB855l6iuESNrmUyV6QnZ18lmd7E19xXKCxfCnfzp6bfCvL78dqD2I71Se56chNvsa0ffcaiSRHP8rXUxKTvxWUj0SD8vUXJ4XpfYbynWYb8+GWu9gk8y9zk2/U9Iv6Ci7WLtK2bUaSTTtzk882+bP0EYTL57ZMRu0FuclXvzJrSqz3pjbPTbbeJjv5YPfW4gXhp96diNjIN/EViG9ClU6+oXnu2Qh+q/MnaJjPp9Vic2gFWiBscw0nPoIIQSj5tk2LsvVw1bd8NsxRFeyE6EldN59shK73ku1umuO0e6W1to3QRISpv3A+YVtDnHQnsRzlAyw7FOga7F9PsdT8bFFMnvT1FLnKd2eZsAkRmcFfwc5SRKzWero8SfJ8ryZX+YAW6fHarMd129rHlv0AC8dxBCdn+R7aZI7oxuk7ujfv3gD41qYtm8ad7EajJmf5gJaF1yJSduggX3e2H7fJQt6rIU6e3OVrUyv7gYgsVMJvqKbjFb4eSr/pz59RjXRdO9sXGHiLtJx4Msa8dKmF2LvYxSuBa4i9k/vIV9OmV0pQ9J10sjW6x6B8FVfosYAa1+Au2qZ8f2jbLcorGk+Jgazz9qF8n6kFHEWOA8DHVLtG4ofJp6B8X7kF0LptrSv0/XOJAY54NZTvOFeo2tbOQ0/D2nZ3jqrt7qDWeIdQvvP8QDUKBske0U7zawzoOOUclO8yNwD+M8aUviQ0xky1s/0vDHiaPYSHzM25Q5UNU2dlL7rcSqmbiSmqnLxshNuH8tlzgyqt/klFLPWzBbA+lgyq68bx3meCTIXbh/J14wZVyv9H2r/eEEkawDUfiQblIyHYHvsh5SPeObUxo3zENyeL7ikf8c3JPEfKR3xD+Ug0KB+JRnnqF5SP+GRz7hUk5SM+WZz7JeUjPjlb8ET5iC9Wl7J+KB/xRXHpC5SP+GDVpN0b5SM+KJp8ifIR17w2bXJJ+YhLdrBoIUz5iEusekpTPuKKpeX9IZSPOGHTprUv5SNd2aDlRTSUj3RhA2BieXfIB70rndRtehL1h8aYEgNozN2STuIBHPlIOxboKB7Qw5GP9J8ubUL24chHasrQD6R8JBqUjwD42OgFhfIRoNq5BofyESDABTbHoHwEiLDZACgfqYhysxHlI69dD4vbEuqQ+c4YI4GeReyIdp8bR768eet4/WonKF/eLGI+nPLlyw4tb1p3BeXLl1msjUYN5cuTVcy1Xg3ly5NZ7AAAypcjP0Ukyuu0QyhfXixFJOomYx/Klw8b9GS6raF8edC52McHlG/49FI8gPINnd6KB1C+IbMUkXFfxQNYOjlEdqi6RUXLVmkKR75h8QpglIJ4AOUbCisA30Xkvs/T7CGcdtNmBaCIUfboAsqXHhtUeXgvrtpWxILy9ZsdqrLG+lOmLtw+RuRraYUxZgRgFDgW8oftkCQ7xVH5CAkBd7skGpSPRIPykWhQPhKN/wEKYnCiOMadyQAAAABJRU5ErkJggg==",COORDS_BY_USER:1,COORDS_BY_SCREEN:2,OBJECT_TYPE_ARC:1,OBJECT_TYPE_ARROW:2,OBJECT_TYPE_AXIS:3,OBJECT_TYPE_AXISPOINT:4,OBJECT_TYPE_TICKS:5,OBJECT_TYPE_CIRCLE:6,OBJECT_TYPE_CONIC:7,OBJECT_TYPE_CURVE:8,OBJECT_TYPE_GLIDER:9,OBJECT_TYPE_IMAGE:10,OBJECT_TYPE_LINE:11,OBJECT_TYPE_POINT:12,OBJECT_TYPE_SLIDER:13,OBJECT_TYPE_CAS:14,OBJECT_TYPE_GXTCAS:15,OBJECT_TYPE_POLYGON:16,OBJECT_TYPE_SECTOR:17,OBJECT_TYPE_TEXT:18,OBJECT_TYPE_ANGLE:19,OBJECT_TYPE_INTERSECTION:20,OBJECT_TYPE_TURTLE:21,OBJECT_TYPE_VECTOR:22,OBJECT_TYPE_OPROJECT:23,OBJECT_TYPE_GRID:24,OBJECT_TYPE_TANGENT:25,OBJECT_TYPE_HTMLSLIDER:26,OBJECT_TYPE_CHECKBOX:27,OBJECT_TYPE_INPUT:28,OBJECT_TYPE_BUTTON:29,OBJECT_TYPE_TRANSFORMATION:30,OBJECT_TYPE_FOREIGNOBJECT:31,OBJECT_TYPE_VIEW3D:32,OBJECT_TYPE_POINT3D:33,OBJECT_TYPE_LINE3D:34,OBJECT_TYPE_PLANE3D:35,OBJECT_TYPE_CURVE3D:36,OBJECT_TYPE_SURFACE3D:37,OBJECT_TYPE_MEASUREMENT:38,OBJECT_TYPE_INTERSECTION_LINE3D:39,OBJECT_TYPE_SPHERE3D:40,OBJECT_TYPE_CIRCLE3D:41,OBJECT_TYPE_INTERSECTION_CIRCLE3D:42,OBJECT_TYPE_TEXT3D:43,OBJECT_TYPE_FACE3D:44,OBJECT_TYPE_POLYHEDRON3D:45,OBJECT_TYPE_POLYGON3D:46,OBJECT_CLASS_POINT:1,OBJECT_CLASS_LINE:2,OBJECT_CLASS_CIRCLE:3,OBJECT_CLASS_CURVE:4,OBJECT_CLASS_AREA:5,OBJECT_CLASS_OTHER:6,OBJECT_CLASS_TEXT:7,OBJECT_CLASS_3D:8};JXG$1.extendConstants(JXG$1,constants);const Const=constants;var undef,memoizer=function(t){var r,a;return t.memo||(r={},a=Array.prototype.join,t.memo=function(){var n=a.call(arguments);return r[n]!==undef?r[n]:r[n]=t.apply(this,arguments)}),t.memo};JXG$1.Math={eps:1e-6,relDif:function(t,r){var a=Math.abs(t),n=Math.abs(r);return n=Math.max(a,n),n===0?0:Math.abs(t-r)/n},mod:function(t,r){return t-Math.floor(t/r)*r},wrap:function(t,r,a){return r+this.mod(t-r,a-r)},clamp:function(t,r,a){return Math.min(Math.max(t,r),a)},wrapAndClamp:function(t,r,a,n){var s=.5*(r+a),o=.5*n;return this.clamp(this.wrap(t,s-o,s+o),r,a)},vector:function(t,r){var a,n;for(r=r||0,a=[],n=0;n<t;n++)a[n]=r;return a},matrix:function(t,r,a){var n,s,o;for(a=a||0,r=r||t,n=[],s=0;s<t;s++)for(n[s]=[],o=0;o<r;o++)n[s][o]=a;return n},identity:function(t,r){var a,n;for(r===undef&&typeof r!="number"&&(r=t),a=this.matrix(t,r),n=0;n<Math.min(t,r);n++)a[n][n]=1;return a},frustum:function(t,r,a,n,s,o){var l=this.matrix(4,4);return l[0][0]=s*2/(r-t),l[0][1]=0,l[0][2]=(r+t)/(r-t),l[0][3]=0,l[1][0]=0,l[1][1]=s*2/(n-a),l[1][2]=(n+a)/(n-a),l[1][3]=0,l[2][0]=0,l[2][1]=0,l[2][2]=-(o+s)/(o-s),l[2][3]=-(o*s*2)/(o-s),l[3][0]=0,l[3][1]=0,l[3][2]=-1,l[3][3]=0,l},projection:function(t,r,a,n){var s=a*Math.tan(t/2),o=s*r;return this.frustum(-o,o,-s,s,a,n)},matVecMult:function(t,r){var a,n,s,o=t.length,l=r.length,u=[];if(l===3)for(a=0;a<o;a++)u[a]=t[a][0]*r[0]+t[a][1]*r[1]+t[a][2]*r[2];else for(a=0;a<o;a++){for(s=0,n=0;n<l;n++)s+=t[a][n]*r[n];u[a]=s}return u},vecMatMult:function(t,r){var a,n,s,o=r.length,l=t.length,u=[];if(l===3)for(a=0;a<o;a++)u[a]=t[0]*r[0][a]+t[1]*r[1][a]+t[2]*r[2][a];else for(a=0;a<l;a++){for(s=0,n=0;n<o;n++)s+=t[n]*r[n][a];u[a]=s}return u},matMatMult:function(t,r){var a,n,s,o,l=t.length,u=l>0?r[0].length:0,h=r.length,c=this.matrix(l,u);for(a=0;a<l;a++)for(n=0;n<u;n++){for(s=0,o=0;o<h;o++)s+=t[a][o]*r[o][n];c[a][n]=s}return c},matNumberMult:function(t,r){var a,n,s=t.length,o=s>0?t[0].length:0,l=this.matrix(s,o);for(a=0;a<s;a++)for(n=0;n<o;n++)l[a][n]=t[a][n]*r;return l},matMatAdd:function(t,r){var a,n,s=t.length,o=s>0?t[0].length:0,l=this.matrix(s,o);for(a=0;a<s;a++)for(n=0;n<o;n++)l[a][n]=t[a][n]+r[a][n];return l},transpose:function(t){var r,a,n,s,o;for(s=t.length,o=t.length>0?t[0].length:0,r=this.matrix(o,s),a=0;a<o;a++)for(n=0;n<s;n++)r[a][n]=t[n][a];return r},inverse:function(t){var r,a,n,s,o,l=this.eps*this.eps,u,h,c=t.length,f=[],d=[],p=[];for(r=0;r<c;r++){for(f[r]=[],a=0;a<c;a++)f[r][a]=t[r][a];d[r]=r}for(a=0;a<c;a++){for(u=Math.abs(f[a][a]),s=a,r=a+1;r<c;r++)Math.abs(f[r][a])>u&&(u=Math.abs(f[r][a]),s=r);if(u<=l)return JXG$1.warn("JXG.Math.inverse: singular matrix"),[];if(s>a){for(n=0;n<c;n++)h=f[a][n],f[a][n]=f[s][n],f[s][n]=h;h=d[a],d[a]=d[s],d[s]=h}for(o=1/f[a][a],r=0;r<c;r++)f[r][a]*=o;for(f[a][a]=o,n=0;n<c;n++)if(n!==a){for(r=0;r<c;r++)r!==a&&(f[r][n]-=f[r][a]*f[a][n]);f[a][n]=-o*f[a][n]}}for(r=0;r<c;r++){for(n=0;n<c;n++)p[d[n]]=f[r][n];for(n=0;n<c;n++)f[r][n]=p[n]}return f},trace:function(t){var r,a,n,s=0;if(a=t.length,n=t.length>0?t[0].length:0,a!==n)return NaN;for(r=0;r<n;r++)s+=t[r][r];return s},innerProduct:function(t,r,a){var n,s=0;for((a===undef||!JXG$1.isNumber(a))&&(a=t.length),n=0;n<a;n++)s+=t[n]*r[n];return s},crossProduct:function(t,r){return[t[1]*r[2]-t[2]*r[1],t[2]*r[0]-t[0]*r[2],t[0]*r[1]-t[1]*r[0]]},norm:function(t,r){var a,n=0;for((r===undef||!JXG$1.isNumber(r))&&(r=t.length),a=0;a<r;a++)n+=t[a]*t[a];return Math.sqrt(n)},axpy:function(t,r,a){var n,s=r.length,o=[];for(n=0;n<s;n++)o[n]=t*r[n]+a[n];return o},factorial:memoizer(function(t){return t<0?NaN:(t=Math.floor(t),t===0||t===1?1:t*this.factorial(t-1))}),binomial:memoizer(function(t,r){var a,n;if(r>t||r<0)return NaN;if(r=Math.round(r),t=Math.round(t),r===0||r===t)return 1;for(a=1,n=0;n<r;n++)a*=t-n,a/=n+1;return a}),cosh:Math.cosh||function(t){return(Math.exp(t)+Math.exp(-t))*.5},sinh:Math.sinh||function(t){return(Math.exp(t)-Math.exp(-t))*.5},acosh:Math.acosh||function(t){return Math.log(t+Math.sqrt(t*t-1))},asinh:Math.asinh||function(t){return t===-1/0?t:Math.log(t+Math.sqrt(t*t+1))},cot:function(t){return 1/Math.tan(t)},acot:function(t){return(t>=0?.5:-.5)*Math.PI-Math.atan(t)},nthroot:function(t,r){var a=1/r;return r<=0||Math.floor(r)!==r?NaN:t===0?0:t>0?Math.exp(a*Math.log(t)):r%2===1?-Math.exp(a*Math.log(-t)):NaN},cbrt:Math.cbrt||function(t){return this.nthroot(t,3)},pow:function(t,r){return t===0?r===0?1:0:Math.floor(r)===r?Math.pow(t,r):t>0?Math.exp(r*Math.log(t)):NaN},ratpow:function(t,r,a){var n;return r===0?1:a===0?NaN:(n=this.gcd(r,a),this.nthroot(this.pow(t,r/n),a/n))},log10:function(t){return Math.log(t)/Math.log(10)},log2:function(t){return Math.log(t)/Math.log(2)},log:function(t,r){return r!==void 0&&JXG$1.isNumber(r)?Math.log(t)/Math.log(r):Math.log(t)},sign:Math.sign||function(t){return t=+t,t===0||isNaN(t)?t:t>0?1:-1},squampow:function(t,r){var a;if(Math.floor(r)===r){for(a=1,r<0&&(t=1/t,r*=-1);r!==0;)r&1&&(a*=t),r>>=1,t*=t;return a}return this.pow(t,r)},gcd:function(t,r){var a,n=!0;if(t=Math.abs(t),r=Math.abs(r),!(JXG$1.isNumber(t)&&JXG$1.isNumber(r)))return NaN;for(r>t&&(a=t,t=r,r=a);n;){if(t%=r,t===0)return r;if(r%=t,r===0)return t}},lcm:function(t,r){var a;return JXG$1.isNumber(t)&&JXG$1.isNumber(r)?(a=t*r,a!==0?a/this.gcd(t,r):0):NaN},roundToStep:function(t,r,a,n){var s=t,o,l;if(!JXG$1.exists(r)&&!JXG$1.exists(a)&&!JXG$1.exists(n))return s;if(JXG$1.exists(n)&&(s=Math.min(s,n)),JXG$1.exists(a)&&(s=Math.max(s,a)),l=a||0,JXG$1.exists(r)){if(o=(s-l)/r,Number.isInteger(o))return s;o=Math.round(o),s=l+o*r}return JXG$1.exists(n)&&(s=Math.min(s,n)),JXG$1.exists(a)&&(s=Math.max(s,a)),s},erf:function(t){return this.ProbFuncs.erf(t)},erfc:function(t){return this.ProbFuncs.erfc(t)},erfi:function(t){return this.ProbFuncs.erfi(t)},ndtr:function(t){return this.ProbFuncs.ndtr(t)},ndtri:function(t){return this.ProbFuncs.ndtri(t)},hypot:function(){var t,r,a,n;for(r=arguments.length,t=0,n=0;t<r;t++)a=arguments[t],n+=a*a;return Math.sqrt(n)},hstep:function(t){return t>0?1:t<0?0:.5},gamma:function(t){var r,a,n,s,o,l=7,u=[1,676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9984369578019572e-21,15056327351493116e-23];if(t<.5)a=Math.PI/(Math.sin(Math.PI*t)*this.gamma(1-t));else{for(t-=1,r=u[0],o=u.length,s=1;s<o;s++)r+=u[s]/(t+s);n=t+l+.5,a=Math.sqrt(2*Math.PI)*Math.pow(n,t+.5)*Math.exp(-n)*r}return a},lt:function(t,r){return t<r},leq:function(t,r){return t<=r},gt:function(t,r){return t>r},geq:function(t,r){return t>=r},eq:function(t,r){return t===r},neq:function(t,r){return t!==r},and:function(t,r){return t&&r},not:function(t){return!t},or:function(t,r){return t||r},xor:function(t,r){return(t||r)&&!(t&&r)},decToFraction:function(t,r){var a,n,s,o,l,u,h,c,f,d=0,p=20;for(r=JXG$1.def(r,.001),t=Math.round(t*1e12)*1e-12,n=t<0?-1:1,t=Math.abs(t),a=Math.floor(t),t-=Math.floor(t),s=0,u=1,o=l=s,f=0,h=c=1;t-Math.floor(t)>r&&d<p;)t=1/(t-s),s=Math.floor(t),o=u+s*l,h=f+s*c,u=l,f=c,l=o,c=h,d++;return[n,a,o,h]},normalize:function(t){var r,a,n=2*t[3],s=t[4]/n;return t[5]=s,t[6]=-t[1]/n,t[7]=-t[2]/n,isFinite(s)?Math.abs(s)>=1?(t[0]=(t[6]*t[6]+t[7]*t[7]-s*s)/(2*s),t[1]=-t[6]/s,t[2]=-t[7]/s,t[3]=1/(2*s),t[4]=1):(a=s<=0?-1:1,t[0]=a*(t[6]*t[6]+t[7]*t[7]-s*s)*.5,t[1]=-a*t[6],t[2]=-a*t[7],t[3]=a/2,t[4]=a*s):(r=this.hypot(t[1],t[2]),t[0]/=r,t[1]/=r,t[2]/=r,t[3]=0,t[4]=1),t},toGL:function(t){var r,a,n;if(typeof Float32Array=="function"?r=new Float32Array(16):r=new Array(16),t.length!==4&&t[0].length!==4)return r;for(a=0;a<4;a++)for(n=0;n<4;n++)r[a+4*n]=t[a][n];return r},Vieta:function(t){var r=t.length,a=[],n,s,o;for(a=t.slice(),n=1;n<r;++n){for(o=a[n],a[n]*=a[n-1],s=n-1;s>=1;--s)a[s]+=a[s-1]*o;a[0]+=o}return a}};const Mat=JXG$1.Math;JXG$1.extend(JXG$1,{isBoard:function(t){return t!==null&&typeof t=="object"&&this.isNumber(t.BOARD_MODE_NONE)&&this.isObject(t.objects)&&this.isObject(t.jc)&&this.isFunction(t.update)&&!!t.containerObj&&this.isString(t.id)},isId:function(t,r){return typeof r=="string"&&!!t.objects[r]},isName:function(t,r){return typeof r=="string"&&!!t.elementsByName[r]},isGroup:function(t,r){return typeof r=="string"&&!!t.groups[r]},isString:function(t){return typeof t=="string"},isNumber:function(t,r,a){var n=typeof t=="number"||Object.prototype.toString.call(t)==="[Object Number]";return r=r||!1,a=a===void 0?!0:a,r&&(n=n||""+parseFloat(t)===t),a||(n=n&&!isNaN(t)),n},isFunction:function(t){return typeof t=="function"},isArray:function(t){var r;return Array.isArray?r=Array.isArray(t):r=t!==null&&typeof t=="object"&&typeof t.splice=="function"&&typeof t.join=="function",r},isObject:function(t){return typeof t=="object"&&!this.isArray(t)},isDocumentOrFragment:function(t){return this.isObject(t)&&(t.nodeType===9||t.nodeType===11)},isPoint:function(t){return t!==null&&typeof t=="object"&&this.exists(t.elementClass)?t.elementClass===Const.OBJECT_CLASS_POINT:!1},isPoint3D:function(t){return t!==null&&typeof t=="object"&&this.exists(t.type)?t.type===Const.OBJECT_TYPE_POINT3D:!1},isPointType:function(t,r){var a,n;return this.isArray(r)||this.isFunction(r)&&(a=r(),this.isArray(a)&&a.length>1)?!0:(n=t.select(r),this.isPoint(n))},isPointType3D:function(t,r){var a,n;return this.isArray(r)&&r.length>=3||this.isFunction(r)&&(a=r(),this.isArray(a)&&a.length>=3)?!0:(n=t.select(r),this.isPoint3D(n))},isTransformationOrArray:function(t){if(t!==null){if(this.isArray(t)&&t.length>0)return this.isTransformationOrArray(t[0]);if(typeof t=="object")return t.type===Const.OBJECT_TYPE_TRANSFORMATION}return!1},isEmpty:function(t){return Object.keys(t).length===0},exists:function(t,r){var a=!(t==null||t===null);return r=r||!1,r?a&&t!=="":a},def:function(t,r){return this.exists(t)?t:r},str2Bool:function(t){return this.exists(t)?typeof t=="boolean"?t:this.isString(t)?t.toLowerCase()==="true":!1:!0},cssParse:function(t){var r=t;return this.isString(r)?(r=r.replace(/\s*;\s*$/g,""),r=r.replace(/\s*;\s*/g,'","'),r=r.replace(/\s*:\s*/g,'":"'),r=r.trim(),r='{"'+r+'"}',JSON.parse(r)):{}},cssStringify:function(t){var r="",a,n;if(!this.isObject(t))return"";for(a in t)t.hasOwnProperty(a)&&(n=t[a],!(!this.isString(n)&&!this.isNumber(n))&&(r+=a+":"+n+"; "));return r=r.trim(),r},createEvalFunction:function(t,r,a){var n=[],s,o,l,u={};for(o=0;o<a;o++){n[o]=this.createFunction(r[o],t);for(l in n[o].deps)u[l]=n[o].deps}return s=function(h){return n[h]()},s.deps=u,s},createFunction:function(t,r,a,n){var s=null;return this.isString(t)?s=r.jc.snippet(t,!0,a,!1):this.isFunction(t)?(s=t,s.deps=this.isObject(t.deps)?t.deps:{}):(this.isNumber(t)||this.isArray(t))&&(s=function(){return t},s.deps={}),s!==null&&(s.origin=t),s},providePoints:function(t,r,a,n,s){var o,l,u,h=0,c=[],f,d;for(this.isArray(r)||(r=[r]),u=r.length,this.exists(s)&&(h=s.length),h===0&&(f=this.copyAttributes(a,t.options,n)),o=0;o<u;++o)if(h>0&&(l=Math.min(o,h-1),f=this.copyAttributes(a,t.options,n,s[l].toLowerCase())),this.isArray(r[o])&&r[o].length>1?(c.push(t.create("point",r[o],f)),c[c.length-1]._is_new=!0):this.isFunction(r[o])?(d=r[o](),this.isArray(d)&&d.length>1&&(c.push(t.create("point",[r[o]],f)),c[c.length-1]._is_new=!0)):c.push(t.select(r[o])),!this.isPoint(c[o]))return!1;return c},providePoints3D:function(t,r,a,n,s){var o,l,u,h=0,c=[],f,d;for(this.isArray(r)||(r=[r]),u=r.length,this.exists(s)&&(h=s.length),h===0&&(f=this.copyAttributes(a,t.board.options,n)),o=0;o<u;++o){if(h>0&&(l=Math.min(o,h-1),f=this.copyAttributes(a,t.board.options,n,s[l])),this.isArray(r[o])&&r[o].length>0&&r[o].every(p=>this.isArray(p)&&this.isNumber(p[0])))for(l=0;l<r[o].length;l++)c.push(t.create("point3d",r[o][l],f)),c[c.length-1]._is_new=!0;else this.isArray(r[o])&&r[o].every(p=>this.isNumber(p)||this.isFunction(p))?(c.push(t.create("point3d",r[o],f)),c[c.length-1]._is_new=!0):this.isPoint3D(r[o])?c.push(r[o]):this.isFunction(r[o])?(d=r[o](),this.isArray(d)&&d.length>1&&(c.push(t.create("point3d",[r[o]],f)),c[c.length-1]._is_new=!0)):c.push(t.select(r[o]));if(!this.isPoint3D(c[o]))return!1}return c},bind:function(t,r){return function(){return t.apply(r,arguments)}},evaluate:function(t){return this.isFunction(t)?t():t},indexOf:function(t,r,a){var n,s=this.exists(a);if(Array.indexOf&&!s)return t.indexOf(r);for(n=0;n<t.length;n++)if(s&&t[n][a]===r||!s&&t[n]===r)return n;return-1},eliminateDuplicates:function(t){var r,a=t.length,n=[],s={};for(r=0;r<a;r++)s[t[r]]=0;for(r in s)s.hasOwnProperty(r)&&n.push(r);return n},swap:function(t,r,a){var n;return n=t[r],t[r]=t[a],t[a]=n,t},uniqueArray:function(t){var r,a,n,s=[];if(t.length===0)return[];for(r=0;r<t.length;r++){if(n=this.isArray(t[r]),!this.exists(t[r])){t[r]="";continue}for(a=r+1;a<t.length;a++)n&&JXG$1.cmpArrays(t[r],t[a])?t[r]=[]:!n&&t[r]===t[a]&&(t[r]="")}for(a=0,r=0;r<t.length;r++)n=this.isArray(t[r]),!n&&t[r]!==""?(s[a]=t[r],a++):n&&t[r].length!==0&&(s[a]=t[r].slice(0),a++);return t=s,s},toUniqueArrayFloat:function(t,r){var a,n,s;for(a=t.slice(),a.sort(function(o,l){return o-l}),s=a.length,n=s-1;n>0;n--)Math.abs(a[n]-a[n-1])<r&&a.splice(n,1);return a},isInArray:function(t,r){return JXG$1.indexOf(t,r)>-1},coordsArrayToMatrix:function(t,r){var a,n=[],s=[];for(a=0;a<t.length;a++)r?(n.push(t[a].usrCoords[1]),s.push(t[a].usrCoords[2])):s.push([t[a].usrCoords[1],t[a].usrCoords[2]]);return r&&(s=[n,s]),s},cmpArrays:function(t,r){var a;if(t===r)return!0;if(t.length!==r.length)return!1;for(a=0;a<t.length;a++)if(this.isArray(t[a])&&this.isArray(r[a])){if(!this.cmpArrays(t[a],r[a]))return!1}else if(t[a]!==r[a])return!1;return!0},removeElementFromArray:function(t,r){var a;for(a=0;a<t.length;a++)if(t[a]===r)return t.splice(a,1),t;return t},trunc:function(t,r){return r=JXG$1.def(r,0),this.toFixed(t,r)},_decimalAdjust:function(t,r,a){return a===void 0||+a==0?Math[t](r):(r=+r,a=+a,isNaN(r)||!(typeof a=="number"&&a%1===0)?NaN:(r=r.toString().split("e"),r=Math[t](+(r[0]+"e"+(r[1]?+r[1]-a:-a))),r=r.toString().split("e"),+(r[0]+"e"+(r[1]?+r[1]+a:a))))},_round10:function(t,r){return this._decimalAdjust("round",t,r)},_floor10:function(t,r){return this._decimalAdjust("floor",t,r)},_ceil10:function(t,r){return this._decimalAdjust("ceil",t,r)},toFixed:function(t,r){return this._round10(t,-r).toFixed(r)},autoDigits:function(t){var r=Math.abs(t),a;return r>=.1?a=this.toFixed(t,2):r>=.01?a=this.toFixed(t,4):r>=1e-4?a=this.toFixed(t,6):a=t,a},parseNumber:function(t,r,a){var n;return this.isString(t)&&t.indexOf("%")>-1?(n=t.replace(/\s+%\s+/,""),parseFloat(n)*r*.01):this.isString(t)&&t.indexOf("fr")>-1?(n=t.replace(/\s+fr\s+/,""),parseFloat(n)*r):this.isString(t)&&t.indexOf("px")>-1?(n=t.replace(/\s+px\s+/,""),n=parseFloat(n),this.isFunction(a)?a(n):this.isNumber(a)?n*a:n):parseFloat(t)},parsePosition:function(t){var r,a,n="",s="";if(t=t.trim(),t!=="")for(r=t.split(/[ ,]+/),a=0;a<r.length;a++)r[a]==="left"||r[a]==="right"?n=r[a]:s=r[a];return{side:n,pos:s}},keys:function(t,r){var a=[],n;for(n in t)r?t.hasOwnProperty(n)&&a.push(n):a.push(n);return a},clone:function(t){var r={};return r.prototype=t,r},cloneAndCopy:function(t,r){var a,n=function(){};n.prototype=t;for(a in r)n[a]=r[a];return n},merge:function(t,r){var a,n,s,o;for(a in r)if(r.hasOwnProperty(a))if(s=r[a],this.isArray(s))for(t[a]||(t[a]=[]),n=0;n<s.length;n++)o=r[a][n],typeof r[a][n]=="object"?t[a][n]=this.merge(t[a][n],o):t[a][n]=r[a][n];else typeof s=="object"?(t[a]||(t[a]={}),t[a]=this.merge(t[a],s)):(typeof t=="boolean"&&(t={}),t[a]=s);return t},deepCopy:function(t,r,a){var n,s,o,l;if(a=a||!1,typeof t!="object"||t===null)return t;if(this.isArray(t))for(n=[],s=0;s<t.length;s++)o=t[s],o!==null&&typeof o=="object"?this.exists(o.board)?n[s]=o.id:n[s]=this.deepCopy(o,{},a):n[s]=o;else{n={};for(s in t)t.hasOwnProperty(s)&&(l=a?s.toLowerCase():s,o=t[s],o!==null&&typeof o=="object"?this.exists(o.board)?n[l]=o.id:n[l]=this.deepCopy(o,{},a):n[l]=o);for(s in r)r.hasOwnProperty(s)&&(l=a?s.toLowerCase():s,o=r[s],o!==null&&typeof o=="object"?this.isArray(o)||!this.exists(n[l])?n[l]=this.deepCopy(o,{},a):n[l]=this.deepCopy(n[l],o,a):n[l]=o)}return n},mergeAttr:function(t,r,a,n){var s,o,l;a=a||!0,n=n||!1;for(s in r)r.hasOwnProperty(s)&&(o=a?s.toLowerCase():s,o!==s&&t.hasOwnProperty(s)&&(t.hasOwnProperty(o)?this.mergeAttr(t[o],t[s],a):t[o]=t[s],delete t[s]),l=r[s],this.isObject(l)&&l!==null&&!this.isDocumentOrFragment(l)&&!this.exists(l.board)&&typeof l.valueOf()!="string"?((t[o]===void 0||t[o]===null||!this.isObject(t[o]))&&(t[o]={}),this.mergeAttr(t[o],l,a)):(!n||this.exists(l))&&(t[o]=l))},keysToLowerCase:function(t){var r,a,n=Object.keys(t),s=n.length,o={};if(typeof t!="object")return t;for(;s--;)r=n[s],t.hasOwnProperty(r)&&(a=t[r],typeof a=="object"&&a!==null&&!this.isArray(a)&&!this.exists(a.nodeType)&&!this.exists(a.board)?o[r.toLowerCase()]=this.keysToLowerCase(a):o[r.toLowerCase()]=a);return o},copyAttributes:function(t,r,a){var n,s,o,l,u,h,c={circle:1,curve:1,foreignobject:1,image:1,line:1,point:1,polygon:1,text:1,ticks:1,integral:1};for(l=arguments.length,l<3||c[a]?n=JXG$1.deepCopy(r.elements,null,!0):n={},l<4&&this.exists(a)&&this.exists(r.layer[a])&&(n.layer=r.layer[a]),u=r,h=!0,o=2;o<l;o++)if(s=arguments[o],this.exists(u[s]))u=u[s];else{h=!1;break}for(h&&(n=JXG$1.deepCopy(n,u,!0)),u=typeof t=="object"?this.keysToLowerCase(t):{},h=!0,o=3;o<l;o++)if(s=arguments[o].toLowerCase(),this.exists(u[s]))u=u[s];else{h=!1;break}if(h&&this.mergeAttr(n,u,!0),arguments[2]==="board")return n;for(u=r,h=!0,o=2;o<l;o++)if(s=arguments[o],this.exists(u[s]))u=u[s];else{h=!1;break}return h&&this.exists(u.label)&&(n.label=JXG$1.deepCopy(u.label,n.label,!0)),n.label=JXG$1.deepCopy(r.label,n.label,!0),n},copyPrototypeMethods:function(t,r,a){var n;t.prototype[a]=r.prototype.constructor;for(n in r.prototype)r.prototype.hasOwnProperty(n)&&(t.prototype[n]=r.prototype[n])},getCloneObject:function(t){var r,a,n={};n.id=t.id+"T"+t.numTraces,t.numTraces+=1,n.coords=t.coords,r=this.deepCopy(t.visProp,t.visProp.traceattributes,!0),n.visProp={};for(a in r)r.hasOwnProperty(a)&&a.indexOf("aria")!==0&&a.indexOf("highlight")!==0&&a.indexOf("attractor")!==0&&a!=="label"&&a!=="needsregularupdate"&&a!=="infoboxdigits"&&(n.visProp[a]=t.eval(r[a]));return n.evalVisProp=function(s){return n.visProp[s]},n.eval=function(s){return s},n.visProp.layer=t.board.options.layer.trace,n.visProp.tabindex=null,n.visProp.highlight=!1,n.board=t.board,n.elementClass=t.elementClass,this.clearVisPropOld(n),n.visPropCalc={visible:t.evalVisProp("visible")},n},toJSON:function(t,r){var a,n,s,o,l;if(r=JXG$1.def(r,!1),JSON!==void 0&&JSON.stringify&&!r)try{return o=JSON.stringify(t),o}catch{}switch(typeof t){case"object":if(t){if(a=[],this.isArray(t)){for(s=0;s<t.length;s++)a.push(JXG$1.toJSON(t[s],r));return"["+a.join(",")+"]"}for(n in t)if(t.hasOwnProperty(n)){try{l=JXG$1.toJSON(t[n],r)}catch{l=""}r?a.push(n+":"+l):a.push('"'+n+'":'+l)}return"{"+a.join(",")+"} "}return"null";case"string":return"'"+t.replace(/(["'])/g,"\\$1")+"'";case"number":case"boolean":return t.toString()}return"0"},clearVisPropOld:function(t){return t.visPropOld={cssclass:"",cssdefaultstyle:"",cssstyle:"",fillcolor:"",fillopacity:"",firstarrow:!1,fontsize:-1,lastarrow:!1,left:-1e5,linecap:"",shadow:!1,strokecolor:"",strokeopacity:"",strokewidth:"",tabindex:-1e5,transitionduration:0,top:-1e5,visible:null},t},isInObject:function(t,r){var a;for(a in t)if(t.hasOwnProperty(a)&&t[a]===r)return!0;return!1},escapeHTML:function(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},unescapeHTML:function(t){return t.replace(/<\/?[^>]+>/gi,"").replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">")},capitalize:function(t){return t.charAt(0).toUpperCase()+t.substring(1).toLowerCase()},trimNumber:function(t){return t=t.replace(/^0+/,""),t=t.replace(/0+$/,""),(t[t.length-1]==="."||t[t.length-1]===",")&&(t=t.slice(0,-1)),(t[0]==="."||t[0]===",")&&(t="0"+t),t},filterElements:function(t,r){var a,n,s,o,l,u,h,c=t.length,f=[];if(this.exists(r)&&typeof r!="function"&&typeof r!="object")return f;for(a=0;a<c;a++){if(h=!0,s=t[a],typeof r=="object"){for(n in r)if(r.hasOwnProperty(n)&&(o=n.toLowerCase(),typeof s[n]=="function"?l=s[n]():l=s[n],s.visProp&&typeof s.visProp[o]=="function"?u=s.visProp[o]():u=s.visProp&&s.visProp[o],typeof r[n]=="function"?h=r[n](l)||r[n](u):h=l===r[n]||u===r[n],!h))break}else typeof r=="function"&&(h=r(s));h&&f.push(s)}return f},trim:function(t){return t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},toFraction:function(t,r,a){var n=Mat.decToFraction(t,a),s="";return n[1]===0&&n[2]===0?s+="0":(n[0]<0&&(s+="-"),n[2]===0?s+=n[1]:n[2]===1&&n[3]===1||(n[1]!==0&&(s+=n[1]+" "),r===!0?s+="\\frac{"+n[2]+"}{"+n[3]+"}":s+=n[2]+"/"+n[3])),s},concat:function(t,r){var a,n=r.length;for(a=0;a<n;a++)t.push(r[a]);return t},sanitizeHTML:function(t,r){return typeof html_sanitize=="function"&&r?html_sanitize(t,function(){},function(a){return a}):(t&&typeof t=="string"&&(t=t.replace(/</g,"&lt;").replace(/>/g,"&gt;")),t)},evalSlider:function(t){return t&&t.type===Const.OBJECT_TYPE_GLIDER&&typeof t.Value=="function"?t.Value():t},stack2jsxgraph:function(t){var r;return r=t.replace(/%pi/g,"PI").replace(/%e/g,"EULER").replace(/%phi/g,"1.618033988749895").replace(/%gamma/g,"0.5772156649015329").trim(),r[0]==="["&&r[r.length-1]==="]"&&(r=r.slice(1,-1).split(/\s*,\s*/)),r}});JXG$1.extendConstants(JXG$1,{});JXG$1.extend(JXG$1,{isTouchEvent:function(t){return JXG$1.exists(t.touches)},isPointerEvent:function(t){return JXG$1.exists(t.pointerId)},isMouseEvent:function(t){return!JXG$1.isTouchEvent(t)&&!JXG$1.isPointerEvent(t)},getNumberOfTouchPoints:function(t){var r=-1;return JXG$1.isTouchEvent(t)&&(r=t.touches.length),r},isFirstTouch:function(t){var r=JXG$1.getNumberOfTouchPoints(t);return JXG$1.isPointerEvent(t)?t.isPrimary:r===1},isBrowser:JXG$1.exists(window)&&JXG$1.exists(document)&&typeof window=="object"&&typeof document=="object",supportsES6:function(){try{return new Function("(a = 0) => a"),!0}catch{return!1}},supportsVML:function(){return this.isBrowser&&!!document.namespaces},supportsSVG:function(){var t;return this.isBrowser?(t=!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect,t):!1},supportsCanvas:function(){var t=!1;return this.isNode()&&(t=!0),t||this.isBrowser&&!!document.createElement("canvas").getContext},isNode:function(){return!this.isBrowser&&typeof process<"u"&&process.release.name.search(/node|io.js/)!==-1},isWebWorker:function(){return!this.isBrowser&&typeof self=="object"&&typeof self.postMessage=="function"},supportsPointerEvents:function(){return!!(this.isBrowser&&window.navigator&&(window.PointerEvent||window.navigator.pointerEnabled||window.navigator.msPointerEnabled))},isTouchDevice:function(){return this.isBrowser&&window.ontouchstart!==void 0},isAndroid:function(){return JXG$1.exists(navigator)&&navigator.userAgent.toLowerCase().indexOf("android")>-1},isWebkitAndroid:function(){return this.isAndroid()&&navigator.userAgent.indexOf(" AppleWebKit/")>-1},isApple:function(){return JXG$1.exists(navigator)&&(navigator.userAgent.indexOf("iPad")>-1||navigator.userAgent.indexOf("iPhone")>-1)},isWebkitApple:function(){return this.isApple()&&navigator.userAgent.search(/Mobile\/[0-9A-Za-z.]*Safari/)>-1},isMetroApp:function(){return typeof window=="object"&&window.clientInformation&&window.clientInformation.appVersion&&window.clientInformation.appVersion.indexOf("MSAppHost")>-1},isMozilla:function(){return JXG$1.exists(navigator)&&navigator.userAgent.toLowerCase().indexOf("mozilla")>-1&&navigator.userAgent.toLowerCase().indexOf("apple")===-1},isFirefoxOS:function(){return JXG$1.exists(navigator)&&navigator.userAgent.toLowerCase().indexOf("android")===-1&&navigator.userAgent.toLowerCase().indexOf("apple")===-1&&navigator.userAgent.toLowerCase().indexOf("mobile")>-1&&navigator.userAgent.toLowerCase().indexOf("mozilla")>-1},isDesktop:function(){return!0},isMobile:function(){return!0},ieVersion:(function(){var t,r,a=3;if(document===null||typeof document!="object")return 0;t=document.createElement("div"),r=t.getElementsByTagName("i");do t.innerHTML="<!--[if gt IE "+ ++a+"]><i></i><![endif]-->";while(r[0]);return a>4?a:void 0})(),getDimensions:function(t,r){var a,n,s,o,l,u,h,c,f,d=/\d+(\.\d*)?px/;if(!this.isBrowser||t===null)return{width:500,height:500};if(r=r||document,a=JXG$1.isString(t)?r.getElementById(t):t,!JXG$1.exists(a))throw new Error(`
JSXGraph: HTML container element '`+t+"' not found.");return n=a.style.display,n!=="none"&&n!==null?a.clientWidth>0&&a.clientHeight>0?{width:a.clientWidth,height:a.clientHeight}:(f=window.getComputedStyle?window.getComputedStyle(a):a.style,{width:d.test(f.width)?parseFloat(f.width):0,height:d.test(f.height)?parseFloat(f.height):0}):(s=a.style,o=s.visibility,l=s.position,u=s.display,s.visibility="hidden",s.position="absolute",s.display="block",h=a.clientWidth,c=a.clientHeight,s.display=u,s.position=l,s.visibility=o,{width:h,height:c})},addEvent:function(t,r,a,n,s){var o=function(){return a.apply(n,arguments)};o.origin=a,typeof n=="object"&&JXG$1.exists(n.BOARD_MODE_NONE)&&(n["x_internal"+r]=n["x_internal"+r]||[],n["x_internal"+r].push(o)),JXG$1.exists(t)&&JXG$1.exists(t.addEventListener)&&(s=s||!1,t.addEventListener(r,o,s)),JXG$1.exists(t)&&JXG$1.exists(t.attachEvent)&&t.attachEvent("on"+r,o)},removeEvent:function(t,r,a,n){var s;if(!JXG$1.exists(n)){JXG$1.debug("no such owner");return}if(!JXG$1.exists(n["x_internal"+r])){JXG$1.debug("removeEvent: no such type: "+r);return}if(!JXG$1.isArray(n["x_internal"+r])){JXG$1.debug("owner[x_internal + "+r+"] is not an array");return}if(s=JXG$1.indexOf(n["x_internal"+r],a,"origin"),s===-1){JXG$1.debug("removeEvent: no such event function in internal list: "+a);return}try{JXG$1.exists(t)&&JXG$1.exists(t.removeEventListener)&&t.removeEventListener(r,n["x_internal"+r][s],!1),JXG$1.exists(t)&&JXG$1.exists(t.detachEvent)&&t.detachEvent("on"+r,n["x_internal"+r][s])}catch{JXG$1.debug("removeEvent: event not registered in browser: ("+r+" -- "+a+")")}n["x_internal"+r].splice(s,1)},removeAllEvents:function(t,r,a){var n,s;if(a["x_internal"+r]){for(s=a["x_internal"+r].length,n=s-1;n>=0;n--)JXG$1.removeEvent(t,r,a["x_internal"+r][n].origin,a);a["x_internal"+r].length>0&&JXG$1.debug("removeAllEvents: Not all events could be removed.")}},getPosition:function(t,r,a){var n,s,o,l=0,u=0;if(t||(t=window.event),o=t.touches,JXG$1.exists(o)&&o.length===0&&(o=t.changedTouches),JXG$1.exists(r)&&JXG$1.exists(o))if(r===-1){for(s=o.length,n=0;n<s;n++)if(o[n]){t=o[n];break}}else t=o[r];return t.clientX&&(l=t.clientX,u=t.clientY),[l,u]},getOffset:function(t){var r,a=t,n=t,s=a.offsetLeft-a.scrollLeft,o=a.offsetTop-a.scrollTop;for(r=this.getCSSTransform([s,o],a),s=r[0],o=r[1],a=a.offsetParent;a;){for(s+=a.offsetLeft,o+=a.offsetTop,a.offsetParent&&(s+=a.clientLeft-a.scrollLeft,o+=a.clientTop-a.scrollTop),r=this.getCSSTransform([s,o],a),s=r[0],o=r[1],n=n.parentNode;n!==a;)s+=n.clientLeft-n.scrollLeft,o+=n.clientTop-n.scrollTop,r=this.getCSSTransform([s,o],n),s=r[0],o=r[1],n=n.parentNode;a=a.offsetParent}return[s,o]},getStyle:function(t,r){var a,n=t.ownerDocument;return n.defaultView&&n.defaultView.getComputedStyle?a=n.defaultView.getComputedStyle(t,null).getPropertyValue(r):t.currentStyle&&JXG$1.ieVersion>=9?a=t.currentStyle[r]:t.style&&(r=r.replace(/-([a-z]|[0-9])/gi,function(s,o){return o.toUpperCase()}),a=t.style[r]),a},getProp:function(t,r){var a=parseInt(this.getStyle(t,r),10);return isNaN(a)?0:a},getCSSTransform:function(t,r){var a,n,s,o,l,u,h,c,f=["transform","webkitTransform","MozTransform","msTransform","oTransform"];for(u=f.length,a=0,s="";a<u;a++)if(JXG$1.exists(r.style[f[a]])){s=r.style[f[a]];break}if(s!==""&&(l=s.indexOf("("),l>0)){for(u=s.length,o=s.substring(l+1,u-1),c=o.split(","),n=0,h=c.length;n<h;n++)c[n]=parseFloat(c[n]);s.indexOf("matrix")===0?(t[0]+=c[4],t[1]+=c[5]):s.indexOf("translateX")===0?t[0]+=c[0]:s.indexOf("translateY")===0?t[1]+=c[0]:s.indexOf("translate")===0&&(t[0]+=c[0],t[1]+=c[1])}return JXG$1.exists(r.style.zoom)&&(s=r.style.zoom,s!==""&&(t[0]*=parseFloat(s),t[1]*=parseFloat(s))),t},getCSSTransformMatrix:function(t){var r,a,n,s,o,l,u,h,c,f=t.ownerDocument,d=["transform","webkitTransform","MozTransform","msTransform","oTransform"],p=[[1,0,0],[0,1,0],[0,0,1]];if(f.defaultView&&f.defaultView.getComputedStyle)c=f.defaultView.getComputedStyle(t,null),n=c.getPropertyValue("-webkit-transform")||c.getPropertyValue("-moz-transform")||c.getPropertyValue("-ms-transform")||c.getPropertyValue("-o-transform")||c.getPropertyValue("transform");else for(u=d.length,r=0,n="";r<u;r++)if(JXG$1.exists(t.style[d[r]])){n=t.style[d[r]];break}if(n!==""&&(l=n.indexOf("("),l>0)){for(u=n.length,s=n.substring(l+1,u-1),o=s.split(","),a=0,h=o.length;a<h;a++)o[a]=parseFloat(o[a]);n.indexOf("matrix")===0?p=[[1,0,0],[0,o[0],o[1]],[0,o[2],o[3]]]:n.indexOf("scaleX")===0?p[1][1]=o[0]:n.indexOf("scaleY")===0?p[2][2]=o[0]:n.indexOf("scale")===0&&(p[1][1]=o[0],p[2][2]=o[1])}return JXG$1.exists(t.style.zoom)&&(n=t.style.zoom,n!==""&&(p[1][1]*=parseFloat(n),p[2][2]*=parseFloat(n))),p},timedChunk:function(t,r,a,n){var s=t.slice(),o=function(){var l=+new Date;do r.call(a,s.shift());while(s.length>0&&+new Date-l<300);s.length>0?window.setTimeout(o,1):n(t)};window.setTimeout(o,1)},scaleJSXGraphDiv:function(t,r,a,n){var s,o,l,u,h,c,f,d,p,v,y=n,b,_=[":fullscreen",":-webkit-full-screen",":-moz-full-screen",":-ms-fullscreen"],N=_.length,M;for(l=a.getElementById(t).getBoundingClientRect(),o=l.height,s=l.width,d=a.getElementById(r),c=d._cssFullscreenStore.w,f=d._cssFullscreenStore.h,b=f/c,c>s*y&&(c=s*y,f=c*b),f>o*y&&(f=o*y,c=f/b),u=c,h=f,b>1,b<o/s?p=s*y/c:p=o*y/f,v=(o-h)*.5,M=0;M<N;M++)try{d.style.width=u+"px !important",d.style.height=h+"px !important",d.style.margin="0 auto",d.style.transform=d._cssFullscreenStore.transform+" matrix("+p+",0,0,"+p+",0,"+v+")";break}catch(C){JXG$1.debug(`JXG.scaleJSXGraphDiv:
`+C)}M===N&&JXG$1.debug("JXG.scaleJSXGraphDiv: Could not set any CSS property.")}});JXG$1.XML={cleanWhitespace:function(t){for(var r=t.firstChild;JXG$1.exists(r);)r.nodeType===3&&!/\S/.test(r.nodeValue)?t.removeChild(r):r.nodeType===1&&this.cleanWhitespace(r),r=r.nextSibling},parse:function(t){var r,a,n;return typeof DOMParser=="function"||typeof DOMParser=="object"?n=DOMParser:n=function(){this.parseFromString=function(s){var o;return typeof ActiveXObject=="function"&&(o=new ActiveXObject("MSXML.DomDocument"),o.loadXML(s)),o}},r=new n,a=r.parseFromString(t,"text/xml"),this.cleanWhitespace(a),a}};JXG$1.XML;JXG$1.EventEmitter={eventHandlers:{},suspended:{},trigger:function(t,r){var a,n,s,o,l,u;for(l=t.length,n=0;n<l;n++)if(o=this.eventHandlers[t[n]],!this.suspended[t[n]]){if(this.suspended[t[n]]=!0,o)for(u=o.length,a=0;a<u;a++)s=o[a],s.handler.apply(s.context,r);this.suspended[t[n]]=!1}return this},on:function(t,r,a){return JXG$1.isArray(this.eventHandlers[t])||(this.eventHandlers[t]=[]),a=JXG$1.def(a,this),this.eventHandlers[t].push({handler:r,context:a}),this},off:function(t,r){var a;return!t||!JXG$1.isArray(this.eventHandlers[t])?this:(r?(a=JXG$1.indexOf(this.eventHandlers[t],r,"handler"),a>-1&&this.eventHandlers[t].splice(a,1),this.eventHandlers[t].length===0&&delete this.eventHandlers[t]):delete this.eventHandlers[t],this)},eventify:function(t){t.eventHandlers={clicks:0},t.on=this.on,t.off=this.off,t.triggerEventHandlers=this.trigger,t.trigger=this.trigger,t.suspended={}}};const EventEmitter=JXG$1.EventEmitter;JXG$1.Coords=function(t,r,a,n){this.board=a,this.usrCoords=[],this.scrCoords=[],this.emitter=!JXG$1.exists(n)||n,this.emitter&&EventEmitter.eventify(this),this.setCoordinates(t,r,!1,!0)};JXG$1.extend(JXG$1.Coords.prototype,{normalizeUsrCoords:function(){Math.abs(this.usrCoords[0])>Mat.eps&&(this.usrCoords[1]/=this.usrCoords[0],this.usrCoords[2]/=this.usrCoords[0],this.usrCoords[0]=1)},usr2screen:function(t){var r=Math.round,a=this.board,n=this.usrCoords,s=a.origin.scrCoords;t===!0?(this.scrCoords[0]=r(n[0]),this.scrCoords[1]=r(n[0]*s[1]+n[1]*a.unitX),this.scrCoords[2]=r(n[0]*s[2]-n[2]*a.unitY)):(this.scrCoords[0]=n[0],this.scrCoords[1]=n[0]*s[1]+n[1]*a.unitX,this.scrCoords[2]=n[0]*s[2]-n[2]*a.unitY)},screen2usr:function(){var t=this.board.origin.scrCoords,r=this.scrCoords,a=this.board;this.usrCoords[0]=1,this.usrCoords[1]=(r[1]-t[1])/a.unitX,this.usrCoords[2]=(t[2]-r[2])/a.unitY},distance:function(t,r){var a=0,n,s=this.usrCoords,o=this.scrCoords,l;return t===Const.COORDS_BY_USER?(n=r.usrCoords,l=s[0]-n[0],a=l*l,a>Mat.eps*Mat.eps?Number.POSITIVE_INFINITY:Mat.hypot(s[1]-n[1],s[2]-n[2])):(n=r.scrCoords,Mat.hypot(o[1]-n[1],o[2]-n[2]))},setCoordinates:function(t,r,a,n){var s=this.usrCoords,o=this.scrCoords,l=[s[0],s[1],s[2]],u=[o[0],o[1],o[2]];return t===Const.COORDS_BY_USER?(r.length===2?(s[0]=1,s[1]=r[0],s[2]=r[1]):(s[0]=r[0],s[1]=r[1],s[2]=r[2],this.normalizeUsrCoords()),this.usr2screen(a)):(r.length===2?(o[1]=r[0],o[2]=r[1]):(o[1]=r[1],o[2]=r[2]),this.screen2usr()),this.emitter&&!n&&(u[1]!==o[1]||u[2]!==o[2])&&this.triggerEventHandlers(["update"],[l,u]),this},copy:function(t,r){return r===void 0&&(r=0),this[t].slice(r)},isReal:function(){return!isNaN(this.usrCoords[1]+this.usrCoords[2])&&Math.abs(this.usrCoords[0])>Mat.eps},__evt__update:function(t,r){},__evt:function(){}});const Coords=JXG$1.Coords;JXG$1.Expect={each:function(t,r,a){var n,s,o=[];if(JXG$1.exists(t.length))for(s=t.length,n=0;n<s;n++)o.push(r.call(this,t[n],a));return o},coords:function(t,r){var a=t;return t&&t.elementClass===Const.OBJECT_CLASS_POINT?a=t.coords:t.usrCoords&&t.scrCoords&&t.usr2screen&&(a=t),r&&(a=new Coords(Const.COORDS_BY_USER,a.usrCoords,a.board)),a},coordsArray:function(t,r){var a;return JXG$1.isArray(t)?a=t:a=this.coords(t).usrCoords,a.length<3&&a.unshift(1),r&&(a=[a[0],a[1],a[2]]),a}};const Expect=JXG$1.Expect;Mat.ProbFuncs={MAXNUM:17014118346046923e22,SQRTH:.7071067811865476,SQRT2:1.4142135623730951,MAXLOG:708.3964185322641,P:[2461969814735305e-25,.5641895648310689,7.463210564422699,48.63719709856814,196.5208329560771,526.4451949954773,934.5285271719576,1027.5518868951572,557.5353353693994],Q:[13.228195115474499,86.70721408859897,354.9377788878199,975.7085017432055,1823.9091668790973,2246.3376081871097,1656.6630919416134,557.5353408177277],R:[.5641895835477551,1.275366707599781,5.019050422511805,6.160210979930536,7.4097426995044895,2.9788666537210022],S:[2.2605286322011726,9.396035249380015,12.048953980809666,17.08144507475659,9.608968090632859,3.369076451000815],T:[9.604973739870516,90.02601972038427,2232.005345946843,7003.325141128051,55592.30130103949],U:[33.56171416475031,521.3579497801527,4594.323829709801,22629.000061389095,49267.39426086359],M:128,MINV:.0078125,expx2:function(t,r){var a,n,s,o;return t=Math.abs(t),r<0&&(t=-t),s=this.MINV*Math.floor(this.M*t+.5),o=t-s,a=s*s,n=2*s*o+o*o,r<0&&(a=-a,n=-n),a+n>this.MAXLOG?1/0:(a=Math.exp(a)*Math.exp(n),a)},polevl:function(t,r,a){var n,s;if(JXG$1.exists(r.reduce))return r.reduce(function(o,l){return o*t+l},0);for(s=0,n=0;s<=a;s++)n=n*t+r[s];return n},p1evl:function(t,r,a){var n,s;if(JXG$1.exists(r.reduce))return r.reduce(function(o,l){return o*t+l},1);for(s=0,n=1;s<a;s++)n=n*t+r[s];return n},ndtr:function(t){var r,a,n;return r=t*this.SQRTH,n=Math.abs(r),n<1?a=.5+.5*this.erf(r):(a=.5*this.erfce(n),n=this.expx2(t,-1),a=a*Math.sqrt(n),r>0&&(a=1-a)),a},_underflow:function(t){return console.log("erfc","UNDERFLOW"),t<0?2:0},erfc:function(t){var r,a,n,s,o;return t<0?n=-t:n=t,n<1?1-this.erf(t):(o=-t*t,o<-this.MAXLOG?this._underflow(t):(o=this.expx2(t,-1),n<8?(r=this.polevl(n,this.P,8),a=this.p1evl(n,this.Q,8)):(r=this.polevl(n,this.R,5),a=this.p1evl(n,this.S,6)),s=o*r/a,t<0&&(s=2-s),s===0?this._underflow(t):s))},erfce:function(t){var r,a;return t<8?(r=this.polevl(t,this.P,8),a=this.p1evl(t,this.Q,8)):(r=this.polevl(t,this.R,5),a=this.p1evl(t,this.S,6)),r/a},erf:function(t){var r,a;return Math.abs(t)>1?1-this.erfc(t):(a=t*t,r=t*this.polevl(a,this.T,4)/this.p1evl(a,this.U,5),r)},s2pi:2.5066282746310007,P0:[-59.96335010141079,98.00107541859997,-56.67628574690703,13.931260938727968,-1.2391658386738125],Q0:[1.9544885833814176,4.676279128988815,86.36024213908905,-225.46268785411937,200.26021238006066,-82.03722561683334,15.90562251262117,-1.1833162112133],P1:[4.0554489230596245,31.525109459989388,57.16281922464213,44.08050738932008,14.684956192885803,2.1866330685079025,-.1402560791713545,-.03504246268278482,-.0008574567851546854],Q1:[15.779988325646675,45.39076351288792,41.3172038254672,15.04253856929075,2.504649462083094,-.14218292285478779,-.03808064076915783,-.0009332594808954574],P2:[3.2377489177694603,6.915228890689842,3.9388102529247444,1.3330346081580755,.20148538954917908,.012371663481782003,.00030158155350823543,26580697468673755e-22,6239745391849833e-24],Q2:[6.02427039364742,3.6798356385616087,1.3770209948908132,.21623699359449663,.013420400608854318,.00032801446468212774,28924786474538068e-22,6790194080099813e-24],ndtri:function(t){var r,a,n,s,o,l,u;return t<=0?-1/0:t>=1?1/0:(u=1,a=t,a>1-.1353352832366127&&(a=1-a,u=0),a>.1353352832366127?(a=a-.5,s=a*a,r=a+a*(s*this.polevl(s,this.P0,4)/this.p1evl(s,this.Q0,8)),r=r*this.s2pi,r):(r=Math.sqrt(-2*Math.log(a)),o=r-Math.log(r)/r,n=1/r,r<8?l=n*this.polevl(n,this.P1,8)/this.p1evl(n,this.Q1,8):l=n*this.polevl(n,this.P2,8)/this.p1evl(n,this.Q2,8),r=o-l,u!==0&&(r=-r),r))},erfi:function(t){return this.ndtri((t+1)*.5)*this.SQRTH}};Mat.ProbFuncs;JXG$1.Math.DoubleBits=function(){var t=new Float64Array(1),r=new Uint32Array(t.buffer),a,n,s,o,l,u,h,c;Float64Array!==void 0&&(t[0]=1,r[1]===1072693248?(a=function(f){return t[0]=f,[r[0],r[1]]},n=function(f,d){return r[0]=f,r[1]=d,t[0]},s=function(f){return t[0]=f,r[0]},o=function(f){return t[0]=f,r[1]},this.doubleBits=a,this.pack=n,this.lo=s,this.hi=o):r[0]===1072693248&&(l=function(f){return t[0]=f,[r[1],r[0]]},u=function(f,d){return r[1]=f,r[0]=d,t[0]},h=function(f){return t[0]=f,r[1]},c=function(f){return t[0]=f,r[0]},this.doubleBits=l,this.pack=u,this.lo=h,this.hi=c))};JXG$1.extend(JXG$1.Math.DoubleBits.prototype,{sign:function(t){return this.hi(t)>>>31},exponent:function(t){var r=this.hi(t);return(r<<1>>>21)-1023},fraction:function(t){var r=this.lo(t),a=this.hi(t),n=a&(1<<20)-1;return a&2146435072&&(n+=1<<20),[r,n]},denormalized:function(t){var r=this.hi(t);return!(r&2146435072)}});var doubleBits=new JXG$1.Math.DoubleBits,MatInterval=function(t,r){if(t!==void 0&&r!==void 0){if(Mat.IntervalArithmetic.isInterval(t)){if(!Mat.IntervalArithmetic.isSingleton(t))throw new TypeError("JXG.Math.IntervalArithmetic: interval `lo` must be a singleton");this.lo=t.lo}else this.lo=t;if(Mat.IntervalArithmetic.isInterval(r)){if(!Mat.IntervalArithmetic.isSingleton(r))throw new TypeError("JXG.Math.IntervalArithmetic: interval `hi` must be a singleton");this.hi=r.hi}else this.hi=r}else{if(t!==void 0)return Array.isArray(t)?new MatInterval(t[0],t[1]):new MatInterval(t,t);this.lo=this.hi=0}};JXG$1.extend(MatInterval.prototype,{print:function(){console.log("[",this.lo,this.hi,"]")},set:function(t,r){return this.lo=t,this.hi=r,this},bounded:function(t,r){return this.set(Mat.IntervalArithmetic.prev(t),Mat.IntervalArithmetic.next(r))},boundedSingleton:function(t){return this.bounded(t,t)},assign:function(t,r){if(typeof t!="number"||typeof r!="number")throw new TypeError("JXG.Math.Interval#assign: arguments must be numbers");return isNaN(t)||isNaN(r)||t>r?this.setEmpty():this.set(t,r)},setEmpty:function(){return this.set(Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY)},setWhole:function(){return this.set(Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY)},open:function(t,r){return this.assign(Mat.IntervalArithmetic.next(t),Mat.IntervalArithmetic.prev(r))},halfOpenLeft:function(t,r){return this.assign(Mat.IntervalArithmetic.next(t),r)},halfOpenRight:function(t,r){return this.assign(t,Mat.IntervalArithmetic.prev(r))},toArray:function(){return[this.lo,this.hi]},clone:function(){return new MatInterval().set(this.lo,this.hi)}});JXG$1.Math.IntervalArithmetic={Interval:function(t,r){return new MatInterval(t,r)},isInterval:function(t){return t!==null&&typeof t=="object"&&typeof t.lo=="number"&&typeof t.hi=="number"},isSingleton:function(t){return t.lo===t.hi},add:function(t,r){return JXG$1.isNumber(t)&&(t=this.Interval(t)),JXG$1.isNumber(r)&&(r=this.Interval(r)),new MatInterval(this.addLo(t.lo,r.lo),this.addHi(t.hi,r.hi))},sub:function(t,r){return JXG$1.isNumber(t)&&(t=this.Interval(t)),JXG$1.isNumber(r)&&(r=this.Interval(r)),new MatInterval(this.subLo(t.lo,r.hi),this.subHi(t.hi,r.lo))},mul:function(t,r){var a,n,s,o,l;return JXG$1.isNumber(t)&&(t=this.Interval(t)),JXG$1.isNumber(r)&&(r=this.Interval(r)),this.isEmpty(t)||this.isEmpty(r)?this.EMPTY.clone():(a=t.lo,n=t.hi,s=r.lo,o=r.hi,l=new MatInterval,a<0?n>0?s<0?o>0?(l.lo=Math.min(this.mulLo(a,o),this.mulLo(n,s)),l.hi=Math.max(this.mulHi(a,s),this.mulHi(n,o))):(l.lo=this.mulLo(n,s),l.hi=this.mulHi(a,s)):o>0?(l.lo=this.mulLo(a,o),l.hi=this.mulHi(n,o)):(l.lo=0,l.hi=0):s<0?o>0?(l.lo=this.mulLo(a,o),l.hi=this.mulHi(a,s)):(l.lo=this.mulLo(n,o),l.hi=this.mulHi(a,s)):o>0?(l.lo=this.mulLo(a,o),l.hi=this.mulHi(n,s)):(l.lo=0,l.hi=0):n>0?s<0?o>0?(l.lo=this.mulLo(n,s),l.hi=this.mulHi(n,o)):(l.lo=this.mulLo(n,s),l.hi=this.mulHi(a,o)):o>0?(l.lo=this.mulLo(a,s),l.hi=this.mulHi(n,o)):(l.lo=0,l.hi=0):(l.lo=0,l.hi=0),l)},div:function(t,r){return JXG$1.isNumber(t)&&(t=this.Interval(t)),JXG$1.isNumber(r)&&(r=this.Interval(r)),this.isEmpty(t)||this.isEmpty(r)?this.EMPTY.clone():this.zeroIn(r)?r.lo!==0?r.hi!==0?this.divZero(t):this.divNegative(t,r.lo):r.hi!==0?this.divPositive(t,r.hi):this.EMPTY.clone():this.divNonZero(t,r)},positive:function(t){return new MatInterval(t.lo,t.hi)},negative:function(t){return JXG$1.isNumber(t)?new MatInterval(-t):new MatInterval(-t.hi,-t.lo)},isEmpty:function(t){return t.lo>t.hi},isWhole:function(t){return t.lo===-1/0&&t.hi===1/0},zeroIn:function(t){return this.hasValue(t,0)},hasValue:function(t,r){return this.isEmpty(t)?!1:t.lo<=r&&r<=t.hi},hasInterval:function(t,r){return this.isEmpty(t)?!0:!this.isEmpty(r)&&r.lo<=t.lo&&t.hi<=r.hi},intervalsOverlap:function(t,r){return this.isEmpty(t)||this.isEmpty(r)?!1:t.lo<=r.lo&&r.lo<=t.hi||r.lo<=t.lo&&t.lo<=r.hi},divNonZero:function(t,r){var a=t.lo,n=t.hi,s=r.lo,o=r.hi,l=new MatInterval;return n<0?o<0?(l.lo=this.divLo(n,s),l.hi=this.divHi(a,o)):(l.lo=this.divLo(a,s),l.hi=this.divHi(n,o)):a<0?o<0?(l.lo=this.divLo(n,o),l.hi=this.divHi(a,o)):(l.lo=this.divLo(a,s),l.hi=this.divHi(n,s)):o<0?(l.lo=this.divLo(n,o),l.hi=this.divHi(a,s)):(l.lo=this.divLo(a,o),l.hi=this.divHi(n,s)),l},divPositive:function(t,r){return t.lo===0&&t.hi===0?t:this.zeroIn(t)?this.WHOLE:t.hi<0?new MatInterval(Number.NEGATIVE_INFINITY,this.divHi(t.hi,r)):new MatInterval(this.divLo(t.lo,r),Number.POSITIVE_INFINITY)},divNegative:function(t,r){return t.lo===0&&t.hi===0?t:this.zeroIn(t)?this.WHOLE:t.hi<0?new MatInterval(this.divLo(t.hi,r),Number.POSITIVE_INFINITY):new MatInterval(Number.NEGATIVE_INFINITY,this.divHi(t.lo,r))},divZero:function(t){return t.lo===0&&t.hi===0?t:this.WHOLE},fmod:function(t,r){var a,n;return JXG$1.isNumber(t)&&(t=this.Interval(t)),JXG$1.isNumber(r)&&(r=this.Interval(r)),this.isEmpty(t)||this.isEmpty(r)?this.EMPTY.clone():(a=t.lo<0?r.lo:r.hi,n=t.lo/a,n<0?n=Math.ceil(n):n=Math.floor(n),this.sub(t,this.mul(r,new MatInterval(n))))},multiplicativeInverse:function(t){return JXG$1.isNumber(t)&&(t=this.Interval(t)),this.isEmpty(t)?this.EMPTY.clone():this.zeroIn(t)?t.lo!==0?t.hi!==0?this.WHOLE:new MatInterval(Number.NEGATIVE_INFINITY,this.divHi(1,t.lo)):t.hi!==0?new MatInterval(this.divLo(1,t.hi),Number.POSITIVE_INFINITY):this.EMPTY.clone():new MatInterval(this.divLo(1,t.hi),this.divHi(1,t.lo))},pow:function(t,r){var a,n;if(JXG$1.isNumber(t)&&(t=this.Interval(t)),this.isEmpty(t))return this.EMPTY.clone();if(this.isInterval(r)){if(!this.isSingleton(r))return this.EMPTY.clone();r=r.lo}return r===0?t.lo===0&&t.hi===0?this.EMPTY.clone():this.ONE.clone():r<0?this.pow(this.multiplicativeInverse(t),-r):r%1===0?t.hi<0?(a=this.powLo(-t.hi,r),n=this.powHi(-t.lo,r),(r&1)===1?new MatInterval(-n,-a):new MatInterval(a,n)):t.lo<0?(r&1)===1?new MatInterval(-this.powLo(-t.lo,r),this.powHi(t.hi,r)):new MatInterval(0,this.powHi(Math.max(-t.lo,t.hi),r)):new MatInterval(this.powLo(t.lo,r),this.powHi(t.hi,r)):(console.warn("power is not an integer, you should use nth-root instead, returning an empty interval"),this.EMPTY.clone())},sqrt:function(t){return JXG$1.isNumber(t)&&(t=this.Interval(t)),this.nthRoot(t,2)},nthRoot:function(t,r){var a,n,s,o,l;if(JXG$1.isNumber(t)&&(t=this.Interval(t)),this.isEmpty(t)||r<0)return this.EMPTY.clone();if(this.isInterval(r)){if(!this.isSingleton(r))return this.EMPTY.clone();r=r.lo}return a=1/r,t.hi<0?r%1===0&&(r&1)===1?(n=this.powHi(-t.lo,a),s=this.powLo(-t.hi,a),new MatInterval(-n,-s)):this.EMPTY.clone():t.lo<0?(o=this.powHi(t.hi,a),r%1===0&&(r&1)===1?(l=-this.powHi(-t.lo,a),new MatInterval(l,o)):new MatInterval(0,o)):new MatInterval(this.powLo(t.lo,a),this.powHi(t.hi,a))},exp:function(t){return JXG$1.isNumber(t)&&(t=this.Interval(t)),this.isEmpty(t)?this.EMPTY.clone():new MatInterval(this.expLo(t.lo),this.expHi(t.hi))},log:function(t){var r;return JXG$1.isNumber(t)&&(t=this.Interval(t)),this.isEmpty(t)?this.EMPTY.clone():(r=t.lo<=0?Number.NEGATIVE_INFINITY:this.logLo(t.lo),new MatInterval(r,this.logHi(t.hi)))},ln:function(t){return this.log(t)},log10:function(t){return this.isEmpty(t)?this.EMPTY.clone():this.div(this.log(t),this.log(new MatInterval(10,10)))},log2:function(t){return this.isEmpty(t)?this.EMPTY.clone():this.div(this.log(t),this.log(new MatInterval(2,2)))},hull:function(t,r){var a=this.isEmpty(t),n=this.isEmpty(r);return a&&n?this.EMPTY.clone():a?r.clone():n?t.clone():new MatInterval(Math.min(t.lo,r.lo),Math.max(t.hi,r.hi))},intersection:function(t,r){var a,n;return this.isEmpty(t)||this.isEmpty(r)?this.EMPTY.clone():(a=Math.max(t.lo,r.lo),n=Math.min(t.hi,r.hi),a<=n?new MatInterval(a,n):this.EMPTY.clone())},union:function(t,r){if(!this.intervalsOverlap(t,r))throw new Error("Interval#unions do not overlap");return new MatInterval(Math.min(t.lo,r.lo),Math.max(t.hi,r.hi))},difference:function(t,r){if(this.isEmpty(t)||this.isWhole(r))return this.EMPTY.clone();if(this.intervalsOverlap(t,r)){if(t.lo<r.lo&&r.hi<t.hi)throw new Error("Interval.difference: difference creates multiple intervals");return r.lo<=t.lo&&r.hi===1/0||r.hi>=t.hi&&r.lo===-1/0?this.EMPTY.clone():r.lo<=t.lo?new MatInterval().halfOpenLeft(r.hi,t.hi):new MatInterval().halfOpenRight(t.lo,r.lo)}return t.clone()},width:function(t){return this.isEmpty(t)?0:this.subHi(t.hi,t.lo)},abs:function(t){return JXG$1.isNumber(t)&&(t=this.Interval(t)),this.isEmpty(t)?this.EMPTY.clone():t.lo>=0?t.clone():t.hi<=0?this.negative(t):new MatInterval(0,Math.max(-t.lo,t.hi))},max:function(t,r){var a=this.isEmpty(t),n=this.isEmpty(r);return a&&n?this.EMPTY.clone():a?r.clone():n?t.clone():new MatInterval(Math.max(t.lo,r.lo),Math.max(t.hi,r.hi))},min:function(t,r){var a=this.isEmpty(t),n=this.isEmpty(r);return a&&n?this.EMPTY.clone():a?r.clone():n?t.clone():new MatInterval(Math.min(t.lo,r.lo),Math.min(t.hi,r.hi))},onlyInfinity:function(t){return!isFinite(t.lo)&&t.lo===t.hi},_handleNegative:function(t){var r;return t.lo<0&&(t.lo===-1/0?(t.lo=0,t.hi=1/0):(r=Math.ceil(-t.lo/this.piTwiceLow),t.lo+=this.piTwiceLow*r,t.hi+=this.piTwiceLow*r)),t},cos:function(t){var r,a,n,s,o,l,u,h;return this.isEmpty(t)||this.onlyInfinity(t)?this.EMPTY.clone():(r=new MatInterval().set(t.lo,t.hi),this._handleNegative(r),a=this.PI_TWICE,n=this.fmod(r,a),this.width(n)>=a.lo?new MatInterval(-1,1):n.lo>=this.piHigh?(s=this.cos(this.sub(n,this.PI)),this.negative(s)):(o=n.lo,l=n.hi,u=this.cosLo(l),h=this.cosHi(o),l<=this.piLow?new MatInterval(u,h):l<=a.lo?new MatInterval(-1,Math.max(u,h)):new MatInterval(-1,1)))},sin:function(t){return this.isEmpty(t)||this.onlyInfinity(t)?this.EMPTY.clone():this.cos(this.sub(t,this.PI_HALF))},tan:function(t){var r,a,n;return this.isEmpty(t)||this.onlyInfinity(t)?this.EMPTY.clone():(r=new MatInterval().set(t.lo,t.hi),this._handleNegative(r),n=this.PI,a=this.fmod(r,n),a.lo>=this.piHalfLow&&(a=this.sub(a,n)),a.lo<=-this.piHalfLow||a.hi>=this.piHalfLow?this.WHOLE.clone():new MatInterval(this.tanLo(a.lo),this.tanHi(a.hi)))},asin:function(t){var r,a;return this.isEmpty(t)||t.hi<-1||t.lo>1?this.EMPTY.clone():(r=t.lo<=-1?-this.piHalfHigh:this.asinLo(t.lo),a=t.hi>=1?this.piHalfHigh:this.asinHi(t.hi),new MatInterval(r,a))},acos:function(t){var r,a;return this.isEmpty(t)||t.hi<-1||t.lo>1?this.EMPTY.clone():(r=t.hi>=1?0:this.acosLo(t.hi),a=t.lo<=-1?this.piHigh:this.acosHi(t.lo),new MatInterval(r,a))},acot:function(t){return this.isEmpty(t)?this.EMPTY.clone():new MatInterval(this.acotLo(t.lo),this.acotHi(t.hi))},atan:function(t){return this.isEmpty(t)?this.EMPTY.clone():new MatInterval(this.atanLo(t.lo),this.atanHi(t.hi))},sinh:function(t){return this.isEmpty(t)?this.EMPTY.clone():new MatInterval(this.sinhLo(t.lo),this.sinhHi(t.hi))},cosh:function(t){return this.isEmpty(t)?this.EMPTY.clone():t.hi<0?new MatInterval(this.coshLo(t.hi),this.coshHi(t.lo)):t.lo>=0?new MatInterval(this.coshLo(t.lo),this.coshHi(t.hi)):new MatInterval(1,this.coshHi(-t.lo>t.hi?t.lo:t.hi))},tanh:function(t){return this.isEmpty(t)?this.EMPTY.clone():new MatInterval(this.tanhLo(t.lo),this.tanhHi(t.hi))},equal:function(t,r){return this.isEmpty(t)?this.isEmpty(r):!this.isEmpty(r)&&t.lo===r.lo&&t.hi===r.hi},notEqual:function(t,r){return this.isEmpty(t)?!this.isEmpty(r):this.isEmpty(r)||t.hi<r.lo||t.lo>r.hi},lt:function(t,r){return JXG$1.isNumber(t)&&(t=this.Interval(t)),JXG$1.isNumber(r)&&(r=this.Interval(r)),this.isEmpty(t)||this.isEmpty(r)?!1:t.hi<r.lo},gt:function(t,r){return JXG$1.isNumber(t)&&(t=this.Interval(t)),JXG$1.isNumber(r)&&(r=this.Interval(r)),this.isEmpty(t)||this.isEmpty(r)?!1:t.lo>r.hi},leq:function(t,r){return JXG$1.isNumber(t)&&(t=this.Interval(t)),JXG$1.isNumber(r)&&(r=this.Interval(r)),this.isEmpty(t)||this.isEmpty(r)?!1:t.hi<=r.lo},geq:function(t,r){return JXG$1.isNumber(t)&&(t=this.Interval(t)),JXG$1.isNumber(r)&&(r=this.Interval(r)),this.isEmpty(t)||this.isEmpty(r)?!1:t.lo>=r.hi},piLow:(3373259426+273688/(1<<21))/(1<<30),piHigh:(3373259426+273689/(1<<21))/(1<<30),piHalfLow:(3373259426+273688/(1<<21))/(1<<30)*.5,piHalfHigh:(3373259426+273689/(1<<21))/(1<<30)*.5,piTwiceLow:(3373259426+273688/(1<<21))/(1<<30)*2,piTwiceHigh:(3373259426+273689/(1<<21))/(1<<30)*2,identity:function(t){return t},_prev:function(t){return t===1/0?t:this.nextafter(t,-1/0)},_next:function(t){return t===-1/0?t:this.nextafter(t,1/0)},prev:function(t){return this._prev(t)},next:function(t){return this._next(t)},toInteger:function(t){return t<0?Math.ceil(t):Math.floor(t)},addLo:function(t,r){return this.prev(t+r)},addHi:function(t,r){return this.next(t+r)},subLo:function(t,r){return this.prev(t-r)},subHi:function(t,r){return this.next(t-r)},mulLo:function(t,r){return this.prev(t*r)},mulHi:function(t,r){return this.next(t*r)},divLo:function(t,r){return this.prev(t/r)},divHi:function(t,r){return this.next(t/r)},intLo:function(t){return this.toInteger(this.prev(t))},intHi:function(t){return this.toInteger(this.next(t))},logLo:function(t){return this.prev(Math.log(t))},logHi:function(t){return this.next(Math.log(t))},expLo:function(t){return this.prev(Math.exp(t))},expHi:function(t){return this.next(Math.exp(t))},sinLo:function(t){return this.prev(Math.sin(t))},sinHi:function(t){return this.next(Math.sin(t))},cosLo:function(t){return this.prev(Math.cos(t))},cosHi:function(t){return this.next(Math.cos(t))},tanLo:function(t){return this.prev(Math.tan(t))},tanHi:function(t){return this.next(Math.tan(t))},asinLo:function(t){return this.prev(Math.asin(t))},asinHi:function(t){return this.next(Math.asin(t))},acosLo:function(t){return this.prev(Math.acos(t))},acosHi:function(t){return this.next(Math.acos(t))},acotLo:function(t){return this.prev(Mat.acot(t))},acotHi:function(t){return this.next(Mat.acot(t))},atanLo:function(t){return this.prev(Math.atan(t))},atanHi:function(t){return this.next(Math.atan(t))},sinhLo:function(t){return this.prev(Mat.sinh(t))},sinhHi:function(t){return this.next(Mat.sinh(t))},coshLo:function(t){return this.prev(Mat.cosh(t))},coshHi:function(t){return this.next(Mat.cosh(t))},tanhLo:function(t){return this.prev(Mat.tanh(t))},tanhHi:function(t){return this.next(Mat.tanh(t))},sqrtLo:function(t){return this.prev(Math.sqrt(t))},sqrtHi:function(t){return this.next(Math.sqrt(t))},powLo:function(t,r){var a;if(r%1!==0)return this.prev(Math.pow(t,r));for(a=(r&1)===1?t:1,r>>=1;r>0;)t=this.mulLo(t,t),(r&1)===1&&(a=this.mulLo(t,a)),r>>=1;return a},powHi:function(t,r){var a;if(r%1!==0)return this.next(Math.pow(t,r));for(a=(r&1)===1?t:1,r>>=1;r>0;)t=this.mulHi(t,t),(r&1)===1&&(a=this.mulHi(t,a)),r>>=1;return a},disable:function(){this.next=this.prev=this.identity},enable:function(){this.prev=function(t){return this._prev(t)},this.next=function(t){return this._next(t)}},SMALLEST_DENORM:Math.pow(2,-1074),UINT_MAX:-1>>>0,nextafter:function(t,r){var a,n;return isNaN(t)||isNaN(r)?NaN:t===r?t:t===0?r<0?-this.SMALLEST_DENORM:this.SMALLEST_DENORM:(n=doubleBits.hi(t),a=doubleBits.lo(t),r>t==t>0?a===this.UINT_MAX?(n+=1,a=0):a+=1:a===0?(a=this.UINT_MAX,n-=1):a-=1,doubleBits.pack(a,n))}};JXG$1.Math.IntervalArithmetic.PI=new MatInterval(Mat.IntervalArithmetic.piLow,Mat.IntervalArithmetic.piHigh);JXG$1.Math.IntervalArithmetic.PI_HALF=new MatInterval(Mat.IntervalArithmetic.piHalfLow,Mat.IntervalArithmetic.piHalfHigh);JXG$1.Math.IntervalArithmetic.PI_TWICE=new MatInterval(Mat.IntervalArithmetic.piTwiceLow,Mat.IntervalArithmetic.piTwiceHigh);JXG$1.Math.IntervalArithmetic.ZERO=new MatInterval(0);JXG$1.Math.IntervalArithmetic.ONE=new MatInterval(1);JXG$1.Math.IntervalArithmetic.WHOLE=new MatInterval().setWhole();JXG$1.Math.IntervalArithmetic.EMPTY=new MatInterval().setEmpty();const Interval=JXG$1.Math.IntervalArithmetic;Mat.Extrapolate={upper:15,infty:1e4,wynnEps:function(t,r,a){var n=1e20,s=1e-15,o=1,l,u,h,c,f,d;if(a[r]=t,r===0)d=t;else{for(c=0,u=r;u>0;u--)h=c,c=a[u-1],f=a[u]-c,Math.abs(f)<=s?a[u-1]=n:(l=(r-u+1)%2===1?o:1,a[u-1]=h*l+1/f);d=a[r%2]}return d},aitken:function(t,r,a){var n,s=1e20,o=1e-15,l,u,h,c,f;if(a[r]=t,r<2)n=t;else{for(h=r/2,c=1;c<=h;c++)f=r-2*c,l=a[f+2]-2*a[f+1]+a[f],Math.abs(l)<o?a[f]=s:(u=a[f]-a[f+1],a[f]-=u*u/l);n=a[r%2]}return n},brezinski:function(t,r,a){var n,s=1e20,o=1e-15,l,u,h,c,f,d,p;if(a[r]=t,r<3)n=t;else{for(f=r/3,p=r,d=1;d<=f;d++)p-=3,u=a[p+1]-a[p],h=a[p+2]-a[p+1],c=a[p+3]-a[p+2],l=c*(h-u)-u*(c-h),Math.abs(l)<o?a[p]=s:a[p]=a[p+1]-u*h*(c-h)/l;n=a[r%3]}return n},iteration:function(t,r,a,n,s){var o,l,u,h=NaN,c,f=.5,d=[],p="finite",v=r;for(s=s||0,o=1;o<=this.upper;o++){if(v=s===0?r/(o+1):v*f,l=a(t+v,!0),u=this[n](l,o-1,d),isNaN(u)){p="NaN";break}if(l!==0&&u/l>this.infty){h=u,p="infinite";break}if(c=u-h,Math.abs(c)<1e-7)break;h=u}return[h,p,1-(o-1)/this.upper]},levin:function(t,r,a,n,s,o){var l=1e20,u=1e-15,h,c,f,d,p;if(d=1/(n+r),s[r]=t/a,o[r]=1/a,r>0&&(s[r-1]=s[r]-s[r-1],o[r-1]=o[r]-o[r-1],r>1))for(f=(n+r-1)*d,h=2;h<=r;h++)c=(n+r-h)*Math.pow(f,h-2)*d,s[r-h]=s[r-h+1]-c*s[r-h],o[r-h]=o[r-h+1]-c*o[r-h],d*=f;return Math.abs(o[0])<u?p=l:p=s[0]/o[0],p},iteration_levin:function(t,r,a,n){var s,o,l,u=NaN,h,c,f,d,p=1,v=.5,y=[],b=[],_="finite",N=r,M="u";for(n=n||0,h=a(t+r,!0),s=1;s<=this.upper;s++){if(N=n===0?r/(s+1):N*v,o=a(t+N,!0),c=o-h,Math.abs(c)<1?M="u":M="t",M==="u"?d=(p+s)*c:d=c,h=o,l=this.levin(o,s-1,d,p,y,b),f=l-u,isNaN(l)){_="NaN";break}if(o!==0&&l/o>this.infty){u=l,_="infinite";break}if(Math.abs(f)<1e-7)break;u=l}return[u,_,1-(s-1)/this.upper]},limit:function(t,r,a){return this.iteration_levin(t,r,a,0)}};const Extrapolate=Mat.Extrapolate;Mat.Statistics={sum:function(t){var r,a=t.length,n=0;for(r=0;r<a;r++)n+=t[r];return n},prod:function(t){var r,a=t.length,n=1;for(r=0;r<a;r++)n*=t[r];return n},mean:function(t){return t.length>0?this.sum(t)/t.length:0},median:function(t){var r,a;return t.length>0?(ArrayBuffer.isView(t)?(r=new Float64Array(t),r.sort()):(r=t.slice(0),r.sort(function(n,s){return n-s})),a=r.length,a&1?r[parseInt(a*.5,10)]:(r[a*.5-1]+r[a*.5])*.5):0},percentile:function(t,r){var a,n,s,o,l=[],u;if(t.length>0){for(ArrayBuffer.isView(t)?(a=new Float64Array(t),a.sort()):(a=t.slice(0),a.sort(function(h,c){return h-c})),n=a.length,JXG$1.isArray(r)?o=r:o=[r],s=0;s<o.length;s++)u=n*o[s]*.01,parseInt(u,10)===u?l.push((a[u-1]+a[u])*.5):l.push(a[parseInt(u,10)]);return JXG$1.isArray(r)?l:l[0]}return 0},variance:function(t){var r,a,n,s=t.length;if(s>1){for(r=this.mean(t),a=0,n=0;n<s;n++)a+=(t[n]-r)*(t[n]-r);return a/(t.length-1)}return 0},sd:function(t){return Math.sqrt(this.variance(t))},weightedMean:function(t,r){if(t.length!==r.length)throw new Error("JSXGraph error (Math.Statistics.weightedMean): Array dimension mismatch.");return t.length>0?this.mean(this.multiply(t,r)):0},max:function(t){return Math.max.apply(this,t)},min:function(t){return Math.min.apply(this,t)},range:function(t){return[this.min(t),this.max(t)]},abs:function(t){var r,a,n;if(JXG$1.isArray(t))if(t.map)n=t.map(Math.abs);else for(a=t.length,n=[],r=0;r<a;r++)n[r]=Math.abs(t[r]);else ArrayBuffer.isView(t)?n=t.map(Math.abs):n=Math.abs(t);return n},add:function(t,r){var a,n,s=[];if(t=JXG$1.evalSlider(t),r=JXG$1.evalSlider(r),JXG$1.isArray(t)&&JXG$1.isNumber(r))for(n=t.length,a=0;a<n;a++)s[a]=t[a]+r;else if(JXG$1.isNumber(t)&&JXG$1.isArray(r))for(n=r.length,a=0;a<n;a++)s[a]=t+r[a];else if(JXG$1.isArray(t)&&JXG$1.isArray(r))for(n=Math.min(t.length,r.length),a=0;a<n;a++)s[a]=t[a]+r[a];else s=t+r;return s},div:function(t,r){var a,n,s=[];if(t=JXG$1.evalSlider(t),r=JXG$1.evalSlider(r),JXG$1.isArray(t)&&JXG$1.isNumber(r))for(n=t.length,a=0;a<n;a++)s[a]=t[a]/r;else if(JXG$1.isNumber(t)&&JXG$1.isArray(r))for(n=r.length,a=0;a<n;a++)s[a]=t/r[a];else if(JXG$1.isArray(t)&&JXG$1.isArray(r))for(n=Math.min(t.length,r.length),a=0;a<n;a++)s[a]=t[a]/r[a];else s=t/r;return s},divide:function(){JXG$1.deprecated("Statistics.divide()","Statistics.div()"),Mat.Statistics.div.apply(Mat.Statistics,arguments)},mod:function(t,r,a){var n,s,o=[],l=function(u,h){return u%h};if(a=JXG$1.def(a,!1),a&&(l=Mat.mod),t=JXG$1.evalSlider(t),r=JXG$1.evalSlider(r),JXG$1.isArray(t)&&JXG$1.isNumber(r))for(s=t.length,n=0;n<s;n++)o[n]=l(t[n],r);else if(JXG$1.isNumber(t)&&JXG$1.isArray(r))for(s=r.length,n=0;n<s;n++)o[n]=l(t,r[n]);else if(JXG$1.isArray(t)&&JXG$1.isArray(r))for(s=Math.min(t.length,r.length),n=0;n<s;n++)o[n]=l(t[n],r[n]);else o=l(t,r);return o},multiply:function(t,r){var a,n,s=[];if(t=JXG$1.evalSlider(t),r=JXG$1.evalSlider(r),JXG$1.isArray(t)&&JXG$1.isNumber(r))for(n=t.length,a=0;a<n;a++)s[a]=t[a]*r;else if(JXG$1.isNumber(t)&&JXG$1.isArray(r))for(n=r.length,a=0;a<n;a++)s[a]=t*r[a];else if(JXG$1.isArray(t)&&JXG$1.isArray(r))for(n=Math.min(t.length,r.length),a=0;a<n;a++)s[a]=t[a]*r[a];else s=t*r;return s},subtract:function(t,r){var a,n,s=[];if(t=JXG$1.evalSlider(t),r=JXG$1.evalSlider(r),JXG$1.isArray(t)&&JXG$1.isNumber(r))for(n=t.length,a=0;a<n;a++)s[a]=t[a]-r;else if(JXG$1.isNumber(t)&&JXG$1.isArray(r))for(n=r.length,a=0;a<n;a++)s[a]=t-r[a];else if(JXG$1.isArray(t)&&JXG$1.isArray(r))for(n=Math.min(t.length,r.length),a=0;a<n;a++)s[a]=t[a]-r[a];else s=t-r;return s},TheilSenRegression:function(t){var r,a,n=[],s=[],o=[];for(r=0;r<t.length;r++){for(s.length=0,a=0;a<t.length;a++)Math.abs(t[a].usrCoords[1]-t[r].usrCoords[1])>Mat.eps&&(s[a]=(t[a].usrCoords[2]-t[r].usrCoords[2])/(t[a].usrCoords[1]-t[r].usrCoords[1]));n[r]=this.median(s),o.push(t[r].usrCoords[2]-n[r]*t[r].usrCoords[1])}return[this.median(o),this.median(n),-1]},generateGaussian:function(t,r){var a,n,s;if(this.hasSpare)return this.hasSpare=!1,this.spare*r+t;do a=Math.random()*2-1,n=Math.random()*2-1,s=a*a+n*n;while(s>=1||s===0);return s=Math.sqrt(-2*Math.log(s)/s),this.spare=n*s,this.hasSpare=!0,t+r*a*s},randomNormal:function(t,r){return this.generateGaussian(t,r)},randomUniform:function(t,r){return Math.random()*(r-t)+t},randomExponential:function(t){var r;if(t<=0)return NaN;do r=Math.random();while(r===0);return-Math.log(r)/t},randomGamma:function(t,r,a){var n,s,o,l,u,h;if(t<=0)return NaN;if(r=r||1,a=a||0,t===1)return r*this.randomExponential(1)+a;if(t<1){u=Math.E/(t+Math.E);do{n=Math.random();do s=Math.random();while(s===0);n<u?(o=Math.pow(s,1/t),h=Math.exp(-o)):(o=1-Math.log(s),h=Math.pow(o,t-1)),n=Math.random()}while(n>=h);return r*o+a}do if(l=Math.tan(Math.PI*Math.random()),o=Math.sqrt(2*t-1)*l+t-1,o>0)s=Math.random();else continue;while(o<=0||s>(1+l*l)*Math.exp((t-1)*Math.log(o/(t-1))-Math.sqrt(2*t-1)*l));return r*o+a},randomBeta:function(t,r){var a,n,s;return t<=0||r<=0?NaN:(a=this.randomGamma(t),n=this.randomGamma(r),s=a/(a+n),s)},randomChisquare:function(t){return t<=0?NaN:2*this.randomGamma(t*.5)},randomF:function(t,r){var a,n;return t<=0||r<=0?NaN:(a=this.randomChisquare(t),n=this.randomChisquare(r),a*r/(n*t))},randomT:function(t){var r,a;return t<=0?NaN:(r=this.randomNormal(0,1),a=this.randomChisquare(t),r/Math.sqrt(a/t))},randomBinomial:function(t,r){var a,n,s,o,l,u;if(r<0||r>1||t<0)return NaN;if(r===0)return 0;if(r===1)return t;if(t===0)return 0;if(t===1)return Math.random()<r?1:0;if(r>.5)return t-this.randomBinomial(t,1-r);if(t<100){if(a=-1,n=0,s=Math.log(1-r),s===0)return 0;do a+=1,n+=Math.floor(Math.log(Math.random())/s)+1;while(n<t)}else o=1+Math.floor(t*.5),l=t-o+1,a=this.randomBeta(o,l),a>=r?(u=this.randomBinomial(o-1,r/a),a=u):(u=this.randomBinomial(l-1,(r-a)/(1-a)),a=o+u);return a},randomGeometric:function(t){var r;return t<0||t>1?NaN:(r=Math.random(),Math.ceil(Math.log(r)/Math.log(1-t)))},randomPoisson:function(t){var r=Math.exp(-t),a,n=0,s=1,o,l=7/8;if(t<=0)return NaN;if(t<10){do s*=Math.random(),n+=1;while(s>r);a=n-1}else n=Math.floor(l*t),o=this.randomGamma(n),o<t?a=n+this.randomPoisson(t-o):a=this.randomBinomial(n-1,t/o);return a},randomPareto:function(t,r){var a=Math.random();return t<=0||r<=0?NaN:r*Math.pow(1-a,-1/t)},randomHypergeometric:function(t,r,a){var n,s,o=0,l=t+r-a,u=Math.min(t,r),h=u;if(t<1||r<1||a>t+r)return NaN;for(n=a;h*n>0;)s=Math.random(),h-=Math.floor(s+h/(l+n)),n-=1;return o=u-h,t<=r?o:a-o},histogram:function(t,r){var a,n,s,o,l,u,h,c,f,d=[],p=[],v=0;for(u=r.bins||10,c=r.range||!1,c===!1?(o=Math.min.apply(null,t),l=Math.max.apply(null,t)):(o=c[0],l=c[1]),u>0?h=(l-o)/(u-1):h=0,a=0;a<u;a++)d.push(0),p.push(o+a*h);for(n=t.length,a=0;a<n;a++)s=Math.floor((t[a]-o)/h),s>=0&&s<u?d[s]+=1:v+=1;if(r.density)for(f=JXG$1.Math.Statistics.sum(d)+v,a=0;a<u;a++)d[a]/=f*h;if(r.cumulative){if(r.density)for(a=0;a<u;a++)d[a]*=h;for(a=1;a<u;a++)d[a]+=d[a-1]}return[d,p]}};const Stat=Mat.Statistics;var predefinedButcher={rk4:{s:4,A:[[0,0,0,0],[.5,0,0,0],[0,.5,0,0],[0,0,1,0]],b:[1/6,1/3,1/3,1/6],c:[0,.5,.5,1]},heun:{s:2,A:[[0,0],[1,0]],b:[.5,.5],c:[0,1]},euler:{s:1,A:[[0]],b:[1],c:[0]}};Mat.Numerics={Gauss:function(t,r){var a,n,s,o,l,u=Mat.eps,h=t.length>0?t[0].length:0;if(h!==r.length||h!==t.length)throw new Error("JXG.Math.Numerics.Gauss: Dimensions don't match. A must be a square matrix and b must be of the same length as A.");for(o=[],l=r.slice(0,h),a=0;a<h;a++)o[a]=t[a].slice(0,h);for(n=0;n<h;n++){for(a=h-1;a>n;a--)if(Math.abs(o[a][n])>u)if(Math.abs(o[n][n])<u)JXG$1.swap(o,a,n),JXG$1.swap(l,a,n);else for(o[a][n]/=o[n][n],l[a]-=o[a][n]*l[n],s=n+1;s<h;s++)o[a][s]-=o[a][n]*o[n][s];if(Math.abs(o[n][n])<u)throw new Error("JXG.Math.Numerics.Gauss(): The given matrix seems to be singular.")}return this.backwardSolve(o,l,!0),l},backwardSolve:function(t,r,a){var n,s,o,l,u;for(a?n=r:n=r.slice(0,r.length),s=t.length,o=t.length>0?t[0].length:0,l=s-1;l>=0;l--){for(u=o-1;u>l;u--)n[l]-=t[l][u]*n[u];n[l]/=t[l][l]}return n},gaussBareiss:function(t){var r,a,n,s,o,l,u,h,c,f=Mat.eps;if(u=t.length,u<=0)return 0;for(t[0].length<u&&(u=t[0].length),h=[],s=0;s<u;s++)h[s]=t[s].slice(0,u);for(a=1,n=1,r=0;r<u-1;r++){if(l=h[r][r],Math.abs(l)<f){for(s=r+1;s<u&&!(Math.abs(h[s][r])>=f);s++);if(s===u)return 0;for(o=r;o<u;o++)c=h[s][o],h[s][o]=h[r][o],h[r][o]=c;n=-n,l=h[r][r]}for(s=r+1;s<u;s++)for(o=r+1;o<u;o++)c=l*h[s][o]-h[s][r]*h[r][o],h[s][o]=c/a;a=l}return n*h[u-1][u-1]},det:function(t){var r=t.length;return r===2&&t[0].length===2?t[0][0]*t[1][1]-t[1][0]*t[0][1]:this.gaussBareiss(t)},Jacobi:function(t){var r,a,n,s,o,l,u,h,c=Mat.eps*Mat.eps,f=0,d=t.length,p=[[0,0,0],[0,0,0],[0,0,0]],v=[[0,0,0],[0,0,0],[0,0,0]],y=0;for(r=0;r<d;r++){for(a=0;a<d;a++)p[r][a]=0,v[r][a]=t[r][a],f+=Math.abs(v[r][a]);p[r][r]=1}if(d===1)return[v,p];if(f<=0)return[v,p];f/=d*d;do{for(h=0,a=1;a<d;a++)for(r=0;r<a;r++)if(s=Math.abs(v[r][a]),h+=s,s>=c){for(s=Math.atan2(2*v[r][a],v[r][r]-v[a][a])*.5,o=Math.sin(s),l=Math.cos(s),n=0;n<d;n++)u=v[n][r],v[n][r]=l*u+o*v[n][a],v[n][a]=-o*u+l*v[n][a],u=p[n][r],p[n][r]=l*u+o*p[n][a],p[n][a]=-o*u+l*p[n][a];for(v[r][r]=l*v[r][r]+o*v[a][r],v[a][a]=-o*v[r][a]+l*v[a][a],v[r][a]=0,n=0;n<d;n++)v[r][n]=v[n][r],v[a][n]=v[n][a]}y+=1}while(Math.abs(h)/f>c&&y<2e3);return[v,p]},NewtonCotes:function(t,r,a){var n,s,o,l=0,u=a&&JXG$1.isNumber(a.number_of_nodes)?a.number_of_nodes:28,h={trapez:!0,simpson:!0,milne:!0},c=a&&a.integration_type&&h.hasOwnProperty(a.integration_type)&&h[a.integration_type]?a.integration_type:"milne",f=(t[1]-t[0])/u;switch(c){case"trapez":for(l=(r(t[0])+r(t[1]))*.5,n=t[0],s=0;s<u-1;s++)n+=f,l+=r(n);l*=f;break;case"simpson":if(u%2>0)throw new Error("JSXGraph:  INT_SIMPSON requires config.number_of_nodes dividable by 2.");for(o=u/2,l=r(t[0])+r(t[1]),n=t[0],s=0;s<o-1;s++)n+=2*f,l+=2*r(n);for(n=t[0]-f,s=0;s<o;s++)n+=2*f,l+=4*r(n);l*=f/3;break;default:if(u%4>0)throw new Error("JSXGraph: Error in INT_MILNE: config.number_of_nodes must be a multiple of 4");for(o=u*.25,l=7*(r(t[0])+r(t[1])),n=t[0],s=0;s<o-1;s++)n+=4*f,l+=14*r(n);for(n=t[0]-3*f,s=0;s<o;s++)n+=4*f,l+=32*(r(n)+r(n+2*f));for(n=t[0]-2*f,s=0;s<o;s++)n+=4*f,l+=12*r(n);l*=2*f/45}return l},Romberg:function(t,r,a){var n,s,o,l,u,h,c,f,d=[],p=0,v=1/0,y=a&&JXG$1.isNumber(a.max_iterations)?a.max_iterations:20,b=a&&JXG$1.isNumber(a.eps)?a.eps:a.eps||1e-7;for(n=t[0],s=t[1],o=s-n,u=1,d[0]=.5*o*(r(n)+r(s)),h=0;h<y;++h){for(l=0,o*=.5,u*=2,f=1,c=1;c<u;c+=2)l+=r(n+c*o);for(d[h+1]=.5*d[h]+l*o,p=d[h+1],c=h-1;c>=0;--c)f*=4,d[c]=d[c+1]+(d[c+1]-d[c])/(f-1),p=d[c];if(Math.abs(p-v)<b*Math.abs(p))break;v=p}return p},GaussLegendre:function(t,r,a){var n,s,o,l,u,h,c=0,f=[],d=[],p,v,y=a&&JXG$1.isNumber(a.n)?a.n:12;if(y>18&&(y=18),f[2]=[.5773502691896257],d[2]=[1],f[4]=[.33998104358485626,.8611363115940526],d[4]=[.6521451548625461,.34785484513745385],f[6]=[.2386191860831969,.6612093864662645,.932469514203152],d[6]=[.46791393457269104,.3607615730481386,.17132449237917036],f[8]=[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],d[8]=[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],f[10]=[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],d[10]=[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],f[12]=[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],d[12]=[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],f[14]=[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],d[14]=[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],f[16]=[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499],d[16]=[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096],f[18]=[.0847750130417353,.2518862256915055,.41175116146284263,.5597708310739475,.6916870430603532,.8037049589725231,.8926024664975557,.9558239495713977,.9915651684209309],d[18]=[.1691423829631436,.16427648374583273,.15468467512626524,.14064291467065065,.12255520671147846,.10094204410628717,.07642573025488905,.0497145488949698,.02161601352648331],f[3]=[0,.7745966692414834],d[3]=[.8888888888888888,.5555555555555556],f[5]=[0,.5384693101056831,.906179845938664],d[5]=[.5688888888888889,.47862867049936647,.23692688505618908],f[7]=[0,.4058451513773972,.7415311855993945,.9491079123427585],d[7]=[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],f[9]=[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],d[9]=[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],f[11]=[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],d[11]=[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],f[13]=[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],d[13]=[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],f[15]=[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],d[15]=[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],f[17]=[0,.17848418149584785,.3512317634538763,.5126905370864769,.6576711592166907,.7815140038968014,.8802391537269859,.9506755217687678,.9905754753144174],d[17]=[.17944647035620653,.17656270536699264,.16800410215645004,.15404576107681028,.13513636846852548,.11188384719340397,.08503614831717918,.0554595293739872,.02414830286854793],n=t[0],s=t[1],l=y+1>>1,p=f[y],v=d[y],h=.5*(s-n),u=.5*(s+n),y&!0)for(c=v[0]*r(u),o=1;o<l;++o)c+=v[o]*(r(u+h*p[o])+r(u-h*p[o]));else for(c=0,o=0;o<l;++o)c+=v[o]*(r(u+h*p[o])+r(u-h*p[o]));return h*c},_rescale_error:function(t,r,a){var n,s,o=22250738585072014e-324,l=2220446049250313e-31;return t=Math.abs(t),a!==0&&t!==0&&(n=Math.pow(200*t/a,1.5),n<1?t=a*n:t=a),r>o/(50*l)&&(s=50*l*r,s>t&&(t=s)),t},_gaussKronrod:function(t,r,a,n,s,o,l){var u=t[0],h=t[1],c,f,d=.5*(u+h),p=.5*(h-u),v=Math.abs(p),y=r(d),b=0,_=y*o[a-1],N=Math.abs(_),M=0,C=0,$=0,w,A,X,O,G,R,B,F=[],U=[];for(a%2===0&&(b=y*s[a/2-1]),c=Math.floor((a-1)/2),w=0;w<c;w++)A=w*2+1,O=p*n[A],G=r(d-O),R=r(d+O),B=G+R,F[A]=G,U[A]=R,b+=s[w]*B,_+=o[A]*B,N+=o[A]*(Math.abs(G)+Math.abs(R));for(c=Math.floor(a/2),w=0;w<c;w++)X=w*2,O=p*n[X],G=r(d-O),R=r(d+O),F[X]=G,U[X]=R,_+=o[X]*(G+R),N+=o[X]*(Math.abs(G)+Math.abs(R));for(C=_*.5,M=o[a-1]*Math.abs(y-C),w=0;w<a-1;w++)M+=o[w]*(Math.abs(F[w]-C)+Math.abs(U[w]-C));return $=(_-b)*p,_*=p,N*=v,M*=v,f=_,l.abserr=this._rescale_error($,N,M),l.resabs=N,l.resasc=M,f},GaussKronrod15:function(t,r,a){var n=[.9914553711208126,.9491079123427585,.8648644233597691,.7415311855993945,.5860872354676911,.4058451513773972,.20778495500789848,0],s=[.1294849661688697,.27970539148927664,.3818300505051189,.4179591836734694],o=[.022935322010529224,.06309209262997856,.10479001032225019,.14065325971552592,.1690047266392679,.19035057806478542,.20443294007529889,.20948214108472782];return this._gaussKronrod(t,r,8,n,s,o,a)},GaussKronrod21:function(t,r,a){var n=[.9956571630258081,.9739065285171717,.9301574913557082,.8650633666889845,.7808177265864169,.6794095682990244,.5627571346686047,.4333953941292472,.2943928627014602,.14887433898163122,0],s=[.06667134430868814,.1494513491505806,.21908636251598204,.26926671930999635,.29552422471475287],o=[.011694638867371874,.032558162307964725,.054755896574351995,.07503967481091996,.0931254545836976,.10938715880229764,.12349197626206584,.13470921731147334,.14277593857706009,.14773910490133849,.1494455540029169];return this._gaussKronrod(t,r,11,n,s,o,a)},GaussKronrod31:function(t,r,a){var n=[.9980022986933971,.9879925180204854,.9677390756791391,.937273392400706,.8972645323440819,.8482065834104272,.790418501442466,.7244177313601701,.650996741297417,.5709721726085388,.4850818636402397,.3941513470775634,.29918000715316884,.20119409399743451,.1011420669187175,0],s=[.03075324199611727,.07036604748810812,.10715922046717194,.13957067792615432,.16626920581699392,.1861610000155622,.19843148532711158,.2025782419255613],o=[.005377479872923349,.015007947329316122,.02546084732671532,.03534636079137585,.04458975132476488,.05348152469092809,.06200956780067064,.06985412131872826,.07684968075772038,.08308050282313302,.08856444305621176,.09312659817082532,.09664272698362368,.09917359872179196,.10076984552387559,.10133000701479154];return this._gaussKronrod(t,r,16,n,s,o,a)},_workspace:function(t,r){return{limit:r,size:0,nrmax:0,i:0,alist:[t[0]],blist:[t[1]],rlist:[0],elist:[0],order:[0],level:[0],qpsrt:function(){var a=this.size-1,n=this.limit,s,o,l,u,h,c=this.nrmax,f=this.order[c];if(a<2){this.order[0]=0,this.order[1]=1,this.i=f;return}for(s=this.elist[f];c>0&&s>this.elist[this.order[c-1]];)this.order[c]=this.order[c-1],c--;for(a<n/2+2?h=a:h=n-a+1,l=c+1;l<h&&s<this.elist[this.order[l]];)this.order[l-1]=this.order[l],l++;for(this.order[l-1]=f,o=this.elist[a],u=h-1;u>l-2&&o>=this.elist[this.order[u]];)this.order[u+1]=this.order[u],u--;this.order[u+1]=a,f=this.order[c],this.i=f,this.nrmax=c},set_initial_result:function(a,n){this.size=1,this.rlist[0]=a,this.elist[0]=n},update:function(a,n,s,o,l,u,h,c){var f=this.i,d=this.size,p=this.level[this.i]+1;c>o?(this.alist[f]=l,this.rlist[f]=h,this.elist[f]=c,this.level[f]=p,this.alist[d]=a,this.blist[d]=n,this.rlist[d]=s,this.elist[d]=o,this.level[d]=p):(this.blist[f]=n,this.rlist[f]=s,this.elist[f]=o,this.level[f]=p,this.alist[d]=l,this.blist[d]=u,this.rlist[d]=h,this.elist[d]=c,this.level[d]=p),this.size++,p>this.maximum_level&&(this.maximum_level=p),this.qpsrt()},retrieve:function(){var a=this.i;return{a:this.alist[a],b:this.blist[a],r:this.rlist[a],e:this.elist[a]}},sum_results:function(){var a=this.size,n,s=0;for(n=0;n<a;n++)s+=this.rlist[n];return s},subinterval_too_small:function(a,n,s){var o=2220446049250313e-31,l=22250738585072014e-324,u=(1+100*o)*(Math.abs(n)+1e3*l);return Math.abs(a)<=u&&Math.abs(s)<=u}}},Qag:function(t,r,a){var n=2220446049250313e-31,s=this._workspace(t,1e3),o=a&&JXG$1.isNumber(a.limit)?a.limit:15,l=a&&JXG$1.isNumber(a.epsrel)?a.epsrel:1e-7,u=a&&JXG$1.isNumber(a.epsabs)?a.epsabs:1e-7,h=a&&JXG$1.isFunction(a.q)?a.q:this.GaussKronrod15,c={},f,d,p,v,y,b,_,N,M=0,C=0,$=0,w=0,A,X,O,G,R,B,F,U,q,ee=0,z=0,Y=0,K=0,Z=0,ne=0,j,V,L,ae;if(o>s.limit&&JXG$1.warn("iteration limit exceeds available workspace"),u<=0&&(l<50*Mat.eps||l<5e-29)&&JXG$1.warn("tolerance cannot be acheived with given epsabs and epsrel"),p=h.apply(this,[t,r,c]),v=c.abserr,y=c.resabs,b=c.resasc,s.set_initial_result(p,v),N=Math.max(u,l*Math.abs(p)),A=50*n*y,v<=A&&v>N)return _=p,JXG$1.warn("cannot reach tolerance because of roundoff error on first attempt"),-1/0;if(v<=N&&v!==b||v===0)return _=p,_;if(o===1)return _=p,JXG$1.warn("a maximum of one iteration was insufficient"),-1/0;f=p,d=v,M=1;do ee=0,z=0,Y=0,K=0,Z=0,ne=0,L=s.retrieve(),B=L.a,F=L.b,U=L.r,q=L.e,X=B,O=.5*(B+F),G=O,R=F,ee=h.apply(this,[[X,O],r,c]),K=c.abserr,j=c.resasc,z=h.apply(this,[[G,R],r,c]),Z=c.abserr,V=c.resasc,Y=ee+z,ne=K+Z,d+=ne-q,f+=Y-U,j!==K&&V!==Z&&(ae=U-Y,Math.abs(ae)<=1e-5*Math.abs(Y)&&ne>=.99*q&&C++,M>=10&&ne>q&&$++),N=Math.max(u,l*Math.abs(f)),d>N&&((C>=6||$>=20)&&(w=2),s.subinterval_too_small(X,G,R)&&(w=3)),s.update(X,O,ee,K,G,R,z,Z),L=s.retrieve(),B=L.a_i,F=L.b_i,U=L.r_i,q=L.e_i,M++;while(M<o&&!w&&d>N);return _=s.sum_results(),_},I:function(t,r){return this.Qag(t,r,{q:this.GaussKronrod15,limit:15,epsrel:1e-7,epsabs:1e-7})},Newton:function(t,r,a){var n,s=0,o=Mat.eps,l=t.apply(a,[r]);for(JXG$1.isArray(r)&&(r=r[0]);s<50&&Math.abs(l)>o;)n=this.D(t,a)(r),Math.abs(n)>o?r-=l/n:r+=Math.random()*.2-1,l=t.apply(a,[r]),s+=1;return r},root:function(t,r,a){return this.chandrupatla(t,r,a)},generalizedNewton:function(t,r,a,n){var s,o,l,u,h,c,f,d,p,v,y,b,_,N,M=0;for(s=a,o=n,f=t.X(s)-r.X(o),d=t.Y(s)-r.Y(o),v=f*f+d*d,y=this.D(t.X,t),b=this.D(r.X,r),_=this.D(t.Y,t),N=this.D(r.Y,r);v>Mat.eps&&M<10;)l=y(s),u=-b(o),h=_(s),c=-N(o),p=l*c-u*h,s-=(c*f-u*d)/p,o-=(l*d-h*f)/p,f=t.X(s)-r.X(o),d=t.Y(s)-r.Y(o),v=f*f+d*d,M+=1;return Math.abs(s)<Math.abs(o)?[t.X(s),t.Y(s)]:[r.X(o),r.Y(o)]},generalizedDampedNewtonCurves:function(t,r,a,n,s,o){var l,u,h,c,f,d,p,v,y,b,_,N,M,C,$=40,w=0;for(l=a,u=n,_=t.Ft(l),N=r.Ft(u),p=_[1]-N[1],v=_[2]-N[2],b=p*p+v*v,M=function(A,X){var O=Mat.eps,G=t.Ft(A-O),R=t.Ft(A+O),B=r.Ft(X-O),F=r.Ft(X+O);return[[(R[1]-G[1])/(2*O),-(F[1]-B[1])/(2*O)],[(R[2]-G[2])/(2*O),-(F[2]-B[2])/(2*O)]]};b>o&&w<$;)C=M(l,u),h=C[0][0],c=C[0][1],f=C[1][0],d=C[1][1],y=h*d-c*f,l-=s*(d*p-c*v)/y,u-=s*(h*v-f*p)/y,_=t.Ft(l),N=r.Ft(u),p=_[1]-N[1],v=_[2]-N[2],b=p*p+v*v,w+=1;return[l,u,b]},generalizedDampedNewton:function(t,r,a,n,s,o,l){var u,h=[],c,f,d,p,v,y,b,_,N,M,C,$=0;if(l=l||40,h=n.slice(0,a),_=t(h,a),a===2){for(_=t(h,a),v=_[0],y=_[1],M=v*v+y*y;M>o&&$<l;)N=r(h,a),c=N[0][0],f=N[0][1],d=N[1][0],p=N[1][1],b=c*p-f*d,h[0]-=s*(p*v-f*y)/b,h[1]-=s*(c*y-d*v)/b,_=t(h,a),v=_[0],y=_[1],M=v*v+y*y,$+=1;return[h,M]}else{for(_=t(h,a),M=Mat.innerProduct(_,_,a);M>o&&$<l;){for(N=Mat.inverse(r(h,a)),C=Mat.matVecMult(N,_),u=0;u<a;u++)h[u]-=s*C[u];_=t(h,a),M=Mat.innerProduct(_,_,a),$+=1}return[h,M]}},Neville:function(t){var r=[],a=function(o){return function(l,u){var h,c,f,d=Mat.binomial,p=t.length,v=p-1,y=0,b=0;if(!u)for(f=1,h=0;h<p;h++)r[h]=d(v,h)*f,f*=-1;for(c=l,h=0;h<p;h++){if(c===0)return t[h][o]();f=r[h]/c,c-=1,y+=t[h][o]()*f,b+=f}return y/b}},n=a("X"),s=a("Y");return[n,s,0,function(){return t.length-1}]},splineDef:function(t,r){var a,n,s,o=Math.min(t.length,r.length),l=[],u=[],h=[],c=[],f=[],d=[];if(o===2)return[0,0];for(n=0;n<o;n++)a={X:t[n],Y:r[n]},h.push(a);for(h.sort(function(p,v){return p.X-v.X}),n=0;n<o;n++)t[n]=h[n].X,r[n]=h[n].Y;for(n=0;n<o-1;n++)c.push(t[n+1]-t[n]);for(n=0;n<o-2;n++)f.push(6*(r[n+2]-r[n+1])/c[n+1]-6*(r[n+1]-r[n])/c[n]);for(l.push(2*(c[0]+c[1])),u.push(f[0]),n=0;n<o-3;n++)s=c[n+1]/l[n],l.push(2*(c[n+1]+c[n+2])-s*c[n+1]),u.push(f[n+1]-s*u[n]);for(d[o-3]=u[o-3]/l[o-3],n=o-4;n>=0;n--)d[n]=(u[n]-c[n+1]*d[n+1])/l[n];for(n=o-3;n>=0;n--)d[n+1]=d[n];return d[0]=0,d[o-1]=0,d},splineEval:function(t,r,a,n){var s,o,l,u,h,c,f,d=Math.min(r.length,a.length),p=1,v=!1,y=[];for(JXG$1.isArray(t)?(p=t.length,v=!0):t=[t],s=0;s<p;s++){if(t[s]<r[0]||r[s]>r[d-1])return NaN;for(o=1;o<d&&!(t[s]<=r[o]);o++);o-=1,l=a[o],u=(a[o+1]-a[o])/(r[o+1]-r[o])-(r[o+1]-r[o])/6*(n[o+1]+2*n[o]),h=n[o]/2,c=(n[o+1]-n[o])/(6*(r[o+1]-r[o])),f=t[s]-r[o],y.push(l+(u+(h+c*f)*f)*f)}return v?y:y[0]},generatePolynomialTerm:function(t,r,a,n){var s,o=[];for(s=r;s>=0;s--)JXG$1.concat(o,["(",t[s].toPrecision(n),")"]),s>1?JXG$1.concat(o,["*",a,"<sup>",s,"<","/sup> + "]):s===1&&JXG$1.concat(o,["*",a," + "]);return o.join("")},lagrangePolynomial:function(t){var r=[],a=this,n=function(s,o){var l,u,h,c,f=t.length,d=0,p=0;if(!o)for(l=0;l<f;l++){for(r[l]=1,h=t[l].X(),u=0;u<f;u++)u!==l&&(r[l]*=h-t[u].X());r[l]=1/r[l]}for(l=0;l<f;l++){if(h=t[l].X(),s===h)return t[l].Y();c=r[l]/(s-h),p+=c,d+=c*t[l].Y()}return d/p};return n.getTerm=function(s,o,l){return a.lagrangePolynomialTerm(t,s,o,l)()},n.getCoefficients=function(){return a.lagrangePolynomialCoefficients(t)()},n},lagrangePolynomialTerm:function(t,r,a,n){var s=this;return function(){var o=t.length,l=[],u=!0,h,c,f,d;for(a=a||"x",n===void 0&&(n=" * "),h=o-1,l=s.lagrangePolynomialCoefficients(t)(),c="",f=0;f<l.length;f++)d=l[f],!(Math.abs(d)<Mat.eps)&&(JXG$1.exists(r)&&(d=JXG$1._round10(d,-r)),u?(c+=d>0?d:"-"+-d,u=!1):c+=d>0?" + "+d:" - "+-d,h-f>1?c+=n+a+"^"+(h-f):h-f===1&&(c+=n+a));return c}},lagrangePolynomialCoefficients:function(t){return function(){var r=t.length,a=[],n=[],s=[],o,l,u,h;for(l=0;l<r;l++)s[l]=0;for(o=0;o<r;o++){for(u=t[o].Y(),h=t[o].X(),a=[],l=0;l<r;l++)l!==o&&(u/=h-t[l].X(),a.push(t[l].X()));for(n=[1].concat(Mat.Vieta(a)),l=0;l<n.length;l++)s[l]+=(l%2===1?-1:1)*n[l]*u}return s}},_initCubicPoly:function(t,r,a,n){return[t,a,-3*t+3*r-2*a-n,2*t-2*r+a+n]},CardinalSpline:function(t,r,a){var n,s=[],o,l,u,h=this;return JXG$1.isFunction(r)?u=r:u=function(){return r},a===void 0&&(a="uniform"),o=function(c){return function(f,d){var p,v,y,b,_,N,M,C,$,w;if(t.length<2)return NaN;if(!d)for(l=u(),y={X:function(){return 2*t[0].X()-t[1].X()},Y:function(){return 2*t[0].Y()-t[1].Y()},Dist:function(A){var X=this.X()-A.X(),O=this.Y()-A.Y();return Mat.hypot(X,O)}},b={X:function(){return 2*t[t.length-1].X()-t[t.length-2].X()},Y:function(){return 2*t[t.length-1].Y()-t[t.length-2].Y()},Dist:function(A){var X=this.X()-A.X(),O=this.Y()-A.Y();return Mat.hypot(X,O)}},n=[y].concat(t,[b]),w=n.length,s[c]=[],p=0;p<w-3;p++)a==="centripetal"?(M=n[p].Dist(n[p+1]),C=n[p+2].Dist(n[p+1]),$=n[p+3].Dist(n[p+2]),M=Math.sqrt(M),C=Math.sqrt(C),$=Math.sqrt($),C<Mat.eps&&(C=1),M<Mat.eps&&(M=C),$<Mat.eps&&($=C),_=(n[p+1][c]()-n[p][c]())/M-(n[p+2][c]()-n[p][c]())/(C+M)+(n[p+2][c]()-n[p+1][c]())/C,N=(n[p+2][c]()-n[p+1][c]())/C-(n[p+3][c]()-n[p+1][c]())/($+C)+(n[p+3][c]()-n[p+2][c]())/$,_*=C,N*=C,s[c][p]=h._initCubicPoly(n[p+1][c](),n[p+2][c](),l*_,l*N)):s[c][p]=h._initCubicPoly(n[p+1][c](),n[p+2][c](),l*(n[p+2][c]()-n[p][c]()),l*(n[p+3][c]()-n[p+1][c]()));return isNaN(f)?NaN:(w=t.length,f<=0?t[0][c]():f>=w?t[w-1][c]():(p=Math.floor(f),p===f?t[p][c]():(f-=p,v=s[c][p],v===void 0?NaN:((v[3]*f+v[2])*f+v[1])*f+v[0])))}},[o("X"),o("Y"),0,function(){return t.length-1}]},CatmullRomSpline:function(t,r){return this.CardinalSpline(t,.5,r)},regressionPolynomial:function(t,r,a){var n,s,o,l,u,h,c="";if(JXG$1.isPoint(t)&&JXG$1.isFunction(t.Value))s=function(){return t.Value()};else if(JXG$1.isFunction(t))s=t;else if(JXG$1.isNumber(t))s=function(){return t};else throw new Error("JSXGraph: Can't create regressionPolynomial from degree of type'"+typeof t+"'.");if(arguments.length===3&&JXG$1.isArray(r)&&JXG$1.isArray(a))u=0;else if(arguments.length===2&&JXG$1.isArray(r)&&r.length>0&&JXG$1.isPoint(r[0]))u=1;else if(arguments.length===2&&JXG$1.isArray(r)&&r.length>0&&r[0].usrCoords&&r[0].scrCoords)u=2;else throw new Error("JSXGraph: Can't create regressionPolynomial. Wrong parameters.");return h=function(f,d){var p,v,y,b,_,N,M,C,$,w=r.length;if($=Math.floor(s()),!d){if(u===1)for(o=[],l=[],p=0;p<w;p++)o[p]=r[p].X(),l[p]=r[p].Y();if(u===2)for(o=[],l=[],p=0;p<w;p++)o[p]=r[p].usrCoords[1],l[p]=r[p].usrCoords[2];if(u===0)for(o=[],l=[],p=0;p<w;p++)JXG$1.isFunction(r[p])?o.push(r[p]()):o.push(r[p]),JXG$1.isFunction(a[p])?l.push(a[p]()):l.push(a[p]);for(y=[],v=0;v<w;v++)y.push([1]);for(p=1;p<=$;p++)for(v=0;v<w;v++)y[v][p]=y[v][p-1]*o[v];_=l,b=Mat.transpose(y),N=Mat.matMatMult(b,y),M=Mat.matVecMult(b,_),n=Mat.Numerics.Gauss(N,M),c=Mat.Numerics.generatePolynomialTerm(n,$,"x",3)}for(C=n[$],p=$-1;p>=0;p--)C=C*f+n[p];return C},h.getTerm=function(){return c},h},bezier:function(t){var r,a,n=function(s){return function(o,l){var u=Math.floor(o)*3,h=o%1,c=1-h;return l||(a=3*Math.floor((t.length-1)/3),r=Math.floor(a/3)),o<0?t[0][s]():o>=r?t[a][s]():isNaN(o)?NaN:c*c*(c*t[u][s]()+3*h*t[u+1][s]())+(3*c*t[u+2][s]()+h*t[u+3][s]())*h*h}};return[n("X"),n("Y"),0,function(){return Math.floor(t.length/3)}]},bspline:function(t,r){var a,n=function(l,u){var h,c=[];for(h=0;h<l+u+1;h++)h<u?c[h]=0:h<=l?c[h]=h-u+1:c[h]=l-u+2;return c},s=function(l,u,h,c){var f,d,p,v,y,b=[];for(u[c]<=l&&l<u[c+1]?b[c]=1:b[c]=0,f=2;f<=h;f++)for(d=c-f+1;d<=c;d++)d<=c-f+1||d<0?p=0:p=b[d],d>=c?v=0:v=b[d+1],y=u[d+f-1]-u[d],y===0?b[d]=0:b[d]=(l-u[d])/y*p,y=u[d+f]-u[d+1],y!==0&&(b[d]+=(u[d+f]-l)/y*v);return b},o=function(l){return function(u,h){var c,f,d,p=[],v=t.length,y=v-1,b=r;if(y<=0)return NaN;if(y+2<=b&&(b=y+1),u<=0)return t[0][l]();if(u>=y-b+2)return t[y][l]();for(d=Math.floor(u)+b-1,a=n(y,b),p=s(u,a,b,d),c=0,f=d-b+1;f<=d;f++)f<v&&f>=0&&(c+=t[f][l]()*p[f]);return c}};return[o("X"),o("Y"),0,function(){return t.length-1}]},D:function(t,r){return JXG$1.exists(r)?function(a,n){var s=1e-5,o=s*2;return(t.apply(r,[a+s,n])-t.apply(r,[a-s,n]))/o}:function(a,n){var s=1e-5,o=s*2;return(t(a+s,n)-t(a-s,n))/o}},_riemannValue:function(t,r,a,n){var s,o,l,u;if(n<0&&(a!=="trapezoidal"&&(t=t+n),n*=-1,a==="lower"?a="upper":a==="upper"&&(a="lower")),u=n*.01,a==="right")s=r(t+n);else if(a==="middle")s=r(t+n*.5);else if(a==="left"||a==="trapezoidal")s=r(t);else if(a==="lower"){for(s=r(t),l=t+u;l<=t+n;l+=u)o=r(l),o<s&&(s=o);o=r(t+n),o<s&&(s=o)}else if(a==="upper"){for(s=r(t),l=t+u;l<=t+n;l+=u)o=r(l),o>s&&(s=o);o=r(t+n),o>s&&(s=o)}else a==="random"?s=r(t+n*Math.random()):a==="simpson"?s=(r(t)+4*r(t+n*.5)+r(t+n))/6:s=r(t);return s},riemann:function(t,r,a,n,s){var o,l,u,h,c,f,d,p,v,y,b,_=30,N=[],M=[],C=n,$=0,w,A,X;if(JXG$1.isArray(t)?(X=t[0],A=t[1]):A=t,r=Math.floor(r),r<=0)return[N,M,$];for(l=(s-n)/r,o=0;o<r;o++){if(a==="simpson"){for($+=this._riemannValue(C,A,a,l)*l,b=l*.5,d=A(C),p=A(C+b),v=A(C+2*b),h=(v+d-2*p)/(b*b)*.5,c=(v-d)/(2*b),f=p,u=0;u<_;u++)y=u*l/_-b,N.push(C+y+b),M.push(h*y*y+c*y+f);C+=l,w=v}else w=this._riemannValue(C,A,a,l),N.push(C),M.push(w),C+=l,a==="trapezoidal"?(v=A(C),$+=(w+v)*.5*l,w=v):$+=w*l,N.push(C),M.push(w);N.push(C),M.push(w)}for(o=0;o<r;o++){if(a==="simpson"&&X){for($-=this._riemannValue(C,X,a,-l)*l,b=l*.5,d=X(C),p=X(C-b),v=X(C-2*b),h=(v+d-2*p)/(b*b)*.5,c=(v-d)/(2*b),f=p,u=0;u<_;u++)y=u*l/_-b,N.push(C-y-b),M.push(h*y*y+c*y+f);C-=l,w=v}else X?w=this._riemannValue(C,X,a,-l):w=0,N.push(C),M.push(w),C-=l,X&&(a==="trapezoidal"?(v=X(C),$-=(w+v)*.5*l,w=v):$-=w*l);N.push(C),M.push(w),N.push(C),M.push(A(C))}return[N,M,$]},riemannsum:function(t,r,a,n,s){return JXG$1.deprecated("Numerics.riemannsum()","Numerics.riemann()[2]"),this.riemann(t,r,a,n,s)[2]},rungeKutta:function(t,r,a,n,s){var o,l,u,h,c,f,d=[],p=[],v=(a[1]-a[0])/n,y=a[0],b=r.length,_=[],N=0;for(JXG$1.isString(t)&&(t=predefinedButcher[t]||predefinedButcher.euler),f=t.s,d=r.slice(),l=0;l<=n;l++){for(_[N]=d.slice(),N++,h=[],u=0;u<f;u++){for(o=0;o<b;o++)p[o]=0;for(c=0;c<u;c++)for(o=0;o<b;o++)p[o]+=t.A[u][c]*v*h[c][o];for(o=0;o<b;o++)p[o]+=d[o];h.push(s(y+t.c[u]*v,p))}for(o=0;o<b;o++)p[o]=0;for(c=0;c<f;c++)for(o=0;o<b;o++)p[o]+=t.b[c]*h[c][o];for(o=0;o<b;o++)d[o]=d[o]+v*p[o];y+=v}return _},maxIterationsRoot:80,maxIterationsMinimize:500,findBracket:function(t,r,a){var n,s,o,l,u,h,c,f,d,p;if(JXG$1.isArray(r))return r;for(n=r,o=t.call(a,n),s=n===0?1:n,l=[n-.1*s,n+.1*s,n-1,n+1,n-.5*s,n+.5*s,n-.6*s,n+.6*s,n-1*s,n+1*s,n-2*s,n+2*s,n-5*s,n+5*s,n-10*s,n+10*s,n-50*s,n+50*s,n-100*s,n+100*s],p=l.length,d=0;d<p&&(u=l[d],h=t.call(a,u),!(o*h<=0));d++);return u<n&&(c=n,n=u,u=c,f=o,o=h,h=f),[n,o,u,h]},fzero:function(t,r,a){var n,s,o,l,u,h,c,f,d,p,v,y,b,_,N,M,C=Mat.eps,$=this.maxIterationsRoot,w=0;if(JXG$1.isArray(r)){if(r.length<2)throw new Error("JXG.Math.Numerics.fzero: length of array x0 has to be at least two.");f=this.findDomain(t,r,a),n=f[0],s=f[1],l=t.call(a,n),u=t.call(a,s)}else c=this.findBracket(t,r,a),n=c[0],l=c[1],s=c[2],u=c[3];if(Math.abs(l)<=C)return n;if(Math.abs(u)<=C)return s;if(l*u>0)return JXG$1.isArray(r)?this.fminbr(t,[n,s],a):this.Newton(t,n,a);for(o=n,h=l;w<$;){if(d=s-n,Math.abs(h)<Math.abs(u)&&(n=s,s=o,o=n,l=u,u=h,h=l),b=2*C*Math.abs(s)+C*.5,M=(o-s)*.5,Math.abs(M)<=b||Math.abs(u)<=C)return s;Math.abs(d)>=b&&Math.abs(l)>Math.abs(u)&&(y=o-s,n===o?(p=u/l,_=y*p,N=1-p):(N=l/h,p=u/h,v=u/l,_=v*(y*N*(N-p)-(s-n)*(p-1)),N=(N-1)*(p-1)*(v-1)),_>0?N=-N:_=-_,_<.75*y*N-Math.abs(b*N)*.5&&_<Math.abs(d*N*.5)&&(M=_/N)),Math.abs(M)<b&&(M=M>0?b:-b),n=s,l=u,s+=M,u=t.call(a,s),(u>0&&h>0||u<0&&h<0)&&(o=n,h=l),w++}return s},chandrupatla:function(t,r,a){var n,s,o,l,u,h=0,c=this.maxIterationsRoot,f=1+Math.random()*.001,d=.5*f,p=Mat.eps,v=1e-5,y,b,_,N,M,C,$,w,A,X,O,G,R,B,F,U,q,ee,z,Y,K;if(JXG$1.isArray(r)){if(r.length<2)throw new Error("JXG.Math.Numerics.fzero: length of array x0 has to be at least two.");n=r[0],o=t.call(a,n),s=r[1],l=t.call(a,s)}else u=this.findBracket(t,r,a),n=u[0],o=u[1],s=u[2],l=u[3];if(o*l>0)return JXG$1.isArray(r)?this.fminbr(t,[n,s],a):this.Newton(t,n,a);y=n,b=s,M=o,C=l;do{if(N=y+d*(b-y),w=t.call(a,N),Math.sign(w)===Math.sign(M)?(_=y,y=N,$=M,M=w):(_=b,b=y,$=C,C=M),y=N,M=w,A=y,X=M,Math.abs(C)<Math.abs(M)&&(A=b,X=C),O=2*p*Math.abs(A)+.5*v,G=O/Math.abs(b-y),G>.5||X===0)break;R=(y-b)/(_-b),B=(M-C)/($-C),F=1-Math.sqrt(1-R),U=Math.sqrt(R),F<B&&B<U?(q=(_-y)/(b-y),ee=M/(C-M),z=$/(C-$),Y=M/($-M),K=C/($-C),d=ee*z+Y*K*q):d=.5*f,d<G&&(d=G),d>1-G&&(d=1-G),h++}while(h<=c);return A},findDomain:function(t,r,a,n){var s,o,l,u,h,c=.3819660112501453,f=.001,d,p=20;if(n===void 0&&(n=!0),!JXG$1.isArray(r)||r.length<2)throw new Error("JXG.Math.Numerics.findDomain: length of array x0 has to be at least two.");if(h=r.slice(),s=h[0],o=h[1],u=t.call(a,s),isNaN(u)){for(d=0;o-s>f&&d<p;)l=(o-s)*c+s,u=t.call(a,l),isNaN(u)?s=l:o=l,d++;n?h[0]=s:h[0]=o}if(s=h[0],o=h[1],u=t.call(a,o),isNaN(u)){for(d=0;o-s>f&&d<p;)l=o-(o-s)*c,u=t.call(a,l),isNaN(u)?o=l:s=l,d++;n?h[1]=o:h[1]=s}return h},fminbr:function(t,r,a){var n,s,o,l,u,h,c,f,d,p,v,y,b,_,N,M,C,$=(3-Math.sqrt(5))*.5,w=Mat.eps,A=Mat.eps,X=this.maxIterationsMinimize,O=0;if(!JXG$1.isArray(r)||r.length<2)throw new Error("JXG.Math.Numerics.fminbr: length of array x0 has to be at least two.");for(d=this.findDomain(t,r,a),n=d[0],s=d[1],l=n+$*(s-n),c=t.call(a,l),o=l,u=l,h=c,f=c;O<X;){if(p=s-n,v=(n+s)*.5,y=A*Math.abs(o)+w/3,Math.abs(o-v)+p*.5<=2*y)return o;b=$*(o<v?s-o:n-o),Math.abs(o-u)>=y&&(M=(o-u)*(h-c),N=(o-l)*(h-f),_=(o-l)*N-(o-u)*M,N=2*(N-M),N>0?_=-_:N=-N,Math.abs(_)<Math.abs(b*N)&&_>N*(n-o+2*y)&&_<N*(s-o-2*y)&&(b=_/N)),Math.abs(b)<y&&(b>0?b=y:b=-y),M=o+b,C=t.call(a,M),C<=h?(M<o?s=o:n=o,l=u,u=o,o=M,c=f,f=h,h=C):(M<o?n=M:s=M,C<=f||u===o?(l=u,u=M,c=f,f=C):(C<=c||l===o||l===u)&&(l=M,c=C)),O+=1}return o},glomin:function(t,r){var a,n,s,o,l,u,h,c,f,d,p,v,y,b,_,N,M,C,$,w,A,X,O,G,R,B,F,U,q=1e7,ee=Mat.eps,z=Mat.eps*Mat.eps,Y=Mat.eps*Mat.eps*Mat.eps;if(R=r[0],B=r[1],F=t(R)<t(B)?R:B,a=B,U=a,n=R,M=t(B),A=M,$=t(R),N=$,M<N?N=M:U=R,B<=R)return N;for(f=.5*(1+16*Y)*q,F<=R||B<=F?_=.5*(R+B):_=F,C=t(_),c=3,o=n-_,h=9/11,C<N&&(U=_,N=C);;){if(l=n-a,u=_-a,G=B-n,X=$-C,O=$-M,y=l*l*X-o*o*O,d=y,v=2*(o*O-l*X),p=v,c<1e6||$<=N)for(;p*(y*(A-$)+G*p*($-N+ee))<G*f*y*(G*p-y)&&(s=n+y/p,w=t(s),w<N&&(U=s,N=w)),c=1611*c%1048576,p=1,y=(B-R)*1e-5*c,!(G<=y););else for(c=1611*c%1048576,p=1,y=(B-R)*1e-5*c;y<G;)p*(y*(A-$)+G*p*($-N+ee))<G*f*y*(G*p-y)&&(s=n+y/p,w=t(s),w<N&&(U=s,N=w)),c=1611*c%1048576,p=1,y=(B-R)*1e-5*c;for(y=f*o*l*u,b=Math.sqrt(($-N+ee)/f),h=.5*(1+h),d=h*(d+2*y*b),p=p+.5*v,y=-.5*(o+(X+2.01*z)/(o*f)),y<b||o<0?y=n+b:y=n+y,0<d*p?s=n+d/p:s=y;s=Math.max(s,y),B<=s?(s=B,w=A):w=t(s),w<N&&(U=s,N=w),o=s-n,!(s<=y||(d=2*($-w)/(q*o),(1+9*Y)*o<=Math.abs(d))||.5*f*(o*o+d*d)<=$-N+(w-N)+2*ee);)s=.5*(n+s),h=.9*h;if(B<=s)break;a=_,_=n,n=s,M=C,C=$,$=w}return[U,N]},polzeros:function(t,r,a,n,s){var o,l,u,h=[],c=[],f=[],d=function(_,N,M){var C,$,w=_.length-1;if(M=M||!1,M)for($=JXG$1.C.mult(w,_[w]),C=w-1;C>0;C--)$.mult(N),$.add(JXG$1.C.mult(_[C],C));else for($=JXG$1.C.copy(_[w]),C=w-1;C>=0;C--)$.mult(N),$.add(_[C]);return $},p=function(_,N,M){var C,$,w=_.length-1;if(M=M||!1,M)for($=JXG$1.C.mult(w,_[0]),C=w-1;C>0;C--)$.mult(N),$.add(JXG$1.C.mult(_[w-C],C));else for($=JXG$1.C.copy(_[0]),C=w-1;C>=0;C--)$.mult(N),$.add(_[w-C]);return $},v=function(_,N){var M,C,$=_.length-1;for(C=_[$],M=$-1;M>=0;M--)C=C*N+_[M];return C},y=function(_){var N,M,C=_.length-1,$=Math.PI*2/C,w=Math.PI/C*.5,A,X,O=[];for(A=JXG$1.C.mult(-1,_[C-1]),A.div(JXG$1.C.mult(C,_[C])),X=JXG$1.C.div(d(_,A),_[C]),M=Math.pow(JXG$1.C.abs(X),1/C),M===0&&(M=1),N=0;N<C;N++)_=new JXG$1.Complex(M*Math.cos($*N+w),M*Math.sin($*N+w)),O[N]=JXG$1.C.add(A,_);return O},b=function(_,N,M,C){var $,w,A,X=[],O=[],G,R,B=0,F,U,q,ee,z=C.length;for(w=0;w<z;w++)X.push(!1);for(w=0;w<_.length;w++)O.push(JXG$1.C.abs(_[w])*(4*w+1));for($=0;$<M&&B<z;$++)for(w=0;w<z;w++)if(!X[w]){if(F=d(_,C[w]),R=JXG$1.C.abs(C[w]),JXG$1.C.abs(F)<N*v(O,R)){if(X[w]=!0,B++,B===z)break;continue}for(R>1?(G=JXG$1.C.div(1,C[w]),ee=p(_,G,!0),ee.div(p(_,G)),ee.mult(G),F=JXG$1.C.sub(z,ee),F=JXG$1.C.div(C[w],F)):F.div(d(_,C[w],!0)),U=new JXG$1.Complex(0),A=0;A<z;A++)A!==w&&(q=JXG$1.C.sub(C[w],C[A]),q=JXG$1.C.div(1,q),U.add(q));U.mult(F),U=JXG$1.C.sub(1,U),F.div(U),C[w].sub(F)}return $};for(a=a||Number.EPSILON,n=n||30,l=t.length,JXG$1.isNumber(r)&&r>=0&&r<l-1&&(l=r+1),o=0;o<l;o++)h.push(new JXG$1.Complex(t[o]));for(o=0;o<l;o++)if(h[o].real!==0||h[o].imaginary!==0){u=o;break}for(o=0;o<u;o++)c.push(new JXG$1.Complex(0));for(h=h.slice(u),l=h.length,o=l-1;o>=0&&!(h[o].real!==0||h[o].imaginary!==0);o--)h.pop();if(l=h.length,l===0)return[];if(s)for(o=0;o<l-1;o++)f.push(new JXG$1.Complex(s[o]));else f=y(h);return b(h,a,n,f),f=c.concat(f),f.sort(function(_,N){return _.real<N.real?-1:_.real>N.real?1:0}),f},RamerDouglasPeucker:function(t,r){var a=[],n=[],s,o,l,u=!0,h=function(f,d,p){var v,y,b,_,N,M,C,$,w,A,X,O=Mat.eps*Mat.eps,G=1e4,R=0,B=d;if(p-d<2)return[-1,0];if(b=f[d].scrCoords,_=f[p].scrCoords,isNaN(b[1])||isNaN(b[2]))return[NaN,d];if(isNaN(_[1])||isNaN(_[2]))return[NaN,p];for(y=d+1;y<p;y++){if(N=f[y].scrCoords,isNaN(N[1])||isNaN(N[2]))return[NaN,y];M=N[1]-b[1],C=N[2]-b[2],$=_[1]-b[1],w=_[2]-b[2],M=M===1/0?G:M,C=C===1/0?G:C,$=$===1/0?G:$,w=w===1/0?G:w,M=M===-1/0?-G:M,C=C===-1/0?-G:C,$=$===-1/0?-G:$,w=w===-1/0?-G:w,A=$*$+w*w,A>O?(X=(M*$+C*w)/A,X<0?X=0:X>1&&(X=1),M=M-X*$,C=C-X*w,v=M*M+C*C):(X=0,v=M*M+C*C),v>R&&(R=v,B=y)}return[Math.sqrt(R),B]},c=function(f,d,p,v,y){var b=h(f,d,p),_=b[1];if(isNaN(b[0])){c(f,d,_-1,v,y),y.push(f[_]);do++_;while(_<=p&&isNaN(f[_].scrCoords[1]+f[_].scrCoords[2]));_<=p&&y.push(f[_]),c(f,_+1,p,v,y)}else b[0]>v?(c(f,d,_,v,y),c(f,_,p,v,y)):y.push(f[p])};for(l=t.length,s=0;u;){for(;s<l&&isNaN(t[s].scrCoords[1]+t[s].scrCoords[2]);)s+=1;for(o=s+1;o<l&&!isNaN(t[o].scrCoords[1]+t[o].scrCoords[2]);)o+=1;if(o--,s<l&&o>s&&(n=[],n[0]=t[s],c(t,s,o,r,n),a=a.concat(n)),s>=l)break;o<l-1&&a.push(t[o+1]),s=o+1}return a},RamerDouglasPeuker:function(t,r){return JXG$1.deprecated("Numerics.RamerDouglasPeuker()","Numerics.RamerDouglasPeucker()"),this.RamerDouglasPeucker(t,r)},Visvalingam:function(t,r){var a,n,s,o,l=[],u=[],h=[],c,f,d,p,v;if(n=t.length,n<=2)return t;for(l[0]={used:!0,lft:null,node:null},c=0,a=1;a<n-1;a++)s=Math.abs(JXG$1.Math.Numerics.det([t[a-1].usrCoords,t[a].usrCoords,t[a+1].usrCoords])),isNaN(s)||(v={v:s,idx:a},u.push(v),l[a]={used:!0,lft:c,node:v},l[c].rt=a,c=a);for(l[n-1]={used:!0,rt:null,lft:c,node:null},l[c].rt=n-1,o=-1/0;u.length>r;)u.sort(function(y,b){return b.v-y.v}),a=u.pop().idx,l[a].used=!1,o=l[a].node.v,c=l[a].lft,f=l[a].rt,l[c].rt=f,l[f].lft=c,d=l[c].lft,d!==null&&(s=Math.abs(JXG$1.Math.Numerics.det([t[d].usrCoords,t[c].usrCoords,t[f].usrCoords])),l[c].node.v=s>=o?s:o),p=l[f].rt,p!==null&&(s=Math.abs(JXG$1.Math.Numerics.det([t[c].usrCoords,t[f].usrCoords,t[p].usrCoords])),l[f].node.v=s>=o?s:o);a=0,h=[t[a]];do a=l[a].rt,h.push(t[a]);while(l[a].rt!==null);return h}};const Numerics=Mat.Numerics;Mat.Geometry={};JXG$1.extend(Mat.Geometry,{angle:function(t,r,a){var n,s,o,l,u=[],h=[],c=[];return JXG$1.deprecated("Geometry.angle()","Geometry.rad()"),t.coords?(u[0]=t.coords.usrCoords[1],u[1]=t.coords.usrCoords[2]):(u[0]=t[0],u[1]=t[1]),r.coords?(h[0]=r.coords.usrCoords[1],h[1]=r.coords.usrCoords[2]):(h[0]=r[0],h[1]=r[1]),a.coords?(c[0]=a.coords.usrCoords[1],c[1]=a.coords.usrCoords[2]):(c[0]=a[0],c[1]=a[1]),n=u[0]-h[0],s=u[1]-h[1],o=c[0]-h[0],l=c[1]-h[1],Math.atan2(n*l-s*o,n*o+s*l)},trueAngle:function(t,r,a){return this.rad(t,r,a)*57.29577951308232},rad:function(t,r,a){var n,s,o,l,u,h,c;return t.coords?(n=t.coords.usrCoords[1],s=t.coords.usrCoords[2]):(n=t[0],s=t[1]),r.coords?(o=r.coords.usrCoords[1],l=r.coords.usrCoords[2]):(o=r[0],l=r[1]),a.coords?(u=a.coords.usrCoords[1],h=a.coords.usrCoords[2]):(u=a[0],h=a[1]),c=Math.atan2(h-l,u-o)-Math.atan2(s-l,n-o),c<0&&(c+=6.283185307179586),c},angleBisector:function(t,r,a,n){var s,o,l,u=t.coords.usrCoords,h=r.coords.usrCoords,c=a.coords.usrCoords,f,d;return JXG$1.exists(n)||(n=t.board),h[0]===0?new Coords(Const.COORDS_BY_USER,[1,(u[1]+c[1])*.5,(u[2]+c[2])*.5],n):(f=u[1]-h[1],d=u[2]-h[2],s=Math.atan2(d,f),f=c[1]-h[1],d=c[2]-h[2],o=Math.atan2(d,f),l=(s+o)*.5,s>o&&(l+=Math.PI),f=Math.cos(l)+h[1],d=Math.sin(l)+h[2],new Coords(Const.COORDS_BY_USER,[1,f,d],n))},reflection:function(t,r,a){var n,s,o,l,u,h,c,f=r.coords.usrCoords,d=t.point1.coords.usrCoords,p=t.point2.coords.usrCoords;return JXG$1.exists(a)||(a=r.board),u=p[1]-d[1],h=p[2]-d[2],n=f[1]-d[1],s=f[2]-d[2],c=(u*s-h*n)/(u*u+h*h),o=f[1]+2*c*h,l=f[2]-2*c*u,new Coords(Const.COORDS_BY_USER,[o,l],a)},rotation:function(t,r,a,n){var s,o,l,u,h,c,f=r.coords.usrCoords,d=t.coords.usrCoords;return JXG$1.exists(n)||(n=r.board),s=f[1]-d[1],o=f[2]-d[2],l=Math.cos(a),u=Math.sin(a),h=s*l-o*u+d[1],c=s*u+o*l+d[2],new Coords(Const.COORDS_BY_USER,[h,c],n)},perpendicular:function(t,r,a){var n,s,o,l,u,h=t.point1.coords.usrCoords,c=t.point2.coords.usrCoords,f=r.coords.usrCoords;return JXG$1.exists(a)||(a=r.board),r===t.point1?(n=h[1]+c[2]-h[2],s=h[2]-c[1]+h[1],u=h[0]*c[0],Math.abs(u)<Mat.eps&&(n=c[2],s=-c[1]),l=[u,n,s],o=!0):r===t.point2?(n=c[1]+h[2]-c[2],s=c[2]-h[1]+c[1],u=h[0]*c[0],Math.abs(u)<Mat.eps&&(n=h[2],s=-h[1]),l=[u,n,s],o=!1):Math.abs(Mat.innerProduct(f,t.stdform,3))<Mat.eps?(n=f[1]+c[2]-f[2],s=f[2]-c[1]+f[1],u=c[0],Math.abs(u)<Mat.eps&&(n=c[2],s=-c[1]),o=!0,Math.abs(u)>Mat.eps&&Math.abs(n-f[1])<Mat.eps&&Math.abs(s-f[2])<Mat.eps&&(n=f[1]+h[2]-f[2],s=f[2]-h[1]+f[1],o=!1),l=[u,n,s]):(l=[0,t.stdform[1],t.stdform[2]],l=Mat.crossProduct(l,f),l=Mat.crossProduct(l,t.stdform),o=!0),[new Coords(Const.COORDS_BY_USER,l,a),o]},circumcenterMidpoint:function(){JXG$1.deprecated("Geometry.circumcenterMidpoint()","Geometry.circumcenter()"),this.circumcenter.apply(this,arguments)},circumcenter:function(t,r,a,n){var s,o,l,u,h=t.coords.usrCoords,c=r.coords.usrCoords,f=a.coords.usrCoords;return JXG$1.exists(n)||(n=t.board),s=[c[0]-h[0],-c[2]+h[2],c[1]-h[1]],o=[(h[0]+c[0])*.5,(h[1]+c[1])*.5,(h[2]+c[2])*.5],l=Mat.crossProduct(s,o),s=[f[0]-c[0],-f[2]+c[2],f[1]-c[1]],o=[(c[0]+f[0])*.5,(c[1]+f[1])*.5,(c[2]+f[2])*.5],u=Mat.crossProduct(s,o),new Coords(Const.COORDS_BY_USER,Mat.crossProduct(l,u),n)},distance:function(t,r,a){var n,s=0;for(a||(a=Math.min(t.length,r.length)),n=0;n<a;n++)s+=(t[n]-r[n])*(t[n]-r[n]);return Math.sqrt(s)},affineDistance:function(t,r,a){var n;return n=this.distance(t,r,a),n>Mat.eps&&(Math.abs(t[0])<Mat.eps||Math.abs(r[0])<Mat.eps)?1/0:n},affineRatio:function(t,r,a){var n=0,s;return JXG$1.exists(t.usrCoords)&&(t=t.usrCoords),JXG$1.exists(r.usrCoords)&&(r=r.usrCoords),JXG$1.exists(a.usrCoords)&&(a=a.usrCoords),s=r[1]-t[1],Math.abs(s)>Mat.eps?n=(a[1]-t[1])/s:n=(a[2]-t[2])/(r[2]-t[2]),n},sortVertices:function(t){for(var r,a=Expect.each(t,Expect.coordsArray),n=a.length,s=null;a[0][0]===a[n-1][0]&&a[0][1]===a[n-1][1]&&a[0][2]===a[n-1][2];)s=a.pop(),n--;return r=a[0],a.sort(function(o,l){var u=o[2]===r[2]&&o[1]===r[1]?-1/0:Math.atan2(o[2]-r[2],o[1]-r[1]),h=l[2]===r[2]&&l[1]===r[1]?-1/0:Math.atan2(l[2]-r[2],l[1]-r[1]);return u-h}),s!==null&&a.push(s),a},signedTriangle:function(t,r,a){var n=Expect.coordsArray(t),s=Expect.coordsArray(r),o=Expect.coordsArray(a);return .5*((s[1]-n[1])*(o[2]-n[2])-(s[2]-n[2])*(o[1]-n[1]))},signedPolygon:function(t,r){var a,n,s=0,o=Expect.each(t,Expect.coordsArray);for(r===void 0&&(r=!0),r?o.unshift(o[o.length-1]):o=this.sortVertices(o),n=o.length,a=1;a<n;a++)s+=o[a-1][1]*o[a][2]-o[a][1]*o[a-1][2];return .5*s},GrahamScan:function(t){var r,a,n,s,o,l,u,h,c,f,d,p,v,y,b,_,N,M,C,$,w,A,X=Mat.eps*Mat.eps,O=this,G=[],R=[],B=Expect.each(t,Expect.coordsArray),F,U=1024;if(F=B.length,F===0)return[];if(F>U)for(o=B[0][1],u=o,l=B[0][2],h=l,f=B[0][1]-B[0][2],p=f,c=B[0][1]+B[0][2],d=c,v=0,y=0,b=0,_=0,M=0,$=0,N=0,C=0,r=1;r<F;r++)w=B[r][1],w<o?(o=w,v=r):w>u&&(u=w,y=r),w=B[r][2],w<l?(l=w,b=r):w>h&&(h=w,_=r),w=B[r][1]-B[r][2],w<f?(f=w,M=r):w>p&&(p=w,$=r),w=B[r][1]+B[r][2],w<c?(c=w,N=r):w>d&&(d=w,C=r);for(r=0;r<F;r++)A=B[r],(F<=U||r in[v,y,b,_,N,M,C,$]||v!==M&&this.signedTriangle(B[v],B[M],A)>=-X||M!==_&&this.signedTriangle(B[M],B[_],A)>=-X||_!==C&&this.signedTriangle(B[_],B[C],A)>=-X||C!==y&&this.signedTriangle(B[C],B[y],A)>=-X||y!==$&&this.signedTriangle(B[y],B[$],A)>=-X||$!==b&&this.signedTriangle(B[$],B[b],A)>=-X||b!==N&&this.signedTriangle(B[b],B[N],A)>=-X||N!==v&&this.signedTriangle(B[N],B[v],A)>=-X)&&G.push({i:r,c:A});for(F=G.length,s=0,o=G[0].c[1],l=G[0].c[2],r=1;r<F;r++)(G[r].c[2]<l||G[r].c[2]===l&&G[r].c[1]<o)&&(o=G[r].c[1],l=G[r].c[2],s=r);for(G=JXG$1.swap(G,s,0),n=G[0].c,G.sort(function(q,ee){var z=q.c,Y=ee.c,K=O.signedTriangle(n,z,Y);return K===0?Mat.hypot(z[1]-n[1],z[2]-n[2])-Mat.hypot(Y[1]-n[1],Y[2]-n[2]):-K}),a=0,r=0;r<F;r++){for(;a>1&&this.signedTriangle(R[a-2].c,R[a-1].c,G[r].c)<=0;)R.pop(),a--;R.push(G[r]),a++}return R},convexHull:function(t,r){var a,n,s=[];for(n=this.GrahamScan(t),a=0;a<n.length;a++)r?s.push(n[a].c):s.push(t[n[a].i]);return s},isConvex:function(t){var r,a,n,s=Mat.eps*Mat.eps,o,l,u,h,c,f,d,p,v=0;if(JXG$1.isArray(t)?r=Expect.each(t,Expect.coordsArray):JXG$1.exists(t.type)&&t.type===Const.OBJECT_TYPE_POLYGON&&(r=Expect.each(t.vertices,Expect.coordsArray)),a=r.length,a===0||a<3)return!0;for(p=null,o=r[a-2][1],l=r[a-2][2],h=r[a-1][1],c=r[a-1][2],f=Math.atan2(c-l,h-o),n=0;n<a;n++)if(o=h,l=c,u=f,h=r[n][1],c=r[n][2],!(o===h&&l===c)){if(f=Math.atan2(c-l,h-o),d=f-u,d<=-Math.PI?d+=2*Math.PI:d>Math.PI&&(d-=2*Math.PI),p===null){if(d===0)continue;p=d>0?1:-1}else if(p*d<-s)return!1;v+=d}return Math.abs(v/(2*Math.PI))-1<s},calcStraight:function(t,r,a,n){var s,o,l,u,h,c,f,d,p,v;JXG$1.exists(n)||(n=10),c=t.evalVisProp("straightfirst"),f=t.evalVisProp("straightlast"),Math.abs(r.scrCoords[0])<Mat.eps&&(c=!0),Math.abs(a.scrCoords[0])<Mat.eps&&(f=!0),!(!c&&!f)&&(d=[],d[0]=t.stdform[0]-t.stdform[1]*t.board.origin.scrCoords[1]/t.board.unitX+t.stdform[2]*t.board.origin.scrCoords[2]/t.board.unitY,d[1]=t.stdform[1]/t.board.unitX,d[2]=-t.stdform[2]/t.board.unitY,!isNaN(d[0]+d[1]+d[2])&&(s=!1,o=!1,s=!c&&Math.abs(r.usrCoords[0])>=Mat.eps&&r.scrCoords[1]>=0&&r.scrCoords[1]<=t.board.canvasWidth&&r.scrCoords[2]>=0&&r.scrCoords[2]<=t.board.canvasHeight,o=!f&&Math.abs(a.usrCoords[0])>=Mat.eps&&a.scrCoords[1]>=0&&a.scrCoords[1]<=t.board.canvasWidth&&a.scrCoords[2]>=0&&a.scrCoords[2]<=t.board.canvasHeight,l=this.meetLineBoard(d,t.board,n),u=l[0],h=l[1],!(!s&&!o&&(!c&&f&&!this.isSameDirection(r,a,u)&&!this.isSameDirection(r,a,h)||c&&!f&&!this.isSameDirection(a,r,u)&&!this.isSameDirection(a,r,h)))&&(s?o||(this.isSameDir(r,a,u,h)?v=h:v=u):o?this.isSameDir(r,a,u,h)?p=u:p=h:this.isSameDir(r,a,u,h)?(p=u,v=h):(v=u,p=h),p&&r.setCoordinates(Const.COORDS_BY_USER,p.usrCoords),v&&a.setCoordinates(Const.COORDS_BY_USER,v.usrCoords))))},calcLineDelimitingPoints:function(t,r,a){var n,s,o,l,u,h,c,f,d,p,v=!1,y=!1;h=t.evalVisProp("straightfirst"),c=t.evalVisProp("straightlast"),Math.abs(r.scrCoords[0])<Mat.eps&&(h=!0),Math.abs(a.scrCoords[0])<Mat.eps&&(c=!0),f=[],f[0]=t.stdform[0]-t.stdform[1]*t.board.origin.scrCoords[1]/t.board.unitX+t.stdform[2]*t.board.origin.scrCoords[2]/t.board.unitY,f[1]=t.stdform[1]/t.board.unitX,f[2]=-t.stdform[2]/t.board.unitY,!isNaN(f[0]+f[1]+f[2])&&(v=!h,y=!c,s=t.board.getBoundingBox(),o=t.getSlope(),o>=0?(l=this.projectPointToLine({coords:{usrCoords:[1,s[2],s[1]]}},t,t.board),u=this.projectPointToLine({coords:{usrCoords:[1,s[0],s[3]]}},t,t.board)):(l=this.projectPointToLine({coords:{usrCoords:[1,s[0],s[1]]}},t,t.board),u=this.projectPointToLine({coords:{usrCoords:[1,s[2],s[3]]}},t,t.board)),!(!v&&!y&&(!h&&!c&&(n=r.distance(Const.COORDS_BY_USER,a),Math.abs(r.distance(Const.COORDS_BY_USER,l)+l.distance(Const.COORDS_BY_USER,a)-n)>Mat.eps||Math.abs(r.distance(Const.COORDS_BY_USER,u)+u.distance(Const.COORDS_BY_USER,a)-n)>Mat.eps)||!h&&c&&!this.isSameDirection(r,a,l)&&!this.isSameDirection(r,a,u)||h&&!c&&!this.isSameDirection(a,r,l)&&!this.isSameDirection(a,r,u)))&&(v?y||(this.isSameDir(r,a,l,u)?p=u:p=l):y?this.isSameDir(r,a,l,u)?d=l:d=u:this.isSameDir(r,a,l,u)?(d=l,p=u):(p=l,d=u),d&&r.setCoordinates(Const.COORDS_BY_USER,d.usrCoords),p&&a.setCoordinates(Const.COORDS_BY_USER,p.usrCoords)))},calcLabelQuadrant:function(t){var r;return t<0&&(t+=2*Math.PI),r=Math.floor((t+Math.PI/8)/(Math.PI/4))%8,["rt","urt","top","ulft","lft","llft","lrt"][r]},isSameDir:function(t,r,a,n){var s=r.usrCoords[1]-t.usrCoords[1],o=r.usrCoords[2]-t.usrCoords[2],l=n.usrCoords[1]-a.usrCoords[1],u=n.usrCoords[2]-a.usrCoords[2];return Math.abs(r.usrCoords[0])<Mat.eps&&(s=r.usrCoords[1],o=r.usrCoords[2]),Math.abs(t.usrCoords[0])<Mat.eps&&(s=-t.usrCoords[1],o=-t.usrCoords[2]),s*l+o*u>=0},isSameDirection:function(t,r,a){var n,s,o,l,u=!1;return n=r.usrCoords[1]-t.usrCoords[1],s=r.usrCoords[2]-t.usrCoords[2],o=a.usrCoords[1]-t.usrCoords[1],l=a.usrCoords[2]-t.usrCoords[2],Math.abs(n)<Mat.eps&&(n=0),Math.abs(s)<Mat.eps&&(s=0),Math.abs(o)<Mat.eps&&(o=0),Math.abs(l)<Mat.eps&&(l=0),(n>=0&&o>=0||n<=0&&o<=0)&&(u=s>=0&&l>=0||s<=0&&l<=0),u},det3p:function(t,r,a){var n,s,o;return JXG$1.isPoint(t)?n=t.Coords(!0):n=t,JXG$1.isPoint(r)?s=r.Coords(!0):s=r,JXG$1.isPoint(a)?o=a.Coords(!0):o=a,(n[1]-o[1])*(s[2]-o[2])-(s[1]-o[1])*(n[2]-o[2])},windingNumber:function(t,r,a){var n=0,s=r.length,o=t[1],l=t[2],u,h,c,f,d,p,v=0;if(s===0)return 0;if(a=a||!1,a&&(v=1),isNaN(o)||isNaN(l)||(JXG$1.exists(r[0].coords)?(u=r[0].coords,h=r[s-1].coords):(u=r[0],h=r[s-1]),u.usrCoords[1]===o&&u.usrCoords[2]===l))return 1;for(p=0;p<s-v;p++)if(JXG$1.exists(r[p].coords)?(h=r[p].coords.usrCoords,c=r[(p+1)%s].coords.usrCoords):(h=r[p].usrCoords,c=r[(p+1)%s].usrCoords),!(h[0]===0||c[0]===0||isNaN(h[1])||isNaN(c[1])||isNaN(h[2])||isNaN(c[2]))){if(c[2]===l){if(c[1]===o)return 1;if(h[2]===l&&c[1]>o==h[1]<o)return 0}if(h[2]<l!=c[2]<l)if(d=2*(c[2]>h[2]?1:0)-1,h[1]>=o)if(c[1]>o)n+=d;else{if(f=this.det3p(h,c,t),f===0)return 0;f>0+Mat.eps==c[2]>h[2]&&(n+=d)}else c[1]>o&&(f=this.det3p(h,c,t),f>0+Mat.eps==c[2]>h[2]&&(n+=d))}return n},pnpoly:function(t,r,a,n,s){var o,l,u,h,c,f,d,p,v=a,y=!1;for(n===Const.COORDS_BY_USER?(p=new Coords(Const.COORDS_BY_USER,[t,r],s),f=p.scrCoords[1],d=p.scrCoords[2]):(f=t,d=r),c=a.length,o=0,l=c-2;o<c-1;l=o++)u=JXG$1.exists(v[o].coords)?v[o].coords:v[o],h=JXG$1.exists(v[l].coords)?v[l].coords:v[l],u.scrCoords[2]>d!=h.scrCoords[2]>d&&f<(h.scrCoords[1]-u.scrCoords[1])*(d-u.scrCoords[2])/(h.scrCoords[2]-u.scrCoords[2])+u.scrCoords[1]&&(y=!y);return y},intersectionFunction:function(t,r,a,n,s,o){var l,u=this,h=!1,c=!1;return h=r.elementClass===Const.OBJECT_CLASS_CURVE&&(r.type===Const.OBJECT_TYPE_ARC||r.type===Const.OBJECT_TYPE_SECTOR),c=a.elementClass===Const.OBJECT_CLASS_CURVE&&(a.type===Const.OBJECT_TYPE_ARC||a.type===Const.OBJECT_TYPE_SECTOR),(r.elementClass===Const.OBJECT_CLASS_CURVE||a.elementClass===Const.OBJECT_CLASS_CURVE)&&(r.elementClass===Const.OBJECT_CLASS_CURVE||r.elementClass===Const.OBJECT_CLASS_CIRCLE)&&(a.elementClass===Const.OBJECT_CLASS_CURVE||a.elementClass===Const.OBJECT_CLASS_CIRCLE)?l=function(){return u.meetCurveCurve(r,a,n,s,r.board)}:r.elementClass===Const.OBJECT_CLASS_CURVE&&!h&&a.elementClass===Const.OBJECT_CLASS_LINE||a.elementClass===Const.OBJECT_CLASS_CURVE&&!c&&r.elementClass===Const.OBJECT_CLASS_LINE?l=function(){return u.meetCurveLine(r,a,n,r.board,JXG$1.evaluate(o))}:r.type===Const.OBJECT_TYPE_POLYGON||a.type===Const.OBJECT_TYPE_POLYGON?r.elementClass===Const.OBJECT_CLASS_LINE?l=function(){var f=r.evalVisProp("straightfirst"),d=r.evalVisProp("straightlast"),p=a.evalVisProp("straightfirst"),v=a.evalVisProp("straightlast"),y;return y=!JXG$1.evaluate(o)&&(!f||!d||!p||!v),u.meetPolygonLine(a,r,n,r.board,y)}:a.elementClass===Const.OBJECT_CLASS_LINE?l=function(){var f=r.evalVisProp("straightfirst"),d=r.evalVisProp("straightlast"),p=a.evalVisProp("straightfirst"),v=a.evalVisProp("straightlast"),y;return y=!JXG$1.evaluate(o)&&(!f||!d||!p||!v),u.meetPolygonLine(r,a,n,r.board,y)}:l=function(){return u.meetPathPath(r,a,n,r.board)}:r.elementClass===Const.OBJECT_CLASS_LINE&&a.elementClass===Const.OBJECT_CLASS_LINE?l=function(){var f,d,p=r.evalVisProp("straightfirst"),v=r.evalVisProp("straightlast"),y=a.evalVisProp("straightfirst"),b=a.evalVisProp("straightlast");return!JXG$1.evaluate(o)&&(!p||!v||!y||!b)?(f=u.meetSegmentSegment(r.point1.coords.usrCoords,r.point2.coords.usrCoords,a.point1.coords.usrCoords,a.point2.coords.usrCoords),!p&&f[1]<0||!v&&f[1]>1||!y&&f[2]<0||!b&&f[2]>1?d=[0,NaN,NaN]:d=f[0],new Coords(Const.COORDS_BY_USER,d,r.board)):u.meet(r.stdform,a.stdform,n,r.board)}:l=function(){var f=u.meet(r.stdform,a.stdform,n,r.board),d=!0,p,v,y;return JXG$1.evaluate(o)?f:r.elementClass===Const.OBJECT_CLASS_LINE&&(p=r.evalVisProp("straightfirst"),v=r.evalVisProp("straightlast"),(!p||!v)&&(y=u.affineRatio(r.point1.coords,r.point2.coords,f),!v&&y>1+Mat.eps||!p&&y<0-Mat.eps))?new Coords(JXG$1.COORDS_BY_USER,[0,NaN,NaN],r.board):a.elementClass===Const.OBJECT_CLASS_LINE&&(p=a.evalVisProp("straightfirst"),v=a.evalVisProp("straightlast"),(!p||!v)&&(y=u.affineRatio(a.point1.coords,a.point2.coords,f),!v&&y>1+Mat.eps||!p&&y<0-Mat.eps))?new Coords(JXG$1.COORDS_BY_USER,[0,NaN,NaN],r.board):h&&(d=u.coordsOnArc(r,f),d&&c&&(d=u.coordsOnArc(a,f)),!d)?new Coords(JXG$1.COORDS_BY_USER,[0,NaN,NaN],r.board):f},l},otherIntersectionFunction:function(t,r,a,n){var s,o,l,u,h=this;return l=t[0],u=t[1],o=l.board,s=function(){var c,f,d,p,v,y=r.length,b=JXG$1.evaluate(n);for(c=y;c>=0;c--)if(l.elementClass===Const.OBJECT_CLASS_CIRCLE&&[Const.OBJECT_CLASS_CIRCLE,Const.OBJECT_CLASS_LINE].indexOf(u.elementClass)>=0?d=h.meet(l.stdform,u.stdform,c,o):l.elementClass===Const.OBJECT_CLASS_CURVE&&[Const.OBJECT_CLASS_CURVE,Const.OBJECT_CLASS_CIRCLE].indexOf(u.elementClass)>=0?d=h.meetCurveCurve(l,u,c,0,o):l.elementClass===Const.OBJECT_CLASS_CURVE&&u.elementClass===Const.OBJECT_CLASS_LINE&&(JXG$1.exists(l.dataX)?d=JXG$1.Math.Geometry.meetCurveLine(l,u,c,l.board,JXG$1.evaluate(a)):d=JXG$1.Math.Geometry.meetCurveLineContinuous(l,u,c,l.board)),d!==void 0){for(v=!1,f=0;!v&&f<y;f++)JXG$1.exists(d)&&JXG$1.exists(d.distance)&&(p=d.distance(JXG$1.COORDS_BY_USER,r[f].coords),p<b&&(v=!0));if(!v)return d}return d},s},coordsOnArc:function(t,r){var a=this.rad(t.radiuspoint,t.center,r.usrCoords.slice(1)),n=0,s=this.rad(t.radiuspoint,t.center,t.anglepoint),o=t.evalVisProp("selection");return(o==="minor"&&s>Math.PI||o==="major"&&s<Math.PI)&&(n=s,s=2*Math.PI),!(a<n||a>s)},meet:function(t,r,a,n){var s,o=Mat.eps;return Math.abs(t[3])<o&&Math.abs(r[3])<o?s=this.meetLineLine(t,r,a,n):Math.abs(t[3])>=o&&Math.abs(r[3])<o?s=this.meetLineCircle(r,t,a,n):Math.abs(t[3])<o&&Math.abs(r[3])>=o?s=this.meetLineCircle(t,r,a,n):s=this.meetCircleCircle(t,r,a,n),s},meetLineBoard:function(t,r,a){var n=[],s,o,l,u;for(JXG$1.exists(a)||(a=0),n[0]=Mat.crossProduct(t,[a,0,1]),n[1]=Mat.crossProduct(t,[a,1,0]),n[2]=Mat.crossProduct(t,[-a-r.canvasHeight,0,1]),n[3]=Mat.crossProduct(t,[-a-r.canvasWidth,1,0]),l=0;l<4;l++)if(Math.abs(n[l][0])>Mat.eps){for(u=2;u>0;u--)n[l][u]/=n[l][0];n[l][0]=1}return Math.abs(n[1][0])<Mat.eps?(s=n[0],o=n[2]):Math.abs(n[0][0])<Mat.eps?(s=n[1],o=n[3]):n[1][2]<0?(s=n[0],n[3][2]>r.canvasHeight?o=n[2]:o=n[3]):n[1][2]>r.canvasHeight?(s=n[2],n[3][2]<0?o=n[0]:o=n[3]):(s=n[1],n[3][2]<0?o=n[0]:n[3][2]>r.canvasHeight?o=n[2]:o=n[3]),[new Coords(Const.COORDS_BY_SCREEN,s.slice(1),r),new Coords(Const.COORDS_BY_SCREEN,o.slice(1),r)]},meetLineLine:function(t,r,a,n){var s=isNaN(t[5]+r[5])?[0,0,0]:Mat.crossProduct(t,r);return Math.abs(s[0])<1e-14&&(s[0]=0),new Coords(Const.COORDS_BY_USER,s,n)},meetLineCircle:function(t,r,a,n){var s,o,l,u,h,c,f,d,p,v;return r[4]<Mat.eps?Math.abs(Mat.innerProduct([1,r[6],r[7]],t,3))<Mat.eps?new Coords(Const.COORDS_BY_USER,r.slice(6,8),n):new Coords(Const.COORDS_BY_USER,[NaN,NaN],n):(l=r[0],o=r.slice(1,3),s=r[3],u=t[0],h=t.slice(1,3),c=s,f=o[0]*h[1]-o[1]*h[0],d=s*u*u-(o[0]*h[0]+o[1]*h[1])*u+l,p=f*f-4*c*d,p>-Mat.eps*Mat.eps?(p=Math.sqrt(Math.abs(p)),v=[(-f+p)/(2*c),(-f-p)/(2*c)],JXG$1.evaluate(a)===0?new Coords(Const.COORDS_BY_USER,[-v[0]*-h[1]-u*h[0],-v[0]*h[0]-u*h[1]],n):new Coords(Const.COORDS_BY_USER,[-v[1]*-h[1]-u*h[0],-v[1]*h[0]-u*h[1]],n)):new Coords(Const.COORDS_BY_USER,[0,0,0],n))},meetCircleCircle:function(t,r,a,n){var s;return t[4]<Mat.eps?Math.abs(this.distance(t.slice(6,2),r.slice(6,8))-r[4])<Mat.eps?new Coords(Const.COORDS_BY_USER,t.slice(6,8),n):new Coords(Const.COORDS_BY_USER,[0,0,0],n):r[4]<Mat.eps?Math.abs(this.distance(r.slice(6,2),t.slice(6,8))-t[4])<Mat.eps?new Coords(Const.COORDS_BY_USER,r.slice(6,8),n):new Coords(Const.COORDS_BY_USER,[0,0,0],n):(s=[r[3]*t[0]-t[3]*r[0],r[3]*t[1]-t[3]*r[1],r[3]*t[2]-t[3]*r[2],0,1,1/0,1/0,1/0],s=Mat.normalize(s),this.meetLineCircle(s,t,a,n))},meetCurveCurveDiscrete:function(t,r,a,n){var s,o=JXG$1.evaluate(a);return t.bezierDegree===3||r.bezierDegree===3?s=this.meetBezierCurveRedBlueSegments(t,r,o):s=this.meetCurveRedBlueSegments(t,r,o),new Coords(Const.COORDS_BY_USER,s,n)},meetCurveCurveNewton:function(t,r,a,n,s){var o,l,u,h,c=(Math.sqrt(5)-1)*.5,f=.85,d=Mat.eps*Mat.eps*Mat.eps,p=Mat.eps*Mat.eps,v=t.maxX(),y=t.minX(),b=r.maxX(),_=r.minX(),N=function(C,$){var w=t.Ft(C[0]),A=r.Ft(C[1]),X=w[1]-A[1],O=w[2]-A[2];return[X,O]},M=function(C,$){var w=Mat.eps,A=2*w,X=t.Ft(C[0]-w),O=t.Ft(C[0]+w),G=r.Ft(C[1]-w),R=r.Ft(C[1]+w);return[[(O[1]-X[1])/A,-(R[1]-G[1])/A],[(O[2]-X[2])/A,-(R[2]-G[2])/A]]};return o=a[0]+(a[1]-a[0])*(1-c),l=n[0]+(n[1]-n[0])*(1-c),h=Numerics.generalizedDampedNewton(N,M,2,[o,l],f,d,40),o=h[0][0],l=h[0][1],u=t.Ft(o),o<a[0]-Mat.eps||o>a[1]+Mat.eps||l<n[0]-Mat.eps||l>n[1]+Mat.eps||s&&(o<y-p||o>v+p||l<_-p||l>b+p)?[u,o,l,1e4]:[u,o,l,h[1]]},_meetCurveCurveIterative:function(t,r,a,n,s,o){var l,u,h,c,f,d,p=Mat.eps*100,v,y,b=20,_,N,M=[];if(h=a[0],f=a[1],c=n[0],d=n[1],f<h||d<c)return[];for(_=(f-h)/b,N=(d-c)/b,v=0;v<b;v++)for(y=0;y<b;y++)if(l=this.meetCurveCurveNewton(t,r,[h+v*_,h+(v+1)*_],[c+y*N,c+(y+1)*N],o),l[3]<Mat.eps&&(u=l[1],M=M.concat([u]),M=JXG$1.toUniqueArrayFloat(M,p),M.length>s))return M;return M},meetCurveCurve:function(t,r,a,n,s,o,l){var u,h,c,f,d,p,v=JXG$1.evaluate(a);if(s=s||t.board,o==="segment"||JXG$1.exists(t.dataX)||JXG$1.exists(r.dataX))return this.meetCurveCurveDiscrete(t,r,v,s);if(JXG$1.exists(o)&&o==="newton"&&v<0||parseInt(v)!==v)return u=Numerics.generalizedNewton(t,r,v,n),new Coords(Const.COORDS_BY_USER,u,s);if(c=t.minX(),f=t.maxX(),d=r.minX(),p=r.maxX(),h=this._meetCurveCurveIterative(t,r,[c,f],[d,p],v,l),h.length>v)u=t.Ft(h[v]);else return[0,NaN,NaN];return new Coords(Const.COORDS_BY_USER,u,s)},meetCurveLine:function(t,r,a,n,s){var o=[0,NaN,NaN],l,u;return JXG$1.exists(n)||(n=t.board),t.elementClass===Const.OBJECT_CLASS_CURVE?(l=t,u=r):(l=r,u=t),JXG$1.exists(l.dataX)?o=this.meetCurveLineDiscrete(l,u,a,n,!s):o=this.meetCurveCurve(l,u,a,0,n,"newton",!s),o},meetCurveLineContinuous:function(t,r,a,n,s){var o,l,u,h,c,f,d,p=Mat.eps,v=Mat.eps,y,b,_,N,M,C,$;for(h=this.meetCurveLineDiscrete(t,r,a,n,s),c=h.usrCoords[1],f=h.usrCoords[2],o=function(w){var A,X;return w>t.maxX()||w<t.minX()?1/0:(A=t.X(w)-c,X=t.Y(w)-f,A*A+X*X)},l=function(w){var A=r.stdform[0]+r.stdform[1]*t.X(w)+r.stdform[2]*t.Y(w);return A*A},y=50,b=(t.maxX()-t.minX())/y,_=t.minX(),M=1e-4,N=NaN,C=0;C<y&&(u=Numerics.root(o,[Math.max(_,t.minX()),Math.min(_+b,t.maxX())]),$=Math.abs(o(u)),!($<=M&&(M=$,N=u,M<p)));C++)_+=b;return u=N,u=Numerics.root(l,[Math.max(u-b,t.minX()),Math.min(u+b,t.maxX())]),$=l(u),isNaN($)||Math.abs($)>v?d=0:d=1,new Coords(Const.COORDS_BY_USER,[d,t.X(u),t.Y(u)],n)},meetCurveLineDiscrete:function(t,r,a,n,s){var o,l,u=JXG$1.evaluate(a),h,c,f,d,p=r.point1.coords.usrCoords,v=r.point2.coords.usrCoords,y,b,_=0,N=t.numberPoints,M=r.evalVisProp("straightfirst"),C=r.evalVisProp("straightlast");for(d=new Coords(Const.COORDS_BY_USER,[0,NaN,NaN],n),p[0]===0?p=[1,v[1]+r.stdform[2],v[2]-r.stdform[1]]:v[0]===0&&(v=[1,p[1]+r.stdform[2],p[2]-r.stdform[1]]),c=t.points[0].usrCoords,o=1;o<N;o+=t.bezierDegree)if(h=c.slice(0),c=t.points[o].usrCoords,y=this.distance(h,c),y>Mat.eps){for(t.bezierDegree===3?b=this.meetBeziersegmentBeziersegment([t.points[o-1].usrCoords.slice(1),t.points[o].usrCoords.slice(1),t.points[o+1].usrCoords.slice(1),t.points[o+2].usrCoords.slice(1)],[p.slice(1),v.slice(1)],s):b=[this.meetSegmentSegment(h,c,p,v)],l=0;l<b.length;l++)if(f=b[l],0<=f[1]&&f[1]<=1){if(_===u)return s&&(!M&&f[2]<0||!C&&f[2]>1)||(d=new Coords(Const.COORDS_BY_USER,f[0],n)),d;_+=1}}return d},meetCurveRedBlueSegments:function(t,r,a){var n,s,o=JXG$1.evaluate(a),l,u,h,c,f,d,p,v=0,y=r.numberPoints,b=t.numberPoints;if(y<=1||b<=1)return[0,NaN,NaN];for(n=1;n<b;n++)for(l=t.points[n-1].usrCoords,u=t.points[n].usrCoords,d=Math.min(l[1],u[1]),p=Math.max(l[1],u[1]),c=r.points[0].usrCoords,s=1;s<y;s++)if(h=c,c=r.points[s].usrCoords,Math.min(h[1],c[1])<p&&Math.max(h[1],c[1])>d&&(f=this.meetSegmentSegment(l,u,h,c),f[1]>=0&&f[2]>=0&&(f[1]<1&&f[2]<1||n===b-1&&f[1]===1||s===y-1&&f[2]===1))){if(v===o)return f[0];v++}return[0,NaN,NaN]},meetSegmentSegment:function(t,r,a,n){var s,o,l,u,h=Mat.crossProduct(t,r),c=Mat.crossProduct(a,n),f=Mat.crossProduct(h,c);return Math.abs(f[0])<Mat.eps?[f,1/0,1/0]:(f[1]/=f[0],f[2]/=f[0],f[0]/=f[0],l=Math.abs(r[1]-r[0]*t[1])<Mat.eps?2:1,u=t[l]/t[0],s=(f[l]-u)/(r[0]!==0?r[l]/r[0]-u:r[l]),l=Math.abs(n[1]-n[0]*a[1])<Mat.eps?2:1,u=a[l]/a[0],o=(f[l]-u)/(n[0]!==0?n[l]/n[0]-u:n[l]),[f,s,o])},meetPathPath:function(t,r,a,n){var s,o,l,u,h=JXG$1.evaluate(a);return s=JXG$1.Math.Clip._getPath(t,n),l=s.length,l>0&&this.distance(s[0].coords.usrCoords,s[l-1].coords.usrCoords,3)<Mat.eps&&s.pop(),o=JXG$1.Math.Clip._getPath(r,n),l=o.length,l>0&&this.distance(o[0].coords.usrCoords,o[l-1].coords.usrCoords,3)<Mat.eps*Mat.eps&&o.pop(),a<0||JXG$1.Math.Clip.isEmptyCase(s,o,"intersection")?new Coords(Const.COORDS_BY_USER,[0,0,0],n):(JXG$1.Math.Clip.makeDoublyLinkedList(s),JXG$1.Math.Clip.makeDoublyLinkedList(o),u=JXG$1.Math.Clip.findIntersections(s,o,n)[0],h<u.length?u[h].coords:new Coords(Const.COORDS_BY_USER,[0,0,0],n))},meetPolygonLine:function(t,r,a,n,s){var o,l=JXG$1.evaluate(a),u,h,c=[0,0,0],f=t.borders.length,d=[];for(o=0;o<f;o++)h=t.borders[o],u=this.meetSegmentSegment(h.point1.coords.usrCoords,h.point2.coords.usrCoords,r.point1.coords.usrCoords,r.point2.coords.usrCoords),(!s||u[2]>=0&&u[2]<1)&&u[1]>=0&&u[1]<1&&d.push(u[0]);return l>=0&&l<d.length&&(c=d[l]),new Coords(Const.COORDS_BY_USER,c,n)},_bezierSplit:function(t){var r,a,n,s,o,l;return r=[(t[0][0]+t[1][0])*.5,(t[0][1]+t[1][1])*.5],a=[(t[1][0]+t[2][0])*.5,(t[1][1]+t[2][1])*.5],n=[(t[2][0]+t[3][0])*.5,(t[2][1]+t[3][1])*.5],s=[(r[0]+a[0])*.5,(r[1]+a[1])*.5],o=[(a[0]+n[0])*.5,(a[1]+n[1])*.5],l=[(s[0]+o[0])*.5,(s[1]+o[1])*.5],[[t[0],r,s,l],[l,o,n,t[3]]]},_bezierBbox:function(t){var r=[];return t.length===4?(r[0]=Math.min(t[0][0],t[1][0],t[2][0],t[3][0]),r[1]=Math.max(t[0][1],t[1][1],t[2][1],t[3][1]),r[2]=Math.max(t[0][0],t[1][0],t[2][0],t[3][0]),r[3]=Math.min(t[0][1],t[1][1],t[2][1],t[3][1])):(r[0]=Math.min(t[0][0],t[1][0]),r[1]=Math.max(t[0][1],t[1][1]),r[2]=Math.max(t[0][0],t[1][0]),r[3]=Math.min(t[0][1],t[1][1])),r},_bezierOverlap:function(t,r){return t[2]>=r[0]&&t[0]<=r[2]&&t[1]>=r[3]&&t[3]<=r[1]},_bezierListConcat:function(t,r,a,n){var s,o=JXG$1.exists(n),l=0,u=r.length,h=t.length;for(h>0&&u>0&&(t[h-1][1]===1&&r[0][1]===0||o&&t[h-1][2]===1&&r[0][2]===0)&&(l=1),s=l;s<u;s++)o&&(r[s][2]*=.5,r[s][2]+=n),r[s][1]*=.5,r[s][1]+=a,t.push(r[s])},_bezierMeetSubdivision:function(t,r,a){var n,s,o,l,u,h,c,f,d,p,v,y,b=[],_=5;return s=this._bezierBbox(r),n=this._bezierBbox(t),this._bezierOverlap(s,n)?a<_?(o=this._bezierSplit(t),h=o[0],c=o[1],o=this._bezierSplit(r),l=o[0],u=o[1],this._bezierListConcat(b,this._bezierMeetSubdivision(h,l,a+1),0,0),this._bezierListConcat(b,this._bezierMeetSubdivision(h,u,a+1),0,.5),this._bezierListConcat(b,this._bezierMeetSubdivision(c,l,a+1),.5,0),this._bezierListConcat(b,this._bezierMeetSubdivision(c,u,a+1),.5,.5),b):(v=[1].concat(t[0]),y=[1].concat(t[3]),d=[1].concat(r[0]),p=[1].concat(r[3]),f=this.meetSegmentSegment(v,y,d,p),f[1]>=0&&f[2]>=0&&f[1]<=1&&f[2]<=1?[f]:[]):[]},_bezierLineMeetSubdivision:function(t,r,a,n){var s,o,l,u,h,c,f,d,p,v,y=[],b=5;return s=this._bezierBbox(r),o=this._bezierBbox(t),n&&!this._bezierOverlap(o,s)?[]:a<b?(l=this._bezierSplit(t),u=l[0],h=l[1],this._bezierListConcat(y,this._bezierLineMeetSubdivision(u,r,a+1),0),this._bezierListConcat(y,this._bezierLineMeetSubdivision(h,r,a+1),.5),y):(p=[1].concat(t[0]),v=[1].concat(t[3]),f=[1].concat(r[0]),d=[1].concat(r[1]),c=this.meetSegmentSegment(p,v,f,d),c[1]>=0&&c[1]<=1&&(!n||c[2]>=0&&c[2]<=1)?[c]:[])},meetBeziersegmentBeziersegment:function(t,r,a){var n,s,o;for(t.length===4&&r.length===4?n=this._bezierMeetSubdivision(t,r,0):n=this._bezierLineMeetSubdivision(t,r,0,a),n.sort(function(l,u){return(l[1]-u[1])*1e7+(l[2]-u[2])}),s=[],o=0;o<n.length;o++)(o===0||n[o][1]!==n[o-1][1]||n[o][2]!==n[o-1][2])&&s.push(n[o]);return s},meetBezierCurveRedBlueSegments:function(t,r,a){var n,s,o,l,u=JXG$1.evaluate(a),h,c,f,d,p,v,y,b=0,_=0,N,M,C=[];if(r.numberPoints<r.bezierDegree+1||t.numberPoints<t.bezierDegree+1)return[0,NaN,NaN];for(t.bezierDegree===1&&r.bezierDegree===3&&(c=t,t=r,r=c),N=r.numberPoints-r.bezierDegree,M=t.numberPoints-t.bezierDegree,t.type===Const.OBJECT_TYPE_SECTOR&&(b=3,M-=3),r.type===Const.OBJECT_TYPE_SECTOR&&(_=3,N-=3),s=b;s<M;s+=t.bezierDegree)for(n=t.points,f=[n[s].usrCoords.slice(1),n[s+1].usrCoords.slice(1)],t.bezierDegree===3&&(f[2]=n[s+2].usrCoords.slice(1),f[3]=n[s+3].usrCoords.slice(1)),p=this._bezierBbox(f),o=_;o<N;o+=r.bezierDegree)if(n=r.points,d=[n[o].usrCoords.slice(1),n[o+1].usrCoords.slice(1)],r.bezierDegree===3&&(d[2]=n[o+2].usrCoords.slice(1),d[3]=n[o+3].usrCoords.slice(1)),v=this._bezierBbox(d),this._bezierOverlap(p,v)){if(y=this.meetBeziersegmentBeziersegment(f,d),y.length===0)continue;for(l=0;l<y.length;l++)h=y[l],!(h[1]<-Mat.eps||h[1]>1+Mat.eps||h[2]<-Mat.eps||h[2]>1+Mat.eps)&&C.push(h);if(C.length>u)return C[u][0]}return C.length>u?C[u][0]:[0,NaN,NaN]},bezierSegmentEval:function(t,r){var a,n,s,o=1-t;return n=0,s=0,a=o*o*o,n+=a*r[0][0],s+=a*r[0][1],a=3*t*o*o,n+=a*r[1][0],s+=a*r[1][1],a=3*t*t*o,n+=a*r[2][0],s+=a*r[2][1],a=t*t*t,n+=a*r[3][0],s+=a*r[3][1],[1,n,s]},bezierArc:function(t,r,a,n,s){var o,l,u,h,c,f,d,p,v=r[1],y=r[2],b=r[0],_=[],N=[],M,C,$,w,A,X,O,G,R,B;for(c=this.distance(r,t),v/=b,y/=b,f=this.rad(t.slice(1),r.slice(1),a.slice(1)),s===-1&&(f=2*Math.PI-f),p=f/4,o=t,o[1]/=o[0],o[2]/=o[0],o[0]/=o[0],h=o.slice(0),n?(_=[v,v+.333*(o[1]-v),v+.666*(o[1]-v),o[1]],N=[y,y+.333*(o[2]-y),y+.666*(o[2]-y),o[2]]):(_=[o[1]],N=[o[2]]);f>Mat.eps;)f>p?(d=p,f-=p):(d=f,f=0),M=Math.cos(s*d),C=Math.sin(s*d),B=[[1,0,0],[v*(1-M)+y*C,M,-C],[y*(1-M)-v*C,C,M]],G=Mat.matVecMult(B,o),h=[G[0]/G[0],G[1]/G[0],G[2]/G[0]],$=o[1]-v,w=o[2]-y,A=h[1]-v,X=h[2]-y,R=Mat.hypot($+A,w+X),Math.abs(X-w)>Mat.eps?O=($+A)*(c/R-.5)/(X-w)*8/3:O=(w+X)*(c/R-.5)/($-A)*8/3,l=[1,o[1]-O*w,o[2]+O*$],u=[1,h[1]+O*X,h[2]-O*A],JXG$1.concat(_,[l[1],u[1],h[1]]),JXG$1.concat(N,[l[2],u[2],h[2]]),o=h.slice(0);return n&&(JXG$1.concat(_,[h[1]+.333*(v-h[1]),h[1]+.666*(v-h[1]),v]),JXG$1.concat(N,[h[2]+.333*(y-h[2]),h[2]+.666*(y-h[2]),y])),[_,N]},projectPointToCircle:function(t,r,a){var n,s,o,l,u,h=r.center.coords.usrCoords;return JXG$1.exists(a)||(a=t.board),JXG$1.isPoint(t)?(n=t.coords.distance(Const.COORDS_BY_USER,r.center.coords),s=t.coords.usrCoords):(n=t.distance(Const.COORDS_BY_USER,r.center.coords),s=t.usrCoords),Math.abs(n)<Mat.eps&&(n=Mat.eps),u=r.Radius()/n,o=h[1]+u*(s[1]-h[1]),l=h[2]+u*(s[2]-h[2]),new Coords(Const.COORDS_BY_USER,[o,l],a)},projectPointToLine:function(t,r,a){var n=[0,r.stdform[1],r.stdform[2]],s;return JXG$1.exists(a)||(JXG$1.exists(t.coords)?a=t.board:a=r.board),JXG$1.exists(t.coords)?s=t.coords.usrCoords:s=t.usrCoords,n=Mat.crossProduct(n,s),new Coords(Const.COORDS_BY_USER,Mat.crossProduct(n,r.stdform),a)},projectCoordsToSegment:function(t,r,a){var n,s,o=[a[1]-r[1],a[2]-r[2]],l=[t[1]-r[1],t[2]-r[2]];return Math.abs(o[0])<Mat.eps&&Math.abs(o[1])<Mat.eps?[r,0]:(n=Mat.innerProduct(l,o),s=Mat.innerProduct(o,o),n/=s,[[1,n*o[0]+r[1],n*o[1]+r[2]],n])},projectCoordsToBeziersegment:function(t,r,a){var n,s=function(o){var l=[1,r.X(a+o),r.Y(a+o)];return l[1]-=t[1],l[2]-=t[2],l[1]*l[1]+l[2]*l[2]};return n=JXG$1.Math.Numerics.fminbr(s,[0,1]),[[1,r.X(n+a),r.Y(n+a)],n]},projectPointToCurve:function(t,r,a){JXG$1.exists(a)||(a=t.board);var n=t.X(),s=t.Y(),o=t.position,l;return JXG$1.exists(o)||(o=r.evalVisProp("curvetype")==="functiongraph"?n:0),l=this.projectCoordsToCurve(n,s,o,r,a),l},projectCoordsToCurve:function(t,r,a,n,s){var o,l,u,h,c,f,d,p,v,y,b,_,N,M,C,$,w,A,X,O,G,R,B,F,U,q,ee=Number.POSITIVE_INFINITY;if(JXG$1.exists(s)||(s=n.board),n.evalVisProp("curvetype")==="plot"){if(a=0,c=ee,n.numberPoints===0?o=[0,1,1]:o=[n.Z(0),n.X(0),n.Y(0)],n.numberPoints>1)for(p=[1,t,r],n.bezierDegree===3?h=0:b=[n.Z(0),n.X(0),n.Y(0)],u=0;u<n.numberPoints-1;u++)n.bezierDegree===3?N=this.projectCoordsToBeziersegment(p,n,h):(_=[n.Z(u+1),n.X(u+1),n.Y(u+1)],N=this.projectCoordsToSegment(p,b,_)),d=N[1],v=N[0],0<=d&&d<=1?(f=this.distance(v,p),y=u+d):d<0?(v=b,f=this.distance(b,p),y=u):d>1&&u===n.numberPoints-2&&(v=_,f=this.distance(v,p),y=n.numberPoints-1),f<c&&(c=f,a=y,o=v),n.bezierDegree===3?(h++,u+=2):b=_;l=new Coords(Const.COORDS_BY_USER,o,s)}else{for(U=n.minX(),q=n.maxX(),B=U,F=q,n.evalVisProp("curvetype")==="functiongraph"&&(A=Math.abs(r-n.Y(t)),isNaN(A)||(B=t-A,F=t+A)),M=function(z){var Y,K;return z<U||z>n.maxX_glob?1/0:(Y=t-n.X(z),K=r-n.Y(z),Y*Y+K*K)},w=M(a),R=50,X=(F-B)/R,C=B,u=0;u<R;u++)$=M(C),($<w||w===1/0||isNaN(w))&&(a=C,w=$),C+=X;for(O=X,u=0;u<20&&isNaN(M(a-O));u++,O*=.5);for(isNaN(M(a-O))&&(O=0),G=X,u=0;u<20&&isNaN(M(a+G));u++,G*=.5);isNaN(M(a+G))&&(G=0),a=Numerics.fminbr(M,[Math.max(a-O,B),Math.min(a+G,F)]),a=a<U?U:a,a=a>q?q:a,l=new Coords(Const.COORDS_BY_USER,[n.X(a),n.Y(a)],s)}return[n.updateTransform(l),a]},projectCoordsToPolygon:function(t,r){var a,n=r.vertices.length,s=1/0,o,l,u,h;for(a=0;a<n-1;a++)l=JXG$1.Math.Geometry.projectCoordsToSegment(t,r.vertices[a].coords.usrCoords,r.vertices[a+1].coords.usrCoords),0<=l[1]&&l[1]<=1?(o=JXG$1.Math.Geometry.distance(l[0],t,3),u=l[0]):l[1]<0?(o=JXG$1.Math.Geometry.distance(r.vertices[a].coords.usrCoords,t,3),u=r.vertices[a].coords.usrCoords):(o=JXG$1.Math.Geometry.distance(r.vertices[a+1].coords.usrCoords,t,3),u=r.vertices[a+1].coords.usrCoords),o<s&&(h=u.slice(0),s=o);return h},projectPointToTurtle:function(t,r,a){var n,s,o,l,u,h,c,f,d,p,v=0,y=0,b=Number.POSITIVE_INFINITY,_=r.objects.length;for(JXG$1.exists(a)||(a=t.board),u=0;u<_;u++)c=r.objects[u],c.elementClass===Const.OBJECT_CLASS_CURVE&&(d=this.projectPointToCurve(t,c),n=d[0],p=d[1],h=this.distance(n.usrCoords,t.coords.usrCoords),h<b&&(o=n.usrCoords[1],l=n.usrCoords[2],s=p,b=h,f=c,y=v),v+=c.numberPoints);return n=new Coords(Const.COORDS_BY_USER,[o,l],a),[f.updateTransform(n),s+y]},projectPointToPoint:function(t,r){return r.coords},projectPointToBoard:function(t,r){var a,n,s,o=r||t.board,l=[[1,1,0,0,3,0,1],[-1,2,1,0,1,2,1],[-1,1,2,2,1,2,3],[1,2,3,0,3,2,3]],u=t.coords||t,h=o.getBoundingBox();for(a=0;a<4;a++)s=l[a],s[0]*u.usrCoords[s[1]]<s[0]*h[s[2]]&&(n=Mat.crossProduct([1,h[s[3]],h[s[4]]],[1,h[s[5]],h[s[6]]]),n[3]=0,n=Mat.normalize(n),u=this.projectPointToLine({coords:u},{stdform:n},o));return u},distPointLine:function(t,r){var a=r[1],n=r[2],s=r[0],o;return Math.abs(a)+Math.abs(n)<Mat.eps?Number.POSITIVE_INFINITY:(o=a*t[1]+n*t[2]+s,a*=a,n*=n,Math.abs(o)/Math.sqrt(a+n))},distPointSegment:function(t,r,a){var n,s,o,l,u,h,c=Mat.eps*Mat.eps,f=1e6;return n=t[1]-r[1],s=t[2]-r[2],n=n===1/0?f:n===-1/0?-f:n,s=s===1/0?f:s===-1/0?-f:s,o=a[1]-r[1],l=a[2]-r[2],o=o===1/0?f:o===-1/0?-f:o,l=l===1/0?f:l===-1/0?-f:l,u=o*o+l*l,u>c&&(h=(n*o+s*l)/u,h<0?h=0:h>1&&(h=1),n-=h*o,s-=h*l),Mat.hypot(n,s)},intersectionFunction3D:function(t,r,a){var n,s=this;return r.type===Const.OBJECT_TYPE_PLANE3D?a.type===Const.OBJECT_TYPE_PLANE3D?n=t.intersectionPlanePlane(r,a):a.type===Const.OBJECT_TYPE_SPHERE3D&&(n=s.meetPlaneSphere(r,a)):r.type===Const.OBJECT_TYPE_SPHERE3D&&(a.type===Const.OBJECT_TYPE_PLANE3D?n=s.meetPlaneSphere(a,r):a.type===Const.OBJECT_TYPE_SPHERE3D&&(n=s.meetSphereSphere(r,a))),n},meet3Planes:function(t,r,a,n,s,o){var l=[1,0,0,0],u,h,c,f,d;for(u=Mat.crossProduct(s.slice(1),t.slice(1)),h=Mat.crossProduct(t.slice(1),a.slice(1)),c=Mat.crossProduct(a.slice(1),s.slice(1)),f=Mat.innerProduct(t.slice(1),c,3),d=0;d<3;d++)l[d+1]=(r*c[d]+n*u[d]+o*h[d])/f;return l},meetPlanePlane:function(t,r,a,n){var s,o,l,u;return l=t.slice(1),u=r.slice(1),s=Mat.crossProduct(l,u),l=a.slice(1),u=n.slice(1),o=Mat.crossProduct(l,u),u=Mat.crossProduct(s,o),u.unshift(0),u},meetPlaneSphere:function(t,r){var a=function(){return Mat.innerProduct(t.normal,r.center.coords,4)-t.d};return[function(){return Mat.axpy(-a(),t.normal,r.center.coords)},t.normal,function(){var n=r.Radius(),s=a();return Math.sqrt(n*n-s*s)}]},meetSphereSphere:function(t,r){var a=function(){var n=t.center.distance(r.center),s=t.Radius(),o=r.Radius();return(s-o)*(s+o)/(n*n)};return[function(){var n=a();return[1,.5*((1-n)*t.center.coords[1]+(1+n)*r.center.coords[1]),.5*((1-n)*t.center.coords[2]+(1+n)*r.center.coords[2]),.5*((1-n)*t.center.coords[3]+(1+n)*r.center.coords[3])]},function(){return Stat.subtract(r.center.coords,t.center.coords)},function(){var n=t.center.distance(r.center),s=t.Radius(),o=r.Radius(),l=a(),u=.5*(s*s+o*o-.5*n*n*(1+l*l));return Math.sqrt(u)}]},_paramsOutOfRange:function(t,r,a){return t[0]<r[0]||t[0]>r[1]||t.length>1&&(t[1]<a[0]||t[1]>a[1])},projectCoordsToParametric:function(t,r,a,n){var s,o,l=0,u=200,h,c=Math.random()*.01+.5,f,d,p=2*a;return a===1?(f=[JXG$1.evaluate(r.range[0]),JXG$1.evaluate(r.range[1])],s=.1*(f[1]-f[0])):a===2&&(f=[JXG$1.evaluate(r.range_u[0]),JXG$1.evaluate(r.range_u[1])],d=[JXG$1.evaluate(r.range_v[0]),JXG$1.evaluate(r.range_v[1])],s=.1*Math.min(f[1]-f[0],d[1]-d[0])),o=s/5e6,h=function(v,y,b,_){var N=[r.X.apply(r,b),r.Y.apply(r,b),r.Z.apply(r,b)],M=t[0]-N[0],C=t[1]-N[1],$=t[2]-N[2];return y>=2&&(_[0]=b[0]-f[0],_[1]=-b[0]+f[1]),y>=4&&(_[2]=b[1]-d[0],_[3]=-b[1]+d[1]),M*M+C*C+$*$},n.length===0&&(n[0]=c*(f[0]+f[1]),a===2&&(n[1]=c*(d[0]+d[1]))),Mat.Nlp.FindMinimum(h,a,0,n,s,o,l,u),t=[r.X.apply(r,n),r.Y.apply(r,n),r.Z.apply(r,n)],this._paramsOutOfRange(n,f,d)&&(n[0]=c*(f[0]+f[1]),a===2&&(n[1]=c*(d[0]+d[1])),Mat.Nlp.FindMinimum(h,a,p,n,s,o,l,u)),[1,r.X.apply(r,n),r.Y.apply(r,n),r.Z.apply(r,n)]},project3DTo3DPlane:function(t,r,a){var n=[0,0,0],s,o,l,u;return a=a||[0,0,0],s=Mat.norm(r),o=Mat.innerProduct(t,r,3),l=Mat.innerProduct(a,r,3),u=(o-l)/s,n=Mat.axpy(-u,r,t),n},getPlaneBounds:function(t,r,a,n,s){var o,l,u,h,c,f,d;return t[2]+r[0]!==0?(c=[[t[0],r[0]],[t[1],r[1]]],f=[n-a[0],n-a[1]],d=Numerics.Gauss(c,f),o=d[0],l=d[1],f=[s-a[0],s-a[1]],d=Numerics.Gauss(c,f),u=d[0],h=d[1],[o,u,l,h]):null},reuleauxPolygon:function(t,r){var a,n=Math.PI*2,s=n/r,o=(r-1)/2,l=0,u=function(h,c){return function(f,d){var p=(f%n+n)%n,v=Math.floor(p/s)%r;return d||(l=t[0].Dist(t[o]),a=Mat.Geometry.rad([t[0].X()+1,t[0].Y()],t[0],t[o%r])),isNaN(v)?v:(p=p*.5+v*s*.5+a,t[v][h]()+l*Math[c](p))}};return[u("X","cos"),u("Y","sin"),0,n]}});const Geometry=Mat.Geometry;Mat.Quadtree=function(t,r,a){r=r||{capacity:10,pointType:"coords"},this.config={},this.config.capacity=r.capacity||10,this.config.pointType=r.pointType||"coords",this.points=[],this.xlb=t[0],this.xub=t[2],this.ylb=t[3],this.yub=t[1],this.parent=a||null,this.northWest=null,this.northEast=null,this.southEast=null,this.southWest=null};JXG$1.extend(Mat.Quadtree.prototype,{contains:function(t,r){return this.xlb<t&&t<=this.xub&&this.ylb<r&&r<=this.yub},insert:function(t){switch(this.config.pointType){case"coords":if(!this.contains(t.usrCoords[1],t.usrCoords[2]))return!1;break;case"object":if(!this.contains(t.x,t.y))return!1;break}return this.points.length<this.config.capacity&&this.northWest===null?(this.points.push(t),!0):(this.northWest===null&&this.subdivide(),this.northWest.insert(t)||this.northEast.insert(t)||this.southEast.insert(t)?!0:!!this.southWest.insert(t))},subdivide:function(){var t=this.xlb+(this.xub-this.xlb)*.5,r=this.ylb+(this.yub-this.ylb)*.5;this.northWest=new Mat.Quadtree([this.xlb,this.yub,t,r],this.config,this),this.northEast=new Mat.Quadtree([t,this.yub,this.xub,r],this.config,this),this.southEast=new Mat.Quadtree([this.xlb,r,t,this.ylb],this.config,this),this.southWest=new Mat.Quadtree([t,r,this.xub,this.ylb],this.config,this)},_query:function(t,r){var a;if(this.contains(t,r)){if(this.northWest===null)return this;if(a=this.northWest._query(t,r),a||(a=this.northEast._query(t,r),a)||(a=this.southEast._query(t,r),a)||(a=this.southWest._query(t,r),a))return a}return!1},query:function(t,r){var a,n;return JXG$1.exists(r)?(a=t,n=r):(a=t.usrCoords[1],n=t.usrCoords[2]),this._query(a,n)},hasPoint:function(t,r,a){var n,s,o;if(this.contains(t,r)){switch(o=this.points.length,this.config.pointType){case"coords":for(s=0;s<o;s++)if(Geometry.distance([t,r],this.points[s].usrCoords.slice(1),2)<a)return!0;break;case"object":for(s=0;s<o;s++)if(Geometry.distance([t,r],[this.points[s].x,this.points[s].y],2)<a)return!0;break}if(this.northWest===null)return!1;if(n=this.northWest.hasPoint(t,r,a),n||(n=this.northEast.hasPoint(t,r,a),n)||(n=this.southEast.hasPoint(t,r,a),n)||(n=this.southWest.hasPoint(t,r,a),n))return n}return!1},getAllPoints:function(){var t=[];return this.getAllPointsRecursive(t),t},getAllPointsRecursive(t){Array.prototype.push.apply(t,this.points.slice()),this.northWest!==null&&(this.northWest.getAllPointsRecursive(t),this.northEast.getAllPointsRecursive(t),this.southEast.getAllPointsRecursive(t),this.southWest.getAllPointsRecursive(t))}});const QDT=Mat.Quadtree;Mat.BoxQuadtree=function(t,r,a){var n,s,o,l;t--,this.depth=t,this.capacity=r,this.items=[],this.northWest=null,this.northEast=null,this.southEast=null,this.southWest=null,this.bbox=null,this.cx=null,this.cy=null,a&&(n=a[0],s=a[1],o=a[2],l=a[3],this.cx=(n+o)*.5,this.cy=(s+l)*.5,this.bbox=[n,s,o,l])};JXG$1.extend(Mat.BoxQuadtree.prototype,{insert:function(t){var r,a,n,s,o,l,u,h=[],c=[],f=[],d=[],p,v,y,b;if(this.bbox===null){for(a=t.length,n=l=1/0,o=s=-1/0,r=0;r<t.length;r++)u=t[r],n=u.xlb<n?u.xlb:n,s=u.yub>s?u.yub:s,o=u.xub>o?u.xub:o,l=u.ylb<l?u.ylb:l;this.cx=(n+o)*.5,this.cy=(s+l)*.5,this.bbox=[n,s,o,l]}else n=this.bbox[0],s=this.bbox[1],o=this.bbox[2],l=this.bbox[3];if(this.depth===0||this.items.length+t.length<this.capacity)return this.items=this.items.concat(t),this;for(a=t.length,r=0;r<a;r++)u=t[r],p=u.xlb<=this.cx&&u.yub>this.cy,y=u.xlb<=this.cx&&u.ylb<=this.cy,v=u.xub>this.cx&&u.yub>this.cy,b=u.xub>this.cx&&u.ylb<=this.cy,p&&v&&b&&y?this.items.push(u):(p&&h.push(u),y&&f.push(u),v&&c.push(u),b&&d.push(u));return this.subdivide(h,f,c,d,n,s,o,l),this},insertItem:function(t){var r,a,n,s,o=[],l=[],u=[],h=[],c,f,d,p;return this.bbox===null?(r=s=1/0,n=a=-1/0,r=t.xlb<r?t.xlb:r,a=t.yub>a?t.yub:a,n=t.xub>n?t.xub:n,s=t.ylb<s?t.ylb:s,this.cx=(r+n)*.5,this.cy=(a+s)*.5,this.bbox=[r,a,n,s]):(r=this.bbox[0],a=this.bbox[1],n=this.bbox[2],s=this.bbox[3]),this.depth===0||this.items.length+1<this.capacity?(this.items.push(t),this):(c=t.xlb<=this.cx&&t.yub>this.cy,d=t.xlb<=this.cx&&t.ylb<=this.cy,f=t.xub>this.cx&&t.yub>this.cy,p=t.xub>this.cx&&t.ylb<=this.cy,c&&f&&p&&d?this.items.push(t):(c&&o.push(t),d&&u.push(t),f&&l.push(t),p&&h.push(t)),this.subdivide(o,u,l,h,r,a,n,s),this)},subdivide:function(t,r,a,n,s,o,l,u){return t.length>0&&(this.northWest===null&&(this.northWest=new JXG.Math.BoxQuadtree(this.depth,this.capacity,[s,o,this.cx,this.cy])),this.northWest.insert(t)),r.length>0&&(this.southWest===null&&(this.southWest=new JXG.Math.BoxQuadtree(this.depth,this.capacity,[s,this.cy,this.cx,u])),this.southWest.insert(r)),a.length>0&&(this.northEast===null&&(this.northEast=new JXG.Math.BoxQuadtree(this.depth,this.capacity,[this.cx,o,l,this.cy])),this.northEast.insert(a)),n.length>0&&(this.southEast===null&&(this.southEast=new JXG.Math.BoxQuadtree(this.depth,this.capacity,[this.cx,this.cy,l,u])),this.southEast.insert(n)),this},find:function(t){var r=function(o){return t[2]>=o.xlb&&t[0]<=o.xub&&t[3]<=o.yub&&t[1]>=o.ylb},a=[],n,s;for(s=this.items.length,n=0;n<s;n++)r(this.items[n])&&a.push(this.items[n]);return this.northWest!==null&&t[0]<=this.cx&t[1]>=this.cy&&JXG$1.concat(a,this.northWest.find(t)),this.southWest!==null&&t[0]<=this.cx&t[3]<=this.cy&&JXG$1.concat(a,this.southWest.find(t)),this.northEast!==null&&t[2]>=this.cx&t[1]>=this.cy&&JXG$1.concat(a,this.northEast.find(t)),this.southEast!==null&&t[2]>=this.cx&t[3]<=this.cy&&JXG$1.concat(a,this.southEast.find(t)),a},analyzeTree:function(){var t={number_items:this.items.length,depth:1},r;return this.northWest!==null&&(r=this.northWest.analyzeTree(),t.number_items+=r.number_items,t.depth=Math.max(t.depth,1+r.depth)),this.southWest!==null&&(r=this.southWest.analyzeTree(),t.number_items+=r.number_items,t.depth=Math.max(t.depth,1+r.depth)),this.northEast!==null&&(r=this.northEast.analyzeTree(),t.number_items+=r.number_items,t.depth=Math.max(t.depth,1+r.depth)),this.southEast!==null&&(r=this.southEast.analyzeTree(),t.number_items+=r.number_items,t.depth=Math.max(t.depth,1+r.depth)),t},plot:function(){var t=[],r=[],a;return t.push(this.bbox[0]),r.push(this.bbox[3]),t.push(this.bbox[2]),r.push(this.bbox[3]),t.push(this.bbox[2]),r.push(this.bbox[1]),t.push(this.bbox[0]),r.push(this.bbox[1]),t.push(this.bbox[0]),r.push(this.bbox[3]),t.push(NaN),r.push(NaN),this.northWest!==null&&(a=this.northWest.plot(),JXG$1.concat(t,a[0]),JXG$1.concat(r,a[1])),this.northEast!==null&&(a=this.northEast.plot(),JXG$1.concat(t,a[0]),JXG$1.concat(r,a[1])),this.southEast!==null&&(a=this.southEast.plot(),JXG$1.concat(t,a[0]),JXG$1.concat(r,a[1])),this.southWest!==null&&(a=this.southWest.plot(),JXG$1.concat(t,a[0]),JXG$1.concat(r,a[1])),[t,r]}});const Quadtree=Mat.BoxQuadtree;JXG$1.Math.Nlp={arr:function(t){return new Float64Array(t)},arr2:function(t,r){for(var a=0,n=new Array(t);a<t;)n[a]=this.arr(r),a++;return n},arraycopy:function(t,r,a,n,s){for(var o=0;o<s;)a[o+n]=t[o+r],o++},lastNumberOfEvaluations:0,GetLastNumberOfEvaluations:function(){return this.lastNumberOfEvaluations},Normal:0,MaxIterationsReached:1,DivergingRoundingErrors:2,FindMinimum:function(t,r,a,n,s,o,l,u,h){var c=a+2,f,d=this.arr(r+1),p=this,v;return this.lastNumberOfEvaluations=0,h&&console.log("Experimental feature 'testForRoundingErrors' is activated."),d[0]=0,this.arraycopy(n,0,d,1,r),v=function(y,b,_,N){var M=p.arr(y),C,$;return p.lastNumberOfEvaluations=p.lastNumberOfEvaluations+1,p.arraycopy(_,1,M,0,y),C=p.arr(b),$=t(y,b,M,C),p.arraycopy(C,0,N,1,b),$},f=this.cobylb(v,r,a,c,d,s,o,l,u,h),this.arraycopy(d,1,n,0,r),f},cobylb:function(t,r,a,n,s,o,l,u,h,c){var f=-1,d=.25,p=2.1,v=.5,y=1.1,b=0,_=0,N,M=r+1,C=a+1,$=o,w=0,A=!1,X=!1,O=0,G=0,R=0,B=this.arr(1+n),F=this.arr2(1+r,1+M),U=this.arr2(1+r,1+r),q=this.arr2(1+n,1+M),ee=this.arr2(1+r,1+C),z=this.arr(1+r),Y=this.arr(1+r),K=this.arr(1+r),Z=this.arr(1+r),ne=this.arr(1+r),j,V,L,ae,W,ve,de,se,ie,ce,xe,fe,Ne,we,Pe,Ie,Ye,Le,Ve,Ze,ue,ge,te,le,me,he,ye,Se,Be,Te,Xe=!0;for(u>=2&&console.log("The initial value of RHO is "+$+" and PARMU is set to zero."),de=0,W=1/$,j=1;j<=r;++j)F[j][M]=s[j],F[j][j]=$,U[j][j]=W;se=M,ie=!1;e:do{if(de>=h&&de>0){f=this.MaxIterationsReached;break e}for(++de,b=t(r,a,s,B),_=0,L=1;L<=a;++L)_=Math.max(_,-B[L]);if((de===u-1||u===3)&&this.PrintIterationResult(de,b,_,s,r,u),B[C]=b,B[n]=_,ce=!0,!ie){for(ce=!1,j=1;j<=n;++j)q[j][se]=B[j];if(de<=M){if(se<=r)if(q[C][M]<=b)s[se]=F[se][M];else{for(F[se][M]=s[se],L=1;L<=n;++L)q[L][se]=q[L][M],q[L][M]=B[L];for(L=1;L<=se;++L){for(F[se][L]=-$,W=0,j=L;j<=se;++j)W-=U[j][L];U[se][L]=W}}if(de<=r){se=de,s[se]+=$;continue e}}ie=!0}t:do{r:do{if(!ce){for(xe=q[C][M]+w*q[n][M],fe=M,V=1;V<=r;++V)W=q[C][V]+w*q[n][V],W<xe?(fe=V,xe=W):W===xe&&w===0&&q[n][V]<q[n][fe]&&(fe=V);if(fe<=r){for(j=1;j<=n;++j)W=q[j][M],q[j][M]=q[j][fe],q[j][fe]=W;for(j=1;j<=r;++j){for(W=F[j][fe],F[j][fe]=0,F[j][M]+=W,ve=0,L=1;L<=r;++L)F[j][L]-=W,ve-=U[L][j];U[fe][j]=ve}}if(Ne=0,c)for(j=1;j<=r;++j)for(V=1;V<=r;++V)W=this.DOT_PRODUCT_ROW_COL(U,j,F,V,1,r)-(j===V?1:0),Ne=Math.max(Ne,Math.abs(W));if(Ne>.1){f=this.DivergingRoundingErrors;break e}for(L=1;L<=C;++L){for(B[L]=-q[L][M],V=1;V<=r;++V)ne[V]=q[L][V]+B[L];for(j=1;j<=r;++j)ee[j][L]=(L===C?-1:1)*this.DOT_PRODUCT_ROW_COL(ne,-1,U,j,1,r)}for(A=!0,O=d*$,we=p*$,V=1;V<=r;++V){for(Pe=0,Ie=0,L=1;L<=r;++L)Pe+=U[V][L]*U[V][L],Ie+=F[L][V]*F[L][V];z[V]=1/Math.sqrt(Pe),Y[V]=Math.sqrt(Ie),(z[V]<O||Y[V]>we)&&(A=!1)}if(!ie&&!A){for(se=0,W=we,V=1;V<=r;++V)Y[V]>W&&(se=V,W=Y[V]);if(se===0)for(V=1;V<=r;++V)z[V]<W&&(se=V,W=z[V]);for(W=v*$*z[se],L=1;L<=r;++L)Z[L]=W*U[se][L];for(Ye=0,Le=0,N=0,L=1;L<=C;++L)N=this.DOT_PRODUCT_ROW_COL(Z,-1,ee,L,1,r),L<C&&(W=q[L][M],Ye=Math.max(Ye,-N-W),Le=Math.max(Le,N-W));for(Ve=w*(Ye-Le)>2*N?-1:1,W=0,j=1;j<=r;++j)Z[j]=Ve*Z[j],F[j][se]=Z[j],W+=U[se][j]*Z[j];for(L=1;L<=r;++L)U[se][L]/=W;for(V=1;V<=r;++V){if(V!==se)for(W=this.DOT_PRODUCT_ROW_COL(U,V,Z,-1,1,r),L=1;L<=r;++L)U[V][L]-=W*U[se][L];s[V]=F[V][M]+Z[V]}continue e}if(X=this.trstlp(r,a,ee,B,$,Z),!X){for(W=0,L=1;L<=r;++L)W+=Z[L]*Z[L];if(W<.25*$*$){ie=!0;break r}}for(N=0,Ze=0,B[C]=0,L=1;L<=C;++L)N=B[L]-this.DOT_PRODUCT_ROW_COL(Z,-1,ee,L,1,r),L<C&&(Ze=Math.max(Ze,N));if(G=q[n][M]-Ze,ue=G>0?N/G:0,w<1.5*ue){for(w=2*ue,u>=2&&console.log("Increase in PARMU to "+w),ge=q[C][M]+w*q[n][M],V=1;V<=r;++V)if(W=q[C][V]+w*q[n][V],W<ge||W===ge&&w===0&&q[n][V]<q[n][M])continue t}for(R=w*G-N,L=1;L<=r;++L)s[L]=F[L][M]+Z[L];ie=!0;continue e}for(ce=!1,te=q[C][M]+w*q[n][M],le=b+w*_,me=te-le,w===0&&b===q[C][M]&&(R=G,me=q[n][M]-_),he=me<=0?1:0,se=0,V=1;V<=r;++V)W=Math.abs(this.DOT_PRODUCT_ROW_COL(U,V,Z,-1,1,r)),W>he&&(se=V,he=W),K[V]=W*z[V];for(ye=y*$,ae=0,V=1;V<=r;++V)if(K[V]>=O||K[V]>=z[V]){if(W=Y[V],me>0){for(W=0,L=1;L<=r;++L)W+=Math.pow(Z[L]-F[L][V],2);W=Math.sqrt(W)}W>ye&&(ae=V,ye=W)}if(ae>0&&(se=ae),se!==0){for(W=0,j=1;j<=r;++j)F[j][se]=Z[j],W+=U[se][j]*Z[j];for(L=1;L<=r;++L)U[se][L]/=W;for(V=1;V<=r;++V)if(V!==se)for(W=this.DOT_PRODUCT_ROW_COL(U,V,Z,-1,1,r),L=1;L<=r;++L)U[V][L]-=W*U[se][L];for(L=1;L<=n;++L)q[L][se]=B[L];if(me>0&&me>=.1*R)continue t}}while(!Xe);if(!A){ie=!1;continue t}if($<=l){f=this.Normal;break e}if(Se=0,Be=0,$*=.5,$<=1.5*l&&($=l),w>0){for(Te=0,L=1;L<=C;++L){for(Se=q[L][M],Be=Se,j=1;j<=r;++j)Se=Math.min(Se,q[L][j]),Be=Math.max(Be,q[L][j]);L<=a&&Se<.5*Be&&(W=Math.max(Be,0)-Se,Te=Te<=0?W:Math.min(Te,W))}Te===0?w=0:Be-Se<w*Te&&(w=(Be-Se)/Te)}u>=2&&console.log("Reduction in RHO to "+$+"  and PARMU = "+w),u===2&&this.PrintIterationResult(de,q[C][M],q[n][M],this.COL(F,M),r,u)}while(Xe)}while(Xe);switch(f){case this.Normal:if(u>=1&&console.log("%nNormal return from subroutine COBYLA%n"),X)return u>=1&&this.PrintIterationResult(de,b,_,s,r,u),f;break;case this.MaxIterationsReached:u>=1&&console.log("%nReturn from subroutine COBYLA because the MAXFUN limit has been reached.%n");break;case this.DivergingRoundingErrors:u>=1&&console.log("%nReturn from subroutine COBYLA because rounding errors are becoming damaging.%n");break}for(L=1;L<=r;++L)s[L]=F[L][M];return b=q[C][M],_=q[n][M],u>=1&&this.PrintIterationResult(de,b,_,s,r,u),f},trstlp:function(t,r,a,n,s,o){var l=0,u=0,h=0,c=this.arr2(1+t,1+t),f=this.arr(2+r),d=this.arr(2+r),p=this.arr(1+t),v=this.arr(1+t),y=this.arr(2+r),b=this.arr(2+r),_=r,N=0,M,C,$,w,A,X,O,G,R,B,F,U,q,ee,z,Y,K,Z,ne,j,V,L,ae,W,ve,de,se,ie,ce,xe,fe,Ne,we,Pe,Ie=!0;for($=1;$<=t;++$)c[$][$]=1,o[$]=0;if(M=0,C=0,r>=1){for(w=1;w<=r;++w)n[w]>C&&(C=n[w],M=w);for(w=1;w<=r;++w)b[w]=w,d[w]=C-n[w]}A=!0;do e:do{(!A||A&&C===0)&&(_=r+1,M=_,b[_]=_,d[_]=0),A=!1,X=0,O=0,G=0,R=0;t:do{if(B=_===r?C:-this.DOT_PRODUCT_ROW_COL(o,-1,a,_,1,t),O===0||B<X?(X=B,u=N,O=3):N>u?(u=N,O=3):--O,O===0)break e;if(F=0,M<=N){if(M<N){U=b[M],q=d[M],w=M;do{for(z=w+1,Y=b[z],K=this.DOT_PRODUCT(this.PART(this.COL(c,w),1,t),this.PART(this.COL(a,Y),1,t)),l=Mat.hypot(K,f[z]),Z=f[z]/l,ne=K/l,f[z]=Z*f[w],f[w]=l,$=1;$<=t;++$)l=Z*c[$][z]+ne*c[$][w],c[$][z]=Z*c[$][w]-ne*c[$][z],c[$][w]=l;b[w]=Y,d[w]=d[z],w=z}while(w<N);b[w]=U,d[w]=q}if(--N,_>r)for(l=1/f[N],w=1;w<=t;++w)p[w]=l*c[w][N];else for(l=this.DOT_PRODUCT_ROW_COL(p,-1,c,N+1,1,t),w=1;w<=t;++w)p[w]-=l*c[w][N+1]}else{for(Y=b[M],w=1;w<=t;++w)v[w]=a[w][Y];for(j=0,w=t;w>N;){for(K=0,V=0,$=1;$<=t;++$)l=c[$][w]*v[$],K+=l,V+=Math.abs(l);if(L=V+.1*Math.abs(K),ae=V+.2*Math.abs(K),(V>=L||L>=ae)&&(K=0),j===0)j=K;else for(z=w+1,l=Mat.hypot(K,j),Z=K/l,ne=j/l,j=l,$=1;$<=t;++$)l=Z*c[$][w]+ne*c[$][z],c[$][z]=Z*c[$][z]-ne*c[$][w],c[$][w]=l;--w}if(j===0){F=-1,w=N;do{for(W=0,ve=0,$=1;$<=t;++$)l=c[$][w]*v[$],W+=l,ve+=Math.abs(l);if(L=ve+.1*Math.abs(W),ae=ve+.2*Math.abs(W),ve<L&&L<ae){if(l=W/f[w],l>0&&b[w]<=r&&(Pe=d[w]/l,(F<0||Pe<F)&&(F=Pe)),w>=2)for(de=b[w],$=1;$<=t;++$)v[$]-=l*a[$][de];y[w]=l}else y[w]=0}while(--w>0);if(F<0)break e;for(w=1;w<=N;++w)d[w]=Math.max(0,d[w]-F*y[w]);if(M<N){U=b[M],q=d[M],w=M;do{for(z=w+1,de=b[z],K=this.DOT_PRODUCT(this.PART(this.COL(c,w),1,t),this.PART(this.COL(a,de),1,t)),l=Mat.hypot(K,f[z]),Z=f[z]/l,ne=K/l,f[z]=Z*f[w],f[w]=l,$=1;$<=t;++$)l=Z*c[$][z]+ne*c[$][w],c[$][z]=Z*c[$][w]-ne*c[$][z],c[$][w]=l;b[w]=de,d[w]=d[z],w=z}while(w<N);b[w]=U,d[w]=q}if(l=this.DOT_PRODUCT(this.PART(this.COL(c,N),1,t),this.PART(this.COL(a,Y),1,t)),l===0)break e;f[N]=l,d[M]=0,d[N]=F}else++N,f[N]=j,d[M]=d[N],d[N]=0;if(b[M]=b[N],b[N]=Y,_>r&&Y!==_){for(w=N-1,K=this.DOT_PRODUCT(this.PART(this.COL(c,w),1,t),this.PART(this.COL(a,Y),1,t)),l=Mat.hypot(K,f[N]),Z=f[N]/l,ne=K/l,f[N]=Z*f[w],f[w]=l,$=1;$<=t;++$)l=Z*c[$][N]+ne*c[$][w],c[$][N]=Z*c[$][w]-ne*c[$][N],c[$][w]=l;b[N]=b[w],b[w]=Y,l=d[w],d[w]=d[N],d[N]=l}if(_>r)for(l=1/f[N],w=1;w<=t;++w)p[w]=l*c[w][N];else for(Y=b[N],l=(this.DOT_PRODUCT_ROW_COL(p,-1,a,Y,1,t)-1)/f[N],w=1;w<=t;++w)p[w]-=l*c[w][N]}for(se=s*s,ce=0,ie=0,$=1;$<=t;++$)Math.abs(o[$])>=1e-6*s&&(se-=o[$]*o[$]),ce+=o[$]*p[$],ie+=p[$]*p[$];if(se<=0)break e;if(l=Math.sqrt(ie*se),Math.abs(ce)>=1e-6*l&&(l=Math.sqrt(ie*se+ce*ce)),R=se/(l+ce),G=R,_===r){if(L=G+.1*C,ae=G+.2*C,G>=L||L>=ae)break t;G=Math.min(G,C)}for(w=1;w<=t;++w)v[w]=o[w]+G*p[w];if(_===r)for(h=C,C=0,w=1;w<=N;++w)Y=b[w],l=n[Y]-this.DOT_PRODUCT_ROW_COL(v,-1,a,Y,1,t),C=Math.max(C,l);w=N;do{for(xe=0,fe=0,$=1;$<=t;++$)l=c[$][w]*v[$],xe+=l,fe+=Math.abs(l);if(L=fe+.1*Math.abs(xe),ae=fe+.2*Math.abs(xe),(fe>=L||L>=ae)&&(xe=0),y[w]=xe/f[w],w>=2)for(Y=b[w],$=1;$<=t;++$)v[$]-=y[w]*a[$][Y]}while(w-->=2);for(_>r&&(y[N]=Math.max(0,y[N])),w=1;w<=t;++w)v[w]=o[w]+G*p[w];if(_>N)for(Ne=N+1,w=Ne;w<=_;++w){for(Y=b[w],ee=C-n[Y],we=C+Math.abs(n[Y]),$=1;$<=t;++$)l=a[$][Y]*v[$],ee+=l,we+=Math.abs(l);L=we+.1*Math.abs(ee),ae=we+.2*Math.abs(ee),(we>=L||L>=ae)&&(ee=0),y[w]=ee}for(F=1,M=0,w=1;w<=_;++w)y[w]<0&&(l=d[w]/(d[w]-y[w]),l<F&&(F=l,M=w));for(l=1-F,w=1;w<=t;++w)o[w]=l*o[w]+F*v[w];for(w=1;w<=_;++w)d[w]=Math.max(0,l*d[w]+F*y[w]);_===r&&(C=h+F*(C-h))}while(M>0);if(G===R)return!0}while(Ie);while(_===r);return!1},PrintIterationResult:function(t,r,a,n,s,o){o>1&&console.log("NFVALS = "+t+"  F = "+r+"  MAXCV = "+a),o>1&&console.log("X = "+this.PART(n,1,s))},ROW:function(t,r){return t[r].slice()},COL:function(t,r){var a,n=t.length,s=[];for(a=0;a<n;++a)s[a]=t[a][r];return s},PART:function(t,r,a){return t.slice(r,a+1)},FORMAT:function(t){return t.join(",")},DOT_PRODUCT:function(t,r){var a,n=0,s=t.length;for(a=0;a<s;++a)n+=t[a]*r[a];return n},DOT_PRODUCT_ROW_COL:function(t,r,a,n,s,o){var l,u=0;if(r===-1)for(l=s;l<=o;++l)u+=t[l]*a[l][n];else if(n===-1)for(l=s;l<=o;++l)u+=t[r][l]*a[l];else for(l=s;l<=o;++l)u+=t[r][l]*a[l][n];return u}};JXG$1.Math.Nlp;Mat.Plot={checkReal:function(t){var r=!1,a,n,s=t.length;for(a=0;a<s;a++)if(n=t[a].usrCoords,!isNaN(n[1])&&!isNaN(n[2])&&Math.abs(n[0])>Mat.eps){r=!0;break}return r},updateParametricCurveNaive:function(t,r,a,n){var s,o,l=!1,u=(a-r)/n;for(s=0;s<n;s++)o=r+s*u,t.points[s].setCoordinates(Const.COORDS_BY_USER,[t.X(o,l),t.Y(o,l)],!1),t.points[s]._t=o,l=!0;return t},isSegmentOutside:function(t,r,a,n,s){return r<0&&n<0||r>s.canvasHeight&&n>s.canvasHeight||t<0&&a<0||t>s.canvasWidth&&a>s.canvasWidth},isDistOK:function(t,r,a,n){return Math.abs(t)<a&&Math.abs(r)<n&&!isNaN(t+r)},isSegmentDefined:function(t,r,a,n){return!(isNaN(t+r)&&isNaN(a+n))},updateParametricCurveOld:function(t,r,a){var n,s,o,l,u,h,c,f,d,p,v,y,b=!1,_=new Coords(Const.COORDS_BY_USER,[0,0],t.board,!1),N=[],M=[],C=[],$=[],w=!1,A=0,X=function(O,G,R){var B,F=R[1]-O[1],U=R[2]-O[2],q=G[0]-O[1],ee=G[1]-O[2],z=q*q+ee*ee;return z>=Mat.eps&&(B=(F*q+U*ee)/z,B>0&&(B<=1?(F-=B*q,U-=B*ee):(F-=q,U-=ee))),Mat.hypot(F,U)};for(JXG$1.deprecated("Curve.updateParametricCurveOld()"),t.board.updateQuality===t.board.BOARD_QUALITY_LOW?(p=15,v=10,y=10):(p=21,v=.7,y=.7),$[0]=a-r,n=1;n<p;n++)$[n]=$[n-1]*.5;n=1,N[0]=1,M[0]=0,s=r,_.setCoordinates(Const.COORDS_BY_USER,[t.X(s,b),t.Y(s,b)],!1),b=!0,h=_.scrCoords[1],c=_.scrCoords[2],s=a,_.setCoordinates(Const.COORDS_BY_USER,[t.X(s,b),t.Y(s,b)],!1),l=_.scrCoords[1],u=_.scrCoords[2],C[0]=[l,u],f=1,d=0,t.points=[],t.points[A++]=new Coords(Const.COORDS_BY_SCREEN,[h,c],t.board,!1);do{for(w=this.isDistOK(l-h,u-c,v,y)||this.isSegmentOutside(h,c,l,u,t.board);d<p&&(!w||d<6)&&(d<=7||this.isSegmentDefined(h,c,l,u));)N[f]=n,M[f]=d,C[f]=[l,u],f+=1,n=2*n-1,d++,s=r+n*$[d],_.setCoordinates(Const.COORDS_BY_USER,[t.X(s,b),t.Y(s,b)],!1,!0),l=_.scrCoords[1],u=_.scrCoords[2],w=this.isDistOK(l-h,u-c,v,y)||this.isSegmentOutside(h,c,l,u,t.board);A>1&&(o=X(t.points[A-2].scrCoords,[l,u],t.points[A-1].scrCoords),o<.015&&(A-=1)),t.points[A]=new Coords(Const.COORDS_BY_SCREEN,[l,u],t.board,!1),t.points[A]._t=s,A+=1,h=l,c=u,f-=1,l=C[f][0],u=C[f][1],d=M[f]+1,n=N[f]*2}while(f>0&&A<5e5);return t.numberPoints=t.points.length,t},_insertPoint_v2:function(t,r,a){var n=!isNaN(this._lastCrds[1]+this._lastCrds[2]),s=!isNaN(r.scrCoords[1]+r.scrCoords[2]),o=t.board.canvasWidth,l=t.board.canvasHeight,u=500;s=s&&r.scrCoords[1]>-u&&r.scrCoords[2]>-u&&r.scrCoords[1]<o+u&&r.scrCoords[2]<l+u,(!s&&n||s&&(!n||Math.abs(r.scrCoords[1]-this._lastCrds[1])>.7||Math.abs(r.scrCoords[2]-this._lastCrds[2])>.7))&&(r._t=a,t.points.push(r),this._lastCrds=r.copy("scrCoords"))},neighborhood_isNaN_v2:function(t,r){var a,n=new Coords(Const.COORDS_BY_USER,[0,0],t.board,!1),s,o;return s=r+Mat.eps,n.setCoordinates(Const.COORDS_BY_USER,[t.X(s,!0),t.Y(s,!0)],!1),o=n.usrCoords,a=isNaN(o[1]+o[2]),!(!a&&(s=r-Mat.eps,n.setCoordinates(Const.COORDS_BY_USER,[t.X(s,!0),t.Y(s,!0)],!1),o=n.usrCoords,a=isNaN(o[1]+o[2]),!a))},_borderCase:function(t,r,a,n,s,o,l,u){var h,c,f,d=null,p,v=30,y=!1,b,_;if(u<=1){if(c=new Coords(Const.COORDS_BY_USER,[0,0],t.board,!1),isNaN(r[1]+r[2])&&!isNaN(n[1]+n[2])&&!this.neighborhood_isNaN_v2(t,s)||isNaN(a[1]+a[2])&&!isNaN(n[1]+n[2])&&!this.neighborhood_isNaN_v2(t,o)||isNaN(n[1]+n[2])&&(!isNaN(r[1]+r[2])||!isNaN(a[1]+a[2]))&&!this.neighborhood_isNaN_v2(t,l))return!1;p=0;do{if(isNaN(r[1]+r[2])&&!isNaN(n[1]+n[2]))b=s,_=l;else if(isNaN(a[1]+a[2])&&!isNaN(n[1]+n[2]))b=o,_=l;else if(isNaN(n[1]+n[2])&&!isNaN(a[1]+a[2]))b=l,_=o;else if(isNaN(n[1]+n[2])&&!isNaN(r[1]+r[2]))b=l,_=s;else return!1;h=.5*(b+_),c.setCoordinates(Const.COORDS_BY_USER,[t.X(h,!0),t.Y(h,!0)],!1),f=c.usrCoords,y=isNaN(f[1]+f[2]),y?b=h:_=h,++p}while(y&&p<v);if(p<v&&(d=f.slice(),n=f.slice(),_=h),d!==null)return this._insertPoint_v2(t,new Coords(Const.COORDS_BY_USER,d,t.board,!1)),!0}return!1},_plotRecursive_v2:function(t,r,a,n,s,o,l){var u,h,c,f=0,d,p,v,y=.5,b=.99,_=new Coords(Const.COORDS_BY_USER,[0,0],t.board,!1);if(!(t.numberPoints>65536))return o<this.nanLevel&&this._isUndefined(t,r,a,n,s)?this:o<this.nanLevel&&this._isOutside(r,a,n,s,t.board)?this:(u=(a+s)*.5,_.setCoordinates(Const.COORDS_BY_USER,[t.X(u,!0),t.Y(u,!0)],!1),h=_.scrCoords,this._borderCase(t,r,n,h,a,s,u,o)?this:(c=this._triangleDists(r,n,h),d=o<this.smoothLevel&&c[3]<l,p=o<=this.jumpLevel&&(isNaN(c[0])||isNaN(c[1])||isNaN(c[2]))||o<this.jumpLevel&&(c[2]>b*c[0]||c[1]>b*c[0]||c[0]===1/0||c[1]===1/0||c[2]===1/0),v=o<this.smoothLevel+2&&c[0]<y*(c[1]+c[2]),v&&(f=0,d=!1),--o,p?this._insertPoint_v2(t,new Coords(Const.COORDS_BY_SCREEN,[NaN,NaN],t.board,!1),u):o<=f||d?this._insertPoint_v2(t,_,u):(this._plotRecursive_v2(t,r,a,h,u,o,l),isNaN(_.scrCoords[1]+_.scrCoords[2])||this._insertPoint_v2(t,_,u),this._plotRecursive_v2(t,h,u,n,s,o,l)),this))},updateParametricCurve_v2:function(t,r,a){var n,s,o,l,u=!1,h=new Coords(Const.COORDS_BY_USER,[0,0],t.board,!1),c=new Coords(Const.COORDS_BY_USER,[0,0],t.board,!1),f,d,p,v,y;return t.board.updateQuality===t.board.BOARD_QUALITY_LOW?(f=t.evalVisProp("recursiondepthlow")||13,d=2,this.smoothLevel=f-6,this.jumpLevel=3):(f=t.evalVisProp("recursiondepthhigh")||17,d=2,this.smoothLevel=f-9,this.jumpLevel=2),this.nanLevel=f-4,t.points=[],this.xterm==="x"?(v=t.board.getBoundingBox(),p=(v[2]-v[0])*.3,n=Math.max(r,v[0]-p),s=Math.min(a,v[2]+p)):(n=r,s=a),h.setCoordinates(Const.COORDS_BY_USER,[t.X(n,u),t.Y(n,u)],!1),u=!0,c.setCoordinates(Const.COORDS_BY_USER,[t.X(s,u),t.Y(s,u)],!1),y=this._findStartPoint(t,h.scrCoords,n,c.scrCoords,s),h.setCoordinates(Const.COORDS_BY_SCREEN,y[0],!1),n=y[1],y=this._findStartPoint(t,c.scrCoords,s,h.scrCoords,n),c.setCoordinates(Const.COORDS_BY_SCREEN,y[0],!1),s=y[1],this._visibleArea=[n,s],o=h.copy("scrCoords"),l=c.copy("scrCoords"),h._t=n,t.points.push(h),this._lastCrds=h.copy("scrCoords"),this._plotRecursive_v2(t,o,n,l,s,f,d),c._t=s,t.points.push(c),t.numberPoints=t.points.length,t},_insertLimesPoint:function(t,r,a,n,s){var o,l,u;Math.abs(this._lastUsrCrds[1])===1/0&&Math.abs(s.left_x)===1/0||Math.abs(this._lastUsrCrds[2])===1/0&&Math.abs(s.left_y)===1/0||(o=new Coords(Const.COORDS_BY_USER,[s.left_x,s.left_y],t.board),o._t=a,t.points.push(o),!isNaN(s.left_x)&&!isNaN(s.left_y)&&!isNaN(s.right_x)&&!isNaN(s.right_y)&&(Math.abs(s.left_x-s.right_x)>Mat.eps||Math.abs(s.left_y-s.right_y)>Mat.eps)&&(l=new Coords(Const.COORDS_BY_SCREEN,r,t.board),l._t=a,t.points.push(l)),u=new Coords(Const.COORDS_BY_USER,[s.right_x,s.right_y],t.board),u._t=a,t.points.push(u),this._lastScrCrds=u.copy("scrCoords"),this._lastUsrCrds=u.copy("usrCoords"))},_insertPoint:function(t,r,a,n,s){var o=!isNaN(this._lastScrCrds[1]+this._lastScrCrds[2]),l=!isNaN(r[1]+r[2]),u=t.board.canvasWidth,h=t.board.canvasHeight,c,f=.8,d=500;if(JXG$1.exists(s)){this._insertLimesPoint(t,r,a,n,s);return}l=l&&r[1]>-d&&r[2]>-d&&r[1]<u+d&&r[2]<h+d,!(!o&&!l)&&(l&&o&&Math.abs(r[1]-this._lastScrCrds[1])<f&&Math.abs(r[2]-this._lastScrCrds[2])<f||Math.abs(r[1])===1/0&&Math.abs(this._lastUsrCrds[1])===1/0||Math.abs(r[2])===1/0&&Math.abs(this._lastUsrCrds[2])===1/0||(c=new Coords(Const.COORDS_BY_SCREEN,r,t.board),c._t=a,t.points.push(c),this._lastScrCrds=c.copy("scrCoords"),this._lastUsrCrds=c.copy("usrCoords")))},_triangleDists:function(t,r,a){var n,s,o,l,u;return n=[t[0]*r[0],(t[1]+r[1])*.5,(t[2]+r[2])*.5],s=Geometry.distance(t,r,3),o=Geometry.distance(t,a,3),l=Geometry.distance(a,r,3),u=Geometry.distance(a,n,3),[s,o,l,u]},_isUndefined:function(t,r,a,n,s){var o,l,u;if(!isNaN(r[1]+r[2])||!isNaN(n[1]+n[2]))return!1;for(u=new Coords(Const.COORDS_BY_USER,[0,0],t.board,!1),l=0;l<20;++l)if(o=a+Math.random()*(s-a),u.setCoordinates(Const.COORDS_BY_USER,[t.X(o,!0),t.Y(o,!0)],!1),!isNaN(u.scrCoords[0]+u.scrCoords[1]+u.scrCoords[2]))return!1;return!0},_isOutside:function(t,r,a,n,s){var o=500,l=s.canvasWidth,u=s.canvasHeight;return t[1]<-o&&a[1]<-o||t[2]<-o&&a[2]<-o||t[1]>l+o&&a[1]>l+o||t[2]>u+o&&a[2]>u+o},_isOutsidePoint:function(t,r){var a=500,n=r.canvasWidth,s=r.canvasHeight;return t[1]<-a||t[2]<-a||t[1]>n+a||t[2]>s+a},_findStartPoint:function(t,r,a,n,s){return[r,a]},_getBorderPos:function(t,r,a,n,s,o,l){var u,h,c,f,d=30,p=!1,v,y;if(h=new Coords(Const.COORDS_BY_USER,[0,0],t.board,!1),f=0,isNaN(a[1]+a[2])&&!isNaN(s[1]+s[2]))y=r,v=n;else if(isNaN(l[1]+l[2])&&!isNaN(s[1]+s[2]))y=o,v=n;else if(isNaN(s[1]+s[2])&&!isNaN(l[1]+l[2]))y=n,v=o;else if(isNaN(s[1]+s[2])&&!isNaN(a[1]+a[2]))y=n,v=r;else return!1;do u=.5*(v+y),h.setCoordinates(Const.COORDS_BY_USER,[t.X(u,!0),t.Y(u,!0)],!1),c=h.usrCoords,p=isNaN(c[1]+c[2]),p?y=u:v=u,++f;while(f<d&&Math.abs(v-y)>Mat.eps);return u},_getCuspPos:function(t,r,a){var n=[t.X(r,!0),t.Y(r,!0)],s=[t.X(a,!0),t.Y(a,!0)],o=function(l){var u=[t.X(l,!0),t.Y(l,!0)];return-(Mat.hypot(n[0]-u[0],n[1]-u[1])+Mat.hypot(s[0]-u[0],s[1]-u[1]))};return Numerics.fminbr(o,[r,a],t)},_getJumpPos:function(t,r,a){var n=function(s){var o=Mat.eps*Mat.eps,l=[t.X(s,!0),t.Y(s,!0)],u=[t.X(s+o,!0),t.Y(s+o,!0)];return-Math.abs((u[1]-l[1])/(u[0]-l[0]))};return Numerics.fminbr(n,[r,a],t)},_getLimits:function(t,r){var a,n=2/(t.maxX()-t.minX()),s,o,l,u;return a=Extrapolate.limit(r,-n,t.X),s=a[0],a[1]==="infinite"&&(s=Math.sign(s)*(1/0)),a=Extrapolate.limit(r,-n,t.Y),l=a[0],a[1]==="infinite"&&(l=Math.sign(l)*(1/0)),a=Extrapolate.limit(r,n,t.X),o=a[0],a[1]==="infinite"&&(o=Math.sign(o)*(1/0)),a=Extrapolate.limit(r,n,t.Y),u=a[0],a[1]==="infinite"&&(u=Math.sign(u)*(1/0)),{left_x:s,left_y:l,right_x:o,right_y:u,t:r}},_getLimes:function(t,r,a,n,s,o,l,u,h){var c;return u==="border"?c=this._getBorderPos(t,r,a,n,s,o,l):u==="cusp"?c=this._getCuspPos(t,r,o):u==="jump"&&(c=this._getJumpPos(t,r,o)),this._getLimits(t,c)},_plotNonRecursive:function(t,r,a,n,s,o){var l,u,h,c=0,f=null,d,p,v=!1,y="",b,_,N,M,C,$=[],w=0,A;for(N=t.board.origin.scrCoords,$[w++]=[r,a,n,s,o,1/0];w>0;){if(A=$[--w],r=A[0],a=A[1],n=A[2],s=A[3],M=A[4],C=A[5],v=!1,y="",f=null,t.points.length>65536)return;M<this.nanLevel&&(this._isUndefined(t,r,a,n,s)||this._isOutside(r,a,n,s,t.board))||(l=(a+s)*.5,b=t.X(l,!0),_=t.Y(l,!0),u=[1,N[1]+b*t.board.unitX,N[2]-_*t.board.unitY],h=this._triangleDists(r,n,u),d=isNaN(r[1]+r[2]),p=isNaN(n[1]+n[2]),d&&!p||!d&&p?y="border":h[0]>.66*C||h[0]<this.cusp_threshold*(h[1]+h[2])||h[1]>5*h[2]||h[2]>5*h[1]?y="cusp":(h[2]>this.jump_threshold*h[0]||h[1]>this.jump_threshold*h[0]||h[0]===1/0||h[1]===1/0||h[2]===1/0)&&(y="jump"),v=y===""&&M<this.smoothLevel&&h[3]<this.smooth_threshold,M<this.testLevel&&!v&&(y===""?v=!0:f=this._getLimes(t,a,r,l,u,s,n,y,M)),f!==null?(u=[1,NaN,NaN],this._insertPoint(t,u,l,M,f)):M<=c||v?this._insertPoint(t,u,l,M,null):($[w++]=[u,l,n,s,M-1,h[0]],$[w++]=[r,a,u,l,M-1,h[0]]))}return this},updateParametricCurve_v3:function(t,r,a){var n,s,o,l,u=!1,h=new Coords(Const.COORDS_BY_USER,[0,0],t.board,!1),c=new Coords(Const.COORDS_BY_USER,[0,0],t.board,!1),f,d,p,v;return t.board.updateQuality===t.board.BOARD_QUALITY_LOW?f=t.evalVisProp("recursiondepthlow")||14:f=t.evalVisProp("recursiondepthhigh")||17,this.smoothLevel=7,this.nanLevel=f-4,this.testLevel=4,this.cusp_threshold=.5,this.jump_threshold=.99,this.smooth_threshold=2,t.points=[],t.xterm==="x"?(p=t.board.getBoundingBox(),d=(p[2]-p[0])*.3,n=Math.max(r,p[0]-d),s=Math.min(a,p[2]+d)):(n=r,s=a),h.setCoordinates(Const.COORDS_BY_USER,[t.X(n,u),t.Y(n,u)],!1),u=!0,c.setCoordinates(Const.COORDS_BY_USER,[t.X(s,u),t.Y(s,u)],!1),v=this._findStartPoint(t,h.scrCoords,n,c.scrCoords,s),h.setCoordinates(Const.COORDS_BY_SCREEN,v[0],!1),n=v[1],v=this._findStartPoint(t,c.scrCoords,s,h.scrCoords,n),c.setCoordinates(Const.COORDS_BY_SCREEN,v[0],!1),s=v[1],this._visibleArea=[n,s],o=h.copy("scrCoords"),l=c.copy("scrCoords"),h._t=n,t.points.push(h),this._lastScrCrds=h.copy("scrCoords"),this._lastUsrCrds=h.copy("usrCoords"),this._plotNonRecursive(t,o,n,l,s,f),c._t=s,t.points.push(c),t.numberPoints=t.points.length,t},_criticalInterval:function(t,r,a){var n,s,o,l,u,h,c=!1,f,d=-1/0,p=!1,v=!1,y=0,b=[],_=[],N=[];for(f=Stat.abs(t),l=Stat.median(f),l<1e-7?(l=1e-7,p=!0):l*=this.criticalThreshold,n=0;n<r;n++)f[n]>l?(N.push({i:n,v:t[n],group:y}),d=n,c||(c=!0)):c&&n>d+4&&(N.length>0&&b.push(N.slice(0)),N=[],c=!1,y++);for(c&&N.length>1&&b.push(N.slice(0)),p&&b.length===0&&(v=!0),s=0;s<b.length;s++)if(_[s]="point",o=b[s].length,!(o<64)){for(h=0,u=Math.sign(b[s][0].v),n=1;n<o;n++)Math.sign(b[s][n].v)!==u&&(h++,u=Math.sign(b[s][n].v));h*6>o&&(_[s]="interval")}return{smooth:v,groups:b,types:_}},Component:function(){this.left_isNaN=!1,this.right_isNaN=!1,this.left_t=null,this.right_t=null,this.t_values=[],this.x_values=[],this.y_values=[],this.len=0},findComponents:function(t,r,a,n){var s,o,l,u,h,c=[],f,d=0,p=0,v=0,y=!1,b=!1;for(l=(a-r)/n,c[d]=new this.Component,f=c[d],s=0,o=r;s<=n;s++,o+=l)u=t.X(o,b),h=t.Y(o,b),isNaN(u)||isNaN(h)?(v++,v>1&&y&&(f.right_isNaN=!0,f.right_t=o-l,f.len=p,y=!1,d++,c[d]=new this.Component,f=c[d],v=0)):(y||(y=!0,p=0,v>0&&(f.left_t=o-l,f.left_isNaN=!0)),v=0,f.t_values[p]=o,f.x_values[p]=u,f.y_values[p]=h,p++),s===0&&(b=!0);return y?f.len=p:c.pop(),c},getPointType:function(t,r,a,n,s,o,l){var u=s[0],h=o[0],c=n.length,f={idx:r,t:a,x:u[r],y:h[r],type:"other"};return r<5?(f.type="borderleft",f.idx=0,f.t=n[0],f.x=u[0],f.y=h[0],f):(r>l-6&&(f.type="borderright",f.idx=c-1,f.t=n[c-1],f.x=u[c-1],f.y=h[c-1]),f)},newtonApprox:function(t,r,a,n,s){var o,l=0;for(o=n;o>0;o--)l=(l+s[o][t])*(r-(o-1)*a)/o;return l+s[0][t]},thiele:function(t,r,a,n,s){var o,l=0;for(o=s;o>1;o--)l=(t-a[n+o])/(r[o][n+1]-r[o-2][n+1]+l);return r[0][n+1]+(t-a[n+1])/(r[1][n+1]+l)},differenceMethodExperiments:function(t,r){var a,n,s,o,l=t.t_values,u=t.x_values,h=t.y_values,c=[],f=[],d=[],p=[],v=[],y=[],b=[],_=[],N,M,C=0,$,w,A,X,O,G=[];for(N=l[1]-l[0],v.push([]),y.push([]),b.push([]),_.push([]),s=h.length,a=0;a<s;a++)v[0][a]=u[a],y[0][a]=h[a],b[0][a]=u[a],_[0][a]=h[a];for(v.push([]),y.push([]),b.push([]),_.push([]),M=N,s=h.length-1,a=0;a<s;a++)c[a]=u[a+1]-u[a],f[a]=h[a+1]-h[a],d[a]=c[a],p[a]=f[a],v[1][a]=c[a],y[1][a]=f[a],b[1][a]=M/c[a],_[1][a]=M/f[a];for(s--,o=Math.min(8,h.length-1),n=1;n<o;n++){for(v.push([]),y.push([]),b.push([]),_.push([]),M*=N,a=0;a<s;a++)c[a]=c[a+1]-c[a],f[a]=f[a+1]-f[a],v[n+1][a]=c[a],y[n+1][a]=f[a],b[n+1][a]=M/(b[n][a+1]-b[n][a])+b[n-1][a+1],_[n+1][a]=M/(_[n][a+1]-_[n][a])+_[n-1][a+1];if(O=this._criticalPoints(f,s,n),O===!1){console.log("Polynomial of degree",n),O=[];break}if(O.length>0&&(C++,C>1&&n%2===0))break;s--}for(a=0;a<O.length;a++){for(w=-1/0,A=0;A<O[a].length;A++)X=Math.abs(O[a][A].v),X>w&&(w=X,$=A);$=Math.floor(O[a][$].i+n/2),G.push(this.getPointType(r,$,l,u,h,d,p,s+1))}return[G,v,y,b,_]},getCenterOfCriticalInterval:function(t,r,a){var n,s,o,l,u=0,h=0,c=a[1]-a[0],f,d=[];for(n=-1/0,d=[],s=0;s<t.length;s++)l=Math.abs(t[s].v),l>n?(d=[s],n=l,o=s):n===l&&d.push(s);if(d.length>0&&(f=d.reduce(function(p,v){return p+v},0)/d.length,o=Math.floor(f),f+=t[0].i),n<1/0){for(s=0;s<t.length;s++)u+=Math.abs(t[s].v)*t[s].i,h+=Math.abs(t[s].v);f=u/h}return f+=r/2,[t[o].i+r/2,f,a[Math.floor(f)]+c*(f-Math.floor(f))]},differenceMethod:function(t,r){var a,n,s,o,l=t.t_values,u=t.x_values,h=t.y_values,c=[],f=[],d=0,p=-1,v=-1,y,b,_,N,M,C=[],$,w=[];for(s=h.length,c.push(new Float64Array(u)),f.push(new Float64Array(h)),s--,o=Math.min(12,s),n=0;n<o&&(c.push(new Float64Array(s)),f.push(new Float64Array(s)),c[n+1]=c[n].map(function(A,X,O){return O[X+1]-A}),f[n+1]=f[n].map(function(A,X,O){return O[X+1]-A}),N=this._criticalInterval(f[n+1],s,n),N.smooth===!0&&(v=n,C=[]),_=this._criticalInterval(c[n+1],s,n),p===-1&&_.smooth===!0&&(p=n),!(v>=0));n++){if(N.groups.length>0&&(d++,d>2&&(n+1)%2===0)){C=N.groups,$=N.types;break}s--}for(a=0;a<C.length;a++)$[a]!=="interval"&&(b=this.getCenterOfCriticalInterval(C[a],n+1,l),y=N[0],y=Math.floor(b[1]),M=b[2],w.push(this.getPointType(r,y,M,l,c,f,s+1)));return[w,c,f,p,v]},_insertPoint_v4:function(t,r,a,n){var s,o=null,l,u,h=.8;t.points.length>0&&(o=t.points[t.points.length-1].scrCoords),s=new Coords(Const.COORDS_BY_USER,r,t.board),!(o!==null&&(l=s.scrCoords[1]-o[1],u=s.scrCoords[2]-o[2],l*l+u*u<h*h))&&(s._t=a,t.points.push(s))},getInterval:function(t,r,a){var n,s;return Interval.disable(),n=Interval.Interval(r,a),t.board.mathLib=Interval,t.board.mathLibJXG=Interval,s=t.Y(n,!0),t.board.mathLib=Math,t.board.mathLibJXG=JXG$1.Math,s},sign:function(t){return t<0?-1:t>0?1:0},handleBorder:function(t,r,a,n,s){var o=a.idx,l,u,h,c=32,f,d,p,v,y,b,_,N,M;if(M=r.t_values[1]-r.t_values[0],a.type==="borderleft"?(l=r.left_isNaN?r.left_t:a.t-M,u=l,h=u+M):a.type==="borderright"?(l=r.right_isNaN?r.right_t:a.t+M,h=l,u=h-M):console.log("No bordercase!!!"),_=this.findComponents(t,u,h,c),_.length!==0){for(a.type==="borderleft"&&(u=_[0].left_t,h=_[0].t_values[0],M=_[0].t_values[1]-_[0].t_values[0],u=u===null?h-M:u,l=u,f=this.getInterval(t,u,h),JXG$1.isObject(f)&&(v=f.lo,y=f.hi,d=t.X(l,!0),p=s[1][o]<0?y:v,this._insertPoint_v4(t,[1,d,p],l))),N=_[0].t_values.length,b=0;b<N;b++)l=_[0].t_values[b],d=_[0].x_values[b],p=_[0].y_values[b],this._insertPoint_v4(t,[1,d,p],l);a.type==="borderright"&&(u=_[0].t_values[N-1],h=_[0].right_t,M=_[0].t_values[1]-_[0].t_values[0],h=h===null?u+M:h,l=h,f=this.getInterval(t,u,h),JXG$1.isObject(f)&&(v=f.lo,y=f.hi,d=t.X(l,!0),p=s[1][o]>0?y:v,this._insertPoint_v4(t,[1,d,p],l)))}},_seconditeration_v4:function(t,r,a,n,s){var o,l,u,h,c,f,d,p,v,y,b,_,N;for(l=r.t_values[a.idx-2],u=r.t_values[a.idx+2],c=this.findComponents(t,l,u,64),d=0;d<c.length;d++){for(f=c[d],h=this.differenceMethod(f,t),p=h[0],y=h[1],b=h[2],_=0,v=0;v<=p.length;v++){for(v===p.length?N=f.len:N=p[v].idx,o=_;o<N;o++)!isNaN(f.x_values[o])&&!isNaN(f.y_values[o])&&this._insertPoint_v4(t,[1,f.x_values[o],f.y_values[o]],f.t_values[o]);v<p.length&&(this.handleSingularity(t,f,p[v],y,b),_=p[v].idx+1)}N=f.len,d<c.length-1&&this._insertPoint_v4(t,[1,NaN,NaN],f.right_t)}return this},_recurse_v4:function(t,r,a,n,s,o,l,u){var h=2,c=(r+a)*.5,f=t.X(c,!0),d=t.Y(c,!0),p,v;if(u===0){this._insertPoint_v4(t,[1,NaN,NaN],c);return}p=(f-n)*t.board.unitX,v=(d-s)*t.board.unitY,Mat.hypot(p,v)>h?this._recurse_v4(t,r,c,n,s,f,d,u-1):this._insertPoint_v4(t,[1,f,d],c),p=(f-o)*t.board.unitX,v=(d-l)*t.board.unitY,Mat.hypot(p,v)>h?this._recurse_v4(t,c,a,f,d,o,l,u-1):this._insertPoint_v4(t,[1,f,d],c)},handleSingularity:function(t,r,a,n,s){var o=a.idx,l,u,h,c,f,d,p,v,y,b,_,N=100,M=5,C=3;l=a.t,console.log("HandleSingularity at t =",l),u=r.t_values[o-M],h=r.t_values[o+M],c=this.getInterval(t,u,h),JXG$1.isObject(c)?(v=c.lo,y=c.hi):s[0][o-1]<s[0][o+1]?(v=s[0][o-1],y=s[0][o+1]):(v=s[0][o+1],y=s[0][o-1]),p=t.X(l,!0),b=(s[0][o-C]-s[0][o-M])/(r.t_values[o-C]-r.t_values[o-M]),_=(s[0][o+C]-s[0][o+M])/(r.t_values[o+C]-r.t_values[o+M]),console.log(":::",b,_),b<-N?(this._insertPoint_v4(t,[1,p,v],l,!0),_<=N&&this._insertPoint_v4(t,[1,NaN,NaN],l)):b>N?(this._insertPoint_v4(t,[1,p,y],l),_>=-N&&this._insertPoint_v4(t,[1,NaN,NaN],l)):(v===-1/0&&(this._insertPoint_v4(t,[1,p,v],l,!0),this._insertPoint_v4(t,[1,NaN,NaN],l)),y===1/0&&(this._insertPoint_v4(t,[1,NaN,NaN],l),this._insertPoint_v4(t,[1,p,y],l,!0)),a.t<r.t_values[o]?(f=o-1,d=o):(f=o,d=o+1),u=r.t_values[f],h=r.t_values[d],this._recurse_v4(t,u,h,n[0][f],s[0][f],n[0][d],s[0][d],10)),_<-N?this._insertPoint_v4(t,[1,p,y],l):_>N&&this._insertPoint_v4(t,[1,p,v],l)},steps:1021,criticalThreshold:1e3,plot_v4:function(t,r,a,n){var s,o,l,u,h,c,f,d,p,v,y,b,_,N,M,C=(a-r)/n,$=function(X){return t.Y(X,!0)},w=function(X){return-t.Y(X,!0)},A=C*.5;for(l=this.findComponents(t,r,a,n),u=0;u<l.length;u++){for(h=l[u],p=this.differenceMethod(h,t),c=p[0],v=p[1],y=p[2],(c.length===0||c[0].type!=="borderleft")&&c.unshift({idx:0,t:h.t_values[0],x:h.x_values[0],y:h.y_values[0],type:"borderleft"}),c[c.length-1].type!=="borderright"&&(o=h.t_values.length,c.push({idx:o-1,t:h.t_values[o-1],x:h.x_values[o-1],y:h.y_values[o-1],type:"borderright"})),d=0,f=0;f<=c.length;f++){for(f===c.length?o=h.len:o=c[f].idx-1,s=d;s<o-2;s++)this._insertPoint_v4(t,[1,h.x_values[s],h.y_values[s]],h.t_values[s]),s>=d+3&&s<o-3&&y.length>3&&Math.abs(y[2][s])>.2*Math.abs(y[0][s])&&(b=h.t_values[s],A=C*.25,M=this.getInterval(t,b,b+C),JXG$1.isObject(M)?y[2][s]>0?this._insertPoint_v4(t,[1,b+A,M.lo],b+A):this._insertPoint_v4(t,[1,b+C-A,M.hi],b+C-A):(_=Numerics.fminbr($,[b,b+C]),N=Numerics.fminbr(w,[b,b+C]),_<N?(this._insertPoint_v4(t,[1,t.X(_,!0),t.Y(_,!0)],_),this._insertPoint_v4(t,[1,t.X(N,!0),t.Y(N,!0)],N)):(this._insertPoint_v4(t,[1,t.X(N,!0),t.Y(N,!0)],N),this._insertPoint_v4(t,[1,t.X(_,!0),t.Y(_,!0)],_))));f<c.length&&(s=c[f].idx,c[f].type==="borderleft"||c[f].type==="borderright"?this.handleBorder(t,h,c[f],v,y):this._seconditeration_v4(t,h,c[f],v,y),d=c[f].idx+1+1)}o=h.len,u<l.length-1&&this._insertPoint_v4(t,[1,NaN,NaN],h.right_t)}},updateParametricCurve_v4:function(t,r,a){var n,s,o,l;t.xterm==="x"?(l=t.board.getBoundingBox(),o=(l[2]-l[0])*.3,n=Math.max(r,l[0]-o),s=Math.min(a,l[2]+o)):(n=r,s=a),t.points=[],this.plot_v4(t,n,s,this.steps),t.numberPoints=t.points.length},updateParametricCurve:function(t,r,a){return this.updateParametricCurve_v2(t,r,a)}};const Plot=Mat.Plot;Mat.ImplicitPlot=function(t,r,a,n,s){var o={resolution_out:5,resolution_in:5,max_steps:1024,alpha_0:.05,tol_u0:Mat.eps,tol_newton:1e-7,tol_cusp:.05,tol_progress:1e-4,qdt_box:.2,kappa_0:.2,delta_0:.05,h_initial:.1,h_critical:.001,h_max:1,loop_dist:.09,loop_dir:.99,loop_detection:!0,unitX:10,unitY:10};this.config=JXG$1.merge(o,r),this.f=a,this.dfx=null,this.dfy=null,JXG$1.isFunction(n)?this.dfx=n:this.dfx=function(l,u){var h=Mat.eps*Mat.eps;return(this.f(l+h,u)-this.f(l-h,u))*.5/h},JXG$1.isFunction(s)?this.dfy=s:this.dfy=function(l,u){var h=Mat.eps*Mat.eps;return(this.f(l,u+h)-this.f(l,u-h))*.5/h},this.bbox=t,this.qdt=new Quadtree(20,5,t),this.components=[]};JXG$1.extend(Mat.ImplicitPlot.prototype,{plot:function(){var t,r,a,n,s,o,l=[],u=[],h=[],c=0,f,d=this,p=function(_){return d.f(t,_)},v=function(_){return-d.f(t,_)},y=function(_){return d.f(_,r)},b=function(_){return-d.f(_,r)};for(a=Math.min(this.bbox[0],this.bbox[2])-Mat.eps,n=Math.max(this.bbox[0],this.bbox[2]),s=Math.min(this.bbox[1],this.bbox[3])+Mat.eps,o=Math.max(this.bbox[1],this.bbox[3]),f=this.config.resolution_out/this.config.unitX,f*=1+Mat.eps,t=a;t<n;t+=f)h=this.searchLine(p,v,t,[s,o],"vertical",c,l,u,20),h!==!1&&(l=h[0],u=h[1],c=h[2]);for(f=this.config.resolution_out/this.config.unitY,f*=1+Mat.eps,r=s;r<o;r+=f)h=this.searchLine(y,b,r,[a,n],"horizontal",c,l,u,20),h!==!1&&(l=h[0],u=h[1],c=h[2]);return[l,u,c]},searchLine:function(t,r,a,n,s,o,l,u,h){var c,f,d,p,v,y,b,_,N,M,C,$,w,A,X,O=this.config.tol_u0,G=n[0],R=n[1];if(c=Numerics.fminbr(t,[G,R]),v=t(c),f=Numerics.fminbr(r,[G,R]),y=t(f),v<O&&y>-O){if(b=c,c=Math.min(b,f),f=Math.max(b,f),d=Numerics.fzero(t,[c,f]),p=t(d),Math.abs(p)>Math.max((y-v)*Mat.eps,.001))return!1;if(s==="vertical"?(M=[1,a,d],X=this.config.resolution_in/this.config.unitY):(M=[1,d,a],X=this.config.resolution_in/this.config.unitX),X*=1+Mat.eps,N=this.curveContainsPoint(M,l,u,X*2,this.config.qdt_box),!N){if(w=this.traceComponent(M,1),w[0].length>0){for(o>0&&(l.push(NaN),u.push(NaN)),A=l.length,$=w[0].length,C=1;C<$;C++)this.qdt.insertItem({xlb:Math.min(w[0][C-1],w[0][C]),xub:Math.max(w[0][C-1],w[0][C]),ylb:Math.min(w[1][C-1],w[1][C]),yub:Math.max(w[1][C-1],w[1][C]),idx1:A+C-1,idx2:A+C,comp:o});o++,JXG$1.concat(l,w[0]),JXG$1.concat(u,w[1])}}return _=d-X*.01,_-G>X&&h>0&&(w=this.searchLine(t,r,a,[G,_],s,o,l,u,h-1),w!==!1&&(l=w[0],u=w[1],o=w[2])),_=d+X*.01,R-_>X&&h>0&&(w=this.searchLine(t,r,a,[_,R],s,o,l,u,h-1),w!==!1&&(l=w[0],u=w[1],o=w[2])),[l,u,o]}return!1},curveContainsPoint:function(t,r,a,n,s){var o,l,u,h,c=t[1],f=t[2];for(u=this.qdt.find([c-s,f+s,c+s,f-s]),l=u.length,o=0;o<l;o++)if(h=Geometry.distPointSegment(t,[1,r[u[o].idx1],a[u[o].idx1]],[1,r[u[o].idx2],a[u[o].idx2]]),h<n)return!0;return!1},traceComponent:function(t){var r=[],a=[],n=[];return n=this.tracing(t,1),n.length===0||(r=n[0],a=n[1]),n[2]||(n=this.tracing(t,-1),n.length===0||(r=n[0].reverse().concat(r.slice(1)),a=n[1].reverse().concat(a.slice(1)))),r.length>0&&r.length<6&&(r.push(r[r.length-1]),a.push(a[a.length-1])),[r,a]},tracing:function(t,r){var a=[],n=[],s,o=[],l=[],u,h,c,f,d,p,v,y=0,b=0,_=!1,N,M,C,$,w,A,X,O,G,R=!1,B=!1,F=this.config.kappa_0,U=this.config.delta_0,q=this.config.alpha_0,ee=this.config.h_initial,z=this.config.max_steps,Y=r,K=[],Z=[],ne=[],j,V,L,ae;if(a=t.slice(1),K.push(a[0]),Z.push(a[1]),u=this.tangent(a),u===!1)return[];this.dfx(a[0],a[1]),this.dfy(a[0],a[1]);do{if(u=this.tangent(a),u===!1){a=o.slice(),K.push(a[0]),Z.push(a[1]);break}if(K.length===1)c=u.slice();else if(K.length===2)ne.push(K.length-1);else if(R&&K.length>2&&!B){if($=Geometry.distPointSegment([1,a[0],a[1]],[1,K[0],Z[0]],[1,K[1],Z[1]]),$<this.config.loop_dist*ee&&Mat.innerProduct(u,c,2)>this.config.loop_dir){a=t.slice(1),K.push(a[0]),Z.push(a[1]),_=!0;break}if(this.config.loop_detection){for(j=K.length-1,V=Math.floor(Mat.log2(j)),L=0;L<=V&&($=Geometry.distPointSegment([1,a[0],a[1]],[1,K[ne[L]-1],Z[ne[L]-1]],[1,K[ne[L]],Z[ne[L]]]),!($<this.config.loop_dist*ee&&(h=this.tangent([K[ne[L]],Z[ne[L]]]),Mat.innerProduct(u,h,2)>this.config.loop_dir)));L++);if(L<=V){_=!0;break}for(V=1,ae=0,L=0;L<100&&(j+1)%V===0;L++)V*=2,ae++;ne[ae]=j}}o[0]=a[0]+ee*Y*u[0],o[1]=a[1]+ee*Y*u[1],b=0;do d=[this.dfx(o[0],o[1]),this.dfy(o[0],o[1])],C=d[0]*d[0]+d[1]*d[1],p=this.f(o[0],o[1])/C,l[0]=o[0]-d[0]*p,l[1]=o[1]-d[1]*p,b===0?N=Math.abs(p)*Math.sqrt(C):b===1&&(M=Math.abs(p)*Math.sqrt(C)),o[0]=l[0],o[1]=l[1],b++;while(b<20&&Math.abs(this.f(o[0],o[1]))>this.config.tol_newton);if(X=N,b>1?A=M/N:A=0,h=this.tangent(o),v=Mat.innerProduct(u,h,2),v=Math.max(-1,Math.min(1,v)),O=Math.acos(v),B=!1,w=Geometry.distance(a,o,2),w<this.config.tol_progress){a=o.slice(),K.push(a[0]),Z.push(a[1]);break}else if(v<0&&!(ee>this.config.h_critical))if(B=!0,this.isBifurcation(a,this.config.tol_cusp))Y*=-1,O=0;else{a=o.slice(),K.push(a[0]),Z.push(a[1]);break}if(!B&&(G=Math.max(Math.sqrt(A/F),Math.sqrt(X/U),O/q),isNaN(G)&&(G=1),G=Math.max(Math.min(G,2),.5),ee/=G,ee=Math.min(this.config.h_max,ee),G>=2)){if(y++,y>=3*z)break;R=!1;continue}a=o.slice(),K.push(a[0]),Z.push(a[1]),R=!0,y++}while(y<z&&a[0]>=this.bbox[0]&&a[1]<=this.bbox[1]&&a[0]<=this.bbox[2]&&a[1]>=this.bbox[3]);return s=K.length,n=[K[s-2],Z[s-2]],a[0]<this.bbox[0]&&(a[0]!==n[0]&&(f=(this.bbox[0]-n[0])/(a[0]-n[0]),a[1]!==n[1]&&(a[1]=n[1]+f*(a[1]-n[1]))),a[0]=this.bbox[0]),a[0]>this.bbox[2]&&(a[0]!==n[0]&&(f=(this.bbox[2]-n[0])/(a[0]-n[0]),a[1]!==n[1]&&(a[1]=n[1]+f*(a[1]-n[1]))),a[0]=this.bbox[2]),a[1]<this.bbox[3]&&(a[1]!==n[1]&&(f=(this.bbox[3]-n[1])/(a[1]-n[1]),a[0]!==n[0]&&(a[0]=n[0]+f*(a[0]-n[0]))),a[1]=this.bbox[3]),a[1]>this.bbox[1]&&(a[1]!==n[1]&&(f=(this.bbox[1]-n[1])/(a[1]-n[1]),a[0]!==n[0]&&(a[0]=n[0]+f*(a[0]-n[0]))),a[1]=this.bbox[1]),K[s-1]=a[0],Z[s-1]=a[1],[K,Z,_]},isBifurcation:function(t,r){var a=Mat.eps*Mat.eps*100,n,s,o,l,u,h,c,f,d,p;return n=t[0],s=t[1],o=.5*(this.dfx(n+a,s)-this.dfx(n-a,s))/a,l=.5*(this.dfx(n,s+a)-this.dfx(n,s-a))/a,u=.5*(this.dfy(n+a,s)-this.dfy(n-a,s))/a,h=.5*(this.dfy(n,s+a)-this.dfy(n,s-a))/a,c=o+h,p=c*c-4*(o*h-l*u),f=.5*(c+Math.sqrt(p)),d=.5*(c-Math.sqrt(p)),Math.abs(f)>r&&Math.abs(d)>r},handleCriticalPoint:function(t,r,a,n){var s=Math.atan2(n*r[1],n*r[0]),o=function(c){var f=t[0]+a*Math.cos(c),d=t[1]+a*Math.sin(c);return this.f(f,d)},l,u,h;return h=Numerics.root(o,s),l=t[0]+a*Math.cos(h),u=t[1]+a*Math.sin(h),[l,u]},updateA:function(t,r,a){var n=[a[0]-r[0],a[1]-r[1]],s=this.f(a[0],a[1])-this.f(r[0],r[1]),o,l;return l=n[0]*n[0]+n[1]*n[1],o=s-(t[0]*n[0]+t[1]*n[1]),o/=l,t[0]+=o*n[0],t[1]+=o*n[1],t},tangent_A:function(t){var r=[-t[1],t[0]],a=Mat.norm(r,2);return a<Mat.eps,[r[0]/a,r[1]/a]},tangent:function(t){var r=[-this.dfy(t[0],t[1]),this.dfx(t[0],t[1])],a=Mat.norm(r,2);return a<Mat.eps*Mat.eps?!1:[r[0]/a,r[1]/a]}});const ImplicitPlot=Mat.ImplicitPlot;Mat.Metapost={MP_ENDPOINT:0,MP_EXPLICIT:1,MP_GIVEN:2,MP_CURL:3,MP_OPEN:4,MP_END_CYCLE:5,UNITY:1,FRACTION_ONE:1,FRACTION_THREE:3,ONE_EIGHTY_DEG:Math.PI,THREE_SIXTY_DEG:2*Math.PI,EPS_SQ:1e-5*1e-5,make_choices:function(t){var r,a,n,s,o,l,u,h,c,f,d,p,v,y,b,_=!0;u=t[0];do{if(!u)break;l=u.next,u.rtype>this.MP_EXPLICIT&&(u.x-l.x)*(u.x-l.x)+(u.y-l.y)*(u.y-l.y)<this.EPS_SQ&&(u.rtype=this.MP_EXPLICIT,u.ltype===this.MP_OPEN&&(u.ltype=this.MP_CURL,u.set_left_curl(this.UNITY)),l.ltype=this.MP_EXPLICIT,l.rtype===this.MP_OPEN&&(l.rtype=this.MP_CURL,l.set_right_curl(this.UNITY)),u.rx=u.x,l.lx=u.x,u.ry=u.y,l.ly=u.y),u=l}while(u!==t[0]);for(a=t[0];_&&!(a.ltype!==this.MP_OPEN||a.rtype!==this.MP_OPEN);)if(a=a.next,a===t[0]){a.ltype=this.MP_END_CYCLE;break}for(u=a;_&&u;){if(l=u.next,u.rtype>=this.MP_GIVEN){for(;l.ltype===this.MP_OPEN&&l.rtype===this.MP_OPEN;)l=l.next;for(n=0,h=u,o=t.length,p=[],v=[],y=[],b=[null];_&&(f=h.next,p.push(f.x-h.x),v.push(f.y-h.y),y.push(this.mp_pyth_add(p[n],v[n])),n>0&&(d=v[n-1]/y[n-1],c=p[n-1]/y[n-1],b.push(Math.atan2(v[n]*c-p[n]*d,p[n]*c+v[n]*d))),n++,h=f,h===l&&(o=n),!(n>=o&&h.ltype!==this.MP_END_CYCLE)););n===o?b.push(0):b.push(b[1]),l.ltype===this.MP_OPEN&&(s=l.rx-l.x,r=l.ry-l.y,s*s+r*r<this.EPS_SQ?(l.ltype=this.MP_CURL,l.set_left_curl(this.UNITY)):(l.ltype=this.MP_GIVEN,l.set_left_given(Math.atan2(r,s)))),u.rtype===this.MP_OPEN&&u.ltype===this.MP_EXPLICIT&&(s=u.x-u.lx,r=u.y-u.ly,s*s+r*r<this.EPS_SQ?(u.rtype=this.MP_CURL,u.set_right_curl(this.UNITY)):(u.rtype=this.MP_GIVEN,u.set_right_given(Math.atan2(r,s)))),this.mp_solve_choices(u,l,o,p,v,y,b)}else u.rtype===this.MP_ENDPOINT&&(u.rx=u.x,u.ry=u.y,l.lx=l.x,l.ly=l.y);if(u=l,u===a)break}},mp_solve_choices:function(t,r,a,n,s,o,l){var u,h,c,f,d,p,v,y,b,_,N,M,C,$,w,A,X,O,G,R,B,F,U,q,ee,z,Y=!0;for(d=o.length+1,_=new Array(d),b=new Array(d),c=new Array(d),w=new Array(d),ee=0;ee<d;ee++)w[ee]=c[ee]=b[ee]=_[ee]=0;for(v=0,y=t,M=0;Y;){if(C=y.next,v===0)if(y.rtype===this.MP_GIVEN){if(C.ltype===this.MP_GIVEN){u=Math.atan2(s[0],n[0]),G=this.mp_n_sin_cos(t.right_given()-u),R=G[0],B=G[1],F=this.mp_n_sin_cos(r.left_given()-u),U=F[0],q=F[1],this.mp_set_controls(t,r,n[0],s[0],B,R,-q,U);return}c[0]=y.right_given()-Math.atan2(s[0],n[0]),c[0]=this.reduce_angle(c[0]),_[0]=0,b[0]=0}else if(y.rtype===this.MP_CURL){if(C.ltype===this.MP_CURL){t.rtype=this.MP_EXPLICIT,r.ltype=this.MP_EXPLICIT,N=Math.abs(r.left_tension()),A=Math.abs(t.right_tension()),$=this.UNITY/(3*A),t.rx=t.x+n[0]*$,t.ry=t.y+s[0]*$,$=this.UNITY/(3*N),r.lx=r.x-n[0]*$,r.ly=r.y-s[0]*$;return}O=y.right_curl(),N=Math.abs(C.left_tension()),A=Math.abs(y.right_tension()),_[0]=this.mp_curl_ratio(O,A,N),c[0]=-l[1]*_[0],b[0]=0}else y.rtype===this.MP_OPEN&&(_[0]=0,c[0]=0,b[0]=this.FRACTION_ONE);else if(y.ltype===this.MP_END_CYCLE||y.ltype===this.MP_OPEN){if(u=this.UNITY/(3*Math.abs(M.right_tension())-this.UNITY),X=o[v]*(this.FRACTION_THREE-this.UNITY/Math.abs(M.right_tension())),f=this.UNITY/(3*Math.abs(C.left_tension())-this.UNITY),p=o[v-1]*(this.FRACTION_THREE-this.UNITY/Math.abs(C.left_tension())),O=this.FRACTION_ONE-_[v-1]*u,X=X*O,N=Math.abs(y.left_tension()),A=Math.abs(y.right_tension()),N<A?X*=Math.pow(N/A,2):N>A&&(p*=Math.pow(A/N,2)),$=p/(p+X),_[v]=$*f,h=-l[v+1]*_[v],M.rtype===this.MP_CURL?(b[v]=0,c[v]=h-l[1]*(this.FRACTION_ONE-$)):($=(this.FRACTION_ONE-$)/O,h=h-l[v]*$,$=$*u,c[v]=h-c[v-1]*$,b[v]=-b[v-1]*$),y.ltype===this.MP_END_CYCLE){for(u=0,f=this.FRACTION_ONE;Y&&(v-=1,v===0&&(v=a),u=c[v]-u*_[v],f=b[v]-f*_[v],v!==a););for(u=u/(this.FRACTION_ONE-f),w[a]=u,c[0]=u,z=1;z<a;z++)c[z]=c[z]+u*b[z];break}}else{if(y.ltype===this.MP_CURL){O=y.left_curl(),N=Math.abs(y.left_tension()),A=Math.abs(M.right_tension()),$=this.mp_curl_ratio(O,N,A),w[a]=-(c[a-1]*$)/(this.FRACTION_ONE-$*_[a-1]);break}if(y.ltype===this.MP_GIVEN){w[a]=y.left_given()-Math.atan2(s[a-1],n[a-1]),w[a]=this.reduce_angle(w[a]);break}}M=y,y=C,v+=1}for(v=a-1;v>-1;v--)w[v]=c[v]-w[v+1]*_[v];for(y=t,v=0;Y&&(C=y.next,G=this.mp_n_sin_cos(w[v]),R=G[0],B=G[1],F=this.mp_n_sin_cos(-l[v+1]-w[v+1]),U=F[0],q=F[1],this.mp_set_controls(y,C,n[v],s[v],B,R,q,U),v++,y=C,v!==a););},mp_n_sin_cos:function(t){return[Math.cos(t),Math.sin(t)]},mp_set_controls:function(t,r,a,n,s,o,l,u){var h,c,f,d,p;f=Math.abs(r.left_tension()),h=Math.abs(t.right_tension()),p=this.mp_velocity(s,o,l,u,h),c=this.mp_velocity(l,u,s,o,f),(t.right_tension()<0||r.left_tension()<0)&&(s>=0&&l>=0||s<=0&&l<=0)&&(d=Math.abs(s)*u+Math.abs(l)*o,d>0&&(d*=1.00024414062,t.right_tension()<0&&this.mp_ab_vs_cd(Math.abs(l),this.FRACTION_ONE,p,d)<0&&(p=Math.abs(l)/d),r.left_tension()<0&&this.mp_ab_vs_cd(Math.abs(s),this.FRACTION_ONE,c,d)<0&&(c=Math.abs(s)/d))),t.rx=t.x+(a*o-n*s)*p,t.ry=t.y+(n*o+a*s)*p,r.lx=r.x-(a*u+n*l)*c,r.ly=r.y-(n*u-a*l)*c,t.rtype=this.MP_EXPLICIT,r.ltype=this.MP_EXPLICIT},mp_pyth_add:function(t,r){return Mat.hypot(t,r)},mp_curl_ratio:function(t,r,a){var n=1/r,s=1/a;return Math.min(4,((3-n)*n*n*t+s*s*s)/(n*n*n*t+(3-s)*s*s))},mp_ab_vs_cd:function(t,r,a,n){return t*r===a*n?0:t*r>a*n?1:-1},mp_velocity:function(t,r,a,n,s){return Math.min(4,(2+Math.sqrt(2)*(t-a/16)*(a-t/16)*(r-n))/(1.5*s*(2+(Math.sqrt(5)-1)*r+(3-Math.sqrt(5))*n)))},reduce_angle:function(t){return Math.abs(t)>this.ONE_EIGHTY_DEG&&(t>0?t-=this.THREE_SIXTY_DEG:t+=this.THREE_SIXTY_DEG),t},makeknots:function(t,r){var a,n,s=[];for(n=t.length,a=0;a<n;a++)s.push({x:t[a][0],y:t[a][1],ltype:this.MP_OPEN,rtype:this.MP_OPEN,lx:!1,rx:!1,ly:r,ry:r,left_curl:function(){return this.lx||0},right_curl:function(){return this.rx||0},left_tension:function(){return this.ly||1},right_tension:function(){return this.ry||1},set_right_curl:function(o){this.rx=o||0},set_left_curl:function(o){this.lx=o||0}});for(n=s.length,a=0;a<n;a++)s[a].next=s[a+1]||s[a],s[a].set_right_given=s[a].set_right_curl,s[a].set_left_given=s[a].set_left_curl,s[a].right_given=s[a].right_curl,s[a].left_given=s[a].left_curl;return s[n-1].next=s[0],s},curve:function(t,r){var a,n,s,o,l,u,h=!1,c=[],f=[];r=r||{tension:1,direction:{},curl:{},isClosed:!1},l=1,r.hasOwnProperty("tension")&&(l=JXG$1.evaluate(r.tension)),a=this.makeknots(t,l),n=a.length,JXG$1.exists(r.isClosed)&&JXG$1.evaluate(r.isClosed)&&(h=!0),h||(a[0].ltype=this.MP_ENDPOINT,a[0].rtype=this.MP_CURL,a[n-1].rtype=this.MP_ENDPOINT,a[n-1].ltype=this.MP_CURL);for(o in r)if(r.hasOwnProperty(o)){if(s=parseInt(o,10),isNaN(s)||s<0||s>=n)continue;u=r[s],JXG$1.exists(u.type)&&u.type==="curl"&&(l=JXG$1.evaluate(u.curl),s===0?(a[s].rtype=this.MP_CURL,a[s].set_right_curl(l)):s===n-1?(a[s].ltype=this.MP_CURL,a[s].set_left_curl(l)):(a[s].ltype=this.MP_CURL,a[s].rtype=this.MP_CURL,a[s].lx=l,a[s].rx=l)),JXG$1.exists(u.direction)&&(l=JXG$1.evaluate(u.direction),JXG$1.isArray(l)?(l[0]!==!1&&(a[s].lx=l[0]*Math.PI/180,a[s].ltype=this.MP_GIVEN),l[1]!==!1&&(a[s].rx=l[1]*Math.PI/180,a[s].rtype=this.MP_GIVEN)):(a[s].lx=l*Math.PI/180,a[s].rx=l*Math.PI/180,a[s].ltype=a[s].rtype=this.MP_GIVEN)),JXG$1.exists(u.tension)&&(l=JXG$1.evaluate(u.tension),JXG$1.isArray(l)?(l[0]!==!1&&(a[s].ly=JXG$1.evaluate(l[0])),l[1]!==!1&&(a[s].ry=JXG$1.evaluate(l[1]))):(a[s].ly=l,a[s].ry=l))}for(this.make_choices(a),s=0;s<n-1;s++)c.push(a[s].x),c.push(a[s].rx),c.push(a[s+1].lx),f.push(a[s].y),f.push(a[s].ry),f.push(a[s+1].ly);return c.push(a[n-1].x),f.push(a[n-1].y),h&&(c.push(a[n-1].rx),f.push(a[n-1].ry),c.push(a[0].lx),f.push(a[0].ly),c.push(a[0].x),f.push(a[0].y)),[c,f]}};const Metapost=Mat.Metapost;Mat.Clip={_isSeparator:function(t){return isNaN(t.coords.usrCoords[1])&&isNaN(t.coords.usrCoords[2])},makeDoublyLinkedList:function(t){var r,a=null,n=[],s=t.length;if(s>0)for(r=0;r<s;r++){if(this._isSeparator(t[r])){t[r]._next=t[(r+1)%s],t[r]._prev=t[(s+r-1)%s];continue}a===null&&(a=r,n.push(a)),this._isSeparator(t[(r+1)%s])||r===s-1?(t[r]._next=t[a],t[a]._prev=t[r],t[r]._end=!0,a=null):(t[r]._next=t[(r+1)%s],t[a]._prev=t[r]),this._isSeparator(t[(s+r-1)%s])||(t[r]._prev=t[(s+r-1)%s])}return n},Vertex:function(t,r,a,n,s,o){this.pos=r,this.intersection=!0,this.coords=t,this.elementClass=Const.OBJECT_CLASS_POINT,this.data={alpha:a,path:n,pathname:s,done:!1,type:o,idx:0},this.neighbour=null,this.entry_exit=!1},_addToList:function(t,r,a){var n=t.length,s=Mat.eps*Mat.eps;n>0&&Math.abs(t[n-1].coords.usrCoords[0]-r.usrCoords[0])<s&&Math.abs(t[n-1].coords.usrCoords[1]-r.usrCoords[1])<s&&Math.abs(t[n-1].coords.usrCoords[2]-r.usrCoords[2])<s||t.push({pos:a,intersection:!1,coords:r,elementClass:Const.OBJECT_CLASS_POINT})},sortIntersections:function(t){var r,a,n,s,o,l,u=[],h=t.length;for(r=0;r<h;r++)if(t[r].sort(function(c,f){return c.data.alpha>f.data.alpha?1:-1}),t[r].length>0){for(o=t[r].length-1,n=t[r][0],s=n.data.path[n.pos],l=s._next,r===h-1&&(s._end=!1),n.data.alpha===0&&n.data.type==="T"?(s.intersection=!0,s.data=n.data,s.neighbour=n.neighbour,s.neighbour.neighbour=s,s.entry_exit=!1,t[r][0]=s):(n._prev=s,n._prev._next=n),a=1;a<=o;a++)n=t[r][a],n._prev=t[r][a-1],n._prev._next=n;n=t[r][o],n._next=l,n._next._prev=n,r===h-1&&(n._end=!0),u=u.concat(t[r])}return u},_inbetween:function(t,r,a){var n,s=Mat.eps*Mat.eps,o=a[1]-r[1],l=a[2]-r[2],u=t[1]-r[1],h=t[2]-r[2];return o===0&&l===0&&u===0&&h===0?!0:(Math.abs(u)<s&&Math.abs(o)<s?n=h/l:n=u/o,Math.abs(n)<s&&(n=0),n)},_print_array:function(t){var r,a;for(r=0;r<t.length;r++)try{a="",t[r]._end&&(a=" end"),console.log(r,t[r].coords.usrCoords,t[r].data.type,"	","prev",t[r]._prev.coords.usrCoords,"next",t[r]._next.coords.usrCoords+a)}catch{console.log(r,t[r].coords.usrCoords)}},_print_list:function(t){for(var r=0,a;r<100&&(t.data?a=t.data.alpha:a="-",console.log("	",t.coords.usrCoords,`
		is:`,t.intersection,"end:",t._end,a,`
		-:`,t._prev.coords.usrCoords,`
		+:`,t._next.coords.usrCoords,`
		n:`,t.intersection?t.neighbour.coords.usrCoords:"-"),!t._end);)t=t._next,r++},_noOverlap:function(t,r,a,n){var s,o=Math.sqrt(Mat.eps),l,u,h,c,f=!1;for(s=0;s<3;s++)if(l=Math.min(t[s],r[s]),u=Math.max(t[s],r[s]),h=Math.min(a[s],n[s]),c=Math.max(a[s],n[s]),u<h-o||l>c+o){f=!0;break}return f},findIntersections:function(t,r,a){var n=[],s=Mat.eps*100,o,l,u,h=t.length,c=r.length,f,d,p,v,y,b,_,N,M,C,$=[],w=[],A=[],X=[],O=!1,G=!1;for(l=0;l<c;l++)X.push([]);for(o=0;o<h;o++){if(A.push([]),this._isSeparator(t[o])||this._isSeparator(t[(o+1)%h])){O=!0;continue}if(O&&o===h-1)break;for(f=t[o].coords.usrCoords,d=t[(o+1)%h].coords.usrCoords,l=0;l<c;l++){if(this._isSeparator(r[l])||this._isSeparator(r[(l+1)%c])){G=!0;continue}if(G&&l===c-1)break;if(p=r[l].coords.usrCoords,v=r[(l+1)%c].coords.usrCoords,!this._noOverlap(f,d,p,v)&&(n=Geometry.meetSegmentSegment(f,d,p,v),y=Geometry.distance(f,d,3),b=Geometry.distance(p,v,3),n[1]*y>-s&&n[1]<1-s/y&&n[2]*b>-s&&n[2]<1-s/b||n[1]===1/0&&n[2]===1/0&&Mat.norm(n[0],3)<s)){if(u=new Coords(Const.COORDS_BY_USER,n[0],a),N="X",Math.abs(n[1])*y<s||Math.abs(n[2])*b<s)N="T",Math.abs(n[1])*y<s&&(n[1]=0),Math.abs(n[2])*b<s&&(n[2]=0),n[1]===0?u=new Coords(Const.COORDS_BY_USER,f,a):u=new Coords(Const.COORDS_BY_USER,p,a);else if(n[1]===1/0&&n[2]===1/0&&Mat.norm(n[0],3)<s){_=this._inbetween(f,p,v),_>=0&&_<1&&(N="T",u=new Coords(Const.COORDS_BY_USER,f,a),n[1]=0,n[2]=_,M=new this.Vertex(u,o,n[1],t,"S",N),C=new this.Vertex(u,l,n[2],r,"C",N),M.neighbour=C,C.neighbour=M,A[o].push(M),X[l].push(C)),_=this._inbetween(p,f,d),Geometry.distance(f,p,3)>s&&_>=0&&_<1&&(N="T",u=new Coords(Const.COORDS_BY_USER,p,a),n[1]=_,n[2]=0,M=new this.Vertex(u,o,n[1],t,"S",N),C=new this.Vertex(u,l,n[2],r,"C",N),M.neighbour=C,C.neighbour=M,A[o].push(M),X[l].push(C));continue}M=new this.Vertex(u,o,n[1],t,"S",N),C=new this.Vertex(u,l,n[2],r,"C",N),M.neighbour=C,C.neighbour=M,A[o].push(M),X[l].push(C)}}}for($=this.sortIntersections(A),o=0;o<$.length;o++)$[o].data.idx=o,$[o].neighbour.data.idx=o;return w=this.sortIntersections(X),[$,w]},_getPosition:function(t,r,a,n){var s=Geometry.det3p(t,r,a),o=Geometry.det3p(t,a,n),l=Geometry.det3p(r,a,n);return l>=0?s>=0&&o>=0?"left":"right":s>=0||o>=0?"left":"right"},_classifyDegenerateIntersections:function(t){var r,a,n,s,o,l,u,h,c,f,d,p,v,y,b=!0;for(c=Geometry.det3p,u=0,t._tours=0;b;){if(t.intersection&&t.data.type==="T"&&(r=t._next.coords.usrCoords,a=t._prev.coords.usrCoords,Geometry.distance(t.coords.usrCoords,r,3)<Mat.eps&&(r=t._next._next.coords.usrCoords),Geometry.distance(t.coords.usrCoords,a,3)<Mat.eps&&(a=t._prev._prev.coords.usrCoords),o=t.neighbour,s=o._prev.coords.usrCoords,n=o._next.coords.usrCoords,Geometry.distance(o.coords.usrCoords,n,3)<Mat.eps&&(n=o._next._next.coords.usrCoords),Geometry.distance(o.coords.usrCoords,s,3)<Mat.eps&&(s=o._prev._prev.coords.usrCoords),d=c(t.coords.usrCoords,a,s),p=c(t.coords.usrCoords,r,n),v=c(t.coords.usrCoords,a,n),y=c(t.coords.usrCoords,r,s),d===0&&p===0&&v===0&&y===0&&(t.coords.usrCoords[1]*=1+Math.random()*Mat.eps,t.coords.usrCoords[2]*=1+Math.random()*Mat.eps,o.coords.usrCoords[1]=t.coords.usrCoords[1],o.coords.usrCoords[2]=t.coords.usrCoords[2],d=c(t.coords.usrCoords,a,s),p=c(t.coords.usrCoords,r,n),v=c(t.coords.usrCoords,a,n),y=c(t.coords.usrCoords,r,s)),f=!1,d===0?Geometry.affineRatio(t.coords.usrCoords,a,s)<0&&(f=!0):p===0?Geometry.affineRatio(t.coords.usrCoords,r,n)<0&&(f=!0):v===0?Geometry.affineRatio(t.coords.usrCoords,a,n)>0&&(f=!0):y===0&&Geometry.affineRatio(t.coords.usrCoords,r,s)>0&&(f=!0),f&&(h=s,s=n,n=h,h=d,d=v,v=h,h=p,p=y,y=h),JXG$1.exists(t.delayedStatus)||(t.delayedStatus=[]),d===0&&p===0?t.delayedStatus=["on","on"]:d===0?(l=this._getPosition(r,s,o.coords.usrCoords,n),t.delayedStatus=["on",l]):p===0?(l=this._getPosition(a,s,o.coords.usrCoords,n),t.delayedStatus=[l,"on"]):t.delayedStatus.length===0&&(this._getPosition(a,s,o.coords.usrCoords,n)!==this._getPosition(r,s,o.coords.usrCoords,n)?t.data.type="X":t.data.type="B")),JXG$1.exists(t._tours)&&t._tours++,t._tours>3||t._end||u>1e3){u>1e3&&console.log("Clipping: _classifyDegenerateIntersections exit"),JXG$1.exists(t._tours)&&delete t._tours;break}t.intersection&&u++,t=t._next}},_handleIntersectionChains:function(t){for(var r=0,a="Null",n,s=!0,o=!1,l=!1;s&&(t.intersection===!0&&(t.data.type==="T"&&(t.delayedStatus[0]!=="on"&&t.delayedStatus[1]==="on"?(o=!0,n=t,a=t.delayedStatus[0]):o&&t.delayedStatus[0]==="on"&&t.delayedStatus[1]==="on"?t.data.type="B":o&&t.delayedStatus[0]==="on"&&t.delayedStatus[1]!=="on"&&(o=!1,a===t.delayedStatus[1]?(n.data.type="DB",t.data.type="DB"):(n.data.type="DX",t.data.type="DX"))),r++),t._end&&(l=!0),!(l&&!o));){if(r>1e3){console.log("Warning: _handleIntersectionChains: intersection chain reached maximum numbers of iterations");break}t=t._next}},_handleFullyDegenerateCase:function(t,r,a){var n,s,o,l,u,h,c,f,d,p,v,y,b,_,N,M=[t,r];for(o=0;o<2;o++){for(n=M[o],v=n.length,d=0,N=!0;d<v;d++)if(!n[d].intersection){N=!1;break}if(N)for(s=M[(o+1)%2],y=s.length,d=0;d<v;d++){for(h=n[d].coords.usrCoords,c=n[d]._next.coords.usrCoords,l=[(h[0]+c[0])*.5,(h[1]+c[1])*.5,(h[2]+c[2])*.5],p=0,b=!1;p<y;p++)if(Math.abs(Geometry.det3p(s[p].coords.usrCoords,s[(p+1)%y].coords.usrCoords,l))<Mat.eps){b=!0;break}if(!b){u=new Coords(Const.COORDS_BY_USER,l,a),f={pos:d,intersection:!1,coords:u,elementClass:Const.OBJECT_CLASS_POINT},_=n[d]._next,n[d]._next=f,f._prev=n[d],f._next=_,_._prev=f,n[d]._end&&(n[d]._end=!1,f._end=!0);break}}}},_getStatus:function(t,r){for(var a;t.intersection&&!t._end;)t=t._next;return Geometry.windingNumber(t.coords.usrCoords,r)===0?a="entry":a="exit",[t,a]},markEntryExit:function(t,r,a){var n,s,o,l,u,h,c,f=!0,d=null,p=0;for(h=a.length,u=0;u<h;u++)for(c=a[u],this._classifyDegenerateIntersections(t[c]),this._handleIntersectionChains(t[c]),l=this._getStatus(t[c],r),s=l[0],n=l[1],s._starter=!0,o=0,d=null,p=0;f&&(s.intersection===!0&&(s.data.type==="X"&&p===1&&(d.entry_exit=n,n==="exit"&&(d.data.type="X"),p=2),(s.data.type==="X"||s.data.type==="DB")&&(s.entry_exit=n,n=n==="entry"?"exit":"entry"),s.data.type==="DX"&&(p===0?(d=s,p=1):p===1?(s.entry_exit=n,d.entry_exit=n,n==="exit"?d.data.type="X":s.data.type="X",n=n==="entry"?"exit":"entry",d=null,p=0):p===2&&(s.entry_exit=n,s.data.type="X",n=n==="entry"?"exit":"entry",d=null,p=0))),s=s._next,!(JXG$1.exists(s._starter)||o>1e4));)o++},_stayOnPath:function(t,r){var a=!0;return t.intersection&&t.data.type!=="B"&&(a=r===t.entry_exit),a},_addVertex:function(t,r,a){return!isNaN(r.coords.usrCoords[1])&&!isNaN(r.coords.usrCoords[2])&&t.push(r),r.intersection&&r.data.done?(a&&console.log("Add last intersection point",r.coords.usrCoords,"on",r.data.pathname,r.entry_exit,r.data.type),!0):(r.intersection&&(r.data.done=!0,a&&console.log("Add intersection point",r.coords.usrCoords,"on",r.data.pathname,r.entry_exit,r.data.type)),!1)},tracing:function(t,r,a){for(var n,s,o,l,u=0,h=1e4,c=0,f=[],d=!1,p=!1;c<r.length&&u<h;){if(o=r[c],o.data.done||o.data.type!=="X"){c++;continue}f.length>0&&f.push([NaN,NaN]),l=o.data.idx,n=t,d=this._addVertex(f,o,p),s=o.entry_exit;do{if(d)break;if(a==="intersection"&&o.entry_exit==="entry"||a==="union"&&o.entry_exit==="exit"||a==="difference"&&n===t==(o.entry_exit==="exit")){do if(o=o._next,d=this._addVertex(f,o,p),d)break;while(this._stayOnPath(o,s));u++}else{do if(o=o._prev,d=this._addVertex(f,o,p),d)break;while(this._stayOnPath(o,s));u++}if(d)break;if(!o.neighbour)return console.log("Tracing: emergency break - no neighbour!!!!!!!!!!!!!!!!!",u),[[0],[0]];if(o=o.neighbour,o.data.done)break;o.data.done=!0,s=o.entry_exit,n=o.data.path}while(o.data.idx!==l&&u<h);u>=h&&console.log("Tracing: stopping an infinite loop!",u),c++}return this._getCoordsArrays(f,!1)},isEmptyCase:function(t,r,a){return a==="intersection"&&(t.length===0||r.length===0)||a==="union"&&t.length===0&&r.length===0||a==="difference"&&t.length===0},_getCoordsArrays:function(t,r){var a=[],n=[],s,o=t.length;for(s=0;s<o;s++)t[s].coords?(a.push(t[s].coords.usrCoords[1]),n.push(t[s].coords.usrCoords[2])):(a.push(t[s][0]),n.push(t[s][1]));return r&&o>0&&(t[0].coords?(a.push(t[0].coords.usrCoords[1]),n.push(t[0].coords.usrCoords[2])):(a.push(t[0][0]),n.push(t[0][1]))),[a,n]},handleEmptyIntersection:function(t,r,a){var n,s,o=!1,l=[];if(t.length===0)return a==="union"?l=r:l=[],this._getCoordsArrays(l,!0);if(r.length===0)return a==="intersection"?l=[]:l=t,this._getCoordsArrays(l,!0);if(t.length>0)for(n=t[0];n.intersection&&(n=n._next,!n._end););if(r.length>0)for(s=r[0];s.intersection&&(s=s._next,!s._end););return Geometry.windingNumber(n.coords.usrCoords,r)===0?Geometry.windingNumber(s.coords.usrCoords,t)!==0?(a==="union"?(JXG$1.concat(l,t),l.push(t[0])):a==="difference"&&(JXG$1.concat(l,t),l.push(t[0]),Geometry.signedPolygon(t)*Geometry.signedPolygon(r)>0&&l.reverse(),l.push([NaN,NaN])),(a==="difference"||a==="intersection")&&(JXG$1.concat(l,r),l.push(r[0]),o=!1)):a==="difference"?(JXG$1.concat(l,t),o=!0):a==="union"&&(JXG$1.concat(l,t),l.push(t[0]),l.push([NaN,NaN]),JXG$1.concat(l,r),l.push(r[0])):a==="intersection"?(JXG$1.concat(l,t),o=!0):a==="union"&&(JXG$1.concat(l,r),l.push(r[0])),this._getCoordsArrays(l,o)},_countCrossingIntersections:function(t){var r,a=t.length,n=0;for(r=0;r<a;r++)t[r].data.type==="X"&&n++;return n},_getPath:function(t,r){var a,n,s,o,l,u,h,c=[];if(t.elementClass===Const.OBJECT_CLASS_CURVE&&(t.type===Const.OBJECT_TYPE_ARC||t.type===Const.OBJECT_TYPE_SECTOR)){for(l=Geometry.rad(t.radiuspoint,t.center,t.anglepoint),h=Math.floor(l*180/Math.PI),s=t.Radius(),o=l/h,u=Math.atan2(t.radiuspoint.coords.usrCoords[2]-t.center.coords.usrCoords[2],t.radiuspoint.coords.usrCoords[1]-t.center.coords.usrCoords[1]),t.type===Const.OBJECT_TYPE_SECTOR&&this._addToList(c,t.center.coords,0),a=0;a<=h;a++)this._addToList(c,new Coords(Const.COORDS_BY_USER,[t.center.coords.usrCoords[0],t.center.coords.usrCoords[1]+Math.cos(a*o+u)*s,t.center.coords.usrCoords[2]+Math.sin(a*o+u)*s],r),a+1);t.type===Const.OBJECT_TYPE_SECTOR&&this._addToList(c,t.center.coords,h+2)}else if(t.elementClass===Const.OBJECT_CLASS_CURVE&&JXG$1.exists(t.points))for(n=t.numberPoints,a=0;a<n;a++)this._addToList(c,t.points[a],a);else if(t.type===Const.OBJECT_TYPE_POLYGON)for(a=0;a<t.vertices.length;a++)this._addToList(c,t.vertices[a].coords,a);else if(t.elementClass===Const.OBJECT_CLASS_CIRCLE)for(h=359,s=t.Radius(),o=2*Math.PI/h,a=0;a<=h;a++)this._addToList(c,new Coords(Const.COORDS_BY_USER,[t.center.coords.usrCoords[0],t.center.coords.usrCoords[1]+Math.cos(a*o)*s,t.center.coords.usrCoords[2]+Math.sin(a*o)*s],r),a);else if(JXG$1.isArray(t))for(n=t.length,a=0;a<n;a++)JXG$1.exists(t[a].coords)?this._addToList(c,t[a].coords,a):JXG$1.isArray(t[a])?this._addToList(c,new Coords(Const.COORDS_BY_USER,t[a],r),a):JXG$1.exists(t[a].usrCoords)&&this._addToList(c,t[a],a);return c},greinerHormann:function(t,r,a,n){var s,o=[],l=[],u=[],h,c,f=[];return o=this._getPath(t,n),s=o.length,s>0&&Geometry.distance(o[0].coords.usrCoords,o[s-1].coords.usrCoords,3)<Mat.eps&&o.pop(),l=this._getPath(r,n),s=l.length,s>0&&Geometry.distance(l[0].coords.usrCoords,l[s-1].coords.usrCoords,3)<Mat.eps*Mat.eps&&l.pop(),this.isEmptyCase(o,l,a)?[[],[]]:(h=this.makeDoublyLinkedList(o),c=this.makeDoublyLinkedList(l),f=this.findIntersections(o,l,n),u=f[0],this._handleFullyDegenerateCase(o,l,n),this.markEntryExit(o,l,h),this.markEntryExit(l,o,c),this._countCrossingIntersections(u)===0?this.handleEmptyIntersection(o,l,a):this.tracing(o,u,a))},union:function(t,r,a){return this.greinerHormann(t,r,"union",a)},intersection:function(t,r,a){return this.greinerHormann(t,r,"intersection",a)},difference:function(t,r,a){return this.greinerHormann(t,r,"difference",a)}};const Clip=Mat.Clip;Mat.Poly={};Mat.Poly.Ring=function(t){this.vars=t};JXG$1.extend(Mat.Poly.Ring.prototype,{});Mat.Poly.Monomial=function(t,r,a){var n;if(!JXG$1.exists(t))throw new Error("JSXGraph error: In JXG.Math.Poly.monomial missing parameter 'ring'.");for(JXG$1.isArray(a)||(a=[]),a=a.slice(0,t.vars.length),n=a.length;n<t.vars.length;n++)a.push(0);this.ring=t,this.coefficient=r||0,this.exponents=JXG$1.deepCopy(a)};JXG$1.extend(Mat.Poly.Monomial.prototype,{copy:function(){return new Mat.Poly.Monomial(this.ring,this.coefficient,this.exponents)},print:function(){var t=[],r;for(r=0;r<this.ring.vars.length;r++)t.push(this.ring.vars[r]+"^"+this.exponents[r]);return this.coefficient+"*"+t.join("*")}});Mat.Poly.Polynomial=function(t,r){var a=function(){},n;if(!JXG$1.exists(t))throw new Error("JSXGraph error: In JXG.Math.Poly.polynomial missing parameter 'ring'.");JXG$1.exists(r)&&JXG$1.isString(r)?n=a():n=[],this.ring=t,this.monomials=n};JXG$1.extend(Mat.Poly.Polynomial.prototype,{findSignature:function(t){var r;for(r=0;r<this.monomials.length;r++)if(JXG$1.cmpArrays(this.monomials[r].exponents,t))return r;return-1},addSubMonomial:function(t,r){var a;a=this.findSignature(t.exponents),a>-1?this.monomials[a].coefficient+=r*t.coefficient:(t.coefficient*=r,this.monomials.push(t))},add:function(t){var r;if(JXG$1.exists(t)&&t.ring===this.ring)if(JXG$1.isArray(t.exponents))this.addSubMonomial(t,1);else for(r=0;r<t.monomials.length;r++)this.addSubMonomial(t.monomials[r],1);else throw new Error("JSXGraph error: In JXG.Math.Poly.polynomial.add either summand is undefined or rings don't match.")},sub:function(t){var r;if(JXG$1.exists(t)&&t.ring===this.ring)if(JXG$1.isArray(t.exponents))this.addSubMonomial(t,-1);else for(r=0;r<t.monomials.length;r++)this.addSubMonomial(t.monomials[r],-1);else throw new Error("JSXGraph error: In JXG.Math.Poly.polynomial.sub either summand is undefined or rings don't match.")},copy:function(){var t,r;for(r=new Mat.Poly.Polynomial(this.ring),t=0;t<this.monomials.length;t++)r.monomials.push(this.monomials[t].copy());return r},print:function(){var t=[],r;for(r=0;r<this.monomials.length;r++)t.push("("+this.monomials[r].print()+")");return t.join("+")}});Mat.Poly;JXG$1.Complex=function(t,r){this.isComplex=!0,t&&t.isComplex&&(r=t.imaginary,t=t.real),this.real=t||0,this.imaginary=r||0};JXG$1.extend(JXG$1.Complex.prototype,{toString:function(){return this.real+" + "+this.imaginary+"i"},add:function(t){return JXG$1.isNumber(t)?this.real+=t:(this.real+=t.real,this.imaginary+=t.imaginary),this},sub:function(t){return JXG$1.isNumber(t)?this.real-=t:(this.real-=t.real,this.imaginary-=t.imaginary),this},mult:function(t){var r,a;return JXG$1.isNumber(t)?(this.real*=t,this.imaginary*=t):(r=this.real,a=this.imaginary,this.real=r*t.real-a*t.imaginary,this.imaginary=r*t.imaginary+a*t.real),this},div:function(t){var r,a,n;if(JXG$1.isNumber(t)){if(Math.abs(t)<Math.eps)return this.real=1/0,this.imaginary=1/0,this;this.real/=t,this.imaginary/=t}else{if(Math.abs(t.real)<Math.eps&&Math.abs(t.imaginary)<Math.eps)return this.real=1/0,this.imaginary=1/0,this;r=t.real*t.real+t.imaginary*t.imaginary,n=this.real,a=this.imaginary,this.real=(n*t.real+a*t.imaginary)/r,this.imaginary=(a*t.real-n*t.imaginary)/r}return this},conj:function(){return this.imaginary*=-1,this},abs:function(){var t=this.real,r=this.imaginary;return Math.sqrt(t*t+r*r)},angle:function(){return Math.atan2(this.imaginary,this.real)}});JXG$1.C={};JXG$1.C.add=function(t,r){var a=new JXG$1.Complex(t);return a.add(r),a};JXG$1.C.sub=function(t,r){var a=new JXG$1.Complex(t);return a.sub(r),a};JXG$1.C.mult=function(t,r){var a=new JXG$1.Complex(t);return a.mult(r),a};JXG$1.C.div=function(t,r){var a=new JXG$1.Complex(t);return a.div(r),a};JXG$1.C.conj=function(t){var r=new JXG$1.Complex(t);return r.conj(),r};JXG$1.C.abs=function(t){var r=new JXG$1.Complex(t);return r.abs()};JXG$1.C.angle=function(t){var r=new JXG$1.Complex(t);return r.angle()};JXG$1.C.copy=function(t){return new JXG$1.Complex(t)};JXG$1.Complex.C=JXG$1.C;const Complex=JXG$1.Complex;var simpleColors={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",venetianred:"ae181e",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"},colorDefs=[{re:/^\s*rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*([\d.]{1,3})\s*\)\s*$/,example:["rgba(123, 234, 45, 0.5)","rgba(255,234,245,1.0)"],process:function(t){return[parseInt(t[1],10),parseInt(t[2],10),parseInt(t[3],10)]}},{re:/^\s*rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)\s*$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(t){return[parseInt(t[1],10),parseInt(t[2],10),parseInt(t[3],10)]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}}];JXG$1.rgbParser=function(t,r,a){var n,s,o,l,u,h,c,f,d,p=t,v;if(!JXG$1.exists(t))return[];if(JXG$1.exists(r)&&JXG$1.exists(a)&&(p=[t,r,a]),n=p,v=!1,JXG$1.isArray(n)){for(h=0;h<3;h++)v=v||/\./.test(p[h].toString());for(h=0;h<3;h++)v=v&&p[h]>=0&&p[h]<=1;return v?[Math.ceil(p[0]*255),Math.ceil(p[1]*255),Math.ceil(p[2]*255)]:p}for(typeof p=="string"&&(n=p),n.charAt(0)==="#"&&(n=n.slice(1,7)),n=n.replace(/ /g,"").toLowerCase(),n=simpleColors[n]||n,h=0;h<colorDefs.length;h++)o=colorDefs[h].re,l=colorDefs[h].process,u=o.exec(n),u&&(s=l(u),c=s[0],f=s[1],d=s[2]);return isNaN(c)||isNaN(f)||isNaN(d)?[]:(c=c<0||isNaN(c)?0:c>255?255:c,f=f<0||isNaN(f)?0:f>255?255:f,d=d<0||isNaN(d)?0:d>255?255:d,[c,f,d])};JXG$1.isColor=function(t){var r=new Option().style;return r.color=t,r.color!==""};JXG$1.rgb2css=function(t,r,a){var n;return n=JXG$1.rgbParser(t,r,a),"rgb("+n[0]+", "+n[1]+", "+n[2]+")"};JXG$1.rgb2hex=function(t,r,a){var n,s,o;return n=JXG$1.rgbParser(t,r,a),s=n[1],o=n[2],n=n[0],n=n.toString(16),s=s.toString(16),o=o.toString(16),n.length===1&&(n="0"+n),s.length===1&&(s="0"+s),o.length===1&&(o="0"+o),"#"+n+s+o};JXG$1.hex2rgb=function(t){return JXG$1.deprecated("JXG.hex2rgb()","JXG.rgb2css()"),JXG$1.rgb2css(t)};JXG$1.hsv2rgb=function(t,r,a){var n,s,o,l,u,h,c,f,d;if(t=(t%360+360)%360,r===0)if(isNaN(t)||t<Mat.eps)n=a,s=a,o=a;else return"#ffffff";else switch(t>=360?h=0:h=t,h=h/60,u=Math.floor(h),l=h-u,c=a*(1-r),f=a*(1-r*l),d=a*(1-r*(1-l)),u){case 0:n=a,s=d,o=c;break;case 1:n=f,s=a,o=c;break;case 2:n=c,s=a,o=d;break;case 3:n=c,s=f,o=a;break;case 4:n=d,s=c,o=a;break;case 5:n=a,s=c,o=f;break}return n=Math.round(n*255).toString(16),n=n.length===2?n:n.length===1?"0"+n:"00",s=Math.round(s*255).toString(16),s=s.length===2?s:s.length===1?"0"+s:"00",o=Math.round(o*255).toString(16),o=o.length===2?o:o.length===1?"0"+o:"00",["#",n,s,o].join("")};JXG$1.rgb2hsv=function(t,r,a){var n,s,o,l,u,h,c,f,d,p,v,y,b;return n=JXG$1.rgbParser(t,r,a),s=n[1],o=n[2],n=n[0],l=n/255,u=s/255,h=o/255,y=Math.max(n,s,o),b=Math.min(n,s,o),c=y/255,f=b/255,v=c,p=0,v>0&&(p=(v-f)/v),d=1/(c-f),p>0&&(y===n?d=(u-h)*d:y===s?d=2+(h-l)*d:d=4+(l-u)*d),d*=60,d<0&&(d+=360),y===b&&(d=0),[d,p,v]};JXG$1.rgb2LMS=function(t,r,a){var n,s,o,l,u,h,c,f=[[.05059983,.08585369,.0095242],[.01893033,.08925308,.01370054],[.00292202,.00975732,.07145979]];return n=JXG$1.rgbParser(t,r,a),s=n[1],o=n[2],n=n[0],n=Math.pow(n,.476190476),s=Math.pow(s,.476190476),o=Math.pow(o,.476190476),l=n*f[0][0]+s*f[0][1]+o*f[0][2],u=n*f[1][0]+s*f[1][1]+o*f[1][2],h=n*f[2][0]+s*f[2][1]+o*f[2][2],c=[l,u,h],c.l=l,c.m=u,c.s=h,c};JXG$1.LMS2rgb=function(t,r,a){var n,s,o,l,u=[[30.830854,-29.832659,1.610474],[-6.481468,17.715578,-2.532642],[-.37569,-1.199062,14.273846]],h=function(c){for(var f=127,d=64;d>0;){if(Math.pow(f,.476190476)>c)f-=d;else{if(Math.pow(f+1,.476190476)>c)return f;f+=d}d/=2}return f===254&&13.994955247<c?255:f};return n=t*u[0][0]+r*u[0][1]+a*u[0][2],s=t*u[1][0]+r*u[1][1]+a*u[1][2],o=t*u[2][0]+r*u[2][1]+a*u[2][2],n=h(n),s=h(s),o=h(o),l=[n,s,o],l.r=n,l.g=s,l.b=o,l};JXG$1.rgba2rgbo=function(t){var r;return t.length===9&&t.charAt(0)==="#"?(r=parseInt(t.slice(7,9).toUpperCase(),16)/255,t=t.slice(0,7)):r=1,[t,r]};JXG$1.rgbo2rgba=function(t,r){var a;return t==="none"||t==="transparent"?t:(a=Math.round(r*255).toString(16),a.length===1&&(a="0"+a),JXG$1.rgb2hex(t)+a)};JXG$1.rgb2bw=function(t){var r,a,n,s="0123456789ABCDEF";return t==="none"||(n=JXG$1.rgbParser(t),r=Math.floor(.3*n[0]+.59*n[1]+.11*n[2]),a=s.charAt(r>>4&15)+s.charAt(r&15),t="#"+a+a+a),t};JXG$1.rgb2cb=function(t,r){var a,n,s,o,l,u,h,c,f,d,p,v,y,b="0123456789ABCDEF";if(t==="none")return t;switch(l=JXG$1.rgb2LMS(t),n=l[0],s=l[1],o=l[2],r=r.toLowerCase(),r){case"protanopia":h=-.06150039994295001,c=.08277001656812001,f=-.013200141220000003,d=.05858939668799999,p=-.07934519995360001,v=.013289415272000003,y=.6903216543277437,u=o/s,u<y?n=-(c*s+f*o)/h:n=-(p*s+v*o)/d;break;case"tritanopia":h=-.00058973116217,c=.007690316482,f=-.01011703519052,d=.025495080838999994,p=-.0422740347,v=.017005316784,y=.8349489908460004,u=s/n,u<y?o=-(h*n+c*s)/f:o=-(d*n+p*s)/v;break;default:h=-.06150039994295001,c=.08277001656812001,f=-.013200141220000003,d=.05858939668799999,p=-.07934519995360001,v=.013289415272000003,y=.5763833686400911,u=o/n,u<y?s=-(h*n+f*o)/c:s=-(d*n+v*o)/p;break}return a=JXG$1.LMS2rgb(n,s,o),u=b.charAt(a[0]>>4&15)+b.charAt(a[0]&15),t="#"+u,u=b.charAt(a[1]>>4&15)+b.charAt(a[1]&15),t+=u,u=b.charAt(a[2]>>4&15)+b.charAt(a[2]&15),t+=u,t};JXG$1.shadeColor=function(t,r){var a=JXG$1.rgbParser(t),n=a[0],s=a[1],o=a[2];return n=parseInt(n+255*r),s=parseInt(s+255*r),o=parseInt(o+255*r),n=n>0?n:0,s=s>0?s:0,o=o>0?o:0,n=n<255?n:255,s=s<255?s:255,o=o<255?o:255,n=Math.round(n),s=Math.round(s),o=Math.round(o),JXG$1.rgb2hex([n,s,o])};JXG$1.lightenColor=function(t,r){return JXG$1.shadeColor(t,r)};JXG$1.darkenColor=function(t,r){return JXG$1.shadeColor(t,-1*r)};JXG$1.autoHighlight=function(t){var r=JXG$1.rgba2rgbo(t),a=r[0],n=r[1];return t.charAt(0)==="#"?(n<.3?n*=1.8:n*=.4,JXG$1.rgbo2rgba(a,n)):t};JXG$1.contrast=function(t,r,a,n){var s,o="#000000",l,u,h,c;return r=r||"#000000",a=a||"#ffffff",n=n||7,s=JXG$1.rgbParser(t),l=JXG$1.rgbParser(o),u=.2126*Math.pow(s[0]/255,2.2)+.7152*Math.pow(s[1]/255,2.2)+.0722*Math.pow(s[2]/255,2.2),h=.2126*Math.pow(l[0]/255,2.2)+.7152*Math.pow(l[1]/255,2.2)+.0722*Math.pow(l[2]/255,2.2),u>h?c=Math.floor((u+.05)/(h+.05)):c=Math.floor((h+.05)/(u+.05)),c=c-1,c>n?r:a};JXG$1.setClassicColors=function(){JXG$1.Options.elements.strokeColor="blue",JXG$1.Options.elements.fillColor="red",JXG$1.Options.hatch.strokeColor="blue",JXG$1.Options.angle.fillColor="#ff7f00",JXG$1.Options.angle.highlightFillColor="#ff7f00",JXG$1.Options.angle.strokeColor="#ff7f00",JXG$1.Options.angle.label.strokeColor="blue",JXG$1.Options.arc.strokeColor="blue",JXG$1.Options.circle.center.fillColor="red",JXG$1.Options.circle.center.strokeColor="blue",JXG$1.Options.circumcircle.strokeColor="blue",JXG$1.Options.circumcircle.center.fillColor="red",JXG$1.Options.circumcircle.center.strokeColor="blue",JXG$1.Options.circumcirclearc.strokeColor="blue",JXG$1.Options.circumcirclesector.strokeColor="blue",JXG$1.Options.circumcirclesector.fillColor="green",JXG$1.Options.circumcirclesector.highlightFillColor="green",JXG$1.Options.conic.strokeColor="blue",JXG$1.Options.curve.strokeColor="blue",JXG$1.Options.incircle.strokeColor="blue",JXG$1.Options.incircle.center.fillColor="red",JXG$1.Options.incircle.center.strokeColor="blue",JXG$1.Options.inequality.fillColor="red",JXG$1.Options.integral.fillColor="red",JXG$1.Options.integral.curveLeft.color="red",JXG$1.Options.integral.curveRight.color="red",JXG$1.Options.line.strokeColor="blue",JXG$1.Options.point.fillColor="red",JXG$1.Options.point.strokeColor="red",JXG$1.Options.polygon.fillColor="green",JXG$1.Options.polygon.highlightFillColor="green",JXG$1.Options.polygon.vertices.strokeColor="red",JXG$1.Options.polygon.vertices.fillColor="red",JXG$1.Options.regularpolygon.fillColor="green",JXG$1.Options.regularpolygon.highlightFillColor="green",JXG$1.Options.regularpolygon.vertices.strokeColor="red",JXG$1.Options.regularpolygon.vertices.fillColor="red",JXG$1.Options.riemannsum.fillColor="yellow",JXG$1.Options.sector.fillColor="green",JXG$1.Options.sector.highlightFillColor="green",JXG$1.Options.semicircle.center.fillColor="red",JXG$1.Options.semicircle.center.strokeColor="blue",JXG$1.Options.slopetriangle.fillColor="red",JXG$1.Options.slopetriangle.highlightFillColor="red",JXG$1.Options.turtle.arrow.strokeColor="blue"};JXG$1.extend(JXG$1,{paletteWong:{black:"#000000",orange:"#E69F00",skyblue:"#56B4E9",bluishgreen:"#009E73",yellow:"#F0E442",darkblue:"#0072B2",vermillion:"#D55E00",reddishpurple:"#CC79A7",blue:"#0072B2",red:"#D55E00",green:"#009E73",purple:"#CC79A7",white:"#ffffff"}});JXG$1.palette=JXG$1.paletteWong;JXG$1.Options={jc:{enabled:!0,compile:!0},board:{animationDelay:35,axis:!1,boundingBox:[-5,5,5,-5],browserPan:!1,clickDelay:600,dblClickSuppressClick:!1,defaultAxes:{x:{name:"x",fixed:!0,needsRegularUpdate:!1,ticks:{label:{visible:"inherit",anchorX:"middle",anchorY:"top",fontSize:12,offset:[0,-3]},tickEndings:[0,1],majorTickEndings:[1,1],drawZero:!1,visible:"inherit"}},y:{name:"y",fixed:!0,needsRegularUpdate:!1,ticks:{label:{visible:"inherit",anchorX:"right",anchorY:"middle",fontSize:12,offset:[-6,0]},tickEndings:[1,0],majorTickEndings:[1,1],drawZero:!1,visible:"inherit"}}},document:!1,drag:{enabled:!0},fullscreen:{symbol:'<svg height="1em" width="1em" version="1.1" viewBox="10 10 18 18"><path fill="#666" d="m 10,16 2,0 0,-4 4,0 0,-2 L 10,10 l 0,6 0,0 z"></path><path fill="#666" d="m 20,10 0,2 4,0 0,4 2,0 L 26,10 l -6,0 0,0 z"></path><path fill="#666" d="m 24,24 -4,0 0,2 L 26,26 l 0,-6 -2,0 0,4 0,0 z"></path><path fill="#666" d="M 12,20 10,20 10,26 l 6,0 0,-2 -4,0 0,-4 0,0 z"></path></svg>',scale:.85,id:null},ignoreLabels:!0,intl:{enabled:!1},keepAspectRatio:!1,keyboard:{enabled:!0,dx:10,dy:10,panShift:!0,panCtrl:!1},logging:{enabled:!1},minimizeReflow:"none",maxBoundingBox:[-1/0,1/0,1/0,-1/0],maxFrameRate:40,maxNameLength:1,moveTarget:null,offsetX:0,offsetY:0,pan:{enabled:!0,needShift:!0,needTwoFingers:!1},registerEvents:!0,renderer:"auto",resize:{enabled:!0,throttle:10},screenshot:{scale:1,type:"png",symbol:"",css:"background-color:#eeeeee; opacity:1.0; border:2px solid black; border-radius:10px; text-align:center",cssButton:"padding: 4px 10px; border: solid #356AA0 1px; border-radius: 5px; position: absolute; right: 2ex; top: 2ex; background-color: rgba(255, 255, 255, 0.3);"},selection:{enabled:!1,name:"selectionPolygon",needShift:!1,needCtrl:!0,fillColor:"#ffff00",visible:!1,withLines:!1,vertices:{visible:!1}},showClearTraces:!1,showCopyright:!0,showFullscreen:!1,showInfobox:!0,showLogo:!1,showNavigation:!0,showReload:!1,showScreenshot:!1,showZoom:!0,takeFirst:!1,takeSizeFromFile:!1,theme:"default",title:"",zoom:{enabled:!0,factorX:1.25,factorY:1.25,wheel:!0,needShift:!0,center:"auto",min:1e-4,max:1e4,pinch:!0,pinchHorizontal:!0,pinchVertical:!0,pinchSensitivity:7},zoomX:1,zoomY:1},navbar:{strokeColor:"#333333",fillColor:"transparent",highlightFillColor:"#aaaaaa",padding:"2px",position:"absolute",fontSize:"14px",cursor:"pointer",zIndex:"100",right:"5px",bottom:"5px"},elements:{aria:{enabled:!1,label:"",live:"assertive"},cssClass:"",highlightCssClass:"",dash:0,dashScale:!1,draft:{draft:!1,strokeColor:"#565656",fillColor:"#565656",strokeOpacity:.8,fillOpacity:.8,strokeWidth:1},dragToTopOfLayer:!1,element3D:null,fillColor:JXG$1.palette.red,fillOpacity:1,fixed:!1,frozen:!1,gradient:null,gradientAngle:0,gradientCX:.5,gradientCY:.5,gradientEndOffset:1,gradientFX:.5,gradientFY:.5,gradientFR:0,gradientR:.5,gradientSecondColor:"#ffffff",gradientSecondOpacity:1,gradientStartOffset:0,highlight:!0,highlightFillColor:"none",highlightFillOpacity:1,highlightStrokeColor:"#c3d9ff",highlightStrokeOpacity:1,highlightStrokeWidth:2,isLabel:!1,layer:0,lineCap:"butt",needsRegularUpdate:!0,nonnegativeOnly:!1,precision:"inherit",priv:!1,rotatable:!0,scalable:!0,shadow:{enabled:!1,color:[0,0,0],opacity:1,blur:3,blend:.1,offset:[5,5]},snapToGrid:!1,strokeColor:JXG$1.palette.blue,strokeOpacity:1,strokeWidth:2,tabindex:-1,trace:!1,traceAttributes:{},transitionDuration:100,transitionProperties:["fill","fill-opacity","stroke","stroke-opacity","stroke-width"],visible:!0,withLabel:!1,ignoreForLabelAutoposition:!1},ticks:{generateLabelText:null,generateLabelValue:null,drawLabels:!1,label:{tabindex:null,layer:7,highlight:!1,autoPosition:!1},beautifulScientificTickLabels:!1,useUnicodeMinus:!0,anchor:"left",drawZero:!1,insertTicks:!1,minTicksDistance:10,minorHeight:4,majorHeight:10,tickEndings:[1,1],majorTickEndings:[1,1],ignoreInfiniteTickEndings:!0,minorTicks:4,ticksPerLabel:!1,scale:1,scaleSymbol:"",labels:[],maxLabelLength:5,precision:3,digits:3,ticksDistance:1,face:"|",strokeOpacity:1,strokeWidth:1,strokeColor:"#000000",highlightStrokeColor:"#888888",fillColor:"none",highlightFillColor:"none",visible:"inherit",includeBoundaries:!1,type:"linear",intl:{enabled:"inherit",options:{}},minorTicksInArrow:!1,majorTicksInArrow:!0,labelInArrow:!0,minorTicksInMargin:!1,majorTicksInMargin:!0,labelInMargin:!0,ignoreForLabelAutoposition:!0},hatch:{drawLabels:!1,drawZero:!0,majorHeight:20,anchor:"middle",face:"|",strokeWidth:2,strokeColor:JXG$1.palette.blue,ticksDistance:.2},precision:{touch:30,touchMax:100,mouse:4,pen:4,epsilon:1e-4,hasPoint:4},layer:{numlayers:20,unused9:19,unused8:18,unused7:17,unused6:16,unused5:15,unused4:14,unused3:13,unused2:12,unused1:11,unused0:10,text:9,point:9,glider:9,arc:8,line:7,circle:6,curve:5,turtle:5,polygon:3,sector:3,angle:3,integral:3,axis:2,ticks:2,grid:1,image:0,trace:0},angle:{withLabel:!0,radius:"auto",type:"sector",orthoType:"square",orthoSensitivity:1,fillColor:JXG$1.palette.orange,highlightFillColor:JXG$1.palette.orange,strokeColor:JXG$1.palette.orange,fillOpacity:.3,highlightFillOpacity:.3,radiuspoint:{withLabel:!1,visible:!1,name:""},pointsquare:{withLabel:!1,visible:!1,name:""},dot:{visible:!1,strokeColor:"none",fillColor:"#000000",size:2,face:"o",withLabel:!1,name:""},label:{position:"top",offset:[0,0],strokeColor:JXG$1.palette.blue},arc:{visible:!1,fillColor:"none"}},arc:{selection:"auto",hasInnerPoints:!1,label:{anchorX:"auto",anchorY:"auto"},firstArrow:!1,lastArrow:!1,fillColor:"none",highlightFillColor:"none",strokeColor:JXG$1.palette.blue,highlightStrokeColor:"#c3d9ff",useDirection:!1,center:{},radiusPoint:{},anglePoint:{}},arrow:{firstArrow:!1,lastArrow:{type:1,highlightSize:6,size:6}},arrowparallel:{firstArrow:!1,lastArrow:{type:1,highlightSize:6,size:6}},axis:{name:"",needsRegularUpdate:!1,strokeWidth:1,lastArrow:{type:1,highlightSize:8,size:8},strokeColor:"#666666",highlightStrokeWidth:1,highlightStrokeColor:"#888888",position:"static",anchor:"",anchorDist:"10%",ticksAutoPos:!1,ticksAutoPosThreshold:"5%",withTicks:!0,straightFirst:!0,straightLast:!0,margin:-4,withLabel:!1,scalable:!1,ticks:{label:{offset:[4,-9],parse:!1,needsRegularUpdate:!1,display:"internal",visible:"inherit",layer:9},visible:"inherit",needsRegularUpdate:!1,strokeWidth:1,strokeColor:"#666666",highlightStrokeColor:"#888888",drawLabels:!0,drawZero:!1,insertTicks:!0,minTicksDistance:5,minorHeight:10,majorHeight:-1,tickEndings:[0,1],majorTickEndings:[1,1],minorTicks:4,ticksDistance:1,strokeOpacity:.25},point1:{needsRegularUpdate:!1,visible:!1},point2:{needsRegularUpdate:!1,visible:!1},tabindex:-1,label:{position:"lft",offset:[10,10]},ignoreForLabelAutoposition:!0},bisector:{strokeColor:"#000000",point:{visible:!1,fixed:!1,withLabel:!1,name:""}},bisectorlines:{line1:{strokeColor:"#000000"},line2:{strokeColor:"#000000"}},boxplot:{dir:"vertical",smallWidth:.5,strokeWidth:2,strokeColor:JXG$1.palette.blue,fillColor:JXG$1.palette.blue,fillOpacity:.2,highlightStrokeWidth:2,highlightStrokeColor:JXG$1.palette.blue,highlightFillColor:JXG$1.palette.blue,highlightFillOpacity:.1},button:{disabled:!1,display:"html"},cardinalspline:{createPoints:!0,isArrayOfCoordinates:!0,points:{strokeOpacity:.05,fillOpacity:.05,highlightStrokeOpacity:1,highlightFillOpacity:1,withLabel:!1,name:"",fixed:!1}},chart:{chartStyle:"line",colors:["#B02B2C","#3F4C6B","#C79810","#D15600","#FFFF88","#c3d9ff","#4096EE","#008C00"],highlightcolors:null,fillcolor:null,highlightonsector:!1,highlightbysize:!1,fillOpacity:.6,withLines:!1,label:{}},checkbox:{disabled:!1,checked:!1,display:"html"},circle:{hasInnerPoints:!1,fillColor:"none",highlightFillColor:"none",strokeColor:JXG$1.palette.blue,highlightStrokeColor:"#c3d9ff",center:{visible:!1,withLabel:!1,fixed:!1,fillColor:JXG$1.palette.red,strokeColor:JXG$1.palette.red,highlightFillColor:"#c3d9ff",highlightStrokeColor:"#c3d9ff",layer:9,name:""},point2:{fillColor:JXG$1.palette.red,strokeColor:JXG$1.palette.red,highlightFillColor:"#c3d9ff",highlightStrokeColor:"#c3d9ff",layer:9,visible:!1,withLabel:!1,fixed:!1,name:""},label:{position:"urt"}},circumcircle:{fillColor:"none",highlightFillColor:"none",strokeColor:JXG$1.palette.blue,highlightStrokeColor:"#c3d9ff",center:{visible:!1,fixed:!1,withLabel:!1,fillColor:JXG$1.palette.red,strokeColor:JXG$1.palette.red,highlightFillColor:"#c3d9ff",highlightStrokeColor:"#c3d9ff",name:""}},circumcirclearc:{fillColor:"none",highlightFillColor:"none",strokeColor:JXG$1.palette.blue,highlightStrokeColor:"#c3d9ff",useDirection:!0,center:{visible:!1,withLabel:!1,fixed:!1,name:""}},circumcirclesector:{useDirection:!0,fillColor:JXG$1.palette.yellow,highlightFillColor:JXG$1.palette.yellow,fillOpacity:.3,highlightFillOpacity:.3,strokeColor:JXG$1.palette.blue,highlightStrokeColor:"#c3d9ff",point:{visible:!1,fixed:!1,withLabel:!1,name:""}},comb:{frequency:.2,width:.4,angle:Math.PI/3,reverse:!1,point1:{visible:!1,withLabel:!1,fixed:!1,name:""},point2:{visible:!1,withLabel:!1,fixed:!1,name:""},strokeWidth:1,strokeColor:"#0000ff",fillColor:"none"},conic:{fillColor:"none",highlightFillColor:"none",strokeColor:JXG$1.palette.blue,highlightStrokeColor:"#c3d9ff",foci:{fixed:!1,visible:!1,withLabel:!1,name:""},center:{visible:!1,withLabel:!1,name:""},point:{withLabel:!1,name:""},line:{visible:!1}},curve:{strokeWidth:1,strokeColor:JXG$1.palette.blue,fillColor:"none",fixed:!0,curveType:null,doAdvancedPlot:!0,doAdvancedPlotOld:!1,firstArrow:!1,handDrawing:!1,label:{position:"lft"},lastArrow:!1,lineCap:"round",numberPointsHigh:1600,numberPointsLow:400,plotVersion:2,recursionDepthHigh:17,recursionDepthLow:15},foreignobject:{fixed:!0,visible:!0,needsRegularUpdate:!1,attractors:[],evaluateOnlyOnce:!1},functiongraph:{},glider:{label:{}},grid:{needsRegularUpdate:!1,hasGrid:!1,highlight:!1,gridX:null,gridY:null,majorStep:"auto",minorElements:0,forceSquare:!1,includeBoundaries:!1,size:void 0,face:void 0,margin:void 0,drawZero:void 0,polygonVertices:void 0,major:{size:5,face:"line",margin:0,drawZero:!0,polygonVertices:6},minor:{visible:"inherit",size:3,face:"point",margin:0,drawZero:!0,polygonVertices:6},snapToGrid:!1,strokeColor:"#c0c0c0",strokeWidth:1,strokeOpacity:.5,dash:0,theme:0,themes:[{},{forceSquare:"min",major:{face:"line"}},{major:{face:"line"},minor:{size:3,face:"point"},minorElements:"auto"},{major:{face:"line"},minor:{face:"line",strokeOpacity:.25},minorElements:"auto"},{major:{face:"line"},minor:{face:"+",size:"95%"},minorElements:"auto"},{major:{face:"+",size:10,strokeOpacity:1},minor:{face:"point",size:3},minorElements:"auto"},{major:{face:"circle",size:8,fillColor:"#c0c0c0"},minor:{face:"point",size:3},minorElements:"auto"}]},group:{needsRegularUpdate:!0},htmlslider:{widthRange:100,widthOut:34,step:.01,frozen:!0,isLabel:!1,strokeColor:"#000000",display:"html",anchorX:"left",anchorY:"middle",withLabel:!1},image:{imageString:null,fillOpacity:1,highlightFillOpacity:.6,cssClass:"JXGimage",highlightCssClass:"JXGimageHighlight",rotate:0,snapSizeX:1,snapSizeY:1,attractors:[]},implicitcurve:{margin:1,resolution_outer:5,resolution_inner:5,max_steps:1024,alpha_0:.05,tol_u0:Mat.eps,tol_newton:1e-7,tol_cusp:.05,tol_progress:1e-4,qdt_box:.2,kappa_0:.2,delta_0:.05,h_initial:.1,h_critical:.001,h_max:.5,loop_dist:.09,loop_dir:.99,loop_detection:!0},incircle:{fillColor:"none",highlightFillColor:"none",strokeColor:JXG$1.palette.blue,highlightStrokeColor:"#c3d9ff",center:{visible:!1,fixed:!1,withLabel:!1,fillColor:JXG$1.palette.red,strokeColor:JXG$1.palette.red,highlightFillColor:"#c3d9ff",highlightStrokeColor:"#c3d9ff",name:""}},inequality:{fillColor:JXG$1.palette.red,fillOpacity:.2,strokeColor:"none",inverse:!1},infobox:{distanceX:-20,distanceY:25,intl:{enabled:"inherit",options:{}},fontSize:12,isLabel:!1,strokeColor:"#bbbbbb",display:"html",anchorX:"left",anchorY:"middle",cssClass:"JXGinfobox",rotate:0,visible:!0,parse:!1,transitionDuration:0,needsRegularUpdate:!1,tabindex:null,viewport:[0,0,0,0],ignoreForLabelAutoposition:!0},integral:{axis:"x",withLabel:!0,fixed:!0,strokeWidth:0,strokeOpacity:0,fillColor:JXG$1.palette.red,fillOpacity:.3,highlightFillColor:JXG$1.palette.red,highlightFillOpacity:.2,curveLeft:{visible:!0,withLabel:!1,color:JXG$1.palette.red,fillOpacity:.8,layer:9},baseLeft:{visible:!1,fixed:!1,withLabel:!1,name:""},curveRight:{visible:!0,withLabel:!1,color:JXG$1.palette.red,fillOpacity:.8,layer:9},baseRight:{visible:!1,fixed:!1,withLabel:!1,name:""},label:{fontSize:20,digits:4,intl:{enabled:!1,options:{}}}},input:{disabled:!1,maxlength:524288,display:"html"},intersection:{alwaysIntersect:!0},label:{visible:"inherit",strokeColor:"#000000",strokeOpacity:1,highlightStrokeOpacity:.666666,highlightStrokeColor:"#000000",fixed:!0,tabindex:null,position:"urt",distance:1.5,offset:[10,10],autoPosition:!1,autoPositionMinDistance:12,autoPositionMaxDistance:28,autoPositionWhitelist:[]},legend:{style:"vertical",labels:["1","2","3","4","5","6","7","8"],colors:["#B02B2C","#3F4C6B","#C79810","#D15600","#FFFF88","#c3d9ff","#4096EE","#008C00"],lineLength:1,strokeOpacity:[1],rowHeight:20,strokeWidth:5,frozen:!1},line:{firstArrow:!1,lastArrow:!1,margin:0,straightFirst:!0,straightLast:!0,fillColor:"none",highlightFillColor:"none",strokeColor:JXG$1.palette.blue,highlightStrokeColor:"#c3d9ff",withTicks:!1,point1:{fillColor:JXG$1.palette.red,strokeColor:JXG$1.palette.red,highlightFillColor:"#c3d9ff",highlightStrokeColor:"#c3d9ff",layer:9,visible:!1,withLabel:!1,fixed:!1,name:""},point2:{fillColor:JXG$1.palette.red,strokeColor:JXG$1.palette.red,highlightFillColor:"#c3d9ff",highlightStrokeColor:"#c3d9ff",layer:9,visible:!1,withLabel:!1,fixed:!1,name:""},ticks:{drawLabels:!0,label:{offset:[4,-9]},drawZero:!1,insertTicks:!1,ticksDistance:1,minTicksDistance:50,minorHeight:4,majorHeight:-1,minorTicks:4,strokeOpacity:.3,visible:"inherit"},label:{position:"llft"},snapToGrid:!1,snapSizeX:1,snapSizeY:1,touchFirstPoint:!1,touchLastPoint:!1},locus:{translateToOrigin:!1,translateTo10:!1,stretch:!1,toOrigin:null,to10:null},measurement:{baseUnit:"",units:{},showPrefix:!0,showSuffix:!0,prefix:"",suffix:"",dim:null,formatCoords:function(t,r,a,n){return parseFloat(n)!==1?"Infinit coords":"("+r+", "+a+")"},formatDirection:function(t,r,a){return"("+r+", "+a+")"}},metapostspline:{createPoints:!0,isArrayOfCoordinates:!0,points:{strokeOpacity:.5,fillOpacity:.5,highlightStrokeOpacity:1,highlightFillOpacity:1,withLabel:!1,name:"",fixed:!1}},mirrorelement:{fixed:!0,point:{},center:{},type:"Euclidean"},nonreflexangle:{},normal:{strokeColor:"#000000",point:{visible:!1,fixed:!1,withLabel:!1,name:""}},orthogonalprojection:{},otherintersection:{alwaysIntersect:!0,precision:.001},parallel:{strokeColor:"#000000",point:{visible:!1,fixed:!1,withLabel:!1,name:""},label:{position:"llft"}},parallelogram:{parallelpoint:{withLabel:!1,name:""}},parallelpoint:{},perpendicular:{strokeColor:"#000000",straightFirst:!0,straightLast:!0},perpendicularsegment:{strokeColor:"#000000",straightFirst:!1,straightLast:!1,point:{visible:!1,fixed:!0,withLabel:!1,name:""}},point:{withLabel:!0,label:{},style:5,face:"o",size:3,sizeUnit:"screen",strokeWidth:2,transitionProperties:["fill","fill-opacity","stroke","stroke-opacity","stroke-width","width","height","rx","ry"],fillColor:JXG$1.palette.red,strokeColor:JXG$1.palette.red,highlightFillColor:"#c3d9ff",highlightStrokeColor:"#c3d9ff",zoom:!1,showInfobox:"inherit",infoboxDigits:"auto",draft:!1,attractors:[],attractorUnit:"user",attractorDistance:0,snatchDistance:0,snapToGrid:!1,attractToGrid:!1,snapSizeX:1,snapSizeY:1,snapToPoints:!1,ignoredSnapToPoints:[]},polygon:{hasInnerPoints:!1,fillColor:JXG$1.palette.yellow,highlightFillColor:JXG$1.palette.yellow,fillOpacity:.3,highlightFillOpacity:.2,withLines:!0,borders:{withLabel:!1,strokeWidth:1,highlightStrokeWidth:1,layer:5,label:{position:"top"},visible:"inherit"},highlightByStrokeWidth:!1,vertices:{layer:9,withLabel:!1,name:"",strokeColor:JXG$1.palette.red,fillColor:JXG$1.palette.red,fixed:!1,visible:"inherit"},label:{offset:[0,0]}},polygonalchain:{fillColor:"none",highlightFillColor:"none"},prescribedangle:{anglePoint:{size:2,visible:!1,withLabel:!1}},reflection:{fixed:!0,center:{},type:"Euclidean"},reflexangle:{},regularpolygon:{hasInnerPoints:!1,fillColor:JXG$1.palette.yellow,highlightFillColor:JXG$1.palette.yellow,fillOpacity:.3,highlightFillOpacity:.2,withLines:!0,borders:{withLabel:!1,strokeWidth:1,highlightStrokeWidth:1,layer:5,label:{position:"top"}},vertices:{layer:9,withLabel:!0,strokeColor:JXG$1.palette.red,fillColor:JXG$1.palette.red,fixed:!1},label:{offset:[0,0]}},riemannsum:{withLabel:!1,fillOpacity:.3,fillColor:JXG$1.palette.yellow},sector:{fillColor:JXG$1.palette.yellow,highlightFillColor:JXG$1.palette.yellow,fillOpacity:.3,highlightFillOpacity:.3,highlightOnSector:!1,highlightStrokeWidth:0,useDirection:!1,selection:"auto",arc:{visible:!1,fillColor:"none",withLabel:!1,name:"",center:{visible:!1,withLabel:!1,name:""},radiusPoint:{visible:!1,withLabel:!1,name:""},anglePoint:{visible:!1,withLabel:!1,name:""}},radiusPoint:{visible:!1,withLabel:!1},center:{visible:!1,withLabel:!1},anglePoint:{visible:!1,withLabel:!1},label:{offset:[0,0],anchorX:"auto",anchorY:"auto"}},segment:{label:{position:"top"}},semicircle:{center:{visible:!1,withLabel:!1,fixed:!1,fillColor:JXG$1.palette.red,strokeColor:JXG$1.palette.red,highlightFillColor:"#eeeeee",highlightStrokeColor:JXG$1.palette.red,name:""}},slider:{snapWidth:-1,snapValues:[],snapValueDistance:0,precision:2,digits:2,intl:{enabled:"inherit",options:{}},firstArrow:!1,lastArrow:!1,withTicks:!0,withLabel:!0,suffixLabel:null,unitLabel:null,postLabel:null,layer:9,showInfobox:!1,name:"",visible:!0,strokeColor:"#000000",highlightStrokeColor:"#888888",fillColor:"#ffffff",highlightFillColor:"none",size:6,point1:{needsRegularUpdate:!1,showInfobox:!1,withLabel:!1,visible:!1,fixed:!0,frozen:"inherit",name:""},point2:{needsRegularUpdate:!1,showInfobox:!1,withLabel:!1,visible:!1,fixed:!0,frozen:"inherit",name:""},baseline:{needsRegularUpdate:!1,visible:"inherit",fixed:!0,scalable:!1,tabindex:null,name:"",strokeWidth:1,strokeColor:"#000000",highlightStrokeColor:"#888888"},ticks:{needsRegularUpdate:!1,fixed:!0,drawLabels:!1,digits:2,includeBoundaries:!0,drawZero:!0,label:{offset:[-4,-14],display:"internal"},minTicksDistance:30,insertTicks:!0,ticksDistance:1,minorHeight:4,majorHeight:5,minorTicks:0,strokeOpacity:1,strokeWidth:1,tickEndings:[0,1],majortickEndings:[0,1],strokeColor:"#000000",visible:"inherit"},highline:{strokeWidth:3,visible:"inherit",fixed:!0,tabindex:null,name:"",strokeColor:"#000000",highlightStrokeColor:"#888888"},label:{visible:"inherit",strokeColor:"#000000"},moveOnUp:!0},slopefield:{strokeWidth:.5,highlightStrokeWidth:.5,highlightStrokeColor:JXG$1.palette.blue,highlightStrokeOpacity:.8,scale:1,arrowhead:{enabled:!1,size:5,angle:Math.PI*.125}},slopetriangle:{fillColor:JXG$1.palette.red,fillOpacity:.4,highlightFillColor:JXG$1.palette.red,highlightFillOpacity:.3,borders:{lastArrow:{type:1,size:6}},glider:{fixed:!0,visible:!1,withLabel:!1},baseline:{visible:!1,withLabel:!1,name:""},basepoint:{visible:!1,withLabel:!1,name:""},tangent:{visible:!1,withLabel:!1,name:""},toppoint:{visible:!1,withLabel:!1,name:""},label:{visible:!0,position:"first"}},smartlabelangle:{cssClass:"smart-label-solid smart-label-angle",highlightCssClass:"smart-label-solid smart-label-angle",anchorX:"left",anchorY:"middle",unit:"",prefix:"",suffix:"",measure:"deg",useMathJax:!0},smartlabelcircle:{cssClass:"smart-label-solid smart-label-circle",highlightCssClass:"smart-label-solid smart-label-circle",anchorX:"middle",useMathJax:!0,unit:"",prefix:"",suffix:"",measure:"radius"},smartlabelline:{cssClass:"smart-label-solid smart-label-line",highlightCssClass:"smart-label-solid smart-label-line",anchorX:"middle",useMathJax:!0,unit:"",measure:"length"},smartlabelpoint:{cssClass:"smart-label-solid smart-label-point",highlightCssClass:"smart-label-solid smart-label-point",anchorX:"middle",anchorY:"top",useMathJax:!0,dir:"row",unit:""},smartlabelpolygon:{cssClass:"smart-label-solid smart-label-polygon",highlightCssClass:"smart-label-solid smart-label-polygon",anchorX:"middle",useMathJax:!0,unit:"",measure:"area"},stepfunction:{},tangent:{},tangentto:{polar:{visible:!1,strokeWidth:1,dash:3},point:{visible:!1}},tapemeasure:{strokeColor:"#000000",strokeWidth:2,highlightStrokeColor:"#000000",withTicks:!0,withLabel:!0,rotate:0,precision:2,digits:2,point1:{visible:!0,strokeColor:"#000000",fillColor:"#ffffff",fillOpacity:0,highlightFillOpacity:.1,size:6,snapToPoints:!0,attractorUnit:"screen",attractorDistance:20,showInfobox:!1,withLabel:!1,name:""},point2:{visible:!0,strokeColor:"#000000",fillColor:"#ffffff",fillOpacity:0,highlightFillOpacity:.1,size:6,snapToPoints:!0,attractorUnit:"screen",attractorDistance:20,showInfobox:!1,withLabel:!1,name:""},ticks:{drawLabels:!1,drawZero:!0,insertTicks:!0,ticksDistance:.1,minorHeight:8,majorHeight:16,minorTicks:4,tickEndings:[0,1],majorTickEndings:[0,1],strokeOpacity:1,strokeWidth:1,strokeColor:"#000000",visible:"inherit",label:{anchorY:"top",anchorX:"middle",offset:[0,-10]}},label:{position:"top"}},text:{fontSize:12,fontUnit:"px",formatNumber:!1,digits:2,intl:{enabled:"inherit",options:{minimumFractionDigits:0,maximumFractionDigits:2}},parse:!0,useCaja:!1,isLabel:!1,strokeColor:"#000000",highlightStrokeColor:"#000000",highlightStrokeOpacity:.666666,cssDefaultStyle:"font-family: Arial, Helvetica, Geneva, sans-serif;",highlightCssDefaultStyle:"font-family: Arial, Helvetica, Geneva, sans-serif;",cssStyle:"",highlightCssStyle:"",transitionProperties:["color","opacity"],useASCIIMathML:!1,useMathJax:!1,useKatex:!1,katexMacros:{},toFraction:!1,display:"html",anchor:null,anchorX:"left",anchorY:"middle",cssClass:"JXGtext",highlightCssClass:"JXGtext",dragArea:"all",withLabel:!1,rotate:0,visible:!0,snapSizeX:1,snapSizeY:1,attractors:[]},tracecurve:{strokeColor:"#000000",fillColor:"none",numberPoints:100},turtle:{strokeWidth:1,fillColor:"none",strokeColor:"#000000",arrow:{strokeWidth:2,withLabel:!1,strokeColor:JXG$1.palette.red,lastArrow:!0}},vectorfield:{strokeWidth:.5,highlightStrokeWidth:.5,highlightStrokeColor:JXG$1.palette.blue,highlightStrokeOpacity:.8,scale:1,arrowhead:{enabled:!0,size:5,angle:Math.PI*.125}},shortcuts:{color:["strokeColor","fillColor"],opacity:["strokeOpacity","fillOpacity"],highlightColor:["highlightStrokeColor","highlightFillColor"],highlightOpacity:["highlightStrokeOpacity","highlightFillOpacity"],strokeWidth:["strokeWidth","highlightStrokeWidth"]}};JXG$1.Validator=(function(){var t,r=function(y){return/^[0-9]+px$/.test(y)},a=function(y){return y==="html"||y==="internal"},n=function(y){return JXG$1.isString(y)},s=function(y){return JXG$1.exists(JXG$1.normalizePointFace(y))},o=function(y){return JXG$1.isNumber(y,!0,!1)},l=function(y){return Math.abs(y-Math.round(y))<Mat.eps},u=function(y){return l(y)&&y>=0},h=function(y){return l(y)&&y>0},c=function(y){return y==="vml"||y==="svg"||y==="canvas"||y==="no"},f=function(y){return y>0},d=function(y){return y>=0},p={},v={attractorDistance:d,color:n,display:a,doAdvancedPlot:!1,draft:!1,drawLabels:!1,drawZero:!1,face:s,factor:o,fillColor:n,fillOpacity:o,firstArrow:!1,fontSize:l,dash:l,gridX:o,gridY:o,hasGrid:!1,highlightFillColor:n,highlightFillOpacity:o,highlightStrokeColor:n,highlightStrokeOpacity:o,insertTicks:!1,lastArrow:!1,layer:u,majorHeight:l,minorHeight:l,minorTicks:d,minTicksDistance:h,numberPointsHigh:h,numberPointsLow:h,opacity:o,radius:o,RDPsmoothing:!1,renderer:c,right:r,showCopyright:!1,showInfobox:!1,showNavigation:!1,size:d,snapSizeX:f,snapSizeY:f,snapWidth:o,snapToGrid:!1,snatchDistance:d,straightFirst:!1,straightLast:!1,stretch:!1,strokeColor:n,strokeOpacity:o,strokeWidth:d,takeFirst:!1,takeSizeFromFile:!1,to10:!1,toOrigin:!1,translateTo10:!1,translateToOrigin:!1,useASCIIMathML:!1,useDirection:!1,useMathJax:!1,withLabel:!1,withTicks:!1,zoom:!1};for(t in v)v.hasOwnProperty(t)&&(p[t.toLowerCase()]=v[t]);return p})();JXG$1.normalizePointFace=function(t){var r={cross:"x",x:"x",circle:"o",o:"o",square:"[]","[]":"[]",plus:"+","+":"+",divide:"|","|":"|",minus:"-","-":"-",diamond:"<>","<>":"<>",diamond2:"<<>>","<<>>":"<<>>",triangleup:"^",A:"^",a:"^","^":"^",triangledown:"v",v:"v",triangleleft:"<","<":"<",triangleright:">",">":">"};return r[t]};JXG$1.useStandardOptions=function(t){var r,a,n,s,o=JXG$1.Options,l=t.hasGrid;t.options.grid.hasGrid=o.grid.hasGrid,t.options.grid.gridX=o.grid.gridX,t.options.grid.gridY=o.grid.gridY,t.options.grid.gridColor=o.grid.gridColor,t.options.grid.gridOpacity=o.grid.gridOpacity,t.options.grid.gridDash=o.grid.gridDash,t.options.grid.snapToGrid=o.grid.snapToGrid,t.options.grid.snapSizeX=o.grid.SnapSizeX,t.options.grid.snapSizeY=o.grid.SnapSizeY,t.takeSizeFromFile=o.takeSizeFromFile,s=function(u,h){u.visProp.fillcolor=h.fillColor,u.visProp.highlightfillcolor=h.highlightFillColor,u.visProp.strokecolor=h.strokeColor,u.visProp.highlightstrokecolor=h.highlightStrokeColor};for(r in t.objects)if(t.objects.hasOwnProperty(r))if(n=t.objects[r],n.elementClass===Const.OBJECT_CLASS_POINT)s(n,o.point);else if(n.elementClass===Const.OBJECT_CLASS_LINE)for(s(n,o.line),a=0;a<n.ticks.length;a++)n.ticks[a].majorTicks=o.line.ticks.majorTicks,n.ticks[a].minTicksDistance=o.line.ticks.minTicksDistance,n.ticks[a].visProp.minorheight=o.line.ticks.minorHeight,n.ticks[a].visProp.majorheight=o.line.ticks.majorHeight;else n.elementClass===Const.OBJECT_CLASS_CIRCLE?s(n,o.circle):n.type===Const.OBJECT_TYPE_ANGLE?s(n,o.angle):n.type===Const.OBJECT_TYPE_ARC?s(n,o.arc):n.type===Const.OBJECT_TYPE_POLYGON?s(n,o.polygon):n.type===Const.OBJECT_TYPE_CONIC?s(n,o.conic):n.type===Const.OBJECT_TYPE_CURVE?s(n,o.curve):n.type===Const.OBJECT_TYPE_SECTOR&&(n.arc.visProp.fillcolor=o.sector.fillColor,n.arc.visProp.highlightfillcolor=o.sector.highlightFillColor,n.arc.visProp.fillopacity=o.sector.fillOpacity,n.arc.visProp.highlightfillopacity=o.sector.highlightFillOpacity);t.fullUpdate(),l&&!t.hasGrid?t.removeGrids(t):!l&&t.hasGrid&&t.create("grid",[])};JXG$1.useBlackWhiteOptions=function(t){var r=JXG$1.Options;r.point.fillColor=JXG$1.rgb2bw(r.point.fillColor),r.point.highlightFillColor=JXG$1.rgb2bw(r.point.highlightFillColor),r.point.strokeColor=JXG$1.rgb2bw(r.point.strokeColor),r.point.highlightStrokeColor=JXG$1.rgb2bw(r.point.highlightStrokeColor),r.line.fillColor=JXG$1.rgb2bw(r.line.fillColor),r.line.highlightFillColor=JXG$1.rgb2bw(r.line.highlightFillColor),r.line.strokeColor=JXG$1.rgb2bw(r.line.strokeColor),r.line.highlightStrokeColor=JXG$1.rgb2bw(r.line.highlightStrokeColor),r.circle.fillColor=JXG$1.rgb2bw(r.circle.fillColor),r.circle.highlightFillColor=JXG$1.rgb2bw(r.circle.highlightFillColor),r.circle.strokeColor=JXG$1.rgb2bw(r.circle.strokeColor),r.circle.highlightStrokeColor=JXG$1.rgb2bw(r.circle.highlightStrokeColor),r.arc.fillColor=JXG$1.rgb2bw(r.arc.fillColor),r.arc.highlightFillColor=JXG$1.rgb2bw(r.arc.highlightFillColor),r.arc.strokeColor=JXG$1.rgb2bw(r.arc.strokeColor),r.arc.highlightStrokeColor=JXG$1.rgb2bw(r.arc.highlightStrokeColor),r.polygon.fillColor=JXG$1.rgb2bw(r.polygon.fillColor),r.polygon.highlightFillColor=JXG$1.rgb2bw(r.polygon.highlightFillColor),r.sector.fillColor=JXG$1.rgb2bw(r.sector.fillColor),r.sector.highlightFillColor=JXG$1.rgb2bw(r.sector.highlightFillColor),r.curve.strokeColor=JXG$1.rgb2bw(r.curve.strokeColor),r.grid.gridColor=JXG$1.rgb2bw(r.grid.gridColor),JXG$1.useStandardOptions(t)};JXG$1.Options.normalizePointFace=JXG$1.normalizePointFace;const Options$1=JXG$1.Options;JXG$1.AbstractRenderer=function(){this.vOffsetText=0,this.enhancedRendering=!0,this.container=null,this.type="",this.supportsForeignObject=!1,this.dashArray=[[2,2],[5,5],[10,10],[20,20],[20,10,10,10],[20,5,10,5],[0,5]]};JXG$1.extend(JXG$1.AbstractRenderer.prototype,{_updateVisual:function(t,r,a){(a||this.enhancedRendering)&&(r=r||{},this.setObjectTransition(t),t.evalVisProp("draft")?this.setDraft(t):(r.stroke||(t.highlighted?(this.setObjectStrokeColor(t,t.evalVisProp("highlightstrokecolor"),t.evalVisProp("highlightstrokeopacity")),this.setObjectStrokeWidth(t,t.evalVisProp("highlightstrokewidth"))):(this.setObjectStrokeColor(t,t.evalVisProp("strokecolor"),t.evalVisProp("strokeopacity")),this.setObjectStrokeWidth(t,t.evalVisProp("strokewidth")))),r.fill||(t.highlighted?this.setObjectFillColor(t,t.evalVisProp("highlightfillcolor"),t.evalVisProp("highlightfillopacity")):this.setObjectFillColor(t,t.evalVisProp("fillcolor"),t.evalVisProp("fillopacity"))),r.dash||this.setDashStyle(t,t.visProp),r.shadow||this.setShadow(t),r.tabindex||this.setTabindex(t)),t.highlighted?this.setCssClass(t,t.evalVisProp("highlightcssclass")):this.setCssClass(t,t.evalVisProp("cssclass")),t.evalVisProp("aria.enabled")&&this.setARIA(t))},_getHighlighted:function(t){var r=!1,a;return(!JXG$1.exists(t.board)||!JXG$1.exists(t.board.highlightedObjects))&&(r=!0),!r&&JXG$1.exists(t.board.highlightedObjects[t.id])?a="highlight":a="",a},drawPoint:function(t){var r,a=Options$1.normalizePointFace(t.evalVisProp("face"));a==="o"?r="ellipse":a==="[]"?r="rect":r="path",t.rendNode=this.appendChildPrim(this.createPrim(r,t.id),t.evalVisProp("layer")),this.appendNodesToElement(t,r),this._updateVisual(t,{dash:!0,shadow:!0},!0),this.updatePoint(t)},updatePoint:function(t){var r=t.evalVisProp("size"),a=Options$1.normalizePointFace(t.evalVisProp("face")),n=t.evalVisProp("sizeunit"),s=t.evalVisProp("zoom"),o;isNaN(t.coords.scrCoords[2]+t.coords.scrCoords[1])||(n==="user"&&(r*=Math.sqrt(Math.abs(t.board.unitX*t.board.unitY))),r*=!t.board||!s?1:Math.sqrt(t.board.zoomX*t.board.zoomY),o=r===0?0:r+1,a==="o"?this.updateEllipsePrim(t.rendNode,t.coords.scrCoords[1],t.coords.scrCoords[2],o,o):a==="[]"?this.updateRectPrim(t.rendNode,t.coords.scrCoords[1]-r,t.coords.scrCoords[2]-r,r*2,r*2):this.updatePathPrim(t.rendNode,this.updatePathStringPoint(t,r,a),t.board),this._updateVisual(t,{dash:!1,shadow:!1}),this.setShadow(t))},changePointStyle:function(t){var r=this.getElementById(t.id);JXG$1.exists(r)&&this.remove(r),this.drawPoint(t),JXG$1.clearVisPropOld(t),t.visPropCalc.visible||this.display(t,!1),t.evalVisProp("draft")&&this.setDraft(t)},drawLine:function(t){t.rendNode=this.appendChildPrim(this.createPrim("line",t.id),t.evalVisProp("layer")),this.appendNodesToElement(t,"lines"),this.updateLine(t)},updateLine:function(t){this._updateVisual(t),this.updatePathWithArrowHeads(t),this.setLineCap(t)},drawCurve:function(t){t.rendNode=this.appendChildPrim(this.createPrim("path",t.id),t.evalVisProp("layer")),this.appendNodesToElement(t,"path"),this.updateCurve(t)},updateCurve:function(t){this._updateVisual(t),this.updatePathWithArrowHeads(t),this.setLineCap(t)},updatePathWithArrowHeads:function(t,r){var a=r?"highlight":"",n,s;r&&t.evalVisProp("highlightstrokewidth")?n=Math.max(t.evalVisProp("highlightstrokewidth"),t.evalVisProp("strokewidth")):n=t.evalVisProp("strokewidth"),s=this.getArrowHeadData(t,n,a),this.makeArrows(t,s),t.elementClass===Const.OBJECT_CLASS_LINE?this.updateLineWithEndings(t,s):t.elementClass===Const.OBJECT_CLASS_CURVE&&this.updatePath(t),this.setArrowSize(t,s)},getArrowHeadData:function(t,r,a){var n=Mat.eps,s,o,l=0,u=0,h=0,c=0,f=t.evalVisProp("firstarrow"),d=t.evalVisProp("lastarrow"),p,v;return(f||d)&&(JXG$1.exists(f.type)?s=t.eval(f.type):t.elementClass===Const.OBJECT_CLASS_LINE?s=1:s=7,JXG$1.exists(d.type)?o=t.eval(d.type):t.elementClass===Const.OBJECT_CLASS_LINE?o=1:o=7,f&&(v=6,JXG$1.exists(f.size)&&(v=t.eval(f.size)),a!==""&&JXG$1.exists(f[a+"size"])&&(v=t.eval(f[a+"size"])),p=r*v,s===2?(p*=.5,n+=r*v):s===3?(p=r*v/3,n+=r):s===4||s===5||s===6?(p=r*v/1.5,n+=r*v):s===7?(p=0,v=10,n+=r):n+=r*v,l+=p,h=v),d&&(v=6,JXG$1.exists(d.size)&&(v=t.eval(d.size)),a!==""&&JXG$1.exists(d[a+"size"])&&(v=t.eval(d[a+"size"])),p=r*v,o===2?(p*=.5,n+=r*v):o===3?(p=r*v/3,n+=r):o===4||o===5||o===6?(p=r*v/1.5,n+=r*v):o===7?(p=0,v=10,n+=r):n+=r*v,u+=p,c=v)),t.visPropCalc.typeFirst=s,t.visPropCalc.typeLast=o,{evFirst:f,evLast:d,typeFirst:s,typeLast:o,offFirst:l,offLast:u,sizeFirst:h,sizeLast:c,showFirst:1,showLast:1,minLen:n,strokeWidth:r}},updateLineWithEndings:function(t,r){var a,n,s=null;return a=new Coords(Const.COORDS_BY_USER,t.point1.coords.usrCoords,t.board),n=new Coords(Const.COORDS_BY_USER,t.point2.coords.usrCoords,t.board),s=t.evalVisProp("margin"),Geometry.calcStraight(t,a,n,s),this.handleTouchpoints(t,a,n,r),this.getPositionArrowHead(t,a,n,r),this.updateLinePrim(t.rendNode,a.scrCoords[1],a.scrCoords[2],n.scrCoords[1],n.scrCoords[2],t.board),this},updatePath:function(t){return t.evalVisProp("handdrawing")?this.updatePathPrim(t.rendNode,this.updatePathStringBezierPrim(t),t.board):this.updatePathPrim(t.rendNode,this.updatePathStringPrim(t),t.board),this},getPositionArrowHead:function(t,r,a,n){var s,o,l,u,h;return(n.evFirst||n.evLast)&&(o=l=u=h=0,s=r.distance(Const.COORDS_BY_SCREEN,a),n.evFirst&&t.board.renderer.type!=="vml"&&(s>=n.minLen?(o=(a.scrCoords[1]-r.scrCoords[1])*n.offFirst/s,l=(a.scrCoords[2]-r.scrCoords[2])*n.offFirst/s):n.showFirst=0),n.evLast&&t.board.renderer.type!=="vml"&&(s>=n.minLen?(u=(a.scrCoords[1]-r.scrCoords[1])*n.offLast/s,h=(a.scrCoords[2]-r.scrCoords[2])*n.offLast/s):n.showLast=0),r.setCoordinates(Const.COORDS_BY_SCREEN,[r.scrCoords[1]+o,r.scrCoords[2]+l],!1,!0),a.setCoordinates(Const.COORDS_BY_SCREEN,[a.scrCoords[1]-u,a.scrCoords[2]-h],!1,!0)),this},handleTouchpoints:function(t,r,a,n){var s,o,l,u,h,c,f;return(n.evFirst||n.evLast)&&(l=u=h=c=f=0,s=t.point1.evalVisProp("size")+t.point1.evalVisProp("strokewidth"),o=t.point2.evalVisProp("size")+t.point2.evalVisProp("strokewidth"),n.evFirst&&t.evalVisProp("touchfirstpoint")&&t.point1.evalVisProp("visible")&&(l=r.distance(Const.COORDS_BY_SCREEN,a),u=(a.scrCoords[1]-r.scrCoords[1])*s/l,h=(a.scrCoords[2]-r.scrCoords[2])*s/l),n.evLast&&t.evalVisProp("touchlastpoint")&&t.point2.evalVisProp("visible")&&(l=r.distance(Const.COORDS_BY_SCREEN,a),c=(a.scrCoords[1]-r.scrCoords[1])*o/l,f=(a.scrCoords[2]-r.scrCoords[2])*o/l),r.setCoordinates(Const.COORDS_BY_SCREEN,[r.scrCoords[1]+u,r.scrCoords[2]+h],!1,!0),a.setCoordinates(Const.COORDS_BY_SCREEN,[a.scrCoords[1]-c,a.scrCoords[2]-f],!1,!0)),this},setArrowSize:function(t,r){return r.evFirst&&this._setArrowWidth(t.rendNodeTriangleStart,r.showFirst*r.strokeWidth,t.rendNode,r.sizeFirst),r.evLast&&this._setArrowWidth(t.rendNodeTriangleEnd,r.showLast*r.strokeWidth,t.rendNode,r.sizeLast),this},setLineCap:function(t){},drawTicks:function(t){t.rendNode=this.appendChildPrim(this.createPrim("path",t.id),t.evalVisProp("layer")),this.appendNodesToElement(t,"path")},updateTicks:function(t){},drawEllipse:function(t){t.rendNode=this.appendChildPrim(this.createPrim("ellipse",t.id),t.evalVisProp("layer")),this.appendNodesToElement(t,"ellipse"),this.updateEllipse(t)},updateEllipse:function(t){this._updateVisual(t);var r=t.Radius();Math.abs(t.center.coords.usrCoords[0])>Mat.eps&&!isNaN(r+t.center.coords.scrCoords[1]+t.center.coords.scrCoords[2])&&r*t.board.unitX<2e6&&this.updateEllipsePrim(t.rendNode,t.center.coords.scrCoords[1],t.center.coords.scrCoords[2],r*t.board.unitX,r*t.board.unitY),this.setLineCap(t)},drawPolygon:function(t){t.rendNode=this.appendChildPrim(this.createPrim("polygon",t.id),t.evalVisProp("layer")),this.appendNodesToElement(t,"polygon"),this.updatePolygon(t)},updatePolygon:function(t){this._updateVisual(t,{stroke:!0,dash:!0}),this.updatePolygonPrim(t.rendNode,t)},displayCopyright:function(t,r){},displayLogo:function(t,r){},drawInternalText:function(t){},updateInternalText:function(t){},drawText:function(t){var r,a,n,s;t.evalVisProp("display")==="html"&&JXG$1.isBrowser&&this.type!=="no"?(r=this.container.ownerDocument.createElement("div"),r.style.position="absolute",r.className=t.evalVisProp("cssclass"),n=t.evalVisProp("layer"),JXG$1.exists(n)||(n=0),this.container.style.zIndex===""?a=0:a=parseInt(this.container.style.zIndex,10),r.style.zIndex=a+n,this.container.appendChild(r),r.setAttribute("id",this.container.id+"_"+t.id)):r=this.drawInternalText(t),t.rendNode=r,t.htmlStr="",t.visProp.islabel&&JXG$1.exists(t.visProp.anchor)?(s=t.visProp.anchor.evalVisProp("visible"),t.prepareUpdate().updateVisibility(s)):t.prepareUpdate().updateVisibility(),this.updateText(t)},updateText:function(t){var r=t.plaintext,a,n,s,o,l,u,h,c,f,d,p;if(t.visPropCalc.visible)if(this.updateTextStyle(t,!1),t.evalVisProp("display")==="html"&&this.type!=="no"){if(isNaN(t.coords.scrCoords[1]+t.coords.scrCoords[2])||(n=t.coords.scrCoords[1],n=Math.abs(n)<1e6?n:1e6,l=t.getAnchorX(),l==="right"?(a=t.board.canvasWidth-n,d="right"):l==="middle"?(a=n-.5*t.size[0],d="center"):(a=n,d="left"),t.visPropOld.left!==l+a&&(l==="right"?(t.rendNode.style.right=a+"px",t.rendNode.style.left="auto"):(t.rendNode.style.left=a+"px",t.rendNode.style.right="auto"),t.visPropOld.left=l+a),n=t.coords.scrCoords[2]+this.vOffsetText,n=Math.abs(n)<1e6?n:1e6,u=t.getAnchorY(),u==="bottom"?(a=t.board.canvasHeight-n,p="bottom"):u==="middle"?(a=n-.5*t.size[1],p="center"):(a=n,p="top"),t.visPropOld.top!==u+a&&(u==="bottom"?(t.rendNode.style.top="auto",t.rendNode.style.bottom=a+"px"):(t.rendNode.style.bottom="auto",t.rendNode.style.top=a+"px"),t.visPropOld.top=u+a)),t.htmlStr!==r){try{t.type===JXG$1.OBJECT_TYPE_BUTTON?t.rendNodeButton.innerHTML=r:t.type===JXG$1.OBJECT_TYPE_CHECKBOX||t.type===JXG$1.OBJECT_TYPE_INPUT?t.rendNodeLabel.innerHTML=r:t.rendNode.innerHTML=r}catch{s=t.rendNode.parentNode,t.rendNode.parentNode.removeChild(t.rendNode),t.rendNode.innerHTML=r,s.appendChild(t.rendNode)}if(t.htmlStr=r,t.evalVisProp("usemathjax"))try{MathJax.typeset?MathJax.typeset([t.rendNode]):MathJax.Hub.Queue(["Typeset",MathJax.Hub,t.rendNode])}catch{JXG$1.debug("MathJax (not yet) loaded")}else if(t.evalVisProp("usekatex"))try{t.rendNode.innerHTML.indexOf("<span")===0&&t.rendNode.innerHTML.indexOf("<label")>0&&(t.rendNode.innerHTML.indexOf("<checkbox")>0||t.rendNode.innerHTML.indexOf("<input")>0)?o=t.rendNodeLabel:t.rendNode.innerHTML.indexOf("<button")===0?o=t.rendNodeButton:o=t.rendNode,o&&katex.render(r,o,{macros:t.evalVisProp("katexmacros"),throwOnError:!1})}catch{JXG$1.debug("KaTeX not loaded (yet)")}else if(t.evalVisProp("useasciimathml"))try{AMprocessNode(t.rendNode,!1)}catch{JXG$1.debug("AsciiMathML not loaded (yet)")}}h=t.evalVisProp("rotate"),h!==0&&(h*=Math.PI/180,c=Math.cos(h),f=Math.sin(h),t.rendNode.style.transform="matrix("+[c,-1*f,f,c,0,0].join(",")+")",t.rendNode.style["transform-origin"]=d+" "+p),this.transformRect(t,t.transformations)}else this.updateInternalText(t)},_css2js:function(t){var r=[],a,n,s,o,l,u=JXG$1.trim(t).replace(/;$/,"").split(";");for(n=u.length,a=0;a<n;++a)JXG$1.trim(u[a])!==""&&(l=u[a].split(":"),s=JXG$1.trim(l[0].replace(/-([a-z])/gi,function(h,c){return c.toUpperCase()})),o=JXG$1.trim(l[1]),r.push({key:s,val:o}));return r},updateTextStyle:function(t,r){var a,n,s,o,l,u=JXG$1.isBrowser?t.visProp.display:"internal",h=["rendNode","rendNodeTag","rendNodeLabel"],c=h.length,f=t.evalVisProp("fontunit"),d,p,v,y,b=["cssdefaultstyle","cssstyle"],_=b.length;if(r?(s=t.evalVisProp("highlightstrokecolor"),n=t.evalVisProp("highlightstrokeopacity"),o=t.evalVisProp("highlightcssclass")):(s=t.evalVisProp("strokecolor"),n=t.evalVisProp("strokeopacity"),o=t.evalVisProp("cssclass")),this.type!=="no"&&(u==="html"||this.type!=="canvas")){for(v=0;v<_;v++)for(y=t.evalVisProp((r?"highlight":"")+b[v]),l=0;l<c;l++)if(JXG$1.exists(t[h[l]])&&y!==""&&t.visPropOld[b[v]+"_"+l]!==y){d=this._css2js(y);for(p in d)d.hasOwnProperty(p)&&(t[h[l]].style[d[p].key]=d[p].val);t.visPropOld[b[v]+"_"+l]=y}if(a=t.evalVisProp("fontsize"),t.visPropOld.fontsize!==a){t.needsSizeUpdate=!0;try{for(l=0;l<c;l++)JXG$1.exists(t[h[l]])&&(t[h[l]].style.fontSize=a+f)}catch{for(l=0;l<c;l++)JXG$1.exists(t[h[l]])&&(t[h[l]].style.fontSize=a)}t.visPropOld.fontsize=a}}return this.setTabindex(t),this.setObjectTransition(t),u==="html"&&this.type!=="no"?(t.visPropOld.cssclass!==o&&(t.rendNode.className=o,t.visPropOld.cssclass=o,t.needsSizeUpdate=!0),this.setObjectStrokeColor(t,s,n)):this.updateInternalTextStyle(t,s,n),t.evalVisProp("aria.enabled")&&this.setARIA(t),this},updateInternalTextStyle:function(t,r,a){this.setObjectStrokeColor(t,r,a)},drawImage:function(t){},updateImage:function(t){this.updateRectPrim(t.rendNode,t.coords.scrCoords[1],t.coords.scrCoords[2]-t.size[1],t.size[0],t.size[1]),this.updateImageURL(t),this.transformRect(t,t.transformations),this._updateVisual(t,{stroke:!0,dash:!0},!0)},joinTransforms:function(t,r){var a,n=t.board.origin.scrCoords[1],s=t.board.origin.scrCoords[2],o=t.board.unitX,l=t.board.unitY,u=r.length,h=[[1,0,0],[-n/o,1/o,0],[s/l,0,-1/l]];for(a=0;a<u;a++)h=Mat.matMatMult(r[a].matrix,h);return h=Mat.matMatMult([[1,0,0],[n,o,0],[s,0,-l]],h),h},transformRect:function(t,r){},updateImageURL:function(t){},updateImageStyle:function(t,r){t.rendNode.className=t.evalVisProp(r?"highlightcssclass":"cssclass")},drawForeignObject:function(t){},updateForeignObject:function(t){},appendChildPrim:function(t,r){},appendNodesToElement:function(t,r){},createPrim:function(t,r){return null},remove:function(t){},makeArrows:function(t,r){},_setArrowWidth:function(t,r,a){},updateEllipsePrim:function(t,r,a,n,s){},updateLinePrim:function(t,r,a,n,s,o){},updatePathPrim:function(t,r,a){},updatePathStringPoint:function(t,r,a){},updatePathStringPrim:function(t){},updatePathStringBezierPrim:function(t){},updatePolygonPrim:function(t,r){},updateRectPrim:function(t,r,a,n,s){},display:function(t,r){t&&(t.visPropOld.visible=r)},hide:function(t){},highlight:function(t,r){var a,n,s;if(this.setObjectTransition(t),!t.visProp.draft){if(t.type===Const.OBJECT_TYPE_POLYGON)for(this.setObjectFillColor(t,t.evalVisProp("highlightfillcolor"),t.evalVisProp("highlightfillopacity")),n=t.evalVisProp("highlightbystrokewidth"),a=0;a<t.borders.length;a++)this.highlight(t.borders[a],!n);else t.elementClass===Const.OBJECT_CLASS_TEXT?this.updateTextStyle(t,!0):t.type===Const.OBJECT_TYPE_IMAGE?(this.updateImageStyle(t,!0),this.setObjectFillColor(t,t.evalVisProp("highlightfillcolor"),t.evalVisProp("highlightfillopacity"))):(this.setObjectStrokeColor(t,t.evalVisProp("highlightstrokecolor"),t.evalVisProp("highlightstrokeopacity")),this.setObjectFillColor(t,t.evalVisProp("highlightfillcolor"),t.evalVisProp("highlightfillopacity")));!r&&t.evalVisProp("highlightstrokewidth")&&(s=Math.max(t.evalVisProp("highlightstrokewidth"),t.evalVisProp("strokewidth")),this.setObjectStrokeWidth(t,s),(t.elementClass===Const.OBJECT_CLASS_LINE||t.elementClass===Const.OBJECT_CLASS_CURVE)&&this.updatePathWithArrowHeads(t,!0))}return this.setCssClass(t,t.evalVisProp("highlightcssclass")),this},noHighlight:function(t){var r,a;if(this.setObjectTransition(t),!t.evalVisProp("draft")){if(t.type===Const.OBJECT_TYPE_POLYGON)for(this.setObjectFillColor(t,t.evalVisProp("fillcolor"),t.evalVisProp("fillopacity")),r=0;r<t.borders.length;r++)this.noHighlight(t.borders[r]);else t.elementClass===Const.OBJECT_CLASS_TEXT?this.updateTextStyle(t,!1):t.type===Const.OBJECT_TYPE_IMAGE?(this.updateImageStyle(t,!1),this.setObjectFillColor(t,t.evalVisProp("fillcolor"),t.evalVisProp("fillopacity"))):(this.setObjectStrokeColor(t,t.evalVisProp("strokecolor"),t.evalVisProp("strokeopacity")),this.setObjectFillColor(t,t.evalVisProp("fillcolor"),t.evalVisProp("fillopacity")));a=t.evalVisProp("strokewidth"),this.setObjectStrokeWidth(t,a),(t.elementClass===Const.OBJECT_CLASS_LINE||t.elementClass===Const.OBJECT_CLASS_CURVE)&&this.updatePathWithArrowHeads(t,!1)}return this.setCssClass(t,t.evalVisProp("cssclass")),this},removeDraft:function(t){this.setObjectTransition(t),t.type===Const.OBJECT_TYPE_POLYGON?this.setObjectFillColor(t,t.evalVisProp("fillcolor"),t.evalVisProp("fillopacity")):(t.type===Const.OBJECT_CLASS_POINT&&this.setObjectFillColor(t,t.evalVisProp("fillcolor"),t.evalVisProp("fillopacity")),this.setObjectStrokeColor(t,t.evalVisProp("strokecolor"),t.evalVisProp("strokeopacity")),this.setObjectStrokeWidth(t,t.evalVisProp("strokewidth")))},setARIA:function(t){},setBuffering:function(t,r){},setCssClass:function(t,r){},setDashStyle:function(t){},setDraft:function(t){if(t.evalVisProp("draft")){var r=t.board.options.elements.draft.color,a=t.board.options.elements.draft.opacity;this.setObjectTransition(t),t.type===Const.OBJECT_TYPE_POLYGON?this.setObjectFillColor(t,r,a):(t.elementClass===Const.OBJECT_CLASS_POINT?this.setObjectFillColor(t,r,a):this.setObjectFillColor(t,"none",0),this.setObjectStrokeColor(t,r,a),this.setObjectStrokeWidth(t,t.board.options.elements.draft.strokeWidth))}},setGradient:function(t){},setLayer:function(t,r){},setObjectFillColor:function(t,r,a){},setObjectStrokeColor:function(t,r,a){},setObjectStrokeWidth:function(t,r){},setObjectTransition:function(t,r){},setPropertyPrim:function(t,r,a){},setShadow:function(t){},setTabindex:function(t){},show:function(t){},updateGradient:function(t){},suspendRedraw:function(){},unsuspendRedraw:function(){},drawNavigationBar:function(t,r){var a,n,s=function(l){l||(l=window.event),l.stopPropagation?l.stopPropagation():l.cancelBubble=!0},o=function(l,u,h,c){var f;h=h||"",f=a.createElement("span"),f.innerHTML=l,f.style.paddingLeft="7px",f.style.paddingRight="7px",f.classList!==void 0&&(f.classList.add("JXG_navigation_button"),f.classList.add("JXG_navigation_button_"+c)),f.setAttribute("id",h+"_navigation_"+c),f.setAttribute("aria-hidden","true"),n.appendChild(f),JXG$1.addEvent(f,"click",function(d){return JXG$1.bind(u,t)(),!1},t),JXG$1.addEvent(f,"pointerup",s,t),JXG$1.addEvent(f,"pointerdown",s,t),JXG$1.addEvent(f,"pointerleave",s,t),JXG$1.addEvent(f,"mouseup",s,t),JXG$1.addEvent(f,"mousedown",s,t),JXG$1.addEvent(f,"touchend",s,t),JXG$1.addEvent(f,"touchstart",s,t)};JXG$1.isBrowser&&this.type!=="no"&&(a=t.containerObj.ownerDocument,n=a.createElement("div"),n.setAttribute("id",t.container+"_navigationbar"),n.style.color=r.strokecolor,n.style.backgroundColor=r.fillcolor,n.style.padding=r.padding,n.style.position=r.position,n.style.fontSize=r.fontsize,n.style.cursor=r.cursor,n.style.zIndex=r.zindex,t.containerObj.appendChild(n),n.style.right=r.right,n.style.bottom=r.bottom,n.classList!==void 0&&n.classList.add("JXG_navigation"),t.attr.showfullscreen&&o(t.attr.fullscreen.symbol,function(){t.toFullscreen(t.attr.fullscreen.id)},t.container,"fullscreen"),t.attr.showscreenshot&&o(t.attr.screenshot.symbol,function(){window.setTimeout(function(){t.renderer.screenshot(t,"",!1)},330)},t.container,"screenshot"),t.attr.showreload&&o("",function(){t.reload()},t.container,"reload"),t.attr.showcleartraces&&o("",function(){t.clearTraces()},t.container,"cleartraces"),t.attr.shownavigation&&(t.attr.showzoom&&(o("",t.zoomOut,t.container,"out"),o("o",t.zoom100,t.container,"100"),o("+",t.zoomIn,t.container,"in")),o("",t.clickLeftArrow,t.container,"left"),o("",t.clickUpArrow,t.container,"down"),o("",t.clickDownArrow,t.container,"up"),o("",t.clickRightArrow,t.container,"right")))},getElementById:function(t){var r;return JXG$1.exists(this.container)?(r=this.container.id+"_"+t,JXG$1.exists(CSS)&&JXG$1.exists(CSS.escape)&&(r=CSS.escape(r)),this.container.querySelector("#"+r)):""},removeToInsertLater:function(t){var r=t.parentNode,a=t.nextSibling;if(r!==null)return r.removeChild(t),function(){a?r.insertBefore(t,a):r.appendChild(t)}},resize:function(t,r){},createTouchpoints:function(t){},showTouchpoint:function(t){},hideTouchpoint:function(t){},updateTouchpoint:function(t,r){},dumpToDataURI:function(t){},dumpToCanvas:function(t,r,a,n){},screenshot:function(t){}});const AbstractRenderer=JXG$1.AbstractRenderer;var UTF8_ACCEPT=0,UTF8D=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,10,3,3,3,3,3,3,3,3,3,3,3,3,4,3,3,11,6,6,6,5,8,8,8,8,8,8,8,8,8,8,8,0,12,24,36,60,96,84,12,12,12,48,72,12,12,12,12,12,12,12,12,12,12,12,12,12,0,12,12,12,12,12,0,12,0,12,12,12,24,12,12,12,12,12,24,12,24,12,12,12,12,12,12,12,12,12,24,12,12,12,12,12,24,12,12,12,12,12,12,12,24,12,12,12,12,12,12,12,12,12,36,12,36,12,12,12,36,12,12,12,12,12,36,12,36,12,12,12,36,12,12,12,12,12,12,12,12,12,12];JXG$1.Util=JXG$1.Util||{};JXG$1.Util.UTF8={encode:function(t){var r,a,n="",s=t.length;if(t=t.replace(/\r\n/g,`
`),typeof unescape=="function"&&typeof encodeURIComponent=="function")return unescape(encodeURIComponent(t));for(r=0;r<s;r++)a=t.charCodeAt(r),a<128?n+=String.fromCharCode(a):a>127&&a<2048?(n+=String.fromCharCode(a>>6|192),n+=String.fromCharCode(a&63|128)):(n+=String.fromCharCode(a>>12|224),n+=String.fromCharCode(a>>6&63|128),n+=String.fromCharCode(a&63|128));return n},decode:function(t){var r,a,n,s=0,o=0,l=UTF8_ACCEPT,u=[],h=t.length,c=[];for(r=0;r<h;r++)a=t.charCodeAt(r),n=UTF8D[a],l!==UTF8_ACCEPT?o=a&63|o<<6:o=255>>n&a,l=UTF8D[256+l+n],l===UTF8_ACCEPT&&(o>65535?u.push(55232+(o>>10),56320+(o&1023)):u.push(o),s++,s%1e4===0&&(c.push(String.fromCharCode.apply(null,u)),u=[]));return c.push(String.fromCharCode.apply(null,u)),c.join("")},asciiCharCodeAt:function(t,r){var a=t.charCodeAt(r);if(a>255)switch(a){case 8364:a=128;break;case 8218:a=130;break;case 402:a=131;break;case 8222:a=132;break;case 8230:a=133;break;case 8224:a=134;break;case 8225:a=135;break;case 710:a=136;break;case 8240:a=137;break;case 352:a=138;break;case 8249:a=139;break;case 338:a=140;break;case 381:a=142;break;case 8216:a=145;break;case 8217:a=146;break;case 8220:a=147;break;case 8221:a=148;break;case 8226:a=149;break;case 8211:a=150;break;case 8212:a=151;break;case 732:a=152;break;case 8482:a=153;break;case 353:a=154;break;case 8250:a=155;break;case 339:a=156;break;case 382:a=158;break;case 376:a=159;break}return a}};const Encoding=JXG$1.Util.UTF8;var alphabet="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",pad$1="=";JXG$1.Util=JXG$1.Util||{};JXG$1.Util.Base64={_getByte:function(t,r){return t.charCodeAt(r)&255},_getIndex:function(t,r){return alphabet.indexOf(t.charAt(r))},encode:function(t){var r,a,n,s,o,l=[];for(o=Encoding.encode(t),n=o.length,s=n%3,r=0;r<n-s;r+=3)a=this._getByte(o,r)<<16|this._getByte(o,r+1)<<8|this._getByte(o,r+2),l.push(alphabet.charAt(a>>18),alphabet.charAt(a>>12&63),alphabet.charAt(a>>6&63),alphabet.charAt(a&63));switch(s){case 1:a=this._getByte(o,n-1),l.push(alphabet.charAt(a>>2),alphabet.charAt(a<<4&63),pad$1,pad$1);break;case 2:a=this._getByte(o,n-2)<<8|this._getByte(o,n-1),l.push(alphabet.charAt(a>>10),alphabet.charAt(a>>4&63),alphabet.charAt(a<<2&63),pad$1);break}return l.join("")},decode:function(t,r){var a,n,s,o,l,u,h=[],c=[];if(a=t.replace(/[^A-Za-z0-9+/=]/g,""),s=a.length,s%4!==0)throw new Error("JSXGraph/utils/base64: Can't decode string (invalid input length).");for(a.charAt(s-1)===pad$1&&(o=1,a.charAt(s-2)===pad$1&&(o=2),s-=4),n=0;n<s;n+=4)l=this._getIndex(a,n)<<18|this._getIndex(a,n+1)<<12|this._getIndex(a,n+2)<<6|this._getIndex(a,n+3),c.push(l>>16,l>>8&255,l&255),n%1e4===0&&(h.push(String.fromCharCode.apply(null,c)),c=[]);switch(o){case 1:l=this._getIndex(a,s)<<12|this._getIndex(a,s+1)<<6|this._getIndex(a,s+2),c.push(l>>10,l>>2&255);break;case 2:l=this._getIndex(a,n)<<6|this._getIndex(a,n+1),c.push(l>>4);break}return h.push(String.fromCharCode.apply(null,c)),u=h.join(""),r&&(u=Encoding.decode(u)),u},decodeAsArray:function(t){var r,a=this.decode(t),n=[],s=a.length;for(r=0;r<s;r++)n[r]=a.charCodeAt(r);return n}};const Base64=JXG$1.Util.Base64;JXG$1.FileReader={handleRemoteFile:function(t,r,a,n,s,o){var l=!1;try{l=new XMLHttpRequest,a.toLowerCase()==="raw"?l.overrideMimeType("text/plain; charset="+s):l.overrideMimeType("text/xml; charset="+s)}catch{try{l=new ActiveXObject("Msxml2.XMLHTTP")}catch{try{l=new ActiveXObject("Microsoft.XMLHTTP")}catch{l=!1}}}if(!l){JXG$1.debug("AJAX not activated!");return}l.open("GET",t,n),a.toLowerCase()==="raw"?this.cbp=function(){var u=l;u.readyState===4&&r(u.responseText)}:this.cbp=function(){var u=l,h="";u.readyState===4&&(JXG$1.exists(u.responseStream)&&(u.responseText.slice(0,2)==="PK"||Encoding.asciiCharCodeAt(u.responseText.slice(0,1),0)===31)?h=Base64.decode(jxgBinFileReader(u)):h=u.responseText,this.parseString(h,r,a,o))},this.cb=JXG$1.bind(this.cbp,this),l.onreadystatechange=this.cb;try{l.send(null)}catch{throw new Error("JSXGraph: A problem occurred while trying to read remote file '"+t+"'.")}},handleLocalFile:function(t,r,a,n,s,o){JXG$1.exists(n)||(n=!0),a.toLowerCase()==="raw"?this.cbp=function(u){r(u.target.result)}:this.cbp=function(u){var h=u.target.result;this.parseString(h,r,a,o)},this.cb=JXG$1.bind(this.cbp,this);var l=new FileReader;l.onload=this.cb,a.toLowerCase()==="raw"?l.readAsText(t):l.readAsText(t,s)},parseFileContent:function(t,r,a,n,s,o){JXG$1.isString(t)||FileReader===void 0?this.handleRemoteFile(t,r,a,n,s,o):this.handleLocalFile(t,r,a,n,s,o)},parseString:function(t,r,a,n){var s,o;if(a=a.toLowerCase(),s=JXG$1.readers[a],JXG$1.exists(s))o=new s(r,t),o.read();else if(a!=="jessiecode")throw new Error("JSXGraph: There is no reader available for '"+a+"'.");JXG$1.isFunction(n)&&n(r)}};!JXG$1.isMetroApp()&&JXG$1.isBrowser&&typeof navigator=="object"&&/msie/i.test(navigator.userAgent)&&!/opera/i.test(navigator.userAgent)&&document&&document.write&&document.write(`<script type="text/vbscript">
Function Base64Encode(inData)
  Const Base64 = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"
  Dim cOut, sOut, I
  For I = 1 To LenB(inData) Step 3
    Dim nGroup, pOut, sGroup
    nGroup = &H10000 * AscB(MidB(inData, I, 1)) + _
      &H100 * MyASC(MidB(inData, I + 1, 1)) + MyASC(MidB(inData, I + 2, 1))
    nGroup = Oct(nGroup)
    nGroup = String(8 - Len(nGroup), "0") & nGroup
    pOut = Mid(Base64, CLng("&o" & Mid(nGroup, 1, 2)) + 1, 1) + _
      Mid(Base64, CLng("&o" & Mid(nGroup, 3, 2)) + 1, 1) + _
      Mid(Base64, CLng("&o" & Mid(nGroup, 5, 2)) + 1, 1) + _
      Mid(Base64, CLng("&o" & Mid(nGroup, 7, 2)) + 1, 1)
    sOut = sOut + pOut
  Next
  Select Case LenB(inData) Mod 3
    Case 1: '8 bit final
      sOut = Left(sOut, Len(sOut) - 2) + "=="
    Case 2: '16 bit final
      sOut = Left(sOut, Len(sOut) - 1) + "="
  End Select
  Base64Encode = sOut
End Function

Function MyASC(OneChar)
  If OneChar = "" Then MyASC = 0 Else MyASC = AscB(OneChar)
End Function

Function jxgBinFileReader(xhr)
    Dim byteString
    Dim b64String
    Dim i
    byteString = xhr.responseBody
    ReDim byteArray(LenB(byteString))
    For i = 1 To LenB(byteString)
        byteArray(i-1) = AscB(MidB(byteString, i, 1))
    Next
    b64String = Base64Encode(byteString)
    jxgBinFileReader = b64String
End Function
<\/script>
`);const FileReader$1=JXG$1.FileReader;JXG$1.GeonextParser={replacePow:function(t){var r,a,n,s,o,l,u,h,c,f,d,p;for(t=t.replace(/(\s*)\^(\s*)/g,"^"),f=t.indexOf("^"),s=-1;f>=0&&f<t.length-1;){if(s===f)throw new Error("JSXGraph: Error while parsing expression '"+t+"'");if(s=f,c=t.slice(0,f),d=t.slice(f+1),c.charAt(c.length-1)===")"){for(r=1,a=c.length-2;a>=0&&r>0;)n=c.charAt(a),n===")"?r++:n==="("&&(r-=1),a-=1;if(r===0){for(o="",u=c.substring(0,a+1),h=a;h>=0&&u.slice(h,h+1).match(/([\w.]+)/);)o=RegExp.$1+o,h-=1;o+=c.substring(a+1,c.length),o=o.replace(/([()+*%^\-/\][])/g,"\\$1")}else throw new Error("JSXGraph: Missing '(' in expression")}else o="[\\w\\.]+";if(d.match(/^([\w.]*\()/)){for(r=1,a=RegExp.$1.length;a<d.length&&r>0;)n=d.charAt(a),n===")"?r-=1:n==="("&&(r+=1),a+=1;if(r===0)l=d.substring(0,a),l=l.replace(/([()+*%^\-/[\]])/g,"\\$1");else throw new Error("JSXGraph: Missing ')' in expression")}else l="[\\w\\.]+";p=new RegExp("("+o+")\\^("+l+")"),t=t.replace(p,"pow($1,$2)"),f=t.indexOf("^")}return t},replaceIf:function(t){var r,a,n,s,o,l,u,h,c,f="",d=null,p=null,v=null;if(n=t.indexOf("If("),n<0)return t;for(t=t.replace(/""/g,"0");n>=0;){for(r=t.slice(0,n),a=t.slice(n+3),o=1,s=0,l=-1,u=-1;s<a.length&&o>0;)h=a.charAt(s),h===")"?o-=1:h==="("?o+=1:h===","&&o===1&&(l<0?l=s:u=s),s+=1;if(c=a.slice(0,s-1),a=a.slice(s),l<0||u<0)return"";d=c.slice(0,l),p=c.slice(l+1,u),v=c.slice(u+1),d=this.replaceIf(d),p=this.replaceIf(p),v=this.replaceIf(v),f+=r+"(("+d+")?("+p+"):("+v+"))",t=a,d=null,p=null,n=t.indexOf("If(")}return f+=a,f},replaceNameById:function(t,r,a){var n,s,o,l,u=0,h=["X","Y","L","V"],c=function(f){return a?"$('"+f+"')":f};for(l=0;l<h.length;l++)for(u=t.indexOf(h[l]+"(");u>=0;)u>=0&&(n=t.indexOf(")",u+2),n>=0&&(s=t.slice(u+2,n),s=s.replace(/\\(['"])?/g,"$1"),o=r.elementsByName[s],o&&(t=t.slice(0,u+2)+(a?"$('":"")+c(o.id)+t.slice(n)))),n=t.indexOf(")",u+2),u=t.indexOf(h[l]+"(",n);for(u=t.indexOf("Dist(");u>=0;)u>=0&&(n=t.indexOf(",",u+5),n>=0&&(s=t.slice(u+5,n),s=s.replace(/\\(['"])?/g,"$1"),o=r.elementsByName[s],o&&(t=t.slice(0,u+5)+c(o.id)+t.slice(n)))),n=t.indexOf(",",u+5),u=t.indexOf(",",n),n=t.indexOf(")",u+1),n>=0&&(s=t.slice(u+1,n),s=s.replace(/\\(['"])?/g,"$1"),o=r.elementsByName[s],o&&(t=t.slice(0,u+1)+c(o.id)+t.slice(n))),n=t.indexOf(")",u+1),u=t.indexOf("Dist(",n);for(h=["Deg","Rad"],l=0;l<h.length;l++)for(u=t.indexOf(h[l]+"(");u>=0;)u>=0&&(n=t.indexOf(",",u+4),n>=0&&(s=t.slice(u+4,n),s=s.replace(/\\(['"])?/g,"$1"),o=r.elementsByName[s],o&&(t=t.slice(0,u+4)+c(o.id)+t.slice(n)))),n=t.indexOf(",",u+4),u=t.indexOf(",",n),n=t.indexOf(",",u+1),n>=0&&(s=t.slice(u+1,n),s=s.replace(/\\(['"])?/g,"$1"),o=r.elementsByName[s],o&&(t=t.slice(0,u+1)+c(o.id)+t.slice(n))),n=t.indexOf(",",u+1),u=t.indexOf(",",n),n=t.indexOf(")",u+1),n>=0&&(s=t.slice(u+1,n),s=s.replace(/\\(['"])?/g,"$1"),o=r.elementsByName[s],o&&(t=t.slice(0,u+1)+c(o.id)+t.slice(n))),n=t.indexOf(")",u+1),u=t.indexOf(h[l]+"(",n);return t},replaceIdByObj:function(t){var r=/(X|Y|L)\(([\w_]+)\)/g;return t=t.replace(r,"$('$2').$1()"),r=/(V)\(([\w_]+)\)/g,t=t.replace(r,"$('$2').Value()"),r=/(Dist)\(([\w_]+),([\w_]+)\)/g,t=t.replace(r,"dist($('$2'), $('$3'))"),r=/(Deg)\(([\w_]+),([ \w[\w_]+),([\w_]+)\)/g,t=t.replace(r,"deg($('$2'),$('$3'),$('$4'))"),r=/Rad\(([\w_]+),([\w_]+),([\w_]+)\)/g,t=t.replace(r,"rad($('$1'),$('$2'),$('$3'))"),r=/N\((.+)\)/g,t=t.replace(r,"($1)"),t},geonext2JS:function(t,r){var a,n,s,o=["Abs","ACos","ASin","ATan","Ceil","Cos","Exp","Factorial","Floor","Log","Max","Min","Random","Round","Sin","Sqrt","Tan","Trunc"],l=["abs","acos","asin","atan","ceil","cos","exp","factorial","floor","log","max","min","random","round","sin","sqrt","tan","ceil"];for(t=t.replace(/&lt;/g,"<"),t=t.replace(/&gt;/g,">"),t=t.replace(/&amp;/g,"&"),n=t,n=this.replaceNameById(n,r),n=this.replaceIf(n),n=this.replacePow(n),n=this.replaceIdByObj(n),s=0;s<o.length;s++)a=new RegExp(["(\\W|^)(",o[s],")"].join(""),"ig"),n=n.replace(a,["$1",l[s]].join(""));return n=n.replace(/True/g,"true"),n=n.replace(/False/g,"false"),n=n.replace(/fasle/g,"false"),n=n.replace(/Pi/g,"PI"),n=n.replace(/"/g,"'"),n},findDependencies:function(t,r,a){var n,s,o,l;JXG$1.exists(a)||(a=t.board),n=a.elementsByName;for(s in n)n.hasOwnProperty(s)&&s!==t.name&&(n[s].elementClass===Const.OBJECT_CLASS_TEXT?n[s].evalVisProp("islabel")||(l=s.replace(/\[/g,"\\["),l=l.replace(/\]/g,"\\]"),o=new RegExp("\\(([\\w\\[\\]'_ ]+,)*("+l+")(,[\\w\\[\\]'_ ]+)*\\)","g"),r.search(o)>=0&&n[s].addChild(t)):(l=s.replace(/\[/g,"\\["),l=l.replace(/\]/g,"\\]"),o=new RegExp("\\(([\\w\\[\\]'_ ]+,)*("+l+")(,[\\w\\[\\]'_ ]+)*\\)","g"),r.search(o)>=0&&n[s].addChild(t)))},gxt2jc:function(t,r){var a;return t=t.replace(/&lt;/g,"<"),t=t.replace(/&gt;/g,">"),t=t.replace(/&amp;/g,"&"),a=t,a=this.replaceNameById(a,r,!0),a=a.replace(/True/g,"true"),a=a.replace(/False/g,"false"),a=a.replace(/fasle/g,"false"),a}};const GeonextParser=JXG$1.GeonextParser;JXG$1.GeometryElement=function(t,r,a,n){var s,o,l;if(this.needsUpdate=!0,this.isDraggable=!1,this.isReal=!0,this.childElements={},this.hasLabel=!1,this.highlighted=!1,this.notExistingParents={},this.traces={},this.numTraces=0,this.transformations=[],this.baseElement=null,this.descendants={},this.ancestors={},this.parents=[],this.symbolic={},this.rendNode=null,this.elType="",this.dump=!0,this.subs={},this.inherits=[],this._pos=-1,this.stdform=[1,0,0,0,1,1,0,0],this.methodMap={setLabel:"setLabel",label:"label",setName:"setName",getName:"getName",Name:"getName",addTransform:"addTransform",setProperty:"setAttribute",setAttribute:"setAttribute",addChild:"addChild",animate:"animate",on:"on",off:"off",trigger:"trigger",addTicks:"addTicks",removeTicks:"removeTicks",removeAllTicks:"removeAllTicks",Bounds:"bounds"},this.quadraticform=[[1,0,0],[0,1,0],[0,0,1]],this.visProp={},this.visPropCalc={visible:!1},EventEmitter.eventify(this),this.mouseover=!1,this.lastDragTime=new Date,this.view=null,arguments.length>0){this.board=t,this.type=a,this._org_type=a,this.elementClass=n||Const.OBJECT_CLASS_OTHER,this.id=r.id,s=r.name,JXG$1.exists(s)||(s=this.board.generateName(this)),s!==""&&(this.board.elementsByName[s]=this),this.name=s,this.needsRegularUpdate=r.needsregularupdate,JXG$1.clearVisPropOld(this),l=this.resolveShortcuts(r);for(o in l)l.hasOwnProperty(o)&&this._set(o,l[o]);this.visProp.draft=l.draft&&l.draft.draft}};JXG$1.extend(JXG$1.GeometryElement.prototype,{addChild:function(t){var r,a;this.childElements[t.id]=t,this.addDescendants(t),t.ancestors[this.id]=this;for(r in this.descendants)if(this.descendants.hasOwnProperty(r)){this.descendants[r].ancestors[this.id]=this;for(a in this.ancestors)this.ancestors.hasOwnProperty(a)&&(this.descendants[r].ancestors[this.ancestors[a].id]=this.ancestors[a])}for(r in this.ancestors)if(this.ancestors.hasOwnProperty(r))for(a in this.descendants)this.descendants.hasOwnProperty(a)&&(this.ancestors[r].descendants[this.descendants[a].id]=this.descendants[a]);return this},addDescendants:function(t){var r;this.descendants[t.id]=t;for(r in t.childElements)t.childElements.hasOwnProperty(r)&&this.addDescendants(t.childElements[r]);return this},addParents:function(t){var r,a,n;for(JXG$1.isArray(t)?n=t:n=arguments,a=n.length,r=0;r<a;++r)JXG$1.exists(n[r])&&(JXG$1.isId(this.board,n[r])?this.parents.push(n[r]):JXG$1.exists(n[r].id)&&this.parents.push(n[r].id));this.parents=JXG$1.uniqueArray(this.parents)},setParents:function(t){this.parents=[],this.addParents(t)},addParentsFromJCFunctions:function(t){var r,a,n;for(r=0;r<t.length;r++)for(a in t[r].deps)n=t[r].deps[a],this.addParents(n),n.addChild(this);return this},removeChild:function(t){return delete this.childElements[t.id],this.removeDescendants(t),delete t.ancestors[this.id],this},removeDescendants:function(t){var r;delete this.descendants[t.id];for(r in t.childElements)t.childElements.hasOwnProperty(r)&&this.removeDescendants(t.childElements[r]);return this},countChildren:function(){var t,r,a=0;r=this.childElements;for(t in r)r.hasOwnProperty(t)&&t.indexOf("Label")<0&&a++;return a},getName:function(){return this.name},addTransform:function(t){return this},draggable:function(){return this.isDraggable&&!this.evalVisProp("fixed")&&this.type!==Const.OBJECT_TYPE_GLIDER},setPosition:function(t,r){var a=[],n,s,o,l;if(!JXG$1.exists(this.parents))return this;for(o=this.parents.length,s=0;s<o;++s)if(n=this.board.select(this.parents[s]),JXG$1.isPoint(n)){if(!n.draggable())return this;a.push(n)}if(r.length===3&&(r=r.slice(1)),l=this.board.create("transform",r,{type:"translate"}),o=a.length,o>0){if(l.applyOnce(a),JXG$1.exists(this.view)&&this.view.elType==="view3d")for(s=0;s<this.parents.length;++s)n=this.view.select(this.parents[s]),JXG$1.exists(n.setPosition2D)&&n.setPosition2D(l)}else this.transformations.length>0&&this.transformations[this.transformations.length-1].isNumericMatrix?this.transformations[this.transformations.length-1].melt(l):this.addTransform(l);for(s=0;s<o;++s)a[s].type===Const.OBJECT_TYPE_GLIDER&&a[s].updateGlider();return this},setPositionDirectly:function(t,r,a){var n=new Coords(t,r,this.board,!1),s=new Coords(t,a,this.board,!1),o=Stat.subtract(n.usrCoords,s.usrCoords);return this.setPosition(Const.COORDS_BY_USER,o),this},generatePolynomial:function(){return[]},animate:function(t,r,a){a=a||{};var n,s,o,l=this.board.attr.animationdelay,u=Math.ceil(r/l),h=this,c=function(d,p,v){var y,b,_,N,M;for(y=JXG$1.rgb2hsv(d),b=JXG$1.rgb2hsv(p),_=(b[0]-y[0])/u,N=(b[1]-y[1])/u,M=(b[2]-y[2])/u,h.animationData[v]=[],o=0;o<u;o++)h.animationData[v][u-o-1]=JXG$1.hsv2rgb(y[0]+(o+1)*_,y[1]+(o+1)*N,y[2]+(o+1)*M)},f=function(d,p,v,y){var b,_;if(d=parseFloat(d),p=parseFloat(p),!(isNaN(d)||isNaN(p)))for(_=(p-d)/u,h.animationData[v]=[],o=0;o<u;o++)b=d+(o+1)*_,h.animationData[v][u-o-1]=y?Math.floor(b):b};this.animationData={};for(n in t)if(t.hasOwnProperty(n))switch(s=n.toLowerCase(),s){case"strokecolor":case"fillcolor":c(this.visProp[s],t[n],s);break;case"size":if(!JXG$1.isPoint(this))break;f(this.visProp[s],t[n],s,!0);break;case"strokeopacity":case"strokewidth":case"fillopacity":f(this.visProp[s],t[n],s,!1);break}return this.animationCallback=a.callback,this.board.addAnimation(this),this},update:function(){return this.evalVisProp("trace")&&this.cloneToBackground(),this},updateRenderer:function(){return this},fullUpdate:function(t){return this.prepareUpdate().update().updateVisibility(t).updateRenderer()},setDisplayRendNode:function(t){var r,a,n,s,o;if(t===void 0&&(t=this.visPropCalc.visible),t===this.visPropOld.visible)return this;for(this.board.renderer.display(this,t),a=this.inherits.length,n=0;n<a;n++)if(o=this.inherits[n],JXG$1.isArray(o))for(s=o.length,r=0;r<s;r++)JXG$1.exists(o[r])&&JXG$1.exists(o[r].rendNode)&&o[r].evalVisProp("visible")==="inherit"&&o[r].setDisplayRendNode(t);else JXG$1.exists(o)&&JXG$1.exists(o.rendNode)&&o.evalVisProp("visible")==="inherit"&&o.setDisplayRendNode(t);return this.hasLabel&&JXG$1.exists(this.label)&&JXG$1.exists(this.label.rendNode)&&this.label.evalVisProp("visible")==="inherit"&&this.label.setDisplayRendNode(t),this},hide:function(){return this.setAttribute({visible:!1}),this},hideElement:function(){return this.hide(),this},show:function(){return this.setAttribute({visible:!0}),this},showElement:function(){return this.show(),this},updateVisibility:function(t){var r,a,n,s,o,l;if(this.needsUpdate){if(JXG$1.exists(this.view)&&this.view.evalVisProp("visible")===!1)this.visPropCalc.visible=!1;else for(t!==void 0?this.visPropCalc.visible=t:(l=this.evalVisProp("visible"),JXG$1.exists(this.hiddenByParent)&&this.hiddenByParent&&(l=!1),l!=="inherit"&&(this.visPropCalc.visible=l)),a=this.inherits.length,n=0;n<a;n++)if(o=this.inherits[n],JXG$1.isArray(o))for(s=o.length,r=0;r<s;r++)JXG$1.exists(o[r])&&o[r].evalVisProp("visible")==="inherit"&&o[r].prepareUpdate().updateVisibility(this.visPropCalc.visible);else JXG$1.exists(o)&&o.evalVisProp("visible")==="inherit"&&o.prepareUpdate().updateVisibility(this.visPropCalc.visible);JXG$1.exists(this.label)&&JXG$1.exists(this.label.visProp)&&this.label.evalVisProp("visible")&&this.label.prepareUpdate().updateVisibility(this.visPropCalc.visible)}return this},_set:function(t,r){var a;if(t=t.toLocaleLowerCase(),this.visProp.hasOwnProperty(t)&&t.indexOf("color")>=0&&JXG$1.isString(r)&&r.length===9&&r.charAt(0)==="#")r=JXG$1.rgba2rgbo(r),this.visProp[t]=r[0],this.visProp[t.replace("color","opacity")]=r[1];else if(r!==null&&JXG$1.isObject(r)&&!JXG$1.exists(r.id)&&!JXG$1.exists(r.name)){this.visProp[t]={};for(a in r)r.hasOwnProperty(a)&&(this.visProp[t][a.toLocaleLowerCase()]=r[a])}else this.visProp[t]=r},resolveShortcuts:function(t){var r,a,n,s=["traceattributes","traceAttributes"];for(r in Options$1.shortcuts)if(Options$1.shortcuts.hasOwnProperty(r)){if(JXG$1.exists(t[r]))for(a=0;a<Options$1.shortcuts[r].length;a++)JXG$1.exists(t[Options$1.shortcuts[r][a]])||(t[Options$1.shortcuts[r][a]]=t[r]);for(n=0;n<s.length;n++)JXG$1.isObject(t[s[n]])&&(t[s[n]]=this.resolveShortcuts(t[s[n]]))}return t},setLabel:function(t){this.hasLabel||this.setAttribute({withlabel:!0}),this.setLabelText(t)},setLabelText:function(t){return JXG$1.exists(this.label)&&(t=t.replace(/</g,"&lt;").replace(/>/g,"&gt;"),this.label.setText(t)),this},setName:function(t){t=t.replace(/</g,"&lt;").replace(/>/g,"&gt;"),this.elType!=="slider"&&this.setLabelText(t),this.setAttribute({name:t})},setProperty:function(){JXG$1.deprecated("setProperty()","setAttribute()"),this.setAttribute.apply(this,arguments)},setAttribute:function(t){var r,a,n,s,o,l,u,h,c,f={};for(r=0;r<arguments.length;r++)l=arguments[r],JXG$1.isString(l)?(h=l.split(":"),f[JXG$1.trim(h[0])]=JXG$1.trim(h[1])):JXG$1.isArray(l)?f[l[0]]=l[1]:JXG$1.extend(f,l);f=this.resolveShortcuts(f);for(r in f)if(f.hasOwnProperty(r)){if(s=r.replace(/\s+/g,"").toLowerCase(),o=f[r],JXG$1.isObject(o)&&JXG$1.exists(this.visProp[s])){if(!JXG$1.isObject(this.visProp[s])&&o!==null&&JXG$1.isObject(o)&&(this.visProp[s]={}),JXG$1.mergeAttr(this.visProp[s],o),this.type===Const.OBJECT_TYPE_TICKS&&JXG$1.exists(this.labels))for(n=this.labels.length,a=0;a<n;a++)this.labels[a].setAttribute(o);else if(JXG$1.exists(this[s]))if(JXG$1.isArray(this[s]))for(a=0;a<this[s].length;a++)this[s][a].setAttribute(o);else this[s].setAttribute(o);else c=null,this.triggerEventHandlers(["attribute:"+s],[c,o,this]);continue}switch(c=this.visProp[s],s){case"checked":JXG$1.exists(this.rendNodeTag)&&(this.rendNodeCheckbox.checked=!!o);break;case"disabled":JXG$1.exists(this.rendNodeTag)&&(this.rendNodeTag.disabled=!!o);break;case"face":JXG$1.isPoint(this)&&(this.visProp.face=o,this.board.renderer.changePointStyle(this));break;case"generatelabelvalue":this.type===Const.OBJECT_TYPE_TICKS&&JXG$1.isFunction(o)&&(this.generateLabelValue=o);break;case"gradient":this.visProp.gradient=o,this.board.renderer.setGradient(this);break;case"gradientsecondcolor":o=JXG$1.rgba2rgbo(o),this.visProp.gradientsecondcolor=o[0],this.visProp.gradientsecondopacity=o[1],this.board.renderer.updateGradient(this);break;case"gradientsecondopacity":this.visProp.gradientsecondopacity=o,this.board.renderer.updateGradient(this);break;case"infoboxtext":JXG$1.isString(o)?this.infoboxText=o:this.infoboxText=!1;break;case"labelcolor":o=JXG$1.rgba2rgbo(o),u=o[1],o=o[0],u===0&&JXG$1.exists(this.label)&&this.hasLabel&&this.label.hideElement(),JXG$1.exists(this.label)&&this.hasLabel&&(this.label.visProp.strokecolor=o,this.board.renderer.setObjectStrokeColor(this.label,o,u)),this.elementClass===Const.OBJECT_CLASS_TEXT&&(this.visProp.strokecolor=o,this.visProp.strokeopacity=u,this.board.renderer.setObjectStrokeColor(this,o,u));break;case"layer":this.board.renderer.setLayer(this,this.eval(o)),this._set(s,o);break;case"maxlength":JXG$1.exists(this.rendNodeTag)&&(this.rendNodeTag.maxlength=!!o);break;case"name":c=this.name,delete this.board.elementsByName[this.name],this.name=o,this.board.elementsByName[this.name]=this;break;case"needsregularupdate":this.needsRegularUpdate=!(o==="false"||o===!1),this.board.renderer.setBuffering(this,this.needsRegularUpdate?"auto":"static");break;case"onpolygon":this.type===Const.OBJECT_TYPE_GLIDER&&(this.onPolygon=!!o);break;case"radius":(this.type===Const.OBJECT_TYPE_ANGLE||this.type===Const.OBJECT_TYPE_SECTOR)&&this.setRadius(o);break;case"rotate":(this.elementClass===Const.OBJECT_CLASS_TEXT&&this.evalVisProp("display")==="internal"||this.type===Const.OBJECT_TYPE_IMAGE)&&this.addRotation(o);break;case"tabindex":JXG$1.exists(this.rendNode)&&(this.rendNode.setAttribute("tabindex",o),this._set(s,o));break;case"trace":o==="false"||o===!1?(this.clearTrace(),this.visProp.trace=!1):o==="pause"?this.visProp.trace=!1:this.visProp.trace=!0;break;case"visible":o==="false"?this.visProp.visible=!1:o==="true"?this.visProp.visible=!0:this.visProp.visible=o,this.setDisplayRendNode(this.evalVisProp("visible")),this.evalVisProp("visible")&&JXG$1.exists(this.updateSize)&&this.updateSize();break;case"withlabel":this.visProp.withlabel=o,this.evalVisProp("withlabel")?(this.label||this.createLabel(),this.label.setAttribute({visible:"inherit"})):this.label&&this.hasLabel&&this.label.setAttribute({visible:!1}),this.hasLabel=o;break;case"straightfirst":case"straightlast":this._set(s,o);for(a in this.childElements)this.childElements.hasOwnProperty(a)&&this.childElements[a].elType==="glider"&&this.childElements[a].fullUpdate();break;default:JXG$1.exists(this.visProp[s])&&(!JXG$1.Validator[s]||JXG$1.Validator[s]&&JXG$1.Validator[s](o)||JXG$1.Validator[s]&&JXG$1.isFunction(o)&&JXG$1.Validator[s](o(this)))?(o=o.toLowerCase&&o.toLowerCase()==="false"?!1:o,this._set(s,o)):s in Options$1.shortcuts||JXG$1.warn("attribute '"+s+"' does not accept type '"+typeof o+"' of value "+o+".");break}this.triggerEventHandlers(["attribute:"+s],[c,o,this])}return this.triggerEventHandlers(["attribute"],[f,this]),this.evalVisProp("needsregularupdate")?this.board.update(this):this.board.fullUpdate(),this.elementClass===Const.OBJECT_CLASS_TEXT&&this.updateSize(),this},getProperty:function(){JXG$1.deprecated("getProperty()","getAttribute()"),this.getProperty.apply(this,arguments)},getAttribute:function(t){var r;switch(t=t.toLowerCase(),t){case"needsregularupdate":r=this.needsRegularUpdate;break;case"labelcolor":r=this.label.visProp.strokecolor;break;case"infoboxtext":r=this.infoboxText;break;case"withlabel":r=this.hasLabel;break;default:r=this.visProp[t];break}return r},evalVisProp:function(t){var r,a,n,s,o,l,u;if(t=t.toLowerCase(),t.indexOf(".")===-1)r=this.visProp[t];else for(a=t.split("."),s=a.length,r=this.visProp,n=0;n<s;n++)JXG$1.exists(r)&&(r=r[a[n]]);if(JXG$1.isFunction(r))return this.visProp.islabel===!0&&JXG$1.exists(this.visProp.anchor)?this.visProp.anchor.visProp.element3d!==null?r(this.visProp.anchor.visProp.element3d):r(this.visProp.anchor):JXG$1.exists(this.visProp.element3d)?r(this.visProp.element3d):r(this);if(r==="inherit"){for(o in this.descendants)if(this.descendants.hasOwnProperty(o)){for(l=this.descendants[o],u=!1,s=l.inherits.length,n=0;n<s;n++)if(this.id===l.inherits[n].id){u=!0;break}if(u){r=l.evalVisProp(t);break}}}return r},eval:function(t){return JXG$1.isFunction(t)?this.visProp.islabel===!0&&JXG$1.exists(this.visProp.anchor)?this.visProp.anchor.visProp.element3d!==null?t(this.visProp.anchor.visProp.element3d):t(this.visProp.anchor):this.visProp.element3d!==null?t(this.visProp.element3d):t(this):t},setDash:function(t){return this.setAttribute({dash:t}),this},prepareUpdate:function(){return this.needsUpdate=!0,this},remove:function(){return this.board.renderer.remove(this.rendNode),this.hasLabel&&this.board.renderer.remove(this.board.renderer.getElementById(this.label.id)),this},getTextAnchor:function(){return new Coords(Const.COORDS_BY_USER,[0,0],this.board)},getLabelAnchor:function(){return new Coords(Const.COORDS_BY_USER,[0,0],this.board)},setArrow:function(t,r){return this.visProp.firstarrow=t,this.visProp.lastarrow=r,r&&(this.type=Const.OBJECT_TYPE_VECTOR,this.elType="arrow"),this.prepareUpdate().update().updateVisibility().updateRenderer(),this},createGradient:function(){var t=this.evalVisProp("gradient");(t==="linear"||t==="radial")&&this.board.renderer.setGradient(this)},createLabel:function(){var t,r=this;return JXG$1.elements.text?(t=JXG$1.deepCopy(this.visProp.label,null),t.id=this.id+"Label",t.isLabel=!0,t.anchor=this,t.priv=this.visProp.priv,this.visProp.withlabel&&(this.label=JXG$1.elements.text(this.board,[0,0,function(){return JXG$1.isFunction(r.name)?r.name(r):r.name}],t),this.label.needsUpdate=!0,this.label.dump=!1,this.label.fullUpdate(),this.hasLabel=!0)):JXG$1.debug("JSXGraph: Can't create label: text element is not available. Make sure you include base/text"),this},highlight:function(t){return t=JXG$1.def(t,!1),this.evalVisProp("highlight")&&(!this.highlighted||t)&&(this.highlighted=!0,this.board.highlightedObjects[this.id]=this,this.board.renderer.highlight(this)),this},noHighlight:function(){return this.highlighted&&(this.highlighted=!1,delete this.board.highlightedObjects[this.id],this.board.renderer.noHighlight(this)),this},clearTrace:function(){var t;for(t in this.traces)this.traces.hasOwnProperty(t)&&this.board.renderer.remove(this.traces[t]);return this.numTraces=0,this},cloneToBackground:function(){return this},bounds:function(){return[0,0,0,0]},normalize:function(){return this.stdform=Mat.normalize(this.stdform),this},toJSON:function(){var t,r,a=['{"name":',this.name];a.push(', "id":'+this.id),t=[];for(r in this.visProp)this.visProp.hasOwnProperty(r)&&JXG$1.exists(this.visProp[r])&&t.push('"'+r+'":'+this.visProp[r]);return a.push(', "visProp":{'+t.toString()+"}"),a.push("}"),a.join("")},addRotation:function(t){var r,a,n,s,o,l=this;return(this.elementClass===Const.OBJECT_CLASS_TEXT||this.type===Const.OBJECT_TYPE_IMAGE)&&t!==0&&(r=this.board.create("transform",[function(){return-l.X()},function(){return-l.Y()}],{type:"translate"}),a=this.board.create("transform",[function(){return l.X()},function(){return l.Y()}],{type:"translate"}),n=this.board.create("transform",[function(){return l.board.unitX/l.board.unitY},function(){return 1}],{type:"scale"}),s=this.board.create("transform",[function(){return l.board.unitY/l.board.unitX},function(){return 1}],{type:"scale"}),o=this.board.create("transform",[function(){return l.eval(t)*Math.PI/180}],{type:"rotate"}),r.bindTo(this),n.bindTo(this),o.bindTo(this),s.bindTo(this),a.bindTo(this)),this},highlightStrokeColor:function(t){return JXG$1.deprecated("highlightStrokeColor()","setAttribute()"),this.setAttribute({highlightStrokeColor:t}),this},strokeColor:function(t){return JXG$1.deprecated("strokeColor()","setAttribute()"),this.setAttribute({strokeColor:t}),this},strokeWidth:function(t){return JXG$1.deprecated("strokeWidth()","setAttribute()"),this.setAttribute({strokeWidth:t}),this},fillColor:function(t){return JXG$1.deprecated("fillColor()","setAttribute()"),this.setAttribute({fillColor:t}),this},highlightFillColor:function(t){return JXG$1.deprecated("highlightFillColor()","setAttribute()"),this.setAttribute({highlightFillColor:t}),this},labelColor:function(t){return JXG$1.deprecated("labelColor()","setAttribute()"),this.setAttribute({labelColor:t}),this},dash:function(t){return JXG$1.deprecated("dash()","setAttribute()"),this.setAttribute({dash:t}),this},visible:function(t){return JXG$1.deprecated("visible()","setAttribute()"),this.setAttribute({visible:t}),this},shadow:function(t){return JXG$1.deprecated("shadow()","setAttribute()"),this.setAttribute({shadow:t}),this},getType:function(){return this.elType},getParents:function(){return JXG$1.isArray(this.parents)?this.parents:[]},snapToGrid:function(){return this},snapToPoints:function(){return this},getAttributes:function(){var t=JXG$1.deepCopy(this.visProp),r=[],a,n=r.length;for(t.id=this.id,t.name=this.name,a=0;a<n;a++)delete t[r[a]];return t},hasPoint:function(t,r){return!1},addTicks:function(t){return(t.id===""||!JXG$1.exists(t.id))&&(t.id=this.id+"_ticks_"+(this.ticks.length+1)),this.board.renderer.drawTicks(t),this.ticks.push(t),t.id},removeAllTicks:function(){var t;if(JXG$1.exists(this.ticks)){for(t=this.ticks.length-1;t>=0;t--)this.removeTicks(this.ticks[t]);this.ticks=[],this.board.update()}},removeTicks:function(t){var r,a;if(JXG$1.exists(this.defaultTicks)&&this.defaultTicks===t&&(this.defaultTicks=null),JXG$1.exists(this.ticks)){for(r=this.ticks.length-1;r>=0;r--)if(this.ticks[r]===t){if(this.board.removeObject(this.ticks[r]),this.ticks[r].ticks)for(a=0;a<this.ticks[r].ticks.length;a++)JXG$1.exists(this.ticks[r].labels[a])&&this.board.removeObject(this.ticks[r].labels[a]);delete this.ticks[r];break}}},getSnapSizes:function(){var t,r,a;return t=this.evalVisProp("snapsizex"),r=this.evalVisProp("snapsizey"),t<=0&&this.board.defaultAxes&&this.board.defaultAxes.x.defaultTicks&&(a=this.board.defaultAxes.x.defaultTicks,t=a.ticksDelta*(a.evalVisProp("minorticks")+1)),r<=0&&this.board.defaultAxes&&this.board.defaultAxes.y.defaultTicks&&(a=this.board.defaultAxes.y.defaultTicks,r=a.ticksDelta*(a.evalVisProp("minorticks")+1)),[t,r]},handleSnapToGrid:function(t,r){var a,n,s,o,l,u,h,c,f,d,p,v=!1,y=this.evalVisProp("attracttogrid"),b=this.evalVisProp("attractorunit"),_=this.evalVisProp("attractordistance");return!JXG$1.exists(this.coords)||this.evalVisProp("fixed")?this:(v=this.evalVisProp("snaptogrid")||y||t===!0,v&&(a=this.coords.usrCoords[1],n=this.coords.usrCoords[2],f=this.getSnapSizes(),d=f[0],p=f[1],d>0&&p>0&&(c=this.board.getBoundingBox(),s=Math.round(a/d)*d,o=Math.round(n/p)*p,l=new JXG$1.Coords(Const.COORDS_BY_USER,[s,o],this.board),(!y||l.distance(b==="screen"?Const.COORDS_BY_SCREEN:Const.COORDS_BY_USER,this.coords)<_)&&(a=s,n=o,r||(u=Math.min(c[0],c[2]),h=Math.max(c[0],c[2]),a<u&&a>u-d?a+=d:a>h&&a<h+d&&(a-=d),u=Math.min(c[1],c[3]),h=Math.max(c[1],c[3]),n<u&&n>u-p?n+=p:n>h&&n<h+p&&(n-=p)),this.coords.setCoordinates(Const.COORDS_BY_USER,[a,n])))),this)},getBoundingBox:function(){var t,r,a,n,s,o,l=[1/0,1/0,-1/0,-1/0];if(this.type===Const.OBJECT_TYPE_POLYGON){if(r=this.vertices.length-1,r<=0)return l;for(t=0;t<r;t++)a=this.vertices[t].X(),l[0]=a<l[0]?a:l[0],l[2]=a>l[2]?a:l[2],a=this.vertices[t].Y(),l[1]=a<l[1]?a:l[1],l[3]=a>l[3]?a:l[3]}else if(this.elementClass===Const.OBJECT_CLASS_CIRCLE)n=this.center.X(),s=this.center.Y(),l=[n-this.radius,s+this.radius,n+this.radius,s-this.radius];else if(this.elementClass===Const.OBJECT_CLASS_CURVE){if(r=this.points.length,r===0)return l;for(t=0;t<r;t++)a=this.points[t].usrCoords[1],l[0]=a<l[0]?a:l[0],l[2]=a>l[2]?a:l[2],a=this.points[t].usrCoords[2],l[1]=a<l[1]?a:l[1],l[3]=a>l[3]?a:l[3]}else this.elementClass===Const.OBJECT_CLASS_POINT?(n=this.X(),s=this.Y(),o=this.evalVisProp("size"),l=[n-o/this.board.unitX,s-o/this.board.unitY,n+o/this.board.unitX,s+o/this.board.unitY]):this.elementClass===Const.OBJECT_CLASS_LINE&&(a=this.point1.coords.usrCoords[1],l[0]=a<l[0]?a:l[0],l[2]=a>l[2]?a:l[2],a=this.point1.coords.usrCoords[2],l[1]=a<l[1]?a:l[1],l[3]=a>l[3]?a:l[3],a=this.point2.coords.usrCoords[1],l[0]=a<l[0]?a:l[0],l[2]=a>l[2]?a:l[2],a=this.point2.coords.usrCoords[2],l[1]=a<l[1]?a:l[1],l[3]=a>l[3]?a:l[3]);return l},addEvent:JXG$1.shortcut(JXG$1.GeometryElement.prototype,"on"),removeEvent:JXG$1.shortcut(JXG$1.GeometryElement.prototype,"off"),formatNumberLocale:function(t,r){var a,n,s,o={},l={maximumfractiondigits:"maximumFractionDigits",minimumfractiondigits:"minimumFractionDigits",compactdisplay:"compactDisplay",currencydisplay:"currencyDisplay",currencysign:"currencySign",localematcher:"localeMatcher",numberingsystem:"numberingSystem",signdisplay:"signDisplay",unitdisplay:"unitDisplay",usegrouping:"useGrouping",roundingmode:"roundingMode",roundingpriority:"roundingPriority",roundingincrement:"roundingIncrement",trailingzerodisplay:"trailingZeroDisplay",minimumintegerdigits:"minimumIntegerDigits",minimumsignificantdigits:"minimumSignificantDigits",maximumsignificantdigits:"maximumSignificantDigits"};if(JXG$1.exists(Intl)&&this.useLocale()){a=this.evalVisProp("intl.locale")||this.eval(this.board.attr.intl.locale),n=this.evalVisProp("intl.options")||{};for(s in n)n.hasOwnProperty(s)&&(l.hasOwnProperty(s)?o[l[s]]=this.eval(n[s]):o[s]=this.eval(n[s]));return s="maximumfractiondigits",JXG$1.exists(n[s])||(o[l[s]]=r),Intl.NumberFormat(a,o).format(t)}return t},useLocale:function(){var t;return!JXG$1.exists(this.visProp.intl)||!JXG$1.exists(this.visProp.intl.enabled)?!1:(t=this.evalVisProp("intl.enabled"),t===!0||t==="inherit"&&this.eval(this.board.attr.intl.enabled)===!0)},__evt__over:function(t){},__evt__mouseover:function(t){},__evt__out:function(t){},__evt__mouseout:function(t){},__evt__move:function(t){},__evt__mousemove:function(t){},__evt__drag:function(t){},__evt__mousedrag:function(t){},__evt__pendrag:function(t){},__evt__touchdrag:function(t){},__evt__keydrag:function(t){},__evt__down:function(t){},__evt__mousedown:function(t){},__evt__pendown:function(t){},__evt__touchdown:function(t){},__evt__click:function(t){},__evt__dblclick:function(t){},__evt__mouseclick:function(t){},__evt__mousedblclick:function(t){},__evt__pointerclick:function(t){},__evt__pointerdblclick:function(t){},__evt__up:function(t){},__evt__mouseup:function(t){},__evt__penup:function(t){},__evt__touchup:function(t){},__evt__attribute:function(t,r){},__evt__attribute_:function(t,r,a){},__evt:function(){}});const GeometryElement=JXG$1.GeometryElement;JXG$1.CoordsElement=function(t,r){var a;for(JXG$1.exists(t)||(t=[1,0,0]),a=0;a<t.length;++a)t[a]=parseFloat(t[a]);this.coords=new Coords(Const.COORDS_BY_USER,t,this.board),this.initialCoords=new Coords(Const.COORDS_BY_USER,t,this.board),this.actualCoords=new Coords(Const.COORDS_BY_USER,t,this.board),this.position=null,this.isConstrained=!1,this.onPolygon=!1,this.slideObject=null,this.slideObjects=[],this.needsUpdateFromParent=!0,this.groups=[],this.Xjc=null,this.Yjc=null,this.methodMap=JXG$1.deepCopy(this.methodMap,{move:"moveTo",moveTo:"moveTo",moveAlong:"moveAlong",visit:"visit",glide:"makeGlider",makeGlider:"makeGlider",intersect:"makeIntersection",makeIntersection:"makeIntersection",X:"X",Y:"Y",Coords:"Coords",free:"free",setPosition:"setGliderPosition",setGliderPosition:"setGliderPosition",addConstraint:"addConstraint",dist:"Dist",Dist:"Dist",onPolygon:"onPolygon",startAnimation:"startAnimation",stopAnimation:"stopAnimation"}),JXG$1.exists(this.element)&&this.addAnchor(t,r),this.isDraggable=!0};JXG$1.extend(JXG$1.CoordsElement.prototype,{updateConstraint:function(){return this},updateCoords:function(t){return this.needsUpdate?(JXG$1.exists(t)||(t=!1),this.evalVisProp("frozen")!==!0&&this.updateConstraint(),this.type===Const.OBJECT_TYPE_GLIDER&&(this.isConstrained&&(t=!1),t?this.updateGliderFromParent():this.updateGlider()),this.updateTransform(t),this):this},updateGlider:function(){var t,r,a,n,s,o,l,u,h,c,f,d,p=2*Math.PI,v,y,b,_,N,M=!1,C,$,w,A=this.slideObject,X,O,G=[],R;if(this.needsUpdateFromParent=!1,A.elementClass===Const.OBJECT_CLASS_CIRCLE)this.evalVisProp("isgeonext")&&(p=1),_=Geometry.projectPointToCircle(this,A,this.board),N=Geometry.rad([A.center.X()+1,A.center.Y()],A.center,this)/p;else if(A.elementClass===Const.OBJECT_CLASS_LINE){if(this.onPolygon){if(n=A.point1.coords.usrCoords,s=A.point2.coords.usrCoords,t=1,r=s[t]-n[t],Math.abs(r)<Mat.eps&&(t=2,r=s[t]-n[t]),l=Geometry.projectPointToLine(this,A,this.board),u=(l.usrCoords[t]-n[t])/r,o=A.parentPolygon,u<0){for(t=0;t<o.borders.length;t++)if(A===o.borders[t]){A=o.borders[(t-1+o.borders.length)%o.borders.length];break}}else if(u>1){for(t=0;t<o.borders.length;t++)if(A===o.borders[t]){A=o.borders[(t+1+o.borders.length)%o.borders.length];break}}A.id!==this.slideObject.id&&(this.slideObject=A)}n=A.point1.coords,s=A.point2.coords,r=n.distance(Const.COORDS_BY_USER,s),r<Mat.eps?(_=n,M=!0,N=0):(_=Geometry.projectPointToLine(this,A,this.board),n=n.usrCoords.slice(0),s=s.usrCoords.slice(0),Math.abs(s[0])<Mat.eps?(t=1,r=s[t],Math.abs(r)<Mat.eps&&(t=2,r=s[t]),r=(_.usrCoords[t]-n[t])/r,c=r>=0?1:-1,r=Math.abs(r),N=c*r/(r+1)):Math.abs(n[0])<Mat.eps?(t=1,r=n[t],Math.abs(r)<Mat.eps&&(t=2,r=n[t]),r=(_.usrCoords[t]-s[t])/r,r<0?N=(1-2*r)/(1-r):N=1/(r+1)):(t=1,r=s[t]-n[t],Math.abs(r)<Mat.eps&&(t=2,r=s[t]-n[t]),N=(_.usrCoords[t]-n[t])/r)),$=this.findClosestSnapValue(N),$!==null?(w=this.evalVisProp("snapvalues"),N=(w[$]-this._smin)/(this._smax-this._smin),this.update(!0)):(C=this.evalVisProp("snapwidth"),C>0&&Math.abs(this._smax-this._smin)>=Mat.eps&&(N=Math.max(Math.min(N,1),0),a=N*(this._smax-this._smin),a=Math.round(a/C)*C+this._smin,N=(a-this._smin)/(this._smax-this._smin),this.update(!0))),n=A.point1.coords,!A.evalVisProp("straightfirst")&&Math.abs(n.usrCoords[0])>Mat.eps&&N<0&&(_=n,M=!0,N=0),s=A.point2.coords,!A.evalVisProp("straightlast")&&Math.abs(s.usrCoords[0])>Mat.eps&&N>1&&(_=s,M=!0,N=1)}else if(A.type===Const.OBJECT_TYPE_TURTLE)this.updateConstraint(),X=Geometry.projectPointToTurtle(this,A,this.board),_=X[0],N=X[1];else if(A.elementClass===Const.OBJECT_CLASS_CURVE)if(A.type===Const.OBJECT_TYPE_ARC||A.type===Const.OBJECT_TYPE_SECTOR)_=Geometry.projectPointToCircle(this,A,this.board),h=Geometry.rad(A.radiuspoint,A.center,this),f=0,d=Geometry.rad(A.radiuspoint,A.center,A.anglepoint),N=h,C=A.evalVisProp("selection"),(C==="minor"&&d>Math.PI||C==="major"&&d<Math.PI)&&(f=d,d=2*Math.PI),(h<f||h>d)&&(N=d,(h<f&&h>f*.5||h>d&&h>d*.5+Math.PI)&&(N=f),this.needsUpdateFromParent=!0,this.updateGliderFromParent()),p=d-f,this.visProp.isgeonext&&(p=1),Math.abs(p)>Mat.eps&&(N/=p);else if(this.updateConstraint(),A.transformations.length>0){for(R=!1,X=A.getTransformationSource(),X[0]&&(R=X[0],G.push(A),G.push(X[1]));X[0]&&JXG$1.exists(X[1]._transformationSource);)X=X[1].getTransformationSource(),G.push(X[1]);if(O=this.coords.usrCoords,R){for(t=0;t<G.length;t++)G[t].updateTransformMatrix(),b=Mat.inverse(G[t].transformMat),O=Mat.matVecMult(b,O);for(v=new Coords(Const.COORDS_BY_USER,O,this.board).usrCoords,y=Geometry.projectCoordsToCurve(v[1],v[2],this.position||0,G[G.length-1],this.board),O=y[0].usrCoords,t=G.length-2;t>=0;t--)O=Mat.matVecMult(G[t].transformMat,O);y[0]=new Coords(Const.COORDS_BY_USER,O,this.board)}else A.updateTransformMatrix(),b=Mat.inverse(A.transformMat),O=Mat.matVecMult(b,O),v=new Coords(Const.COORDS_BY_USER,O,this.board).usrCoords,y=Geometry.projectCoordsToCurve(v[1],v[2],this.position||0,A,this.board);_=y[0],N=y[1]}else X=Geometry.projectPointToCurve(this,A,this.board),_=X[0],N=X[1];else JXG$1.isPoint(A)&&(_=Geometry.projectPointToPoint(this,A,this.board),N=this.position);this.coords.setCoordinates(Const.COORDS_BY_USER,_.usrCoords,M),this.position=N},findClosestSnapValue:function(t){var r,a,n,s,o=null;if(n=this.evalVisProp("snapvalues"),s=this.evalVisProp("snapvaluedistance"),JXG$1.isArray(n)&&Math.abs(this._smax-this._smin)>=Mat.eps&&s>0)for(r=0;r<n.length;r++)a=Math.abs(t*(this._smax-this._smin)+this._smin-n[r]),a<s&&(s=a,o=r);return o},updateGliderFromParent:function(){var t,r,a,n,s,o=this.slideObject,l=[],u,h,c,f,d,p,v,y=2*Math.PI;if(!this.needsUpdateFromParent){this.needsUpdateFromParent=!0;return}if(o.elementClass===Const.OBJECT_CLASS_CIRCLE)a=o.Radius(),this.evalVisProp("isgeonext")&&(y=1),s=[o.center.X()+a*Math.cos(this.position*y),o.center.Y()+a*Math.sin(this.position*y)];else if(o.elementClass===Const.OBJECT_CLASS_LINE)t=o.point1.coords.usrCoords,r=o.point2.coords.usrCoords,t[0]===0&&t[1]===0&&t[2]===0||r[0]===0&&r[1]===0&&r[2]===0?s=[0,0,0]:Math.abs(r[0])<Mat.eps?(n=Math.min(Math.abs(this.position),1-Mat.eps),n/=1-n,this.position<0&&(n=-n),s=[t[0]+n*r[0],t[1]+n*r[1],t[2]+n*r[2]]):Math.abs(t[0])<Mat.eps?(n=Math.max(this.position,Mat.eps),n=Math.min(n,2-Mat.eps),n>1?n=(n-1)/(n-2):n=(1-n)/n,s=[r[0]+n*t[0],r[1]+n*t[1],r[2]+n*t[2]]):(n=this.position,s=[t[0]+n*(r[0]-t[0]),t[1]+n*(r[1]-t[1]),t[2]+n*(r[2]-t[2])]);else if(o.type===Const.OBJECT_TYPE_TURTLE)this.coords.setCoordinates(Const.COORDS_BY_USER,[o.Z(this.position),o.X(this.position),o.Y(this.position)]),this.updateConstraint(),s=Geometry.projectPointToTurtle(this,o,this.board)[0].usrCoords;else if(o.elementClass===Const.OBJECT_CLASS_CURVE){for(c=!1,u=o.getTransformationSource(),u[0]&&(c=u[0],l.push(o),l.push(u[1]));u[0]&&JXG$1.exists(u[1]._transformationSource);)u=u[1].getTransformationSource(),l.push(u[1]);if(c?this.coords.setCoordinates(Const.COORDS_BY_USER,[l[l.length-1].Z(this.position),l[l.length-1].X(this.position),l[l.length-1].Y(this.position)]):this.coords.setCoordinates(Const.COORDS_BY_USER,[o.Z(this.position),o.X(this.position),o.Y(this.position)]),o.type===Const.OBJECT_TYPE_ARC||o.type===Const.OBJECT_TYPE_SECTOR)f=Geometry.rad([o.center.X()+1,o.center.Y()],o.center,o.radiuspoint),d=0,v=Geometry.rad(o.radiuspoint,o.center,o.anglepoint),(o.visProp.selection==="minor"&&v>Math.PI||o.visProp.selection==="major"&&v<Math.PI)&&(d=v,v=2*Math.PI),y=v-d,this.evalVisProp("isgeonext")&&(y=1),p=this.position*y,(p<d||p>v)&&(p=v,(p<d&&p>d*.5||p>v&&p>v*.5+Math.PI)&&(p=d),this.position=p,Math.abs(y)>Mat.eps&&(this.position/=y)),a=o.Radius(),s=[o.center.X()+a*Math.cos(this.position*y+f),o.center.Y()+a*Math.sin(this.position*y+f)];else if(this.updateConstraint(),c)for(s=Geometry.projectPointToCurve(this,l[l.length-1],this.board)[0].usrCoords,h=l.length-2;h>=0;h--)s=new Coords(Const.COORDS_BY_USER,Mat.matVecMult(l[h].transformMat,s),this.board).usrCoords;else s=Geometry.projectPointToCurve(this,o,this.board)[0].usrCoords}else JXG$1.isPoint(o)&&(s=Geometry.projectPointToPoint(this,o,this.board).usrCoords);this.coords.setCoordinates(Const.COORDS_BY_USER,s,!1)},updateRendererGeneric:function(t){return!this.needsUpdate||!this.board.renderer?this:(this.visPropCalc.visible&&(this.isReal=!isNaN(this.coords.usrCoords[1]+this.coords.usrCoords[2]),this.isReal=Math.abs(this.coords.usrCoords[0])>Mat.eps?this.isReal:!1,this.isReal||this.updateVisibility(!1)),this.visPropCalc.visible&&this.board.renderer[t](this),this.hasLabel&&this.visPropCalc.visible&&this.label&&this.label.visPropCalc.visible&&this.isReal&&(this.label.update(),this.board.renderer.updateText(this.label)),this.setDisplayRendNode(),this.needsUpdate=!1,this)},X:function(){return this.coords.usrCoords[1]},Y:function(){return this.coords.usrCoords[2]},Z:function(){return this.coords.usrCoords[0]},Coords:function(t){return t?this.coords.usrCoords.slice():this.coords.usrCoords.slice(1)},XEval:function(){return this.coords.usrCoords[1]},YEval:function(){return this.coords.usrCoords[2]},ZEval:function(){return this.coords.usrCoords[0]},Dist:function(t){return this.isReal&&t.isReal?this.coords.distance(Const.COORDS_BY_USER,t.coords):NaN},snapToGrid:function(t){return this.handleSnapToGrid(t)},handleSnapToPoints:function(t){var r,a,n,s=0,o,l=1/0,u=null,h,c,f=this.evalVisProp("ignoredsnaptopoints"),d,p,v=!1;if(o=this.board.objectsList.length,f&&(d=f.length),this.evalVisProp("snaptopoints")||t){for(h=this.evalVisProp("attractorunit"),c=this.evalVisProp("attractordistance"),r=0;r<o;r++){if(a=this.board.objectsList[r],f){for(v=!1,p=0;p<d;p++)if(a===this.board.select(f[p])){v=!0;break}if(v)continue}JXG$1.isPoint(a)&&a!==this&&a.visPropCalc.visible&&(n=Geometry.projectPointToPoint(this,a,this.board),h==="screen"?s=n.distance(Const.COORDS_BY_SCREEN,this.coords):s=n.distance(Const.COORDS_BY_USER,this.coords),s<c&&s<l&&(l=s,u=n))}u!==null&&this.coords.setCoordinates(Const.COORDS_BY_USER,u.usrCoords)}return this},snapToPoints:function(t){return this.handleSnapToPoints(t)},handleAttractors:function(){var t,r,a,n=0,s,o=this.evalVisProp("attractorunit"),l=this.evalVisProp("attractordistance"),u=this.evalVisProp("snatchdistance"),h=this.evalVisProp("attractors"),c=h.length;if(l!==0){for(t=0;t<c;t++)if(r=this.board.select(h[t]),JXG$1.exists(r)&&r!==this){if(JXG$1.isPoint(r)?a=Geometry.projectPointToPoint(this,r,this.board):r.elementClass===Const.OBJECT_CLASS_LINE?(s=Geometry.projectCoordsToSegment(this.coords.usrCoords,r.point1.coords.usrCoords,r.point2.coords.usrCoords),!r.evalVisProp("straightfirst")&&s[1]<0?a=r.point1.coords:!r.evalVisProp("straightlast")&&s[1]>1?a=r.point2.coords:a=new Coords(Const.COORDS_BY_USER,s[0],this.board)):r.elementClass===Const.OBJECT_CLASS_CIRCLE?a=Geometry.projectPointToCircle(this,r,this.board):r.elementClass===Const.OBJECT_CLASS_CURVE?a=Geometry.projectPointToCurve(this,r,this.board)[0]:r.type===Const.OBJECT_TYPE_TURTLE?a=Geometry.projectPointToTurtle(this,r,this.board)[0]:r.type===Const.OBJECT_TYPE_POLYGON&&(a=new Coords(Const.COORDS_BY_USER,Geometry.projectCoordsToPolygon(this.coords.usrCoords,r),this.board)),o==="screen"?n=a.distance(Const.COORDS_BY_SCREEN,this.coords):n=a.distance(Const.COORDS_BY_USER,this.coords),n<l){this.type===Const.OBJECT_TYPE_GLIDER&&(r===this.slideObject||this.slideObject&&this.onPolygon&&this.slideObject.parentPolygon===r)||this.makeGlider(r);break}n>=u&&(r===this.slideObject||this.slideObject&&this.onPolygon&&this.slideObject.parentPolygon===r)&&this.popSlideObject()}return this}},setPositionDirectly:function(t,r){var a,n,s,o,l=this.coords,u;if(this.relativeCoords)return n=new Coords(t,r,this.board),this.evalVisProp("islabel")?(s=Stat.subtract(n.scrCoords,l.scrCoords),this.relativeCoords.scrCoords[1]+=s[1],this.relativeCoords.scrCoords[2]+=s[2]):(s=Stat.subtract(n.usrCoords,l.usrCoords),this.relativeCoords.usrCoords[1]+=s[1],this.relativeCoords.usrCoords[2]+=s[2]),this;if(this.coords.setCoordinates(t,r),this.handleSnapToGrid(),this.handleSnapToPoints(),this.handleAttractors(),this.actualCoords.setCoordinates(Const.COORDS_BY_USER,this.coords.usrCoords),this.transformations.length>0){for(t===Const.COORDS_BY_SCREEN?u=new Coords(t,r,this.board).usrCoords:(r.length===2&&(r=[1].concat(r)),u=r),o=[[1,0,0],[0,1,0],[0,0,1]],a=0;a<this.transformations.length;a++)o=Mat.matMatMult(this.transformations[a].matrix,o);u=Mat.matVecMult(Mat.inverse(o),u),this.initialCoords.setCoordinates(Const.COORDS_BY_USER,u),this.elementClass!==Const.OBJECT_CLASS_POINT&&this.coords.setCoordinates(Const.COORDS_BY_USER,u)}return this.prepareUpdate().update(),this.board.isSuspendedUpdate&&this.type===Const.OBJECT_TYPE_GLIDER&&this.updateGlider(),this},setPositionByTransform:function(t,r){var a;return r=new Coords(t,r,this.board),a=this.board.create("transform",r.usrCoords.slice(1),{type:"translate"}),this.transformations.length>0&&this.transformations[this.transformations.length-1].isNumericMatrix?this.transformations[this.transformations.length-1].melt(a):this.addTransform(this,a),this.prepareUpdate().update(),this},setPosition:function(t,r){return this.setPositionDirectly(t,r)},setGliderPosition:function(t){return this.type===Const.OBJECT_TYPE_GLIDER&&(this.position=t,this.board.update()),this},makeGlider:function(t){var r=this.board.select(t),a=!1,n,s,o;if(r.type===Const.OBJECT_TYPE_POLYGON){for(n=Number.MAX_VALUE,s=0;s<r.borders.length;s++)o=JXG$1.Math.Geometry.distPointLine(this.coords.usrCoords,r.borders[s].stdform),o<n&&(n=o,t=r.borders[s]);r=this.board.select(t),a=!0}if(JXG$1.exists(r)){if(r.type===Const.OBJECT_TYPE_TICKS)throw new Error("JSXGraph: gliders on ticks are not possible.")}else throw new Error("JSXGraph: slide object undefined.");return this.slideObject=this.board.select(t),this.slideObjects.push(this.slideObject),this.addParents(t),this.type=Const.OBJECT_TYPE_GLIDER,this.elType="glider",this.visProp.snapwidth=-1,this.slideObject.addChild(this),this.isDraggable=!0,this.onPolygon=a,this.generatePolynomial=function(){return this.slideObject.generatePolynomial(this)},this.updateGlider(),this.needsUpdateFromParent=!0,this.updateGliderFromParent(),this},popSlideObject:function(){this.slideObjects.length>0&&(this.slideObjects.pop(),this.slideObject.removeChild(this),this.slideObjects.length===0?(this.type=this._org_type,this.type===Const.OBJECT_TYPE_POINT?this.elType="point":this.elementClass===Const.OBJECT_CLASS_TEXT?this.elType="text":this.type===Const.OBJECT_TYPE_IMAGE?this.elType="image":this.type===Const.OBJECT_TYPE_FOREIGNOBJECT&&(this.elType="foreignobject"),this.slideObject=null):this.slideObject=this.slideObjects[this.slideObjects.length-1])},free:function(){var t,r;if(this.type!==Const.OBJECT_TYPE_GLIDER)if(this.transformations.length=0,delete this.updateConstraint,this.isConstrained=!1,!this.isDraggable)this.isDraggable=!0,this.elementClass===Const.OBJECT_CLASS_POINT&&(this.type=Const.OBJECT_TYPE_POINT,this.elType="point"),this.XEval=function(){return this.coords.usrCoords[1]},this.YEval=function(){return this.coords.usrCoords[2]},this.ZEval=function(){return this.coords.usrCoords[0]},this.Xjc=null,this.Yjc=null;else return;for(t in this.board.objects)this.board.objects.hasOwnProperty(t)&&(r=this.board.objects[t],r.descendants&&(delete r.descendants[this.id],delete r.childElements[this.id],this.hasLabel&&(delete r.descendants[this.label.id],delete r.childElements[this.label.id])));this.ancestors={},this.parents=[],this.slideObject=null,this.slideObjects=[],this.elementClass===Const.OBJECT_CLASS_POINT?(this.type=Const.OBJECT_TYPE_POINT,this.elType="point"):this.elementClass===Const.OBJECT_CLASS_TEXT?(this.type=this._org_type,this.elType="text"):this.elementClass===Const.OBJECT_CLASS_OTHER&&(this.type=this._org_type,this.elType="image")},addConstraint:function(t){var r,a,n=[],s=["X","Y"],o=function(u){return function(){return u}},l=function(u){return function(){return u.Value()}};for(this.elementClass===Const.OBJECT_CLASS_POINT&&(this.type=Const.OBJECT_TYPE_CAS),this.isDraggable=!1,r=0;r<t.length;r++)a=t[r],JXG$1.isString(a)?(n[r]=this.board.jc.snippet(a,!0,null,!0),this.addParentsFromJCFunctions([n[r]]),t.length===2&&(this[s[r]+"jc"]=t[r])):JXG$1.isFunction(a)?n[r]=a:JXG$1.isNumber(a)?n[r]=o(a):JXG$1.isObject(a)&&JXG$1.isFunction(a.Value)&&(n[r]=l(a)),n[r].origin=a;return t.length===1?this.updateConstraint=function(){var u=n[0]();return JXG$1.isArray(u)?this.coords.setCoordinates(Const.COORDS_BY_USER,u):this.coords=u,this}:t.length===2?(this.XEval=n[0],this.YEval=n[1],this.addParents([n[0].origin,n[1].origin]),this.updateConstraint=function(){return this.coords.setCoordinates(Const.COORDS_BY_USER,[this.XEval(),this.YEval()]),this}):(this.ZEval=n[0],this.XEval=n[1],this.YEval=n[2],this.addParents([n[0].origin,n[1].origin,n[2].origin]),this.updateConstraint=function(){return this.coords.setCoordinates(Const.COORDS_BY_USER,[this.ZEval(),this.XEval(),this.YEval()]),this}),this.isConstrained=!0,this.prepareUpdate().update(),this.board.isSuspendedUpdate||(this.updateVisibility().updateRenderer(),this.hasLabel&&this.label.fullUpdate()),this},addAnchor:function(t,r){r?this.relativeCoords=new Coords(Const.COORDS_BY_SCREEN,t.slice(0,2),this.board):this.relativeCoords=new Coords(Const.COORDS_BY_USER,t,this.board),this.element.addChild(this),r&&this.addParents(this.element),this.XEval=function(){var a,n,s,o;return this.evalVisProp("islabel")?(o=this.evalVisProp("offset"),a=parseFloat(o[0]),s=this.element.getLabelAnchor(),n=new Coords(Const.COORDS_BY_SCREEN,[a+this.relativeCoords.scrCoords[1]+s.scrCoords[1],0],this.board),n.usrCoords[1]):(s=this.element.getTextAnchor(),this.relativeCoords.usrCoords[1]+s.usrCoords[1])},this.YEval=function(){var a,n,s,o;return this.evalVisProp("islabel")?(o=this.evalVisProp("offset"),a=-parseFloat(o[1]),s=this.element.getLabelAnchor(),n=new Coords(Const.COORDS_BY_SCREEN,[0,a+this.relativeCoords.scrCoords[2]+s.scrCoords[2]],this.board),n.usrCoords[2]):(s=this.element.getTextAnchor(),this.relativeCoords.usrCoords[2]+s.usrCoords[2])},this.ZEval=JXG$1.createFunction(1,this.board,""),this.updateConstraint=function(){this.coords.setCoordinates(Const.COORDS_BY_USER,[this.ZEval(),this.XEval(),this.YEval()])},this.isConstrained=!0,this.updateConstraint()},updateTransform:function(t){var r,a;if(this.transformations.length===0)return this;for(this.baseElement===null&&(this.baseElement=this),this.transformations[0].update(),this===this.baseElement?r=this.transformations[0].apply(this,"self"):r=this.transformations[0].apply(this.baseElement),a=1;a<this.transformations.length;a++)this.transformations[a].update(),r=Mat.matVecMult(this.transformations[a].matrix,r);return this.actualCoords.setCoordinates(Const.COORDS_BY_USER,r),this},addTransform:function(t,r){var a,n=JXG$1.isArray(r)?r:[r],s=n.length;for(this.transformations.length===0&&(this.baseElement=t),a=0;a<s;a++)this.transformations.push(n[a]);return this},startAnimation:function(t,r,a,n){var s=JXG$1.evaluate(t),o=JXG$1.evaluate(r),l=this;return a=JXG$1.evaluate(a)||250,n=JXG$1.evaluate(n),n=n!=="undefined"?n:-1,this.type===Const.OBJECT_TYPE_GLIDER&&!JXG$1.exists(this.intervalCode)&&n!==0&&(this.roundsCount=0,this.intervalCode=window.setInterval(function(){l._anim(s,o,n)},a),JXG$1.exists(this.intervalCount)||(this.intervalCount=0)),this},stopAnimation:function(){return JXG$1.exists(this.intervalCode)&&(window.clearInterval(this.intervalCode),delete this.intervalCode),this},moveAlong:function(t,r,a){a=a||{};var n,s,o=[],l=[],u=this.board.attr.animationdelay,h=r/u,c,f,d,p=function(v,y){return function(){return t[v][y]}};if(JXG$1.isArray(t)){for(c=t.length,n=0;n<c;n++)JXG$1.isPoint(t[n])?l[n]=t[n]:l[n]={elementClass:Const.OBJECT_CLASS_POINT,X:p(n,0),Y:p(n,1)};if(r=r||0,r===0)return this.setPosition(Const.COORDS_BY_USER,[l[l.length-1].X(),l[l.length-1].Y()]),this.board.update(this);if(!JXG$1.exists(a.interpolate)||a.interpolate)for(s=Numerics.Neville(l),n=0;n<h;n++)o[n]=[],o[n][0]=s[0]((h-n)/h*s[3]()),o[n][1]=s[1]((h-n)/h*s[3]());else{for(c=t.length-1,n=0;n<h;++n)f=Math.floor(n/h*c),d=n/h*c-f,o[n]=[],o[n][0]=(1-d)*l[f].X()+d*l[f+1].X(),o[n][1]=(1-d)*l[f].Y()+d*l[f+1].Y();o.push([l[c].X(),l[c].Y()]),o.reverse()}this.animationPath=o}else JXG$1.isFunction(t)&&(this.animationPath=t,this.animationStart=new Date().getTime());return this.animationCallback=a.callback,this.board.addAnimation(this),this},moveTo:function(t,r,a){a=a||{},t=new Coords(Const.COORDS_BY_USER,t,this.board);var n,s=this.board.attr.animationdelay,o=Math.ceil(r/s),l=[],u=this.coords.usrCoords[1],h=this.coords.usrCoords[2],c=t.usrCoords[1]-u,f=t.usrCoords[2]-h,d=function(p){var v=p/o;if(a.effect){if(a.effect==="<>")return Math.pow(Math.sin(v*Math.PI/2),2);if(a.effect==="<")return v*v*v;if(a.effect===">")return 1-Math.pow(1-v,3);if(a.effect==="=="||a.effect==="--")return p/o;JXG$1.warn("Callback moveTo(): valid effects are '==', '--', '<>', '>', and '<', given is '"+a.effect+"'. Set it to '--'"),a.effect="--"}return p/o};if(!JXG$1.exists(r)||r===0||Math.abs(t.usrCoords[0]-this.coords.usrCoords[0])>Mat.eps)return this.setPosition(Const.COORDS_BY_USER,t.usrCoords),this.board.update(this);if(!JXG$1.exists(a.callback)&&Math.abs(c)<Mat.eps&&Math.abs(f)<Mat.eps)return this;for(n=o;n>=0;n--)l[o-n]=[t.usrCoords[0],u+c*d(n),h+f*d(n)];return this.animationPath=l,this.animationCallback=a.callback,this.board.addAnimation(this),this},visit:function(t,r,a){t=new Coords(Const.COORDS_BY_USER,t,this.board);var n,s,o,l=this.board.attr.animationdelay,u=[],h=this.coords.usrCoords[1],c=this.coords.usrCoords[2],f=t.usrCoords[1]-h,d=t.usrCoords[2]-c,p=function(v){var y=v<o/2?2*v/o:2*(o-v)/o;if(a.effect){if(a.effect==="<>")return Math.pow(Math.sin(y*Math.PI/2),2);if(a.effect==="<")return y*y*y;if(a.effect===">")return 1-Math.pow(1-y,3);if(a.effect==="=="||a.effect==="--")return y;JXG$1.warn("Callback visit(): valid effects are '==', '--', '<>', '>', and '<', given is '"+a.effect+"'. Set it to '--'"),a.effect="--"}return y};for(JXG$1.isNumber(a)?a={repeat:a}:(a=a||{},JXG$1.exists(a.repeat)||(a.repeat=1)),o=Math.ceil(r/(l*a.repeat)),s=0;s<a.repeat;s++)for(n=o;n>=0;n--)u[s*(o+1)+o-n]=[t.usrCoords[0],h+f*p(n),c+d*p(n)];return this.animationPath=u,this.animationCallback=a.callback,this.board.addAnimation(this),this},moveAlongES6:function(t,r,a){return new Promise((n,s)=>{JXG$1.exists(a)&&JXG$1.exists(a.callback)?a.callback=n:a={callback:n},this.moveAlong(t,r,a)})},moveToES6:function(t,r,a){return new Promise((n,s)=>{JXG$1.exists(a)&&JXG$1.exists(a.callback)?a.callback=n:a={callback:n},this.moveTo(t,r,a)})},visitES6:function(t,r,a){return new Promise((n,s)=>{JXG$1.exists(a)&&JXG$1.exists(a.callback)?a.callback=n:a={callback:n},this.visit(t,r,a)})},_anim:function(t,r,a){var n,s,o,l,u,h,c,f,d;return this.intervalCount+=1,this.intervalCount>r&&(this.intervalCount=0,this.roundsCount+=1,a>0&&this.roundsCount>=a)?(this.roundsCount=0,this.stopAnimation()):(this.slideObject.elementClass===Const.OBJECT_CLASS_LINE?(c=this.slideObject.point1.coords.scrCoords,f=this.slideObject.point2.coords.scrCoords,n=Math.round((f[1]-c[1])*this.intervalCount/r),s=Math.round((f[2]-c[2])*this.intervalCount/r),t>0?l=this.slideObject.point1:(l=this.slideObject.point2,n*=-1,s*=-1),this.coords.setCoordinates(Const.COORDS_BY_SCREEN,[l.coords.scrCoords[1]+n,l.coords.scrCoords[2]+s])):this.slideObject.elementClass===Const.OBJECT_CLASS_CURVE?(t>0?u=(this.slideObject.maxX()-this.slideObject.minX())*this.intervalCount/r+this.slideObject.minX():u=-(this.slideObject.maxX()-this.slideObject.minX())*this.intervalCount/r+this.slideObject.maxX(),this.coords.setCoordinates(Const.COORDS_BY_USER,[this.slideObject.X(u),this.slideObject.Y(u)]),d=Geometry.projectPointToCurve(this,this.slideObject,this.board),this.coords=d[0],this.position=d[1]):this.slideObject.elementClass===Const.OBJECT_CLASS_CIRCLE&&(o=2*Math.PI,t<0?o*=this.intervalCount/r:o*=(r-this.intervalCount)/r,h=this.slideObject.Radius(),this.coords.setCoordinates(Const.COORDS_BY_USER,[this.slideObject.center.coords.usrCoords[1]+h*Math.cos(o),this.slideObject.center.coords.usrCoords[2]+h*Math.sin(o)])),this.board.update(this),this)},getTextAnchor:function(){return this.coords},getLabelAnchor:function(){return this.coords},getParents:function(){var t=[this.Z(),this.X(),this.Y()];return this.parents.length!==0&&(t=this.parents),this.type===Const.OBJECT_TYPE_GLIDER&&(t=[this.X(),this.Y(),this.slideObject.id]),t}});JXG$1.CoordsElement.create=function(t,r,a,n,s,o){var l,u=!1,h;for(h=0;h<a.length;h++)(JXG$1.isFunction(a[h])||JXG$1.isString(a[h]))&&(u=!0);if(u)l=new t(r,[0,0],n,s,o),l.addConstraint(a);else if(JXG$1.isNumber(a[0])&&JXG$1.isNumber(a[1]))l=new t(r,a,n,s,o),JXG$1.exists(n.slideobject)?l.makeGlider(n.slideobject):l.baseElement=l,l.isDraggable=!0;else if(JXG$1.isObject(a[0])&&JXG$1.isTransformationOrArray(a[1]))l=new t(r,[0,0],n,s,o),l.addTransform(a[0],a[1]),l.isDraggable=!1;else return!1;return l.handleSnapToGrid(),l.handleSnapToPoints(),l.handleAttractors(),l.addParents(a),l};const CoordsElement=JXG$1.CoordsElement;var priv$5={HTMLSliderInputEventHandler:function(){this._val=parseFloat(this.rendNodeRange.value),this.rendNodeOut.value=this.rendNodeRange.value,this.board.update()}};JXG$1.Text=function(t,r,a,n){var s;this.constructor(t,a,Const.OBJECT_TYPE_TEXT,Const.OBJECT_CLASS_TEXT),this.element=this.board.select(a.anchor),this.coordsConstructor(r,this.evalVisProp("islabel")),this.content="",this.plaintext="",this.plaintextOld=null,this.orgText="",this.needsSizeUpdate=!1,this.hiddenByParent=!1,this.size=[1,1],this.id=this.board.setId(this,"T"),this.board.renderer.drawText(this),this.board.finalizeAdding(this),s=this.visProp.visible,this.visProp.visible=!0,this.setText(n),this.visProp.visible=s,JXG$1.isString(this.content)&&this.notifyParents(this.content),this.elType="text",this.methodMap=JXG$1.deepCopy(this.methodMap,{setText:"setTextJessieCode",move:"setCoords",Size:"getSize",setAutoPosition:"setAutoPosition"})};JXG$1.Text.prototype=new GeometryElement;JXG$1.copyPrototypeMethods(JXG$1.Text,CoordsElement,"coordsConstructor");JXG$1.extend(JXG$1.Text.prototype,{hasPoint:function(t,r){var a,n,s,o,l,u,h,c;return JXG$1.isObject(this.evalVisProp("precision"))?(h=this.board._inputDevice,c=this.evalVisProp("precision."+h)):c=this.board.options.precision.hasPoint,this.transformations.length>0&&(a=Mat.matVecMult(Mat.inverse(this.board.renderer.joinTransforms(this,this.transformations)),[1,t,r]),t=a[1],r=a[2]),l=this.getAnchorX(),l==="right"?a=this.coords.scrCoords[1]-this.size[0]:l==="middle"?a=this.coords.scrCoords[1]-.5*this.size[0]:a=this.coords.scrCoords[1],n=a+this.size[0],u=this.getAnchorY(),u==="top"?o=this.coords.scrCoords[2]+this.size[1]:u==="middle"?o=this.coords.scrCoords[2]+.5*this.size[1]:o=this.coords.scrCoords[2],s=o-this.size[1],this.evalVisProp("dragarea")==="all"?t>=a-c&&t<n+c&&r>=s-c&&r<=o+c:r>=s-c&&r<=o+c&&(t>=a-c&&t<=a+2*c||t>=n-2*c&&t<=n+c)},_createFctUpdateText:function(t){var r,a,n,s,o,l,u=this.evalVisProp("parse"),h=this.evalVisProp("usemathjax"),c=this.evalVisProp("usekatex"),f=!1;if(this.orgText=t,JXG$1.isFunction(t))this.updateText=function(){s=t().toString(),u&&!h&&!c?this.plaintext=this.replaceSub(this.replaceSup(this.convertGeonextAndSketchometry2CSS(s,!1))):this.plaintext=s};else if(JXG$1.isNumber(t)&&this.evalVisProp("formatnumber")?this.evalVisProp("tofraction")?h?this.content="\\("+JXG$1.toFraction(t,!0)+"\\)":this.content=JXG$1.toFraction(t,c):(n=this.evalVisProp("digits"),this.useLocale()?this.content=this.formatNumberLocale(t,n):this.content=JXG$1.toFixed(t,n)):JXG$1.isString(t)&&u?(this.evalVisProp("useasciimathml")?this.content="'`"+t+"`'":h||c?(this.content=this.valueTagToJessieCode(t),JXG$1.isArray(this.content)||(this.content=this.content.replace(/\\/g,"\\\\"))):this.content=this.poorMansTeX(this.valueTagToJessieCode(t)),f=!0):this.content=t,f){if(JXG$1.isArray(this.content)){for(l=this,o=0;o<this.content.length;o++)if(this.content[o][0]!=='"'){this.content[o]=this.board.jc.snippet(this.content[o],!0,"",!1);for(a in this.content[o].deps)this.addParents(this.content[o].deps[a]),this.content[o].deps[a].addChild(this)}r=function(){var d,p,v=l.evalVisProp("digits"),y="";for(d=0;d<l.content.length;d++)JXG$1.isFunction(l.content[d])?(p=l.content[d](),l.useLocale()?p=l.formatNumberLocale(p,v):p=JXG$1.toFixed(p,v)):(p=l.content[d],p[0]==='"'&&p[p.length-1]==='"'&&(p=p.slice(1,-1))),y+=p;return y}}else{r=this.board.jc.snippet(this.content,!0,"",!1);for(a in r.deps)this.addParents(r.deps[a]),r.deps[a].addChild(this)}this.updateText=function(){this.plaintext=this.unescapeTicks(r())}}else this.updateText=function(){this.plaintext=this.content}},_setText:function(t){return this._createFctUpdateText(t),this.updateText(),this.fullUpdate(),(!this.board.infobox||this.id!==this.board.infobox.id)&&this.updateSize(),this},setTextJessieCode:function(t){var r;return this.visProp.castext=t,JXG$1.isFunction(t)?r=function(){return JXG$1.sanitizeHTML(t())}:JXG$1.isNumber(t)?r=t:r=JXG$1.sanitizeHTML(t),this._setText(r)},setText:function(t){return this._setText(t)},updateSize:function(){var t,r,a,n=this.evalVisProp("display");return!JXG$1.isBrowser||this.board.renderer.type==="no"?this:(a=this.rendNode,n==="html"||this.board.renderer.type==="vml"?JXG$1.exists(a.offsetWidth)?(r=this,window.setTimeout(function(){r.size=[a.offsetWidth,a.offsetHeight],r.needsUpdate=!0,r.updateRenderer()},0)):this.size=this.crudeSizeEstimate():n==="internal"&&(this.board.renderer.type==="svg"?(r=this,window.setTimeout(function(){try{t=a.getBBox(),r.size=[t.width,t.height],r.needsUpdate=!0,r.updateRenderer()}catch{}},0)):this.board.renderer.type==="canvas"&&(this.size=this.crudeSizeEstimate())),this)},crudeSizeEstimate:function(){var t=parseFloat(this.evalVisProp("fontsize"));return[t*this.plaintext.length*.45,t*.9]},utf8_decode:function(t){return t.replace(/&#x(\w+);/g,function(r,a){return String.fromCharCode(parseInt(a,16))})},replaceSub:function(t){if(!t.indexOf)return t;for(var r,a=t.indexOf("_{");a>=0;)t=t.slice(0,a)+t.slice(a).replace(/_\{/,"<sub>"),r=t.indexOf("}",a+4),r>=0&&(t=t.slice(0,r)+t.slice(r).replace(/\}/,"</sub>")),a=t.indexOf("_{");for(a=t.indexOf("_");a>=0;)t=t.slice(0,a)+t.slice(a).replace(/_(.?)/,"<sub>$1</sub>"),a=t.indexOf("_");return t},replaceSup:function(t){if(!t.indexOf)return t;for(var r,a=t.indexOf("^{");a>=0;)t=t.slice(0,a)+t.slice(a).replace(/\^\{/,"<sup>"),r=t.indexOf("}",a+4),r>=0&&(t=t.slice(0,r)+t.slice(r).replace(/\}/,"</sup>")),a=t.indexOf("^{");for(a=t.indexOf("^");a>=0;)t=t.slice(0,a)+t.slice(a).replace(/\^(.?)/,"<sup>$1</sup>"),a=t.indexOf("^");return t},getSize:function(){return this.size},setCoords:function(t,r){var a,n,s;return JXG$1.isArray(t)&&t.length>1&&(r=t[1],t=t[0]),this.evalVisProp("islabel")&&JXG$1.exists(this.element)?(a=this.element.getLabelAnchor(),n=(t-a.usrCoords[1])*this.board.unitX,s=-(r-a.usrCoords[2])*this.board.unitY,this.relativeCoords.setCoordinates(Const.COORDS_BY_SCREEN,[n,s])):this.coords.setCoordinates(Const.COORDS_BY_USER,[t,r]),this.fullUpdate(),this},update:function(t){return this.needsUpdate?(this.updateCoords(t),this.updateText(),this.evalVisProp("display")==="internal"&&JXG$1.isString(this.plaintext)&&(this.plaintext=this.utf8_decode(this.plaintext)),this.checkForSizeUpdate(),this.needsSizeUpdate&&this.updateSize(),this):this},checkForSizeUpdate:function(){this.board.infobox&&this.id===this.board.infobox.id?this.needsSizeUpdate=!1:(this.needsSizeUpdate=this.plaintextOld!==this.plaintext,this.needsSizeUpdate&&(this.plaintextOld=this.plaintext))},updateRenderer:function(){return this.evalVisProp("autoposition")&&this.setAutoPosition().updateConstraint(),this.updateRendererGeneric("updateText")},expandShortMath:function(t){var r=/([)0-9.])\s*([(a-zA-Z_])/g;return t.replace(r,"$1*$2")},generateTerm:function(t,r,a){var n,s,o,l,u='""';if(t=t||"",t=t.replace(/\r/g,""),t=t.replace(/\n/g,""),t=t.replace(/"/g,"'"),t=t.replace(/'/g,"\\'"),t=t.replace(/&amp;arc;/g,"&ang;"),t=t.replace(/<arc\s*\/>/g,"&ang;"),t=t.replace(/&lt;arc\s*\/&gt;/g,"&ang;"),t=t.replace(/&lt;sqrt\s*\/&gt;/g,"&radic;"),t=t.replace(/&lt;value&gt;/g,"<value>"),t=t.replace(/&lt;\/value&gt;/g,"</value>"),o=t.indexOf("<value>"),l=t.indexOf("</value>"),o>=0)for(;o>=0;)u+=' + "'+this.replaceSub(this.replaceSup(t.slice(0,o)))+'"',s=t.slice(o+7,l),s=s.replace(/\s+/g,""),r===!0&&(s=this.expandShortMath(s)),a?n=s:n=GeonextParser.geonext2JS(s,this.board),n=n.replace(/\\"/g,"'"),n=n.replace(/\\'/g,"'"),n.indexOf("toFixed")<0&&JXG$1.isNumber(JXG$1.bind(this.board.jc.snippet(n,!0,"",!1),this)())?u+="+("+n+").toFixed("+this.evalVisProp("digits")+")":u+="+("+n+")",t=t.slice(l+8),o=t.indexOf("<value>"),l=t.indexOf("</value>");return u+=' + "'+this.replaceSub(this.replaceSup(t))+'"',u=this.convertGeonextAndSketchometry2CSS(u),u=u.replace(/&amp;/g,"&"),u=u.replace(/"/g,"'"),u},valueTagToJessieCode:function(t){var r,a,n,s,o=[],l='"';if(t=t||"",t=t.replace(/\r/g,""),t=t.replace(/\n/g,""),t=t.replace(/&lt;value&gt;/g,"<value>"),t=t.replace(/&lt;\/value&gt;/g,"</value>"),n=t.indexOf("<value>"),s=t.indexOf("</value>"),n>=0)for(;n>=0;)o.push(l+this.escapeTicks(t.slice(0,n))+l),a=t.slice(n+7,s),a=a.replace(/\s+/g,""),a=this.expandShortMath(a),r=a,r=r.replace(/\\"/g,"'").replace(/\\'/g,"'"),o.push("("+r+")"),t=t.slice(s+8),n=t.indexOf("<value>"),s=t.indexOf("</value>");for(o.push(l+this.escapeTicks(t)+l),n=0;n<o.length;n++)o[n]=o[n].replace(/&amp;/g,"&");return o},poorMansTeX:function(t){var r,a;if(JXG$1.isArray(t)){for(a=[],r=0;r<t.length;r++)a.push(this.poorMansTeX(t[r]));return a}return t=t.replace(/<arc\s*\/*>/g,"&ang;").replace(/&lt;arc\s*\/*&gt;/g,"&ang;").replace(/<sqrt\s*\/*>/g,"&radic;").replace(/&lt;sqrt\s*\/*&gt;/g,"&radic;"),this.convertGeonextAndSketchometry2CSS(this.replaceSub(this.replaceSup(t)),!0)},escapeTicks:function(t){return t.replace(/"/g,"%22").replace(/'/g,"%27")},unescapeTicks:function(t){return t.replace(/%22/g,'"').replace(/%27/g,"'")},convertGeonext2CSS:function(t){return JXG$1.isString(t)&&(t=t.replace(/(<|&lt;)overline(>|&gt;)/g,"<span style=text-decoration:overline;>"),t=t.replace(/(<|&lt;)\/overline(>|&gt;)/g,"</span>"),t=t.replace(/(<|&lt;)arrow(>|&gt;)/g,"<span style=text-decoration:overline;>"),t=t.replace(/(<|&lt;)\/arrow(>|&gt;)/g,"</span>")),t},convertSketchometry2CSS:function(t,r){var a='<span class="sketcho sketcho-inherit sketcho-',n='"></span>';return JXG$1.isString(t)&&(r&&(a=this.escapeTicks(a),n=this.escapeTicks(n)),t=t.replace(/(<|&lt;)sketchofont(>|&gt;)/g,a),t=t.replace(/(<|&lt;)\/sketchofont(>|&gt;)/g,n)),t},convertGeonextAndSketchometry2CSS:function(t,r){return t=this.convertGeonext2CSS(t),t=this.convertSketchometry2CSS(t,r),t},notifyParents:function(t){var r,a=null;t=t.replace(/&lt;value&gt;/g,"<value>"),t=t.replace(/&lt;\/value&gt;/g,"</value>");do r=/<value>([\w\s*/^\-+()[\],<>=!]+)<\/value>/,a=r.exec(t),a!==null&&(GeonextParser.findDependencies(this,a[1],this.board),t=t.slice(a.index),t=t.replace(r,""));while(a!==null);return this},getParents:function(){var t;return this.relativeCoords!==void 0?t=[this.relativeCoords.usrCoords[1],this.relativeCoords.usrCoords[2],this.orgText]:t=[this.Z(),this.X(),this.Y(),this.orgText],this.parents.length!==0&&(t=this.parents),t},bounds:function(){var t=this.coords.usrCoords;return this.evalVisProp("islabel")||this.board.unitY===0||this.board.unitX===0?[0,0,0,0]:[t[1],t[2]+this.size[1]/this.board.unitY,t[1]+this.size[0]/this.board.unitX,t[2]]},getAnchorX:function(){var t=this.evalVisProp("anchorx");if(t==="auto")switch(this.visProp.position){case"top":case"bot":return"middle";case"rt":case"lrt":case"urt":return"left";default:return"right"}return t},getAnchorY:function(){var t=this.evalVisProp("anchory");if(t==="auto")switch(this.visProp.position){case"top":case"ulft":case"urt":return"bottom";case"bot":case"lrt":case"llft":return"top";default:return"middle"}return t},getNumberOfConflicts:function(t,r,a,n,s){s=s||[];var o=0,l,u,h,c,f=this.board.options.precision.hasPoint,d,p,v,y;for(this.board.options.precision.hasPoint=(a+n)*.3,l=0;l<this.board.objectsList.length;l++)u=this.board.objectsList[l],u.visPropCalc.visible&&u!==this&&s.indexOf(u.id)===-1&&u.evalVisProp("ignoreforlabelautoposition")!==!0&&(c=u.visProp.hasinnerpoints,u.visProp.hasinnerpoints=!1,u.visProp.islabel||u.elementClass===Const.OBJECT_CLASS_POINT?(h=u.coords.scrCoords,d=h[1],p=h[2],v=u.size[0],y=u.size[1],u.visProp.islabel?(u.visProp.anchory==="top"?p=p+y/2:p=p-y/2,u.visProp.anchorx==="left"?d=d+v/2:d=d-v/2):(v=0,y=0),Math.abs(d-t)<(a+v)/2&&Math.abs(p-r)<(n+y)/2&&o++):u.hasPoint(t,r)&&o++,u.visProp.hasinnerpoints=c);return this.board.options.precision.hasPoint=f,o},calculateScore:function(t,r){var a,n,s,o,l,u,h=0,c=[0,0],f=this.getSize()[0],d=this.getSize()[1],p,v=this.evalVisProp("offset"),y=this.board.getBoundingBox();if(this.evalVisProp("islabel")&&JXG$1.exists(this.element))p=this.element.getLabelAnchor().scrCoords;else return 0;return s=Math.cos(r),o=Math.sin(r),a=p[1]+t*s,n=p[2]-t*o,s<0?(c[0]=a-f,a-=f/2):(c[0]=a+f,a+=f/2),o<0?(c[1]=n+d,n+=d/2):(c[1]=n-d,n-=d/2),(c[0]<0||c[0]>(y[2]-y[0])*this.board.unitX||c[1]<0||c[1]>(y[1]-y[3])*this.board.unitY)&&(h-=1),h-=this.getNumberOfConflicts(a,n,f,d,JXG$1.evaluate(this.visProp.autopositionwhitelist)),h-=t/this.evalVisProp("autopositionmindistance")/10-.1,l=Math.atan2(v[1],v[0]),l<0&&(l+=2*Math.PI),s>0&&Math.cos(l)>0&&Math.abs(r-l)>Math.PI?u=Math.abs(r-l-2*Math.PI):u=Math.abs(r-l),h-=u/10,h},setAutoPosition:function(){var t,r,a,n,s=-1/0,o,l,u=this.evalVisProp("autopositionmindistance"),h=this.evalVisProp("autopositionmaxdistance"),c,f,d,p=this.evalVisProp("offset"),v,y,b=60,_=4;if(this===this.board.infobox||!this.element||!this.visPropCalc.visible||!this.evalVisProp("islabel"))return this;if(v=Math.sqrt(p[0]*p[0]+p[1]*p[1]),y=Math.atan2(p[1],p[0]),this.calculateScore(v,y)===0)return this;for(t=u,a=(h-u)/(_-1);h-t>-.01;){for(n=0;n<b;n++)if(r=n/b*2*Math.PI,c=this.calculateScore(t,r),c>s&&(l=r,o=t,s=c),s===0){t=h;break}t+=a}return f=Math.cos(l),d=Math.sin(l),f<0?this.visProp.anchorx="right":this.visProp.anchorx="left",d<0?this.visProp.anchory="top":this.visProp.anchory="bottom",this.visProp.offset=[o*f,o*d],this}});JXG$1.createText=function(t,r,a){var n,s=JXG$1.copyAttributes(a,t.options,"text"),o=r.slice(0,-1),l=r[r.length-1];if(s.anchor=s.parent||s.anchor,n=CoordsElement.create(JXG$1.Text,t,o,s,l),!n)throw new Error("JSXGraph: Can't create text with parent types '"+typeof r[0]+"' and '"+typeof r[1]+`'.
Possible parent types: [x,y], [z,x,y], [element,transformation]`);return s.rotate!==0&&n.addRotation(s.rotate),n};JXG$1.registerElement("text",JXG$1.createText);JXG$1.createHTMLSlider=function(t,r,a){var n,s,o=JXG$1.copyAttributes(a,t.options,"htmlslider");if(r.length!==2||r[0].length!==2||r[1].length!==3)throw new Error("JSXGraph: Can't create htmlslider with parent types '"+typeof r[0]+"' and '"+typeof r[1]+`'.
Possible parents are: [[x,y], [min, start, max]]`);o.anchor=o.parent||o.anchor,o.fixed=o.fixed||!0,s=[r[0][0],r[0][1],'<form style="display:inline"><input type="range" /><span></span><input type="text" /></form>'],n=JXG$1.createText(t,s,o),n.type=JXG$1.OBJECT_TYPE_HTMLSLIDER,n.rendNodeForm=n.rendNode.childNodes[0],n.rendNodeRange=n.rendNodeForm.childNodes[0],n.rendNodeRange.min=r[1][0],n.rendNodeRange.max=r[1][2],n.rendNodeRange.step=o.step,n.rendNodeRange.value=r[1][1],n.rendNodeLabel=n.rendNodeForm.childNodes[1],n.rendNodeLabel.id=n.rendNode.id+"_label",o.withlabel&&(n.rendNodeLabel.innerText=n.name+"="),n.rendNodeOut=n.rendNodeForm.childNodes[2],n.rendNodeOut.value=r[1][1];try{n.rendNodeForm.id=n.rendNode.id+"_form",n.rendNodeRange.id=n.rendNode.id+"_range",n.rendNodeOut.id=n.rendNode.id+"_out"}catch(l){JXG$1.debug(l)}return n.rendNodeRange.style.width=o.widthrange+"px",n.rendNodeRange.style.verticalAlign="middle",n.rendNodeOut.style.width=o.widthout+"px",n._val=r[1][1],JXG$1.supportsVML()?JXG$1.addEvent(n.rendNodeForm,"change",priv$5.HTMLSliderInputEventHandler,n):JXG$1.addEvent(n.rendNodeForm,"input",priv$5.HTMLSliderInputEventHandler,n),n.Value=function(){return this._val},n};JXG$1.registerElement("htmlslider",JXG$1.createHTMLSlider);const Text=JXG$1.Text;Object.create||(Object.create=function(t,r){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object prototype may only be an Object: "+t);if(t===null)throw new Error("This browser's implementation of Object.create is a shim and doesn't support 'null' as the first argument.");if(typeof r<"u")throw new Error("This browser's implementation of Object.create is a shim and doesn't support a second argument.");function a(){}return a.prototype=t,new a});var priv$4={modules:{math:Mat,"math/geometry":Geometry,"math/statistics":Stat,"math/numerics":Mat.Numerics}};JXG$1.JessieCode=function(t,r){this.scope={id:0,hasChild:!0,args:[],locals:{},context:null,previous:null},this.scopes=[],this.scopes.push(this.scope),this.dpstack=[[]],this.pscope=0,this.propstack=[{}],this.propscope=0,this.lhs=[],this.isLHS=!1,this.warnLog="jcwarn",this.$log=[],this.builtIn=this.defineBuiltIn(),this.operands=this.getPossibleOperands(),this.board=null,this.forceValueCall=!1,this.lineToElement={},this.parCurLine=1,this.parCurColumn=0,this.line=1,this.col=1,JXG$1.CA&&(this.CA=new JXG$1.CA(this.node,this.createNode,this)),JXG$1.CAS&&(this.CAS=new JXG$1.CAS(this.node,this.createNode,this)),this.code="",typeof t=="string"&&this.parse(t,r)};JXG$1.extend(JXG$1.JessieCode.prototype,{node:function(t,r,a){return{type:t,value:r,children:a}},createNode:function(t,r,a){var n=this.node(t,r,[]),s;for(s=2;s<arguments.length;s++)n.children.push(arguments[s]);return n.type==="node_const"&&JXG$1.isNumber(n.value)&&(n.isMath=!0),n.line=this.parCurLine,n.col=this.parCurColumn,n},pushScope:function(t){var r={args:t,locals:{},context:null,previous:this.scope};return this.scope.hasChild=!0,this.scope=r,r.id=this.scopes.push(r)-1,r},popScope:function(){var t=this.scope.previous;return this.scope=t!==null?t:this.scope,this.scope},getElementById:function(t){return this.board.objects[t]},log:function(){this.$log.push(arguments),typeof console=="object"&&console.log&&console.log.apply(console,arguments)},creator:(function(){var t={},r;return r=function(a){var n;return typeof t[this.board.id+a]=="function"?n=t[this.board.id+a]:(n=(function(s){return function(o,l){var u;return JXG$1.exists(l)?u=l:u={},u.name===void 0&&u.id===void 0&&(u.name=s.lhs[s.scope.id]!==0?s.lhs[s.scope.id]:""),s.board.create(a,o,u)}})(this),n.creator=!0,t[this.board.id+a]=n),n},r.clearCache=function(){t={}},r})(),letvar:function(t,r){this.builtIn[t]&&this._warn('"'+t+'" is a predefined value.'),this.scope.locals[t]=r},isLocalVariable:function(t){for(var r=this.scope;r!==null;){if(JXG$1.exists(r.locals[t]))return r;r=r.previous}return null},isParameter:function(t){for(var r=this.scope;r!==null;){if(JXG$1.indexOf(r.args,t)>-1)return r;r=r.previous}return null},isCreator:function(t){return!!JXG$1.elements[t]},isMathMethod:function(t){return t!=="E"&&!!Math[t]},isBuiltIn:function(t){return!!this.builtIn[t]},getvar:function(t,r,a){var n;if(r=JXG$1.def(r,!1),n=this.isLocalVariable(t),n!==null)return n.locals[t];if(t==="$board"||t==="EULER"||t==="PI")return this.builtIn[t];if(a){if(this.isBuiltIn(t))return this.builtIn[t];if(this.isMathMethod(t))return Math[t];if(this.isCreator(t))return this.creator(t)}if(!r&&(n=this.board.select(t),n!==t))return n},resolve:function(t){for(var r=this.scope;r!==null;){if(JXG$1.exists(r.locals[t]))return r.locals[t];r=r.previous}},getvarJS:function(t,r,a){var n,s="",o;return r=JXG$1.def(r,!1),a=JXG$1.def(a,!1),n=this.isParameter(t),n!==null?t:(n=this.isLocalVariable(t),n!==null&&!a?"$jc$.resolve('"+t+"')":this.isCreator(t)?"(function () { var a = Array.prototype.slice.call(arguments, 0), props = "+(a?"a.pop()":"{}")+"; return $jc$.board.create.apply($jc$.board, ['"+t+"'].concat([a, props])); })":(a&&this._error("Syntax error (attribute values are allowed with element creators only)"),this.isBuiltIn(t)?(s=this.builtIn[t].src||this.builtIn[t],JXG$1.isNumber(s)||s.match(/board\.select/)?s:(t=s.split(".").pop(),JXG$1.exists(this.board.mathLib)&&(o=new RegExp("^Math."+t),o.exec(s)!==null)?s.replace(o,"$jc$.board.mathLib."+t):JXG$1.exists(this.board.mathLibJXG)?(o=new RegExp("^JXG.Math."),o.exec(s)!==null?s.replace(o,"$jc$.board.mathLibJXG."):s):s)):this.isMathMethod(t)?"$jc$.board.mathLib."+t:r?"":(JXG$1.isId(this.board,t)?(s="$jc$.board.objects['"+t+"']",this.board.objects[t].elType==="slider"&&(s+=".Value()")):JXG$1.isName(this.board,t)?(s="$jc$.board.elementsByName['"+t+"']",this.board.elementsByName[t].elType==="slider"&&(s+=".Value()")):JXG$1.isGroup(this.board,t)&&(s="$jc$.board.groups['"+t+"']"),s)))},makeMap:function(t){return t.isMap=!0,t},functionCodeJS:function(t){var r=t.children[0].join(", "),a="",n="";return t.value==="op_map"&&(a="{ return  ",n=" }"),"function ("+r+`) {
var $oldscope$ = $jc$.scope;
$jc$.scope = $jc$.scopes[`+this.scope.id+`];
var r = (function () `+a+this.compile(t.children[1],!0)+n+`)();
$jc$.scope = $oldscope$;
return r;
}`},defineFunction:function(node){var fun,i,that=this,list=node.children[0],scope=this.pushScope(list);if(this.board.options.jc.compile){for(this.isLHS=!1,i=0;i<list.length;i++)scope.locals[list[i]]=list[i];this.replaceNames(node.children[1]),fun=(function(jc){var fun,str="var f = function($jc$) { return "+jc.functionCodeJS(node)+"}; f;";try{for(fun=eval(str)(jc),scope.argtypes=[],i=0;i<list.length;i++)scope.argtypes.push(that.resolveType(list[i],node));return fun}catch(t){return jc._warn(`error compiling function

`+str+`

`+t.toString()),function(){}}})(this),this.popScope()}else fun=(function(t,r,a){return function(){var n,s;for(s=r.scope,r.scope=r.scopes[a],n=0;n<t.length;n++)r.scope.locals[t[n]]=arguments[n];return n=r.execute(node.children[1]),r.scope=s,n}})(list,this,scope.id);return fun.node=node,fun.scope=scope,fun.toJS=fun.toString,fun.toString=(function(t){return function(){return t.compile(t.replaceIDs(JXG$1.deepCopy(node)))}})(this),fun.deps={},this.collectDependencies(node.children[1],node.children[0],fun.deps),fun},mergeAttributes:function(t){var r,a={};for(r=0;r<arguments.length;r++)a=JXG$1.deepCopy(a,arguments[r],!0);return a},setProp:function(t,r,a){var n={},s,o;t.elementClass===Const.OBJECT_CLASS_POINT&&(r==="X"||r==="Y")?(r=r.toLowerCase(),t.isDraggable&&typeof a=="number"?(s=r==="x"?a:t.X(),o=r==="y"?a:t.Y(),t.setPosition(Const.COORDS_BY_USER,[s,o])):t.isDraggable&&(typeof a=="function"||typeof a=="string")?(s=r==="x"?a:t.coords.usrCoords[1],o=r==="y"?a:t.coords.usrCoords[2],t.addConstraint([s,o])):t.isDraggable||(s=r==="x"?a:t.XEval.origin,o=r==="y"?a:t.YEval.origin,t.addConstraint([s,o])),this.board.update()):t.elementClass===Const.OBJECT_CLASS_TEXT&&(r==="X"||r==="Y")?(typeof a=="number"?t[r]=function(){return a}:typeof a=="function"?(t.isDraggable=!1,t[r]=a):typeof a=="string"&&(t.isDraggable=!1,t[r]=JXG$1.createFunction(a,this.board),t[r+"jc"]=a),t[r].origin=a,this.board.update()):t.type&&t.elementClass&&t.visProp?JXG$1.exists(t[t.methodMap[r]])&&typeof t[t.methodMap[r]]!="function"?t[t.methodMap[r]]=a:(n[r]=a,t.setAttribute(n)):t[r]=a},_genericParse:function(t,r,a,n){var s,o,l,u,h=t.replace(/\r\n/g,`
`).split(`
`),c={},f=[];n||(this.code+=t+`
`),Text&&(o=Text.prototype.setText,Text.prototype.setText=Text.prototype.setTextJessieCode);try{for(JXG$1.exists(a)||(a=!1),s=0;s<h.length;s++)a&&(h[s]=JXG$1.GeonextParser.geonext2JS(h[s],this.board)),f.push(h[s]);switch(t=f.join(`
`),l=parser.parse(t),this.CA&&(l=this.CA.expandDerivatives(l,null,l),l=this.CA.removeTrivialNodes(l)),this.CAS&&(l=this.CAS.expandDerivatives(l,null,l)),r){case"parse":u=this.execute(l);break;case"manipulate":u=this.compile(l);break;case"simplify":JXG$1.exists(this.CAS)?(c.method=c.method||"strong",c.form=c.form||"fractions",c.steps=c.steps||[],c.iterations=c.iterations||1e3,l=this.CAS.simplify(l,c),u=this.CAS.compile(l)):u=this.compile(l);break;case"getAst":u=l;break;default:u=!1}}catch(d){throw d}finally{Text&&(Text.prototype.setText=o)}return u},parse:function(t,r,a){return this._genericParse(t,"parse",r,a)},manipulate:function(t,r,a){return this._genericParse(t,"manipulate",r,a)},simplify:function(t){return this._genericParse(t,"simplify")},getAST:function(t,r,a){return this._genericParse(t,"getAst",r,a)},snippet:function(t,r,a,n,s){var o;return r=JXG$1.def(r,!0),a=JXG$1.def(a,""),n=JXG$1.def(n,!1),this.forceValueCall=JXG$1.def(s,!0),o=(r?" function ("+a+") { return ":"")+t+(r?"; }":"")+";",this.parse(o,n,!0)},replaceIDs:function(t){var r,a;if(t.replaced&&(a=this.board.objects[t.children[1][0].value],JXG$1.exists(a)&&a.name!==""&&(t.type="node_var",t.value=a.name,t.children.length=0,delete t.replaced)),JXG$1.isArray(t))for(r=0;r<t.length;r++)t[r]=this.replaceIDs(t[r]);if(t.children)for(r=t.children.length;r>0;r--)JXG$1.exists(t.children[r-1])&&(t.children[r-1]=this.replaceIDs(t.children[r-1]));return t},replaceNames:function(t,r){var a,n,s=!1;if(r!==void 0&&(s=r),n=t.value,t.type==="node_op"&&n==="op_lhs"&&t.children.length===1?this.isLHS=!0:t.type==="node_var"&&(this.isLHS?this.letvar(n,!0):!JXG$1.exists(this.getvar(n,!0))&&JXG$1.exists(this.board.elementsByName[n])&&(s&&this.board.elementsByName[n].elType!=="slider"&&(s=!1),t=this.createReplacementNode(t,s))),JXG$1.isArray(t))for(a=0;a<t.length;a++)t[a]=this.replaceNames(t[a],s);if(t.children)for(this.forceValueCall&&(t.value==="op_execfun"&&t.children[0].value!=="V"&&t.children[0].value!=="$"&&(JXG$1.exists(Math[t.children[0].value])||JXG$1.exists(Mat[t.children[0].value]))&&t.children[1][0].type==="node_var"||t.value==="op_return"&&t.children.length===1&&t.children[0].type==="node_var")&&(s=!0),a=t.children.length;a>0;a--)JXG$1.exists(t.children[a-1])&&(t.children[a-1]=this.replaceNames(t.children[a-1],s));return t.type==="node_op"&&t.value==="op_lhs"&&t.children.length===1&&(this.isLHS=!1),t},createReplacementNode:function(t,r){var a=t.value,n=this.board.elementsByName[a];return t=this.createNode("node_op","op_execfun",this.createNode("node_var",r===!0?"$value":"$"),[this.createNode("node_str",n.id)]),t.replaced=!0,t},collectDependencies:function(t,r,a){var n,s,o,l;if(JXG$1.isArray(t)){for(l=t.length,n=0;n<l;n++)this.collectDependencies(t[n],r,a);return}if(s=t.value,t.type==="node_var"&&r.indexOf(s)<0&&(o=this.getvar(s),o&&o.visProp&&o.elType&&o.elementClass&&o.id&&(a[o.id]=o)),t.type==="node_op"&&t.value==="op_execfun"&&t.children.length>1&&(t.children[0].value==="$"||t.children[0].value==="$value")&&t.children[1].length>0&&(o=t.children[1][0].value,a[o]=this.board.objects[o]),t.children)for(n=t.children.length;n>0;n--)JXG$1.exists(t.children[n-1])&&this.collectDependencies(t.children[n-1],r,a)},resolveProperty:function(t,r,a){return a=JXG$1.def(a,!1),t&&t.methodMap&&(JXG$1.exists(t.subs)&&JXG$1.exists(t.subs[r])?t=t.subs:JXG$1.exists(t.methodMap[r])?r=t.methodMap[r]:(t=t.visProp,r=r.toLowerCase())),JXG$1.isFunction(t)&&this._error("Accessing function properties is not allowed."),JXG$1.exists(t)||this._error(t+" is not an object"),JXG$1.exists(t[r])||this._error("unknown property "+r),a&&typeof t[r]=="function"?function(){return t[r].apply(t,arguments)}:t[r]},resolveType:function(t,r){var a,n,s="any";if(JXG$1.isArray(r)){for(a=0;a<r.length;a++)if(n=this.resolveType(t,r[a]),n!=="any")return s=n,s}if(r.type==="node_op"&&r.value==="op_execfun"&&r.children[0].type==="node_var"&&r.children[0].value===t)return"function";if(r.type==="node_op"){for(a=0;a<r.children.length;a++)if(r.children[0].type==="node_var"&&r.children[0].value===t&&(r.value==="op_add"||r.value==="op_sub"||r.value==="op_mul"||r.value==="op_div"||r.value==="op_mod"||r.value==="op_exp"||r.value==="op_neg"))return"any";for(a=0;a<r.children.length;a++)if(n=this.resolveType(t,r.children[a]),n!=="any")return s=n,s}return"any"},getLHS:function(t){var r;if(t.type==="node_var")r={o:this.scope.locals,what:t.value};else if(t.type==="node_op"&&t.value==="op_property")r={o:this.execute(t.children[0]),what:t.children[1]};else if(t.type==="node_op"&&t.value==="op_extvalue")r={o:this.execute(t.children[0]),what:this.execute(t.children[1])};else throw new Error("Syntax error: Invalid left-hand side of assignment.");return r},getLHSCompiler:function(t,r){var a;if(t.type==="node_var")a=t.value;else if(t.type==="node_op"&&t.value==="op_property")a=[this.compile(t.children[0],r),"'"+t.children[1]+"'"];else if(t.type==="node_op"&&t.value==="op_extvalue")a=[this.compile(t.children[0],r),t.children[1].type==="node_const"?t.children[1].value:this.compile(t.children[1],r)];else throw new Error("Syntax error: Invalid left-hand side of assignment.");return a},execute:function(t){var r,a,n,s,o,l,u,h,c=[],f,d,p;if(r=0,!t)return r;switch(this.line=t.line,this.col=t.col,t.type){case"node_op":switch(t.value){case"op_none":t.children[0]&&this.execute(t.children[0]),t.children[1]&&(r=this.execute(t.children[1]));break;case"op_assign":a=this.getLHS(t.children[0]),this.lhs[this.scope.id]=a.what,a.o.type&&a.o.elementClass&&a.o.methodMap&&a.what==="label"&&this._error("Left-hand side of assignment is read-only."),r=this.execute(t.children[1]),a.o!==this.scope.locals||JXG$1.isArray(a.o)&&typeof a.what=="number"?this.setProp(a.o,a.what,r):this.letvar(a.what,r),this.lhs[this.scope.id]=0;break;case"op_if":this.execute(t.children[0])&&(r=this.execute(t.children[1]));break;case"op_conditional":case"op_if_else":this.execute(t.children[0])?r=this.execute(t.children[1]):r=this.execute(t.children[2]);break;case"op_while":for(;this.execute(t.children[0]);)this.execute(t.children[1]);break;case"op_do":do this.execute(t.children[0]);while(this.execute(t.children[1]));break;case"op_for":for(this.execute(t.children[0]);this.execute(t.children[1]);this.execute(t.children[2]))this.execute(t.children[3]);break;case"op_proplst":t.children[0]&&this.execute(t.children[0]),t.children[1]&&this.execute(t.children[1]);break;case"op_emptyobject":r={};break;case"op_proplst_val":this.propstack.push({}),this.propscope++,this.execute(t.children[0]),r=this.propstack[this.propscope],this.propstack.pop(),this.propscope--;break;case"op_prop":this.propstack[this.propscope][t.children[0]]=this.execute(t.children[1]);break;case"op_array":for(r=[],o=t.children[0].length,n=0;n<o;n++)r.push(this.execute(t.children[0][n]));break;case"op_extvalue":r=this.execute(t.children[0]),n=this.execute(t.children[1]),typeof n=="number"&&Math.abs(Math.round(n)-n)<1e-12?r=r[n]:r=l;break;case"op_return":if(this.scope===0)this._error("Unexpected return.");else return this.execute(t.children[0]);break;case"op_map":!t.children[1].isMath&&t.children[1].type!=="node_var"&&this._error("execute: In a map only function calls and mathematical expressions are allowed."),f=this.defineFunction(t),f.isMap=!0,r=f;break;case"op_function":f=this.defineFunction(t),f.isMap=!1,r=f;break;case"op_execfun":if(this.dpstack.push([]),this.pscope++,u=t.children[1],JXG$1.exists(t.children[2]))if(t.children[3])for(h=t.children[2],d={},n=0;n<h.length;n++)d=JXG$1.deepCopy(d,this.execute(h[n]),!0);else d=this.execute(t.children[2]);for(t.children[0]._isFunctionName=!0,f=this.execute(t.children[0]),delete t.children[0]._isFunctionName,JXG$1.exists(f)&&JXG$1.exists(f.sc)?p=f.sc:p=this,!f.creator&&JXG$1.exists(t.children[2])&&this._error("Unexpected value. Only element creators are allowed to have a value after the function call."),n=0;n<u.length;n++)JXG$1.exists(f.scope)&&JXG$1.exists(f.scope.argtypes)&&f.scope.argtypes[n]==="function"?(u[n]._isFunctionName=!0,c[n]=this.execute(u[n]),delete u[n]._isFunctionName):c[n]=this.execute(u[n]),this.dpstack[this.pscope].push({line:t.children[1][n].line,col:t.children[1][n].ecol});if(typeof f=="function"&&!f.creator)r=f.apply(p,c);else if(typeof f=="function"&&f.creator){s=this.line;try{for(r=f(c,d),r.jcLineStart=s,r.jcLineEnd=t.eline,n=s;n<=t.line;n++)this.lineToElement[n]=r;r.debugParents=this.dpstack[this.pscope]}catch(v){this._error(v.toString())}}else this._error("Function '"+f+"' is undefined.");this.dpstack.pop(),this.pscope--;break;case"op_property":s=this.execute(t.children[0]),a=t.children[1],r=this.resolveProperty(s,a,!1),JXG$1.exists(r)&&["number","string","boolean"].indexOf(typeof r)<0&&(r.sc=s);break;case"op_use":this._warn("Use of the 'use' operator is deprecated."),this.use(t.children[0].toString());break;case"op_delete":this._warn("Use of the 'delete' operator is deprecated. Please use the remove() function."),a=this.getvar(t.children[0]),r=this.del(a);break;case"op_eq":r=this.execute(t.children[0])==this.execute(t.children[1]);break;case"op_neq":r=this.execute(t.children[0])!=this.execute(t.children[1]);break;case"op_approx":r=Math.abs(this.execute(t.children[0])-this.execute(t.children[1]))<Mat.eps;break;case"op_gt":r=this.execute(t.children[0])>this.execute(t.children[1]);break;case"op_lt":r=this.execute(t.children[0])<this.execute(t.children[1]);break;case"op_geq":r=this.execute(t.children[0])>=this.execute(t.children[1]);break;case"op_leq":r=this.execute(t.children[0])<=this.execute(t.children[1]);break;case"op_or":r=this.execute(t.children[0])||this.execute(t.children[1]);break;case"op_and":r=this.execute(t.children[0])&&this.execute(t.children[1]);break;case"op_not":r=!this.execute(t.children[0]);break;case"op_add":r=this.add(this.execute(t.children[0]),this.execute(t.children[1]));break;case"op_sub":r=this.sub(this.execute(t.children[0]),this.execute(t.children[1]));break;case"op_div":r=this.div(this.execute(t.children[0]),this.execute(t.children[1]));break;case"op_mod":r=this.mod(this.execute(t.children[0]),this.execute(t.children[1]),!0);break;case"op_mul":r=this.mul(this.execute(t.children[0]),this.execute(t.children[1]));break;case"op_exp":r=this.pow(this.execute(t.children[0]),this.execute(t.children[1]));break;case"op_neg":r=this.neg(this.execute(t.children[0]));break}break;case"node_var":r=this.getvar(t.value,!1,t._isFunctionName);break;case"node_const":t.value===null?r=null:r=Number(t.value);break;case"node_const_bool":r=t.value;break;case"node_str":r=t.value.replace(/\\(.)/g,"$1");break}return r},compile:function(t,r){var a,n,s,o="";if(JXG$1.exists(r)||(r=!1),!t)return o;switch(t.type){case"node_op":switch(t.value){case"op_none":t.children[0]&&(o=this.compile(t.children[0],r)),t.children[1]&&(o+=this.compile(t.children[1],r));break;case"op_block":o=`{
`+this.compile(t.children[0],r)+` }
`;break;case"op_assign":r?(a=this.getLHSCompiler(t.children[0],r),JXG$1.isArray(a)?o="$jc$.setProp("+a[0]+", "+a[1]+", "+this.compile(t.children[1],r)+`);
`:(this.isLocalVariable(a)!==this.scope&&(this.scope.locals[a]=!0),o="$jc$.scopes["+this.scope.id+"].locals['"+a+"'] = "+this.compile(t.children[1],r)+`;
`)):(a=this.compile(t.children[0]),o=a+" = "+this.compile(t.children[1],r)+`;
`);break;case"op_if":o=" if ("+this.compile(t.children[0],r)+") "+this.compile(t.children[1],r);break;case"op_if_else":o=" if ("+this.compile(t.children[0],r)+")"+this.compile(t.children[1],r),o+=" else "+this.compile(t.children[2],r);break;case"op_conditional":o="(("+this.compile(t.children[0],r)+")?("+this.compile(t.children[1],r),o+="):("+this.compile(t.children[2],r)+"))";break;case"op_while":o=" while ("+this.compile(t.children[0],r)+`) {
`+this.compile(t.children[1],r)+`}
`;break;case"op_do":o=` do {
`+this.compile(t.children[0],r)+"} while ("+this.compile(t.children[1],r)+`);
`;break;case"op_for":o=" for ("+this.compile(t.children[0],r)+this.compile(t.children[1],r)+"; "+this.compile(t.children[2],r).slice(0,-2)+`) {
`+this.compile(t.children[3],r)+`
}
`;break;case"op_proplst":t.children[0]&&(o=this.compile(t.children[0],r)+", "),o+=this.compile(t.children[1],r);break;case"op_prop":o=t.children[0]+": "+this.compile(t.children[1],r);break;case"op_emptyobject":o=r?"{}":"<< >>";break;case"op_proplst_val":o=this.compile(t.children[0],r);break;case"op_array":for(s=[],n=0;n<t.children[0].length;n++)s.push(this.compile(t.children[0][n],r));o="["+s.join(", ")+"]";break;case"op_extvalue":o=this.compile(t.children[0],r)+"["+this.compile(t.children[1],r)+"]";break;case"op_return":o=" return "+this.compile(t.children[0],r)+`;
`;break;case"op_map":!t.children[1].isMath&&t.children[1].type!=="node_var"&&this._error("compile: In a map only function calls and mathematical expressions are allowed."),s=t.children[0],r?o=" $jc$.makeMap(function ("+s.join(", ")+") { return "+this.compile(t.children[1],r)+"; })":o="map ("+s.join(", ")+") -> "+this.compile(t.children[1],r);break;case"op_function":s=t.children[0],this.pushScope(s),r?o=this.functionCodeJS(t):o=" function ("+s.join(", ")+") "+this.compile(t.children[1],r),this.popScope();break;case"op_execfunmath":console.log("op_execfunmath: TODO"),o="-1";break;case"op_execfun":if(t.children[2]){for(s=[],n=0;n<t.children[2].length;n++)s.push(this.compile(t.children[2][n],r));r?a="$jc$.mergeAttributes("+s.join(", ")+")":a=s.join(", ")}for(t.children[0].withProps=!!t.children[2],s=[],n=0;n<t.children[1].length;n++)s.push(this.compile(t.children[1][n],r));o=this.compile(t.children[0],r)+"("+s.join(", ")+(t.children[2]&&r?", "+a:"")+")"+(t.children[2]&&!r?" "+a:""),r&&(o+=`
`),r&&t.children[0].value==="$"&&(o="$jc$.board.objects["+this.compile(t.children[1][0],r)+"]");break;case"op_property":r&&t.children[1]!=="X"&&t.children[1]!=="Y"?o="$jc$.resolveProperty("+this.compile(t.children[0],r)+", '"+t.children[1]+"', true)":o=this.compile(t.children[0],r)+"."+t.children[1];break;case"op_use":this._warn("Use of the 'use' operator is deprecated."),r?o="$jc$.use('":o="use('",o+=t.children[0].toString()+"');";break;case"op_delete":this._warn("Use of the 'delete' operator is deprecated. Please use the remove() function."),r?o="$jc$.del(":o="remove(",o+=this.compile(t.children[0],r)+")";break;case"op_eq":o="("+this.compile(t.children[0],r)+" === "+this.compile(t.children[1],r)+")";break;case"op_neq":o="("+this.compile(t.children[0],r)+" !== "+this.compile(t.children[1],r)+")";break;case"op_approx":o="("+this.compile(t.children[0],r)+" ~= "+this.compile(t.children[1],r)+")";break;case"op_gt":r?o="$jc$.gt("+this.compile(t.children[0],r)+", "+this.compile(t.children[1],r)+")":o="("+this.compile(t.children[0],r)+" > "+this.compile(t.children[1],r)+")";break;case"op_lt":r?o="$jc$.lt("+this.compile(t.children[0],r)+", "+this.compile(t.children[1],r)+")":o="("+this.compile(t.children[0],r)+" < "+this.compile(t.children[1],r)+")";break;case"op_geq":r?o="$jc$.geq("+this.compile(t.children[0],r)+", "+this.compile(t.children[1],r)+")":o="("+this.compile(t.children[0],r)+" >= "+this.compile(t.children[1],r)+")";break;case"op_leq":r?o="$jc$.leq("+this.compile(t.children[0],r)+", "+this.compile(t.children[1],r)+")":o="("+this.compile(t.children[0],r)+" <= "+this.compile(t.children[1],r)+")";break;case"op_or":o="("+this.compile(t.children[0],r)+" || "+this.compile(t.children[1],r)+")";break;case"op_and":o="("+this.compile(t.children[0],r)+" && "+this.compile(t.children[1],r)+")";break;case"op_not":o="!("+this.compile(t.children[0],r)+")";break;case"op_add":r?o="$jc$.add("+this.compile(t.children[0],r)+", "+this.compile(t.children[1],r)+")":o="("+this.compile(t.children[0],r)+" + "+this.compile(t.children[1],r)+")";break;case"op_sub":r?o="$jc$.sub("+this.compile(t.children[0],r)+", "+this.compile(t.children[1],r)+")":o="("+this.compile(t.children[0],r)+" - "+this.compile(t.children[1],r)+")";break;case"op_div":r?o="$jc$.div("+this.compile(t.children[0],r)+", "+this.compile(t.children[1],r)+")":o="("+this.compile(t.children[0],r)+" / "+this.compile(t.children[1],r)+")";break;case"op_mod":r?o="$jc$.mod("+this.compile(t.children[0],r)+", "+this.compile(t.children[1],r)+", true)":o="("+this.compile(t.children[0],r)+" % "+this.compile(t.children[1],r)+")";break;case"op_mul":r?o="$jc$.mul("+this.compile(t.children[0],r)+", "+this.compile(t.children[1],r)+")":o="("+this.compile(t.children[0],r)+" * "+this.compile(t.children[1],r)+")";break;case"op_exp":r?o="$jc$.pow("+this.compile(t.children[0],r)+", "+this.compile(t.children[1],r)+")":o="("+this.compile(t.children[0],r)+"^"+this.compile(t.children[1],r)+")";break;case"op_neg":r?o="$jc$.neg("+this.compile(t.children[0],r)+")":o="(-"+this.compile(t.children[0],r)+")";break}break;case"node_var":r?o=this.getvarJS(t.value,!1,t.withProps):o=t.value;break;case"node_const":o=t.value;break;case"node_const_bool":o=t.value;break;case"node_str":o="'"+t.value+"'";break}return t.needsAngleBrackets&&(r?o=`{
`+o+` }
`:o="<< "+o+` >>
`),o},getName:function(t,r){var a="";return JXG$1.exists(t)&&JXG$1.exists(t.getName)?(a=t.getName(),(!JXG$1.exists(a)||a==="")&&r&&(a=t.id)):r&&(a=t.id),a},X:function(t){return t.X()},Y:function(t){return t.Y()},V:function(t){return t.Value()},L:function(t){return t.L()},area:function(t){return(!JXG$1.exists(t)||!JXG$1.exists(t.Area))&&this._error("Error: Can't calculate area."),t.Area()},perimeter:function(t){return(!JXG$1.exists(t)||!JXG$1.exists(t.Perimeter))&&this._error("Error: Can't calculate perimeter."),t.Perimeter()},dist:function(t,r){return(!JXG$1.exists(t)||!JXG$1.exists(t.Dist))&&this._error("Error: Can't calculate distance."),t.Dist(r)},radius:function(t){return(!JXG$1.exists(t)||!JXG$1.exists(t.Radius))&&this._error("Error: Can't calculate radius."),t.Radius()},slope:function(t){return(!JXG$1.exists(t)||!JXG$1.exists(t.Slope))&&this._error("Error: Can't calculate slope."),t.Slope()},add:function(t,r){var a,n,s;if(t=JXG$1.evalSlider(t),r=JXG$1.evalSlider(r),Interval.isInterval(t)||Interval.isInterval(r))s=Interval.add(t,r);else if(JXG$1.isArray(t)&&JXG$1.isArray(r))for(n=Math.min(t.length,r.length),s=[],a=0;a<n;a++)s[a]=t[a]+r[a];else JXG$1.isNumber(t)&&JXG$1.isNumber(r)?s=t+r:JXG$1.isString(t)||JXG$1.isString(r)?s=t.toString()+r.toString():this._error("Operation + not defined on operands "+typeof t+" and "+typeof r);return s},sub:function(t,r){var a,n,s;if(t=JXG$1.evalSlider(t),r=JXG$1.evalSlider(r),Interval.isInterval(t)||Interval.isInterval(r))s=Interval.sub(t,r);else if(JXG$1.isArray(t)&&JXG$1.isArray(r))for(n=Math.min(t.length,r.length),s=[],a=0;a<n;a++)s[a]=t[a]-r[a];else JXG$1.isNumber(t)&&JXG$1.isNumber(r)?s=t-r:this._error("Operation - not defined on operands "+typeof t+" and "+typeof r);return s},neg:function(t){var r,a,n;if(t=JXG$1.evalSlider(t),Interval.isInterval(t))n=Interval.negative(t);else if(JXG$1.isArray(t))for(a=t.length,n=[],r=0;r<a;r++)n[r]=-t[r];else JXG$1.isNumber(t)?n=-t:this._error("Unary operation - not defined on operand "+typeof t);return n},mul:function(t,r){var a,n,s;if(t=JXG$1.evalSlider(t),r=JXG$1.evalSlider(r),JXG$1.isArray(t)&&JXG$1.isNumber(r)&&(a=t,t=r,r=t),Interval.isInterval(t)||Interval.isInterval(r))s=Interval.mul(t,r);else if(JXG$1.isArray(t)&&JXG$1.isArray(r))n=Math.min(t.length,r.length),s=Mat.innerProduct(t,r,n);else if(JXG$1.isNumber(t)&&JXG$1.isArray(r))for(n=r.length,s=[],a=0;a<n;a++)s[a]=t*r[a];else JXG$1.isNumber(t)&&JXG$1.isNumber(r)?s=t*r:this._error("Operation * not defined on operands "+typeof t+" and "+typeof r);return s},div:function(t,r){var a,n,s;if(t=JXG$1.evalSlider(t),r=JXG$1.evalSlider(r),Interval.isInterval(t)||Interval.isInterval(r))s=Interval.div(t,r);else if(JXG$1.isArray(t)&&JXG$1.isNumber(r))for(n=t.length,s=[],a=0;a<n;a++)s[a]=t[a]/r;else JXG$1.isNumber(t)&&JXG$1.isNumber(r)?s=t/r:this._error("Operation * not defined on operands "+typeof t+" and "+typeof r);return s},mod:function(t,r){var a,n,s;if(t=JXG$1.evalSlider(t),r=JXG$1.evalSlider(r),Interval.isInterval(t)||Interval.isInterval(r))return Interval.fmod(t,r);if(JXG$1.isArray(t)&&JXG$1.isNumber(r))for(n=t.length,s=[],a=0;a<n;a++)s[a]=Mat.mod(t[a],r,!0);else JXG$1.isNumber(t)&&JXG$1.isNumber(r)?s=Mat.mod(t,r,!0):this._error("Operation * not defined on operands "+typeof t+" and "+typeof r);return s},pow:function(t,r){return t=JXG$1.evalSlider(t),r=JXG$1.evalSlider(r),Interval.isInterval(t)||Interval.isInterval(r)?Interval.pow(t,r):Mat.pow(t,r)},lt:function(t,r){return Interval.isInterval(t)||Interval.isInterval(r)?Interval.lt(t,r):t<r},leq:function(t,r){return Interval.isInterval(t)||Interval.isInterval(r)?Interval.leq(t,r):t<=r},gt:function(t,r){return Interval.isInterval(t)||Interval.isInterval(r)?Interval.gt(t,r):t>r},geq:function(t,r){return Interval.isInterval(t)||Interval.isInterval(r)?Interval.geq(t,r):t>=r},randint:function(t,r,a){return JXG$1.exists(a)||(a=1),Math.round(Math.random()*(r-t)/a)*a+t},DDD:function(t){console.log("Dummy derivative function. This should never appear!")},ifthen:function(t,r,a){return t?r:a},del:function(t){typeof t=="object"&&JXG$1.exists(t.type)&&JXG$1.exists(t.elementClass)&&this.board.removeObject(t)},eval:function(t){return JXG$1.evaluate(t)},use:function(t){var r,a,n=!1;if(typeof t=="string"){for(r in JXG$1.boards)if(JXG$1.boards.hasOwnProperty(r)&&JXG$1.boards[r].container===t){a=JXG$1.boards[r],n=!0;break}}else a=t,n=!0;n?(this.board=a,this.builtIn.$board=a,this.builtIn.$board.src="$jc$.board"):this._error("Board '"+t+"' not found!")},findSymbol:function(t,r){var a,n;for(r=JXG$1.def(r,-1),r===-1?n=this.scope:n=this.scopes[r];n!==null;){for(a in n.locals)if(n.locals.hasOwnProperty(a)&&n.locals[a]===t)return[a,n];n=n.previous}return[]},importModule:function(t){return priv$4.modules[t.toLowerCase()]},defineBuiltIn:function(){var t=this,r={PI:Math.PI,EULER:Math.E,D:t.DDD,X:t.X,Y:t.Y,V:t.V,Value:t.V,L:t.L,Length:t.L,acosh:Mat.acosh,acot:Mat.acot,asinh:Mat.asinh,binomial:Mat.binomial,cbrt:Mat.cbrt,cosh:Mat.cosh,cot:Mat.cot,deg:Geometry.trueAngle,A:t.area,area:t.area,Area:t.area,perimeter:t.perimeter,Perimeter:t.perimeter,dist:t.dist,Dist:t.dist,R:t.radius,radius:t.radius,Radius:t.radius,erf:Mat.erf,erfc:Mat.erfc,erfi:Mat.erfi,factorial:Mat.factorial,gcd:Mat.gcd,lb:Mat.log2,lcm:Mat.lcm,ld:Mat.log2,lg:Mat.log10,ln:Math.log,log:Mat.log,log10:Mat.log10,log2:Mat.log2,ndtr:Mat.ndtr,ndtri:Mat.ndtri,nthroot:Mat.nthroot,pow:Mat.pow,rad:Geometry.rad,ratpow:Mat.ratpow,trunc:JXG$1.trunc,sinh:Mat.sinh,slope:t.slope,Slope:t.slope,randint:t.randint,IfThen:t.ifthen,import:t.importModule,eval:t.eval,use:t.use,remove:t.del,$:t.getElementById,$value:function(a){return t.getElementById(a).Value()},getName:t.getName,name:t.getName,$board:t.board,$log:t.log};return r.rad.sc=Geometry,r.deg.sc=Geometry,r.factorial.sc=Mat,r.X.src="$jc$.X",r.Y.src="$jc$.Y",r.V.src="$jc$.V",r.Value.src="$jc$.V",r.L.src="$jc$.L",r.Length.src="$jc$.L",r.acosh.src="JXG.Math.acosh",r.acot.src="JXG.Math.acot",r.asinh.src="JXG.Math.asinh",r.binomial.src="JXG.Math.binomial",r.cbrt.src="JXG.Math.cbrt",r.cot.src="JXG.Math.cot",r.cosh.src="JXG.Math.cosh",r.deg.src="JXG.Math.Geometry.trueAngle",r.erf.src="JXG.Math.erf",r.erfc.src="JXG.Math.erfc",r.erfi.src="JXG.Math.erfi",r.A.src="$jc$.area",r.area.src="$jc$.area",r.Area.src="$jc$.area",r.perimeter.src="$jc$.perimeter",r.Perimeter.src="$jc$.perimeter",r.dist.src="$jc$.dist",r.Dist.src="$jc$.dist",r.R.src="$jc$.radius",r.radius.src="$jc$.radius",r.Radius.src="$jc$.radius",r.factorial.src="JXG.Math.factorial",r.gcd.src="JXG.Math.gcd",r.lb.src="JXG.Math.log2",r.lcm.src="JXG.Math.lcm",r.ld.src="JXG.Math.log2",r.lg.src="JXG.Math.log10",r.ln.src="Math.log",r.log.src="JXG.Math.log",r.log10.src="JXG.Math.log10",r.log2.src="JXG.Math.log2",r.ndtr.src="JXG.Math.ndtr",r.ndtri.src="JXG.Math.ndtri",r.nthroot.src="JXG.Math.nthroot",r.pow.src="JXG.Math.pow",r.rad.src="JXG.Math.Geometry.rad",r.ratpow.src="JXG.Math.ratpow",r.trunc.src="JXG.trunc",r.sinh.src="JXG.Math.sinh",r.slope.src="$jc$.slope",r.Slope.src="$jc$.slope",r.randint.src="$jc$.randint",r.import.src="$jc$.importModule",r.eval.src="$jc$.eval",r.use.src="$jc$.use",r.remove.src="$jc$.del",r.IfThen.src="$jc$.ifthen",r.$.src="(function (n) { return $jc$.board.select(n); })",r.$value.src="(function (n) { return $jc$.board.select(n).Value(); })",r.getName.src="$jc$.getName",r.name.src="$jc$.getName",r.$board&&(r.$board.src="$jc$.board"),r.$log.src="$jc$.log",r=JXG$1.merge(r,t._addedBuiltIn),r},_addedBuiltIn:{},addBuiltIn:function(t,r){if(JXG$1.exists(this.builtIn)){if(JXG$1.exists(this.builtIn[t]))return;this.builtIn[t]=r,this.builtIn[t].src="$jc$."+t}JXG$1.exists(this._addedBuiltIn[t])||(this._addedBuiltIn[t]=r,this._addedBuiltIn[t].src="$jc$."+t,JXG$1.JessieCode.prototype[t]=r)},getPossibleOperands:function(){var t=["E"],r=this.builtIn||this.defineBuiltIn(),a=Math,n,s,o,l,u,h,c,f,d,p,v,y,b,_;for(b=function(N,M){return N.toLowerCase().localeCompare(M.toLowerCase())},_=function(N,M){var C=null;if(M==="jc")C=r[N];else if(M==="Math")C=a[N];else return;if(!(t.indexOf(N)>=0)){if(JXG$1.isFunction(C))return{name:N,type:"function",numParams:C.length,origin:M};if(JXG$1.isNumber(C))return{name:N,type:"constant",value:C,origin:M};N.startsWith("$")||C!==void 0&&console.error("undefined type",C)}},n=Object.getOwnPropertyNames(r).sort(b),s=Object.getOwnPropertyNames(a).sort(b),o=[],l=0,u=0;l<n.length||u<s.length;)n[l]===s[u]?(h=_(s[u],"Math"),JXG$1.exists(h)&&o.push(h),l++,u++):!JXG$1.exists(s[u])||n[l].toLowerCase().localeCompare(s[u].toLowerCase())<0?(h=_(n[l],"jc"),JXG$1.exists(h)&&o.push(h),l++):(h=_(s[u],"Math"),JXG$1.exists(h)&&o.push(h),u++);for(d=[],p=[],v=[],y={},c=o.length,l=0;l<c;l++){switch(f=o[l],f.type){case"function":d.push(f.name),f.origin==="jc"&&p.push(f.name);break;case"constant":v.push(f.name);break}y[f.name]=f}return{all:y,list:o,functions:d,functions_jessiecode:p,constants:v}},_debug:function(t){typeof console=="object"&&console.log?console.log(t):JXG$1.isBrowser&&document&&document.getElementById("debug")!==null&&(document.getElementById("debug").innerText+=t+`
`)},_error:function(t){var r=new Error("Error("+this.line+"): "+t);throw r.line=this.line,r},_warn:function(t){typeof console=="object"&&console.log?console.log("Warning("+this.line+"): "+t):JXG$1.isBrowser&&document&&document.getElementById(this.warnLog)!==null&&(document.getElementById(this.warnLog).innerText+="Warning("+this.line+"): "+t+`
`)},_log:function(t){typeof window!="object"&&typeof self=="object"&&self.postMessage?self.postMessage({type:"log",msg:"Log: "+t.toString()}):console.log("Log: ",arguments)}});var parser=(function(){var t=function(Te,Xe,Me,ze){for(Me=Me||{},ze=Te.length;ze--;Me[Te[ze]]=Xe);return Me},r=[2,14],a=[1,13],n=[1,37],s=[1,14],o=[1,15],l=[1,21],u=[1,16],h=[1,17],c=[1,33],f=[1,18],d=[1,19],p=[1,12],v=[1,59],y=[1,60],b=[1,58],_=[1,46],N=[1,48],M=[1,49],C=[1,50],$=[1,51],w=[1,52],A=[1,53],X=[1,54],O=[1,45],G=[1,38],R=[1,39],B=[5,7,8,14,15,16,17,19,20,21,23,26,27,50,51,58,65,74,75,76,77,78,79,80,82,91,93],F=[5,7,8,12,14,15,16,17,19,20,21,23,26,27,50,51,58,65,74,75,76,77,78,79,80,82,91,93],U=[8,10,16,32,34,35,37,39,41,42,43,45,46,47,48,50,51,53,54,55,57,64,65,66,83,86],q=[2,48],ee=[1,72],z=[10,16,32,34,35,37,39,41,42,43,45,46,47,48,50,51,53,54,55,57,66,83,86],Y=[1,78],K=[8,10,16,32,34,35,37,41,42,43,45,46,47,48,50,51,53,54,55,57,64,65,66,83,86],Z=[1,82],ne=[8,10,16,32,34,35,37,39,45,46,47,48,50,51,53,54,55,57,64,65,66,83,86],j=[1,83],V=[1,84],L=[1,85],ae=[8,10,16,32,34,35,37,39,41,42,43,50,51,53,54,55,57,64,65,66,83,86],W=[1,89],ve=[1,90],de=[1,91],se=[1,92],ie=[1,97],ce=[8,10,16,32,34,35,37,39,41,42,43,45,46,47,48,53,54,55,57,64,65,66,83,86],xe=[1,103],fe=[1,104],Ne=[8,10,16,32,34,35,37,39,41,42,43,45,46,47,48,50,51,57,64,65,66,83,86],we=[1,105],Pe=[1,106],Ie=[1,107],Ye=[1,126],Le=[1,139],Ve=[83,86],Ze=[1,150],ue=[10,66,86],ge=[8,10,16,20,32,34,35,37,39,41,42,43,45,46,47,48,50,51,53,54,55,57,64,65,66,82,83,86],te=[1,167],le=[10,86],me={trace:function(){},yy:{},symbols_:{error:2,Program:3,StatementList:4,EOF:5,IfStatement:6,IF:7,"(":8,Expression:9,")":10,Statement:11,ELSE:12,LoopStatement:13,WHILE:14,FOR:15,";":16,DO:17,UnaryStatement:18,USE:19,IDENTIFIER:20,DELETE:21,ReturnStatement:22,RETURN:23,EmptyStatement:24,StatementBlock:25,"{":26,"}":27,ExpressionStatement:28,AssignmentExpression:29,ConditionalExpression:30,LeftHandSideExpression:31,"=":32,LogicalORExpression:33,"?":34,":":35,LogicalANDExpression:36,"||":37,EqualityExpression:38,"&&":39,RelationalExpression:40,"==":41,"!=":42,"~=":43,AdditiveExpression:44,"<":45,">":46,"<=":47,">=":48,MultiplicativeExpression:49,"+":50,"-":51,UnaryExpression:52,"*":53,"/":54,"%":55,ExponentExpression:56,"^":57,"!":58,MemberExpression:59,CallExpression:60,PrimaryExpression:61,FunctionExpression:62,MapExpression:63,".":64,"[":65,"]":66,BasicLiteral:67,ObjectLiteral:68,ArrayLiteral:69,NullLiteral:70,BooleanLiteral:71,StringLiteral:72,NumberLiteral:73,NULL:74,TRUE:75,FALSE:76,STRING:77,NUMBER:78,NAN:79,INFINITY:80,ElementList:81,"<<":82,">>":83,PropertyList:84,Property:85,",":86,PropertyName:87,Arguments:88,AttributeList:89,Attribute:90,FUNCTION:91,ParameterDefinitionList:92,MAP:93,"->":94,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",7:"IF",8:"(",10:")",12:"ELSE",14:"WHILE",15:"FOR",16:";",17:"DO",19:"USE",20:"IDENTIFIER",21:"DELETE",23:"RETURN",26:"{",27:"}",32:"=",34:"?",35:":",37:"||",39:"&&",41:"==",42:"!=",43:"~=",45:"<",46:">",47:"<=",48:">=",50:"+",51:"-",53:"*",54:"/",55:"%",57:"^",58:"!",64:".",65:"[",66:"]",74:"NULL",75:"TRUE",76:"FALSE",77:"STRING",78:"NUMBER",79:"NAN",80:"INFINITY",82:"<<",83:">>",86:",",91:"FUNCTION",93:"MAP",94:"->"},productions_:[0,[3,2],[6,5],[6,7],[13,5],[13,9],[13,7],[18,2],[18,2],[22,2],[22,3],[24,1],[25,3],[4,2],[4,0],[11,1],[11,1],[11,1],[11,1],[11,1],[11,1],[11,1],[28,2],[9,1],[29,1],[29,3],[30,1],[30,5],[33,1],[33,3],[36,1],[36,3],[38,1],[38,3],[38,3],[38,3],[40,1],[40,3],[40,3],[40,3],[40,3],[44,1],[44,3],[44,3],[49,1],[49,3],[49,3],[49,3],[56,1],[56,3],[52,1],[52,2],[52,2],[52,2],[31,1],[31,1],[59,1],[59,1],[59,1],[59,3],[59,4],[61,1],[61,1],[61,1],[61,1],[61,3],[67,1],[67,1],[67,1],[67,1],[70,1],[71,1],[71,1],[72,1],[73,1],[73,1],[73,1],[69,2],[69,3],[68,2],[68,3],[84,1],[84,3],[85,3],[87,1],[87,1],[87,1],[60,2],[60,3],[60,2],[60,4],[60,3],[88,2],[88,3],[89,1],[89,3],[90,1],[90,1],[81,1],[81,3],[62,4],[62,5],[63,5],[63,6],[92,1],[92,3]],performAction:function(Xe,Me,ze,Ue,je,Ee,qe){var I=Ee.length-1;switch(je){case 1:return Ee[I-1];case 2:this.$=he.createNode(ye(qe[I-4]),"node_op","op_if",Ee[I-2],Ee[I]);break;case 3:this.$=he.createNode(ye(qe[I-6]),"node_op","op_if_else",Ee[I-4],Ee[I-2],Ee[I]);break;case 4:this.$=he.createNode(ye(qe[I-4]),"node_op","op_while",Ee[I-2],Ee[I]);break;case 5:this.$=he.createNode(ye(qe[I-8]),"node_op","op_for",Ee[I-6],Ee[I-4],Ee[I-2],Ee[I]);break;case 6:this.$=he.createNode(ye(qe[I-6]),"node_op","op_do",Ee[I-5],Ee[I-2]);break;case 7:this.$=he.createNode(ye(qe[I-1]),"node_op","op_use",Ee[I]);break;case 8:this.$=he.createNode(ye(qe[I-1]),"node_op","op_delete",Ee[I]);break;case 9:this.$=he.createNode(ye(qe[I-1]),"node_op","op_return",void 0);break;case 10:this.$=he.createNode(ye(qe[I-2]),"node_op","op_return",Ee[I-1]);break;case 11:case 14:this.$=he.createNode(ye(qe[I]),"node_op","op_none");break;case 12:this.$=he.createNode(ye(qe[I-2]),"node_op","op_block",Ee[I-1]);break;case 13:this.$=he.createNode(ye(qe[I-1]),"node_op","op_none",Ee[I-1],Ee[I]);break;case 15:case 16:case 17:case 18:case 19:case 20:case 21:case 23:case 24:case 26:case 28:case 30:case 32:case 36:case 41:case 44:case 48:case 50:case 52:case 54:case 55:case 56:case 58:case 62:case 81:case 84:case 85:case 86:this.$=Ee[I];break;case 22:case 65:case 93:this.$=Ee[I-1];break;case 25:this.$=he.createNode(ye(qe[I-2]),"node_op","op_assign",Ee[I-2],Ee[I]),this.$.isMath=!1;break;case 27:this.$=he.createNode(ye(qe[I-4]),"node_op","op_conditional",Ee[I-4],Ee[I-2],Ee[I]),this.$.isMath=!1;break;case 29:this.$=he.createNode(ye(qe[I-2]),"node_op","op_or",Ee[I-2],Ee[I]),this.$.isMath=!1;break;case 31:this.$=he.createNode(ye(qe[I-2]),"node_op","op_and",Ee[I-2],Ee[I]),this.$.isMath=!1;break;case 33:this.$=he.createNode(ye(qe[I-2]),"node_op","op_eq",Ee[I-2],Ee[I]),this.$.isMath=!1;break;case 34:this.$=he.createNode(ye(qe[I-2]),"node_op","op_neq",Ee[I-2],Ee[I]),this.$.isMath=!1;break;case 35:this.$=he.createNode(ye(qe[I-2]),"node_op","op_approx",Ee[I-2],Ee[I]),this.$.isMath=!1;break;case 37:this.$=he.createNode(ye(qe[I-2]),"node_op","op_lt",Ee[I-2],Ee[I]),this.$.isMath=!1;break;case 38:this.$=he.createNode(ye(qe[I-2]),"node_op","op_gt",Ee[I-2],Ee[I]),this.$.isMath=!1;break;case 39:this.$=he.createNode(ye(qe[I-2]),"node_op","op_leq",Ee[I-2],Ee[I]),this.$.isMath=!1;break;case 40:this.$=he.createNode(ye(qe[I-2]),"node_op","op_geq",Ee[I-2],Ee[I]),this.$.isMath=!1;break;case 42:this.$=he.createNode(ye(qe[I-2]),"node_op","op_add",Ee[I-2],Ee[I]),this.$.isMath=!0;break;case 43:this.$=he.createNode(ye(qe[I-2]),"node_op","op_sub",Ee[I-2],Ee[I]),this.$.isMath=!0;break;case 45:this.$=he.createNode(ye(qe[I-2]),"node_op","op_mul",Ee[I-2],Ee[I]),this.$.isMath=!0;break;case 46:this.$=he.createNode(ye(qe[I-2]),"node_op","op_div",Ee[I-2],Ee[I]),this.$.isMath=!0;break;case 47:this.$=he.createNode(ye(qe[I-2]),"node_op","op_mod",Ee[I-2],Ee[I]),this.$.isMath=!0;break;case 49:this.$=he.createNode(ye(qe[I-2]),"node_op","op_exp",Ee[I-2],Ee[I]),this.$.isMath=!0;break;case 51:this.$=he.createNode(ye(qe[I-1]),"node_op","op_not",Ee[I]),this.$.isMath=!1;break;case 53:this.$=he.createNode(ye(qe[I-1]),"node_op","op_neg",Ee[I]),this.$.isMath=!0;break;case 57:case 63:case 64:case 66:case 67:case 68:case 97:this.$=Ee[I],this.$.isMath=!1;break;case 59:case 91:this.$=he.createNode(ye(qe[I-2]),"node_op","op_property",Ee[I-2],Ee[I]),this.$.isMath=!0;break;case 60:case 90:this.$=he.createNode(ye(qe[I-3]),"node_op","op_extvalue",Ee[I-3],Ee[I-1]),this.$.isMath=!0;break;case 61:this.$=he.createNode(ye(qe[I]),"node_var",Ee[I]);break;case 69:this.$=Ee[I],this.$.isMath=!0;break;case 70:this.$=he.createNode(ye(qe[I]),"node_const",null);break;case 71:this.$=he.createNode(ye(qe[I]),"node_const_bool",!0);break;case 72:this.$=he.createNode(ye(qe[I]),"node_const_bool",!1);break;case 73:this.$=he.createNode(ye(qe[I]),"node_str",Ee[I].substring(1,Ee[I].length-1));break;case 74:this.$=he.createNode(ye(qe[I]),"node_const",parseFloat(Ee[I]));break;case 75:this.$=he.createNode(ye(qe[I]),"node_const",NaN);break;case 76:this.$=he.createNode(ye(qe[I]),"node_const",1/0);break;case 77:this.$=he.createNode(ye(qe[I-1]),"node_op","op_array",[]);break;case 78:this.$=he.createNode(ye(qe[I-2]),"node_op","op_array",Ee[I-1]);break;case 79:this.$=he.createNode(ye(qe[I-1]),"node_op","op_emptyobject",{}),this.$.needsAngleBrackets=!0;break;case 80:this.$=he.createNode(ye(qe[I-2]),"node_op","op_proplst_val",Ee[I-1]),this.$.needsAngleBrackets=!0;break;case 82:this.$=he.createNode(ye(qe[I-2]),"node_op","op_proplst",Ee[I-2],Ee[I]);break;case 83:this.$=he.createNode(ye(qe[I-2]),"node_op","op_prop",Ee[I-2],Ee[I]);break;case 87:case 89:this.$=he.createNode(ye(qe[I-1]),"node_op","op_execfun",Ee[I-1],Ee[I]),this.$.isMath=!0;break;case 88:this.$=he.createNode(ye(qe[I-2]),"node_op","op_execfun",Ee[I-2],Ee[I-1],Ee[I],!0),this.$.isMath=!1;break;case 92:this.$=[];break;case 94:case 98:case 104:this.$=[Ee[I]];break;case 95:case 99:case 105:this.$=Ee[I-2].concat(Ee[I]);break;case 96:this.$=he.createNode(ye(qe[I]),"node_var",Ee[I]),this.$.isMath=!0;break;case 100:this.$=he.createNode(ye(qe[I-3]),"node_op","op_function",[],Ee[I]),this.$.isMath=!1;break;case 101:this.$=he.createNode(ye(qe[I-4]),"node_op","op_function",Ee[I-2],Ee[I]),this.$.isMath=!1;break;case 102:this.$=he.createNode(ye(qe[I-4]),"node_op","op_map",[],Ee[I]);break;case 103:this.$=he.createNode(ye(qe[I-5]),"node_op","op_map",Ee[I-3],Ee[I]);break}},table:[t([5,7,8,14,15,16,17,19,20,21,23,26,50,51,58,65,74,75,76,77,78,79,80,82,91,93],r,{3:1,4:2}),{1:[3]},{5:[1,3],6:6,7:a,8:n,9:20,11:4,13:7,14:s,15:o,16:l,17:u,18:8,19:h,20:c,21:f,22:9,23:d,24:11,25:5,26:p,28:10,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:v,51:y,52:56,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:_,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:N,75:M,76:C,77:$,78:w,79:A,80:X,82:O,91:G,93:R},{1:[2,1]},t(B,[2,13]),t(F,[2,15]),t(F,[2,16]),t(F,[2,17]),t(F,[2,18]),t(F,[2,19]),t(F,[2,20]),t(F,[2,21]),t([7,8,14,15,16,17,19,20,21,23,26,27,50,51,58,65,74,75,76,77,78,79,80,82,91,93],r,{4:61}),{8:[1,62]},{8:[1,63]},{8:[1,64]},{6:6,7:a,8:n,9:20,11:65,13:7,14:s,15:o,16:l,17:u,18:8,19:h,20:c,21:f,22:9,23:d,24:11,25:5,26:p,28:10,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:v,51:y,52:56,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:_,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:N,75:M,76:C,77:$,78:w,79:A,80:X,82:O,91:G,93:R},{20:[1,66]},{20:[1,67]},{8:n,9:69,16:[1,68],20:c,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:v,51:y,52:56,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:_,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:N,75:M,76:C,77:$,78:w,79:A,80:X,82:O,91:G,93:R},{16:[1,70]},t(F,[2,11]),t(U,[2,23]),t(U,[2,24]),t([8,10,16,34,35,37,39,41,42,43,45,46,47,48,50,51,53,54,55,64,65,66,83,86],q,{32:[1,71],57:ee}),t([8,10,16,32,35,39,41,42,43,45,46,47,48,50,51,53,54,55,57,64,65,66,83,86],[2,26],{34:[1,73],37:[1,74]}),t(z,[2,54],{88:77,8:Y,64:[1,75],65:[1,76]}),t(z,[2,55],{88:79,8:Y,64:[1,81],65:[1,80]}),t(K,[2,28],{39:Z}),t(U,[2,56]),t(U,[2,57]),t(U,[2,58]),t(ne,[2,30],{41:j,42:V,43:L}),t(U,[2,61]),t(U,[2,62]),t(U,[2,63]),t(U,[2,64]),{8:n,9:86,20:c,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:v,51:y,52:56,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:_,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:N,75:M,76:C,77:$,78:w,79:A,80:X,82:O,91:G,93:R},{8:[1,87]},{8:[1,88]},t(ae,[2,32],{45:W,46:ve,47:de,48:se}),t(U,[2,66]),t(U,[2,67]),t(U,[2,68]),t(U,[2,69]),{20:ie,72:98,73:99,77:$,78:w,79:A,80:X,83:[1,93],84:94,85:95,87:96},{8:n,20:c,29:102,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:v,51:y,52:56,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:_,66:[1,100],67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:N,75:M,76:C,77:$,78:w,79:A,80:X,81:101,82:O,91:G,93:R},t(ce,[2,36],{50:xe,51:fe}),t(U,[2,70]),t(U,[2,71]),t(U,[2,72]),t(U,[2,73]),t(U,[2,74]),t(U,[2,75]),t(U,[2,76]),t(Ne,[2,41],{53:we,54:Pe,55:Ie}),t(U,[2,44]),t(U,[2,50]),{8:n,20:c,31:109,50:v,51:y,52:108,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:_,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:N,75:M,76:C,77:$,78:w,79:A,80:X,82:O,91:G,93:R},{8:n,20:c,31:109,50:v,51:y,52:110,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:_,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:N,75:M,76:C,77:$,78:w,79:A,80:X,82:O,91:G,93:R},{8:n,20:c,31:109,50:v,51:y,52:111,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:_,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:N,75:M,76:C,77:$,78:w,79:A,80:X,82:O,91:G,93:R},{6:6,7:a,8:n,9:20,11:4,13:7,14:s,15:o,16:l,17:u,18:8,19:h,20:c,21:f,22:9,23:d,24:11,25:5,26:p,27:[1,112],28:10,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:v,51:y,52:56,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:_,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:N,75:M,76:C,77:$,78:w,79:A,80:X,82:O,91:G,93:R},{8:n,9:113,20:c,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:v,51:y,52:56,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:_,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:N,75:M,76:C,77:$,78:w,79:A,80:X,82:O,91:G,93:R},{8:n,9:114,20:c,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:v,51:y,52:56,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:_,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:N,75:M,76:C,77:$,78:w,79:A,80:X,82:O,91:G,93:R},{8:n,9:115,20:c,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:v,51:y,52:56,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:_,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:N,75:M,76:C,77:$,78:w,79:A,80:X,82:O,91:G,93:R},{14:[1,116]},t(F,[2,7]),t(F,[2,8]),t(F,[2,9]),{16:[1,117]},t(F,[2,22]),{8:n,20:c,29:118,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:v,51:y,52:56,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:_,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:N,75:M,76:C,77:$,78:w,79:A,80:X,82:O,91:G,93:R},{8:n,20:c,31:109,50:v,51:y,52:119,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:_,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:N,75:M,76:C,77:$,78:w,79:A,80:X,82:O,91:G,93:R},{8:n,20:c,29:120,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:v,51:y,52:56,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:_,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:N,75:M,76:C,77:$,78:w,79:A,80:X,82:O,91:G,93:R},{8:n,20:c,31:109,36:121,38:32,40:40,44:47,49:55,50:v,51:y,52:56,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:_,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:N,75:M,76:C,77:$,78:w,79:A,80:X,82:O,91:G,93:R},{20:[1,122]},{8:n,9:123,20:c,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:v,51:y,52:56,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:_,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:N,75:M,76:C,77:$,78:w,79:A,80:X,82:O,91:G,93:R},t(U,[2,87],{89:124,90:125,68:127,20:Ye,82:O}),{8:n,10:[1,128],20:c,29:102,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:v,51:y,52:56,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:_,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:N,75:M,76:C,77:$,78:w,79:A,80:X,81:129,82:O,91:G,93:R},t(U,[2,89]),{8:n,9:130,20:c,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:v,51:y,52:56,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:_,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:N,75:M,76:C,77:$,78:w,79:A,80:X,82:O,91:G,93:R},{20:[1,131]},{8:n,20:c,31:109,38:132,40:40,44:47,49:55,50:v,51:y,52:56,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:_,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:N,75:M,76:C,77:$,78:w,79:A,80:X,82:O,91:G,93:R},{8:n,20:c,31:109,40:133,44:47,49:55,50:v,51:y,52:56,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:_,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:N,75:M,76:C,77:$,78:w,79:A,80:X,82:O,91:G,93:R},{8:n,20:c,31:109,40:134,44:47,49:55,50:v,51:y,52:56,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:_,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:N,75:M,76:C,77:$,78:w,79:A,80:X,82:O,91:G,93:R},{8:n,20:c,31:109,40:135,44:47,49:55,50:v,51:y,52:56,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:_,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:N,75:M,76:C,77:$,78:w,79:A,80:X,82:O,91:G,93:R},{10:[1,136]},{10:[1,137],20:Le,92:138},{10:[1,140],20:Le,92:141},{8:n,20:c,31:109,44:142,49:55,50:v,51:y,52:56,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:_,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:N,75:M,76:C,77:$,78:w,79:A,80:X,82:O,91:G,93:R},{8:n,20:c,31:109,44:143,49:55,50:v,51:y,52:56,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:_,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:N,75:M,76:C,77:$,78:w,79:A,80:X,82:O,91:G,93:R},{8:n,20:c,31:109,44:144,49:55,50:v,51:y,52:56,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:_,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:N,75:M,76:C,77:$,78:w,79:A,80:X,82:O,91:G,93:R},{8:n,20:c,31:109,44:145,49:55,50:v,51:y,52:56,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:_,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:N,75:M,76:C,77:$,78:w,79:A,80:X,82:O,91:G,93:R},t(U,[2,79]),{83:[1,146],86:[1,147]},t(Ve,[2,81]),{35:[1,148]},{35:[2,84]},{35:[2,85]},{35:[2,86]},t(U,[2,77]),{66:[1,149],86:Ze},t(ue,[2,98]),{8:n,20:c,31:109,49:151,50:v,51:y,52:56,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:_,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:N,75:M,76:C,77:$,78:w,79:A,80:X,82:O,91:G,93:R},{8:n,20:c,31:109,49:152,50:v,51:y,52:56,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:_,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:N,75:M,76:C,77:$,78:w,79:A,80:X,82:O,91:G,93:R},{8:n,20:c,31:109,50:v,51:y,52:153,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:_,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:N,75:M,76:C,77:$,78:w,79:A,80:X,82:O,91:G,93:R},{8:n,20:c,31:109,50:v,51:y,52:154,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:_,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:N,75:M,76:C,77:$,78:w,79:A,80:X,82:O,91:G,93:R},{8:n,20:c,31:109,50:v,51:y,52:155,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:_,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:N,75:M,76:C,77:$,78:w,79:A,80:X,82:O,91:G,93:R},t(U,[2,51]),t([8,10,16,32,34,35,37,39,41,42,43,45,46,47,48,50,51,53,54,55,64,65,66,83,86],q,{57:ee}),t(U,[2,52]),t(U,[2,53]),t([5,7,8,10,12,14,15,16,17,19,20,21,23,26,27,32,34,35,37,39,41,42,43,45,46,47,48,50,51,53,54,55,57,58,64,65,66,74,75,76,77,78,79,80,82,83,86,91,93],[2,12]),{10:[1,156]},{10:[1,157]},{16:[1,158]},{8:[1,159]},t(F,[2,10]),t(U,[2,25]),t(U,[2,49]),{35:[1,160]},t(K,[2,29],{39:Z}),t(U,[2,59]),{66:[1,161]},t([8,10,16,32,34,35,37,39,41,42,43,45,46,47,48,50,51,53,54,55,57,64,65,66,83],[2,88],{86:[1,162]}),t(U,[2,94]),t(U,[2,96]),t(U,[2,97]),t(ge,[2,92]),{10:[1,163],86:Ze},{66:[1,164]},t(U,[2,91]),t(ne,[2,31],{41:j,42:V,43:L}),t(ae,[2,33],{45:W,46:ve,47:de,48:se}),t(ae,[2,34],{45:W,46:ve,47:de,48:se}),t(ae,[2,35],{45:W,46:ve,47:de,48:se}),t(U,[2,65]),{25:165,26:p},{10:[1,166],86:te},t(le,[2,104]),{94:[1,168]},{10:[1,169],86:te},t(ce,[2,37],{50:xe,51:fe}),t(ce,[2,38],{50:xe,51:fe}),t(ce,[2,39],{50:xe,51:fe}),t(ce,[2,40],{50:xe,51:fe}),t(U,[2,80]),{20:ie,72:98,73:99,77:$,78:w,79:A,80:X,85:170,87:96},{8:n,20:c,29:171,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:v,51:y,52:56,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:_,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:N,75:M,76:C,77:$,78:w,79:A,80:X,82:O,91:G,93:R},t(U,[2,78]),{8:n,20:c,29:172,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:v,51:y,52:56,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:_,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:N,75:M,76:C,77:$,78:w,79:A,80:X,82:O,91:G,93:R},t(Ne,[2,42],{53:we,54:Pe,55:Ie}),t(Ne,[2,43],{53:we,54:Pe,55:Ie}),t(U,[2,45]),t(U,[2,46]),t(U,[2,47]),{6:6,7:a,8:n,9:20,11:173,13:7,14:s,15:o,16:l,17:u,18:8,19:h,20:c,21:f,22:9,23:d,24:11,25:5,26:p,28:10,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:v,51:y,52:56,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:_,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:N,75:M,76:C,77:$,78:w,79:A,80:X,82:O,91:G,93:R},{6:6,7:a,8:n,9:20,11:174,13:7,14:s,15:o,16:l,17:u,18:8,19:h,20:c,21:f,22:9,23:d,24:11,25:5,26:p,28:10,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:v,51:y,52:56,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:_,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:N,75:M,76:C,77:$,78:w,79:A,80:X,82:O,91:G,93:R},{8:n,9:175,20:c,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:v,51:y,52:56,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:_,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:N,75:M,76:C,77:$,78:w,79:A,80:X,82:O,91:G,93:R},{8:n,9:176,20:c,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:v,51:y,52:56,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:_,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:N,75:M,76:C,77:$,78:w,79:A,80:X,82:O,91:G,93:R},{8:n,20:c,29:177,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:v,51:y,52:56,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:_,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:N,75:M,76:C,77:$,78:w,79:A,80:X,82:O,91:G,93:R},t(U,[2,60]),{20:Ye,68:127,82:O,90:178},t(ge,[2,93]),t(U,[2,90]),t(U,[2,100]),{25:179,26:p},{20:[1,180]},{8:n,9:181,20:c,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:v,51:y,52:56,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:_,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:N,75:M,76:C,77:$,78:w,79:A,80:X,82:O,91:G,93:R},{94:[1,182]},t(Ve,[2,82]),t(Ve,[2,83]),t(ue,[2,99]),t(B,[2,2],{12:[1,183]}),t(F,[2,4]),{16:[1,184]},{10:[1,185]},t(U,[2,27]),t(U,[2,95]),t(U,[2,101]),t(le,[2,105]),t(U,[2,102]),{8:n,9:186,20:c,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:v,51:y,52:56,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:_,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:N,75:M,76:C,77:$,78:w,79:A,80:X,82:O,91:G,93:R},{6:6,7:a,8:n,9:20,11:187,13:7,14:s,15:o,16:l,17:u,18:8,19:h,20:c,21:f,22:9,23:d,24:11,25:5,26:p,28:10,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:v,51:y,52:56,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:_,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:N,75:M,76:C,77:$,78:w,79:A,80:X,82:O,91:G,93:R},{8:n,9:188,20:c,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:v,51:y,52:56,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:_,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:N,75:M,76:C,77:$,78:w,79:A,80:X,82:O,91:G,93:R},{16:[1,189]},t(U,[2,103]),t(F,[2,3]),{10:[1,190]},t(F,[2,6]),{6:6,7:a,8:n,9:20,11:191,13:7,14:s,15:o,16:l,17:u,18:8,19:h,20:c,21:f,22:9,23:d,24:11,25:5,26:p,28:10,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:v,51:y,52:56,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:_,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:N,75:M,76:C,77:$,78:w,79:A,80:X,82:O,91:G,93:R},t(F,[2,5])],defaultActions:{3:[2,1],97:[2,84],98:[2,85],99:[2,86]},parseError:function(Xe,Me){if(Me.recoverable)this.trace(Xe);else{var ze=new Error(Xe);throw ze.hash=Me,ze}},parse:function(Xe){var Me=this,ze=[0],Ue=[null],je=[],Ee=this.table,qe="",I=0,pe=0,De=2,Fe=1,We=je.slice.call(arguments,1),He=Object.create(this.lexer),vt={yy:{}};for(var zt in this.yy)Object.prototype.hasOwnProperty.call(this.yy,zt)&&(vt.yy[zt]=this.yy[zt]);He.setInput(Xe,vt.yy),vt.yy.lexer=He,vt.yy.parser=this,typeof He.yylloc>"u"&&(He.yylloc={});var $r=He.yylloc;je.push($r);var qi=He.options&&He.options.ranges;typeof vt.yy.parseError=="function"?this.parseError=vt.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var Ni=function(){var Ct;return Ct=He.lex()||Fe,typeof Ct!="number"&&(Ct=Me.symbols_[Ct]||Ct),Ct},Nt,gr,Jt,Hr,yr={},wr,It,Mi,Ar;;){if(gr=ze[ze.length-1],this.defaultActions[gr]?Jt=this.defaultActions[gr]:((Nt===null||typeof Nt>"u")&&(Nt=Ni()),Jt=Ee[gr]&&Ee[gr][Nt]),typeof Jt>"u"||!Jt.length||!Jt[0]){var qt="";Ar=[];for(wr in Ee[gr])this.terminals_[wr]&&wr>De&&Ar.push("'"+this.terminals_[wr]+"'");He.showPosition?qt="Parse error on line "+(I+1)+`:
`+He.showPosition()+`
Expecting `+Ar.join(", ")+", got '"+(this.terminals_[Nt]||Nt)+"'":qt="Parse error on line "+(I+1)+": Unexpected "+(Nt==Fe?"end of input":"'"+(this.terminals_[Nt]||Nt)+"'"),this.parseError(qt,{text:He.match,token:this.terminals_[Nt]||Nt,line:He.yylineno,loc:$r,expected:Ar})}if(Jt[0]instanceof Array&&Jt.length>1)throw new Error("Parse Error: multiple actions possible at state: "+gr+", token: "+Nt);switch(Jt[0]){case 1:ze.push(Nt),Ue.push(He.yytext),je.push(He.yylloc),ze.push(Jt[1]),Nt=null,pe=He.yyleng,qe=He.yytext,I=He.yylineno,$r=He.yylloc;break;case 2:if(It=this.productions_[Jt[1]][1],yr.$=Ue[Ue.length-It],yr._$={first_line:je[je.length-(It||1)].first_line,last_line:je[je.length-1].last_line,first_column:je[je.length-(It||1)].first_column,last_column:je[je.length-1].last_column},qi&&(yr._$.range=[je[je.length-(It||1)].range[0],je[je.length-1].range[1]]),Hr=this.performAction.apply(yr,[qe,pe,I,vt.yy,Jt[1],Ue,je].concat(We)),typeof Hr<"u")return Hr;It&&(ze=ze.slice(0,-1*It*2),Ue=Ue.slice(0,-1*It),je=je.slice(0,-1*It)),ze.push(this.productions_[Jt[1]][0]),Ue.push(yr.$),je.push(yr._$),Mi=Ee[ze[ze.length-2]][ze[ze.length-1]],ze.push(Mi);break;case 3:return!0}}return!0}},he={node:function(Te,Xe,Me){return{type:Te,value:Xe,children:Me}},createNode:function(Te,Xe,Me,ze){var Ue,je=this.node(Xe,Me,[]);for(Ue=3;Ue<arguments.length;Ue++)je.children.push(arguments[Ue]);return je.line=Te[0],je.col=Te[1],je.eline=Te[2],je.ecol=Te[3],je}},ye=function(Te){return[Te.first_line,Te.first_column,Te.last_line,Te.last_column]},Se=(function(){var Te={EOF:1,parseError:function(Me,ze){if(this.yy.parser)this.yy.parser.parseError(Me,ze);else throw new Error(Me)},setInput:function(Xe,Me){return this.yy=Me||this.yy||{},this._input=Xe,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var Xe=this._input[0];this.yytext+=Xe,this.yyleng++,this.offset++,this.match+=Xe,this.matched+=Xe;var Me=Xe.match(/(?:\r\n?|\n).*/g);return Me?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),Xe},unput:function(Xe){var Me=Xe.length,ze=Xe.split(/(?:\r\n?|\n)/g);this._input=Xe+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-Me),this.offset-=Me;var Ue=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),ze.length-1&&(this.yylineno-=ze.length-1);var je=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:ze?(ze.length===Ue.length?this.yylloc.first_column:0)+Ue[Ue.length-ze.length].length-ze[0].length:this.yylloc.first_column-Me},this.options.ranges&&(this.yylloc.range=[je[0],je[0]+this.yyleng-Me]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(Xe){this.unput(this.match.slice(Xe))},pastInput:function(){var Xe=this.matched.substr(0,this.matched.length-this.match.length);return(Xe.length>20?"...":"")+Xe.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var Xe=this.match;return Xe.length<20&&(Xe+=this._input.substr(0,20-Xe.length)),(Xe.substr(0,20)+(Xe.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var Xe=this.pastInput(),Me=new Array(Xe.length+1).join("-");return Xe+this.upcomingInput()+`
`+Me+"^"},test_match:function(Xe,Me){var ze,Ue,je;if(this.options.backtrack_lexer&&(je={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(je.yylloc.range=this.yylloc.range.slice(0))),Ue=Xe[0].match(/(?:\r\n?|\n).*/g),Ue&&(this.yylineno+=Ue.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:Ue?Ue[Ue.length-1].length-Ue[Ue.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+Xe[0].length},this.yytext+=Xe[0],this.match+=Xe[0],this.matches=Xe,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(Xe[0].length),this.matched+=Xe[0],ze=this.performAction.call(this,this.yy,this,Me,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),ze)return ze;if(this._backtrack){for(var Ee in je)this[Ee]=je[Ee];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var Xe,Me,ze,Ue;this._more||(this.yytext="",this.match="");for(var je=this._currentRules(),Ee=0;Ee<je.length;Ee++)if(ze=this._input.match(this.rules[je[Ee]]),ze&&(!Me||ze[0].length>Me[0].length)){if(Me=ze,Ue=Ee,this.options.backtrack_lexer){if(Xe=this.test_match(ze,je[Ee]),Xe!==!1)return Xe;if(this._backtrack){Me=!1;continue}else return!1}else if(!this.options.flex)break}return Me?(Xe=this.test_match(Me,je[Ue]),Xe!==!1?Xe:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var Me=this.next();return Me||this.lex()},begin:function(Me){this.conditionStack.push(Me)},popState:function(){var Me=this.conditionStack.length-1;return Me>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(Me){return Me=this.conditionStack.length-1-Math.abs(Me||0),Me>=0?this.conditionStack[Me]:"INITIAL"},pushState:function(Me){this.begin(Me)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(Me,ze,Ue,je){switch(Ue){case 0:break;case 1:return 78;case 2:return 78;case 3:return 78;case 4:return 77;case 5:return 77;case 6:break;case 7:break;case 8:return 7;case 9:return 12;case 10:return 14;case 11:return 17;case 12:return 15;case 13:return 91;case 14:return 93;case 15:return 19;case 16:return 23;case 17:return 21;case 18:return 75;case 19:return 76;case 20:return 74;case 21:return 80;case 22:return 94;case 23:return 94;case 24:return 82;case 25:return 83;case 26:return 26;case 27:return 27;case 28:return 16;case 29:return"#";case 30:return 34;case 31:return 35;case 32:return 79;case 33:return 64;case 34:return 65;case 35:return 66;case 36:return 8;case 37:return 10;case 38:return 58;case 39:return 57;case 40:return 57;case 41:return 53;case 42:return 54;case 43:return 55;case 44:return 50;case 45:return 51;case 46:return 47;case 47:return 45;case 48:return 48;case 49:return 46;case 50:return 41;case 51:return 43;case 52:return 42;case 53:return 39;case 54:return 37;case 55:return 32;case 56:return 86;case 57:return 5;case 58:return 20;case 59:return"INVALID"}},rules:[/^(?:\s+)/,/^(?:[0-9]*\.?[0-9]+([eE][-+]?[0-9]+))/,/^(?:[0-9]+\.[0-9]*|[0-9]*\.[0-9]+\b)/,/^(?:[0-9]+)/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:\/\/.*)/,/^(?:\/\*(.|\n|\r)*?\*\/)/,/^(?:if\b)/,/^(?:else\b)/,/^(?:while\b)/,/^(?:do\b)/,/^(?:for\b)/,/^(?:function\b)/,/^(?:map\b)/,/^(?:use\b)/,/^(?:return\b)/,/^(?:delete\b)/,/^(?:true\b)/,/^(?:false\b)/,/^(?:null\b)/,/^(?:Infinity\b)/,/^(?:->)/,/^(?:=>)/,/^(?:<<)/,/^(?:>>)/,/^(?:\{)/,/^(?:\})/,/^(?:;)/,/^(?:#)/,/^(?:\?)/,/^(?::)/,/^(?:NaN\b)/,/^(?:\.)/,/^(?:\[)/,/^(?:\])/,/^(?:\()/,/^(?:\))/,/^(?:!)/,/^(?:\^)/,/^(?:\*\*)/,/^(?:\*)/,/^(?:\/)/,/^(?:%)/,/^(?:\+)/,/^(?:-)/,/^(?:<=)/,/^(?:<)/,/^(?:>=)/,/^(?:>)/,/^(?:==)/,/^(?:~=)/,/^(?:!=)/,/^(?:&&)/,/^(?:\|\|)/,/^(?:=)/,/^(?:,)/,/^(?:$)/,/^(?:[A-Za-z_\$][A-Za-z0-9_]*)/,/^(?:.)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59],inclusive:!0}}};return Te})();me.lexer=Se;function Be(){this.yy={}}return Be.prototype=me,me.Parser=Be,new Be})();parser.yy.parseError=parser.parseError;const JessieCode=JXG$1.JessieCode;JXG$1.Composition=function(t){var r,a=this,n=["setAttribute","setParents","prepareUpdate","updateRenderer","update","fullUpdate","highlight","noHighlight"],s=function(o){return function(){var l;for(l in a.elements)a.elements.hasOwnProperty(l)&&JXG$1.exists(a.elements[l][o])&&a.elements[l][o].apply(a.elements[l],arguments);return a}};for(r=0;r<n.length;r++)this[n[r]]=s(n[r]);this.elements={},this.objects=this.elements,this.elementsByName={},this.objectsList=[],this.groups={},this.methodMap={setAttribute:"setAttribute",setProperty:"setAttribute",setParents:"setParents",add:"add",remove:"remove",select:"select"};for(r in t)t.hasOwnProperty(r)&&this.add(r,t[r]);this.dump=!0,this.subs={}};JXG$1.extend(JXG$1.Composition.prototype,{add:function(t,r){return!JXG$1.exists(this[t])&&JXG$1.exists(r)?(JXG$1.exists(r.id)?this.elements[r.id]=r:this.elements[t]=r,JXG$1.exists(r.name)&&(this.elementsByName[r.name]=r),r.on("attribute:name",this.nameListener,this),this.objectsList.push(r),this[t]=r,this.methodMap[t]=r,!0):!1},remove:function(t){var r=!1,a;for(a in this.elements)if(this.elements.hasOwnProperty(a)&&this.elements[a].id===this[t].id){r=!0;break}return r&&(delete this.elements[this[t].id],delete this[t]),r},nameListener:function(t,r,a){delete this.elementsByName[t],this.elementsByName[r]=a},select:function(t){return JXG$1.exists(JXG$1.Board)?JXG$1.Board.prototype.select.call(this,t):new JXG$1.Composition},getParents:function(){return this.parents},getType:function(){return this.elType},getAttributes:function(){var t;for(t in this.subs)this.subs.hasOwnProperty(t)&&this.subs[t].visProp;return this.attr}});const Composition=JXG$1.Composition;JXG$1.Board=function(t,r,a,n,s,o,l,u,h,c,f){if(this.BOARD_MODE_NONE=0,this.BOARD_MODE_DRAG=1,this.BOARD_MODE_MOVE_ORIGIN=2,this.BOARD_MODE_ZOOM=17,this.BOARD_QUALITY_LOW=1,this.BOARD_QUALITY_HIGH=2,JXG$1.exists(f.document)&&f.document!==!1?this.document=f.document:JXG$1.isBrowser&&(this.document=document),this.container="",this.id="",this.containerObj=null,JXG$1.isString(t)?(this.container=t,this.containerObj=JXG$1.isBrowser?this.document.getElementById(this.container):null):JXG$1.isBrowser&&(this.containerObj=t,this.container=this.containerObj.getAttribute("id"),this.container===null&&(this.container="null"+parseInt(Math.random()*16777216).toString())),JXG$1.isBrowser&&r.type!=="no"&&this.containerObj===null)throw new Error(`
JSXGraph: HTML container element "`+t+'" not found.');JXG$1.exists(a)&&a!==""&&JXG$1.isBrowser&&!JXG$1.exists(this.document.getElementById(a))?this.id=a:this.id=this.generateId(),this.renderer=r,this.grids=[],this.options=JXG$1.deepCopy(Options$1),this.attr=f,this.attr.theme!=="default"&&JXG$1.exists(JXG$1.themes[this.attr.theme])&&JXG$1.mergeAttr(this.options,JXG$1.themes[this.attr.theme],!0),this.dimension=2,this.jc=new JessieCode,this.jc.use(this),this.origin={},this.origin.usrCoords=[1,0,0],this.origin.scrCoords=[1,n[0],n[1]],this.zoomX=s,this.zoomY=o,this.unitX=l*this.zoomX,this.unitY=u*this.zoomY,this.keepaspectratio=!1,this.canvasWidth=h,this.canvasHeight=c,EventEmitter.eventify(this),this.hooks=[],this.dependentBoards=[],this.inUpdate=!1,this.objects={},this.objectsList=[],this.groups={},this.animationObjects={},this.highlightedObjects={},this.numObjects=0,this.elementsByName={},this.mode=this.BOARD_MODE_NONE,this.updateQuality=this.BOARD_QUALITY_HIGH,this.isSuspendedRedraw=!1,this.calculateSnapSizes(),this.drag_dx=0,this.drag_dy=0,this.drag_position=[0,0],this.mouse={},this.touches=[],this.xmlString="",this.cPos=[],this.touchMoveLast=0,this.touchMoveLastId=1/0,this.positionAccessLast=0,this.downObjects=[],this.clickObjects={},this.focusObjects=[],(this.attr.showcopyright||this.attr.showlogo)&&this.renderer.displayLogo(Const.licenseLogo,parseInt(this.options.text.fontSize,10),this),this.attr.showcopyright&&this.renderer.displayCopyright(Const.licenseText,parseInt(this.options.text.fontSize,10)),this.needsFullUpdate=!1,this.reducedUpdate=!1,this.currentCBDef="none",this.geonextCompatibilityMode=!1,this.options.text.useASCIIMathML&&translateASCIIMath?init():this.options.text.useASCIIMathML=!1,this.hasMouseHandlers=!1,this.hasTouchHandlers=!1,this.hasPointerHandlers=!1,this.hasWheelHandlers=!1,this.hasMouseUp=!1,this.hasTouchEnd=!1,this.hasPointerUp=!1,this.resizeHandlers=[],this._drag_offset=[0,0],this._inputDevice="mouse",this._board_touches=[],this.selectingMode=!1,this.isSelecting=!1,this._isScrolling=!1,this._isResizing=!1,this._change3DView=!1,this.selectingBox=[[0,0],[0,0]],this.userLog=[],this.mathLib=Math,this.mathLibJXG=JXG$1.Math,this.attr.registerevents===!0?this.attr.registerevents={fullscreen:!0,keyboard:!0,pointer:!0,resize:!0,wheel:!0}:typeof this.attr.registerevents=="object"&&(JXG$1.exists(this.attr.registerevents.fullscreen)||(this.attr.registerevents.fullscreen=!0),JXG$1.exists(this.attr.registerevents.keyboard)||(this.attr.registerevents.keyboard=!0),JXG$1.exists(this.attr.registerevents.pointer)||(this.attr.registerevents.pointer=!0),JXG$1.exists(this.attr.registerevents.resize)||(this.attr.registerevents.resize=!0),JXG$1.exists(this.attr.registerevents.wheel)||(this.attr.registerevents.wheel=!0)),this.attr.registerevents!==!1&&(this.attr.registerevents.fullscreen&&this.addFullscreenEventHandlers(),this.attr.registerevents.keyboard&&this.addKeyboardEventHandlers(),this.attr.registerevents.pointer&&this.addEventHandlers(),this.attr.registerevents.resize&&this.addResizeEventHandlers(),this.attr.registerevents.wheel&&this.addWheelEventHandlers()),this.methodMap={update:"update",fullUpdate:"fullUpdate",on:"on",off:"off",trigger:"trigger",setAttribute:"setAttribute",setBoundingBox:"setBoundingBox",setView:"setBoundingBox",getBoundingBox:"getBoundingBox",BoundingBox:"getBoundingBox",getView:"getBoundingBox",View:"getBoundingBox",migratePoint:"migratePoint",colorblind:"emulateColorblindness",suspendUpdate:"suspendUpdate",unsuspendUpdate:"unsuspendUpdate",clearTraces:"clearTraces",left:"clickLeftArrow",right:"clickRightArrow",up:"clickUpArrow",down:"clickDownArrow",zoomIn:"zoomIn",zoomOut:"zoomOut",zoom100:"zoom100",zoomElements:"zoomElements",remove:"removeObject",removeObject:"removeObject"}};JXG$1.extend(JXG$1.Board.prototype,{generateName:function(t){var r,a,n=this.attr.maxnamelength,s="",o="",l=[],u="";if(t.type===Const.OBJECT_TYPE_TICKS)return"";for(JXG$1.isPoint(t)||JXG$1.isPoint3D(t)?r=["","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"]:t.type===Const.OBJECT_TYPE_ANGLE?r=["","&alpha;","&beta;","&gamma;","&delta;","&epsilon;","&zeta;","&eta;","&theta;","&iota;","&kappa;","&lambda;","&mu;","&nu;","&xi;","&omicron;","&pi;","&rho;","&sigma;","&tau;","&upsilon;","&phi;","&chi;","&psi;","&omega;"]:r=["","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],!JXG$1.isPoint(t)&&!JXG$1.isPoint3D(t)&&t.elementClass!==Const.OBJECT_CLASS_LINE&&t.type!==Const.OBJECT_TYPE_ANGLE&&(t.type===Const.OBJECT_TYPE_POLYGON?s="P_{":t.elementClass===Const.OBJECT_CLASS_CIRCLE?s="k_{":t.elementClass===Const.OBJECT_CLASS_TEXT?s="t_{":s="s_{",o="}"),a=0;a<n;a++)l[a]=0;for(;l[n-1]<r.length;){for(l[0]=1;l[0]<r.length;l[0]++){for(u=s,a=n;a>0;a--)u+=r[l[a-1]];if(!JXG$1.exists(this.elementsByName[u+o]))return u+o}for(l[0]=r.length,a=1;a<n;a++)l[a-1]===r.length&&(l[a-1]=1,l[a]+=1)}return""},generateId:function(){for(var t=1;JXG$1.exists(JXG$1.boards["jxgBoard"+t]);)t=Math.round(Math.random()*16777216);return"jxgBoard"+t},setId:function(t,r){var a,n=this.numObjects,s=t.id;if(this.numObjects+=1,s===""||!JXG$1.exists(s))for(s=this.id+r+n;JXG$1.exists(this.objects[s]);)a=Math.round(Math.random()*65535),s=this.id+r+n+"-"+a;return t.id=s,this.objects[s]=t,t._pos=this.objectsList.length,this.objectsList[this.objectsList.length]=t,s},finalizeAdding:function(t){t.evalVisProp("visible")===!1&&this.renderer.display(t,!1)},finalizeLabel:function(t){t.hasLabel&&!t.label.evalVisProp("islabel")&&t.label.evalVisProp("visible")===!1&&this.renderer.display(t.label,!1)},checkFrameRate:function(t){var r=!1,a=new Date().getTime();return JXG$1.exists(t.pointerId)&&this.touchMoveLastId!==t.pointerId&&(r=!0,this.touchMoveLastId=t.pointerId),!r&&(a-this.touchMoveLast)*this.attr.maxframerate>=1e3&&(r=!0),r&&(this.touchMoveLast=a),r},getCoordsTopLeftCorner:function(){var t,r,a,n=this.document.ownerDocument||this.document,s=n.documentElement||this.document.body.parentNode,o=n.body,l=this.containerObj,u,h;if(this.cPos.length>0&&(this.mode===this.BOARD_MODE_DRAG||this.mode===this.BOARD_MODE_MOVE_ORIGIN||new Date().getTime()-this.positionAccessLast<1e3))return this.cPos;if(this.positionAccessLast=new Date().getTime(),l.getBoundingClientRect){for(a=l.getBoundingClientRect(),u=1,h=l;h&&JXG$1.exists(h.parentNode);)JXG$1.exists(h.style)&&JXG$1.exists(h.style.zoom)&&h.style.zoom!==""&&(u*=parseFloat(h.style.zoom)),h=h.parentNode;return t=[a.left*u,a.top*u],t[0]+=JXG$1.getProp(l,"border-left-width"),t[1]+=JXG$1.getProp(l,"border-top-width"),this.renderer.type!=="vml"&&(t[0]+=JXG$1.getProp(l,"padding-left"),t[1]+=JXG$1.getProp(l,"padding-top")),this.cPos=t.slice(),this.cPos}return t=JXG$1.getOffset(l),r=this.document.documentElement.ownerDocument,!this.containerObj.currentStyle&&r.defaultView&&(t[0]+=JXG$1.getProp(s,"margin-left"),t[1]+=JXG$1.getProp(s,"margin-top"),t[0]+=JXG$1.getProp(s,"border-left-width"),t[1]+=JXG$1.getProp(s,"border-top-width"),t[0]+=JXG$1.getProp(s,"padding-left"),t[1]+=JXG$1.getProp(s,"padding-top")),o&&(t[0]+=JXG$1.getProp(o,"left"),t[1]+=JXG$1.getProp(o,"top")),typeof google=="object"&&google.translate&&(t[0]+=10,t[1]+=25),t[0]+=JXG$1.getProp(l,"border-left-width"),t[1]+=JXG$1.getProp(l,"border-top-width"),this.renderer.type!=="vml"&&(t[0]+=JXG$1.getProp(l,"padding-left"),t[1]+=JXG$1.getProp(l,"padding-top")),t[0]+=this.attr.offsetx,t[1]+=this.attr.offsety,this.cPos=t.slice(),this.cPos},getPointLoc:function(t,r){var a,n,s,o;return a=this.getBoundingBox(),n=t,n.length===2&&n.unshift(void 0),s=[0,0],o=r||0,JXG$1.isNumber(o)&&(o=[o,o,o,o]),n[1]>a[2]-o[1]&&(s[0]=1),n[1]<a[0]+o[3]&&(s[0]=-1),n[2]>a[1]-o[0]&&(s[1]=1),n[2]<a[3]+o[2]&&(s[1]=-1),s},getLocationOrigin:function(t){return this.getPointLoc([0,0],t)},getMousePosition:function(t,r){var a=this.getCoordsTopLeftCorner(),n,s;return n=JXG$1.getPosition(t,r,this.document),this.updateCSSTransforms(),s=[1,n[0]-a[0],n[1]-a[1]],s=Mat.matVecMult(this.cssTransMat,s),s[1]/=s[0],s[2]/=s[0],[s[1],s[2]]},initMoveOrigin:function(t,r){this.drag_dx=t-this.origin.scrCoords[1],this.drag_dy=r-this.origin.scrCoords[2],this.mode=this.BOARD_MODE_MOVE_ORIGIN,this.updateQuality=this.BOARD_QUALITY_LOW},initMoveObject:function(t,r,a,n){var s,o,l=[],u=[],h,c=this.objectsList.length,f={visProp:{layer:-1e4}};for(this._shiftKey=a.shiftKey,this._ctrlKey=a.ctrlKey,o=0;o<c;o++)s=this.objectsList[o],h=s.hasPoint&&s.hasPoint(t,r),s.visPropCalc.visible&&h&&(s.triggerEventHandlers([n+"down","down"],[a]),this.downObjects.push(s)),h&&s.isDraggable&&s.visPropCalc.visible&&(this.geonextCompatibilityMode&&(JXG$1.isPoint(s)||s.elementClass===Const.OBJECT_CLASS_TEXT)||!this.geonextCompatibilityMode)&&!s.evalVisProp("fixed")&&(s.visProp.layer>f.visProp.layer||s.visProp.layer===f.visProp.layer&&s.lastDragTime.getTime()>=f.lastDragTime.getTime())&&(!this.attr.ignorelabels||!JXG$1.exists(f.label)||s!==f.label)&&(f=s,l.push(f),JXG$1.exists(f.coords)?f.elementClass===Const.OBJECT_CLASS_POINT||f.relativeCoords?u.push(Stat.subtract(f.coords.scrCoords.slice(1),[t,r])):u.push(Stat.subtract(f.actualCoords.scrCoords.slice(1),[t,r])):u.push([0,0]));return this.attr.drag.enabled&&l.length>0&&(this.mode=this.BOARD_MODE_DRAG),this.attr.takefirst?(l.length=1,this._drag_offset=u[0]):(l=l.slice(-1),this._drag_offset=u[u.length-1]),this._drag_offset||(this._drag_offset=[0,0]),this.renderer.type==="svg"&&JXG$1.exists(l[0])&&l[0].evalVisProp("dragtotopoflayer")&&l.length===1&&JXG$1.exists(l[0].rendNode)&&l[0].rendNode.parentNode.appendChild(l[0].rendNode),l.length>=1&&(l[0].highlight(!0),this.triggerEventHandlers(["mousehit","hit"],[a,l[0]])),l},moveObject:function(t,r,a,n,s){var o=new Coords(Const.COORDS_BY_SCREEN,this.getScrCoordsOfMouse(t,r),this),l,u,h;a&&a.obj&&(l=a.obj,l.coords&&(u=l.coords.scrCoords.slice()),this.addLogEntry("drag",l,o.usrCoords.slice(1)),this.drag_position=[o.scrCoords[1],o.scrCoords[2]],this.drag_position=Stat.add(this.drag_position,this._drag_offset),this._shiftKey=n.shiftKey,this._ctrlKey=n.ctrlKey,JXG$1.exists(l.coords)?l.setPositionDirectly(Const.COORDS_BY_SCREEN,this.drag_position,[t,r]):(this.displayInfobox(!1),isNaN(a.targets[0].Xprev+a.targets[0].Yprev)||l.setPositionDirectly(Const.COORDS_BY_SCREEN,[o.scrCoords[1],o.scrCoords[2]],[a.targets[0].Xprev,a.targets[0].Yprev]),a.targets[0].Xprev=o.scrCoords[1],a.targets[0].Yprev=o.scrCoords[2]),JXG$1.exists(l.coords)&&(l.prepareUpdate().update(!1).updateRenderer(),this.updateInfobox(l),l.prepareUpdate().update(!0).updateRenderer()),l.coords&&(h=l.coords.scrCoords),(!l.coords||u[1]!==h[1]||u[2]!==h[2])&&(l.triggerEventHandlers([s+"drag","drag"],[n]),this.update(l)),l.highlight(!0),this.triggerEventHandlers(["mousehit","hit"],[n,l]),l.lastDragTime=new Date)},twoFingerMove:function(t,r,a){var n;if(JXG$1.exists(t)&&JXG$1.exists(t.obj))n=t.obj;else return;n.elementClass===Const.OBJECT_CLASS_LINE||n.type===Const.OBJECT_TYPE_POLYGON?this.twoFingerTouchObject(t.targets,n,r):n.elementClass===Const.OBJECT_CLASS_CIRCLE&&this.twoFingerTouchCircle(t.targets,n,r),a&&n.triggerEventHandlers(["touchdrag","drag"],[a])},getTwoFingerTransform(t,r,a,n){var s,o,l,u,h,c,f,d,p,v,y,b,_,N,M,C,$,w,A;return s=new Coords(Const.COORDS_BY_SCREEN,[t.Xprev,t.Yprev],this).usrCoords,o=s[1],l=s[2],s=new Coords(Const.COORDS_BY_SCREEN,[r.Xprev,r.Yprev],this).usrCoords,u=s[1],h=s[2],s=new Coords(Const.COORDS_BY_SCREEN,[t.X,t.Y],this).usrCoords,d=s[1],p=s[2],s=new Coords(Const.COORDS_BY_SCREEN,[r.X,r.Y],this).usrCoords,v=s[1],y=s[2],c=u-o,f=h-l,b=v-d,_=y-p,C=c*c+f*f,N=(b*c+_*f)/C,M=(_*c-b*f)/C,a||(A=Mat.hypot(N,M),N/=A,M/=A),n||(M=0),$=.5*(d+v-N*(o+u)+M*(l+h)),w=.5*(p+y-M*(o+u)-N*(l+h)),[1,0,0,$,N,-M,w,M,N]},twoFingerTouchObject:function(t,r,a){var n,s,o,l,u,h=!1;if(JXG$1.exists(t[0])&&JXG$1.exists(t[1])&&!isNaN(t[0].Xprev+t[0].Yprev+t[1].Xprev+t[1].Yprev)){if(s=this.getTwoFingerTransform(t[0],t[1],r.evalVisProp("scalable"),r.evalVisProp("rotatable")),n=this.create("transform",s,{type:"generic"}),n.update(),r.elementClass===Const.OBJECT_CLASS_LINE)o=[],r.point1.draggable()&&o.push(r.point1),r.point2.draggable()&&o.push(r.point2),n.applyOnce(o);else if(r.type===Const.OBJECT_TYPE_POLYGON){for(u=r.vertices.length-1,h=r.evalVisProp("snaptogrid")||r.evalVisProp("snaptopoints"),l=0;l<u&&!h;++l)h=h||r.vertices[l].evalVisProp("snaptogrid")||r.vertices[l].evalVisProp("snaptopoints"),h=h||!r.vertices[l].draggable();if(!h){for(o=[],l=0;l<u;++l)r.vertices[l].draggable()&&o.push(r.vertices[l]);n.applyOnce(o)}}this.update(),r.highlight(!0)}},twoFingerTouchCircle:function(t,r,a){var n,s,o,l,u,h,c,f,d,p,v;r.method==="pointCircle"||r.method==="pointLine"||JXG$1.exists(t[0])&&JXG$1.exists(t[1])&&!isNaN(t[0].Xprev+t[0].Yprev+t[1].Xprev+t[1].Yprev)&&(a===t[0].num?(n=t[1],s=t[0]):(n=t[0],s=t[1]),u=new Coords(Const.COORDS_BY_SCREEN,[n.Xprev,n.Yprev],this).usrCoords,l=new Coords(Const.COORDS_BY_SCREEN,[s.Xprev,s.Yprev],this).usrCoords,o=new Coords(Const.COORDS_BY_SCREEN,[s.X,s.Y],this).usrCoords,c=Geometry.rad(l.slice(1),u.slice(1),o.slice(1)),f=this.create("transform",[-u[1],-u[2]],{type:"translate"}),d=this.create("transform",[c],{type:"rotate"}),f.melt(d),r.evalVisProp("scalable")&&(h=Geometry.distance(u,o)/Geometry.distance(u,l),p=this.create("transform",[h,h],{type:"scale"}),f.melt(p)),v=this.create("transform",[u[1],u[2]],{type:"translate"}),f.melt(v),r.center.draggable()&&f.applyOnce([r.center]),r.method==="twoPoints"?r.point2.draggable()&&f.applyOnce([r.point2]):r.method==="pointRadius"&&JXG$1.isNumber(r.updateRadius.origin)&&r.setRadius(r.radius*h),this.update(r.center),r.highlight(!0))},highlightElements:function(t,r,a,n){var s,o,l,u={},h=this.objectsList.length;for(s=0;s<h;s++)o=this.objectsList[s],l=o.id,JXG$1.exists(o.hasPoint)&&o.visPropCalc.visible&&o.hasPoint(t,r)&&(this.updateInfobox(o),JXG$1.exists(this.highlightedObjects[l])||(u[l]=o,o.highlight(),this.triggerEventHandlers(["mousehit","hit"],[a,o,n])),o.mouseover?o.triggerEventHandlers(["mousemove","move"],[a]):(o.triggerEventHandlers(["mouseover","over"],[a]),o.mouseover=!0));for(s=0;s<h;s++)o=this.objectsList[s],l=o.id,o.mouseover&&(u[l]||(o.triggerEventHandlers(["mouseout","out"],[a]),o.mouseover=!1))},saveStartPos:function(t,r){var a=[],n,s;if(t.type===Const.OBJECT_TYPE_TICKS)a.push([1,NaN,NaN]);else if(t.elementClass===Const.OBJECT_CLASS_LINE)a.push(t.point1.coords.usrCoords),a.push(t.point2.coords.usrCoords);else if(t.elementClass===Const.OBJECT_CLASS_CIRCLE)a.push(t.center.coords.usrCoords),t.method==="twoPoints"&&a.push(t.point2.coords.usrCoords);else if(t.type===Const.OBJECT_TYPE_POLYGON)for(s=t.vertices.length-1,n=0;n<s;n++)a.push(t.vertices[n].coords.usrCoords);else if(t.type===Const.OBJECT_TYPE_SECTOR)a.push(t.point1.coords.usrCoords),a.push(t.point2.coords.usrCoords),a.push(t.point3.coords.usrCoords);else if(JXG$1.isPoint(t)||t.type===Const.OBJECT_TYPE_GLIDER)a.push(t.coords.usrCoords);else if(t.elementClass===Const.OBJECT_CLASS_CURVE)t.points.length>0&&a.push(t.points[0].usrCoords);else try{a.push(t.coords.usrCoords)}catch(o){JXG$1.debug("JSXGraph+ saveStartPos: obj.coords.usrCoords not available: "+o)}for(s=a.length,n=0;n<s;n++)r.Zstart.push(a[n][0]),r.Xstart.push(a[n][1]),r.Ystart.push(a[n][2])},mouseOriginMoveStart:function(t){var r,a;return r=this._isRequiredKeyPressed(t,"pan"),r&&(a=this.getMousePosition(t),this.initMoveOrigin(a[0],a[1])),r},mouseOriginMove:function(t){var r=this.mode===this.BOARD_MODE_MOVE_ORIGIN,a;return r&&(a=this.getMousePosition(t),this.moveOrigin(a[0],a[1],!0)),r},touchStartMoveOriginOneFinger:function(t){var r=t.touches,a,n;return a=this.attr.pan.enabled&&!this.attr.pan.needtwofingers&&r.length===1,a&&(n=this.getMousePosition(t,0),this.initMoveOrigin(n[0],n[1])),a},touchOriginMove:function(t){var r=this.mode===this.BOARD_MODE_MOVE_ORIGIN,a;return r&&(a=this.getMousePosition(t,0),this.moveOrigin(a[0],a[1],!0)),r},originMoveEnd:function(){this.updateQuality=this.BOARD_QUALITY_HIGH,this.mode=this.BOARD_MODE_NONE},suppressDefault:function(t){return JXG$1.exists(t)&&t.preventDefault(),!1},addEventHandlers:function(){JXG$1.supportsPointerEvents()?this.addPointerEventHandlers():(this.addMouseEventHandlers(),this.addTouchEventHandlers()),this.containerObj!==null&&JXG$1.addEvent(this.containerObj,"contextmenu",this.suppressDefault,this)},removeEventHandlers:function(){(this.hasPointerHandlers||this.hasMouseHandlers||this.hasTouchHandlers)&&this.containerObj!==null&&JXG$1.removeEvent(this.containerObj,"contextmenu",this.suppressDefault,this),this.removeMouseEventHandlers(),this.removeTouchEventHandlers(),this.removePointerEventHandlers(),this.removeFullscreenEventHandlers(),this.removeKeyboardEventHandlers(),this.removeResizeEventHandlers()},addResizeEventHandlers:function(){if(this.resizeHandlers=[],JXG$1.isBrowser){try{this.startResizeObserver(),this.resizeHandlers.push("resizeobserver")}catch{JXG$1.addEvent(window,"resize",this.resizeListener,this),this.startIntersectionObserver(),this.resizeHandlers.push("resize")}JXG$1.addEvent(window,"scroll",this.scrollListener,this),this.resizeHandlers.push("scroll");try{window.matchMedia("print").addEventListener("change",this.printListenerMatch.bind(this)),window.matchMedia("screen").addEventListener("change",this.printListenerMatch.bind(this)),this.resizeHandlers.push("print")}catch(t){JXG$1.debug("Error adding printListener",t)}}},removeResizeEventHandlers:function(){var t,r;if(this.resizeHandlers.length>0&&JXG$1.isBrowser){for(t=0;t<this.resizeHandlers.length;t++)switch(r=this.resizeHandlers[t],r){case"resizeobserver":JXG$1.exists(this.resizeObserver)&&this.stopResizeObserver();break;case"resize":JXG$1.removeEvent(window,"resize",this.resizeListener,this),JXG$1.exists(this.intersectionObserver)&&this.stopIntersectionObserver();break;case"scroll":JXG$1.removeEvent(window,"scroll",this.scrollListener,this);break;case"print":window.matchMedia("print").removeEventListener("change",this.printListenerMatch.bind(this),!1),window.matchMedia("screen").removeEventListener("change",this.printListenerMatch.bind(this),!1);break}this.resizeHandlers=[]}},addPointerEventHandlers:function(){if(!this.hasPointerHandlers&&JXG$1.isBrowser){var t=this.attr.movetarget||this.containerObj;window.navigator.msPointerEnabled?(JXG$1.addEvent(this.containerObj,"MSPointerDown",this.pointerDownListener,this),JXG$1.addEvent(t,"MSPointerMove",this.pointerMoveListener,this)):(JXG$1.addEvent(this.containerObj,"pointerdown",this.pointerDownListener,this),JXG$1.addEvent(t,"pointermove",this.pointerMoveListener,this),JXG$1.addEvent(t,"pointerleave",this.pointerLeaveListener,this),JXG$1.addEvent(t,"click",this.pointerClickListener,this),JXG$1.addEvent(t,"dblclick",this.pointerDblClickListener,this)),this.containerObj!==null&&(this.containerObj.style.touchAction="none"),this.hasPointerHandlers=!0}},addMouseEventHandlers:function(){if(!this.hasMouseHandlers&&JXG$1.isBrowser){var t=this.attr.movetarget||this.containerObj;JXG$1.addEvent(this.containerObj,"mousedown",this.mouseDownListener,this),JXG$1.addEvent(t,"mousemove",this.mouseMoveListener,this),JXG$1.addEvent(t,"click",this.mouseClickListener,this),JXG$1.addEvent(t,"dblclick",this.mouseDblClickListener,this),this.hasMouseHandlers=!0}},addTouchEventHandlers:function(t){if(!this.hasTouchHandlers&&JXG$1.isBrowser){var r=this.attr.movetarget||this.containerObj;JXG$1.addEvent(this.containerObj,"touchstart",this.touchStartListener,this),JXG$1.addEvent(r,"touchmove",this.touchMoveListener,this),this.hasTouchHandlers=!0}},addWheelEventHandlers:function(){!this.hasWheelHandlers&&JXG$1.isBrowser&&(JXG$1.addEvent(this.containerObj,"mousewheel",this.mouseWheelListener,this),JXG$1.addEvent(this.containerObj,"DOMMouseScroll",this.mouseWheelListener,this),this.hasWheelHandlers=!0)},addFullscreenEventHandlers:function(){var t,r=["fullscreenchange","mozfullscreenchange","webkitfullscreenchange","msfullscreenchange"],a=r.length;if(!this.hasFullscreenEventHandlers&&JXG$1.isBrowser){for(t=0;t<a;t++)JXG$1.addEvent(this.document,r[t],this.fullscreenListener,this);this.hasFullscreenEventHandlers=!0}},addKeyboardEventHandlers:function(){this.attr.keyboard.enabled&&!this.hasKeyboardHandlers&&JXG$1.isBrowser&&(JXG$1.addEvent(this.containerObj,"keydown",this.keyDownListener,this),JXG$1.addEvent(this.containerObj,"focusin",this.keyFocusInListener,this),JXG$1.addEvent(this.containerObj,"focusout",this.keyFocusOutListener,this),this.hasKeyboardHandlers=!0)},removeKeyboardEventHandlers:function(){this.hasKeyboardHandlers&&JXG$1.isBrowser&&(JXG$1.removeEvent(this.containerObj,"keydown",this.keyDownListener,this),JXG$1.removeEvent(this.containerObj,"focusin",this.keyFocusInListener,this),JXG$1.removeEvent(this.containerObj,"focusout",this.keyFocusOutListener,this),this.hasKeyboardHandlers=!1)},removeFullscreenEventHandlers:function(){var t,r=["fullscreenchange","mozfullscreenchange","webkitfullscreenchange","msfullscreenchange"],a=r.length;if(this.hasFullscreenEventHandlers&&JXG$1.isBrowser){for(t=0;t<a;t++)JXG$1.removeEvent(this.document,r[t],this.fullscreenListener,this);this.hasFullscreenEventHandlers=!1}},removePointerEventHandlers:function(){if(this.hasPointerHandlers&&JXG$1.isBrowser){var t=this.attr.movetarget||this.containerObj;window.navigator.msPointerEnabled?(JXG$1.removeEvent(this.containerObj,"MSPointerDown",this.pointerDownListener,this),JXG$1.removeEvent(t,"MSPointerMove",this.pointerMoveListener,this)):(JXG$1.removeEvent(this.containerObj,"pointerdown",this.pointerDownListener,this),JXG$1.removeEvent(t,"pointermove",this.pointerMoveListener,this),JXG$1.removeEvent(t,"pointerleave",this.pointerLeaveListener,this),JXG$1.removeEvent(t,"click",this.pointerClickListener,this),JXG$1.removeEvent(t,"dblclick",this.pointerDblClickListener,this)),this.hasWheelHandlers&&(JXG$1.removeEvent(this.containerObj,"mousewheel",this.mouseWheelListener,this),JXG$1.removeEvent(this.containerObj,"DOMMouseScroll",this.mouseWheelListener,this)),this.hasPointerUp&&(window.navigator.msPointerEnabled?JXG$1.removeEvent(this.document,"MSPointerUp",this.pointerUpListener,this):(JXG$1.removeEvent(this.document,"pointerup",this.pointerUpListener,this),JXG$1.removeEvent(this.document,"pointercancel",this.pointerUpListener,this)),this.hasPointerUp=!1),this.hasPointerHandlers=!1}},removeMouseEventHandlers:function(){if(this.hasMouseHandlers&&JXG$1.isBrowser){var t=this.attr.movetarget||this.containerObj;JXG$1.removeEvent(this.containerObj,"mousedown",this.mouseDownListener,this),JXG$1.removeEvent(t,"mousemove",this.mouseMoveListener,this),JXG$1.removeEvent(t,"click",this.mouseClickListener,this),JXG$1.removeEvent(t,"dblclick",this.mouseDblClickListener,this),this.hasMouseUp&&(JXG$1.removeEvent(this.document,"mouseup",this.mouseUpListener,this),this.hasMouseUp=!1),this.hasWheelHandlers&&(JXG$1.removeEvent(this.containerObj,"mousewheel",this.mouseWheelListener,this),JXG$1.removeEvent(this.containerObj,"DOMMouseScroll",this.mouseWheelListener,this)),this.hasMouseHandlers=!1}},removeTouchEventHandlers:function(){if(this.hasTouchHandlers&&JXG$1.isBrowser){var t=this.attr.movetarget||this.containerObj;JXG$1.removeEvent(this.containerObj,"touchstart",this.touchStartListener,this),JXG$1.removeEvent(t,"touchmove",this.touchMoveListener,this),this.hasTouchEnd&&(JXG$1.removeEvent(this.document,"touchend",this.touchEndListener,this),this.hasTouchEnd=!1),this.hasTouchHandlers=!1}},clickLeftArrow:function(){return this.moveOrigin(this.origin.scrCoords[1]+this.canvasWidth*.1,this.origin.scrCoords[2]),this},clickRightArrow:function(){return this.moveOrigin(this.origin.scrCoords[1]-this.canvasWidth*.1,this.origin.scrCoords[2]),this},clickUpArrow:function(){return this.moveOrigin(this.origin.scrCoords[1],this.origin.scrCoords[2]-this.canvasHeight*.1),this},clickDownArrow:function(){return this.moveOrigin(this.origin.scrCoords[1],this.origin.scrCoords[2]+this.canvasHeight*.1),this},gestureChangeListener:function(t){var r,a=[],n=[],s,o=10,l=!1,u=this.attr.zoom.factorx,h=this.attr.zoom.factory,c,f,d,p,v,y=!1,b,_,N,M;return this.mode!==this.BOARD_MODE_ZOOM?!0:(t.preventDefault(),f=Geometry.distance([t.touches[0].clientX,t.touches[0].clientY],[t.touches[1].clientX,t.touches[1].clientY],2),t.scale===void 0&&(t.scale=f/this.prevDist),!JXG$1.exists(this.prevCoords)||(a=[t.touches[0].clientX-this.prevCoords[0][0],t.touches[0].clientY-this.prevCoords[0][1]],n=[t.touches[1].clientX-this.prevCoords[1][0],t.touches[1].clientY-this.prevCoords[1][1]],a[0]*a[0]+a[1]*a[1]<o*o&&n[0]*n[0]+n[1]*n[1]<o*o)||(s=Geometry.rad(a,[0,0],n),this.isPreviousGesture!=="pan"&&Math.abs(s)>Math.PI*.2&&Math.abs(s)<Math.PI*1.8&&(l=!0),this.isPreviousGesture!=="pan"&&!l&&(Math.abs(t.scale)<.77||Math.abs(t.scale)>1.3)&&(l=!0),c=t.scale/this.prevScale,this.prevScale=t.scale,this.prevCoords=[[t.touches[0].clientX,t.touches[0].clientY],[t.touches[1].clientX,t.touches[1].clientY]],r=new Coords(Const.COORDS_BY_SCREEN,this.getMousePosition(t,0),this),this.attr.pan.enabled&&this.attr.pan.needtwofingers&&!l?(this.isPreviousGesture="pan",this.moveOrigin(r.scrCoords[1],r.scrCoords[2],!0)):this.attr.zoom.enabled&&Math.abs(c-1)<.5&&(y=!1,v=this.attr.zoom.center,(this.attr.zoom.pinchhorizontal||this.attr.zoom.pinchvertical)&&(b=Math.abs(t.touches[0].clientX-t.touches[1].clientX),_=Math.abs(t.touches[0].clientY-t.touches[1].clientY),d=Math.abs(Math.atan2(_,b)),p=Math.PI*this.attr.zoom.pinchsensitivity/90),!this.keepaspectratio&&this.attr.zoom.pinchhorizontal&&d<p?(this.attr.zoom.factorx=c,this.attr.zoom.factory=1,N=0,M=0,y=!0):!this.keepaspectratio&&this.attr.zoom.pinchvertical&&Math.abs(d-Math.PI*.5)<p?(this.attr.zoom.factorx=1,this.attr.zoom.factory=c,N=0,M=0,y=!0):this.attr.zoom.pinch&&(this.attr.zoom.factorx=c,this.attr.zoom.factory=c,N=r.usrCoords[1],M=r.usrCoords[2],y=!0),y&&(v==="board"?this.zoomIn():this.zoomIn(N,M),this.attr.zoom.factorx=u,this.attr.zoom.factory=h))),!1)},gestureStartListener:function(t){var r;return t.preventDefault(),this.prevScale=1,this.prevDist=Geometry.distance([t.touches[0].clientX,t.touches[0].clientY],[t.touches[1].clientX,t.touches[1].clientY],2),this.prevCoords=[[t.touches[0].clientX,t.touches[0].clientY],[t.touches[1].clientX,t.touches[1].clientY]],this.isPreviousGesture="none",r=this.getMousePosition(t,0),this.initMoveOrigin(r[0],r[1]),this.mode=this.BOARD_MODE_ZOOM,!1},_isRequiredKeyPressed:function(t,r){var a=this.attr[r];return a.enabled?!!((a.needshift&&t.shiftKey||!a.needshift&&!t.shiftKey)&&(a.needctrl&&t.ctrlKey||!a.needctrl&&!t.ctrlKey)):!1},_isPointerRegistered:function(t){var r,a=this._board_touches.length;for(r=0;r<a;r++)if(this._board_touches[r].pointerId===t.pointerId)return!0;return!1},_pointerStorePosition:function(t){var r,a;for(r=0,a=!1;r<this._board_touches.length;r++)if(this._board_touches[r].pointerId===t.pointerId){this._board_touches[r].clientX=t.clientX,this._board_touches[r].clientY=t.clientY,a=!0;break}return!a&&this._board_touches.length<2&&this._board_touches.push({pointerId:t.pointerId,clientX:t.clientX,clientY:t.clientY}),this},_pointerRemoveTouches:function(t){var r;for(r=0;r<this._board_touches.length;r++)if(this._board_touches[r].pointerId===t.pointerId){this._board_touches.splice(r,1);break}return this},_pointerClearTouches:function(t){this._board_touches.length>0&&this.dehighlightAll(),this.updateQuality=this.BOARD_QUALITY_HIGH,this.mode=this.BOARD_MODE_NONE,this._board_touches=[],this.touches=[]},_getPointerInputDevice:function(t){if(JXG$1.isBrowser){if(t.pointerType==="touch"||window.navigator.msMaxTouchPoints&&window.navigator.msMaxTouchPoints>1)return"touch";if(t.pointerType==="mouse")return"mouse";if(t.pointerType==="pen")return"pen"}return"mouse"},pointerDownListener:function(t,r,a){var n,s,o,l,u,h,c,f="mouse",d,p,v;if(!r&&this._isPointerRegistered(t))return!1;if(JXG$1.evaluate(this.attr.movetarget)===null&&JXG$1.exists(t.target)&&JXG$1.exists(t.target.releasePointerCapture)&&t.target.releasePointerCapture(t.pointerId),!r&&t.isPrimary,this.hasPointerUp||(window.navigator.msPointerEnabled?JXG$1.addEvent(this.document,"MSPointerUp",this.pointerUpListener,this):(JXG$1.addEvent(this.document,"pointerup",this.pointerUpListener,this),JXG$1.addEvent(this.document,"pointercancel",this.pointerUpListener,this)),this.hasPointerUp=!0),this.hasMouseHandlers&&this.removeMouseEventHandlers(),this.hasTouchHandlers&&this.removeTouchEventHandlers(),this.document.selection&&JXG$1.isFunction(this.document.selection.empty))this.document.selection.empty();else if(window.getSelection&&(h=window.getSelection(),h.removeAllRanges))try{h.removeAllRanges()}catch{}if(this._inputDevice=this._getPointerInputDevice(t),f=this._inputDevice,this.options.precision.hasPoint=this.options.precision[f],l=this.getMousePosition(t),this._testForSelection(t),this.selectingMode){this._startSelecting(l),this.triggerEventHandlers(["touchstartselecting","pointerstartselecting","startselecting"],[t]);return}if(this.attr.drag.enabled&&r?(u=[r],this.mode=this.BOARD_MODE_DRAG):u=this.initMoveObject(l[0],l[1],t,f),c={num:t.pointerId,X:l[0],Y:l[1],Xprev:NaN,Yprev:NaN,Xstart:[],Ystart:[],Zstart:[]},u.length>0){for(p=u[u.length-1],d=!1,n=0;n<this.touches.length;n++)if(this.touches[n].obj===p){s=n,o=this.touches[n].targets.push(c)-1,d=!0;break}d||(o=0,s=this.touches.push({obj:p,targets:[c]})-1),this.dehighlightAll(),p.highlight(!0),this.saveStartPos(p,this.touches[s].targets[o]),t&&t.preventDefault&&!a&&t.preventDefault()}return this.touches.length>0&&!a&&(t.preventDefault(),t.stopPropagation()),JXG$1.isBrowser?(this._getPointerInputDevice(t)!=="touch"?this.mode===this.BOARD_MODE_NONE&&this.mouseOriginMoveStart(t):(this._pointerStorePosition(t),t.touches=this._board_touches,t.touches.length===1&&this.mode===this.BOARD_MODE_NONE&&this.touchStartMoveOriginOneFinger(t)||t.touches.length===2&&(this.mode===this.BOARD_MODE_NONE||this.mode===this.BOARD_MODE_MOVE_ORIGIN)&&(this.mode===this.BOARD_MODE_MOVE_ORIGIN&&this.originMoveEnd(),this.gestureStartListener(t))),v="none",this.mode===this.BOARD_MODE_NONE&&(JXG$1.evaluate(this.attr.browserpan)===!0||JXG$1.evaluate(this.attr.browserpan.enabled)===!0)&&(JXG$1.evaluate(this.attr.pan.enabled)===!1||JXG$1.evaluate(this.attr.pan.needtwofingers)===!0)&&(v="auto"),this.containerObj.style.touchAction=v,this.triggerEventHandlers(["touchstart","down","pointerdown","MSPointerDown"],[t]),!0):!1},_handleClicks:function(t,r){var a=this,n,s,o;if(this.selectingMode){t.stopPropagation();return}if(s=JXG$1.evaluate(this.attr.clickdelay),o=JXG$1.evaluate(this.attr.dblclicksuppressclick),o)this._preventSingleClick=!1,this._singleClickTimer=setTimeout(function(){if(!a._preventSingleClick){a.triggerEventHandlers(r,[t]);for(n in a.clickObjects)a.clickObjects.hasOwnProperty(n)&&(a.clickObjects[n].triggerEventHandlers(r,[t]),delete a.clickObjects[n])}},s);else{a.triggerEventHandlers(r,[t]);for(n in a.clickObjects)a.clickObjects.hasOwnProperty(n)&&a.clickObjects[n].triggerEventHandlers(r,[t]);setTimeout(function(){for(n in a.clickObjects)a.clickObjects.hasOwnProperty(n)&&delete a.clickObjects[n]},s)}t.stopPropagation()},_handleDblClicks:function(t,r){var a;if(this.selectingMode){t.stopPropagation();return}this._preventSingleClick=!0,clearTimeout(this._singleClickTimer),this.triggerEventHandlers(r,[t]);for(a in this.clickObjects)this.clickObjects.hasOwnProperty(a)&&(this.clickObjects[a].triggerEventHandlers(r,[t]),delete this.clickObjects[a]);t.stopPropagation()},pointerClickListener:function(t){this._handleClicks(t,["click","pointerclick"])},pointerDblClickListener:function(t){this._handleDblClicks(t,["dblclick","pointerdblclick"])},mouseClickListener:function(t){this._handleClicks(t,["click","mouseclick"])},mouseDblClickListener:function(t){this._handleDblClicks(t,["dblclick","mousedblclick"])},pointerMoveListener:function(t){var r,a,n,s,o,l="mouse";if(this._getPointerInputDevice(t)==="touch"&&!this._isPointerRegistered(t))return this.BOARD_MODE_NONE;if(!this.checkFrameRate(t))return!1;if(this.mode!==this.BOARD_MODE_DRAG&&(this.dehighlightAll(),this.displayInfobox(!1)),this.mode!==this.BOARD_MODE_NONE&&(t.preventDefault(),t.stopPropagation()),this.updateQuality=this.BOARD_QUALITY_LOW,this._inputDevice=this._getPointerInputDevice(t),l=this._inputDevice,this.options.precision.hasPoint=this.options.precision[l],s=this.options.precision.hasPoint*.3333,n=this.getMousePosition(t),JXG$1.evaluate(this.attr.movetarget)===null&&n[0]<=s||n[1]<=s||n[0]>=this.canvasWidth-s||n[1]>=this.canvasHeight-s)return this.mode===this.BOARD_MODE_NONE;if(this.selectingMode)this._moveSelecting(n),this.triggerEventHandlers(["touchmoveselecting","moveselecting","pointermoveselecting"],[t,this.mode]);else if(!this.mouseOriginMove(t))if(this.mode===this.BOARD_MODE_DRAG){for(r=0;r<this.touches.length;r++)for(o=this.touches[r].targets,a=0;a<o.length;a++)if(o[a].num===t.pointerId){o[a].X=n[0],o[a].Y=n[1],o.length===1?this.moveObject(n[0],n[1],this.touches[r],t,l):o.length===2&&(this.twoFingerMove(this.touches[r],t.pointerId,t),o[a].Xprev=n[0],o[a].Yprev=n[1]);break}}else this._getPointerInputDevice(t)==="touch"&&(this._pointerStorePosition(t),this._board_touches.length===2&&(t.touches=this._board_touches,this.gestureChangeListener(t))),this.highlightElements(n[0],n[1],t,-1);return this.triggerEventHandlers(["pointermove","MSPointerMove","move"],[t,this.mode]),this.updateQuality=this.BOARD_QUALITY_HIGH,this.mode===this.BOARD_MODE_NONE},pointerUpListener:function(t){var r,a,n,s,o,l=!1;if(this.triggerEventHandlers(["touchend","up","pointerup","MSPointerUp"],[t]),this.displayInfobox(!1),t){for(r=0;r<this.touches.length;r++)for(o=this.touches[r].targets,a=0;a<o.length;a++)if(o[a].num===t.pointerId){o.splice(a,1),o.length===0&&this.touches.splice(r,1);break}}if(this.originMoveEnd(),this.update(),this.selectingMode)this._stopSelecting(t),this.triggerEventHandlers(["touchstopselecting","pointerstopselecting","stopselecting"],[t]),this.stopSelectionMode();else for(r=this.downObjects.length-1;r>-1;r--){for(n=!1,a=0;a<this.touches.length;a++)this.touches[a].obj.id===this.downObjects[r].id&&(n=!0);n||(this.downObjects[r].triggerEventHandlers(["touchend","up","pointerup","MSPointerUp"],[t]),JXG$1.exists(this.downObjects[r].coords)||(this.downObjects[r].snapToGrid(),this.downObjects[r].snapToPoints(),l=!0),s=this.downObjects[r].eventHandlers,(JXG$1.exists(s.click)&&s.click.length>0||JXG$1.exists(s.pointerclick)&&s.pointerclick.length>0||JXG$1.exists(s.dblclick)&&s.dblclick.length>0||JXG$1.exists(s.pointerdblclick)&&s.pointerdblclick.length>0)&&(this.clickObjects[this.downObjects[r].id]=this.downObjects[r]),this.downObjects.splice(r,1))}return this.hasPointerUp&&(window.navigator.msPointerEnabled?JXG$1.removeEvent(this.document,"MSPointerUp",this.pointerUpListener,this):(JXG$1.removeEvent(this.document,"pointerup",this.pointerUpListener,this),JXG$1.removeEvent(this.document,"pointercancel",this.pointerUpListener,this)),this.hasPointerUp=!1),this._pointerClearTouches(t.pointerId),this._getPointerInputDevice(t)!=="touch"&&this.dehighlightAll(),l&&this.update(),!0},pointerLeaveListener:function(t){return this.displayInfobox(!1),this.dehighlightAll(),!0},touchStartListener:function(t){var r,a,n,s,o,l,u=this.options.precision.touch,h=t.touches,c,f,d,p;for(this.hasTouchEnd||(JXG$1.addEvent(this.document,"touchend",this.touchEndListener,this),this.hasTouchEnd=!0),this.document.selection&&JXG$1.isFunction(this.document.selection.empty)?this.document.selection.empty():window.getSelection&&window.getSelection().removeAllRanges(),this._inputDevice="touch",this.options.precision.hasPoint=this.options.precision.touch,r=0;r<h.length;r++)h[r].jxg_isused=!1;for(r=0;r<this.touches.length;r++)for(p=this.touches[r].targets,a=0;a<p.length;a++){p[a].num=-1,u=this.options.precision.touch;do{for(n=0;n<h.length;n++)if(Math.abs(Math.pow(h[n].screenX-p[a].X,2)+Math.pow(h[n].screenY-p[a].Y,2))<u*u){p[a].num=n,p[a].X=h[n].screenX,p[a].Y=h[n].screenY,h[n].jxg_isused=!0;break}u*=2}while(p[a].num===-1&&u<this.options.precision.touchMax);p[a].num===-1&&(JXG$1.debug("i couldn't find a targettouches for target no "+a+" on "+this.touches[r].obj.name+" ("+this.touches[r].obj.id+"). Removed the target."),JXG$1.debug("eps = "+u+", touchMax = "+Options$1.precision.touchMax),p.splice(r,1))}for(r=0;r<h.length;r++)if(!h[r].jxg_isused){if(s=this.getMousePosition(t,r),this.selectingMode)return this._startSelecting(s),this.triggerEventHandlers(["touchstartselecting","startselecting"],[t]),t.preventDefault(),t.stopPropagation(),this.options.precision.hasPoint=this.options.precision.mouse,this.touches.length>0;if(o=this.initMoveObject(s[0],s[1],t,"touch"),o.length!==0){if(l=o[o.length-1],d={num:r,X:h[r].screenX,Y:h[r].screenY,Xprev:NaN,Yprev:NaN,Xstart:[],Ystart:[],Zstart:[]},JXG$1.isPoint(l)||l.elementClass===Const.OBJECT_CLASS_TEXT||l.type===Const.OBJECT_TYPE_TICKS||l.type===Const.OBJECT_TYPE_IMAGE)f=[d],this.saveStartPos(l,f[0]),this.touches.push({obj:l,targets:f}),l.highlight(!0);else if(l.elementClass===Const.OBJECT_CLASS_LINE||l.elementClass===Const.OBJECT_CLASS_CIRCLE||l.elementClass===Const.OBJECT_CLASS_CURVE||l.type===Const.OBJECT_TYPE_POLYGON){for(c=!1,a=0;a<this.touches.length;a++)l.id===this.touches[a].obj.id&&(c=!0,this.touches[a].targets.length===1&&(this.saveStartPos(l,d),this.touches[a].targets.push(d)),h[r].jxg_isused=!0);c||(f=[d],this.saveStartPos(l,f[0]),this.touches.push({obj:l,targets:f}),l.highlight(!0))}}h[r].jxg_isused=!0}return this.touches.length>0&&(t.preventDefault(),t.stopPropagation()),h.length===1&&this.mode===this.BOARD_MODE_NONE&&this.touchStartMoveOriginOneFinger(t)||h.length===2&&(this.mode===this.BOARD_MODE_NONE||this.mode===this.BOARD_MODE_MOVE_ORIGIN)&&(this.mode===this.BOARD_MODE_MOVE_ORIGIN&&this.originMoveEnd(),this.gestureStartListener(t)),this.options.precision.hasPoint=this.options.precision.mouse,this.triggerEventHandlers(["touchstart","down"],[t]),!1},touchMoveListener:function(t){var r,a,n,s,o=t.touches;if(!this.checkFrameRate(t))return!1;if(this.mode!==this.BOARD_MODE_NONE&&(t.preventDefault(),t.stopPropagation()),this.mode!==this.BOARD_MODE_DRAG&&(this.dehighlightAll(),this.displayInfobox(!1)),this._inputDevice="touch",this.options.precision.hasPoint=this.options.precision.touch,this.updateQuality=this.BOARD_QUALITY_LOW,this.selectingMode){for(r=0;r<o.length;r++)if(!o[r].jxg_isused){a=this.getMousePosition(t,r),this._moveSelecting(a),this.triggerEventHandlers(["touchmoves","moveselecting"],[t,this.mode]);break}}else if(!this.touchOriginMove(t))if(this.mode===this.BOARD_MODE_DRAG){for(r=0;r<this.touches.length;r++)if(s=this.touches[r].targets,s.length===1){if(o[s[0].num]){if(a=this.getMousePosition(t,s[0].num),a[0]<0||a[0]>this.canvasWidth||a[1]<0||a[1]>this.canvasHeight)return;s[0].X=a[0],s[0].Y=a[1],this.moveObject(a[0],a[1],this.touches[r],t,"touch")}}else if(s.length===2&&s[0].num>-1&&s[1].num>-1&&o[s[0].num]&&o[s[1].num]){if(a=this.getMousePosition(t,s[0].num),n=this.getMousePosition(t,s[1].num),a[0]<0||a[0]>this.canvasWidth||a[1]<0||a[1]>this.canvasHeight||n[0]<0||n[0]>this.canvasWidth||n[1]<0||n[1]>this.canvasHeight)return;s[0].X=a[0],s[0].Y=a[1],s[1].X=n[0],s[1].Y=n[1],this.twoFingerMove(this.touches[r],s[0].num,t),s[0].Xprev=a[0],s[0].Yprev=a[1],s[1].Xprev=n[0],s[1].Yprev=n[1]}}else o.length===2&&this.gestureChangeListener(t),a=this.getMousePosition(t,0),this.highlightElements(a[0],a[1],t,-1);return this.mode!==this.BOARD_MODE_DRAG&&this.displayInfobox(!1),this.triggerEventHandlers(["touchmove","move"],[t,this.mode]),this.options.precision.hasPoint=this.options.precision.mouse,this.updateQuality=this.BOARD_QUALITY_HIGH,this.mode===this.BOARD_MODE_NONE},touchEndListener:function(t){var r,a,n,s=this.options.precision.touch,o=[],l,u,h=t&&t.touches,c,f=!1;if(this.triggerEventHandlers(["touchend","up"],[t]),this.displayInfobox(!1),this.selectingMode)this._stopSelecting(t),this.triggerEventHandlers(["touchstopselecting","stopselecting"],[t]),this.stopSelectionMode();else if(h&&h.length>0){for(r=0;r<this.touches.length;r++)o[r]=this.touches[r];for(this.touches.length=0,r=0;r<h.length;r++)h[r].jxg_isused=!1;for(r=0;r<o.length;r++){for(l=!1,u=0,c=o[r].targets,a=0;a<c.length;a++)for(c[a].found=!1,n=0;n<h.length;n++)if(Math.abs(Math.pow(h[n].screenX-c[a].X,2)+Math.pow(h[n].screenY-c[a].Y,2))<s*s){c[a].found=!0,c[a].num=n,c[a].X=h[n].screenX,c[a].Y=h[n].screenY,u+=1;break}if(JXG$1.isPoint(o[r].obj)?l=c[0]&&c[0].found:o[r].obj.elementClass===Const.OBJECT_CLASS_LINE?l=c[0]&&c[0].found||c[1]&&c[1].found:o[r].obj.elementClass===Const.OBJECT_CLASS_CIRCLE&&(l=u===1||u===3),l)for(this.touches.push({obj:o[r].obj,targets:[]}),a=0;a<c.length;a++)c[a].found&&this.touches[this.touches.length-1].targets.push({num:c[a].num,X:c[a].screenX,Y:c[a].screenY,Xprev:NaN,Yprev:NaN,Xstart:c[a].Xstart,Ystart:c[a].Ystart,Zstart:c[a].Zstart});else o[r].obj.noHighlight()}}else this.touches.length=0;for(r=this.downObjects.length-1;r>-1;r--){for(l=!1,a=0;a<this.touches.length;a++)this.touches[a].obj.id===this.downObjects[r].id&&(l=!0);l||(this.downObjects[r].triggerEventHandlers(["touchup","up"],[t]),JXG$1.exists(this.downObjects[r].coords)||(this.downObjects[r].snapToGrid(),this.downObjects[r].snapToPoints(),f=!0),this.downObjects.splice(r,1))}return(!h||h.length===0)&&(this.hasTouchEnd&&(JXG$1.removeEvent(this.document,"touchend",this.touchEndListener,this),this.hasTouchEnd=!1),this.dehighlightAll(),this.updateQuality=this.BOARD_QUALITY_HIGH,this.originMoveEnd(),f&&this.update()),!0},mouseDownListener:function(t){var r,a,n;if(this.document.selection&&JXG$1.isFunction(this.document.selection.empty)?this.document.selection.empty():window.getSelection&&window.getSelection().removeAllRanges(),!this.hasMouseUp)JXG$1.addEvent(this.document,"mouseup",this.mouseUpListener,this),this.hasMouseUp=!0;else return;if(this._inputDevice="mouse",this.options.precision.hasPoint=this.options.precision.mouse,r=this.getMousePosition(t),this._testForSelection(t),this.selectingMode){this._startSelecting(r),this.triggerEventHandlers(["mousestartselecting","startselecting"],[t]);return}return a=this.initMoveObject(r[0],r[1],t,"mouse"),a.length===0?(this.mode=this.BOARD_MODE_NONE,n=!0):(this.mouse={obj:null,targets:[{X:r[0],Y:r[1],Xprev:NaN,Yprev:NaN}]},this.mouse.obj=a[a.length-1],this.dehighlightAll(),this.mouse.obj.highlight(!0),this.mouse.targets[0].Xstart=[],this.mouse.targets[0].Ystart=[],this.mouse.targets[0].Zstart=[],this.saveStartPos(this.mouse.obj,this.mouse.targets[0]),t&&t.preventDefault?t.preventDefault():window.event&&(window.event.returnValue=!1)),this.mode===this.BOARD_MODE_NONE&&(n=this.mouseOriginMoveStart(t)),this.triggerEventHandlers(["mousedown","down"],[t]),n},mouseMoveListener:function(t){var r;if(!this.checkFrameRate(t))return!1;r=this.getMousePosition(t),this.updateQuality=this.BOARD_QUALITY_LOW,this.mode!==this.BOARD_MODE_DRAG&&(this.dehighlightAll(),this.displayInfobox(!1)),this.selectingMode?(this._moveSelecting(r),this.triggerEventHandlers(["mousemoveselecting","moveselecting"],[t,this.mode])):this.mouseOriginMove(t)||(this.mode===this.BOARD_MODE_DRAG?this.moveObject(r[0],r[1],this.mouse,t,"mouse"):this.highlightElements(r[0],r[1],t,-1),this.triggerEventHandlers(["mousemove","move"],[t,this.mode])),this.updateQuality=this.BOARD_QUALITY_HIGH},mouseUpListener:function(t){var r;if(this.selectingMode===!1&&this.triggerEventHandlers(["mouseup","up"],[t]),this.updateQuality=this.BOARD_QUALITY_HIGH,this.mouse&&this.mouse.obj&&(JXG$1.exists(this.mouse.obj.coords)||(this.mouse.obj.snapToGrid(this.mouse.targets[0]),this.mouse.obj.snapToPoints())),this.originMoveEnd(),this.dehighlightAll(),this.update(),this.selectingMode)this._stopSelecting(t),this.triggerEventHandlers(["mousestopselecting","stopselecting"],[t]),this.stopSelectionMode();else for(r=0;r<this.downObjects.length;r++)this.downObjects[r].triggerEventHandlers(["mouseup","up"],[t]);this.downObjects.length=0,this.hasMouseUp&&(JXG$1.removeEvent(this.document,"mouseup",this.mouseUpListener,this),this.hasMouseUp=!1),this.mouse=null},mouseWheelListener:function(t){var r,a,n;return!this.attr.zoom.enabled||!this.attr.zoom.wheel||!this._isRequiredKeyPressed(t,"zoom")?!0:(t=t||window.event,r=t.detail?-t.detail:t.wheelDelta/40,a=this.attr.zoom.center,a==="board"?n=[]:n=new Coords(Const.COORDS_BY_SCREEN,this.getMousePosition(t),this).usrCoords,r>0?this.zoomIn(n[1],n[2]):this.zoomOut(n[1],n[2]),this.triggerEventHandlers(["mousewheel"],[t]),t.preventDefault(),!1)},keyDownListener:function(t){var r=t.target.id,a,n,s,o,l=0,u=0,h=JXG$1.evaluate(this.attr.keyboard.dx)/this.unitX,c=JXG$1.evaluate(this.attr.keyboard.dy)/this.unitY,f=!1,d=!0,p,v;return!this.attr.keyboard.enabled||r===""||(o=this.containerObj.shadowRoot||document,o.activeElement&&(n=o.activeElement,n.tagName==="INPUT"||n.tagName==="textarea"))?!1:(a=r.replace(this.containerObj.id+"_",""),n=this.select(a),JXG$1.exists(n.coords)&&(v=n.coords.usrCoords.slice(1)),JXG$1.evaluate(this.attr.keyboard.panshift)&&t.shiftKey||JXG$1.evaluate(this.attr.keyboard.panctrl)&&t.ctrlKey?(JXG$1.evaluate(this.attr.zoom.enabled)===!0&&(f=!0),t.keyCode===38?this.clickUpArrow():t.keyCode===40?this.clickDownArrow():t.keyCode===37?this.clickLeftArrow():t.keyCode===39?this.clickRightArrow():f&&t.keyCode===171?this.zoomIn():f&&t.keyCode===173?this.zoomOut():f&&t.keyCode===79?this.zoom100():d=!1):!t.shiftKey&&!t.ctrlKey&&(JXG$1.exists(n.visProp)&&(JXG$1.exists(n.visProp.snaptogrid)&&n.visProp.snaptogrid&&n.evalVisProp("snapsizex")&&n.evalVisProp("snapsizey")?(s=n.getSnapSizes(),l=s[0],u=s[1],h=l,c=u):JXG$1.exists(n.visProp.attracttogrid)&&n.visProp.attracttogrid&&n.evalVisProp("attractordistance")&&n.evalVisProp("attractorunit")&&(l=1.1*n.evalVisProp("attractordistance"),u=l,n.evalVisProp("attractorunit")==="screen"&&(l/=this.unitX,u/=this.unitX),h=Math.max(l,h),c=Math.max(u,c))),t.keyCode===38?p=[0,c]:t.keyCode===40?p=[0,-c]:t.keyCode===37?p=[-h,0]:t.keyCode===39?p=[h,0]:d=!1,p&&n.isDraggable&&n.visPropCalc.visible&&(this.geonextCompatibilityMode&&(JXG$1.isPoint(n)||n.elementClass===Const.OBJECT_CLASS_TEXT)||!this.geonextCompatibilityMode)&&!n.evalVisProp("fixed")&&(this.mode=this.BOARD_MODE_DRAG,JXG$1.exists(n.coords)&&(p[0]+=v[0],p[1]+=v[1]),JXG$1.exists(n.coords)?(n.setPosition(JXG$1.COORDS_BY_USER,p),this.updateInfobox(n)):(this.displayInfobox(!1),n.setPositionDirectly(Const.COORDS_BY_USER,p,[0,0])),this.triggerEventHandlers(["keymove","move"],[t,this.mode]),n.triggerEventHandlers(["keydrag","drag"],[t]),this.mode=this.BOARD_MODE_NONE)),this.update(),d&&JXG$1.exists(t.preventDefault)&&t.preventDefault(),d)},keyFocusInListener:function(t){var r=t.target.id,a,n;if(!this.attr.keyboard.enabled||r==="")return!1;a=r.replace(this.containerObj.id+"_",""),n=this.select(a),JXG$1.exists(n.highlight)&&(n.highlight(!0),this.focusObjects=[a],n.triggerEventHandlers(["hit"],[t])),JXG$1.exists(n.coords)&&this.updateInfobox(n)},keyFocusOutListener:function(t){if(!this.attr.keyboard.enabled)return!1;this.focusObjects=[],this.dehighlightAll(),this.displayInfobox(!1)},updateContainerDims:function(t,r){var a=t,n=r,s,o,l;return t===void 0&&(a=this.containerObj.offsetWidth,n=this.containerObj.offsetHeight),t===void 0&&window&&window.getComputedStyle&&(s=window.getComputedStyle(this.containerObj,null),o=parseFloat(s.getPropertyValue("border-left-width"))+parseFloat(s.getPropertyValue("border-right-width")),isNaN(o)||(a-=o),l=parseFloat(s.getPropertyValue("border-top-width"))+parseFloat(s.getPropertyValue("border-bottom-width")),isNaN(l)||(n-=l)),a<=0||n<=0||isNaN(a)||isNaN(n)?this:(isNaN(this.getBoundingBox()[0])&&this.setBoundingBox(this.attr.boundingbox,this.keepaspectratio,"keep"),JXG$1.exists(this._prevDim)&&this._prevDim.w===a&&this._prevDim.h===n?this:(this.resizeContainer(a,n,!0),this._prevDim={w:a,h:n},this))},startResizeObserver:function(){var t=this;!JXG$1.isBrowser||!this.attr.resize||!this.attr.resize.enabled||(this.resizeObserver=new ResizeObserver(function(r){var a;t._isResizing||(t._isResizing=!0,a=r[0].contentRect,window.setTimeout(function(){try{t.updateContainerDims(a.width,a.height)}catch(n){JXG$1.debug(n),t.stopResizeObserver()}finally{t._isResizing=!1}},t.attr.resize.throttle))}),this.resizeObserver.observe(this.containerObj))},stopResizeObserver:function(){!JXG$1.isBrowser||!this.attr.resize||!this.attr.resize.enabled||JXG$1.exists(this.resizeObserver)&&this.resizeObserver.unobserve(this.containerObj)},resizeListener:function(){var t=this;!JXG$1.isBrowser||!this.attr.resize||!this.attr.resize.enabled||!this._isScrolling&&!this._isResizing&&(this._isResizing=!0,window.setTimeout(function(){t.updateContainerDims(),t._isResizing=!1},this.attr.resize.throttle))},scrollListener:function(t){var r=this;JXG$1.isBrowser&&(this._isScrolling||(this._isScrolling=!0,window.setTimeout(function(){r._isScrolling=!1},66)))},startIntersectionObserver:function(){var t=this,r={root:null,rootMargin:"0px",threshold:.8};try{this.intersectionObserver=new IntersectionObserver(function(a){isNaN(t.getBoundingBox()[0])&&t.updateContainerDims()},r),this.intersectionObserver.observe(t.containerObj)}catch{JXG$1.debug("JSXGraph: IntersectionObserver not available in this browser.")}},stopIntersectionObserver:function(){JXG$1.exists(this.intersectionObserver)&&this.intersectionObserver.unobserve(this.containerObj)},printListener:function(t){this.updateContainerDims()},printListenerMatch:function(t){t.matches&&this.printListener()},initInfobox:function(t){var r=JXG$1.copyAttributes(t,this.options,"infobox");return r.id=this.id+"_infobox",this.infobox=this.create("text",[0,0,"0,0"],r),this.infobox.dump=!1,this.displayInfobox(!1),this},updateInfobox:function(t){var r,a,n,s,o,l,u,h=t.evalVisProp("showinfobox");return!JXG$1.evaluate(this.attr.showinfobox)&&h==="inherit"||!h?this:(JXG$1.isPoint(t)&&(n=t.coords.usrCoords[1],s=t.coords.usrCoords[2],l=this.infobox.evalVisProp("distancex"),u=this.infobox.evalVisProp("distancey"),this.infobox.setCoords(n+l/this.unitX,s+u/this.unitY),o=t.evalVisProp("infoboxdigits"),typeof t.infoboxText!="string"?(o==="auto"?this.infobox.useLocale()?(r=this.infobox.formatNumberLocale(n),a=this.infobox.formatNumberLocale(s)):(r=JXG$1.autoDigits(n),a=JXG$1.autoDigits(s)):JXG$1.isNumber(o)?this.infobox.useLocale()?(r=this.infobox.formatNumberLocale(n,o),a=this.infobox.formatNumberLocale(s,o)):(r=JXG$1.toFixed(n,o),a=JXG$1.toFixed(s,o)):(r=n,a=s),this.highlightInfobox(r,a,t)):this.highlightCustomInfobox(t.infoboxText,t),this.displayInfobox(!0)),this)},displayInfobox:function(t){return!t&&this.focusObjects.length>0&&this.select(this.focusObjects[0]).elementClass===Const.OBJECT_CLASS_POINT?this:(this.infobox.hiddenByParent===t&&(this.infobox.hiddenByParent=!t,this.infobox.prepareUpdate().updateVisibility(t).updateRenderer()),this)},showInfobox:function(t){return this.displayInfobox(t)},highlightInfobox:function(t,r,a){return this.highlightCustomInfobox("("+t+", "+r+")",a),this},highlightCustomInfobox:function(t,r){return this.infobox.setText(t),this},dehighlightAll:function(){var t,r,a={},n=!1;for(t in this.highlightedObjects)this.highlightedObjects.hasOwnProperty(t)&&(r=this.highlightedObjects[t],this.focusObjects.indexOf(t)<0?((this.hasMouseHandlers||this.hasPointerHandlers)&&r.noHighlight(),n=!0):a[t]=r);return this.highlightedObjects=a,this.renderer.type==="canvas"&&n&&(this.prepareUpdate(),this.renderer.suspendRedraw(this),this.updateRenderer(),this.renderer.unsuspendRedraw()),this},getScrCoordsOfMouse:function(t,r){return[t,r]},getUsrCoordsOfMouse:function(t){var r=this.getCoordsTopLeftCorner(),a=JXG$1.getPosition(t,null,this.document),n=a[0]-r[0],s=a[1]-r[1],o=new Coords(Const.COORDS_BY_SCREEN,[n,s],this);return o.usrCoords.slice(1)},getAllUnderMouse:function(t){var r=this.getAllObjectsUnderMouse(t);return r.push(this.getUsrCoordsOfMouse(t)),r},getAllObjectsUnderMouse:function(t){var r=this.getCoordsTopLeftCorner(),a=JXG$1.getPosition(t,null,this.document),n=a[0]-r[0],s=a[1]-r[1],o=[],l,u,h=this.objectsList.length;for(l=0;l<h;l++)u=this.objectsList[l],u.visPropCalc.visible&&u.hasPoint&&u.hasPoint(n,s)&&(o[o.length]=u);return o},updateCoords:function(){var t,r,a=this.objectsList.length;for(r=0;r<a;r++)t=this.objectsList[r],JXG$1.exists(t.coords)&&(t.evalVisProp("frozen")===!0?t.is3D?t.element2D.coords.screen2usr():t.coords.screen2usr():t.is3D?t.element2D.coords.usr2screen():(t.coords.usr2screen(),JXG$1.exists(t.actualCoords)&&t.actualCoords.usr2screen()));return this},moveOrigin:function(t,r,a){var n,s,o,l;return JXG$1.exists(t)&&JXG$1.exists(r)&&(n=this.origin.scrCoords[1],s=this.origin.scrCoords[2],this.origin.scrCoords[1]=t,this.origin.scrCoords[2]=r,a&&(this.origin.scrCoords[1]-=this.drag_dx,this.origin.scrCoords[2]-=this.drag_dy),o=new Coords(Const.COORDS_BY_SCREEN,[0,0],this).usrCoords,l=new Coords(Const.COORDS_BY_SCREEN,[this.canvasWidth,this.canvasHeight],this).usrCoords,(o[1]<this.maxboundingbox[0]-Mat.eps||o[2]>this.maxboundingbox[1]+Mat.eps||l[1]>this.maxboundingbox[2]+Mat.eps||l[2]<this.maxboundingbox[3]-Mat.eps)&&(this.origin.scrCoords[1]=n,this.origin.scrCoords[2]=s)),this.updateCoords().clearTraces().fullUpdate(),this.triggerEventHandlers(["boundingbox"]),this},addConditions:function(t){var r,a,n,s,o,l,u,h=[],c=t.indexOf("<data>"),f=t.indexOf("</data>"),d=function(_,N,M,C){return function(){var $,w;$=_.select(N.id),w=$.coords.usrCoords[C],C===2?$.setPositionDirectly(Const.COORDS_BY_USER,[M(),w]):$.setPositionDirectly(Const.COORDS_BY_USER,[w,M()]),$.prepareUpdate().update()}},p=function(_,N,M){return function(){var C,$;C=_.select(N.id),$=M(),C.setAttribute({visible:$})}},v=function(_,N,M,C){return function(){var $,w;$=_.select(N.id),w=M(),C==="strokewidth"?$.visProp.strokewidth=w:(w=JXG$1.rgba2rgbo(w),$.visProp[C+"color"]=w[0],$.visProp[C+"opacity"]=w[1])}},y=function(_,N,M){return function(){var C=_.select(N.id);C.position=M()}},b=function(_,N,M){return function(){var C=_.select(N.id);C.setStyle(M())}};if(!(c<0)){for(;c>=0;){if(r=t.slice(c+6,f),a=r.indexOf("="),n=r.slice(0,a),s=r.slice(a+1),a=n.indexOf("."),o=n.slice(0,a),l=this.elementsByName[JXG$1.unescapeHTML(o)],u=n.slice(a+1).replace(/\s+/g,"").toLowerCase(),s=JXG$1.createFunction(s,this,"",!0),!JXG$1.exists(this.elementsByName[o]))JXG$1.debug("debug conditions: |"+o+"| undefined");else switch(u){case"x":h.push(d(this,l,s,2));break;case"y":h.push(d(this,l,s,1));break;case"visible":h.push(p(this,l,s));break;case"position":h.push(y(this,l,s));break;case"stroke":h.push(v(this,l,s,"stroke"));break;case"style":h.push(b(this,l,s));break;case"strokewidth":h.push(v(this,l,s,"strokewidth"));break;case"fill":h.push(v(this,l,s,"fill"));break;case"label":break;default:JXG$1.debug('property "'+u+'" in conditions not yet implemented:'+s);break}t=t.slice(f+7),c=t.indexOf("<data>"),f=t.indexOf("</data>")}this.updateConditions=function(){var _;for(_=0;_<h.length;_++)h[_]();return this.prepareUpdate().updateElements(),!0},this.updateConditions()}},updateConditions:function(){return!1},calculateSnapSizes:function(){var t,r,a=this.getBoundingBox(),n=JXG$1.evaluate(this.options.grid.majorStep),s=JXG$1.evaluate(this.options.grid.gridX),o=JXG$1.evaluate(this.options.grid.gridY),l,u;for(JXG$1.isArray(n)||(n=[n,n]),n.length<2&&(n=[n[0],n[0]]),JXG$1.exists(s)&&(n[0]=s),JXG$1.exists(o)&&(n[1]=o),n[0]==="auto"?n[0]=1:n[0]=JXG$1.parseNumber(n[0],Math.abs(a[1]-a[3]),1/this.unitX),n[1]==="auto"?n[1]=1:n[1]=JXG$1.parseNumber(n[1],Math.abs(a[0]-a[2]),1/this.unitY),t=new Coords(Const.COORDS_BY_USER,[0,0],this),r=new Coords(Const.COORDS_BY_USER,[n[0],n[1]],this),l=t.scrCoords[1]-r.scrCoords[1],u=t.scrCoords[2]-r.scrCoords[2],this.options.grid.snapSizeX=n[0];Math.abs(l)>25;)this.options.grid.snapSizeX*=2,l/=2;for(this.options.grid.snapSizeY=n[1];Math.abs(u)>25;)this.options.grid.snapSizeY*=2,u/=2;return this},applyZoom:function(){return this.updateCoords().calculateSnapSizes().clearTraces().fullUpdate(),this},zoomIn:function(t,r){var a=this.getBoundingBox(),n=JXG$1.evaluate(this.attr.zoom.factorx),s=JXG$1.evaluate(this.attr.zoom.factory),o=(a[2]-a[0])*(1-1/n),l=(a[1]-a[3])*(1-1/s),u=.5,h=.5,c=JXG$1.evaluate(this.attr.zoom.max),f=JXG$1.evaluate(this.attr.zoom.eps)||JXG$1.evaluate(this.attr.zoom.min)||.001;return this.zoomX>c&&n>1||this.zoomY>c&&s>1||this.zoomX<f&&n<1||this.zoomY<f&&s<1?this:(JXG$1.isNumber(t)&&JXG$1.isNumber(r)&&(u=(t-a[0])/(a[2]-a[0]),h=(a[1]-r)/(a[1]-a[3])),this.setBoundingBox([a[0]+o*u,a[1]-l*h,a[2]-o*(1-u),a[3]+l*(1-h)],this.keepaspectratio,"update"),this.applyZoom())},zoomOut:function(t,r){var a=this.getBoundingBox(),n=JXG$1.evaluate(this.attr.zoom.factorx),s=JXG$1.evaluate(this.attr.zoom.factory),o=(a[2]-a[0])*(1-n),l=(a[1]-a[3])*(1-s),u=.5,h=.5,c=JXG$1.evaluate(this.attr.zoom.eps)||JXG$1.evaluate(this.attr.zoom.min)||.001;return this.zoomX<c||this.zoomY<c?this:(JXG$1.isNumber(t)&&JXG$1.isNumber(r)&&(u=(t-a[0])/(a[2]-a[0]),h=(a[1]-r)/(a[1]-a[3])),this.setBoundingBox([a[0]+o*u,a[1]-l*h,a[2]-o*(1-u),a[3]+l*(1-h)],this.keepaspectratio,"update"),this.applyZoom())},zoom100:function(){var t,r,a;return JXG$1.exists(this.attr.boundingbox)?this.setBoundingBox(this.attr.boundingbox,this.keepaspectratio,"reset"):(t=this.getBoundingBox(),r=(t[2]-t[0])*(1-this.zoomX)*.5,a=(t[1]-t[3])*(1-this.zoomY)*.5,this.setBoundingBox([t[0]+r,t[1]-a,t[2]-r,t[3]+a],this.keepaspectratio,"reset")),this.applyZoom()},zoomAllPoints:function(){var t,r,a,n,s,o=0,l=0,u=0,h=0,c=this.objectsList.length;for(t=0;t<c;t++)s=this.objectsList[t],JXG$1.isPoint(s)&&s.visPropCalc.visible&&(s.coords.usrCoords[1]<o?o=s.coords.usrCoords[1]:s.coords.usrCoords[1]>l&&(l=s.coords.usrCoords[1]),s.coords.usrCoords[2]>h?h=s.coords.usrCoords[2]:s.coords.usrCoords[2]<u&&(u=s.coords.usrCoords[2]));return r=50,a=r/this.unitX,n=r/this.unitY,this.setBoundingBox([o-a,h+n,l+a,u-n],this.keepaspectratio,"update"),this.applyZoom()},zoomElements:function(t){var r,a,n,s=[1/0,-1/0,-1/0,1/0],o,l,u,h,c;if(!JXG$1.isArray(t)||t.length===0)return this;for(r=0;r<t.length;r++)a=this.select(t[r]),n=a.bounds(),JXG$1.isArray(n)&&(n[0]<s[0]&&(s[0]=n[0]),n[1]>s[1]&&(s[1]=n[1]),n[2]>s[2]&&(s[2]=n[2]),n[3]<s[3]&&(s[3]=n[3]));return JXG$1.isArray(s)&&(o=.5*(s[0]+s[2]),l=.5*(s[1]+s[3]),u=1.5*(s[2]-s[0])*.5,h=1.5*(s[1]-s[3])*.5,c=Math.max(u,h),this.setBoundingBox([o-c,l+c,o+c,l-c],this.keepaspectratio,"update")),this},setZoom:function(t,r){var a=this.attr.zoom.factorx,n=this.attr.zoom.factory;return this.attr.zoom.factorx=t/this.zoomX,this.attr.zoom.factory=r/this.zoomY,this.zoomIn(),this.attr.zoom.factorx=a,this.attr.zoom.factory=n,this},_removeObj:function(t,r){var a,n;if(JXG$1.isArray(t)){for(n=0;n<t.length;n++)this._removeObj(t[n],r);return this}if(t=this.select(t),!JXG$1.exists(t)||JXG$1.isString(t))return this;try{for(a in t.childElements)t.childElements.hasOwnProperty(a)&&t.childElements[a].board._removeObj(t.childElements[a]);for(a in t.objects)t.objects.hasOwnProperty(a)&&t.objects[a].board._removeObj(t.objects[a]);if(r)for(a in this.objects)this.objects.hasOwnProperty(a)&&JXG$1.exists(this.objects[a].childElements)&&JXG$1.exists(this.objects[a].childElements.hasOwnProperty(t.id))&&(delete this.objects[a].childElements[t.id],delete this.objects[a].descendants[t.id]);else if(JXG$1.exists(t.ancestors))for(a in t.ancestors)t.ancestors.hasOwnProperty(a)&&JXG$1.exists(t.ancestors[a].childElements)&&JXG$1.exists(t.ancestors[a].childElements.hasOwnProperty(t.id))&&(delete t.ancestors[a].childElements[t.id],delete t.ancestors[a].descendants[t.id]);if(t._pos>-1)for(this.objectsList.splice(t._pos,1),n=t._pos;n<this.objectsList.length;n++)this.objectsList[n]._pos--;else t.type!==Const.OBJECT_TYPE_TURTLE&&JXG$1.debug("Board.removeObject: object "+t.id+" not found in list.");delete this.objects[t.id],delete this.elementsByName[t.name],t.visProp&&t.evalVisProp("trace")&&t.clearTrace(),JXG$1.exists(t.remove)&&t.remove()}catch(s){JXG$1.debug(t.id+": Could not be removed: "+s)}return this},removeObject:function(t,r){var a;if(this.renderer.suspendRedraw(this),JXG$1.isArray(t))for(a=0;a<t.length;a++)this._removeObj(t[a],r);else this._removeObj(t,r);return this.renderer.unsuspendRedraw(),this.update(),this},removeAncestors:function(t){var r;for(r in t.ancestors)t.ancestors.hasOwnProperty(r)&&this.removeAncestors(t.ancestors[r]);return this.removeObject(t),this},initGeonextBoard:function(){var t,r,a;return t=this.create("point",[0,0],{id:this.id+"g00e0",name:"Ursprung",withLabel:!1,visible:!1,fixed:!0}),r=this.create("point",[1,0],{id:this.id+"gX0e0",name:"Punkt_1_0",withLabel:!1,visible:!1,fixed:!0}),a=this.create("point",[0,1],{id:this.id+"gY0e0",name:"Punkt_0_1",withLabel:!1,visible:!1,fixed:!0}),this.create("line",[t,r],{id:this.id+"gXLe0",name:"X-Achse",withLabel:!1,visible:!1}),this.create("line",[t,a],{id:this.id+"gYLe0",name:"Y-Achse",withLabel:!1,visible:!1}),this},resizeContainer:function(t,r,a,n){var s,o,l,u,h;return o=this.canvasWidth,l=this.canvasHeight,n||(s=this.getBoundingBox()),this.canvasWidth=parseFloat(t),this.canvasHeight=parseFloat(r),a||(this.containerObj.style.width=this.canvasWidth+"px",this.containerObj.style.height=this.canvasHeight+"px"),this.renderer.resize(this.canvasWidth,this.canvasHeight),n?(u=(this.canvasWidth-o)*.5,h=(this.canvasHeight-l)*.5,this.moveOrigin(this.origin.scrCoords[1]+u,this.origin.scrCoords[2]+h)):this.setBoundingBox(s,this.keepaspectratio,"keep"),this},showDependencies:function(){var t,r,a,n,s;r=`<p>
`;for(t in this.objects)if(this.objects.hasOwnProperty(t)){s=0;for(a in this.objects[t].childElements)this.objects[t].childElements.hasOwnProperty(a)&&(s+=1);s>=0&&(r+="<strong>"+this.objects[t].id+":</strong> ");for(a in this.objects[t].childElements)this.objects[t].childElements.hasOwnProperty(a)&&(r+=this.objects[t].childElements[a].id+"("+this.objects[t].childElements[a].name+"), ");r+=`<p>
`}return r+=`</p>
`,n=window.open(),n.document.open(),n.document.write(r),n.document.close(),this},showXML:function(){var t=window.open("");return t.document.open(),t.document.write("<pre>"+JXG$1.escapeHTML(this.xmlString)+"</pre>"),t.document.close(),this},prepareUpdate:function(t){var r,a,n,s=this.objectsList.length;for(r=0;r<s;r++)if(n=this.objectsList[r],this._change3DView||JXG$1.exists(t)&&t.elType==="view3d_slider"){if(n.needsUpdate=n.visProp.element3d||n.elType==="view3d"||n.elType==="view3d_slider"||this.needsFullUpdate,n.visProp.element3d&&n.visProp.element3d.type===Const.OBJECT_TYPE_SPHERE3D)for(a=0;a<n.parents.length;a++)this.objects[n.parents[a]].needsUpdate=!0}else n.needsUpdate=n.needsRegularUpdate||this.needsFullUpdate;for(r in this.groups)this.groups.hasOwnProperty(r)&&(n=this.groups[r],n.needsUpdate=n.needsRegularUpdate||this.needsFullUpdate);return this},updateElements:function(t){var r,a;for(t=this.select(t),r=0;r<this.objectsList.length;r++)a=this.objectsList[r],this.needsFullUpdate&&a.elementClass===Const.OBJECT_CLASS_TEXT&&a.updateSize(),a.update(!JXG$1.exists(t)||a.id!==t.id).updateVisibility();for(r in this.groups)this.groups.hasOwnProperty(r)&&this.groups[r].update(t);return this},updateRenderer:function(){var t,r=this.objectsList.length,a=[],n,s;if(this.renderer){if(this.renderer.type==="canvas")this.updateRendererCanvas();else{for(t=0;t<r;t++)this.objectsList[t].visProp.islabel&&this.objectsList[t].visProp.autoposition?a.push(t):this.objectsList[t].updateRenderer();for(n=a.length;n!==0;)s=Math.floor(Math.random()*n),n--,[a[n],a[s]]=[a[s],a[n]];for(t=0;t<a.length;t++)this.objectsList[a[t]].updateRenderer()}return this}},updateRendererCanvas:function(){var t,r,a=this.objectsList.length,n=[],s,o=function(l,u){return l.visProp.layer!==u.visProp.layer?l.visProp.layer-u.visProp.layer:n.indexOf(l.visProp.layer)===-1||!l.visProp.element3d&&!u.visProp.element3d?l._pos-u._pos:l.visProp.element3d&&!u.visProp.element3d?-1:u.visProp.element3d&&!l.visProp.element3d?1:l.visProp.element3d.zIndex-u.visProp.element3d.zIndex};for(t=0;t<a;t++)if(r=this.objectsList[t],r.elType==="view3d"&&r.evalVisProp("depthorder.enabled")){n=r.evalVisProp("depthorder.layers"),r.updateRenderer();break}for(s=this.objectsList.toSorted(o),a=s.length,t=0;t<a;t++)s[t].prepareUpdate().updateRenderer();return this},addHook:function(t,r,a){return JXG$1.deprecated("Board.addHook()","Board.on()"),r=JXG$1.def(r,"update"),a=JXG$1.def(a,this),this.hooks.push([r,t]),this.on(r,t,a),this.hooks.length-1},addEvent:JXG$1.shortcut(JXG$1.Board.prototype,"on"),removeHook:function(t){return JXG$1.deprecated("Board.removeHook()","Board.off()"),this.hooks[t]&&(this.off(this.hooks[t][0],this.hooks[t][1]),this.hooks[t]=null),this},removeEvent:JXG$1.shortcut(JXG$1.Board.prototype,"off"),updateHooks:function(t){var r=Array.prototype.slice.call(arguments,0);return JXG$1.deprecated("Board.updateHooks()","Board.triggerEventHandlers()"),r[0]=JXG$1.def(r[0],"update"),this.triggerEventHandlers([r[0]],arguments),this},addChild:function(t){return JXG$1.exists(t)&&JXG$1.exists(t.containerObj)&&(this.dependentBoards.push(t),this.update()),this},removeChild:function(t){var r;for(r=this.dependentBoards.length-1;r>=0;r--)this.dependentBoards[r]===t&&this.dependentBoards.splice(r,1);return this},update:function(t){var r,a,n,s,o;if(this.inUpdate||this.isSuspendedUpdate)return this;for(this.inUpdate=!0,this.attr.minimizereflow==="all"&&this.containerObj&&this.renderer.type!=="vml"&&(o=this.document.activeElement,s=this.renderer.removeToInsertLater(this.containerObj)),this.attr.minimizereflow==="svg"&&this.renderer.type==="svg"&&(o=this.document.activeElement,s=this.renderer.removeToInsertLater(this.renderer.svgRoot)),this.prepareUpdate(t).updateElements(t).updateConditions(),this.renderer.suspendRedraw(this),this.updateRenderer(),this.renderer.unsuspendRedraw(),this.triggerEventHandlers(["update"],[]),s&&(s(),o.focus()),a=this.dependentBoards.length,r=0;r<a;r++)n=this.dependentBoards[r],JXG$1.exists(n)&&n!==this&&(n.updateQuality=this.updateQuality,n.prepareUpdate().updateElements().updateConditions(),n.renderer.suspendRedraw(this),n.updateRenderer(),n.renderer.unsuspendRedraw(),n.triggerEventHandlers(["update"],[]));return this.inUpdate=!1,this},fullUpdate:function(){return this.needsFullUpdate=!0,this.update(),this.needsFullUpdate=!1,this},addGrid:function(){return this.create("grid",[]),this},removeGrids:function(){var t;for(t=0;t<this.grids.length;t++)this.removeObject(this.grids[t]);return this.grids.length=0,this.update(),this},create:function(t,r,a){var n,s;for(t=t.toLowerCase(),JXG$1.exists(r)||(r=[]),JXG$1.exists(a)||(a={}),s=0;s<r.length;s++)JXG$1.isString(r[s])&&!(t==="text"&&s===2)&&!(t==="solidofrevolution3d"&&s===2)&&!(t==="text3d"&&(s===2||s===4))&&!((t==="input"||t==="checkbox"||t==="button")&&(s===2||s===3))&&t!=="curve"&&t!=="functiongraph"&&t!=="implicitcurve"&&(s>0&&r[0].elType==="view3d"?r[s]=r[0].select(r[s]):r[s]=this.select(r[s]));if(JXG$1.isFunction(JXG$1.elements[t]))n=JXG$1.elements[t](this,r,a);else throw new Error("JSXGraph: create: Unknown element type given: "+t);return JXG$1.exists(n)?(n.prepareUpdate&&n.update&&n.updateRenderer&&n.fullUpdate(),n):(JXG$1.debug("JSXGraph: create: failure creating "+t),n)},createElement:function(){return JXG$1.deprecated("Board.createElement()","Board.create()"),this.create.apply(this,arguments)},clearTraces:function(){var t;for(t=0;t<this.objectsList.length;t++)this.objectsList[t].clearTrace();return this.numTraces=0,this},suspendUpdate:function(){return this.inUpdate||(this.isSuspendedUpdate=!0),this},unsuspendUpdate:function(){return this.isSuspendedUpdate&&(this.isSuspendedUpdate=!1,this.fullUpdate()),this},setBoundingBox:function(t,r,a){var n,s,o,l,u=0,h=0,c=1,f,d,p,v,y,b=JXG$1.getDimensions(this.containerObj,this.document);return JXG$1.isArray(t)?t[0]<this.maxboundingbox[0]-Mat.eps||t[1]>this.maxboundingbox[1]+Mat.eps||t[2]>this.maxboundingbox[2]+Mat.eps||t[3]<this.maxboundingbox[3]-Mat.eps?this:(JXG$1.exists(a)||(a="reset"),o=this.unitX,l=this.unitY,this.canvasWidth=parseFloat(b.width),this.canvasHeight=parseFloat(b.height),s=this.canvasWidth,n=this.canvasHeight,r?(this.keepaspectratio?(f=o/l,isNaN(f)&&(f=1)):f=1,a==="keep"&&(c=this.zoomX/this.zoomY),d=t[2]-t[0],p=t[1]-t[3],v=o*d,y=l*p,s>=n?v>=y?(this.unitY=n/p,this.unitX=this.unitY*f):(this.unitY=n/Math.abs(d)*Mat.sign(p)/c,this.unitX=this.unitY*f):y>v?(this.unitX=s/d,this.unitY=this.unitX/f):(this.unitX=s/Math.abs(p)*Mat.sign(d)*c,this.unitY=this.unitX/f),u=(s/this.unitX-d)*.5,h=(n/this.unitY-p)*.5,this.keepaspectratio=!0):(this.unitX=s/(t[2]-t[0]),this.unitY=n/(t[1]-t[3]),this.keepaspectratio=!1),this.moveOrigin(-this.unitX*(t[0]-u),this.unitY*(t[1]+h)),a==="update"?(this.zoomX*=this.unitX/o,this.zoomY*=this.unitY/l):a==="reset"&&(this.zoomX=JXG$1.exists(this.attr.zoomx)?this.attr.zoomx:1,this.zoomY=JXG$1.exists(this.attr.zoomy)?this.attr.zoomy:1),this):this},getBoundingBox:function(){var t=new Coords(Const.COORDS_BY_SCREEN,[0,0],this).usrCoords,r=new Coords(Const.COORDS_BY_SCREEN,[this.canvasWidth,this.canvasHeight],this).usrCoords;return[t[1],t[2],r[1],r[2]]},_set:function(t,r){t=t.toLocaleLowerCase(),r!==null&&JXG$1.isObject(r)&&!JXG$1.exists(r.id)&&!JXG$1.exists(r.name)?JXG$1.mergeAttr(this.attr[t],r):this.attr[t]=r},setAttribute:function(t){var r,a,n,s,o,l,u,h={};for(r=0;r<arguments.length;r++)a=arguments[r],JXG$1.isString(a)?(n=a.split(":"),h[JXG$1.trim(n[0])]=JXG$1.trim(n[1])):JXG$1.isArray(a)?h[a[0]]=a[1]:JXG$1.extend(h,a);for(r in h)if(h.hasOwnProperty(r)&&(s=r.replace(/\s+/g,"").toLowerCase(),o=h[r]),o=o.toLowerCase&&o.toLowerCase()==="false"?!1:o,l=this.attr[s],l!==o)switch(s){case"axis":o===!1&&JXG$1.exists(this.defaultAxes)&&(this.defaultAxes.x.setAttribute({visible:!1}),this.defaultAxes.y.setAttribute({visible:!1}));break;case"boundingbox":this.setBoundingBox(o,this.keepaspectratio),this._set(s,o);break;case"defaultaxes":JXG$1.exists(this.defaultAxes.x)&&JXG$1.exists(o.x)&&this.defaultAxes.x.setAttribute(o.x),JXG$1.exists(this.defaultAxes.y)&&JXG$1.exists(o.y)&&this.defaultAxes.y.setAttribute(o.y);break;case"title":this.document.getElementById(this.container+"_ARIAlabel").innerText=o,this._set(s,o);break;case"keepaspectratio":this._set(s,o),this.setBoundingBox(this.getBoundingBox(),o,"keep");break;case"document":case"maxboundingbox":this[s]=o,this._set(s,o);break;case"zoomx":case"zoomy":this[s]=o,this._set(s,o),this.setZoom(this.attr.zoomx,this.attr.zoomy);break;case"registerevents":case"renderer":break;case"fullscreen":case"screenshot":u=this.containerObj.ownerDocument.getElementById(this.container+"_navigation_"+s),u&&JXG$1.exists(o.symbol)&&(u.innerText=JXG$1.evaluate(o.symbol)),this._set(s,o);break;case"selection":o.visible=!1,o.withLines=!1,o.vertices={visible:!1},this._set(s,o);break;case"showcopyright":this.renderer.type==="svg"&&(u=this.containerObj.ownerDocument.getElementById(this.renderer.uniqName("licenseText")),u?u.style.display=JXG$1.evaluate(o)?"inline":"none":JXG$1.evaluate(o)&&this.renderer.displayCopyright(Const.licenseText,parseInt(this.options.text.fontSize,10))),this._set(s,o);break;case"showlogo":this.renderer.type==="svg"&&(u=this.containerObj.ownerDocument.getElementById(this.renderer.uniqName("licenseLogo")),u?u.style.display=JXG$1.evaluate(o)?"inline":"none":JXG$1.evaluate(o)&&this.renderer.displayLogo(Const.licenseLogo,parseInt(this.options.text.fontSize,10))),this._set(s,o);break;default:JXG$1.exists(this.attr[s])&&this._set(s,o);break}return this.containerObj.ownerDocument.getElementById(this.container+"_navigationbar").remove(),this.renderer.drawNavigationBar(this,this.attr.navbar),this.triggerEventHandlers(["attribute"],[h,this]),this.fullUpdate(),this},addAnimation:function(t){var r=this;return this.animationObjects[t.id]=t,this.animationIntervalCode||(this.animationIntervalCode=window.setInterval(function(){r.animate()},t.board.attr.animationdelay)),this},stopAllAnimation:function(){var t;for(t in this.animationObjects)this.animationObjects.hasOwnProperty(t)&&JXG$1.exists(this.animationObjects[t])&&(this.animationObjects[t]=null,delete this.animationObjects[t]);return window.clearInterval(this.animationIntervalCode),delete this.animationIntervalCode,this},animate:function(){var t,r,a,n,s,o,l,u,h=0,c=null;for(r in this.animationObjects)if(this.animationObjects.hasOwnProperty(r)&&JXG$1.exists(this.animationObjects[r])){if(h+=1,a=this.animationObjects[r],a.animationPath&&(JXG$1.isFunction(a.animationPath)?n=a.animationPath(new Date().getTime()-a.animationStart):n=a.animationPath.pop(),!JXG$1.exists(n)||!JXG$1.isArray(n)&&isNaN(n)?delete a.animationPath:(a.setPositionDirectly(Const.COORDS_BY_USER,n),a.fullUpdate(),c=a)),a.animationData){l=0;for(s in a.animationData)a.animationData.hasOwnProperty(s)&&(o=a.animationData[s].pop(),JXG$1.exists(o)?(l+=1,t={},t[s]=o,a.setAttribute(t)):delete a.animationData[o]);l===0&&delete a.animationData}!JXG$1.exists(a.animationData)&&!JXG$1.exists(a.animationPath)&&(this.animationObjects[r]=null,delete this.animationObjects[r],JXG$1.exists(a.animationCallback)&&(u=a.animationCallback,a.animationCallback=null,u()))}return h===0?(window.clearInterval(this.animationIntervalCode),delete this.animationIntervalCode):this.update(c),this},migratePoint:function(t,r,a){var n,s,o,l,u,h,c=!1;t=this.select(t),r=this.select(r),JXG$1.exists(t.label)&&(h=t.label.id,c=!0,this.removeObject(t.label));for(s in t.childElements)if(t.childElements.hasOwnProperty(s)){n=t.childElements[s],l=!1;for(o in n)n.hasOwnProperty(o)&&n[o]===t&&(n[o]=r,l=!0);for(l&&delete t.childElements[s],u=0;u<n.parents.length;u++)n.parents[u]===t.id&&(n.parents[u]=r.id);r.addChild(n)}return a&&(c&&(delete r.childElements[h],delete r.descendants[h]),r.label&&this.removeObject(r.label),delete this.elementsByName[r.name],r.name=t.name,c&&r.createLabel()),this.removeObject(t),JXG$1.exists(r.name)&&r.name!==""&&(this.elementsByName[r.name]=r),this.fullUpdate(),this},emulateColorblindness:function(t){var r,a;if(JXG$1.exists(t)||(t="none"),this.currentCBDef===t)return this;for(r in this.objects)this.objects.hasOwnProperty(r)&&(a=this.objects[r],t!=="none"?(this.currentCBDef==="none"&&(a.visPropOriginal={strokecolor:a.visProp.strokecolor,fillcolor:a.visProp.fillcolor,highlightstrokecolor:a.visProp.highlightstrokecolor,highlightfillcolor:a.visProp.highlightfillcolor}),a.setAttribute({strokecolor:JXG$1.rgb2cb(a.eval(a.visPropOriginal.strokecolor),t),fillcolor:JXG$1.rgb2cb(a.eval(a.visPropOriginal.fillcolor),t),highlightstrokecolor:JXG$1.rgb2cb(a.eval(a.visPropOriginal.highlightstrokecolor),t),highlightfillcolor:JXG$1.rgb2cb(a.eval(a.visPropOriginal.highlightfillcolor),t)})):JXG$1.exists(a.visPropOriginal)&&JXG$1.extend(a.visProp,a.visPropOriginal));return this.currentCBDef=t,this.update(),this},select:function(t,r){var a,n,s,o,l=t;if(l===null)return l;if(JXG$1.isString(l)&&l!=="")JXG$1.exists(this.objects[l])?l=this.objects[l]:JXG$1.exists(this.elementsByName[l])?l=this.elementsByName[l]:JXG$1.exists(this.groups[l])&&(l=this.groups[l]);else if(!r&&(JXG$1.isFunction(l)||JXG$1.isObject(l)&&!JXG$1.isFunction(l.setAttribute))){for(a=JXG$1.filterElements(this.objectsList,l),n={},o=a.length,s=0;s<o;s++)n[a[s].id]=a[s];l=new Composition(n)}else JXG$1.isObject(l)&&JXG$1.exists(l.id)&&!JXG$1.exists(this.objects[l.id])&&(l=null);return l},hasPoint:function(t,r){var a=t,n=r,s=this.getBoundingBox();return JXG$1.exists(t)&&JXG$1.isArray(t.usrCoords)&&(a=t.usrCoords[1],n=t.usrCoords[2]),!!(JXG$1.isNumber(a)&&JXG$1.isNumber(n)&&s[0]<a&&a<s[2]&&s[1]>n&&n>s[3])},updateCSSTransforms:function(){var t=this.containerObj,r=t,a=t;if(this.cssTransMat=JXG$1.getCSSTransformMatrix(r),JXG$1.exists(r.getRootNode)){for(r=r.parentNode===r.getRootNode()?r.parentNode.host:r.parentNode;r;)this.cssTransMat=Mat.matMatMult(JXG$1.getCSSTransformMatrix(r),this.cssTransMat),r=r.parentNode===r.getRootNode()?r.parentNode.host:r.parentNode;this.cssTransMat=Mat.inverse(this.cssTransMat)}else{for(r=r.offsetParent;r;){for(this.cssTransMat=Mat.matMatMult(JXG$1.getCSSTransformMatrix(r),this.cssTransMat),a=a.parentNode;a!==r;)this.cssTransMat=Mat.matMatMult(JXG$1.getCSSTransformMatrix(r),this.cssTransMat),a=a.parentNode;r=r.offsetParent}this.cssTransMat=Mat.inverse(this.cssTransMat)}return this},startSelectionMode:function(){this.selectingMode=!0,this.selectionPolygon.setAttribute({visible:!0}),this.selectingBox=[[0,0],[0,0]],this._setSelectionPolygonFromBox(),this.selectionPolygon.fullUpdate()},stopSelectionMode:function(){return this.selectingMode=!1,this.selectionPolygon.setAttribute({visible:!1}),[this.selectionPolygon.vertices[0].coords,this.selectionPolygon.vertices[2].coords]},_startSelecting:function(t){this.isSelecting=!0,this.selectingBox=[[t[0],t[1]],[t[0],t[1]]],this._setSelectionPolygonFromBox()},_moveSelecting:function(t){this.isSelecting&&(this.selectingBox[1]=[t[0],t[1]],this._setSelectionPolygonFromBox(),this.selectionPolygon.fullUpdate())},_stopSelecting:function(t){var r=this.getMousePosition(t);this.isSelecting=!1,this.selectingBox[1]=[r[0],r[1]],this._setSelectionPolygonFromBox()},_setSelectionPolygonFromBox:function(){var t=this.selectingBox[0],r=this.selectingBox[1];this.selectionPolygon.vertices[0].setPositionDirectly(JXG$1.COORDS_BY_SCREEN,[t[0],t[1]]),this.selectionPolygon.vertices[1].setPositionDirectly(JXG$1.COORDS_BY_SCREEN,[t[0],r[1]]),this.selectionPolygon.vertices[2].setPositionDirectly(JXG$1.COORDS_BY_SCREEN,[r[0],r[1]]),this.selectionPolygon.vertices[3].setPositionDirectly(JXG$1.COORDS_BY_SCREEN,[r[0],t[1]])},_testForSelection:function(t){this._isRequiredKeyPressed(t,"selection")&&(JXG$1.exists(this.selectionPolygon)||this._createSelectionPolygon(this.attr),this.startSelectionMode())},_createSelectionPolygon:function(t){var r;return JXG$1.exists(this.selectionPolygon)||(r=JXG$1.copyAttributes(t,Options$1,"board","selection"),r.enabled===!0&&(this.selectionPolygon=this.create("polygon",[[0,0],[0,0],[0,0],[0,0]],r))),this},__evt__attribute:function(t){},__evt__down:function(t){},__evt__mousedown:function(t){},__evt__pendown:function(t){},__evt__pointerdown:function(t){},__evt__touchstart:function(t){},__evt__up:function(t){},__evt__mouseup:function(t){},__evt__pointerup:function(t){},__evt__touchend:function(t){},__evt__click:function(t){},__evt__dblclick:function(t){},__evt__mouseclick:function(t){},__evt__mousedblclick:function(t){},__evt__pointerclick:function(t){},__evt__pointerdblclick:function(t){},__evt__move:function(t,r){},__evt__mousemove:function(t,r){},__evt__penmove:function(t,r){},__evt__pointermove:function(t,r){},__evt__touchmove:function(t,r){},__evt__keymove:function(t,r){},__evt__hit:function(t,r,a){},__evt__mousehit:function(t,r,a){},__evt__update:function(){},__evt__boundingbox:function(){},__evt__startselecting:function(){},__evt__mousestartselecting:function(){},__evt__pointerstartselecting:function(){},__evt__touchstartselecting:function(){},__evt__stopselecting:function(){},__evt__mousestopselecting:function(){},__evt__pointerstopselecting:function(){},__evt__touchstopselecting:function(){},__evt__moveselecting:function(){},__evt__mousemoveselecting:function(){},__evt__pointermoveselecting:function(){},__evt__touchmoveselecting:function(){},__evt:function(){},toFullscreen:function(t){var r,a,n,s,o=this.document,l;return t=t||this.container,this._fullscreen_inner_id=t,n=o.getElementById(t),r="fullscreenwrap_"+t,JXG$1.exists(n._cssFullscreenStore)||(s=this.containerObj.getBoundingClientRect(),n._cssFullscreenStore={w:s.width,h:s.height}),o.getElementById(r)?a=o.getElementById(r):(a=document.createElement("div"),a.classList.add("JXG_wrap_private"),a.setAttribute("id",r),n.parentNode.insertBefore(a,n),a.appendChild(n)),a.requestFullscreen=a.requestFullscreen||a.webkitRequestFullscreen||a.mozRequestFullScreen||a.msRequestFullscreen,o.fullscreenElement!==void 0?l=o.fullscreenElement:o.webkitFullscreenElement!==void 0?l=o.webkitFullscreenElement:l=o.msFullscreenElement,l===null?a.requestFullscreen&&(a.requestFullscreen(),this.startFullscreenResizeObserver(a)):(this.stopFullscreenResizeObserver(a),JXG$1.exists(document.exitFullscreen)?document.exitFullscreen():JXG$1.exists(document.webkitExitFullscreen)&&document.webkitExitFullscreen()),this},fullscreenListener:function(t){var r,a,n,s=this.document;r=this._fullscreen_inner_id,JXG$1.exists(r)&&(s.fullscreenElement!==void 0?n=s.fullscreenElement:s.webkitFullscreenElement!==void 0?n=s.webkitFullscreenElement:n=s.msFullscreenElement,a=s.getElementById(r),n?(a._cssFullscreenStore.id=n.id,a._cssFullscreenStore.isFullscreen=!0,a._cssFullscreenStore.margin=a.style.margin,a._cssFullscreenStore.width=a.style.width,a._cssFullscreenStore.height=a.style.height,a._cssFullscreenStore.transform=a.style.transform,a.style.width=a._cssFullscreenStore.w+"px",a.style.height=a._cssFullscreenStore.h+"px",a.style.margin="",JXG$1.scaleJSXGraphDiv(n.id,r,s,JXG$1.evaluate(this.attr.fullscreen.scale)),n=null):JXG$1.exists(a._cssFullscreenStore)&&(a._cssFullscreenStore.isFullscreen=!1,a.style.margin=a._cssFullscreenStore.margin,a.style.width=a._cssFullscreenStore.width,a.style.height=a._cssFullscreenStore.height,a.style.transform=a._cssFullscreenStore.transform,a._cssFullscreenStore=null,a.parentElement.replaceWith(a)),this.updateCSSTransforms())},startFullscreenResizeObserver:function(t){var r=this;return!JXG$1.isBrowser||!this.attr.resize||!this.attr.resize.enabled?this:(this.resizeObserver=new ResizeObserver(function(a){var n,s,o=r.document;r._isResizing||(r._isResizing=!0,window.setTimeout(function(){try{n=r._fullscreen_inner_id,o.fullscreenElement!==void 0?s=o.fullscreenElement:o.webkitFullscreenElement!==void 0?s=o.webkitFullscreenElement:s=o.msFullscreenElement,s!==null&&JXG$1.scaleJSXGraphDiv(s.id,n,o,JXG$1.evaluate(r.attr.fullscreen.scale))}catch{r.stopFullscreenResizeObserver(t)}finally{r._isResizing=!1}},r.attr.resize.throttle))}),this.resizeObserver.observe(t),this)},stopFullscreenResizeObserver:function(t){return!JXG$1.isBrowser||!this.attr.resize||!this.attr.resize.enabled?this:(JXG$1.exists(this.resizeObserver)&&this.resizeObserver.unobserve(t),this)},addLogEntry:function(t,r,a){var n,s,o=this.userLog.length-1;return JXG$1.exists(r.elementClass)&&(s=r.id),JXG$1.evaluate(this.attr.logging.enabled)&&(n=new Date().getTime(),o>=0&&this.userLog[o].type===t&&this.userLog[o].id===s&&n-this.userLog[o].end<500?(this.userLog[o].end=n,this.userLog[o].endpos=a):this.userLog.push({type:t,id:s,start:n,startpos:a,end:n,endpos:a,bbox:this.getBoundingBox(),canvas:[this.canvasWidth,this.canvasHeight],zoom:[this.zoomX,this.zoomY]})),this},createRoulette:function(t,r,a,n,s,o,l){var u=this,h=function(){var c=0,f=0,d=0,p=a,v=Numerics.root(function(G){var R=t.X(p),B=t.Y(p),F=r.X(G),U=r.Y(G);return(R-F)*(R-F)+(B-U)*(B-U)},[0,Math.PI*2]),y=0,b=0,_,N=u.create("transform",[function(){return c}],{type:"rotate"}),M=u.create("transform",[function(){return c},function(){return t.X(p)},function(){return t.Y(p)}],{type:"rotate"}),C=u.create("transform",[function(){return f},function(){return d}],{type:"translate"}),$=function(G,R,B){var F=Numerics.D(G.X)(R),U=Numerics.D(G.Y)(R),q=Numerics.D(G.X)(B),ee=Numerics.D(G.Y)(B),z=Numerics.D(G.X)((R+B)*.5),Y=Numerics.D(G.Y)((R+B)*.5),K=Mat.hypot(F,U),Z=Mat.hypot(q,ee),ne=Mat.hypot(z,Y);return(K+4*ne+Z)*(B-R)/6},w=function(G){return _-$(r,v,G)},A=Math.PI/18,X=A*9,O=null;return this.rolling=function(){var G,R,B,F,U;y=p+s*n,_=$(t,p,y),b=Numerics.root(w,v),G=new Complex(t.X(y),t.Y(y)),R=new Complex(r.X(b),r.Y(b)),B=new Complex(Numerics.D(t.X)(y),Numerics.D(t.Y)(y)),F=new Complex(Numerics.D(r.X)(b),Numerics.D(r.Y)(b)),U=Complex.C.div(B,F),c=Math.atan2(U.imaginary,U.real),U.div(Complex.C.abs(U)),U.mult(R),f=G.real-U.real,d=G.imaginary-U.imaginary,c<-A&&c>-X?(c=-A,M.applyOnce(l)):c>A&&c<X?(c=A,M.applyOnce(l)):(N.applyOnce(l),C.applyOnce(l),p=y,v=b),u.update()},this.start=function(){return o>0&&(O=window.setInterval(this.rolling,o)),this},this.stop=function(){return window.clearInterval(O),this},this};return new h}});const Board=JXG$1.Board;JXG$1.SVGRenderer=function(t,r){var a;for(this.type="svg",this.isIE=navigator.appVersion.indexOf("MSIE")!==-1||navigator.userAgent.match(/Trident\//),this.svgRoot=null,this.svgNamespace="http://www.w3.org/2000/svg",this.xlinkNamespace="http://www.w3.org/1999/xlink",this.container=t,this.container.style.MozUserSelect="none",this.container.style.userSelect="none",this.container.style.overflow="hidden",this.container.style.position===""&&(this.container.style.position="relative"),this.svgRoot=this.container.ownerDocument.createElementNS(this.svgNamespace,"svg"),this.svgRoot.style.overflow="hidden",this.svgRoot.style.display="block",this.resize(r.width,r.height),this.container.appendChild(this.svgRoot),this.defs=this.container.ownerDocument.createElementNS(this.svgNamespace,"defs"),this.svgRoot.appendChild(this.defs),this.createShadowFilter=function(n,s,o,l,u,h){var c=this.container.ownerDocument.createElementNS(this.svgNamespace,"filter"),f,d,p,v,y;return c.setAttributeNS(null,"id",n),c.setAttributeNS(null,"width","300%"),c.setAttributeNS(null,"height","300%"),c.setAttributeNS(null,"filterUnits","userSpaceOnUse"),f=this.container.ownerDocument.createElementNS(this.svgNamespace,"feOffset"),f.setAttributeNS(null,"in","SourceGraphic"),f.setAttributeNS(null,"result","offOut"),f.setAttributeNS(null,"dx",h[0]),f.setAttributeNS(null,"dy",h[1]),c.appendChild(f),d=this.container.ownerDocument.createElementNS(this.svgNamespace,"feColorMatrix"),d.setAttributeNS(null,"in","offOut"),d.setAttributeNS(null,"result","colorOut"),d.setAttributeNS(null,"type","matrix"),s==="none"||!JXG$1.isArray(s)||s.length<3?d.setAttributeNS(null,"values","0.1 0 0 0 0  0 0.1 0 0 0  0 0 0.1 0 0  0 0 0 "+o+" 0"):(s[0]/=255,s[1]/=255,s[2]/=255,y=l+" 0 0 0 "+s[0]+"  0 "+l+" 0 0 "+s[1]+"  0 0 "+l+" 0 "+s[2]+"  0 0 0 "+o+" 0",d.setAttributeNS(null,"values",y)),c.appendChild(d),p=this.container.ownerDocument.createElementNS(this.svgNamespace,"feGaussianBlur"),p.setAttributeNS(null,"in","colorOut"),p.setAttributeNS(null,"result","blurOut"),p.setAttributeNS(null,"stdDeviation",u),c.appendChild(p),v=this.container.ownerDocument.createElementNS(this.svgNamespace,"feBlend"),v.setAttributeNS(null,"in","SourceGraphic"),v.setAttributeNS(null,"in2","blurOut"),v.setAttributeNS(null,"mode","normal"),c.appendChild(v),c},this.uniqName=function(){return this.container.id+"_"+Array.prototype.slice.call(arguments).join("_")},this.toStr=function(){var n=Array.prototype.slice.call(arguments).join("");return JXG$1.exists(encodeURIComponent)&&(n=encodeURIComponent(n)),n},this.toURL=function(){return"url(#"+this.toStr.apply(this,arguments)+")"},this.defs.appendChild(this.createShadowFilter(this.uniqName("f1"),"none",1,.1,3,[5,5])),this.layer=[],a=0;a<Options$1.layer.numlayers;a++)this.layer[a]=this.container.ownerDocument.createElementNS(this.svgNamespace,"g"),this.svgRoot.appendChild(this.layer[a]);try{this.foreignObjLayer=this.container.ownerDocument.createElementNS(this.svgNamespace,"foreignObject"),this.foreignObjLayer.setAttribute("display","none"),this.foreignObjLayer.setAttribute("x",0),this.foreignObjLayer.setAttribute("y",0),this.foreignObjLayer.setAttribute("width","100%"),this.foreignObjLayer.setAttribute("height","100%"),this.foreignObjLayer.setAttribute("id",this.uniqName("foreignObj")),this.svgRoot.appendChild(this.foreignObjLayer),this.supportsForeignObject=!0}catch{this.supportsForeignObject=!1}};JXG$1.SVGRenderer.prototype=new AbstractRenderer;JXG$1.extend(JXG$1.SVGRenderer.prototype,{_createArrowHead:function(t,r,a){var n,s,o=t.id+"Triangle",l,u;return JXG$1.exists(r)&&(o+=r),JXG$1.exists(a)&&(o+=a),n=this.createPrim("marker",o),n.setAttributeNS(null,"fill","context-stroke"),n.setAttributeNS(null,"stroke","context-stroke"),n.setAttributeNS(null,"stroke-width",0),n.setAttributeNS(null,"orient","auto"),n.setAttributeNS(null,"markerUnits","strokeWidth"),s=this.container.ownerDocument.createElementNS(this.svgNamespace,"path"),u=5,r==="Start"?(l=0,a===2?s.setAttributeNS(null,"d","M 10,0 L 0,5 L 10,10 L 5,5 z"):a===3?s.setAttributeNS(null,"d","M 0,0 L 3.33,0 L 3.33,10 L 0,10 z"):a===4?(u=3.31,s.setAttributeNS(null,"d","M 0.00,3.31 C 3.53,3.84 7.13,4.50 10.00,6.63 C 9.33,5.52 8.67,4.42 8.00,3.31 C 8.67,2.21 9.33,1.10 10.00,0.00 C 7.13,2.13 3.53,2.79 0.00,3.31")):a===5?(u=3.28,s.setAttributeNS(null,"d","M 0.00,3.28 C 3.39,4.19 6.81,5.07 10.00,6.55 C 9.38,5.56 9.00,4.44 9.00,3.28 C 9.00,2.11 9.38,0.99 10.00,0.00 C 6.81,1.49 3.39,2.37 0.00,3.28")):a===6?(u=2.84,s.setAttributeNS(null,"d","M 0.00,2.84 C 3.39,3.59 6.79,4.35 10.00,5.68 C 9.67,4.73 9.33,3.78 9.00,2.84 C 9.33,1.89 9.67,0.95 10.00,0.00 C 6.79,1.33 3.39,2.09 0.00,2.84")):a===7?(u=5.2,s.setAttributeNS(null,"d","M 0.00,5.20 C 4.04,5.20 7.99,6.92 10.00,10.39 M 10.00,0.00 C 7.99,3.47 4.04,5.20 0.00,5.20")):s.setAttributeNS(null,"d","M 10,0 L 0,5 L 10,10 z"),t.elementClass===Const.OBJECT_CLASS_LINE&&(a===2?l=4.9:a===3?l=3.3:a===4||a===5||a===6?l=6.66:a===7?l=0:l=10)):(l=10,a===2?s.setAttributeNS(null,"d","M 0,0 L 10,5 L 0,10 L 5,5 z"):a===3?(l=3.3,s.setAttributeNS(null,"d","M 0,0 L 3.33,0 L 3.33,10 L 0,10 z")):a===4?(u=3.31,s.setAttributeNS(null,"d","M 10.00,3.31 C 6.47,3.84 2.87,4.50 0.00,6.63 C 0.67,5.52 1.33,4.42 2.00,3.31 C 1.33,2.21 0.67,1.10 0.00,0.00 C 2.87,2.13 6.47,2.79 10.00,3.31")):a===5?(u=3.28,s.setAttributeNS(null,"d","M 10.00,3.28 C 6.61,4.19 3.19,5.07 0.00,6.55 C 0.62,5.56 1.00,4.44 1.00,3.28 C 1.00,2.11 0.62,0.99 0.00,0.00 C 3.19,1.49 6.61,2.37 10.00,3.28")):a===6?(u=2.84,s.setAttributeNS(null,"d","M 10.00,2.84 C 6.61,3.59 3.21,4.35 0.00,5.68 C 0.33,4.73 0.67,3.78 1.00,2.84 C 0.67,1.89 0.33,0.95 0.00,0.00 C 3.21,1.33 6.61,2.09 10.00,2.84")):a===7?(u=5.2,s.setAttributeNS(null,"d","M 10.00,5.20 C 5.96,5.20 2.01,6.92 0.00,10.39 M 0.00,0.00 C 2.01,3.47 5.96,5.20 10.00,5.20")):s.setAttributeNS(null,"d","M 0,0 L 10,5 L 0,10 z"),t.elementClass===Const.OBJECT_CLASS_LINE&&(a===2?l=5.1:a===3?l=.02:a===4||a===5||a===6?l=3.33:a===7?l=10:l=.05)),a===7&&(n.setAttributeNS(null,"fill","none"),n.setAttributeNS(null,"stroke-width",1)),n.setAttributeNS(null,"refY",u),n.setAttributeNS(null,"refX",l),n.appendChild(s),n},_setArrowColor:function(t,r,a,n,s){t&&(JXG$1.isString(r)&&(s!==7?this._setAttribute(function(){t.setAttributeNS(null,"fill","context-stroke")},n.visPropOld.fillcolor):this._setAttribute(function(){t.setAttributeNS(null,"fill","none"),t.setAttributeNS(null,"stroke","context-stroke")},n.visPropOld.fillcolor)),n.rendNode.parentNode.insertBefore(n.rendNode,n.rendNode))},_setArrowWidth:function(t,r,a,n){var s,o;t&&(s=r,o=s*n,t.setAttributeNS(null,"viewBox","0 0 "+s*10+" "+s*10),t.setAttributeNS(null,"markerHeight",o),t.setAttributeNS(null,"markerWidth",o),t.setAttributeNS(null,"display","inherit"),a.parentNode.insertBefore(a,a))},updateTicks:function(t){var r,a,n,s,o,l,u="",h=t.ticks.length,c,f,d=!0;for(r=0;r<h;r++){for(n=t.ticks[r],o=n[0],l=n[1],c=o.length,f=" M "+o[0]+" "+l[0],JXG$1.isNumber(o[0])||(d=!1),a=1;d&&a<c;++a)JXG$1.isNumber(o[a])?f+=" L "+o[a]+" "+l[a]:d=!1;d&&(u+=f)}s=t.rendNode,JXG$1.exists(s)||(s=this.createPrim("path",t.id),this.appendChildPrim(s,t.evalVisProp("layer")),t.rendNode=s),s.setAttributeNS(null,"stroke",t.evalVisProp("strokecolor")),s.setAttributeNS(null,"fill","none"),s.setAttributeNS(null,"stroke-opacity",t.evalVisProp("strokeopacity")),s.setAttributeNS(null,"stroke-width",t.evalVisProp("strokewidth")),this.updatePathPrim(s,u,t.board)},displayCopyright:function(t,r){var a,n,s=4+1.8*r,o=6+r,l=.2;a=this.createPrim("text","licenseText"),a.setAttributeNS(null,"x",s+"px"),a.setAttributeNS(null,"y",o+"px"),a.setAttributeNS(null,"style","font-family:Arial,Helvetica,sans-serif; font-size:"+r+"px; opacity:"+l+";"),a.setAttributeNS(null,"aria-hidden","true"),n=this.container.ownerDocument.createTextNode(t),a.appendChild(n),this.appendChildPrim(a,0)},displayLogo:function(t,r){var a,n=1.5*r,s=.2;a=this.createPrim("image","licenseLogo"),a.setAttributeNS(null,"x","5px"),a.setAttributeNS(null,"y","5px"),a.setAttributeNS(null,"width",n+"px"),a.setAttributeNS(null,"height",n+"px"),a.setAttributeNS(null,"preserveAspectRatio","none"),a.setAttributeNS(null,"style","opacity:"+s+";"),a.setAttributeNS(null,"aria-hidden","true"),a.setAttributeNS(this.xlinkNamespace,"xlink:href",t),this.appendChildPrim(a,0)},drawInternalText:function(t){var r=this.createPrim("text",t.id);return r.style.whiteSpace="nowrap",t.rendNodeText=this.container.ownerDocument.createTextNode(""),r.appendChild(t.rendNodeText),this.appendChildPrim(r,t.evalVisProp("layer")),r},updateInternalText:function(t){var r=t.plaintext,a,n,s=t.getAnchorX(),o=t.getAnchorY();n=t.evalVisProp("cssclass"),t.rendNode.getAttributeNS(null,"class")!==n&&(t.rendNode.setAttributeNS(null,"class",n),t.needsSizeUpdate=!0),isNaN(t.coords.scrCoords[1]+t.coords.scrCoords[2])||(a=t.coords.scrCoords[1],t.visPropOld.left!==s+a&&(t.rendNode.setAttributeNS(null,"x",a+"px"),s==="left"?t.rendNode.setAttributeNS(null,"text-anchor","start"):s==="right"?t.rendNode.setAttributeNS(null,"text-anchor","end"):s==="middle"&&t.rendNode.setAttributeNS(null,"text-anchor","middle"),t.visPropOld.left=s+a),a=t.coords.scrCoords[2],t.visPropOld.top!==o+a&&(t.rendNode.setAttributeNS(null,"y",a+this.vOffsetText*.5+"px"),o==="bottom"?(t.rendNode.setAttributeNS(null,"dy","0"),t.rendNode.setAttributeNS(null,"dominant-baseline","auto")):o==="top"?(t.rendNode.setAttributeNS(null,"dy","1.6ex"),t.rendNode.setAttributeNS(null,"dominant-baseline","auto")):o==="middle"&&(t.rendNode.setAttributeNS(null,"dy","0.6ex"),t.rendNode.setAttributeNS(null,"dominant-baseline","auto")),t.visPropOld.top=o+a)),t.htmlStr!==r&&(t.rendNodeText.data=r,t.htmlStr=r),this.transformRect(t,t.transformations)},updateInternalTextStyle:function(t,r,a,n){this.setObjectFillColor(t,r,a)},drawImage:function(t){var r=this.createPrim("image",t.id);r.setAttributeNS(null,"preserveAspectRatio","none"),this.appendChildPrim(r,t.evalVisProp("layer")),t.rendNode=r,this.updateImage(t)},transformRect:function(t,r){var a,n,s,o="",l,u,h=r.length;if(h>0&&(s=t.rendNode,n=this.joinTransforms(t,r),a=[n[1][1],n[2][1],n[1][2],n[2][2],n[1][0],n[2][0]].join(","),a.indexOf("NaN")===-1))if(o+=" matrix("+a+") ",t.elementClass===Const.OBJECT_CLASS_TEXT&&t.visProp.display==="html"){switch(s.style.transform=o,l=-t.coords.scrCoords[1],u=-t.coords.scrCoords[2],t.evalVisProp("anchorx")){case"right":l+=t.size[0];break;case"middle":l+=t.size[0]*.5;break}switch(t.evalVisProp("anchory")){case"bottom":u+=t.size[1];break;case"middle":u+=t.size[1]*.5;break}s.style["transform-origin"]=l+"px "+u+"px"}else s.setAttributeNS(null,"transform",o)},updateImageURL:function(t){var r=t.eval(t.url);return t._src!==r?(t.imgIsLoaded=!1,t.rendNode.setAttributeNS(this.xlinkNamespace,"xlink:href",r),t._src=r,!0):!1},updateImageStyle:function(t,r){var a=t.evalVisProp(r?"highlightcssclass":"cssclass");t.rendNode.setAttributeNS(null,"class",a)},drawForeignObject:function(t){t.rendNode=this.appendChildPrim(this.createPrim("foreignObject",t.id),t.evalVisProp("layer")),this.appendNodesToElement(t,"foreignObject"),this.updateForeignObject(t)},updateForeignObject:function(t){t._useUserSize?t.rendNode.style.overflow="hidden":t.rendNode.style.overflow="visible",this.updateRectPrim(t.rendNode,t.coords.scrCoords[1],t.coords.scrCoords[2]-t.size[1],t.size[0],t.size[1]),(t.evalVisProp("evaluateOnlyOnce")!==!0||!t.renderedOnce)&&(t.rendNode.innerHTML=t.content,t.renderedOnce=!0),this._updateVisual(t,{stroke:!0,dash:!0},!0)},appendChildPrim:function(t,r){return JXG$1.exists(r)?r>=Options$1.layer.numlayers&&(r=Options$1.layer.numlayers-1):r=0,this.layer[r].appendChild(t),t},createPrim:function(t,r){var a=this.container.ownerDocument.createElementNS(this.svgNamespace,t);return a.setAttributeNS(null,"id",this.uniqName(r)),a.style.position="absolute",t==="path"&&(a.setAttributeNS(null,"stroke-linecap","round"),a.setAttributeNS(null,"stroke-linejoin","round"),a.setAttributeNS(null,"fill-rule","evenodd")),a},remove:function(t){JXG$1.exists(t)&&JXG$1.exists(t.parentNode)&&t.parentNode.removeChild(t)},setLayer:function(t,r){JXG$1.exists(r)?r>=Options$1.layer.numlayers&&(r=Options$1.layer.numlayers-1):r=0,this.layer[r].appendChild(t.rendNode)},makeArrows:function(t,r){var a,n,s=r.evFirst,o=r.evLast;if(this.isIE&&t.visPropCalc.visible&&(s||o)){t.rendNode.parentNode.insertBefore(t.rendNode,t.rendNode);return}a=t.rendNodeTriangleStart,s?(n=this.toStr(this.container.id,"_",t.id,"TriangleStart",r.typeFirst),(!JXG$1.exists(a)||a.id!==n)&&(a=this.container.ownerDocument.getElementById(n),a===null&&(a=this._createArrowHead(t,"Start",r.typeFirst),this.defs.appendChild(a)),t.rendNodeTriangleStart=a,t.rendNode.setAttributeNS(null,"marker-start",this.toURL(n)))):(JXG$1.exists(a)&&(this.remove(a),t.rendNodeTriangleStart=null),t.rendNode.removeAttributeNS(null,"marker-start")),a=t.rendNodeTriangleEnd,o?(n=this.toStr(this.container.id,"_",t.id,"TriangleEnd",r.typeLast),(!JXG$1.exists(a)||a.id!==n)&&(a=this.container.ownerDocument.getElementById(n),a===null&&(a=this._createArrowHead(t,"End",r.typeLast),this.defs.appendChild(a)),t.rendNodeTriangleEnd=a,t.rendNode.setAttributeNS(null,"marker-end",this.toURL(n)))):(JXG$1.exists(a)&&(this.remove(a),t.rendNodeTriangleEnd=null),t.rendNode.removeAttributeNS(null,"marker-end"))},updateEllipsePrim:function(t,r,a,n,s){var o=1e6;o=2e5,r=Math.abs(r)<o?r:o*r/Math.abs(r),a=Math.abs(a)<o?a:o*a/Math.abs(a),n=Math.abs(n)<o?n:o*n/Math.abs(n),s=Math.abs(s)<o?s:o*s/Math.abs(s),t.setAttributeNS(null,"cx",r),t.setAttributeNS(null,"cy",a),t.setAttributeNS(null,"rx",Math.abs(n)),t.setAttributeNS(null,"ry",Math.abs(s))},updateLinePrim:function(t,r,a,n,s){var o=1e6;o=2e5,isNaN(r+a+n+s)||(r=Math.abs(r)<o?r:o*r/Math.abs(r),a=Math.abs(a)<o?a:o*a/Math.abs(a),n=Math.abs(n)<o?n:o*n/Math.abs(n),s=Math.abs(s)<o?s:o*s/Math.abs(s),t.setAttributeNS(null,"x1",r),t.setAttributeNS(null,"y1",a),t.setAttributeNS(null,"x2",n),t.setAttributeNS(null,"y2",s))},updatePathPrim:function(t,r){r===""&&(r="M 0 0"),t.setAttributeNS(null,"d",r)},updatePathStringPoint:function(t,r,a){var n="",s=t.coords.scrCoords,o=r*Math.sqrt(3)*.5,l=r*.5;return a==="x"?n=" M "+(s[1]-r)+" "+(s[2]-r)+" L "+(s[1]+r)+" "+(s[2]+r)+" M "+(s[1]+r)+" "+(s[2]-r)+" L "+(s[1]-r)+" "+(s[2]+r):a==="+"?n=" M "+(s[1]-r)+" "+s[2]+" L "+(s[1]+r)+" "+s[2]+" M "+s[1]+" "+(s[2]-r)+" L "+s[1]+" "+(s[2]+r):a==="|"?n=" M "+s[1]+" "+(s[2]-r)+" L "+s[1]+" "+(s[2]+r):a==="-"?n=" M "+(s[1]-r)+" "+s[2]+" L "+(s[1]+r)+" "+s[2]:a==="<>"||a==="<<>>"?(a==="<<>>"&&(r*=1.41),n=" M "+(s[1]-r)+" "+s[2]+" L "+s[1]+" "+(s[2]+r)+" L "+(s[1]+r)+" "+s[2]+" L "+s[1]+" "+(s[2]-r)+" Z "):a==="^"?n=" M "+s[1]+" "+(s[2]-r)+" L "+(s[1]-o)+" "+(s[2]+l)+" L "+(s[1]+o)+" "+(s[2]+l)+" Z ":a==="v"?n=" M "+s[1]+" "+(s[2]+r)+" L "+(s[1]-o)+" "+(s[2]-l)+" L "+(s[1]+o)+" "+(s[2]-l)+" Z ":a===">"?n=" M "+(s[1]+r)+" "+s[2]+" L "+(s[1]-l)+" "+(s[2]-o)+" L "+(s[1]-l)+" "+(s[2]+o)+" Z ":a==="<"&&(n=" M "+(s[1]-r)+" "+s[2]+" L "+(s[1]+l)+" "+(s[2]-o)+" L "+(s[1]+l)+" "+(s[2]+o)+" Z "),n},updatePathStringPrim:function(t){var r,a,n,s=" M ",o=" L ",l=" C ",u=s,h=5e3,c="";if(t.numberPoints<=0)return"";if(n=Math.min(t.points.length,t.numberPoints),t.bezierDegree===1)for(r=0;r<n;r++)a=t.points[r].scrCoords,isNaN(a[1])||isNaN(a[2])?u=s:(a[1]=Math.max(Math.min(a[1],h),-h),a[2]=Math.max(Math.min(a[2],h),-h),c+=u+a[1]+" "+a[2],u=o);else if(t.bezierDegree===3)for(r=0;r<n;)a=t.points[r].scrCoords,isNaN(a[1])||isNaN(a[2])?u=s:(c+=u+a[1]+" "+a[2],u===l&&(r+=1,a=t.points[r].scrCoords,c+=" "+a[1]+" "+a[2],r+=1,a=t.points[r].scrCoords,c+=" "+a[1]+" "+a[2]),u=l),r+=1;return c},updatePathStringBezierPrim:function(t){var r,a,n,s,o,l,u,h=" M ",c=" C ",f=h,d=5e3,p="",v=t.evalVisProp("strokewidth"),y=t.evalVisProp("curvetype")!=="plot";if(t.numberPoints<=0)return"";for(y&&t.board.options.curve.RDPsmoothing&&(t.points=Numerics.RamerDouglasPeucker(t.points,.5)),u=Math.min(t.points.length,t.numberPoints),a=1;a<3;a++)for(f=h,r=0;r<u;r++)s=t.points[r].scrCoords,isNaN(s[1])||isNaN(s[2])?f=h:(s[1]=Math.max(Math.min(s[1],d),-d),s[2]=Math.max(Math.min(s[2],d),-d),f===h?p+=f+s[1]+" "+s[2]:(n=2*a,p+=[f,o+(s[1]-o)*.333+v*(n*Math.random()-a)," ",l+(s[2]-l)*.333+v*(n*Math.random()-a)," ",o+(s[1]-o)*.666+v*(n*Math.random()-a)," ",l+(s[2]-l)*.666+v*(n*Math.random()-a)," ",s[1]," ",s[2]].join("")),f=c,o=s[1],l=s[2]);return p},updatePolygonPrim:function(t,r){var a,n="",s,o=r.vertices.length;for(t.setAttributeNS(null,"stroke","none"),t.setAttributeNS(null,"fill-rule","evenodd"),r.elType==="polygonalchain"&&o++,a=0;a<o-1;a++){if(r.vertices[a].isReal)s=r.vertices[a].coords.scrCoords,n=n+s[1]+","+s[2];else{t.setAttributeNS(null,"points","");return}a<o-2&&(n+=" ")}n.indexOf("NaN")===-1&&t.setAttributeNS(null,"points",n)},updateRectPrim:function(t,r,a,n,s){t.setAttributeNS(null,"x",r),t.setAttributeNS(null,"y",a),t.setAttributeNS(null,"width",n),t.setAttributeNS(null,"height",s)},_setAttribute:function(t,r){r===""?t():window.setTimeout(t,1)},display:function(t,r){var a;t&&t.rendNode&&(t.visPropOld.visible=r,a=t.rendNode,r?(a.setAttributeNS(null,"display","inline"),a.style.visibility="inherit"):(a.setAttributeNS(null,"display","none"),a.style.visibility="hidden"))},hide:function(t){JXG$1.deprecated("Board.renderer.hide()","Board.renderer.display()"),this.display(t,!1)},setARIA:function(t){var r,a,n;for(r in t.visProp.aria)t.visProp.aria.hasOwnProperty(r)&&r!=="enabled"&&(a="aria."+r,n=t.evalVisProp("aria."+r),t.visPropOld[a]!==n&&(this.setPropertyPrim(t.rendNode,"aria-"+r,n),t.visPropOld[a]=n))},setBuffering:function(t,r){t.rendNode.setAttribute("buffered-rendering",r)},setCssClass(t,r){t.visPropOld.cssclass!==r&&(this.setPropertyPrim(t.rendNode,"class",r),t.visPropOld.cssclass=r)},setDashStyle:function(t){var r=t.evalVisProp("dash"),a=t.evalVisProp("dashscale"),n=a?.5*t.evalVisProp("strokewidth"):1,s=t.rendNode;r>0?s.setAttributeNS(null,"stroke-dasharray",this.dashArray[r-1].map(function(o){return o*n}).join(",")):s.hasAttributeNS(null,"stroke-dasharray")&&s.removeAttributeNS(null,"stroke-dasharray")},setGradient:function(t){var r=t.rendNode,a,n,s,o=t.evalVisProp("gradient");o==="linear"||o==="radial"?(a=this.createPrim(o+"Gradient",t.id+"_gradient"),n=this.createPrim("stop",t.id+"_gradient1"),s=this.createPrim("stop",t.id+"_gradient2"),a.appendChild(n),a.appendChild(s),this.defs.appendChild(a),r.setAttributeNS(null,"style","fill:"+this.toURL(this.container.id+"_"+t.id+"_gradient")),t.gradNode1=n,t.gradNode2=s,t.gradNode=a):r.removeAttributeNS(null,"style")},setLineCap:function(t){var r=t.evalVisProp("linecap");r===void 0||r===""||t.visPropOld.linecap===r||!JXG$1.exists(t.rendNode)||(this.setPropertyPrim(t.rendNode,"stroke-linecap",r),t.visPropOld.linecap=r)},setObjectFillColor:function(t,r,a,n){var s,o,l,u,h=r,c=a,f=t.evalVisProp("gradient");c=c>0?c:0,!(t.visPropOld.fillcolor===h&&t.visPropOld.fillopacity===c&&f===null)&&(JXG$1.exists(h)&&h!==!1&&(h.length!==9?(o=h,u=c):(l=JXG$1.rgba2rgbo(h),o=l[0],u=c*l[1]),n===void 0?s=t.rendNode:s=n,o!=="none"&&o!==""&&o!==!1&&this._setAttribute(function(){s.setAttributeNS(null,"fill",o)},t.visPropOld.fillcolor),t.type===JXG$1.OBJECT_TYPE_IMAGE?this._setAttribute(function(){s.setAttributeNS(null,"opacity",u)},t.visPropOld.fillopacity):(o==="none"?(u=0,s.setAttributeNS(null,"pointer-events","visibleStroke")):s.setAttributeNS(null,"pointer-events","visiblePainted"),this._setAttribute(function(){s.setAttributeNS(null,"fill-opacity",u)},t.visPropOld.fillopacity)),(f==="linear"||f==="radial")&&this.updateGradient(t)),t.visPropOld.fillcolor=h,t.visPropOld.fillopacity=c)},setObjectStrokeColor:function(t,r,a){var n=r,s,o,l=a,u,h;l=l>0?l:0,!(t.visPropOld.strokecolor===n&&t.visPropOld.strokeopacity===l)&&(JXG$1.exists(n)&&n!==!1&&(n.length!==9?(s=n,u=l):(o=JXG$1.rgba2rgbo(n),s=o[0],u=l*o[1]),h=t.rendNode,t.elementClass===Const.OBJECT_CLASS_TEXT?t.evalVisProp("display")==="html"?this._setAttribute(function(){h.style.color=s,h.style.opacity=u},t.visPropOld.strokecolor):this._setAttribute(function(){h.setAttributeNS(null,"fill",s),h.setAttributeNS(null,"fill-opacity",u)},t.visPropOld.strokecolor):this._setAttribute(function(){h.setAttributeNS(null,"stroke",s),h.setAttributeNS(null,"stroke-opacity",u)},t.visPropOld.strokecolor),(t.elementClass===Const.OBJECT_CLASS_CURVE||t.elementClass===Const.OBJECT_CLASS_LINE)&&(t.evalVisProp("firstarrow")&&this._setArrowColor(t.rendNodeTriangleStart,s,u,t,t.visPropCalc.typeFirst),t.evalVisProp("lastarrow")&&this._setArrowColor(t.rendNodeTriangleEnd,s,u,t,t.visPropCalc.typeLast))),t.visPropOld.strokecolor=n,t.visPropOld.strokeopacity=l)},setObjectStrokeWidth:function(t,r){var a,n=r;isNaN(n)||t.visPropOld.strokewidth===n||(a=t.rendNode,this.setPropertyPrim(a,"stroked","true"),JXG$1.exists(n)&&this.setPropertyPrim(a,"stroke-width",n+"px"),t.visPropOld.strokewidth=n)},setObjectTransition:function(t,r){var a,n,s=[],o,l,u=0,h=["rendNode","rendNodeTriangleStart","rendNodeTriangleEnd"];if(r===void 0&&(r=t.evalVisProp("transitionduration")),n=t.evalVisProp("transitionproperties"),!(r===t.visPropOld.transitionduration&&n===t.visPropOld.transitionproperties)){for(JXG$1.exists(n)&&(u=n.length),l=0;l<u;l++)s.push(n[l]+" "+r+"ms");for(o=s.join(", "),u=h.length,l=0;l<u;++l)t[h[l]]&&(a=t[h[l]],a.style.transition=o);t.visPropOld.transitionduration=r,t.visPropOld.transitionproperties=n}},setShadow:function(t){var r=t.evalVisProp("shadow"),a,n,s,o,l,u,h,c,f=!0,d=!1;a=JSON.stringify(r),a!==t.visPropOld.shadow&&(typeof r=="boolean"?(f=!0,d=r,n="none",s=3,o=.1,l=[5,5],u=1):t.evalVisProp("shadow.enabled")?(f=!1,d=!0,n=JXG$1.rgbParser(t.evalVisProp("shadow.color")),s=t.evalVisProp("shadow.blur"),o=t.evalVisProp("shadow.blend"),l=t.evalVisProp("shadow.offset"),u=t.evalVisProp("shadow.opacity")):d=!1,JXG$1.exists(t.rendNode)&&(d?f?t.rendNode.setAttributeNS(null,"filter",this.toURL(this.container.id+"_f1")):(c=this.container.ownerDocument.getElementById(h),c&&this.defs.removeChild(c),h=t.rendNode.id+"_f1",this.defs.appendChild(this.createShadowFilter(h,n,u,o,s,l)),t.rendNode.setAttributeNS(null,"filter",this.toURL(h))):t.rendNode.removeAttributeNS(null,"filter")),t.visPropOld.shadow=a)},setTabindex:function(t){var r;t.board.attr.keyboard.enabled&&JXG$1.exists(t.rendNode)&&(r=t.evalVisProp("tabindex"),t.visPropCalc.visible||(r=null),r!==t.visPropOld.tabindex&&(t.rendNode.setAttribute("tabindex",r),t.visPropOld.tabindex=r))},setPropertyPrim:function(t,r,a){r!=="stroked"&&t.setAttributeNS(null,r,a)},show:function(t){JXG$1.deprecated("Board.renderer.show()","Board.renderer.display()"),this.display(t,!0)},updateGradient:function(t){var r,a,n=t.gradNode1,s=t.gradNode2,o=t.evalVisProp("gradient");!JXG$1.exists(n)||!JXG$1.exists(s)||(a=t.evalVisProp("fillopacity"),a=a>0?a:0,r=t.evalVisProp("fillcolor"),n.setAttributeNS(null,"style","stop-color:"+r+";stop-opacity:"+a),s.setAttributeNS(null,"style","stop-color:"+t.evalVisProp("gradientsecondcolor")+";stop-opacity:"+t.evalVisProp("gradientsecondopacity")),n.setAttributeNS(null,"offset",t.evalVisProp("gradientstartoffset")*100+"%"),s.setAttributeNS(null,"offset",t.evalVisProp("gradientendoffset")*100+"%"),o==="linear"?this.updateGradientAngle(t.gradNode,t.evalVisProp("gradientangle")):o==="radial"&&this.updateGradientCircle(t.gradNode,t.evalVisProp("gradientcx"),t.evalVisProp("gradientcy"),t.evalVisProp("gradientr"),t.evalVisProp("gradientfx"),t.evalVisProp("gradientfy"),t.evalVisProp("gradientfr")))},updateGradientAngle:function(t,r){var a=1,n=Math.cos(r),s=Math.sin(r);Math.abs(n)>Math.abs(s)?a/=Math.abs(n):a/=Math.abs(s),n>=0?(t.setAttributeNS(null,"x1",0),t.setAttributeNS(null,"x2",n*a)):(t.setAttributeNS(null,"x1",-n*a),t.setAttributeNS(null,"x2",0)),s>=0?(t.setAttributeNS(null,"y1",0),t.setAttributeNS(null,"y2",s*a)):(t.setAttributeNS(null,"y1",-s*a),t.setAttributeNS(null,"y2",0))},updateGradientCircle:function(t,r,a,n,s,o,l){t.setAttributeNS(null,"cx",r*100+"%"),t.setAttributeNS(null,"cy",a*100+"%"),t.setAttributeNS(null,"r",n*100+"%"),t.setAttributeNS(null,"fx",s*100+"%"),t.setAttributeNS(null,"fy",o*100+"%"),t.setAttributeNS(null,"fr",l*100+"%")},suspendRedraw:function(){this.suspendHandle=this.svgRoot.suspendRedraw(1e4)},unsuspendRedraw:function(){this.svgRoot.unsuspendRedraw(this.suspendHandle)},resize:function(t,r){this.svgRoot.setAttribute("width",parseFloat(t)),this.svgRoot.setAttribute("height",parseFloat(r))},createTouchpoints:function(t){var r,a,n,s;for(this.touchpoints=[],r=0;r<t;r++)a="touchpoint1_"+r,s=this.createPrim("path",a),this.appendChildPrim(s,19),s.setAttributeNS(null,"d","M 0 0"),this.touchpoints.push(s),this.setPropertyPrim(s,"stroked","true"),this.setPropertyPrim(s,"stroke-width","1px"),s.setAttributeNS(null,"stroke","#000000"),s.setAttributeNS(null,"stroke-opacity",1),s.setAttributeNS(null,"display","none"),n="touchpoint2_"+r,s=this.createPrim("ellipse",n),this.appendChildPrim(s,19),this.updateEllipsePrim(s,0,0,0,0),this.touchpoints.push(s),this.setPropertyPrim(s,"stroked","true"),this.setPropertyPrim(s,"stroke-width","1px"),s.setAttributeNS(null,"stroke","#000000"),s.setAttributeNS(null,"fill","#ffffff"),s.setAttributeNS(null,"stroke-opacity",1),s.setAttributeNS(null,"fill-opacity",0),s.setAttributeNS(null,"display","none")},showTouchpoint:function(t){this.touchpoints&&t>=0&&2*t<this.touchpoints.length&&(this.touchpoints[2*t].setAttributeNS(null,"display","inline"),this.touchpoints[2*t+1].setAttributeNS(null,"display","inline"))},hideTouchpoint:function(t){this.touchpoints&&t>=0&&2*t<this.touchpoints.length&&(this.touchpoints[2*t].setAttributeNS(null,"display","none"),this.touchpoints[2*t+1].setAttributeNS(null,"display","none"))},updateTouchpoint:function(t,r){var a,n,s=37;this.touchpoints&&t>=0&&2*t<this.touchpoints.length&&(a=r[0],n=r[1],this.touchpoints[2*t].setAttributeNS(null,"d","M "+(a-s)+" "+n+" L "+(a+s)+" "+n+" M "+a+" "+(n-s)+" L "+a+" "+(n+s)),this.updateEllipsePrim(this.touchpoints[2*t+1],r[0],r[1],25,25))},_getValuesOfDOMElements:function(t){var r=[];if(t.nodeType===1)for(t=t.firstChild;t;)t.id!==void 0&&t.value!==void 0&&r.push([t.id,t.value]),JXG$1.concat(r,this._getValuesOfDOMElements(t)),t=t.nextSibling;return r},_getImgDataURL:function(t){var r,a,n,s,o,l;if(r=t.getElementsByTagName("image"),a=r.length,a>0)for(n=document.createElement("canvas"),l=0;l<a;l++){r[l].setAttribute("crossorigin","anonymous"),s=n.getContext("2d"),n.width=r[l].getAttribute("width"),n.height=r[l].getAttribute("height");try{s.drawImage(r[l],0,0,n.width,n.height),o=n.toDataURL(),r[l].setAttribute("xlink:href",o)}catch(u){console.log("CORS problem! Image can not be used",u)}}return!0},dumpToDataURI:function(t){var r=this.svgRoot,a=window.btoa||Base64.encode,n,s,o,l=[];if(this.container.hasChildNodes()&&JXG$1.exists(this.foreignObjLayer))for(t||this.foreignObjLayer.setAttribute("display","inline");r.nextSibling;)JXG$1.concat(l,this._getValuesOfDOMElements(r.nextSibling)),this.foreignObjLayer.appendChild(r.nextSibling);if(this._getImgDataURL(r),r.setAttribute("xmlns","http://www.w3.org/2000/svg"),n=new XMLSerializer().serializeToString(r),t!==!0)for(o=l.length,s=0;s<o;s++)n=n.replace('id="'+l[s][0]+'"','id="'+l[s][0]+'" value="'+l[s][1]+'"');if(this.isIE&&(n.match(/xmlns="http:\/\/www.w3.org\/2000\/svg"\s+xmlns="http:\/\/www.w3.org\/2000\/svg"/g)||[]).length>1&&(n=n.replace(/xmlns="http:\/\/www.w3.org\/2000\/svg"\s+xmlns="http:\/\/www.w3.org\/2000\/svg"/g,"")),n=n.replace(/&nbsp;/g," "),JXG$1.exists(this.foreignObjLayer)&&this.foreignObjLayer.hasChildNodes()){for(;this.foreignObjLayer.firstChild;)this.container.appendChild(this.foreignObjLayer.firstChild);this.foreignObjLayer.setAttribute("display","none")}return"data:image/svg+xml;base64,"+a(unescape(encodeURIComponent(n)))},dumpToCanvas:function(t,r,a,n){var s,o,l,u,h=this.container.ownerDocument;return l=h.getElementById(t),l.width=l.width,u=l.getContext("2d"),r!==void 0&&a!==void 0&&(l.style.width=parseFloat(r)+"px",l.style.height=parseFloat(a)+"px",l.setAttribute("width",parseFloat(r)),l.setAttribute("height",parseFloat(a))),o=new Image,s=this.dumpToDataURI(n),o.src=s,"Promise"in window?new Promise(function(c,f){try{o.onload=function(){u.drawImage(o,0,0,r,a),c()}}catch(d){f(d)}}):(o.onload=function(){window.setTimeout(function(){try{u.drawImage(o,0,0,r,a)}catch{console.log("screenshots not longer supported on IE")}},200)},this)},screenshot:function(t,r,a){var n,s=this.container.ownerDocument,o=this.container.parentNode,l,u,h,c,f,d,p,v=t.attr.screenshot,y,b,_,N=!1,M;return this.type==="no"?this:(d=v.scale*this.container.getBoundingClientRect().width,p=v.scale*this.container.getBoundingClientRect().height,r===void 0||r===""?(N=!0,h=new Image,h.style.width=d+"px",h.style.height=p+"px"):(N=!1,h=s.getElementById(r)),N&&(n=s.createElement("div"),n.style.cssText=v.css,n.style.width=d+"px",n.style.height=p+"px",n.style.zIndex=this.container.style.zIndex+120,n.style.position="absolute",n.style.top=this.container.offsetTop+"px",n.style.left=this.container.offsetLeft+"px"),l=s.createElement("canvas"),u=Math.random().toString(36).slice(2,7),l.setAttribute("id",u),l.setAttribute("width",d),l.setAttribute("height",p),l.style.width=d+"px",l.style.height=d+"px",l.style.display="none",o.appendChild(l),N&&(c=s.createElement("span"),f=s.createTextNode(""),c.style.cssText=v.cssButton,c.appendChild(f),c.onclick=function(){n.parentNode.removeChild(n)},n.appendChild(h),n.appendChild(c),o.insertBefore(n,this.container.nextSibling)),y=s.getElementById(this.uniqName("navigationbar")),JXG$1.exists(y)&&(b=y.style.display,y.style.display="none",_=this.removeToInsertLater(y)),M=function(){h.src=l.toDataURL("image/png"),o.removeChild(l)},"Promise"in window?this.dumpToCanvas(u,d,p,a).then(M):(this.dumpToCanvas(u,d,p,a),window.setTimeout(M,200)),JXG$1.exists(y)&&(y.style.display=b,_()),this)}});const SVGRenderer=JXG$1.SVGRenderer;JXG$1.VMLRenderer=function(t){this.type="vml",this.container=t,this.container.style.overflow="hidden",this.container.style.position===""&&(this.container.style.position="relative"),this.container.onselectstart=function(){return!1},this.resolution=10,JXG$1.exists(JXG$1.vmlStylesheet)||(t.ownerDocument.namespaces.add("jxgvml","urn:schemas-microsoft-com:vml"),JXG$1.vmlStylesheet=this.container.ownerDocument.createStyleSheet(),JXG$1.vmlStylesheet.addRule(".jxgvml","behavior:url(#default#VML)"));try{t.ownerDocument.namespaces.jxgvml||t.ownerDocument.namespaces.add("jxgvml","urn:schemas-microsoft-com:vml"),this.createNode=function(r){return t.ownerDocument.createElement("<jxgvml:"+r+' class="jxgvml">')}}catch{this.createNode=function(a){return t.ownerDocument.createElement("<"+a+' xmlns="urn:schemas-microsoft.com:vml" class="jxgvml">')}}this.dashArray=["Solid","1 1","ShortDash","Dash","LongDash","ShortDashDot","LongDashDot"]};JXG$1.VMLRenderer.prototype=new AbstractRenderer;JXG$1.extend(JXG$1.VMLRenderer.prototype,{_setAttr:function(t,r,a,n){try{this.container.ownerDocument.documentMode===8?t[r]=a:t.setAttribute(r,a,n)}catch{JXG$1.debug("_setAttr: "+r+" "+a+`<br>
`)}},updateTicks:function(t){var r,a,n,s,o,l=this.resolution,u=[];for(a=t.ticks.length,r=0;r<a;r++)n=t.ticks[r],s=n[0],o=n[1],JXG$1.isNumber(s[0])&&JXG$1.isNumber(s[1])&&u.push(" m "+Math.round(l*s[0])+", "+Math.round(l*o[0])+" l "+Math.round(l*s[1])+", "+Math.round(l*o[1])+" ");JXG$1.exists(t.rendNode)||(t.rendNode=this.createPrim("path",t.id),this.appendChildPrim(t.rendNode,t.evalVisProp("layer"))),this._setAttr(t.rendNode,"stroked","true"),this._setAttr(t.rendNode,"strokecolor",t.evalVisProp("strokecolor"),1),this._setAttr(t.rendNode,"strokeweight",t.evalVisProp("strokewidth")),this._setAttr(t.rendNodeStroke,"opacity",t.evalVisProp("strokeopacity")*100+"%"),this.updatePathPrim(t.rendNode,u,t.board)},displayCopyright:function(t,r){var a,n;a=this.createNode("textbox"),a.style.position="absolute",this._setAttr(a,"id",this.container.id+"_licenseText"),a.style.left=20,a.style.top=2,a.style.fontSize=r,a.style.color="#356AA0",a.style.fontFamily="Arial,Helvetica,sans-serif",this._setAttr(a,"opacity","30%"),a.style.filter="progid:DXImageTransform.Microsoft.Matrix(M11='1.0', sizingMethod='auto expand', enabled = false) progid:DXImageTransform.Microsoft.Alpha(opacity = 30, enabled = true)",n=this.container.ownerDocument.createTextNode(t),a.appendChild(n),this.appendChildPrim(a,0)},drawInternalText:function(t){var r;return r=this.createNode("textbox"),r.style.position="absolute",t.rendNodeText=this.container.ownerDocument.createTextNode(""),r.appendChild(t.rendNodeText),this.appendChildPrim(r,9),r.style.filter="progid:DXImageTransform.Microsoft.Matrix(M11='1.0', sizingMethod='auto expand', enabled = false) progid:DXImageTransform.Microsoft.Alpha(opacity = 100, enabled = false)",r},updateInternalText:function(t){var r,a=t.plaintext,n=this.joinTransforms(t,t.transformations),s=[0,0],o,l,u,h,c,f=t.rendNode,d=[],p=t.getAnchorX(),v=t.getAnchorY();if(!isNaN(t.coords.scrCoords[1]+t.coords.scrCoords[2])){for(p==="right"?s[0]=1:p==="middle"&&(s[0]=.5),v==="bottom"?s[1]=1:v==="middle"&&(s[1]=.5),d[0]=Mat.matVecMult(n,[1,t.coords.scrCoords[1]-s[0]*t.size[0],t.coords.scrCoords[2]+(1-s[1])*t.size[1]+this.vOffsetText]),d[0][1]/=d[0][0],d[0][2]/=d[0][0],d[1]=Mat.matVecMult(n,[1,t.coords.scrCoords[1]+(1-s[0])*t.size[0],t.coords.scrCoords[2]+(1-s[1])*t.size[1]+this.vOffsetText]),d[1][1]/=d[1][0],d[1][2]/=d[1][0],d[2]=Mat.matVecMult(n,[1,t.coords.scrCoords[1]+(1-s[0])*t.size[0],t.coords.scrCoords[2]-s[1]*t.size[1]+this.vOffsetText]),d[2][1]/=d[2][0],d[2][2]/=d[2][0],d[3]=Mat.matVecMult(n,[1,t.coords.scrCoords[1]-s[0]*t.size[0],t.coords.scrCoords[2]-s[1]*t.size[1]+this.vOffsetText]),d[3][1]/=d[3][0],d[3][2]/=d[3][0],o=d[0][1],u=d[0][1],l=d[0][2],h=d[0][2],c=1;c<4;c++)o=Math.max(o,d[c][1]),u=Math.min(u,d[c][1]),l=Math.max(l,d[c][2]),h=Math.min(h,d[c][2]);r=s[0]===1?Math.floor(t.board.canvasWidth-o):Math.floor(u),t.visPropOld.left!==p+r&&(s[0]===1?(t.rendNode.style.right=r+"px",t.rendNode.style.left="auto"):(t.rendNode.style.left=r+"px",t.rendNode.style.right="auto"),t.visPropOld.left=p+r),r=s[1]===1?Math.floor(t.board.canvasHeight-l):Math.floor(h),t.visPropOld.top!==v+r&&(s[1]===1?(t.rendNode.style.bottom=r+"px",t.rendNode.style.top="auto"):(t.rendNode.style.top=r+"px",t.rendNode.style.bottom="auto"),t.visPropOld.top=v+r)}t.htmlStr!==a&&(t.rendNodeText.data=a,t.htmlStr=a),f.filters.item(0).M11=n[1][1],f.filters.item(0).M12=n[1][2],f.filters.item(0).M21=n[2][1],f.filters.item(0).M22=n[2][2],f.filters.item(0).enabled=!0},drawImage:function(t){var r;r=this.container.ownerDocument.createElement("img"),r.style.position="absolute",this._setAttr(r,"id",this.container.id+"_"+t.id),this.container.appendChild(r),this.appendChildPrim(r,t.evalVisProp("layer")),r.style.filter="progid:DXImageTransform.Microsoft.Matrix(M11='1.0', sizingMethod='auto expand') progid:DXImageTransform.Microsoft.Alpha(opacity = 100, enabled = false)",t.rendNode=r,this.updateImage(t)},transformRect:function(t,r){var a,n,s,o,l,u,h=t.rendNode,c=[],f=r.length;if(f>0){for(a=this.joinTransforms(t,r),c[0]=Mat.matVecMult(a,t.coords.scrCoords),c[0][1]/=c[0][0],c[0][2]/=c[0][0],c[1]=Mat.matVecMult(a,[1,t.coords.scrCoords[1]+t.size[0],t.coords.scrCoords[2]]),c[1][1]/=c[1][0],c[1][2]/=c[1][0],c[2]=Mat.matVecMult(a,[1,t.coords.scrCoords[1]+t.size[0],t.coords.scrCoords[2]-t.size[1]]),c[2][1]/=c[2][0],c[2][2]/=c[2][0],c[3]=Mat.matVecMult(a,[1,t.coords.scrCoords[1],t.coords.scrCoords[2]-t.size[1]]),c[3][1]/=c[3][0],c[3][2]/=c[3][0],n=c[0][1],o=c[0][1],s=c[0][2],l=c[0][2],u=1;u<4;u++)n=Math.max(n,c[u][1]),o=Math.min(o,c[u][1]),s=Math.max(s,c[u][2]),l=Math.min(l,c[u][2]);h.style.left=Math.floor(o)+"px",h.style.top=Math.floor(l)+"px",h.filters.item(0).M11=a[1][1],h.filters.item(0).M12=a[1][2],h.filters.item(0).M21=a[2][1],h.filters.item(0).M22=a[2][2],h.filters.item(0).enabled=!0}},updateImageURL:function(t){var r=t.eval(t.url);this._setAttr(t.rendNode,"src",r)},appendChildPrim:function(t,r){return JXG$1.exists(r)||(r=0),t.style.zIndex=r,this.container.appendChild(t),t},appendNodesToElement:function(t,r){(r==="shape"||r==="path"||r==="polygon")&&(t.rendNodePath=this.getElementById(t.id+"_path")),t.rendNodeFill=this.getElementById(t.id+"_fill"),t.rendNodeStroke=this.getElementById(t.id+"_stroke"),t.rendNodeShadow=this.getElementById(t.id+"_shadow"),t.rendNode=this.getElementById(t.id)},createPrim:function(t,r){var a,n,s=this.createNode("fill"),o=this.createNode("stroke"),l=this.createNode("shadow");return this._setAttr(s,"id",this.container.id+"_"+r+"_fill"),this._setAttr(o,"id",this.container.id+"_"+r+"_stroke"),this._setAttr(l,"id",this.container.id+"_"+r+"_shadow"),t==="circle"||t==="ellipse"?(a=this.createNode("oval"),a.appendChild(s),a.appendChild(o),a.appendChild(l)):t==="polygon"||t==="path"||t==="shape"||t==="line"?(a=this.createNode("shape"),a.appendChild(s),a.appendChild(o),a.appendChild(l),n=this.createNode("path"),this._setAttr(n,"id",this.container.id+"_"+r+"_path"),a.appendChild(n)):(a=this.createNode(t),a.appendChild(s),a.appendChild(o),a.appendChild(l)),a.style.position="absolute",a.style.left="0px",a.style.top="0px",this._setAttr(a,"id",this.container.id+"_"+r),a},remove:function(t){JXG$1.exists(t)&&t.removeNode(!0)},makeArrows:function(t){var r,a=t.evalVisProp("firstarrow"),n=t.evalVisProp("lastarrow");t.visPropOld.firstarrow===a&&t.visPropOld.lastarrow===n||(a?(r=t.rendNodeStroke,this._setAttr(r,"startarrow","block"),this._setAttr(r,"startarrowlength","long")):(r=t.rendNodeStroke,JXG$1.exists(r)&&this._setAttr(r,"startarrow","none")),n?(r=t.rendNodeStroke,this._setAttr(r,"id",this.container.id+"_"+t.id+"stroke"),this._setAttr(r,"endarrow","block"),this._setAttr(r,"endarrowlength","long")):(r=t.rendNodeStroke,JXG$1.exists(r)&&this._setAttr(r,"endarrow","none")),t.visPropOld.firstarrow=a,t.visPropOld.lastarrow=n)},updateEllipsePrim:function(t,r,a,n,s){t.style.left=Math.floor(r-n)+"px",t.style.top=Math.floor(a-s)+"px",t.style.width=Math.floor(Math.abs(n)*2)+"px",t.style.height=Math.floor(Math.abs(s)*2)+"px"},updateLinePrim:function(t,r,a,n,s,o){var l,u=this.resolution;isNaN(r+a+n+s)||(l=["m ",Math.floor(u*r),", ",Math.floor(u*a)," l ",Math.floor(u*n),", ",Math.floor(u*s)],this.updatePathPrim(t,l,o))},updatePathPrim:function(t,r,a){var n=a.canvasWidth,s=a.canvasHeight;r.length<=0&&(r=["m 0,0"]),t.style.width=n,t.style.height=s,this._setAttr(t,"coordsize",[Math.floor(this.resolution*n),Math.floor(this.resolution*s)].join(",")),this._setAttr(t,"path",r.join(""))},updatePathStringPoint:function(t,r,a){var n=[],s=Math.round,o=t.coords.scrCoords,l=r*Math.sqrt(3)*.5,u=r*.5,h=this.resolution;return a==="x"?n.push([" m ",s(h*(o[1]-r)),", ",s(h*(o[2]-r))," l ",s(h*(o[1]+r)),", ",s(h*(o[2]+r))," m ",s(h*(o[1]+r)),", ",s(h*(o[2]-r))," l ",s(h*(o[1]-r)),", ",s(h*(o[2]+r))].join("")):a==="+"?n.push([" m ",s(h*(o[1]-r)),", ",s(h*o[2])," l ",s(h*(o[1]+r)),", ",s(h*o[2])," m ",s(h*o[1]),", ",s(h*(o[2]-r))," l ",s(h*o[1]),", ",s(h*(o[2]+r))].join("")):a==="<>"||a==="<<>>"?(a==="<<>>"&&(r*=1.41),n.push([" m ",s(h*(o[1]-r)),", ",s(h*o[2])," l ",s(h*o[1]),", ",s(h*(o[2]+r))," l ",s(h*(o[1]+r)),", ",s(h*o[2])," l ",s(h*o[1]),", ",s(h*(o[2]-r))," x e "].join(""))):a==="^"?n.push([" m ",s(h*o[1]),", ",s(h*(o[2]-r))," l ",s(h*(o[1]-l)),", ",s(h*(o[2]+u))," l ",s(h*(o[1]+l)),", ",s(h*(o[2]+u))," x e "].join("")):a==="v"?n.push([" m ",s(h*o[1]),", ",s(h*(o[2]+r))," l ",s(h*(o[1]-l)),", ",s(h*(o[2]-u))," l ",s(h*(o[1]+l)),", ",s(h*(o[2]-u))," x e "].join("")):a===">"?n.push([" m ",s(h*(o[1]+r)),", ",s(h*o[2])," l ",s(h*(o[1]-u)),", ",s(h*(o[2]-l))," l ",s(h*(o[1]-u)),", ",s(h*(o[2]+l))," l ",s(h*(o[1]+r)),", ",s(h*o[2])].join("")):a==="<"&&n.push([" m ",s(h*(o[1]-r)),", ",s(h*o[2])," l ",s(h*(o[1]+u)),", ",s(h*(o[2]-l))," l ",s(h*(o[1]+u)),", ",s(h*(o[2]+l))," x e "].join("")),n},updatePathStringPrim:function(t){var r,a,n=[],s=this.resolution,o=Math.round,l=" m ",u=" l ",h=" c ",c=l,f=Math.min(t.numberPoints,8192);if(t.numberPoints<=0)return"";if(f=Math.min(f,t.points.length),t.bezierDegree===1)for(r=0;r<f;r++)a=t.points[r].scrCoords,isNaN(a[1])||isNaN(a[2])?c=l:(a[1]>2e4?a[1]=2e4:a[1]<-2e4&&(a[1]=-2e4),a[2]>2e4?a[2]=2e4:a[2]<-2e4&&(a[2]=-2e4),n.push([c,o(s*a[1]),", ",o(s*a[2])].join("")),c=u);else if(t.bezierDegree===3)for(r=0;r<f;)a=t.points[r].scrCoords,isNaN(a[1])||isNaN(a[2])?c=l:(n.push([c,o(s*a[1]),", ",o(s*a[2])].join("")),c===h&&(r+=1,a=t.points[r].scrCoords,n.push([" ",o(s*a[1]),", ",o(s*a[2])].join("")),r+=1,a=t.points[r].scrCoords,n.push([" ",o(s*a[1]),", ",o(s*a[2])].join(""))),c=h),r+=1;return n.push(" e"),n},updatePathStringBezierPrim:function(t){var r,a,n,s,o,l,u=[],h=t.evalVisProp("strokewidth"),c=this.resolution,f=Math.round,d=" m ",p=" c ",v=d,y=t.evalVisProp("curvetype")!=="plot",b=Math.min(t.numberPoints,8192);if(t.numberPoints<=0)return"";for(y&&t.board.options.curve.RDPsmoothing&&(t.points=Numerics.RamerDouglasPeucker(t.points,1)),b=Math.min(b,t.points.length),a=1;a<3;a++)for(v=d,r=0;r<b;r++)s=t.points[r].scrCoords,isNaN(s[1])||isNaN(s[2])?v=d:(s[1]>2e4?s[1]=2e4:s[1]<-2e4&&(s[1]=-2e4),s[2]>2e4?s[2]=2e4:s[2]<-2e4&&(s[2]=-2e4),v===d?u.push([v,f(c*s[1])," ",f(c*s[2])].join("")):(n=2*a,u.push([v,f(c*(o+(s[1]-o)*.333+h*(n*Math.random()-a)))," ",f(c*(l+(s[2]-l)*.333+h*(n*Math.random()-a)))," ",f(c*(o+(s[1]-o)*.666+h*(n*Math.random()-a)))," ",f(c*(l+(s[2]-l)*.666+h*(n*Math.random()-a)))," ",f(c*s[1])," ",f(c*s[2])].join(""))),v=p,o=s[1],l=s[2]);return u.push(" e"),u},updatePolygonPrim:function(t,r){var a,n=r.vertices.length,s=this.resolution,o,l=[];if(this._setAttr(t,"stroked","false"),o=r.vertices[0].coords.scrCoords,!isNaN(o[1]+o[2])){for(l.push(["m ",Math.floor(s*o[1]),",",Math.floor(s*o[2])," l "].join("")),a=1;a<n-1;a++){if(r.vertices[a].isReal){if(o=r.vertices[a].coords.scrCoords,isNaN(o[1]+o[2]))return;l.push(Math.floor(s*o[1])+","+Math.floor(s*o[2]))}else{this.updatePathPrim(t,"",r.board);return}a<n-2&&l.push(", ")}l.push(" x e"),this.updatePathPrim(t,l,r.board)}},updateRectPrim:function(t,r,a,n,s){t.style.left=Math.floor(r)+"px",t.style.top=Math.floor(a)+"px",n>=0&&(t.style.width=n+"px"),s>=0&&(t.style.height=s+"px")},setPropertyPrim:function(t,r,a){var n="",s;switch(r){case"stroke":n="strokecolor";break;case"stroke-width":n="strokeweight";break;case"stroke-dasharray":n="dashstyle";break}n!==""&&(s=a,this._setAttr(t,n,s))},display:function(t,r){t&&t.rendNode&&(t.visPropOld.visible=r,r?t.rendNode.style.visibility="inherit":t.rendNode.style.visibility="hidden")},show:function(t){JXG$1.deprecated("Board.renderer.show()","Board.renderer.display()"),t&&t.rendNode&&(t.rendNode.style.visibility="inherit")},hide:function(t){JXG$1.deprecated("Board.renderer.hide()","Board.renderer.display()"),t&&t.rendNode&&(t.rendNode.style.visibility="hidden")},setDashStyle:function(t,r){var a;r.dash>=0&&(a=t.rendNodeStroke,this._setAttr(a,"dashstyle",this.dashArray[r.dash]))},setGradient:function(t){var r=t.rendNodeFill,a=t.evalVisProp("gradient");a==="linear"?(this._setAttr(r,"type","gradient"),this._setAttr(r,"color2",t.evalVisProp("gradientsecondcolor")),this._setAttr(r,"opacity2",t.evalVisProp("gradientsecondopacity")),this._setAttr(r,"angle",t.evalVisProp("gradientangle"))):a==="radial"?(this._setAttr(r,"type","gradientradial"),this._setAttr(r,"color2",t.evalVisProp("gradientsecondcolor")),this._setAttr(r,"opacity2",t.evalVisProp("gradientsecondopacity")),this._setAttr(r,"focusposition",t.evalVisProp("gradientpositionx")*100+"%,"+t.evalVisProp("gradientpositiony")*100+"%"),this._setAttr(r,"focussize","0,0")):this._setAttr(r,"type","solid")},setObjectFillColor:function(t,r,a){var n=r,s,o,l=a,u,h=t.rendNode;l=l>0?l:0,!(t.visPropOld.fillcolor===n&&t.visPropOld.fillopacity===l)&&(JXG$1.exists(n)&&n!==!1&&(n.length!==9?(s=n,u=l):(o=JXG$1.rgba2rgbo(n),s=o[0],u=l*o[1]),s==="none"||s===!1?this._setAttr(t.rendNode,"filled","false"):(this._setAttr(t.rendNode,"filled","true"),this._setAttr(t.rendNode,"fillcolor",s),JXG$1.exists(u)&&t.rendNodeFill&&this._setAttr(t.rendNodeFill,"opacity",u*100+"%")),t.type===Const.OBJECT_TYPE_IMAGE&&h.filters.length>1&&(h.filters.item(1).opacity=Math.round(u*100),h.filters.item(1).enabled=!0)),t.visPropOld.fillcolor=n,t.visPropOld.fillopacity=l)},setObjectStrokeColor:function(t,r,a){var n=r,s,o,l=a,u,h=t.rendNode,c;l=l>0?l:0,!(t.visPropOld.strokecolor===n&&t.visPropOld.strokeopacity===l)&&(JXG$1.exists(n)&&n!==!1&&(n.length!==9?(s=n,u=l):(o=r.rgba2rgbo(n),s=o[0],u=l*o[1]),t.elementClass===Const.OBJECT_CLASS_TEXT?(h.filters.length>1&&(h.filters.item(1).opacity=Math.round(u*100),h.filters.item(1).enabled=!0),h.style.color=s):(s!==!1&&(this._setAttr(h,"stroked","true"),this._setAttr(h,"strokecolor",s)),c=t.rendNodeStroke,JXG$1.exists(u)&&t.type!==Const.OBJECT_TYPE_IMAGE&&this._setAttr(c,"opacity",u*100+"%"))),t.visPropOld.strokecolor=n,t.visPropOld.strokeopacity=l)},setObjectStrokeWidth:function(t,r){var a=JXG$1.evaluate(r),n;isNaN(a)||t.visPropOld.strokewidth===a||(n=t.rendNode,this.setPropertyPrim(n,"stroked","true"),JXG$1.exists(a)&&(this.setPropertyPrim(n,"stroke-width",a),a===0&&JXG$1.exists(t.rendNodeStroke)&&this._setAttr(n,"stroked","false")),t.visPropOld.strokewidth=a)},setShadow:function(t){var r=t.rendNodeShadow,a=t.evalVisProp("shadow");!r||t.visPropOld.shadow===a||(a?(this._setAttr(r,"On","True"),this._setAttr(r,"Offset","3pt,3pt"),this._setAttr(r,"Opacity","60%"),this._setAttr(r,"Color","#aaaaaa")):this._setAttr(r,"On","False"),t.visPropOld.shadow=a)},suspendRedraw:function(){this.container.style.display="none"},unsuspendRedraw:function(){this.container.style.display=""}});const VMLRenderer=JXG$1.VMLRenderer;var uuidCharsStr="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",uuidChars=uuidCharsStr.split("");JXG$1.Util=JXG$1.Util||{};JXG$1.Util.genUUID=function(t){var r,a,n=[],s=0;for(t=t||"",t!==""&&t.slice(t.length-1)!=="-"&&(t=t+"-"),a=0;a<36;a++)a===8||a===13||a===18||a===23?n[a]="-":a===14?n[a]="4":(s<=2&&(s=33554432+Math.random()*16777216|0),r=s&15,s=s>>4,n[a]=uuidChars[a===19?r&3|8:r]);return t+n.join("")};const UUID=JXG$1.Util;JXG$1.CanvasRenderer=function(t,r){if(this.type="canvas",this.canvasRoot=null,this.suspendHandle=null,this.canvasId=UUID.genUUID(),this.canvasNamespace=null,JXG$1.isBrowser)this.container=t,this.container.style.MozUserSelect="none",this.container.style.userSelect="none",this.container.style.overflow="hidden",this.container.style.position===""&&(this.container.style.position="relative"),this.container.innerHTML=['<canvas id="',this.canvasId,'" width="',r.width,'px" height="',r.height,'px"></canvas>'].join(""),this.canvasRoot=this.container.ownerDocument.getElementById(this.canvasId),this.canvasRoot.style.display="block",this.context=this.canvasRoot.getContext("2d");else if(JXG$1.isNode())try{this.canvasRoot=JXG$1.createCanvas(500,500),this.context=this.canvasRoot.getContext("2d")}catch{throw new Error(`JXG.createCanvas not available.
Install the npm package \`canvas\`
and call:
    import { createCanvas } from "canvas.js"
    JXG.createCanvas = createCanvas;
`)}};JXG$1.CanvasRenderer.prototype=new AbstractRenderer;JXG$1.extend(JXG$1.CanvasRenderer.prototype,{_drawPolygon:function(t,r,a){var n,s=t.length,o=this.context;if(s>0){if(a&&(o.lineWidth=0),o.beginPath(),o.moveTo(t[0][0],t[0][1]),r===1)for(n=1;n<s;n++)o.lineTo(t[n][0],t[n][1]);else for(n=1;n<s;n+=3)o.bezierCurveTo(t[n][0],t[n][1],t[n+1][0],t[n+1][1],t[n+2][0],t[n+2][1]);a?(o.lineTo(t[0][0],t[0][1]),o.closePath(),o.fill("evenodd")):o.stroke()}},_fill:function(t){var r=this.context;r.save(),this._setColor(t,"fill")&&r.fill("evenodd"),r.restore()},_rotatePoint:function(t,r,a){return[r*Math.cos(t)-a*Math.sin(t),r*Math.sin(t)+a*Math.cos(t)]},_rotateShape:function(t,r){var a,n=[],s=t.length;if(s<=0)return t;for(a=0;a<s;a++)n.push(this._rotatePoint(r,t[a][0],t[a][1]));return n},updateGradientAngle:function(t,r){var a=1,n=Math.cos(-r),s=Math.sin(-r),o=t.getBoundingBox(),l,u,h,c,f,d,p,v,y,b,_,N;return Math.abs(n)>Math.abs(s)?a/=Math.abs(n):a/=Math.abs(s),n>=0?(h=0,c=n*a):(h=-n*a,c=0),s>=0?(f=0,d=s*a):(f=-s*a,d=0),l=new Coords(Const.COORDS_BY_USER,[o[0],o[1]],t.board),u=new Coords(Const.COORDS_BY_USER,[o[2],o[3]],t.board),_=u.scrCoords[1]-l.scrCoords[1],N=u.scrCoords[2]-l.scrCoords[2],p=l.scrCoords[1]+_*h,y=l.scrCoords[2]+N*f,v=l.scrCoords[1]+_*c,b=l.scrCoords[2]+N*d,this.context.createLinearGradient(p,y,v,b)},updateGradientCircle:function(t,r,a,n,s,o,l){var u=t.getBoundingBox(),h,c,f,d,p,v,y,b,_,N;return h=new Coords(Const.COORDS_BY_USER,[u[0],u[1]],t.board),c=new Coords(Const.COORDS_BY_USER,[u[2],u[3]],t.board),_=c.scrCoords[1]-h.scrCoords[1],N=h.scrCoords[2]-c.scrCoords[2],f=h.scrCoords[1]+_*r,d=c.scrCoords[2]+N*a,v=h.scrCoords[1]+_*s,y=c.scrCoords[2]+N*o,p=n*(_+N)*.5,b=l*(_+N)*.5,this.context.createRadialGradient(v,y,b,f,d,p)},updateGradient:function(t){var r,a=t.evalVisProp("gradient"),n;return r=t.evalVisProp("fillcolor"),a==="linear"?n=this.updateGradientAngle(t,t.evalVisProp("gradientangle")):a==="radial"&&(n=this.updateGradientCircle(t,t.evalVisProp("gradientcx"),t.evalVisProp("gradientcy"),t.evalVisProp("gradientr"),t.evalVisProp("gradientfx"),t.evalVisProp("gradientfy"),t.evalVisProp("gradientfr"))),r!=="none"&&r!==""&&r!==!1&&(n.addColorStop(t.evalVisProp("gradientstartoffset"),r),n.addColorStop(t.evalVisProp("gradientendoffset"),t.evalVisProp("gradientsecondcolor"))),n},_setColor:function(t,r,a){var n=!0,s,o,l,u,h,c,f,d,p;return r=r||"stroke",a=a||r,o=this._getHighlighted(t),u=t.evalVisProp(o+r+"color"),u!=="none"&&u!==""&&u!==!1?(f=t.evalVisProp(o+r+"opacity"),f=f>0?f:0,u.length!==9?(c=u,d=f):(h=JXG$1.rgba2rgbo(u),c=h[0],d=f*h[1]),this.context.globalAlpha=d,this.context[a+"Style"]=c):n=!1,r!=="stroke"&&(p=t.evalVisProp("gradient"),p==="linear"||p==="radial")?(this.context.globalAlpha=d,this.context[a+"Style"]=this.updateGradient(t),n):(l=parseFloat(t.evalVisProp(o+"strokewidth")),r==="stroke"&&!isNaN(l)&&(l===0?this.context.globalAlpha=0:this.context.lineWidth=l),s=t.evalVisProp("linecap"),r==="stroke"&&s!==void 0&&s!==""&&(this.context.lineCap=s),n)},_stroke:function(t){var r=this.context,a=t.evalVisProp("dash"),n=t.evalVisProp("dashscale"),s=n?.5*t.evalVisProp("strokewidth"):1;r.save(),a>0?r.setLineDash&&r.setLineDash(this.dashArray[a-1].map(function(o){return o*s})):this.context.lineDashArray=[],this._setColor(t,"stroke")&&r.stroke(),r.restore()},_translateShape:function(t,r,a){var n,s=[],o=t.length;if(o<=0)return t;for(n=0;n<o;n++)s.push([t[n][0]+r,t[n][1]+a]);return s},drawPoint:function(t){var r=t.evalVisProp("face"),a=t.evalVisProp("size"),n=t.coords.scrCoords,s=a*Math.sqrt(3)*.5,o=a*.5,l=parseFloat(t.evalVisProp("strokewidth"))/2,u=this.context;if(t.visPropCalc.visible)switch(r){case"cross":case"x":u.beginPath(),u.moveTo(n[1]-a,n[2]-a),u.lineTo(n[1]+a,n[2]+a),u.moveTo(n[1]+a,n[2]-a),u.lineTo(n[1]-a,n[2]+a),u.lineCap="round",u.lineJoin="round",u.closePath(),this._stroke(t);break;case"circle":case"o":u.beginPath(),u.arc(n[1],n[2],a+1+l,0,2*Math.PI,!1),u.closePath(),this._fill(t),this._stroke(t);break;case"square":case"[]":if(a<=0)break;u.save(),this._setColor(t,"stroke","fill")&&u.fillRect(n[1]-a-l,n[2]-a-l,a*2+3*l,a*2+3*l),u.restore(),u.save(),this._setColor(t,"fill"),u.fillRect(n[1]-a+l,n[2]-a+l,a*2-l,a*2-l),u.restore();break;case"plus":case"+":u.beginPath(),u.moveTo(n[1]-a,n[2]),u.lineTo(n[1]+a,n[2]),u.moveTo(n[1],n[2]-a),u.lineTo(n[1],n[2]+a),u.lineCap="round",u.lineJoin="round",u.closePath(),this._stroke(t);break;case"divide":case"|":u.beginPath(),u.moveTo(n[1],n[2]-a),u.lineTo(n[1],n[2]+a),u.lineCap="round",u.lineJoin="round",u.closePath(),this._stroke(t);break;case"minus":case"-":u.beginPath(),u.moveTo(n[1]-a,n[2]),u.lineTo(n[1]+a,n[2]),u.lineCap="round",u.lineJoin="round",u.closePath(),this._stroke(t);break;case"diamond2":case"<<>>":a*=1.41;case"diamond":case"<>":u.beginPath(),u.moveTo(n[1]-a,n[2]),u.lineTo(n[1],n[2]+a),u.lineTo(n[1]+a,n[2]),u.lineTo(n[1],n[2]-a),u.closePath(),this._fill(t),this._stroke(t);break;case"triangleup":case"A":case"a":case"^":u.beginPath(),u.moveTo(n[1],n[2]-a),u.lineTo(n[1]-s,n[2]+o),u.lineTo(n[1]+s,n[2]+o),u.closePath(),this._fill(t),this._stroke(t);break;case"triangledown":case"v":u.beginPath(),u.moveTo(n[1],n[2]+a),u.lineTo(n[1]-s,n[2]-o),u.lineTo(n[1]+s,n[2]-o),u.closePath(),this._fill(t),this._stroke(t);break;case"triangleleft":case"<":u.beginPath(),u.moveTo(n[1]-a,n[2]),u.lineTo(n[1]+o,n[2]-s),u.lineTo(n[1]+o,n[2]+s),u.closePath(),this._fill(t),this._stroke(t);break;case"triangleright":case">":u.beginPath(),u.moveTo(n[1]+a,n[2]),u.lineTo(n[1]-o,n[2]-s),u.lineTo(n[1]-o,n[2]+s),u.closePath(),this._fill(t),this._stroke(t);break}},updatePoint:function(t){this.drawPoint(t)},drawArrows:function(t,r,a,n,s){var o,l,u,h,c,f,d,p,v=this.context,y=6,b=1,_,N,M=1,C=1,$,w,A,X,O,G,R,B,F,U,q=s.evFirst,ee=s.evLast;if(t.evalVisProp("strokecolor")!=="none"&&(q||ee)){if(t.elementClass===Const.OBJECT_CLASS_LINE)o=r.scrCoords[1],l=r.scrCoords[2],u=a.scrCoords[1],h=a.scrCoords[2],F=U=Math.atan2(h-l,u-o);else{if(o=t.points[0].scrCoords[1],l=t.points[0].scrCoords[2],B=t.points.length-1,B<1)return;u=t.points[t.points.length-1].scrCoords[1],h=t.points[t.points.length-1].scrCoords[2],X=t.points[1].scrCoords[1]-t.points[0].scrCoords[1],O=t.points[1].scrCoords[2]-t.points[0].scrCoords[2],G=t.points[B].scrCoords[1]-t.points[B-1].scrCoords[1],R=t.points[B].scrCoords[2]-t.points[B-1].scrCoords[2],q&&(F=Math.atan2(O,X)),ee&&(U=Math.atan2(R,G))}if(f=t.evalVisProp(n+"strokewidth"),q)if(y=s.sizeFirst,c=f*y,b=s.typeFirst,_=b,b===2)p=[[c,-c*.5],[0,0],[c,c*.5],[c*.5,0]];else if(b===3)p=[[c/3,-c*.5],[0,-c*.5],[0,c*.5],[c/3,c*.5]];else if(b===4)for(c/=10,M=3,p=[[10,3.31],[6.47,3.84],[2.87,4.5],[0,6.63],[.67,5.52],[1.33,4.42],[2,3.31],[1.33,2.21],[.67,1.1],[0,0],[2.87,2.13],[6.47,2.79],[10,3.31]],A=p.length,w=0;w<A;w++)p[w][0]*=-c,p[w][1]*=c,p[w][0]+=10*c,p[w][1]-=3.31*c;else if(b===5)for(c/=10,M=3,p=[[10,3.28],[6.61,4.19],[3.19,5.07],[0,6.55],[.62,5.56],[1,4.44],[1,3.28],[1,2.11],[.62,.99],[0,0],[3.19,1.49],[6.61,2.37],[10,3.28]],A=p.length,w=0;w<A;w++)p[w][0]*=-c,p[w][1]*=c,p[w][0]+=10*c,p[w][1]-=3.28*c;else if(b===6)for(c/=10,M=3,p=[[10,2.84],[6.61,3.59],[3.21,4.35],[0,5.68],[.33,4.73],[.67,3.78],[1,2.84],[.67,1.89],[.33,.95],[0,0],[3.21,1.33],[6.61,2.09],[10,2.84]],A=p.length,w=0;w<A;w++)p[w][0]*=-c,p[w][1]*=c,p[w][0]+=10*c,p[w][1]-=2.84*c;else if(b===7)for(c=f,M=3,p=[[0,10.39],[2.01,6.92],[5.96,5.2],[10,5.2],[5.96,5.2],[2.01,3.47],[0,0]],A=p.length,w=0;w<A;w++)p[w][0]*=-c,p[w][1]*=c,p[w][0]+=10*c,p[w][1]-=5.2*c;else p=[[c,-c*.5],[0,0],[c,c*.5]];if(ee)if(y=s.sizeLast,c=f*y,b=s.typeLast,N=b,b===2)d=[[-c,-c*.5],[0,0],[-c,c*.5],[-c*.5,0]];else if(b===3)d=[[-c/3,-c*.5],[0,-c*.5],[0,c*.5],[-c/3,c*.5]];else if(b===4)for(c/=10,C=3,d=[[10,3.31],[6.47,3.84],[2.87,4.5],[0,6.63],[.67,5.52],[1.33,4.42],[2,3.31],[1.33,2.21],[.67,1.1],[0,0],[2.87,2.13],[6.47,2.79],[10,3.31]],A=d.length,w=0;w<A;w++)d[w][0]*=c,d[w][1]*=c,d[w][0]-=10*c,d[w][1]-=3.31*c;else if(b===5)for(c/=10,C=3,d=[[10,3.28],[6.61,4.19],[3.19,5.07],[0,6.55],[.62,5.56],[1,4.44],[1,3.28],[1,2.11],[.62,.99],[0,0],[3.19,1.49],[6.61,2.37],[10,3.28]],A=d.length,w=0;w<A;w++)d[w][0]*=c,d[w][1]*=c,d[w][0]-=10*c,d[w][1]-=3.28*c;else if(b===6)for(c/=10,C=3,d=[[10,2.84],[6.61,3.59],[3.21,4.35],[0,5.68],[.33,4.73],[.67,3.78],[1,2.84],[.67,1.89],[.33,.95],[0,0],[3.21,1.33],[6.61,2.09],[10,2.84]],A=d.length,w=0;w<A;w++)d[w][0]*=c,d[w][1]*=c,d[w][0]-=10*c,d[w][1]-=2.84*c;else if(b===7)for(c=f,C=3,d=[[0,10.39],[2.01,6.92],[5.96,5.2],[10,5.2],[5.96,5.2],[2.01,3.47],[0,0]],A=d.length,w=0;w<A;w++)d[w][0]*=c,d[w][1]*=c,d[w][0]-=10*c,d[w][1]-=5.2*c;else d=[[-c,-c*.5],[0,0],[-c,c*.5]];v.save(),this._setColor(t,"stroke","fill")&&(this._setColor(t,"stroke"),q&&(_===7?$=!1:$=!0,this._drawPolygon(this._translateShape(this._rotateShape(p,F),o,l),M,$)),ee&&(N===7?$=!1:$=!0,this._drawPolygon(this._translateShape(this._rotateShape(d,U),u,h),C,$))),v.restore()}},drawLine:function(t){var r,a,n=new Coords(Const.COORDS_BY_USER,t.point1.coords.usrCoords,t.board),s=new Coords(Const.COORDS_BY_USER,t.point2.coords.usrCoords,t.board),o=null,l,u,h;t.visPropCalc.visible&&(l=this._getHighlighted(t),u=t.evalVisProp(l+"strokewidth"),h=this.getArrowHeadData(t,u,l),(h.evFirst||h.evLast)&&(o=-4),Geometry.calcStraight(t,n,s,o),this.handleTouchpoints(t,n,s,h),r=new Coords(Const.COORDS_BY_USER,n.usrCoords,t.board),a=new Coords(Const.COORDS_BY_USER,s.usrCoords,t.board),this.getPositionArrowHead(t,n,s,h),this.context.beginPath(),this.context.moveTo(n.scrCoords[1],n.scrCoords[2]),this.context.lineTo(s.scrCoords[1],s.scrCoords[2]),this._stroke(t),(h.evFirst||h.evLast)&&this.drawArrows(t,r,a,l,h))},updateLine:function(t){this.drawLine(t)},drawTicks:function(){},updateTicks:function(t){var r,a,n,s,o=t.ticks.length,l,u,h=this.context;for(h.beginPath(),r=0;r<o;r++)for(a=t.ticks[r],n=a[0],s=a[1],l=n.length,h.moveTo(n[0],s[0]),u=1;u<l;++u)h.lineTo(n[u],s[u]);h.lineCap="round",this._stroke(t)},drawCurve:function(t){var r,a,n;t.evalVisProp("handdrawing")?this.updatePathStringBezierPrim(t):this.updatePathStringPrim(t),t.numberPoints>1&&(r=this._getHighlighted(t),a=t.evalVisProp(r+"strokewidth"),n=this.getArrowHeadData(t,a,r),(n.evFirst||n.evLast)&&this.drawArrows(t,null,null,r,n))},updateCurve:function(t){this.drawCurve(t)},drawEllipse:function(t){var r=t.center.coords.scrCoords[1],a=t.center.coords.scrCoords[2],n=t.board.unitX,s=t.board.unitY,o=2*t.Radius(),l=2*t.Radius(),u=o*n,h=l*s,c=r-u/2,f=a-h/2,d=u/2*.5522848,p=h/2*.5522848,v=c+u,y=f+h,b=c+u/2,_=f+h/2,N=this.context;o>0&&l>0&&!isNaN(r+a)&&(N.beginPath(),N.moveTo(c,_),N.bezierCurveTo(c,_-p,b-d,f,b,f),N.bezierCurveTo(b+d,f,v,_-p,v,_),N.bezierCurveTo(v,_+p,b+d,y,b,y),N.bezierCurveTo(b-d,y,c,_+p,c,_),N.closePath(),this._fill(t),this._stroke(t))},updateEllipse:function(t){return this.drawEllipse(t)},displayCopyright:function(t,r){var a=this.context,n=4+1.8*r,s=6+r,o=.2;a.save(),a.font=r+"px Arial",a.globalAlpha=o,a.lineWidth=.5,a.fillText(t+".",n,s),a.restore()},displayLogo:function(t,r,a){var n=this.context,s=1.5*r,o=.2;JXG$1.exists(a._logo_image)||(a._logo_image=new Image,a._logo_image.src=t),a._logo_image.onload=function(){n.save(),n.globalAlpha=o,n.drawImage(a._logo_image,5,5,s,s),n.restore()},n.save(),n.globalAlpha=o,n.drawImage(a._logo_image,5,5,s,s),n.restore()},drawInternalText:function(t){var r=t.evalVisProp("fontsize"),a=t.evalVisProp("fontunit"),n=t.getAnchorX(),s=t.getAnchorY(),o=this.context;return o.save(),this._setColor(t,"stroke","fill")&&!isNaN(t.coords.scrCoords[1]+t.coords.scrCoords[2])&&(o.font=(r>0?r:0)+a+" Arial",this.transformRect(t,t.transformations),n==="left"?o.textAlign="left":n==="right"?o.textAlign="right":n==="middle"&&(o.textAlign="center"),s==="bottom"?o.textBaseline="bottom":s==="top"?o.textBaseline="top":s==="middle"&&(o.textBaseline="middle"),o.fillText(t.plaintext,t.coords.scrCoords[1],t.coords.scrCoords[2])),o.restore(),null},updateInternalText:function(t){this.drawInternalText(t)},setObjectStrokeColor:function(t,r,a){var n=r,s,o,l=a,u,h;l=l>0?l:0,!(t.visPropOld.strokecolor===n&&t.visPropOld.strokeopacity===l)&&(JXG$1.exists(n)&&n!==!1&&(n.length!==9?(s=n,u=l):(o=JXG$1.rgba2rgbo(n),s=o[0],u=l*o[1]),h=t.rendNode,t.elementClass===Const.OBJECT_CLASS_TEXT&&t.evalVisProp("display")==="html"&&(h.style.color=s,h.style.opacity=u)),t.visPropOld.strokecolor=n,t.visPropOld.strokeopacity=l)},drawImage:function(t){t.rendNode=new Image,t._src="",this.updateImage(t)},updateImage:function(t){var r=this.context,a=t.evalVisProp("fillopacity"),n=JXG$1.bind(function(){t.imgIsLoaded=!0,!(t.size[0]<=0||t.size[1]<=0)&&(r.save(),r.globalAlpha=a,this.transformRect(t,t.transformations),r.drawImage(t.rendNode,t.coords.scrCoords[1],t.coords.scrCoords[2]-t.size[1],t.size[0],t.size[1]),r.restore())},this);this.updateImageURL(t)?t.rendNode.onload=n:t.imgIsLoaded&&n()},transformRect:function(t,r){var a,n,s,o,l,u=r.length,h=this.context;if(u>0)if(a=this.joinTransforms(t,r),t.elementClass===Const.OBJECT_CLASS_TEXT&&t.visProp.display==="html"){if(n=" matrix("+[a[1][1],a[2][1],a[1][2],a[2][2],a[1][0],a[2][0]].join(",")+") ",n.indexOf("NaN")===-1){switch(l=t.rendNode,l.style.transform=n,s=-t.coords.scrCoords[1],o=-t.coords.scrCoords[2],t.evalVisProp("anchorx")){case"right":s+=t.size[0];break;case"middle":s+=t.size[0]*.5;break}switch(t.evalVisProp("anchory")){case"bottom":o+=t.size[1];break;case"middle":o+=t.size[1]*.5;break}l.style["transform-origin"]=s+"px "+o+"px"}}else Math.abs(Numerics.det(a))>=Mat.eps&&h.transform(a[1][1],a[2][1],a[1][2],a[2][2],a[1][0],a[2][0])},updateImageURL:function(t){var r;return r=t.eval(t.url),t._src!==r?(t.imgIsLoaded=!1,t.rendNode.src=r,t._src=r,!0):!1},remove:function(t){JXG$1.exists(t)&&JXG$1.exists(t.parentNode)&&t.parentNode.removeChild(t)},updatePathStringPrim:function(t){var r,a,n,s,o,l="M",u="L",h="C",c=l,f=5e3,d=this.context;if(!(t.numberPoints<=0)){if(o=Math.min(t.points.length,t.numberPoints),d.beginPath(),t.bezierDegree===1)for(r=0;r<o;r++)a=t.points[r].scrCoords,isNaN(a[1])||isNaN(a[2])?c=l:(a[1]>f?a[1]=f:a[1]<-f&&(a[1]=-f),a[2]>f?a[2]=f:a[2]<-f&&(a[2]=-f),c===l?d.moveTo(a[1],a[2]):d.lineTo(a[1],a[2]),c=u);else if(t.bezierDegree===3)for(r=0;r<o;)a=t.points[r].scrCoords,isNaN(a[1])||isNaN(a[2])?c=l:(c===l?d.moveTo(a[1],a[2]):(r+=1,n=t.points[r].scrCoords,r+=1,s=t.points[r].scrCoords,d.bezierCurveTo(a[1],a[2],n[1],n[2],s[1],s[2])),c=h),r+=1;d.lineCap="round",d.lineJoin="round",this._fill(t),this._stroke(t)}},updatePathStringBezierPrim:function(t){var r,a,n,s,o,l,u,h="M",c="C",f=h,d=5e3,p=t.evalVisProp("strokewidth"),v=t.evalVisProp("curvetype")!=="plot",y=this.context;if(!(t.numberPoints<=0)){for(v&&t.board.options.curve.RDPsmoothing&&(t.points=Numerics.RamerDouglasPeucker(t.points,.5)),u=Math.min(t.points.length,t.numberPoints),y.beginPath(),a=1;a<3;a++)for(f=h,r=0;r<u;r++)s=t.points[r].scrCoords,isNaN(s[1])||isNaN(s[2])?f=h:(s[1]>d?s[1]=d:s[1]<-d&&(s[1]=-d),s[2]>d?s[2]=d:s[2]<-d&&(s[2]=-d),f===h?y.moveTo(s[1],s[2]):(n=2*a,y.bezierCurveTo(o+(s[1]-o)*.333+p*(n*Math.random()-a),l+(s[2]-l)*.333+p*(n*Math.random()-a),o+(s[1]-o)*.666+p*(n*Math.random()-a),l+(s[2]-l)*.666+p*(n*Math.random()-a),s[1],s[2])),f=c,o=s[1],l=s[2]);y.lineCap="round",y.lineJoin="round",this._fill(t),this._stroke(t)}},updatePolygonPrim:function(t,r){var a,n,s,o=r.vertices.length,l=this.context,u=!0;if(!(o<=0||!r.visPropCalc.visible)){for(r.elType==="polygonalchain"&&o++,l.beginPath(),n=0;!r.vertices[n].isReal&&n<o-1;)n++,u=!1;for(a=r.vertices[n].coords.scrCoords,l.moveTo(a[1],a[2]),s=n;s<o-1;s++)r.vertices[s].isReal||(u=!1),a=r.vertices[s].coords.scrCoords,l.lineTo(a[1],a[2]);l.closePath(),u&&this._fill(r)}},display:function(t,r){t&&t.rendNode&&(t.visPropOld.visible=r,r?t.rendNode.style.visibility="inherit":t.rendNode.style.visibility="hidden")},show:function(t){JXG$1.deprecated("Board.renderer.show()","Board.renderer.display()"),JXG$1.exists(t.rendNode)&&(t.rendNode.style.visibility="inherit")},hide:function(t){JXG$1.deprecated("Board.renderer.hide()","Board.renderer.display()"),JXG$1.exists(t.rendNode)&&(t.rendNode.style.visibility="hidden")},setGradient:function(t){},setShadow:function(t){t.visPropOld.shadow!==t.visProp.shadow&&(t.visPropOld.shadow=t.visProp.shadow)},highlight:function(t){return t.elementClass===Const.OBJECT_CLASS_TEXT&&t.evalVisProp("display")==="html"?this.updateTextStyle(t,!0):(t.board.prepareUpdate(),t.board.renderer.suspendRedraw(t.board),t.board.updateRenderer(),t.board.renderer.unsuspendRedraw()),this},noHighlight:function(t){return t.elementClass===Const.OBJECT_CLASS_TEXT&&t.evalVisProp("display")==="html"?this.updateTextStyle(t,!1):(t.board.prepareUpdate(),t.board.renderer.suspendRedraw(t.board),t.board.updateRenderer(),t.board.renderer.unsuspendRedraw()),this},suspendRedraw:function(t){this.context.save(),this.context.clearRect(0,0,this.canvasRoot.width,this.canvasRoot.height),t&&(t.attr.showcopyright||t.attr.showlogo)&&this.displayLogo(JXG$1.licenseLogo,12,t),t&&t.attr.showcopyright&&this.displayCopyright(JXG$1.licenseText,12)},unsuspendRedraw:function(){this.context.restore()},resize:function(t,r){this.container?(this.canvasRoot.style.width=parseFloat(t)+"px",this.canvasRoot.style.height=parseFloat(r)+"px",this.canvasRoot.setAttribute("width",2*parseFloat(t)+"px"),this.canvasRoot.setAttribute("height",2*parseFloat(r)+"px")):(this.canvasRoot.width=2*parseFloat(t),this.canvasRoot.height=2*parseFloat(r)),this.context=this.canvasRoot.getContext("2d"),this.context.scale(2,2)},removeToInsertLater:function(){return function(){}}});const CanvasRenderer=JXG$1.CanvasRenderer;JXG$1.NoRenderer=function(){this.enhancedRendering=!1,this.type="no"};JXG$1.extend(JXG$1.NoRenderer.prototype,{drawPoint:function(t){},updatePoint:function(t){},changePointStyle:function(t){},drawLine:function(t){},updateLine:function(t){},drawTicks:function(t){},updateTicks:function(t){},drawCurve:function(t){},updateCurve:function(t){},drawEllipse:function(t){},updateEllipse:function(t){},drawPolygon:function(t){},updatePolygon:function(t){},displayCopyright:function(t,r){},drawInternalText:function(t){},updateInternalText:function(t){},drawText:function(t){},updateText:function(t){},updateTextStyle:function(t,r){},updateInternalTextStyle:function(t,r,a){},drawImage:function(t){},updateImage:function(t){},updateImageURL:function(t){},appendChildPrim:function(t,r){},appendNodesToElement:function(t,r){},remove:function(t){},makeArrows:function(t){},updateEllipsePrim:function(t,r,a,n,s){},updateLinePrim:function(t,r,a,n,s,o){},updatePathPrim:function(t,r,a){},updatePathStringPoint:function(t,r,a){},updatePathStringPrim:function(t){},updatePathStringBezierPrim:function(t){},updatePolygonPrim:function(t,r){},updateRectPrim:function(t,r,a,n,s){},setPropertyPrim:function(t,r,a){},show:function(t){},hide:function(t){},setBuffering:function(t,r){},setDashStyle:function(t){},setDraft:function(t){},removeDraft:function(t){},setGradient:function(t){},updateGradient:function(t){},setObjectTransition:function(t,r){},setObjectFillColor:function(t,r,a){},setObjectStrokeColor:function(t,r,a){},setObjectStrokeWidth:function(t,r){},setShadow:function(t){},highlight:function(t){},noHighlight:function(t){},suspendRedraw:function(){},unsuspendRedraw:function(){},drawNavigationBar:function(t){},getElementById:function(t){return null},resize:function(t,r){},removeToInsertLater:function(){return function(){}}});JXG$1.NoRenderer.prototype=new AbstractRenderer;const NoRenderer=JXG$1.NoRenderer;JXG$1.JSXGraph={rendererType:(function(){return Options$1.board.renderer="no",JXG$1.supportsVML()&&(Options$1.board.renderer="vml",document.onmousemove=function(){var t;return document.body&&(t=document.body.scrollLeft,t+=document.body.scrollTop),t}),JXG$1.supportsCanvas()&&(Options$1.board.renderer="canvas"),JXG$1.supportsSVG()&&(Options$1.board.renderer="svg"),JXG$1.isNode()&&JXG$1.supportsCanvas()&&(Options$1.board.renderer="canvas"),(JXG$1.isNode()||Options$1.renderer==="no")&&(Options$1.text.display="internal",Options$1.infobox.display="internal"),Options$1.board.renderer})(),initRenderer:function(t,r,a,n){var s,o;if((!JXG$1.exists(a)||a===!1)&&typeof document=="object"&&(a=document),typeof a=="object"&&t!==null)for(s=JXG$1.isString(t)?a.getElementById(t):t;s.firstChild;)s.removeChild(s.firstChild);else s=t;return(n===void 0||n==="auto")&&(n=this.rendererType),n==="svg"?o=new SVGRenderer(s,r):n==="vml"?o=new VMLRenderer(s):n==="canvas"?o=new CanvasRenderer(s,r):o=new NoRenderer,o},_setAttributes:function(t,r){var a=JXG$1.copyAttributes(t,r,"board"),n=["drag","fullscreen","intl","keyboard","logging","pan","resize","screenshot","selection","zoom"],s=n.length,o,l;for(o=0;o<s;o++)l=n[o],a[l]=JXG$1.copyAttributes(a,r,"board",l);return a.navbar=JXG$1.copyAttributes(a.navbar,r,"navbar"),a.movetarget=t.moveTarget||t.movetarget||r.board.moveTarget,a},_fillBoard:function(t,r,a){t.initInfobox(r.infobox),t.maxboundingbox=r.maxboundingbox,t.resizeContainer(a.width,a.height,!0,!0),t._createSelectionPolygon(r),t.renderer.drawNavigationBar(t,r.navbar),JXG$1.boards[t.id]=t},_setARIA:function(t,r){var a=r.document,n;if(typeof a!="object"){if(!JXG$1.isBrowser)return;a=document}n=JXG$1.isString(t)?a.getElementById(t):t,n.setAttribute("role","region"),n.setAttribute("aria-label",r.title)},_removeARIANodes:function(t){var r,a,n;n=t.document||document,typeof n=="object"&&(a=t.containerObj.getAttribute("aria-labelledby"),r=n.getElementById(a),r&&r.parentNode&&r.parentNode.removeChild(r),a=t.containerObj.getAttribute("aria-describedby"),r=n.getElementById(a),r&&r.parentNode&&r.parentNode.removeChild(r))},initBoard:function(t,r){var a,n,s,o,l,u,h=0,c=0,f,d,p,v,y,b,_,N,M={},C;return r=r||{},r.theme!=="default"&&JXG$1.exists(JXG$1.themes[r.theme])&&(M=JXG$1.themes[r.theme]),N=JXG$1.deepCopy(Options$1,M,!0),v=this._setAttributes(r,N),d=JXG$1.getDimensions(t,v.document),v.unitx||v.unity?(a=JXG$1.def(v.originx,150),n=JXG$1.def(v.originy,150),s=JXG$1.def(v.unitx,50),o=JXG$1.def(v.unity,50)):(p=v.boundingbox,p[0]<v.maxboundingbox[0]&&(p[0]=v.maxboundingbox[0]),p[1]>v.maxboundingbox[1]&&(p[1]=v.maxboundingbox[1]),p[2]>v.maxboundingbox[2]&&(p[2]=v.maxboundingbox[2]),p[3]<v.maxboundingbox[3]&&(p[3]=v.maxboundingbox[3]),l=parseInt(d.width,10),u=parseInt(d.height,10),JXG$1.exists(p)&&v.keepaspectratio?(s=l/(p[2]-p[0]),o=u/(p[1]-p[3]),Math.abs(s)<Math.abs(o)?(o=Math.abs(s)*o/Math.abs(o),c=(u/o-(p[1]-p[3]))*.5):(s=Math.abs(o)*s/Math.abs(s),h=(l/s-(p[2]-p[0]))*.5)):(s=l/(p[2]-p[0]),o=u/(p[1]-p[3])),a=-s*(p[0]-h),n=o*(p[1]+c)),f=this.initRenderer(t,d,v.document,v.renderer),this._setARIA(t,v),C=new Board(t,f,v.id,[a,n],v.zoomx,v.zoomy,s,o,d.width,d.height,v),C.keepaspectratio=v.keepaspectratio,this._fillBoard(C,v,d),C.suspendUpdate(),v=C.attr,v.axis&&(y=typeof v.axis=="object"?v.axis:{},b=JXG$1.deepCopy(N.board.defaultaxes.x,y),_=JXG$1.deepCopy(N.board.defaultaxes.y,y),v.defaultaxes.x&&(b=JXG$1.deepCopy(b,v.defaultaxes.x)),v.defaultaxes.y&&(_=JXG$1.deepCopy(_,v.defaultaxes.y)),C.defaultAxes={},C.defaultAxes.x=C.create("axis",[[0,0],[1,0]],b),C.defaultAxes.y=C.create("axis",[[0,0],[0,1]],_)),v.grid&&C.create("grid",[],typeof v.grid=="object"?v.grid:{}),C.unsuspendUpdate(),C},loadBoardFromFile:function(t,r,a,n,s){var o,l,u,h,c;return n=n||{},o=this._setAttributes(n),h=JXG$1.getDimensions(t,o.document),l=this.initRenderer(t,h,o.document,o.renderer),this._setARIA(t,o),u=new Board(t,l,"",[150,150],1,1,50,50,h.width,h.height,o),this._fillBoard(u,o,h),c=o.encoding||"iso-8859-1",FileReader$1.parseFileContent(r,u,a,!0,c,s),u},loadBoardFromString:function(t,r,a,n,s){var o,l,u,h;return n=n||{},o=this._setAttributes(n),h=JXG$1.getDimensions(t,o.document),l=this.initRenderer(t,h,o.document,o.renderer),this._setARIA(t,o),u=new Board(t,l,"",[150,150],1,1,50,50,h.width,h.height,o),this._fillBoard(u,o,h),FileReader$1.parseString(r,u,a,!0,s),u},freeBoard:function(t){var r;typeof t=="string"&&(t=JXG$1.boards[t]),this._removeARIANodes(t),t.removeEventHandlers(),t.suspendUpdate();for(r in t.objects)t.objects.hasOwnProperty(r)&&t.objects[r].remove();for(;t.containerObj.firstChild;)t.containerObj.removeChild(t.containerObj.firstChild);for(r in t.objects)t.objects.hasOwnProperty(r)&&delete t.objects[r];delete t.renderer,t.jc.creator.clearCache(),delete t.jc,delete JXG$1.boards[t.id]},registerElement:function(t,r){JXG$1.deprecated("JXG.JSXGraph.registerElement()","JXG.registerElement()"),JXG$1.registerElement(t,r)}};JXG$1.isBrowser&&typeof window=="object"&&typeof document=="object"&&JXG$1.addEvent(window,"load",function(){var t,r,a,n,s,o,l,u,h,c,f,d,p,v,y,b,_,N,M=!1,C=document.getElementsByTagName("script"),$=function(A,X,O){var G=JXG$1.JSXGraph.initBoard(s,{boundingbox:O,keepaspectratio:!0,grid:y,axis:v,showReload:!0});if(X.toLowerCase().indexOf("script")>-1)G.construct(A);else try{G.jc.parse(A)}catch(R){JXG$1.debug(R)}return G},w=function(A,X,O,G){return function(){var R;JXG$1.JSXGraph.freeBoard(A),R=$(X,O,G),R.reload=w(R,X,O,G)}};for(r=0;r<C.length;r++)if(t=C[r].getAttribute("type",!1),JXG$1.exists(t)&&(t.toLowerCase()==="text/jessiescript"||t.toLowerCase()==="jessiescript"||t.toLowerCase()==="text/jessiecode"||t.toLowerCase()==="jessiecode")){if(d=C[r].getAttribute("class",!1)||"",u=C[r].getAttribute("width",!1)||"",h=C[r].getAttribute("height",!1)||"",c=C[r].getAttribute("maxwidth",!1)||"100%",f=C[r].getAttribute("aspectratio",!1)||"1/1",p=C[r].getAttribute("boundingbox",!1)||"-5, 5, 5, -5",s=C[r].getAttribute("container",!1),_=C[r].getAttribute("src",!1),p=p.split(","),p.length!==4)p=[-5,5,5,-5];else for(a=0;a<p.length;a++)p[a]=parseFloat(p[a]);if(v=JXG$1.str2Bool(C[r].getAttribute("axis",!1)||"false"),y=JXG$1.str2Bool(C[r].getAttribute("grid",!1)||"false"),JXG$1.exists(s))n=document.getElementById(s);else{s="jessiescript_autgen_jxg_"+r,n=document.createElement("div"),n.setAttribute("id",s),l=u!==""?"width:"+u+";":"",l+=h!==""?"height:"+h+";":"",l+=c!==""?"max-width:"+c+";":"",l+=f!==""?"aspect-ratio:"+f+";":"",n.setAttribute("style",l),n.setAttribute("class","jxgbox "+d);try{document.body.insertBefore(n,C[r])}catch{JXG$1.exists(jQuery)&&typeof jQuery=="object"&&jQuery(n).insertBefore(C[r])}}b="",JXG$1.exists(_)?(M=!0,N=new XMLHttpRequest,N.open("GET",_),N.overrideMimeType("text/plain; charset=x-user-defined"),N.addEventListener("load",function(){if(this.status<400)b=this.responseText+`
`+b,o=$(b,t,p),o.reload=w(o,b,t,p);else throw new Error(`
JSXGraph: failed to load file`,_,":",this.responseText)}),N.addEventListener("error",function(A){throw new Error(`
JSXGraph: failed to load file`,_,":",A)}),N.send()):M=!1,document.getElementById(s)?(b=C[r].innerHTML,b=b.replace(/<!\[CDATA\[/g,"").replace(/\]\]>/g,""),C[r].innerHTML=b,M||(o=$(b,t,p),o.reload=w(o,b,t,p))):JXG$1.debug("JSXGraph: Apparently the div injection failed. Can't create a board, sorry.")}},window);JXG$1.JSXGraph;JXG$1.Point=function(t,r,a){this.constructor(t,a,Const.OBJECT_TYPE_POINT,Const.OBJECT_CLASS_POINT),this.element=this.board.select(a.anchor),this.coordsConstructor(r),this.elType="point",this.id=this.board.setId(this,"P"),this.board.renderer.drawPoint(this),this.board.finalizeAdding(this),this.createGradient(),this.createLabel()};JXG$1.Point.prototype=new GeometryElement;JXG$1.copyPrototypeMethods(JXG$1.Point,CoordsElement,"coordsConstructor");JXG$1.extend(JXG$1.Point.prototype,{hasPoint:function(t,r){var a=this.coords.scrCoords,n,s,o,l=this.evalVisProp("sizeunit");return JXG$1.isObject(this.evalVisProp("precision"))?(o=this.board._inputDevice,s=this.evalVisProp("precision."+o)):s=this.board.options.precision.hasPoint,n=parseFloat(this.evalVisProp("size")),l==="user"&&(n*=Math.sqrt(Math.abs(this.board.unitX*this.board.unitY))),n+=parseFloat(this.evalVisProp("strokewidth"))*.5,n<s&&(n=s),Math.abs(a[1]-t)<n+2&&Math.abs(a[2]-r)<n+2},update:function(t){return this.needsUpdate?(this.updateCoords(t),this.evalVisProp("trace")&&this.cloneToBackground(!0),this):this},updateTransform:function(t){var r,a;if(this.transformations.length===0||this.baseElement===null)return this;for(this.transformations[0].update(),this===this.baseElement?r=this.transformations[0].apply(this,"self"):r=this.transformations[0].apply(this.baseElement),a=1;a<this.transformations.length;a++)this.transformations[a].update(),r=Mat.matVecMult(this.transformations[a].matrix,r);return this.coords.setCoordinates(Const.COORDS_BY_USER,r),this},updateRenderer:function(){return this.updateRendererGeneric("updatePoint"),this},bounds:function(){return this.coords.usrCoords.slice(1).concat(this.coords.usrCoords.slice(1))},makeIntersection:function(t,r,a,n){var s;t=this.board.select(t),r=this.board.select(r),s=Geometry.intersectionFunction(this.board,t,r,a,n,this.visProp.alwaysintersect),this.addConstraint([s]);try{t.addChild(this),r.addChild(this)}catch{throw new Error("JSXGraph: Can't create 'intersection' with parent types '"+typeof t+"' and '"+typeof r+"'.")}this.type=Const.OBJECT_TYPE_INTERSECTION,this.elType="intersection",this.parents=[t.id,r.id,a,n],this.generatePolynomial=function(){var o=t.generatePolynomial(this),l=r.generatePolynomial(this);return o.length===0||l.length===0?[]:[o[0],l[0]]},this.prepareUpdate().update()},setStyle:function(t){var r=["cross","cross","cross","circle","circle","circle","circle","square","square","square","plus","plus","plus"],a=[2,3,4,1,2,3,4,2,3,4,2,3,4];return this.visProp.face=r[t],this.visProp.size=a[t],this.board.renderer.changePointStyle(this),this},normalizeFace:function(t){return JXG$1.deprecated("Point.normalizeFace()","JXG.normalizePointFace()"),Options$1.normalizePointFace(t)},face:function(t){JXG$1.deprecated("Point.face()","Point.setAttribute()"),this.setAttribute({face:t})},size:function(t){JXG$1.deprecated("Point.size()","Point.setAttribute()"),this.setAttribute({size:t})},isOn:function(t,r){var a,n;return r=r||Mat.eps,JXG$1.isPoint(t)?this.Dist(t)<r:t.elementClass===Const.OBJECT_CLASS_LINE?t.elType==="segment"&&!this.evalVisProp("alwaysintersect")?(a=JXG$1.Math.Geometry.projectCoordsToSegment(this.coords.usrCoords,t.point1.coords.usrCoords,t.point2.coords.usrCoords),a[1]>=0&&a[1]<=1&&Geometry.distPointLine(this.coords.usrCoords,t.stdform)<r):Geometry.distPointLine(this.coords.usrCoords,t.stdform)<r:t.elementClass===Const.OBJECT_CLASS_CIRCLE?t.evalVisProp("hasinnerpoints")?this.Dist(t.center)<t.Radius()+r:Math.abs(this.Dist(t.center)-t.Radius())<r:t.elementClass===Const.OBJECT_CLASS_CURVE?(n=Geometry.projectPointToCurve(this,t,this.board)[0],Geometry.distance(this.coords.usrCoords,n.usrCoords,3)<r):t.type===Const.OBJECT_TYPE_POLYGON?t.evalVisProp("hasinnerpoints")&&t.pnpoly(this.coords.usrCoords[1],this.coords.usrCoords[2],JXG$1.COORDS_BY_USER)?!0:(a=Geometry.projectCoordsToPolygon(this.coords.usrCoords,t),Geometry.distance(this.coords.usrCoords,a,3)<r):t.type===Const.OBJECT_TYPE_TURTLE?(n=Geometry.projectPointToTurtle(this,t,this.board),Geometry.distance(this.coords.usrCoords,n.usrCoords,3)<r):!1},cloneToBackground:function(){var t=JXG$1.getCloneObject(this);return this.board.renderer.drawPoint(t),this.traces[t.id]=t.rendNode,this}});JXG$1.createPoint=function(t,r,a){var n,s;if(s=JXG$1.copyAttributes(a,t.options,"point"),n=CoordsElement.create(JXG$1.Point,t,r,s),!n)throw new Error("JSXGraph: Can't create point with parent types '"+typeof r[0]+"' and '"+typeof r[1]+`'.
Possible parent types: [x,y], [z,x,y], [element,transformation]`);return n};JXG$1.createGlider=function(t,r,a){var n,s,o=JXG$1.copyAttributes(a,t.options,"glider");return r.length===1?s=[0,0]:s=r.slice(0,2),n=t.create("point",s,o),n.makeGlider(r[r.length-1]),n};JXG$1.createIntersectionPoint=function(t,r,a){var n,s,o,l,u,h,c=JXG$1.copyAttributes(a,t.options,"intersection");r.push(0,0),s=t.select(r[0]),o=t.select(r[1]),u=r[2]||0,h=r[3]||0,n=t.create("point",[0,0,0],c),l=Geometry.intersectionFunction(t,s,o,u,h,n.visProp.alwaysintersect),n.addConstraint([l]);try{s.addChild(n),o.addChild(n)}catch{throw new Error("JSXGraph: Can't create 'intersection' with parent types '"+typeof r[0]+"' and '"+typeof r[1]+"'.")}return n.type=Const.OBJECT_TYPE_INTERSECTION,n.elType="intersection",n.setParents([s.id,o.id]),n.intersectionNumbers=[u,h],n.getParents=function(){return this.parents.concat(this.intersectionNumbers)},n.generatePolynomial=function(){var f=s.generatePolynomial(n),d=o.generatePolynomial(n);return f.length===0||d.length===0?[]:[f[0],d[0]]},n};JXG$1.createOtherIntersectionPoint=function(t,r,a){var n,s,o,l,u,h,c,f=!0,d=JXG$1.copyAttributes(a,t.options,"otherintersection");if(r.length!==3)f=!1;else{for(s=t.select(r[0]),o=t.select(r[1]),JXG$1.isArray(r[2])?u=r[2]:u=[r[2]],l=0;l<u.length;l++)if(u[l]=t.select(u[l]),!JXG$1.isPoint(u[l])){f=!1;break}f&&(c=[s,o],c.sort(function(p,v){return v.elementClass-p.elementClass}),([Const.OBJECT_CLASS_CIRCLE,Const.OBJECT_CLASS_CURVE].indexOf(c[0].elementClass)<0||[Const.OBJECT_CLASS_CIRCLE,Const.OBJECT_CLASS_CURVE,Const.OBJECT_CLASS_LINE].indexOf(c[1].elementClass)<0)&&(f=!1))}if(!f)throw new Error("JSXGraph: Can't create 'other intersection point' with parent types '"+typeof r[0]+"',  '"+typeof r[1]+"'and  '"+typeof r[2]+`'.
Possible parent types: [circle|curve|line,circle|curve|line, point], not two lines`);return n=t.create("point",[0,0,0],d),h=Geometry.otherIntersectionFunction(c,u,n.visProp.alwaysintersect,n.visProp.precision),n.addConstraint([h]),n.type=Const.OBJECT_TYPE_INTERSECTION,n.elType="otherintersection",n.setParents([s.id,o.id]),n.addParents(u),s.addChild(n),o.addChild(n),s.elementClass===Const.OBJECT_CLASS_CIRCLE&&(n.generatePolynomial=function(){var p=s.generatePolynomial(n),v=o.generatePolynomial(n);return p.length===0||v.length===0?[]:[p[0],v[0]]}),n};JXG$1.createPolePoint=function(t,r,a){var n,s,o,l,u,h,c;if(r.length>1&&(l=r[0].type===Const.OBJECT_TYPE_CONIC||r[0].elementClass===Const.OBJECT_CLASS_CIRCLE,u=r[1].type===Const.OBJECT_TYPE_CONIC||r[1].elementClass===Const.OBJECT_CLASS_CIRCLE,h=r[0].elementClass===Const.OBJECT_CLASS_LINE,c=r[1].elementClass===Const.OBJECT_CLASS_LINE),r.length!==2||!(l&&c||h&&u))throw new Error("JSXGraph: Can't create 'pole point' with parent types '"+typeof r[0]+"' and '"+typeof r[1]+`'.
Possible parent type: [conic|circle,line], [line,conic|circle]`);return c?(s=t.select(r[0]),o=t.select(r[1])):(s=t.select(r[1]),o=t.select(r[0])),n=t.create("point",[function(){var f=s.quadraticform,d=o.stdform.slice(0,3);return[JXG$1.Math.Numerics.det([d,f[1],f[2]]),JXG$1.Math.Numerics.det([f[0],d,f[2]]),JXG$1.Math.Numerics.det([f[0],f[1],d])]}],a),n.elType="polepoint",n.setParents([s.id,o.id]),s.addChild(n),o.addChild(n),n};JXG$1.registerElement("point",JXG$1.createPoint);JXG$1.registerElement("glider",JXG$1.createGlider);JXG$1.registerElement("intersection",JXG$1.createIntersectionPoint);JXG$1.registerElement("otherintersection",JXG$1.createOtherIntersectionPoint);JXG$1.registerElement("polepoint",JXG$1.createPolePoint);const Point=JXG$1.Point;JXG$1.Line=function(t,r,a,n){this.constructor(t,n,Const.OBJECT_TYPE_LINE,Const.OBJECT_CLASS_LINE),this.point1=this.board.select(r),this.point2=this.board.select(a),this.ticks=[],this.defaultTicks=null,this.parentPolygon=null,this.id=this.board.setId(this,"L"),this.board.renderer.drawLine(this),this.board.finalizeAdding(this),this.elType="line",this.point1._is_new?(this.addChild(this.point1),delete this.point1._is_new):this.point1.addChild(this),this.point2._is_new?(this.addChild(this.point2),delete this.point2._is_new):this.point2.addChild(this),this.inherits.push(this.point1,this.point2),this.updateStdform(),this.createLabel(),this.methodMap=JXG$1.deepCopy(this.methodMap,{point1:"point1",point2:"point2",getSlope:"Slope",Slope:"Slope",Direction:"Direction",getRise:"getRise",Rise:"getRise",getYIntersect:"getRise",YIntersect:"getRise",getAngle:"getAngle",Angle:"getAngle",L:"L",length:"L",setFixedLength:"setFixedLength",setStraight:"setStraight"})};JXG$1.Line.prototype=new GeometryElement;JXG$1.extend(JXG$1.Line.prototype,{hasPoint:function(t,r){var a=[],n=[1,t,r],s,o,l,u,h,c,f,d,p,v=this.evalVisProp("strokewidth");return JXG$1.isObject(this.evalVisProp("precision"))?(p=this.board._inputDevice,d=this.evalVisProp("precision."+p)):d=this.board.options.precision.hasPoint,d+=v*.5,a[0]=this.stdform[0]-this.stdform[1]*this.board.origin.scrCoords[1]/this.board.unitX+this.stdform[2]*this.board.origin.scrCoords[2]/this.board.unitY,a[1]=this.stdform[1]/this.board.unitX,a[2]=this.stdform[2]/-this.board.unitY,s=Geometry.distPointLine(n,a),isNaN(s)||s>d?!1:this.evalVisProp("straightfirst")&&this.evalVisProp("straightlast")?!0:(l=this.point1.coords,u=this.point2.coords,o=[0,a[1],a[2]],o=Mat.crossProduct(o,n),o=Mat.crossProduct(o,a),o[1]/=o[0],o[2]/=o[0],o[0]=1,o=new Coords(Const.COORDS_BY_SCREEN,o.slice(1),this.board).usrCoords,h=l.distance(Const.COORDS_BY_USER,u),l=l.usrCoords.slice(0),u=u.usrCoords.slice(0),h<Mat.eps?c=0:(h===Number.POSITIVE_INFINITY&&(h=1/Mat.eps,Math.abs(u[0])<Mat.eps?(h/=Geometry.distance([0,0,0],u),u=[1,l[1]+u[1]*h,l[2]+u[2]*h]):(h/=Geometry.distance([0,0,0],l),l=[1,u[1]+l[1]*h,u[2]+l[2]*h])),f=1,h=u[f]-l[f],Math.abs(h)<Mat.eps&&(f=2,h=u[f]-l[f]),c=(o[f]-l[f])/h),!this.evalVisProp("straightfirst")&&c<0?!1:!(!this.evalVisProp("straightlast")&&c>1))},update:function(){var t;return this.needsUpdate?(this.constrained&&(JXG$1.isFunction(this.funps)?(t=this.funps(),t&&t.length&&t.length===2&&(this.point1=t[0],this.point2=t[1])):(JXG$1.isFunction(this.funp1)&&(t=this.funp1(),JXG$1.isPoint(t)?this.point1=t:t&&t.length&&t.length===2&&this.point1.setPositionDirectly(Const.COORDS_BY_USER,t)),JXG$1.isFunction(this.funp2)&&(t=this.funp2(),JXG$1.isPoint(t)?this.point2=t:t&&t.length&&t.length===2&&this.point2.setPositionDirectly(Const.COORDS_BY_USER,t)))),this.updateSegmentFixedLength(),this.updateStdform(),this.evalVisProp("trace")&&this.cloneToBackground(!0),this):this},updateSegmentFixedLength:function(){var t,r,a,n,s,o,l,u;return this.hasFixedLength?(t=this.point1.Dist(this.point2),r=this.evalVisProp("nonnegativeonly")?Math.max(0,this.fixedLength()):Math.abs(this.fixedLength()),a=this.fixedLengthOldCoords[0].distance(Const.COORDS_BY_USER,this.point1.coords),n=this.fixedLengthOldCoords[1].distance(Const.COORDS_BY_USER,this.point2.coords),(a>Mat.eps||n>Mat.eps||t!==r)&&(s=this.point1.isDraggable&&this.point1.type!==Const.OBJECT_TYPE_GLIDER&&!this.point1.evalVisProp("fixed"),o=this.point2.isDraggable&&this.point2.type!==Const.OBJECT_TYPE_GLIDER&&!this.point2.evalVisProp("fixed"),t>Mat.eps?a>n&&o||a<=n&&o&&!s?(this.point2.setPositionDirectly(Const.COORDS_BY_USER,[this.point1.X()+(this.point2.X()-this.point1.X())*r/t,this.point1.Y()+(this.point2.Y()-this.point1.Y())*r/t]),this.point2.fullUpdate()):(a<=n&&s||a>n&&s&&!o)&&(this.point1.setPositionDirectly(Const.COORDS_BY_USER,[this.point2.X()+(this.point1.X()-this.point2.X())*r/t,this.point2.Y()+(this.point1.Y()-this.point2.Y())*r/t]),this.point1.fullUpdate()):(l=Math.random()-.5,u=Math.random()-.5,t=Mat.hypot(l,u),o?(this.point2.setPositionDirectly(Const.COORDS_BY_USER,[this.point1.X()+l*r/t,this.point1.Y()+u*r/t]),this.point2.fullUpdate()):s&&(this.point1.setPositionDirectly(Const.COORDS_BY_USER,[this.point2.X()+l*r/t,this.point2.Y()+u*r/t]),this.point1.fullUpdate())),this.fixedLengthOldCoords[0].setCoordinates(Const.COORDS_BY_USER,this.point1.coords.usrCoords),this.fixedLengthOldCoords[1].setCoordinates(Const.COORDS_BY_USER,this.point2.coords.usrCoords)),this):this},updateStdform:function(){var t=Mat.crossProduct(this.point1.coords.usrCoords,this.point2.coords.usrCoords);this.stdform[0]=t[0],this.stdform[1]=t[1],this.stdform[2]=t[2],this.stdform[3]=0,this.normalize()},updateRenderer:function(){return this.needsUpdate?(this.visPropCalc.visible&&(this.isReal=!isNaN(this.point1.coords.usrCoords[1]+this.point1.coords.usrCoords[2]+this.point2.coords.usrCoords[1]+this.point2.coords.usrCoords[2])&&Mat.innerProduct(this.stdform,this.stdform,3)>=Mat.eps*Mat.eps,this.isReal||this.updateVisibility(!1)),this.visPropCalc.visible&&this.board.renderer.updateLine(this),this.hasLabel&&this.visPropCalc.visible&&this.label&&this.label.visPropCalc.visible&&this.isReal&&(this.label.update(),this.board.renderer.updateText(this.label)),this.setDisplayRendNode(),this.needsUpdate=!1,this):this},generatePolynomial:function(t){var r=this.point1.symbolic.x,a=this.point1.symbolic.y,n=this.point2.symbolic.x,s=this.point2.symbolic.y,o=t.symbolic.x,l=t.symbolic.y;return[["(",a,")*(",o,")-(",a,")*(",n,")+(",l,")*(",n,")-(",r,")*(",l,")+(",r,")*(",s,")-(",o,")*(",s,")"].join("")]},getRise:function(){return Math.abs(this.stdform[2])>=Mat.eps?-this.stdform[0]/this.stdform[2]:1/0},Slope:function(){return Math.abs(this.stdform[2])>=Mat.eps?-this.stdform[1]/this.stdform[2]:1/0},getSlope:function(){return this.Slope()},getAngle:function(){return Math.atan2(-this.stdform[1],this.stdform[2])},Direction:function(){var t=this.point1.coords.usrCoords,r=this.point2.coords.usrCoords;return r[0]===0&&t[0]!==0?r.slice(1):t[0]===0&&r[0]!==0?[-t[1],-t[2]]:[r[1]-t[1],r[2]-t[2]]},isVertical:function(){var t=this.Direction();return t[0]===0&&t[1]!==0},isHorizontal:function(){var t=this.Direction();return t[1]===0&&t[0]!==0},setStraight:function(t,r){return this.visProp.straightfirst=t,this.visProp.straightlast=r,this.board.renderer.updateLine(this),this},getTextAnchor:function(){return new Coords(Const.COORDS_BY_USER,[.5*(this.point2.X()+this.point1.X()),.5*(this.point2.Y()+this.point1.Y())],this.board)},setLabelRelativeCoords:function(t){JXG$1.exists(this.label)&&(this.label.relativeCoords=new Coords(Const.COORDS_BY_SCREEN,[t[0],-t[1]],this.board))},getLabelAnchor:function(){var t,r,a,n,s,o,l,u,h=1.5,c=0,f=new Coords(Const.COORDS_BY_USER,this.point1.coords.usrCoords,this.board),d=new Coords(Const.COORDS_BY_USER,this.point2.coords.usrCoords,this.board),p=this.evalVisProp("straightfirst"),v=this.evalVisProp("straightlast");if((p||v)&&Geometry.calcStraight(this,f,d,0),f=f.scrCoords,d=d.scrCoords,!JXG$1.exists(this.label))return new Coords(Const.COORDS_BY_SCREEN,[NaN,NaN],this.board);if(a=this.label.evalVisProp("position"),!JXG$1.isString(a))return new Coords(Const.COORDS_BY_SCREEN,[NaN,NaN],this.board);if(a.indexOf("right")<0&&a.indexOf("left")<0)switch(a){case"last":t=d[1],r=d[2];break;case"first":t=f[1],r=f[2];break;case"lft":case"llft":case"ulft":f[1]<d[1]+Mat.eps?(t=f[1],r=f[2]):(t=d[1],r=d[2]);break;case"rt":case"lrt":case"urt":f[1]>d[1]+Mat.eps?(t=f[1],r=f[2]):(t=d[1],r=d[2]);break;default:t=.5*(f[1]+d[1]),r=.5*(f[2]+d[2])}else n=JXG$1.parsePosition(a),s=JXG$1.parseNumber(n.pos,1,1),o=d[1]-f[1],l=d[2]-f[2],u=Mat.hypot(o,l),n.pos.indexOf("px")>=0||n.pos.indexOf("fr")>=0||n.pos.indexOf("%")>=0?(n.pos.indexOf("px")>=0&&(s/=u),t=f[1]+s*o,r=f[2]+s*l):(t=f[1]+s*this.board.unitX*o/u,r=f[2]+s*this.board.unitY*l/u),n.side==="left"?o*=-1:l*=-1,JXG$1.exists(this.label)&&(h=.5*this.label.evalVisProp("distance")/u),t+=l*this.label.size[0]*h,r+=o*this.label.size[1]*h;return(p||v)&&(JXG$1.exists(this.label)&&(c=this.label.evalVisProp("fontsize")),Math.abs(t)<Mat.eps?t=c:this.board.canvasWidth+Mat.eps>t&&t>this.board.canvasWidth-c-Mat.eps&&(t=this.board.canvasWidth-c),Mat.eps+c>r&&r>-Mat.eps?r=c:this.board.canvasHeight+Mat.eps>r&&r>this.board.canvasHeight-c-Mat.eps&&(r=this.board.canvasHeight-c)),new Coords(Const.COORDS_BY_SCREEN,[t,r],this.board)},cloneToBackground:function(){var t=JXG$1.getCloneObject(this),r,a,n;return t.point1=this.point1,t.point2=this.point2,t.stdform=this.stdform,a=this.getSlope(),r=this.getRise(),t.getSlope=function(){return a},t.getRise=function(){return r},n=this.board.renderer.enhancedRendering,this.board.renderer.enhancedRendering=!0,this.board.renderer.drawLine(t),this.board.renderer.enhancedRendering=n,this.traces[t.id]=t.rendNode,this},addTransform:function(t){var r,a=JXG$1.isArray(t)?t:[t],n=a.length;for(r=0;r<n;r++)this.point1.transformations.push(a[r]),this.point2.transformations.push(a[r]);return this},snapToGrid:function(t){var r,a,n,s,o,l,u,h,c;return this.evalVisProp("snaptogrid")?this.parents.length<3?(this.point1.handleSnapToGrid(!0,!0),this.point2.handleSnapToGrid(!0,!0)):JXG$1.exists(t)&&(h=this.evalVisProp("snapsizex"),c=this.evalVisProp("snapsizey"),r=new Coords(Const.COORDS_BY_SCREEN,[t.Xprev,t.Yprev],this.board),l=r.usrCoords[1],u=r.usrCoords[2],h<=0&&this.board.defaultAxes&&this.board.defaultAxes.x.defaultTicks&&(o=this.board.defaultAxes.x.defaultTicks,h=o.ticksDelta*(o.evalVisProp("minorticks")+1)),c<=0&&this.board.defaultAxes&&this.board.defaultAxes.y.defaultTicks&&(o=this.board.defaultAxes.y.defaultTicks,c=o.ticksDelta*(o.evalVisProp("minorticks")+1)),h>0&&c>0&&(a=Geometry.projectPointToLine({coords:r},this,this.board),n=Stat.subtract([1,Math.round(l/h)*h,Math.round(u/c)*c],a.usrCoords),s=this.board.create("transform",n.slice(1),{type:"translate"}),s.applyOnce([this.point1,this.point2]))):(this.point1.handleSnapToGrid(!1,!0),this.point2.handleSnapToGrid(!1,!0)),this},snapToPoints:function(){var t=this.evalVisProp("snaptopoints");return this.parents.length<3&&(this.point1.handleSnapToPoints(t),this.point2.handleSnapToPoints(t)),this},X:function(t){var r=this.point1.coords.usrCoords,a=this.point2.coords.usrCoords,n=this.stdform[2];return r[0]!==0?a[0]!==0?r[1]+(a[1]-r[1])*t:r[1]+n*1e5*t:r[0]!==0?a[1]-(r[1]-a[1])*t:a[1]+n*1e5*t},Y:function(t){var r=this.point1.coords.usrCoords,a=this.point2.coords.usrCoords,n=this.stdform[1];return r[0]!==0?a[0]!==0?r[2]+(a[2]-r[2])*t:r[2]-n*1e5*t:r[0]!==0?a[2]-(r[2]-a[2])*t:a[2]-n*1e5*t},Z:function(t){var r=this.point1.coords.usrCoords,a=this.point2.coords.usrCoords;return t===1&&r[0]*a[0]===0?0:1},Ft:function(t){var r=[this.Z(t),this.X(t),this.Y(t)];return r[1]/=r[0],r[2]/=r[0],r[0]/=r[0],r},L:function(){return this.point1.Dist(this.point2)},setFixedLength:function(t){return this.hasFixedLength?(this.fixedLength=JXG$1.createFunction(t,this.board),this.hasFixedLength=!0,this.addParentsFromJCFunctions([this.fixedLength]),this.board.update(),this):this},minX:function(){return 0},maxX:function(){return 1},bounds:function(){var t=this.point1.coords.usrCoords,r=this.point2.coords.usrCoords;return[Math.min(t[1],r[1]),Math.max(t[2],r[2]),Math.max(t[1],r[1]),Math.min(t[2],r[2])]},remove:function(){this.removeAllTicks(),GeometryElement.prototype.remove.call(this)}});JXG$1.createLine=function(t,r,a){var n,s,o,l,u,h,c=[],f=!1,d=!1,p;if(r.length===2){if(h=JXG$1.copyAttributes(a,t.options,"line","point1"),JXG$1.isArray(r[0])&&r[0].length>1)o=t.create("point",r[0],h);else if(JXG$1.isString(r[0])||JXG$1.isPoint(r[0]))o=t.select(r[0]);else if(JXG$1.isFunction(r[0])&&JXG$1.isPoint(r[0]()))o=r[0](),d=!0;else if(JXG$1.isFunction(r[0])&&r[0]().length&&r[0]().length>=2)o=JXG$1.createPoint(t,r[0](),h),d=!0;else if(JXG$1.isObject(r[0])&&JXG$1.isTransformationOrArray(r[1]))f=!0,o=t.create("point",[r[0].point1,r[1]],h);else throw new Error("JSXGraph: Can't create line with parent types '"+typeof r[0]+"' and '"+typeof r[1]+`'.
Possible parent types: [point,point], [[x1,y1],[x2,y2]], [a,b,c]`);if(h=JXG$1.copyAttributes(a,t.options,"line","point2"),f)l=t.create("point",[r[0].point2,r[1]],h);else if(JXG$1.isArray(r[1])&&r[1].length>1)l=t.create("point",r[1],h);else if(JXG$1.isString(r[1])||JXG$1.isPoint(r[1]))l=t.select(r[1]);else if(JXG$1.isFunction(r[1])&&JXG$1.isPoint(r[1]()))l=r[1](),d=!0;else if(JXG$1.isFunction(r[1])&&r[1]().length&&r[1]().length>=2)l=JXG$1.createPoint(t,r[1](),h),d=!0;else throw new Error("JSXGraph: Can't create line with parent types '"+typeof r[0]+"' and '"+typeof r[1]+`'.
Possible parent types: [point,point], [[x1,y1],[x2,y2]], [a,b,c]`);h=JXG$1.copyAttributes(a,t.options,"line"),s=new JXG$1.Line(t,o,l,h),d?(s.constrained=!0,s.funp1=r[0],s.funp2=r[1]):f||(s.isDraggable=!0),s.setParents([o.id,l.id])}else if(r.length===3){for(p=!0,u=0;u<3;u++)if(JXG$1.isNumber(r[u]))c[u]=JXG$1.createFunction(r[u]);else if(JXG$1.isFunction(r[u]))c[u]=r[u],p=!1;else throw new Error("JSXGraph: Can't create line with parent types '"+typeof r[0]+"' and '"+typeof r[1]+"' and '"+typeof r[2]+`'.
Possible parent types: [point,point], [[x1,y1],[x2,y2]], [a,b,c]`);h=JXG$1.copyAttributes(a,t.options,"line","point1"),p?o=t.create("point",[c[2]()*c[2]()+c[1]()*c[1](),c[2]()-c[1]()*c[0]()+c[2](),-c[1]()-c[2]()*c[0]()-c[1]()],h):o=t.create("point",[function(){return(c[2]()*c[2]()+c[1]()*c[1]())*.5},function(){return(c[2]()-c[1]()*c[0]()+c[2]())*.5},function(){return(-c[1]()-c[2]()*c[0]()-c[1]())*.5}],h),h=JXG$1.copyAttributes(a,t.options,"line","point2"),p?l=t.create("point",[c[2]()*c[2]()+c[1]()*c[1](),-c[1]()*c[0]()+c[2](),-c[2]()*c[0]()-c[1]()],h):l=t.create("point",[function(){return c[2]()*c[2]()+c[1]()*c[1]()},function(){return-c[1]()*c[0]()+c[2]()},function(){return-c[2]()*c[0]()-c[1]()}],h),o.prepareUpdate().update(),l.prepareUpdate().update(),h=JXG$1.copyAttributes(a,t.options,"line"),s=new JXG$1.Line(t,o,l,h),s.isDraggable=p,s.setParents([o,l])}else if(r.length===1&&JXG$1.isFunction(r[0])&&r[0]().length===2&&JXG$1.isPoint(r[0]()[0])&&JXG$1.isPoint(r[0]()[1]))n=r[0](),h=JXG$1.copyAttributes(a,t.options,"line"),s=new JXG$1.Line(t,n[0],n[1],h),s.constrained=!0,s.funps=r[0],s.setParents(n);else if(r.length===1&&JXG$1.isFunction(r[0])&&r[0]().length===3&&JXG$1.isNumber(r[0]()[0])&&JXG$1.isNumber(r[0]()[1])&&JXG$1.isNumber(r[0]()[2]))n=r[0],h=JXG$1.copyAttributes(a,t.options,"line","point1"),o=t.create("point",[function(){var v=n();return[(v[2]*v[2]+v[1]*v[1])*.5,(v[2]-v[1]*v[0]+v[2])*.5,(-v[1]-v[2]*v[0]-v[1])*.5]}],h),h=JXG$1.copyAttributes(a,t.options,"line","point2"),l=t.create("point",[function(){var v=n();return[v[2]*v[2]+v[1]*v[1],-v[1]*v[0]+v[2],-v[2]*v[0]-v[1]]}],h),h=JXG$1.copyAttributes(a,t.options,"line"),s=new JXG$1.Line(t,o,l,h),s.constrained=!0,s.funps=r[0],s.setParents([o,l]);else throw new Error("JSXGraph: Can't create line with parent types '"+typeof r[0]+"' and '"+typeof r[1]+`'.
Possible parent types: [point,point], [[x1,y1],[x2,y2]], [a,b,c]`);return s};JXG$1.registerElement("line",JXG$1.createLine);JXG$1.createSegment=function(t,r,a){var n,s;if(a.straightFirst=!1,a.straightLast=!1,s=JXG$1.copyAttributes(a,t.options,"segment"),n=t.create("line",r.slice(0,2),s),r.length===3){try{n.hasFixedLength=!0,n.fixedLengthOldCoords=[],n.fixedLengthOldCoords[0]=new Coords(Const.COORDS_BY_USER,n.point1.coords.usrCoords.slice(1,3),t),n.fixedLengthOldCoords[1]=new Coords(Const.COORDS_BY_USER,n.point2.coords.usrCoords.slice(1,3),t),n.setFixedLength(r[2])}catch{throw new Error("JSXGraph: Can't create segment with third parent type '"+typeof r[2]+`'.
Possible third parent types: number or function`)}n.getParents=function(){return this.parents.concat(this.fixedLength())}}return n.elType="segment",n};JXG$1.registerElement("segment",JXG$1.createSegment);JXG$1.createArrow=function(t,r,a){var n,s;return a.straightFirst=!1,a.straightLast=!1,s=JXG$1.copyAttributes(a,t.options,"arrow"),n=t.create("line",r,s),n.type=Const.OBJECT_TYPE_VECTOR,n.elType="arrow",n};JXG$1.registerElement("arrow",JXG$1.createArrow);JXG$1.createAxis=function(t,r,a){var n,s,o,l;s=JXG$1.copyAttributes(a,t.options,"axis");try{n=t.create("line",r,s)}catch{throw new Error("JSXGraph: Can't create axis with parent types '"+typeof r[0]+"' and '"+typeof r[1]+`'.
Possible parent types: [point,point], [[x1,y1],[x2,y2]]`)}n.type=Const.OBJECT_TYPE_AXIS,n.isDraggable=!1,n.point1.isDraggable=!1,n.point2.isDraggable=!1,n._point1UsrCoordsOrg=n.point1.coords.usrCoords.slice(),n._point2UsrCoordsOrg=n.point2.coords.usrCoords.slice();for(o in n.ancestors)n.ancestors.hasOwnProperty(o)&&(n.ancestors[o].type=Const.OBJECT_TYPE_AXISPOINT);return JXG$1.exists(s.ticks.ticksdistance)?l=s.ticks.ticksdistance:JXG$1.isArray(s.ticks.ticks)?l=s.ticks.ticks:l=1,n.defaultTicks=t.create("ticks",[n,l],s.ticks),n.defaultTicks.dump=!1,n.elType="axis",n.subs={ticks:n.defaultTicks},n.inherits.push(n.defaultTicks),n.update=function(){var u,h,c,f,d,p,v,y,b,_,N,M,C,$,w,A,X,O,G;if(!this.needsUpdate)return this;if(u=this.board.getBoundingBox(),h=this.evalVisProp("position"),f=this.Direction(),d=this.isHorizontal(),p=this.isVertical(),v=this.evalVisProp("ticksautopos"),y=this.evalVisProp("ticksautoposthreshold"),d?y=JXG$1.parseNumber(y,Math.abs(u[1]-u[3]),1/this.board.unitX)*this.board.unitX:p?y=JXG$1.parseNumber(y,Math.abs(u[1]-u[3]),1/this.board.unitY)*this.board.unitY:y=JXG$1.parseNumber(y,1,1),_=this.evalVisProp("anchor"),N=_.indexOf("left")>-1,M=_.indexOf("right")>-1,C=this.evalVisProp("anchordist"),d?C=JXG$1.parseNumber(C,Math.abs(u[1]-u[3]),1/this.board.unitX):p?C=JXG$1.parseNumber(C,Math.abs(u[0]-u[2]),1/this.board.unitY):C=0,A=this.board.getPointLoc(this._point1UsrCoordsOrg,C),$=this.point1.coords.usrCoords.slice(),w=this.point2.coords.usrCoords.slice(),h==="static"||!p&&!d||(h==="fixed"?(d&&(f[0]>0&&M||f[0]<0&&N?($[2]=u[3]+C,w[2]=u[3]+C):f[0]>0&&N||f[0]<0&&M?($[2]=u[1]-C,w[2]=u[1]-C):($=this._point1UsrCoordsOrg.slice(),w=this._point2UsrCoordsOrg.slice())),p&&(f[1]>0&&N||f[1]<0&&M?($[1]=u[0]+C,w[1]=u[0]+C):f[1]>0&&M||f[1]<0&&N?($[1]=u[2]-C,w[1]=u[2]-C):($=this._point1UsrCoordsOrg.slice(),w=this._point2UsrCoordsOrg.slice()))):h==="sticky"&&(d&&(A[1]<0&&(f[0]>0&&M||f[0]<0&&N)?($[2]=u[3]+C,w[2]=u[3]+C):A[1]>0&&(f[0]>0&&N||f[0]<0&&M)?($[2]=u[1]-C,w[2]=u[1]-C):($=this._point1UsrCoordsOrg.slice(),w=this._point2UsrCoordsOrg.slice())),p&&(A[0]<0&&(f[1]>0&&N||f[1]<0&&M)?($[1]=u[0]+C,w[1]=u[0]+C):A[0]>0&&(f[1]>0&&M||f[1]<0&&N)?($[1]=u[2]-C,w[1]=u[2]-C):($=this._point1UsrCoordsOrg.slice(),w=this._point2UsrCoordsOrg.slice())))),this.point1.setPositionDirectly(JXG$1.COORDS_BY_USER,$),this.point2.setPositionDirectly(JXG$1.COORDS_BY_USER,w),JXG$1.exists(this.defaultTicks)){if(X=this.defaultTicks.visProp.label,v&&(d||p)){if(JXG$1.exists(X._anchorx_org)||(X._anchorx_org=JXG$1.def(X.anchorx,this.board.options.text.anchorX)),JXG$1.exists(X._anchory_org)||(X._anchory_org=JXG$1.def(X.anchory,this.board.options.text.anchorY)),JXG$1.exists(X._offset_org)||(X._offset_org=X.offset.slice()),G=X.offset,d){for(b=n.point1.coords.scrCoords[2]-this.board.canvasHeight*.5,O=X.anchory,b<0&&Math.abs(b)>y?X._side==="bottom"&&(X.anchory==="top"&&(O="bottom"),G[1]*=-1,X._side="top"):b>0&&Math.abs(b)>y?X._side==="top"&&(X.anchory==="bottom"&&(O="top"),G[1]*=-1,X._side="bottom"):(O=X._anchory_org,G=X._offset_org.slice(),O==="top"?X._side="bottom":O==="bottom"?X._side="top":G[1]<0?X._side="bottom":X._side="top"),c=0;c<n.defaultTicks.labels.length;c++)this.defaultTicks.labels[c].visProp.anchory=O;X.anchory=O}else if(p){for(b=n.point1.coords.scrCoords[1]-this.board.canvasWidth*.5,b<0&&Math.abs(b)>y?X._side==="right"&&(X.anchorx==="left"&&(O="right"),G[0]*=-1,X._side="left"):b>0&&Math.abs(b)>y?X._side==="left"&&(X.anchorx==="right"&&(O="left"),G[0]*=-1,X._side="right"):(O=X._anchorx_org,G=X._offset_org.slice(),O==="left"?X._side="right":O==="right"||G[0]<0?X._side="left":X._side="right"),c=0;c<n.defaultTicks.labels.length;c++)this.defaultTicks.labels[c].visProp.anchorx=O;X.anchorx=O}X.offset=G}else delete X._anchorx_org,delete X._anchory_org,delete X._offset_org;this.defaultTicks.needsUpdate=!0}return JXG$1.Line.prototype.update.call(this),this},n};JXG$1.registerElement("axis",JXG$1.createAxis);JXG$1.createTangent=function(t,r,a){var n,s,o,l,u,h,c,f,d,p=[];if(r.length===1)n=r[0],s=n.slideObject;else if(r.length===2)if(JXG$1.isPoint(r[0]))n=r[0],s=r[1];else if(JXG$1.isPoint(r[1]))s=r[0],n=r[1];else throw new Error("JSXGraph: Can't create tangent with parent types '"+typeof r[0]+"' and '"+typeof r[1]+`'.
Possible parent types: [glider|point], [point,line|curve|circle|conic]`);else throw new Error("JSXGraph: Can't create tangent with parent types '"+typeof r[0]+"' and '"+typeof r[1]+`'.
Possible parent types: [glider|point], [point,line|curve|circle|conic]`);if(h=JXG$1.copyAttributes(a,t.options,"tangent"),s.elementClass===Const.OBJECT_CLASS_LINE)u=t.create("line",[s.point1,s.point2],h),u.glider=n;else if(s.elementClass===Const.OBJECT_CLASS_CURVE&&s.type!==Const.OBJECT_TYPE_CONIC){if(f=s.getTransformationSource(),d=f[0],d)for(p.push(s);f[0]&&JXG$1.exists(f[1]._transformationSource);)p.push(f[1]),f=f[1].getTransformationSource();s.evalVisProp("curvetype")!=="plot"||d?(u=t.create("line",[function(){var v=s.X,y=s.Y,b,_,N,M,C,$,w,A;if(n.type===Const.OBJECT_TYPE_GLIDER?A=n.position:s.evalVisProp("curvetype")==="functiongraph"?A=n.X():A=Geometry.projectPointToCurve(n,s,t)[1],w=n.Coords(!0),d){for(C=p[p.length-1]._transformationSource,v=C.X,y=C.Y,M=0;M<p.length;M++)p[M].updateTransformMatrix(),$=Mat.inverse(p[M].transformMat),w=Mat.matVecMult($,w);n.type!==Const.OBJECT_TYPE_GLIDER&&(w[1]/=w[0],w[2]/=w[0],w[0]/=w[0],A=Geometry.projectCoordsToCurve(w[1],w[2],0,C,t)[1])}if(b=Numerics.D(y)(A),_=Numerics.D(v)(A),N=[-w[1]*b+w[2]*_,w[0]*b,-w[0]*_],d)for(M=p.length-1;M>=0;M--)$=Mat.transpose(Mat.inverse(p[M].transformMat)),N=Mat.matVecMult($,N);return N}],h),n.addChild(u),u.glider=n):(c=function(v,y,b){var _=Math.floor(v),N,M,C,$,w,A,X,O,G,R,B,F;if(y.bezierDegree===1)_===y.numberPoints-1&&_--;else if(y.bezierDegree===3)y.elType==="sector"?(B=y.points.slice(3,y.numberPoints-3),F=B.length):(B=y.points,F=B.length),_=Math.floor(v*(F-1)/3)*3,C=(v*(F-1)-_)/3,_>=F-1&&(_=F-4,C=1);else return 0;if(_<0)return 1;switch(y.bezierDegree===1?(N=y.points[_].usrCoords,M=y.points[_+1].usrCoords):($=B[_].usrCoords,w=B[_+1].usrCoords,A=B[_+2].usrCoords,X=B[_+3].usrCoords,O=(1-C)*(1-C)*(w[1]-$[1])+2*(1-C)*C*(A[1]-w[1])+C*C*(X[1]-A[1]),G=(1-C)*(1-C)*(w[2]-$[2])+2*(1-C)*C*(A[2]-w[2])+C*C*(X[2]-A[2]),R=Mat.hypot(O,G),O/=R,G/=R,N=n.coords.usrCoords,M=[1,N[1]+O,N[2]+G]),b){case 0:return N[2]*M[1]-N[1]*M[2];case 1:return M[2]-N[2];case 2:return N[1]-M[1];default:return[N[2]*M[1]-N[1]*M[2],M[2]-N[2],N[1]-M[1]]}},u=t.create("line",[function(){var v;return n.type===Const.OBJECT_TYPE_GLIDER?v=n.position:v=Geometry.projectPointToCurve(n,s,t)[1],c(v,s)}],h),n.addChild(u),u.glider=n)}else s.type===Const.OBJECT_TYPE_TURTLE?(u=t.create("line",[function(){var v,y;for(n.type===Const.OBJECT_TYPE_GLIDER?y=n.position:y=Geometry.projectPointToTurtle(n,s,t)[1],v=Math.floor(y),o=0;o<s.objects.length;o++)if(l=s.objects[o],l.type===Const.OBJECT_TYPE_CURVE){if(v<l.numberPoints)break;v-=l.numberPoints}return v===l.numberPoints-1&&v--,v<0?[1,0,0]:[l.Y(v)*l.X(v+1)-l.X(v)*l.Y(v+1),l.Y(v+1)-l.Y(v),l.X(v)-l.X(v+1)]}],h),n.addChild(u),u.glider=n):(s.elementClass===Const.OBJECT_CLASS_CIRCLE||s.type===Const.OBJECT_TYPE_CONIC)&&(u=t.create("line",[function(){return Mat.matVecMult(s.quadraticform,n.coords.usrCoords)}],h),n.addChild(u),u.glider=n);if(!JXG$1.exists(u))throw new Error("JSXGraph: Couldn't create tangent with the given parents.");return u.elType="tangent",u.type=Const.OBJECT_TYPE_TANGENT,u.setParents(r),u};JXG$1.createNormal=function(t,r,a){var n,s,o,l,u,h,c,f,d,p,v=[];for(l=0;l<r.length;++l)r[l]=t.select(r[l]);if(r.length===1)n=r[0],s=n.slideObject;else if(r.length===2)if(JXG$1.isPointType(t,r[0]))n=JXG$1.providePoints(t,[r[0]],a,"point")[0],s=r[1];else if(JXG$1.isPointType(t,r[1]))s=r[0],n=JXG$1.providePoints(t,[r[1]],a,"point")[0];else throw new Error("JSXGraph: Can't create normal with parent types '"+typeof r[0]+"' and '"+typeof r[1]+`'.
Possible parent types: [point,line], [point,circle], [glider]`);else throw new Error("JSXGraph: Can't create normal with parent types '"+typeof r[0]+"' and '"+typeof r[1]+`'.
Possible parent types: [point,line], [point,circle], [glider]`);if(u=JXG$1.copyAttributes(a,t.options,"normal"),s.elementClass===Const.OBJECT_CLASS_LINE)c=JXG$1.copyAttributes(a,t.options,"normal","point"),h=t.create("point",[function(){var y=Mat.crossProduct([1,0,0],s.stdform);return[y[0],-y[2],y[1]]}],c),h.isDraggable=!0,o=t.create("line",[n,h],u),o.point=h,o.subs={point:h},o.inherits.push(h);else if(s.elementClass===Const.OBJECT_CLASS_CIRCLE)o=t.create("line",[s.midpoint,n],u);else if(s.elementClass===Const.OBJECT_CLASS_CURVE){if(d=s.getTransformationSource(),p=d[0],p)for(v.push(s);d[0]&&JXG$1.exists(d[1]._transformationSource);)v.push(d[1]),d=d[1].getTransformationSource();s.evalVisProp("curvetype")!=="plot"||p?o=t.create("line",[function(){var y=s.X,b=s.Y,_,N,M,C,$,w,A,X;if(n.type===Const.OBJECT_TYPE_GLIDER?X=n.position:s.evalVisProp("curvetype")==="functiongraph"?X=n.X():X=Geometry.projectPointToCurve(n,s,t)[1],A=n.Coords(!0),p){for($=v[v.length-1]._transformationSource,y=$.X,b=$.Y,C=0;C<v.length;C++)v[C].updateTransformMatrix(),w=Mat.inverse(v[C].transformMat),A=Mat.matVecMult(w,A);n.type!==Const.OBJECT_TYPE_GLIDER&&(A[1]/=A[0],A[2]/=A[0],A[0]/=A[0],X=Geometry.projectCoordsToCurve(A[1],A[2],0,$,t)[1])}if(_=Numerics.D(b)(X),N=Numerics.D(y)(X),M=[-A[1]*N-A[2]*_,A[0]*N,A[0]*_],p)for(C=v.length-1;C>=0;C--)w=Mat.transpose(Mat.inverse(v[C].transformMat)),M=Mat.matVecMult(w,M);return M}],u):(f=function(y,b,_){var N=Math.floor(y),M,C,$,w,A,X,O,G,R,B,F,U,q,ee,z,Y;if(b.bezierDegree===1)N===b.numberPoints-1&&N--,w=y;else if(b.bezierDegree===3)b.elType==="sector"?(z=b.points.slice(3,b.numberPoints-3),Y=z.length):(z=b.points,Y=z.length),N=Math.floor(y*(Y-1)/3)*3,w=(y*(Y-1)-N)/3,N>=Y-1&&(N=Y-4,w=1);else return 0;if(N<0)return 1;switch(M=w-N,b.bezierDegree===1?(C=b.points[N].usrCoords,$=b.points[N+1].usrCoords,q=[C[0]+M*($[0]-C[0]),C[1]+M*($[1]-C[1]),C[2]+M*($[2]-C[2])],U=Mat.crossProduct(C,$),ee=Mat.crossProduct([1,0,0],U),ee=[ee[0],-ee[2],ee[1]],U=Mat.crossProduct(q,ee)):(A=z[N].usrCoords,X=z[N+1].usrCoords,O=z[N+2].usrCoords,G=z[N+3].usrCoords,R=(1-w)*(1-w)*(X[1]-A[1])+2*(1-w)*w*(O[1]-X[1])+w*w*(G[1]-O[1]),B=(1-w)*(1-w)*(X[2]-A[2])+2*(1-w)*w*(O[2]-X[2])+w*w*(G[2]-O[2]),F=Mat.hypot(R,B),R/=F,B/=F,C=n.coords.usrCoords,$=[1,C[1]-B,C[2]+R],U=[C[2]*$[1]-C[1]*$[2],$[2]-C[2],C[1]-$[1]]),_){case 0:return U[0];case 1:return U[1];case 2:return U[2];default:return U}},o=t.create("line",[function(){var y;return n.type===Const.OBJECT_TYPE_GLIDER?y=n.position:y=Geometry.projectPointToCurve(n,s,t)[1],f(y,s)}],u),n.addChild(o),o.glider=n)}else if(s.type===Const.OBJECT_TYPE_TURTLE)o=t.create("line",[function(){var y,b,_=Math.floor(n.position),N=n.position-_;for(b=0;b<s.objects.length;b++)if(y=s.objects[b],y.type===Const.OBJECT_TYPE_CURVE){if(_<y.numberPoints)break;_-=y.numberPoints}return _===y.numberPoints-1&&(_-=1,N=1),_<0?1:(y.Y(_)+N*(y.Y(_+1)-y.Y(_)))*(y.Y(_)-y.Y(_+1))-(y.X(_)+N*(y.X(_+1)-y.X(_)))*(y.X(_+1)-y.X(_))},function(){var y,b,_=Math.floor(n.position);for(b=0;b<s.objects.length;b++)if(y=s.objects[b],y.type===Const.OBJECT_TYPE_CURVE){if(_<y.numberPoints)break;_-=y.numberPoints}return _===y.numberPoints-1&&(_-=1),_<0?0:y.X(_+1)-y.X(_)},function(){var y,b,_=Math.floor(n.position);for(b=0;b<s.objects.length;b++)if(y=s.objects[b],y.type===Const.OBJECT_TYPE_CURVE){if(_<y.numberPoints)break;_-=y.numberPoints}return _===y.numberPoints-1&&(_-=1),_<0?0:y.Y(_+1)-y.Y(_)}],u);else throw new Error("JSXGraph: Can't create normal with parent types '"+typeof r[0]+"' and '"+typeof r[1]+`'.
Possible parent types: [point,line], [point,circle], [glider]`);return o.elType="normal",o.setParents(r),JXG$1.exists(n._is_new)?(o.addChild(n),delete n._is_new):n.addChild(o),s.addChild(o),o};JXG$1.createRadicalAxis=function(t,r,a){var n,s,o;if(r.length!==2||r[0].elementClass!==Const.OBJECT_CLASS_CIRCLE||r[1].elementClass!==Const.OBJECT_CLASS_CIRCLE)throw new Error("JSXGraph: Can't create 'radical axis' with parent types '"+typeof r[0]+"' and '"+typeof r[1]+`'.
Possible parent type: [circle,circle]`);return s=t.select(r[0]),o=t.select(r[1]),n=t.create("line",[function(){var l=s.stdform,u=o.stdform;return Mat.matVecMult(Mat.transpose([l.slice(0,3),u.slice(0,3)]),[u[3],-l[3]])}],a),n.elType="radicalaxis",n.setParents([s.id,o.id]),s.addChild(n),o.addChild(n),n};JXG$1.createPolarLine=function(t,r,a){var n,s,o,l,u,h,c;if(r.length>1&&(l=r[0].type===Const.OBJECT_TYPE_CONIC||r[0].elementClass===Const.OBJECT_CLASS_CIRCLE,u=r[1].type===Const.OBJECT_TYPE_CONIC||r[1].elementClass===Const.OBJECT_CLASS_CIRCLE,h=JXG$1.isPoint(r[0]),c=JXG$1.isPoint(r[1])),r.length!==2||!(l&&c||h&&u))throw new Error("JSXGraph: Can't create 'polar line' with parent types '"+typeof r[0]+"' and '"+typeof r[1]+`'.
Possible parent type: [conic|circle,point], [point,conic|circle]`);return c?(s=t.select(r[0]),o=t.select(r[1])):(s=t.select(r[1]),o=t.select(r[0])),n=t.create("tangent",[s,o],a),n.elType="polarline",n};JXG$1.createTangentTo=function(t,r,a){var n,s,o,l,u,h,c;if(o=t.select(r[0]),l=JXG$1.providePoints(t,r[1],a,"point")[0],u=JXG$1.def(r[2],0),o.type!==Const.OBJECT_TYPE_CIRCLE&&o.type!==Const.OBJECT_TYPE_CONIC||l.elementClass!==Const.OBJECT_CLASS_POINT)throw new Error("JSXGraph: Can't create tangentto with parent types '"+typeof r[0]+"' and '"+typeof r[1]+"' and '"+typeof r[2]+`'.
Possible parent types: [circle|conic,point,number]`);return s=JXG$1.copyAttributes(a,t.options,"tangentto"),c=t.create("polar",[o,l],s.polar),h=t.create("intersection",[c,o,u],s.point),n=t.create("tangent",[o,h],s),n.point=h,n.polar=c,n.elType="tangentto",n};JXG$1.registerElement("tangent",JXG$1.createTangent);JXG$1.registerElement("normal",JXG$1.createNormal);JXG$1.registerElement("tangentto",JXG$1.createTangentTo);JXG$1.registerElement("polar",JXG$1.createTangent);JXG$1.registerElement("radicalaxis",JXG$1.createRadicalAxis);JXG$1.registerElement("polarline",JXG$1.createPolarLine);JXG$1.Line;JXG$1.Group=function(t,r,a,n,s){var o,l,u,h;for(this.board=t,this.objects={},o=this.board.numObjects,this.board.numObjects+=1,r===""||!JXG$1.exists(r)?this.id=this.board.id+"Group"+o:this.id=r,this.board.groups[this.id]=this,this.type=Const.OBJECT_TYPE_POINT,this.elementClass=Const.OBJECT_CLASS_POINT,a===""||!JXG$1.exists(a)?this.name="group_"+this.board.generateName(this):this.name=a,delete this.type,this.coords={},this.needsRegularUpdate=s.needsregularupdate,this.rotationCenter="centroid",this.scaleCenter=null,this.rotationPoints=[],this.translationPoints=[],this.scalePoints=[],this.scaleDirections={},this.parents=[],JXG$1.isArray(n)?l=n:l=Array.prototype.slice.call(arguments,3),u=0;u<l.length;u++)h=this.board.select(l[u]),!h.evalVisProp("fixed")&&JXG$1.exists(h.coords)&&this.addPoint(h);this.methodMap={ungroup:"ungroup",add:"addPoint",addPoint:"addPoint",addPoints:"addPoints",addGroup:"addGroup",remove:"removePoint",removePoint:"removePoint",setAttribute:"setAttribute",setProperty:"setAttribute"}};JXG$1.extend(JXG$1.Group.prototype,{ungroup:function(){var t,r,a;for(t in this.objects)this.objects.hasOwnProperty(t)&&(r=this.objects[t].point,JXG$1.isArray(r.groups)&&(a=JXG$1.indexOf(r.groups,this.id),a>=0&&delete r.groups[a]));return this.objects={},this},addParents:function(t){var r,a,n;for(JXG$1.isArray(t)?n=t:n=arguments,a=n.length,r=0;r<a;++r)JXG$1.isId(this.board,n[r])?this.parents.push(n[r]):JXG$1.exists(n[r].id)&&this.parents.push(n[r].id);this.parents=JXG$1.uniqueArray(this.parents)},setParents:function(t){return this.parents=[],this.addParents(t),this},getParents:function(){return JXG$1.isArray(this.parents)?this.parents:[]},_updateCoordsCache:function(t){var r;t!==""&&JXG$1.exists(this.objects[t])&&(r=this.objects[t].point,this.coords[r.id]={usrCoords:r.coords.usrCoords.slice(0)})},update:function(){var t,r,a,n,s,o,l,u,h,c,f,d,p=null;if(!this.needsUpdate)return this;if(r=this._update_find_drag_type(),r.action==="nothing")return this._updateCoordsCache(r.id),this;if(p=this.objects[r.id].point,r.action==="translation"){if(c=[p.coords.usrCoords[1]-this.coords[r.id].usrCoords[1],p.coords.usrCoords[2]-this.coords[r.id].usrCoords[2]],p.elementClass!==Const.OBJECT_CLASS_POINT){for(c.unshift(0),t=0;t<p.transformations.length;t++)c=Mat.matVecMult(p.transformations[t].matrix,c);c.shift()}f=this.board.create("transform",c,{type:"translate"}),f.update()}else if(r.action==="rotation"||r.action==="scaling"){if(r.action==="rotation"?n="rotationCenter":n="scaleCenter",JXG$1.exists(this[n].coords))d=this[n].coords.usrCoords.slice(1);else if(this[n]==="centroid")d=this._update_centroid_center();else if(JXG$1.isArray(this[n]))d=this[n];else if(JXG$1.isFunction(this[n]))d=this[n]();else return JXG$1.debug("Group.update: No valid center for this transformation, get out of here."),this;if(r.action==="rotation")h=Geometry.rad(this.coords[r.id].usrCoords.slice(1),d,this.objects[r.id].point),c=this.board.create("transform",[h,d[0],d[1]],{type:"rotate"}),c.update();else if(r.action==="scaling"){if(o=Geometry.distance(this.coords[r.id].usrCoords.slice(1),d),Math.abs(o)<Mat.eps)return this;o=Geometry.distance(p.coords.usrCoords.slice(1),d)/o,l=this.scaleDirections[r.id].indexOf("x")>=0?o:1,u=this.scaleDirections[r.id].indexOf("y")>=0?o:1,c=this.board.create("transform",[1,0,0,d[0]*(1-l),l,0,d[1]*(1-u),0,u],{type:"generic"}),c.update()}else return this}for(a in this.objects)p=this.objects[a].point,p.elementClass!==Const.OBJECT_CLASS_POINT&&(JXG$1.exists(c.board)?c.meltTo(p):r.id!==p.id&&f.meltTo(p));this._update_apply_transformation(r,c),this.needsUpdate=!1;for(a in this.objects)if(this.objects.hasOwnProperty(a))for(s in this.objects[a].descendants)this.objects[a].descendants.hasOwnProperty(s)&&(this.objects[a].descendants.needsUpdate=this.objects[a].descendants.needsRegularUpdate||this.board.needsFullUpdate);this.board.updateElements(r);for(a in this.objects)this.objects.hasOwnProperty(a)&&this._updateCoordsCache(a);return this},_update_find_drag_type:function(){var t,r,a="nothing",n=[],s;for(t in this.objects)this.objects.hasOwnProperty(t)&&(r=this.objects[t].point,r.coords.distance(Const.COORDS_BY_USER,this.coords[t])>Mat.eps&&n.push(r.id));return n.length===0?{action:a,id:"",changed:n}:(s=n[0],r=this.objects[s].point,n.length>1?a="translation":JXG$1.isInArray(this.rotationPoints,r)&&JXG$1.exists(this.rotationCenter)?a="rotation":JXG$1.isInArray(this.scalePoints,r)&&JXG$1.exists(this.scaleCenter)?a="scaling":JXG$1.isInArray(this.translationPoints,r)&&(a="translation"),{action:a,id:s,changed:n})},_update_centroid_center:function(){var t,r,a;t=[0,0],r=0;for(a in this.coords)this.coords.hasOwnProperty(a)&&(t[0]+=this.coords[a].usrCoords[1],t[1]+=this.coords[a].usrCoords[2],++r);return r>0&&(t[0]/=r,t[1]/=r),t},_update_apply_transformation:function(t,r){var a,n;for(a in this.objects)this.objects.hasOwnProperty(a)&&(JXG$1.exists(this.board.objects[a])?(n=this.objects[a].point,n.id!==t.id?t.action==="translation"?JXG$1.isInArray(t.changed,n.id)||n.elementClass===Const.OBJECT_CLASS_POINT&&n.coords.setCoordinates(Const.COORDS_BY_USER,[this.coords[a].usrCoords[1]+r[0],this.coords[a].usrCoords[2]+r[1]]):(t.action==="rotation"||t.action==="scaling")&&n.elementClass===Const.OBJECT_CLASS_POINT&&r.applyOnce([n]):(t.action==="rotation"||t.action==="scaling")&&n.coords.setCoordinates(Const.COORDS_BY_USER,Mat.matVecMult(r.matrix,this.coords[n.id].usrCoords))):delete this.objects[a])},addPoint:function(t){return this.objects[t.id]={point:this.board.select(t)},this._updateCoordsCache(t.id),this.translationPoints.push(t),t.groups.push(this.id),t.groups=JXG$1.uniqueArray(t.groups),this},addPoints:function(t){var r;for(r=0;r<t.length;r++)this.addPoint(t[r]);return this},addGroup:function(t){var r;for(r in t.objects)t.objects.hasOwnProperty(r)&&this.addPoint(t.objects[r].point);return this},removePoint:function(t){return delete this.objects[t.id],this},setRotationCenter:function(t){return this.rotationCenter=t,this},setRotationPoints:function(t){return this._setActionPoints("rotation",t)},addRotationPoint:function(t){return this._addActionPoint("rotation",t)},removeRotationPoint:function(t){return this._removeActionPoint("rotation",t)},setTranslationPoints:function(t){return this._setActionPoints("translation",t)},addTranslationPoint:function(t){return this._addActionPoint("translation",t)},removeTranslationPoint:function(t){return this._removeActionPoint("translation",t)},setScaleCenter:function(t){return this.scaleCenter=t,this},setScalePoints:function(t,r){var a,n,s;for(JXG$1.isArray(t)?a=t:a=arguments,s=a.length,n=0;n<s;++n)this.scaleDirections[this.board.select(a[n]).id]=r||"xy";return this._setActionPoints("scale",t)},addScalePoint:function(t,r){return this._addActionPoint("scale",t),this.scaleDirections[this.board.select(t).id]=r||"xy",this},removeScalePoint:function(t){return this._removeActionPoint("scale",t)},_setActionPoints:function(t,r){var a,n,s;for(JXG$1.isArray(r)?a=r:a=arguments,s=a.length,this[t+"Points"]=[],n=0;n<s;++n)this._addActionPoint(t,a[n]);return this},_addActionPoint:function(t,r){return this[t+"Points"].push(this.board.select(r)),this},_removeActionPoint:function(t,r){var a=this[t+"Points"].indexOf(this.board.select(r));return a>-1&&this[t+"Points"].splice(a,1),this},setProperty:function(){JXG$1.deprecated("Group.setProperty","Group.setAttribute()"),this.setAttribute.apply(this,arguments)},setAttribute:function(){var t;for(t in this.objects)this.objects.hasOwnProperty(t)&&this.objects[t].point.setAttribute.apply(this.objects[t].point,arguments);return this}});JXG$1.createGroup=function(t,r,a){var n=JXG$1.copyAttributes(a,t.options,"group"),s=new JXG$1.Group(t,n.id,n.name,r,n);return s.elType="group",s.setParents(r),s};JXG$1.registerElement("group",JXG$1.createGroup);JXG$1.Group;JXG$1.Circle=function(t,r,a,n,s){this.constructor(t,s,Const.OBJECT_TYPE_CIRCLE,Const.OBJECT_CLASS_CIRCLE),this.method=r,this.midpoint=this.board.select(a),this.center=this.board.select(a),this.point2=null,this.radius=0,this.line=null,this.circle=null,this.points=[],r==="twoPoints"?(this.point2=t.select(n),this.radius=this.Radius()):r==="pointRadius"?(this.gxtterm=n,this.updateRadius=JXG$1.createFunction(n,this.board),this.updateRadius(),this.addParentsFromJCFunctions([this.updateRadius])):r==="pointLine"?(this.line=t.select(n),this.radius=this.line.point1.coords.distance(Const.COORDS_BY_USER,this.line.point2.coords)):r==="pointCircle"&&(this.circle=t.select(n),this.radius=this.circle.Radius()),this.id=this.board.setId(this,"C"),this.board.renderer.drawEllipse(this),this.board.finalizeAdding(this),this.createGradient(),this.elType="circle",this.createLabel(),JXG$1.exists(this.center._is_new)?(this.addChild(this.center),delete this.center._is_new):this.center.addChild(this),r==="pointRadius"?this.notifyParents(n):r==="pointLine"?this.line.addChild(this):r==="pointCircle"?this.circle.addChild(this):r==="twoPoints"&&(JXG$1.exists(this.point2._is_new)?(this.addChild(this.point2),delete this.point2._is_new):this.point2.addChild(this)),this.methodMap=JXG$1.deepCopy(this.methodMap,{setRadius:"setRadius",getRadius:"getRadius",Area:"Area",area:"Area",Perimeter:"Perimeter",Circumference:"Perimeter",radius:"Radius",Radius:"Radius",Diameter:"Diameter",center:"center",line:"line",point2:"point2"})};JXG$1.Circle.prototype=new GeometryElement;JXG$1.extend(JXG$1.Circle.prototype,{hasPoint:function(t,r){var a,n,s=this.center.coords.usrCoords,o=new Coords(Const.COORDS_BY_SCREEN,[t,r],this.board),l=this.Radius(),u,h,c;return JXG$1.isObject(this.evalVisProp("precision"))?(n=this.board._inputDevice,a=this.evalVisProp("precision."+n)):a=this.board.options.precision.hasPoint,u=s[1]-o.usrCoords[1],h=s[2]-o.usrCoords[2],c=Mat.hypot(u,h),a+=this.evalVisProp("strokewidth")*.5,a/=Math.sqrt(Math.abs(this.board.unitX*this.board.unitY)),this.evalVisProp("hasinnerpoints")?c<l+a:Math.abs(c-l)<a},generatePolynomial:function(t){var r=this.center.symbolic.x,a=this.center.symbolic.y,n=t.symbolic.x,s=t.symbolic.y,o=this.generateRadiusSquared();return o===""?[]:["(("+n+")-("+r+"))^2 + (("+s+")-("+a+"))^2 - ("+o+")"]},generateRadiusSquared:function(){var t,r,a,n,s,o,l="";return this.method==="twoPoints"?(t=this.center.symbolic.x,r=this.center.symbolic.y,a=this.point2.symbolic.x,n=this.point2.symbolic.y,l="(("+a+")-("+t+"))^2 + (("+n+")-("+r+"))^2"):this.method==="pointRadius"?JXG$1.isNumber(this.radius)&&(l=(this.radius*this.radius).toString()):this.method==="pointLine"?(a=this.line.point1.symbolic.x,n=this.line.point1.symbolic.y,s=this.line.point2.symbolic.x,o=this.line.point2.symbolic.y,l="(("+a+")-("+s+"))^2 + (("+n+")-("+o+"))^2"):this.method==="pointCircle"&&(l=this.circle.Radius()),l},update:function(){var t,r,a,n,s,o;if(this.needsUpdate)for(this.evalVisProp("trace")&&this.cloneToBackground(!0),this.method==="pointLine"?this.radius=this.line.point1.coords.distance(Const.COORDS_BY_USER,this.line.point2.coords):this.method==="pointCircle"?this.radius=this.circle.Radius():this.method==="pointRadius"&&(this.radius=this.updateRadius()),this.radius=Math.abs(this.radius),this.updateStdform(),this.updateQuadraticform(),a=this.center.coords.usrCoords[0],t=this.center.coords.usrCoords[1]/a,r=this.center.coords.usrCoords[2]/a,a/=a,n=this.Radius(),s=.551915024494,this.numberPoints=13,this.dataX=[t+n,t+n,t+n*s,t,t-n*s,t-n,t-n,t-n,t-n*s,t,t+n*s,t+n,t+n],this.dataY=[r,r+n*s,r+n,r+n,r+n,r+n*s,r,r-n*s,r-n,r-n,r-n,r-n*s,r],this.bezierDegree=3,o=0;o<this.numberPoints;o++)this.points[o]=new Coords(Const.COORDS_BY_USER,[this.dataX[o],this.dataY[o]],this.board);return this},updateQuadraticform:function(){var t=this.center,r=t.X(),a=t.Y(),n=this.Radius();this.quadraticform=[[r*r+a*a-n*n,-r,-a],[-r,1,0],[-a,0,1]]},updateStdform:function(){this.stdform[3]=.5,this.stdform[4]=this.Radius(),this.stdform[1]=-this.center.coords.usrCoords[1],this.stdform[2]=-this.center.coords.usrCoords[2],isFinite(this.stdform[4])||(this.stdform[0]=JXG$1.exists(this.point2)?-(this.stdform[1]*this.point2.coords.usrCoords[1]+this.stdform[2]*this.point2.coords.usrCoords[2]):0),this.normalize()},updateRenderer:function(){return this.needsUpdate?(this.visPropCalc.visible&&(this.isReal=!isNaN(this.center.coords.usrCoords[1]+this.center.coords.usrCoords[2]+this.Radius())&&this.center.isReal,this.isReal||this.updateVisibility(!1)),this.visPropCalc.visible&&this.board.renderer.updateEllipse(this),this.hasLabel&&this.visPropCalc.visible&&this.label&&this.label.visPropCalc.visible&&this.isReal&&(this.label.update(),this.board.renderer.updateText(this.label)),this.setDisplayRendNode(),this.needsUpdate=!1,this):this},notifyParents:function(t){JXG$1.isString(t)&&GeonextParser.findDependencies(this,t,this.board)},setRadius:function(t){return this.updateRadius=JXG$1.createFunction(t,this.board),this.addParentsFromJCFunctions([this.updateRadius]),this.board.update(),this},Radius:function(t){return JXG$1.exists(t)?(this.setRadius(t),this.Radius()):this.method==="twoPoints"?JXG$1.cmpArrays(this.point2.coords.usrCoords,[0,0,0])||JXG$1.cmpArrays(this.center.coords.usrCoords,[0,0,0])?NaN:this.center.Dist(this.point2):this.method==="pointLine"||this.method==="pointCircle"?this.radius:this.method==="pointRadius"?this.evalVisProp("nonnegativeonly")?Math.max(0,this.updateRadius()):Math.abs(this.updateRadius()):NaN},Diameter:function(){return 2*this.Radius()},getRadius:function(){return JXG$1.deprecated("Circle.getRadius()","Circle.Radius()"),this.Radius()},getTextAnchor:function(){return this.center.coords},getLabelAnchor:function(){var t,r,a,n,s,o,l=1.5,u=this.Radius(),h=this.center.coords.usrCoords,c=.7071067811865;if(!JXG$1.exists(this.label))return new Coords(Const.COORDS_BY_SCREEN,[NaN,NaN],this.board);if(a=this.label.evalVisProp("position"),!JXG$1.isString(a))return new Coords(Const.COORDS_BY_SCREEN,[NaN,NaN],this.board);if(a.indexOf("right")<0&&a.indexOf("left")<0)switch(this.evalVisProp("label.position")){case"lft":t=h[1]-u,r=h[2];break;case"llft":t=h[1]-c*u,r=h[2]-c*u;break;case"rt":t=h[1]+u,r=h[2];break;case"lrt":t=h[1]+c*u,r=h[2]-c*u;break;case"urt":t=h[1]+c*u,r=h[2]+c*u;break;case"top":t=h[1],r=h[2]+u;break;case"bot":t=h[1],r=h[2]-u;break;default:t=h[1]-c*u,r=h[2]+c*u;break}else return h=this.center.coords.scrCoords,n=JXG$1.parsePosition(a),s=JXG$1.parseNumber(n.pos,2*Math.PI,1),n.pos.indexOf("fr")<0&&n.pos.indexOf("%")<0&&(n.pos.indexOf("px")>=0?s=0:s*=Math.PI/180),o=1,n.side==="left"&&(o=-1),JXG$1.exists(this.label)&&(l=o*.5*this.label.evalVisProp("distance")),t=h[1]+(u*this.board.unitX+this.label.size[0]*l)*Math.cos(s),r=h[2]-(u*this.board.unitY+this.label.size[1]*l)*Math.sin(s),new Coords(Const.COORDS_BY_SCREEN,[t,r],this.board);return new Coords(Const.COORDS_BY_USER,[t,r],this.board)},cloneToBackground:function(){var t,r=this.Radius(),a=JXG$1.getCloneObject(this);return a.center={coords:this.center.coords},a.Radius=function(){return r},a.getRadius=function(){return r},t=this.board.renderer.enhancedRendering,this.board.renderer.enhancedRendering=!0,this.board.renderer.drawEllipse(a),this.board.renderer.enhancedRendering=t,this.traces[a.id]=a.rendNode,this},addTransform:function(t){var r,a=JXG$1.isArray(t)?t:[t],n=a.length;for(r=0;r<n;r++)this.center.transformations.push(a[r]),this.method==="twoPoints"&&this.point2.transformations.push(a[r]);return this},snapToGrid:function(){var t=this.evalVisProp("snaptogrid");return this.center.handleSnapToGrid(t,!0),this.method==="twoPoints"&&this.point2.handleSnapToGrid(t,!0),this},snapToPoints:function(){var t=this.evalVisProp("snaptopoints");return this.center.handleSnapToPoints(t),this.method==="twoPoints"&&this.point2.handleSnapToPoints(t),this},X:function(t){return this.Radius()*Math.cos(t*2*Math.PI)+this.center.coords.usrCoords[1]},Y:function(t){return this.Radius()*Math.sin(t*2*Math.PI)+this.center.coords.usrCoords[2]},Z:function(t){return 1},minX:function(){return 0},maxX:function(){return 1},Area:function(){var t=this.Radius();return t*t*Math.PI},Perimeter:function(){return 2*this.Radius()*Math.PI},bounds:function(){var t=this.center.coords.usrCoords,r=this.Radius();return[t[1]-r,t[2]+r,t[1]+r,t[2]-r]},getParents:function(){return this.parents.length===1?this.parents.concat(this.radius):this.parents}});JXG$1.createCircle=function(t,r,a){var n,s,o,l,u,h=!0,c=["center","point2"];if(s=[],u=t.select(r[0]),JXG$1.isObject(u)&&u.elementClass===Const.OBJECT_CLASS_CIRCLE&&JXG$1.isTransformationOrArray(r[1]))return l=JXG$1.copyAttributes(a,t.options,"circle"),n=JXG$1.createEllipse(t,[u.center,u.center,function(){return 2*u.Radius()}],l),n.addTransform(r[1]),n;for(o=0;o<r.length;o++)if(JXG$1.isPointType(t,r[o])){if(r.length<3?s.push(JXG$1.providePoints(t,[r[o]],a,"circle",[c[o]])[0]):s.push(JXG$1.providePoints(t,[r[o]],a,"point")[0]),s[s.length-1]===!1)throw new Error("JSXGraph: Can't create circle from this type. Please provide a point type.")}else s.push(r[o]);if(l=JXG$1.copyAttributes(a,t.options,"circle"),s.length===2&&JXG$1.isPoint(s[0])&&JXG$1.isPoint(s[1]))n=new JXG$1.Circle(t,"twoPoints",s[0],s[1],l);else if((JXG$1.isNumber(s[0])||JXG$1.isFunction(s[0])||JXG$1.isString(s[0]))&&JXG$1.isPoint(s[1]))n=new JXG$1.Circle(t,"pointRadius",s[1],s[0],l);else if((JXG$1.isNumber(s[1])||JXG$1.isFunction(s[1])||JXG$1.isString(s[1]))&&JXG$1.isPoint(s[0]))n=new JXG$1.Circle(t,"pointRadius",s[0],s[1],l);else if(s[0].elementClass===Const.OBJECT_CLASS_CIRCLE&&JXG$1.isPoint(s[1]))n=new JXG$1.Circle(t,"pointCircle",s[1],s[0],l);else if(s[1].elementClass===Const.OBJECT_CLASS_CIRCLE&&JXG$1.isPoint(s[0]))n=new JXG$1.Circle(t,"pointCircle",s[0],s[1],l);else if(s[0].elementClass===Const.OBJECT_CLASS_LINE&&JXG$1.isPoint(s[1]))n=new JXG$1.Circle(t,"pointLine",s[1],s[0],l);else if(s[1].elementClass===Const.OBJECT_CLASS_LINE&&JXG$1.isPoint(s[0]))n=new JXG$1.Circle(t,"pointLine",s[0],s[1],l);else if(r.length===3&&JXG$1.isPoint(s[0])&&JXG$1.isPoint(s[1])&&JXG$1.isPoint(s[2]))if(JXG$1.elements.circumcircle)n=JXG$1.elements.circumcircle(t,s,l);else throw new Error("JSXGraph: Can't create circle with three points. Please include the circumcircle element (element/composition).");else throw new Error("JSXGraph: Can't create circle with parent types '"+typeof r[0]+"' and '"+typeof r[1]+`'.
Possible parent types: [point,point], [point,number], [point,function], [point,circle], [point,point,point], [circle,transformation]`);for(n.isDraggable=h,n.setParents(s),n.elType="circle",o=0;o<s.length;o++)JXG$1.isPoint(s[o])&&n.inherits.push(s[o]);return n};JXG$1.registerElement("circle",JXG$1.createCircle);const Circle=JXG$1.Circle;JXG$1.createEllipse=function(t,r,a){var n,s,o,l,u,h,c,f=[],d=JXG$1.copyAttributes(a,t.options,"conic","foci"),p=JXG$1.copyAttributes(a,t.options,"conic","center"),v=JXG$1.copyAttributes(a,t.options,"conic");for(h=0;h<2;h++)if(r[h].length>1)f[h]=t.create("point",r[h],d);else if(JXG$1.isPoint(r[h]))f[h]=t.select(r[h]);else if(JXG$1.isFunction(r[h])&&JXG$1.isPoint(r[h]()))f[h]=r[h]();else if(JXG$1.isString(r[h]))f[h]=t.select(r[h]);else throw new Error("JSXGraph: Can't create Ellipse with parent types '"+typeof r[0]+"' and '"+typeof r[1]+`'.
Possible parent types: [point,point,point], [point,point,number|function]`);if(JXG$1.isNumber(r[2]))u=JXG$1.createFunction(r[2],t);else if(JXG$1.isFunction(r[2])&&JXG$1.isNumber(r[2]()))u=r[2];else{if(JXG$1.isPoint(r[2]))l=t.select(r[2]);else if(r[2].length>1)l=t.create("point",r[2],d);else if(JXG$1.isFunction(r[2])&&JXG$1.isPoint(r[2]()))l=r[2]();else if(JXG$1.isString(r[2]))l=t.select(r[2]);else throw new Error("JSXGraph: Can't create Ellipse with parent types '"+typeof r[0]+"' and '"+typeof r[1]+"' and '"+typeof r[2]+`'.
Possible parent types: [point,point,point], [point,point,number|function]`);u=function(){return l.Dist(f[0])+l.Dist(f[1])}}for(JXG$1.exists(r[4])||(r[4]=2*Math.PI),JXG$1.exists(r[3])||(r[3]=0),o=t.create("point",[function(){return(f[0].X()+f[1].X())*.5},function(){return(f[0].Y()+f[1].Y())*.5}],p),s=t.create("curve",[function(y){return 0},function(y){return 0},r[3],r[4]],v),s.majorAxis=u,c=s.hasPoint,n=function(y,b){var _,N,M,C,$,w,A,X,O;b||(_=u(),N=_*_,M=f[0].X(),C=f[0].Y(),$=f[1].X(),w=f[1].Y(),A=M-$,X=C-w,O=(N-M*M-C*C+$*$+w*w)/(2*_),s.quadraticform=[[O*O-$*$-w*w,O*A/_+$,O*X/_+w],[O*A/_+$,A*A/N-1,A*X/N],[O*X/_+w,A*X/N,X*X/N-1]])},s.X=function(y,b){var _=u(),N=f[1].Dist(f[0]),M=.5*(N*N-_*_)/(N*Math.cos(y)-_),C=Math.atan2(f[1].Y()-f[0].Y(),f[1].X()-f[0].X());return b||n(y,b),f[0].X()+Math.cos(C+y)*M},s.Y=function(y,b){var _=u(),N=f[1].Dist(f[0]),M=.5*(N*N-_*_)/(N*Math.cos(y)-_),C=Math.atan2(f[1].Y()-f[0].Y(),f[1].X()-f[0].X());return f[0].Y()+Math.sin(C+y)*M},s.midpoint=s.center=o,s.type=Const.OBJECT_TYPE_CONIC,s.subs={center:s.center},s.inherits.push(s.center,f[0],f[1]),JXG$1.isPoint(l)&&s.inherits.push(l),s.hasPoint=function(y,b){var _,N,M,C,$;return this.evalVisProp("hasinnerpoints")?(_=f[0].coords,N=f[1].coords,M=this.majorAxis(),C=new Coords(Const.COORDS_BY_SCREEN,[y,b],this.board),$=C.distance(Const.COORDS_BY_USER,_)+C.distance(Const.COORDS_BY_USER,N),$<=M):c.apply(this,arguments)},o.addChild(s),h=0;h<2;h++)JXG$1.isPoint(f[h])&&f[h].addChild(s);return JXG$1.isPoint(l)&&l.addChild(s),s.setParents(r),s};JXG$1.createHyperbola=function(t,r,a){var n,s,o,l,u,h,c=[],f=JXG$1.copyAttributes(a,t.options,"conic","foci"),d=JXG$1.copyAttributes(a,t.options,"conic","center"),p=JXG$1.copyAttributes(a,t.options,"conic");for(h=0;h<2;h++)if(r[h].length>1)c[h]=t.create("point",r[h],f);else if(JXG$1.isPoint(r[h]))c[h]=t.select(r[h]);else if(JXG$1.isFunction(r[h])&&JXG$1.isPoint(r[h]()))c[h]=r[h]();else if(JXG$1.isString(r[h]))c[h]=t.select(r[h]);else throw new Error("JSXGraph: Can't create Hyperbola with parent types '"+typeof r[0]+"' and '"+typeof r[1]+`'.
Possible parent types: [point,point,point], [point,point,number|function]`);if(JXG$1.isNumber(r[2]))u=JXG$1.createFunction(r[2],t);else if(JXG$1.isFunction(r[2])&&JXG$1.isNumber(r[2]()))u=r[2];else{if(JXG$1.isPoint(r[2]))l=t.select(r[2]);else if(r[2].length>1)l=t.create("point",r[2],f);else if(JXG$1.isFunction(r[2])&&JXG$1.isPoint(r[2]()))l=r[2]();else if(JXG$1.isString(r[2]))l=t.select(r[2]);else throw new Error("JSXGraph: Can't create Hyperbola with parent types '"+typeof r[0]+"' and '"+typeof r[1]+"' and '"+typeof r[2]+`'.
Possible parent types: [point,point,point], [point,point,number|function]`);u=function(){return l.Dist(c[0])-l.Dist(c[1])}}for(JXG$1.exists(r[4])||(r[4]=1.0001*Math.PI),JXG$1.exists(r[3])||(r[3]=-1.0001*Math.PI),o=t.create("point",[function(){return(c[0].X()+c[1].X())*.5},function(){return(c[0].Y()+c[1].Y())*.5}],d),s=t.create("curve",[function(v){return 0},function(v){return 0},r[3],r[4]],p),s.majorAxis=u,n=function(v,y){var b,_,N,M,C,$,w,A,X;y||(b=u(),_=b*b,N=c[0].X(),M=c[0].Y(),C=c[1].X(),$=c[1].Y(),w=N-C,A=M-$,X=(_-N*N-M*M+C*C+$*$)/(2*b),s.quadraticform=[[X*X-C*C-$*$,X*w/b+C,X*A/b+$],[X*w/b+C,w*w/_-1,w*A/_],[X*A/b+$,w*A/_,A*A/_-1]])},s.X=function(v,y){var b=u(),_=c[1].Dist(c[0]),N=.5*(_*_-b*b)/(_*Math.cos(v)+b),M=Math.atan2(c[1].Y()-c[0].Y(),c[1].X()-c[0].X());return y||n(v,y),c[0].X()+Math.cos(M+v)*N},s.Y=function(v,y){var b=u(),_=c[1].Dist(c[0]),N=.5*(_*_-b*b)/(_*Math.cos(v)+b),M=Math.atan2(c[1].Y()-c[0].Y(),c[1].X()-c[0].X());return c[0].Y()+Math.sin(M+v)*N},s.midpoint=s.center=o,s.subs={center:s.center},s.inherits.push(s.center,c[0],c[1]),JXG$1.isPoint(l)&&s.inherits.push(l),s.type=Const.OBJECT_TYPE_CONIC,o.addChild(s),h=0;h<2;h++)JXG$1.isPoint(c[h])&&c[h].addChild(s);return JXG$1.isPoint(l)&&l.addChild(s),s.setParents(r),s};JXG$1.createParabola=function(t,r,a){var n,s,o,l=r[0],u=r[1],h=JXG$1.copyAttributes(a,t.options,"conic","foci"),c=JXG$1.copyAttributes(a,t.options,"conic","center"),f=JXG$1.copyAttributes(a,t.options,"conic"),d;if(r[0].length>1)l=t.create("point",r[0],h);else if(JXG$1.isPoint(r[0]))l=t.select(r[0]);else if(JXG$1.isFunction(r[0])&&JXG$1.isPoint(r[0]()))l=r[0]();else if(JXG$1.isString(r[0]))l=t.select(r[0]);else throw new Error("JSXGraph: Can't create Parabola with parent types '"+typeof r[0]+"' and '"+typeof r[1]+`'.
Possible parent types: [point,line]`);return JXG$1.isArray(u)&&u.length===2&&(d=JXG$1.copyAttributes(a,t.options,"conic","line"),u=t.create("line",u,d)),JXG$1.exists(r[3])||(r[3]=2*Math.PI),JXG$1.exists(r[2])||(r[2]=0),o=t.create("point",[function(){return Geometry.projectPointToLine(l,u,t).usrCoords}],c),s=t.create("curve",[function(p){return 0},function(p){return 0},r[2],r[3]],f),s.midpoint=s.center=o,s.subs={center:s.center},s.inherits.push(s.center),n=function(p,v){var y,b,_,N,M,C;v||(y=u.stdform[1],b=u.stdform[2],_=u.stdform[0],N=y*y+b*b,M=l.X(),C=l.Y(),s.quadraticform=[[_*_-N*(M*M+C*C),_*y+N*M,_*b+N*C],[_*y+N*M,-b*b,y*b],[_*b+N*C,y*b,-y*y]])},s.X=function(p,v){var y,b,_=u.getAngle(),N=Geometry.distPointLine(l.coords.usrCoords,u.stdform),M=u.point1.coords.usrCoords,C=u.point2.coords.usrCoords,$=l.coords.usrCoords;return M[0]===0?M=[1,C[1]+u.stdform[2],C[2]-u.stdform[1]]:C[0]===0&&(C=[1,M[1]+u.stdform[2],M[2]-u.stdform[1]]),b=(C[1]-M[1])*($[2]-M[2])-(C[2]-M[2])*($[1]-M[1])>=0?1:-1,y=b*N/(1-Math.sin(p)),v||n(p,v),l.X()+Math.cos(p+_)*y},s.Y=function(p,v){var y,b,_=u.getAngle(),N=Geometry.distPointLine(l.coords.usrCoords,u.stdform),M=u.point1.coords.usrCoords,C=u.point2.coords.usrCoords,$=l.coords.usrCoords;return M[0]===0?M=[1,C[1]+u.stdform[2],C[2]-u.stdform[1]]:C[0]===0&&(C=[1,M[1]+u.stdform[2],M[2]-u.stdform[1]]),b=(C[1]-M[1])*($[2]-M[2])-(C[2]-M[2])*($[1]-M[1])>=0?1:-1,y=b*N/(1-Math.sin(p)),l.Y()+Math.sin(p+_)*y},s.type=Const.OBJECT_TYPE_CONIC,o.addChild(s),JXG$1.isPoint(l)&&(l.addChild(s),s.inherits.push(l)),u.addChild(s),s.setParents(r),s};JXG$1.createConic=function(t,r,a){var n,s,o,l,u,h,c,f,d,p,v,y,b,_,N=[[1,0,0],[0,1,0],[0,0,1]],M=[[1,0,0],[0,1,0],[0,0,1]],C=[],$=[],w=JXG$1.copyAttributes(a,t.options,"conic","point"),A=JXG$1.copyAttributes(a,t.options,"conic","center"),X=JXG$1.copyAttributes(a,t.options,"conic");if(r.length===5)_=!0;else if(r.length===6)_=!1;else throw new Error("JSXGraph: Can't create generic Conic with "+r.length+" parameters.");if(_)for(y=0;y<5;y++)if(r[y].length>1)C[y]=t.create("point",r[y],w);else if(JXG$1.isPoint(r[y]))C[y]=t.select(r[y]);else if(JXG$1.isFunction(r[y])&&JXG$1.isPoint(r[y]()))C[y]=r[y]();else if(JXG$1.isString(r[y]))C[y]=t.select(r[y]);else throw new Error("JSXGraph: Can't create Conic section with parent types '"+typeof r[y]+`'.
Possible parent types: [point,point,point,point,point], [a00,a11,a22,a01,a02,a12]`);else b=[[0,0,0],[0,0,0],[0,0,0]],b[0][0]=JXG$1.isFunction(r[2])?function(){return r[2]()}:function(){return r[2]},b[0][1]=JXG$1.isFunction(r[4])?function(){return r[4]()}:function(){return r[4]},b[0][2]=JXG$1.isFunction(r[5])?function(){return r[5]()}:function(){return r[5]},b[1][1]=JXG$1.isFunction(r[0])?function(){return r[0]()}:function(){return r[0]},b[1][2]=JXG$1.isFunction(r[3])?function(){return r[3]()}:function(){return r[3]},b[2][2]=JXG$1.isFunction(r[1])?function(){return r[1]()}:function(){return r[1]};if(u=function(O){var G,R;for(G=0;G<3;G++)for(R=G;R<3;R++)O[G][R]+=O[R][G];for(G=0;G<3;G++)for(R=0;R<G;R++)O[G][R]=O[R][G];return O},l=function(O,G){var R,B,F=[[0,0,0],[0,0,0],[0,0,0]];for(R=0;R<3;R++)for(B=0;B<3;B++)F[R][B]=O[R]*G[B];return u(F)},o=function(O,G,R){var B,F,U,q,ee,z=[[0,0,0],[0,0,0],[0,0,0]];for(ee=Mat.matVecMult(G,R),U=Mat.innerProduct(R,ee),ee=Mat.matVecMult(O,R),q=Mat.innerProduct(R,ee),B=0;B<3;B++)for(F=0;F<3;F++)z[B][F]=U*O[B][F]-q*G[B][F];return z},s=t.create("curve",[function(O){return 0},function(O){return 0},0,2*Math.PI],X),n=function(O,G){var R,B,F;if(!G){if(_){for(R=0;R<5;R++)$[R]=C[R].coords.usrCoords;p=l(Mat.crossProduct($[0],$[1]),Mat.crossProduct($[2],$[3])),v=l(Mat.crossProduct($[0],$[2]),Mat.crossProduct($[1],$[3])),M=o(p,v,$[4])}else for(R=0;R<3;R++)for(B=R;B<3;B++)M[R][B]=b[R][B](),B>R&&(M[B][R]=M[R][B]);s.quadraticform=M,h=Numerics.Jacobi(M),h[0][0][0]<0&&(h[0][0][0]*=-1,h[0][1][1]*=-1,h[0][2][2]*=-1),N=h[1],d=Math.sqrt(Math.abs(h[0][0][0])),c=Math.sqrt(Math.abs(h[0][1][1])),f=Math.sqrt(Math.abs(h[0][2][2]))}return h[0][1][1]<=0&&h[0][2][2]<=0?F=Mat.matVecMult(N,[1/d,Math.cos(O)/c,Math.sin(O)/f]):h[0][1][1]<=0&&h[0][2][2]>0?F=Mat.matVecMult(N,[Math.cos(O)/d,1/c,Math.sin(O)/f]):h[0][2][2]<0&&(F=Mat.matVecMult(N,[Math.sin(O)/d,Math.cos(O)/c,1/f])),JXG$1.exists(F)?(F[1]/=F[0],F[2]/=F[0],F[0]=1):F=[1,NaN,NaN],F},s.X=function(O,G){return n(O,G)[1]},s.Y=function(O,G){return n(O,G)[2]},s.midpoint=t.create("point",[function(){var O=s.quadraticform;return[O[1][1]*O[2][2]-O[1][2]*O[1][2],O[1][2]*O[0][2]-O[2][2]*O[0][1],O[0][1]*O[1][2]-O[1][1]*O[0][2]]}],A),s.type=Const.OBJECT_TYPE_CONIC,s.center=s.midpoint,s.subs={center:s.center},s.inherits.push(s.center),s.inherits=s.inherits.concat(C),_){for(y=0;y<5;y++)JXG$1.isPoint(C[y])&&C[y].addChild(s);s.setParents(r)}return s.addChild(s.center),s};JXG$1.registerElement("ellipse",JXG$1.createEllipse);JXG$1.registerElement("hyperbola",JXG$1.createHyperbola);JXG$1.registerElement("parabola",JXG$1.createParabola);JXG$1.registerElement("conic",JXG$1.createConic);JXG$1.Polygon=function(t,r,a){this.constructor(t,a,Const.OBJECT_TYPE_POLYGON,Const.OBJECT_CLASS_AREA);var n,s,o,l,u,h=JXG$1.copyAttributes(a,t.options,"polygon","borders");for(this.withLines=a.withlines,this.attr_line=h,this.vertices=[],n=0;n<r.length;n++)this.vertices[n]=this.board.select(r[n]),this.vertices[n]._is_new&&(delete this.vertices[n]._is_new,this.vertices[n]._is_new_pol=!0);if(this.vertices.length>0&&this.vertices[this.vertices.length-1].id!==this.vertices[0].id&&this.vertices.push(this.vertices[0]),this.borders=[],this.withLines)for(o=this.vertices.length-1,l=0;l<o;l++)n=(l+1)%o,h.id=h.ids&&h.ids[n],h.name=h.names&&h.names[n],h.strokecolor=JXG$1.isArray(h.colors)&&h.colors[n%h.colors.length]||h.strokecolor,h.visible=JXG$1.exists(a.borders.visible)?a.borders.visible:a.visible,h.strokecolor===!1&&(h.strokecolor="none"),s=t.create("segment",[this.vertices[n],this.vertices[n+1]],h),s.dump=!1,this.borders[n]=s,s.parentPolygon=this,this.addChild(s);for(this.inherits.push(this.vertices,this.borders),this.id=this.board.setId(this,"Py"),n=0;n<this.vertices.length-1;n++)u=this.board.select(this.vertices[n]),JXG$1.exists(u._is_new_pol)?(this.addChild(u),delete u._is_new_pol):u.addChild(this);this.board.renderer.drawPolygon(this),this.board.finalizeAdding(this),this.createGradient(),this.elType="polygon",this.createLabel(),this.methodMap=JXG$1.deepCopy(this.methodMap,{borders:"borders",vertices:"vertices",A:"Area",Area:"Area",Perimeter:"Perimeter",L:"Perimeter",boundingBox:"bounds",BoundingBox:"bounds",addPoints:"addPoints",insertPoints:"insertPoints",removePoints:"removePoints",Intersect:"intersect"})};JXG$1.Polygon.prototype=new GeometryElement;JXG$1.extend(JXG$1.Polygon.prototype,{pnpoly:function(t,r,a){return Geometry.pnpoly(t,r,this.vertices,a,this.board)},hasPoint:function(t,r){var a,n;if(this.evalVisProp("hasinnerpoints")&&this.pnpoly(t,r))return!0;for(n=this.borders.length,a=0;a<n;a++)if(this.borders[a].hasPoint(t,r))return!0;return!1},updateRenderer:function(){var t,r;if(!this.needsUpdate)return this;if(this.visPropCalc.visible){for(r=this.vertices.length-(this.elType==="polygonalchain"?0:1),this.isReal=!0,t=0;t<r;++t)if(!this.vertices[t].isReal){this.isReal=!1;break}if(!this.isReal){this.updateVisibility(!1);for(t in this.childElements)this.childElements.hasOwnProperty(t)&&this.childElements[t].setDisplayRendNode(!1)}}return this.visPropCalc.visible&&this.board.renderer.updatePolygon(this),this.hasLabel&&this.visPropCalc.visible&&this.label&&this.label.visPropCalc.visible&&this.isReal&&(this.label.update(),this.board.renderer.updateText(this.label)),this.setDisplayRendNode(),this.needsUpdate=!1,this},getTextAnchor:function(){var t,r,a,n,s;if(this.vertices.length===0)return new Coords(Const.COORDS_BY_USER,[1,0,0],this.board);for(t=this.vertices[0].X(),r=this.vertices[0].Y(),a=t,n=r,s=0;s<this.vertices.length;s++)this.vertices[s].X()<t&&(t=this.vertices[s].X()),this.vertices[s].X()>a&&(a=this.vertices[s].X()),this.vertices[s].Y()>r&&(r=this.vertices[s].Y()),this.vertices[s].Y()<n&&(n=this.vertices[s].Y());return new Coords(Const.COORDS_BY_USER,[(t+a)*.5,(r+n)*.5],this.board)},getLabelAnchor:JXG$1.shortcut(JXG$1.Polygon.prototype,"getTextAnchor"),cloneToBackground:function(){var t,r=JXG$1.getCloneObject(this);return r.vertices=this.vertices,t=this.board.renderer.enhancedRendering,this.board.renderer.enhancedRendering=!0,this.board.renderer.drawPolygon(r),this.board.renderer.enhancedRendering=t,this.traces[r.id]=r.rendNode,this},hideElement:function(t){var r;if(JXG$1.deprecated("Element.hideElement()","Element.setDisplayRendNode()"),this.visPropCalc.visible=!1,this.board.renderer.display(this,!1),!t)for(r=0;r<this.borders.length;r++)this.borders[r].hideElement();this.hasLabel&&JXG$1.exists(this.label)&&(this.label.hiddenByParent=!0,this.label.visPropCalc.visible&&this.label.hideElement())},showElement:function(t){var r;if(JXG$1.deprecated("Element.showElement()","Element.setDisplayRendNode()"),this.visPropCalc.visible=!0,this.board.renderer.display(this,!0),!t)for(r=0;r<this.borders.length;r++)this.borders[r].showElement().updateRenderer();return JXG$1.exists(this.label)&&this.hasLabel&&this.label.hiddenByParent&&(this.label.hiddenByParent=!1,this.label.visPropCalc.visible||this.label.showElement().updateRenderer()),this},Area:function(){return Math.abs(Geometry.signedPolygon(this.vertices,!0))},Perimeter:function(){var t,r=this.vertices.length,a=0;for(t=1;t<r;++t)a+=this.vertices[t].Dist(this.vertices[t-1]);return a},L:function(){return this.Perimeter()},boundingBox:function(){var t=[0,0,0,0],r,a,n=this.vertices.length-1;if(n===0)return t;for(t[0]=this.vertices[0].X(),t[2]=t[0],t[1]=this.vertices[0].Y(),t[3]=t[1],r=1;r<n;++r)a=this.vertices[r].X(),a<t[0]?t[0]=a:a>t[2]&&(t[2]=a),a=this.vertices[r].Y(),a>t[1]?t[1]=a:a<t[3]&&(t[3]=a);return t},bounds:function(){return this.boundingBox()},remove:function(){var t;for(t=0;t<this.borders.length;t++)this.board.removeObject(this.borders[t]);GeometryElement.prototype.remove.call(this)},findPoint:function(t){var r;if(!JXG$1.isPoint(t))return-1;for(r=0;r<this.vertices.length;r++)if(this.vertices[r].id===t.id)return r;return-1},addPoints:function(t){var r,a=Array.prototype.slice.call(arguments);return this.elType==="polygonalchain"?r=this.vertices.length-1:r=this.vertices.length-2,this.insertPoints.apply(this,[r].concat(a))},insertPoints:function(t,r){var a,n,s,o,l;if(arguments.length===0)return this;if(s=this.vertices.length-1,this.elType==="polygon"&&s--,t<-1||t>s)return this;for(n=arguments.length-1,a=1;a<n+1;a++)l=JXG$1.providePoints(this.board,[arguments[a]],{},"polygon",["vertices"])[0],l._is_new&&(this.addChild(l),delete l._is_new),this.vertices.splice(t+a,0,l);if(this.withLines)for(o=t+1,this.elType==="polygon"?t<0?(this.vertices[this.vertices.length-1]=this.vertices[0],this.borders[this.borders.length-1].point2=this.vertices[this.vertices.length-1]):this.borders[t].point2=this.vertices[o]:t>=0&&(t<this.borders.length?this.borders[t].point2=this.vertices[o]:o=t),a=o;a<o+n;a++)this.borders.splice(a,0,this.board.create("segment",[this.vertices[a],this.vertices[a+1]],this.attr_line));return this.inherits=[],this.inherits.push(this.vertices,this.borders),this.board.update(),this},removePoints:function(t){var r,a,n,s,o=[],l=[],u=[],h=[];for(this.elType==="polygon"&&(s=this.vertices.pop()),r=0;r<arguments.length;r++)n=arguments[r],JXG$1.isPoint(n)&&(n=this.findPoint(n)),JXG$1.isNumber(n)&&n>-1&&n<this.vertices.length&&JXG$1.indexOf(u,n)===-1&&u.push(n);if(u.length===0)return this.elType==="polygon"&&this.vertices.push(s),this;for(r=0;r<u.length;r++)this.vertices[u[r]].removeChild(this);for(u=u.sort(),o=this.vertices.slice(),l=this.borders.slice(),this.withLines&&h.push([u[u.length-1]]),r=u.length-1;r>-1;r--)o[u[r]]=-1,this.withLines&&u.length>1&&u[r]-1>u[r-1]&&(h[h.length-1][1]=u[r],h.push([u[r-1]]));for(this.withLines&&(h[h.length-1][1]=u[0]),this.vertices=[],r=0;r<o.length;r++)JXG$1.isPoint(o[r])&&this.vertices.push(o[r]);if(this.elType==="polygon"&&this.vertices.length>1&&this.vertices[this.vertices.length-1].id!==this.vertices[0].id&&this.vertices.push(this.vertices[0]),this.withLines){for(r=0;r<h.length;r++){for(a=h[r][1]-1;a<h[r][0]+1;a++)a<0?this.elType==="polygon"&&(this.board.removeObject(this.borders[l.length-1]),l[l.length-1]=-1):a<l.length&&(this.board.removeObject(this.borders[a]),l[a]=-1);h[r][1]!==0&&h[r][0]!==o.length-1&&(l[h[r][0]-1]=this.board.create("segment",[o[h[r][1]-1],o[h[r][0]+1]],this.attr_line))}for(this.borders=[],r=0;r<l.length;r++)l[r]!==-1&&this.borders.push(l[r]);this.elType==="polygon"&&this.vertices.length>2&&(h[0][1]===this.vertices.length-1||h[h.length-1][1]===0)&&this.borders.push(this.board.create("segment",[this.vertices[this.vertices.length-2],this.vertices[0]],this.attr_line))}return this.inherits=[],this.inherits.push(this.vertices,this.borders),this.board.update(),this},getParents:function(){return this.setParents(this.vertices),this.parents},getAttributes:function(){var t=GeometryElement.prototype.getAttributes.call(this),r;if(this.withLines)for(t.lines=t.lines||{},t.lines.ids=[],t.lines.colors=[],r=0;r<this.borders.length;r++)t.lines.ids.push(this.borders[r].id),t.lines.colors.push(this.borders[r].visProp.strokecolor);return t},snapToGrid:function(){var t,r;for(this.evalVisProp("snaptogrid")?r=!0:r=!1,t=0;t<this.vertices.length;t++)this.vertices[t].handleSnapToGrid(r,!0)},setPositionDirectly:function(t,r,a){var n,s,o,l,u=new Coords(t,r,this.board),h=new Coords(t,a,this.board);for(l=this.vertices.length-1,o=0;o<l;o++)if(!this.vertices[o].draggable())return this;return n=Stat.subtract(u.usrCoords,h.usrCoords),s=this.board.create("transform",n.slice(1),{type:"translate"}),s.applyOnce(this.vertices.slice(0,-1)),this},sutherlandHodgman:function(t){var r=JXG$1.Math.Geometry.sortVertices(this.vertices),a=JXG$1.Math.Geometry.sortVertices(t.vertices),n=r.length-1,s=a.length-1,o,l=[],u,h,c,f,d,p,v=function(y,b,_){return(b[1]-y[1])*(_[2]-y[2])-(b[2]-y[2])*(_[1]-y[1])>=0};for(h=0;h<s;h++)l.push(a[h]);for(h=0;h<n;h++)for(u=l.slice(0),o=u.length,l=[],f=u[o-1],c=0;c<o;c++)d=u[c],v(r[h],r[h+1],d)?(v(r[h],r[h+1],f)||(p=JXG$1.Math.Geometry.meetSegmentSegment(f,d,r[h],r[h+1]),p[0][1]/=p[0][0],p[0][2]/=p[0][0],p[0][0]=1,l.push(p[0])),l.push(d)):v(r[h],r[h+1],f)&&(p=JXG$1.Math.Geometry.meetSegmentSegment(f,d,r[h],r[h+1]),p[0][1]/=p[0][0],p[0][2]/=p[0][0],p[0][0]=1,l.push(p[0])),f=d;return l},intersect:function(t){return this.sutherlandHodgman(t)}});JXG$1.createPolygon=function(t,r,a){var n,s,o,l,u=[],h,c,f=!1;if(h=JXG$1.copyAttributes(a,t.options,"polygon"),l=t.select(r[0]),l===null&&(l=r[0]),JXG$1.isObject(l)&&l.type===Const.OBJECT_TYPE_POLYGON&&JXG$1.isTransformationOrArray(r[1]))for(f=!0,o=l.vertices.length-1,c=JXG$1.copyAttributes(a,t.options,"polygon","vertices"),s=0;s<o;s++)c.withlabel&&(c.name=l.vertices[s].name===""?"":l.vertices[s].name+"'"),u.push(t.create("point",[l.vertices[s],r[1]],c));else if(u=JXG$1.providePoints(t,r,a,"polygon",["vertices"]),u===!1)throw new Error("JSXGraph: Can't create polygon / polygonalchain with parent types other than 'point' and 'coordinate arrays' or a function returning an array of coordinates. Alternatively, a polygon and a transformation can be supplied");if(h=JXG$1.copyAttributes(a,t.options,"polygon"),n=new JXG$1.Polygon(t,u,h),n.isDraggable=!0,f)for(n.prepareUpdate().update().updateVisibility().updateRenderer(),o=l.vertices.length-1,s=0;s<o;s++)u[s].prepareUpdate().update().updateVisibility().updateRenderer();return n};JXG$1.createRegularPolygon=function(t,r,a){var n,s,o,l=[],u,h,c,f;if(h=r.length,o=r[h-1],JXG$1.isNumber(o)&&(r.length!==3||o<3))throw new Error("JSXGraph: A regular polygon needs two point types and a number > 2 as input.");if(JXG$1.isNumber(t.select(o))?(h--,c=!1):(o=h,c=!0),l=JXG$1.providePoints(t,r.slice(0,h),a,"regularpolygon",["vertices"]),l===!1)throw new Error("JSXGraph: Can't create regular polygon with parent types other than 'point' and 'coordinate arrays' or a function returning an array of coordinates");for(f=JXG$1.copyAttributes(a,t.options,"regularpolygon","vertices"),s=2;s<o;s++)u=t.create("transform",[Math.PI*(2-(o-2)/o),l[s-1]],{type:"rotate"}),c?(l[s].addTransform(l[s-2],u),l[s].fullUpdate()):(JXG$1.isArray(f.ids)&&f.ids.length>=o-2&&(f.id=f.ids[s-2]),l[s]=t.create("point",[l[s-2],u],f),l[s].type=Const.OBJECT_TYPE_CAS,l[s].isDraggable=!0,l[s].visProp.fixed=!1);return f=JXG$1.copyAttributes(a,t.options,"regularpolygon"),n=t.create("polygon",l,f),n.elType="regularpolygon",n};JXG$1.createPolygonalChain=function(t,r,a){var n,s;return n=JXG$1.copyAttributes(a,t.options,"polygonalchain"),s=t.create("polygon",r,n),s.elType="polygonalchain",s.vertices.pop(),t.removeObject(s.borders[s.borders.length-1]),s.borders.pop(),s};JXG$1.createParallelogram=function(t,r,a){var n,s,o=[],l,u;if(o=JXG$1.providePoints(t,r,a,"polygon",["vertices"]),o===!1||o.length<3)throw new Error("JSXGraph: Can't create parallelogram with parent types other than 'point' and 'coordinate arrays' or a function returning an array of coordinates.");return u=JXG$1.copyAttributes(a,t.options,"parallelogram","parallelpoint"),s=t.create("parallelpoint",o,u),l=JXG$1.copyAttributes(a,t.options,"parallelogram"),n=t.create("polygon",[o[0],o[1],s,o[2]],l),n.elType="parallelogram",n.parallelPoint=s,n.isDraggable=!0,s.isDraggable=!0,s.visProp.fixed=!1,n};JXG$1.registerElement("polygon",JXG$1.createPolygon);JXG$1.registerElement("regularpolygon",JXG$1.createRegularPolygon);JXG$1.registerElement("polygonalchain",JXG$1.createPolygonalChain);JXG$1.registerElement("parallelogram",JXG$1.createParallelogram);const Polygon=JXG$1.Polygon;JXG$1.Curve=function(t,r,a){this.constructor(t,a,Const.OBJECT_TYPE_CURVE,Const.OBJECT_CLASS_CURVE),this.points=[],this.numberPoints=this.evalVisProp("numberpointshigh"),this.bezierDegree=1,this.dataX=null,this.dataY=null,this.ticks=[],this.qdt=null,JXG$1.exists(r[0])?this.varname=r[0]:this.varname="x",this.xterm=r[1],this.yterm=r[2],this.generateTerm(this.varname,this.xterm,this.yterm,r[3],r[4]),this.updateCurve(),this.id=this.board.setId(this,"G"),this.board.renderer.drawCurve(this),this.board.finalizeAdding(this),this.createGradient(),this.elType="curve",this.createLabel(),JXG$1.isString(this.xterm)&&this.notifyParents(this.xterm),JXG$1.isString(this.yterm)&&this.notifyParents(this.yterm),this.methodMap=JXG$1.deepCopy(this.methodMap,{generateTerm:"generateTerm",setTerm:"generateTerm",move:"moveTo",moveTo:"moveTo",MinX:"minX",MaxX:"maxX"})};JXG$1.Curve.prototype=new GeometryElement;JXG$1.extend(JXG$1.Curve.prototype,{minX:function(){var t;return this.evalVisProp("curvetype")==="polar"?0:(t=new Coords(Const.COORDS_BY_SCREEN,[-this.board.canvasWidth*.1,0],this.board,!1),t.usrCoords[1])},maxX:function(){var t;return this.evalVisProp("curvetype")==="polar"?2*Math.PI:(t=new Coords(Const.COORDS_BY_SCREEN,[this.board.canvasWidth*1.1,0],this.board,!1),t.usrCoords[1])},X:function(t){return NaN},Y:function(t){return NaN},Z:function(t){return 1},Ft:function(t){var r=[this.Z(t),this.X(t),this.Y(t)],a=this.transformations.length;return a>0&&(r=Mat.matVecMult(this.transformMat,r)),r[1]/=r[0],r[2]/=r[0],r[0]/=r[0],r},hasPoint:function(t,r,a){var n,s,o,l,u,h,c,f,d,p=[],v,y,b=this.evalVisProp("numberpointslow"),_=(this.maxX()-this.minX())/b,N,M,C=1/0,$,w,A,X,O,G=!0;if(JXG$1.isObject(this.evalVisProp("precision"))?(M=this.board._inputDevice,N=this.evalVisProp("precision."+M)):N=this.board.options.precision.hasPoint,h=new Coords(Const.COORDS_BY_SCREEN,[t,r],this.board,!1),t=h.usrCoords[1],r=h.usrCoords[2],this.bezierDegree===1&&this.evalVisProp("hasinnerpoints")&&(d=Geometry.windingNumber([1,t,r],this.points,!0),d!==0))return!0;if(N+=this.evalVisProp("strokewidth")*.5,N*=N,$=this.board.unitX*this.board.unitX,w=this.board.unitY*this.board.unitY,X=this.minX(),O=this.maxX(),JXG$1.exists(this._visibleArea)&&(X=this._visibleArea[0],O=this._visibleArea[1],_=(O-X)/b),A=this.evalVisProp("curvetype"),A==="parameter"||A==="polar")for(this.transformations.length>0&&(this.updateTransformMatrix(),f=Mat.inverse(this.transformMat),s=Mat.matVecMult(f,[1,t,r]),t=s[1],r=s[2]),o=0,n=X;o<b;o++){if(l=this.X(n,G),u=this.Y(n,G),C=(t-l)*(t-l)*$+(r-u)*(r-u)*w,C<=N)return!0;n+=_}else if(A==="plot"||A==="functiongraph"){for((!JXG$1.exists(a)||a<0)&&(a=0),JXG$1.exists(this.qdt)&&this.evalVisProp("useqdt")&&this.bezierDegree!==3?(y=this.qdt.query(new Coords(Const.COORDS_BY_USER,[t,r],this.board)),v=y.points,c=v.length):(v=this.points,c=this.numberPoints-1),o=a;o<c;o++)if(this.bezierDegree===3?p=Geometry.projectCoordsToBeziersegment([1,t,r],this,o):y?(v[o].prev&&(p=Geometry.projectCoordsToSegment([1,t,r],v[o].prev.usrCoords,v[o].usrCoords)),v[o].next&&v[o+1]!==v[o].next&&(p=Geometry.projectCoordsToSegment([1,t,r],v[o].usrCoords,v[o].next.usrCoords))):p=Geometry.projectCoordsToSegment([1,t,r],v[o].usrCoords,v[o+1].usrCoords),p[1]>=0&&p[1]<=1&&(t-p[0][1])*(t-p[0][1])*$+(r-p[0][2])*(r-p[0][2])*w<=N)return!0;return!1}return C<N},allocatePoints:function(){var t,r;if(r=this.numberPoints,this.points.length<this.numberPoints)for(t=this.points.length;t<r;t++)this.points[t]=new Coords(Const.COORDS_BY_USER,[0,0],this.board,!1)},update:function(){return this.needsUpdate&&(this.evalVisProp("trace")&&this.cloneToBackground(!0),this.updateCurve()),this},updateRenderer:function(){return this.needsUpdate?(this.visPropCalc.visible&&(this.isReal=Plot.checkReal(this.points),this.isReal||this.updateVisibility(!1)),this.visPropCalc.visible&&this.board.renderer.updateCurve(this),this.hasLabel&&this.visPropCalc.visible&&this.label&&this.label.visPropCalc.visible&&this.isReal&&(this.label.update(),this.board.renderer.updateText(this.label)),this.setDisplayRendNode(),this.needsUpdate=!1,this):this},updateDataArray:function(){},updateCurve:function(){var t,r,a,n,s,o,l=this.visProp.plotversion,u=!1;if(this.updateTransformMatrix(),this.updateDataArray(),a=this.minX(),n=this.maxX(),JXG$1.exists(this.dataX))for(this.numberPoints=this.dataX.length,r=this.numberPoints,this.allocatePoints(),t=0;t<r;t++)s=t,JXG$1.exists(this.dataY)?(o=t,this.points[t].setCoordinates(Const.COORDS_BY_USER,[this.dataX[t],this.dataY[t]],!1)):(o=this.X(s),this.points[t].setCoordinates(Const.COORDS_BY_USER,[this.dataX[t],this.Y(o,u)],!1)),this.points[t]._t=t,u=!0;else if(this.evalVisProp("doadvancedplot")?l===1||this.evalVisProp("doadvancedplotold")?Plot.updateParametricCurveOld(this,a,n):l===2?Plot.updateParametricCurve_v2(this,a,n):l===3?Plot.updateParametricCurve_v3(this,a,n):l===4?Plot.updateParametricCurve_v4(this,a,n):Plot.updateParametricCurve_v2(this,a,n):(this.board.updateQuality===this.board.BOARD_QUALITY_HIGH?this.numberPoints=this.evalVisProp("numberpointshigh"):this.numberPoints=this.evalVisProp("numberpointslow"),this.allocatePoints(),Plot.updateParametricCurveNaive(this,a,n,this.numberPoints)),r=this.numberPoints,this.evalVisProp("useqdt")&&this.board.updateQuality===this.board.BOARD_QUALITY_HIGH)for(this.qdt=new QDT(this.board.getBoundingBox()),t=0;t<this.points.length;t++)this.qdt.insert(this.points[t]),t>0&&(this.points[t].prev=this.points[t-1]),t<r-1&&(this.points[t].next=this.points[t+1]);for(this.evalVisProp("curvetype")!=="plot"&&this.evalVisProp("rdpsmoothing")&&(this.points=Numerics.RamerDouglasPeucker(this.points,.2),this.numberPoints=this.points.length),r=this.numberPoints,t=0;t<r;t++)this.updateTransform(this.points[t]);return this},updateTransformMatrix:function(){var t,r,a=this.transformations.length;for(this.transformMat=[[1,0,0],[0,1,0],[0,0,1]],r=0;r<a;r++)t=this.transformations[r],t.update(),this.transformMat=Mat.matMatMult(t.matrix,this.transformMat);return this},updateTransform:function(t){var r,a=this.transformations.length;return a>0&&(r=Mat.matVecMult(this.transformMat,t.usrCoords),t.setCoordinates(Const.COORDS_BY_USER,r,!1,!0)),t},addTransform:function(t){var r,a=JXG$1.isArray(t)?t:[t],n=a.length;for(r=0;r<n;r++)this.transformations.push(a[r]);return this},interpolationFunctionFromArray:function(t){var r="data"+t,a=this;return function(n,s){var o,l,u,h,c=a[r],f=c.length,d,p=[];if(isNaN(n))return NaN;if(n<0)return JXG$1.isFunction(c[0])?c[0]():c[0];if(a.bezierDegree===3){if(d=(f-1)/3,n>=d)return JXG$1.isFunction(c[c.length-1])?c[c.length-1]():c[c.length-1];for(o=Math.floor(n)*3,u=n%1,h=1-u,l=0;l<4;l++)JXG$1.isFunction(c[o+l])?p[l]=c[o+l]():p[l]=c[o+l];return h*h*(h*p[0]+3*u*p[1])+(3*h*p[2]+u*p[3])*u*u}if(n>f-2?o=f-2:o=parseInt(Math.floor(n),10),o===n)return JXG$1.isFunction(c[o])?c[o]():c[o];for(l=0;l<2;l++)JXG$1.isFunction(c[o+l])?p[l]=c[o+l]():p[l]=c[o+l];return p[0]+(p[1]-p[0])*(n-o)}},generateTerm:function(t,r,a,n,s){var o,l,u;JXG$1.isArray(r)?(this.dataX=r,this.numberPoints=this.dataX.length,this.X=this.interpolationFunctionFromArray.apply(this,["X"]),this.visProp.curvetype="plot",this.isDraggable=!0):(this.X=JXG$1.createFunction(r,this.board,t),JXG$1.isString(r)?this.visProp.curvetype="functiongraph":(JXG$1.isFunction(r)||JXG$1.isNumber(r))&&(this.visProp.curvetype="parameter"),this.isDraggable=!0),JXG$1.isArray(a)?(this.dataY=a,this.Y=this.interpolationFunctionFromArray.apply(this,["Y"])):JXG$1.exists(a)?this.Y=JXG$1.createFunction(a,this.board,t):(u=Mat.transpose(r),this.dataX=u[0],this.dataY=u[1],this.numberPoints=this.dataX.length,this.Y=this.interpolationFunctionFromArray.apply(this,["Y"])),JXG$1.isFunction(r)&&JXG$1.isArray(a)&&(o=JXG$1.createFunction(a[0],this.board,""),l=JXG$1.createFunction(a[1],this.board,""),this.X=function(h){return r(h)*Math.cos(h)+o()},this.X.deps=o.deps,this.Y=function(h){return r(h)*Math.sin(h)+l()},this.Y.deps=l.deps,this.visProp.curvetype="polar"),JXG$1.exists(n)?this.minX=JXG$1.createFunction(n,this.board,""):delete this.minX,JXG$1.exists(s)?this.maxX=JXG$1.createFunction(s,this.board,""):delete this.maxX,this.addParentsFromJCFunctions([this.X,this.Y,this.minX,this.maxX])},notifyParents:function(t){var r,a,n=!1,s;s={xterm:1,yterm:1};for(r in s)if(s.hasOwnProperty(r)&&this.hasOwnProperty(r)&&this[r].origin){n=!0;for(a in this[r].origin.deps)this[r].origin.deps.hasOwnProperty(a)&&this[r].origin.deps[a].addChild(this)}n||GeonextParser.findDependencies(this,t,this.board)},getLabelPosition:function(t,r){var a,n,s,o,l,u,h,c,f,d,p,v,y,b=1.5;return c=this.minX(),f=this.maxX(),d=Numerics.findDomain(this.X,[c,f],null,!1),d=Numerics.findDomain(this.Y,d,null,!1),c=Math.max(d[0],d[0]),f=Math.min(d[1],d[1]),s=JXG$1.parsePosition(t),h=JXG$1.parseNumber(s.pos,f-c,1),s.pos.indexOf("fr")<0&&s.pos.indexOf("%")<0&&(h=0),p=c+h,a=this.X(p),n=this.Y(p),isNaN(a+n)&&(h/=f-c,p=c+h,a=this.X(c)+h*(this.X(f)-this.X(c)),n=this.Y(c)+h*(this.Y(f)-this.Y(c))),o=new Coords(Const.COORDS_BY_USER,[a,n],this.board).scrCoords,u=Mat.eps,p<c+u?(v=(this.X(p+u)-this.X(p))/u,y=(this.Y(p+u)-this.Y(p))/u):p>f-u?(v=(this.X(p)-this.X(p-u))/u,y=(this.Y(p)-this.Y(p-u))/u):(v=.5*(this.X(p+u)-this.X(p-u))/u,y=.5*(this.Y(p+u)-this.Y(p-u))/u),v=isNaN(v)?1:v,y=isNaN(y)?1:y,l=Mat.hypot(v,y),s.side==="left"?y*=-1:v*=-1,JXG$1.exists(this.label)&&(b=.5*r/l),a=o[1]+y*this.label.size[0]*b,n=o[2]-v*this.label.size[1]*b,new Coords(Const.COORDS_BY_SCREEN,[a,n],this.board)},getLabelAnchor:function(){var t,r,a,n,s=.05*this.board.canvasWidth,o=.05*this.board.canvasHeight,l=.95*this.board.canvasWidth,u=.95*this.board.canvasHeight;if(!JXG$1.exists(this.label))return new Coords(Const.COORDS_BY_SCREEN,[NaN,NaN],this.board);if(a=this.label.evalVisProp("position"),!JXG$1.isString(a))return new Coords(Const.COORDS_BY_SCREEN,[NaN,NaN],this.board);if(a.indexOf("right")<0&&a.indexOf("left")<0)switch(this.evalVisProp("label.position")){case"ulft":t=s,r=o;break;case"llft":t=s,r=u;break;case"rt":t=l,r=.5*u;break;case"lrt":t=l,r=u;break;case"urt":t=l,r=o;break;case"top":t=.5*l,r=o;break;case"bot":t=.5*l,r=u;break;default:t=s,r=.5*u}else return this.getLabelPosition(a,this.label.evalVisProp("distance"));return n=new Coords(Const.COORDS_BY_SCREEN,[t,r],this.board,!1),Geometry.projectCoordsToCurve(n.usrCoords[1],n.usrCoords[2],0,this,this.board)[0]},cloneToBackground:function(){var t,r=JXG$1.getCloneObject(this);return r.points=this.points.slice(0),r.bezierDegree=this.bezierDegree,r.numberPoints=this.numberPoints,t=this.board.renderer.enhancedRendering,this.board.renderer.enhancedRendering=!0,this.board.renderer.drawCurve(r),this.board.renderer.enhancedRendering=t,this.traces[r.id]=r.rendNode,this},bounds:function(){var t=1/0,r=-1/0,a=1/0,n=-1/0,s=this.points.length,o,l,u;if(this.bezierDegree===3){for(o=0;o<s;o++)this.points[o].X=JXG$1.bind(function(){return this.usrCoords[1]},this.points[o]),this.points[o].Y=JXG$1.bind(function(){return this.usrCoords[2]},this.points[o]);return l=Numerics.bezier(this.points),u=l[3](),t=Numerics.fminbr(function(h){return l[0](h)},[0,u]),r=Numerics.fminbr(function(h){return-l[0](h)},[0,u]),a=Numerics.fminbr(function(h){return l[1](h)},[0,u]),n=Numerics.fminbr(function(h){return-l[1](h)},[0,u]),t=l[0](t),r=l[0](r),a=l[1](a),n=l[1](n),[t,n,r,a]}for(o=0;o<s;o++)t>this.points[o].usrCoords[1]&&(t=this.points[o].usrCoords[1]),r<this.points[o].usrCoords[1]&&(r=this.points[o].usrCoords[1]),a>this.points[o].usrCoords[2]&&(a=this.points[o].usrCoords[2]),n<this.points[o].usrCoords[2]&&(n=this.points[o].usrCoords[2]);return[t,n,r,a]},getParents:function(){var t=[this.xterm,this.yterm,this.minX(),this.maxX()];return this.parents.length!==0&&(t=this.parents),t},moveTo:function(t){var r=[],a;return this.points.length>0&&!this.evalVisProp("fixed")?(a=this.points[0],t.length===3?r=[t[0]-a.usrCoords[0],t[1]-a.usrCoords[1],t[2]-a.usrCoords[2]]:r=[t[0]-a.usrCoords[1],t[1]-a.usrCoords[2]],this.setPosition(Const.COORDS_BY_USER,r),this.board.update(this)):this},getTransformationSource:function(){var t,r;return JXG$1.exists(this._transformationSource)&&(r=this._transformationSource,r.elementClass===Const.OBJECT_CLASS_CURVE&&(t=!0)),[t,r]}});JXG$1.createCurve=function(t,r,a){var n,s,o=JXG$1.copyAttributes(a,t.options,"curve");return n=t.select(r[0],!0),JXG$1.isTransformationOrArray(r[1])&&JXG$1.isObject(n)&&(n.type===Const.OBJECT_TYPE_CURVE||n.type===Const.OBJECT_TYPE_ANGLE||n.type===Const.OBJECT_TYPE_ARC||n.type===Const.OBJECT_TYPE_CONIC||n.type===Const.OBJECT_TYPE_SECTOR)?(n.type===Const.OBJECT_TYPE_SECTOR?o=JXG$1.copyAttributes(a,t.options,"sector"):n.type===Const.OBJECT_TYPE_ARC?o=JXG$1.copyAttributes(a,t.options,"arc"):n.type===Const.OBJECT_TYPE_ANGLE?(JXG$1.exists(a.withLabel)||(a.withLabel=!1),o=JXG$1.copyAttributes(a,t.options,"angle")):o=JXG$1.copyAttributes(a,t.options,"curve"),o=JXG$1.copyAttributes(o,t.options,"curve"),s=new JXG$1.Curve(t,["x",[],[]],o),s.updateDataArray=function(){var l,u=n.numberPoints;for(this.bezierDegree=n.bezierDegree,this.dataX=[],this.dataY=[],l=0;l<u;l++)this.dataX.push(n.points[l].usrCoords[1]),this.dataY.push(n.points[l].usrCoords[2]);return this},s.addTransform(r[1]),n.addChild(s),s.setParents([n]),s._transformationSource=n,s):(o=JXG$1.copyAttributes(a,t.options,"curve"),new JXG$1.Curve(t,["x"].concat(r),o))};JXG$1.registerElement("curve",JXG$1.createCurve);JXG$1.createFunctiongraph=function(t,r,a){var n,s=["x","x"].concat(r);return n=JXG$1.copyAttributes(a,t.options,"functiongraph"),n=JXG$1.copyAttributes(n,t.options,"curve"),n.curvetype="functiongraph",new JXG$1.Curve(t,s,n)};JXG$1.registerElement("functiongraph",JXG$1.createFunctiongraph);JXG$1.registerElement("plot",JXG$1.createFunctiongraph);JXG$1.createSpline=function(t,r,a){var n,s,o;return s=function(){var l,u=[],h=[];return[function(c,f){var d,p,v;if(!f){if(u=[],h=[],r.length===2&&JXG$1.isArray(r[0])&&JXG$1.isArray(r[1])&&r[0].length===r[1].length)for(d=0;d<r[0].length;d++)JXG$1.isFunction(r[0][d])?u.push(r[0][d]()):u.push(r[0][d]),JXG$1.isFunction(r[1][d])?h.push(r[1][d]()):h.push(r[1][d]);else for(d=0;d<r.length;d++)if(JXG$1.isPoint(r[d]))u.push(r[d].X()),h.push(r[d].Y());else if(JXG$1.isArray(r[d])&&r[d].length===2)for(p=0;p<r.length;p++)JXG$1.isFunction(r[p][0])?u.push(r[p][0]()):u.push(r[p][0]),JXG$1.isFunction(r[p][1])?h.push(r[p][1]()):h.push(r[p][1]);else JXG$1.isFunction(r[d])&&r[d]().length===2&&(v=r[d](),u.push(v[0]),h.push(v[1]));l=Numerics.splineDef(u,h)}return Numerics.splineEval(c,u,h,l)},function(){return u[0]},function(){return u[u.length-1]}]},a=JXG$1.copyAttributes(a,t.options,"curve"),a.curvetype="functiongraph",o=s(),n=new JXG$1.Curve(t,["x","x",o[0],o[1],o[2]],a),n.setParents(r),n.elType="spline",n};JXG$1.registerElement("spline",JXG$1.createSpline);JXG$1.createCardinalSpline=function(t,r,a){var n,s,o,l,u,h,c,f,d,p,v=`
Possible parent types: [points:array, tau:number|function, type:string]`;if(!JXG$1.exists(r[0])||!JXG$1.isArray(r[0]))throw new Error("JSXGraph: JXG.createCardinalSpline: argument 1 'points' has to be array of points or coordinate pairs"+v);if(!JXG$1.exists(r[1])||!JXG$1.isNumber(r[1])&&!JXG$1.isFunction(r[1]))throw new Error("JSXGraph: JXG.createCardinalSpline: argument 2 'tau' has to be number between [0,1] or function'"+v);if(!JXG$1.exists(r[2])||!JXG$1.isString(r[2])?u="uniform":u=r[2],a=JXG$1.copyAttributes(a,t.options,"curve"),a=JXG$1.copyAttributes(a,t.options,"cardinalspline"),a.curvetype="parameter",h=r[0],c=[],!a.isarrayofcoordinates&&h.length===2&&JXG$1.isArray(h[0])&&JXG$1.isArray(h[1])&&h[0].length===h[1].length)for(f=0;f<h[0].length;f++)c[f]=[],JXG$1.isFunction(h[0][f])?c[f].push(h[0][f]()):c[f].push(h[0][f]),JXG$1.isFunction(h[1][f])?c[f].push(h[1][f]()):c[f].push(h[1][f]);else for(f=0;f<h.length;f++)JXG$1.isString(h[f])?c.push(t.select(h[f])):JXG$1.isPoint(h[f])?c.push(h[f]):JXG$1.isArray(h[f])&&h[f].length===2?(c[f]=[],JXG$1.isFunction(h[f][0])?c[f].push(h[f][0]()):c[f].push(h[f][0]),JXG$1.isFunction(h[f][1])?c[f].push(h[f][1]()):c[f].push(h[f][1])):JXG$1.isFunction(h[f])&&h[f]().length===2&&c.push(r[f]());if(a.createpoints===!0)o=JXG$1.providePoints(t,c,a,"cardinalspline",["points"]);else for(o=[],s=function(y){return{X:function(){return c[y][0]},Y:function(){return c[y][1]},Dist:function(b){var _=this.X()-b.X(),N=this.Y()-b.Y();return Mat.hypot(_,N)}}},f=0;f<c.length;f++)JXG$1.isPoint(c[f])?o.push(c[f]):o.push(s(f));for(l=r[1],p=["x"].concat(Numerics.CardinalSpline(o,l,u)),n=new JXG$1.Curve(t,p,a),d=o.length,n.setParents(o),f=0;f<d;f++)h=o[f],JXG$1.isPoint(h)&&(JXG$1.exists(h._is_new)?(n.addChild(h),delete h._is_new):h.addChild(n));return n.elType="cardinalspline",n};JXG$1.registerElement("cardinalspline",JXG$1.createCardinalSpline);JXG$1.createMetapostSpline=function(t,r,a){var n,s,o,l,u,h,c,f,d=`
Possible parent types: [points:array, controls:object`;if(!JXG$1.exists(r[0])||!JXG$1.isArray(r[0]))throw new Error("JSXGraph: JXG.createMetapostSpline: argument 1 'points' has to be array of points or coordinate pairs"+d);if(!JXG$1.exists(r[1])||!JXG$1.isObject(r[1]))throw new Error("JSXGraph: JXG.createMetapostSpline: argument 2 'controls' has to be a JavaScript object'"+d);if(a=JXG$1.copyAttributes(a,t.options,"curve"),a=JXG$1.copyAttributes(a,t.options,"metapostspline"),a.curvetype="parameter",u=r[0],h=[],!a.isarrayofcoordinates&&u.length===2&&JXG$1.isArray(u[0])&&JXG$1.isArray(u[1])&&u[0].length===u[1].length)for(c=0;c<u[0].length;c++)h[c]=[],JXG$1.isFunction(u[0][c])?h[c].push(u[0][c]()):h[c].push(u[0][c]),JXG$1.isFunction(u[1][c])?h[c].push(u[1][c]()):h[c].push(u[1][c]);else for(c=0;c<u.length;c++)JXG$1.isString(u[c])?h.push(t.select(u[c])):JXG$1.isPoint(u[c])?h.push(u[c]):JXG$1.isArray(u[c])&&u[c].length===2?(h[c]=[],JXG$1.isFunction(u[c][0])?h[c].push(u[c][0]()):h[c].push(u[c][0]),JXG$1.isFunction(u[c][1])?h[c].push(u[c][1]()):h[c].push(u[c][1])):JXG$1.isFunction(u[c])&&u[c]().length===2&&h.push(r[c]());if(a.createpoints===!0)o=JXG$1.providePoints(t,h,a,"metapostspline",["points"]);else for(o=[],s=function(p){return{X:function(){return h[p][0]},Y:function(){return h[p][1]}}},c=0;c<h.length;c++)JXG$1.isPoint(h[c])?o.push(h[c]):o.push(s);for(l=r[1],n=new JXG$1.Curve(t,["t",[],[],0,u.length-1],a),n.updateDataArray=function(){var p,v,y=o.length,b=[];for(v=0;v<y;v++)b.push([o[v].X(),o[v].Y()]);p=Metapost.curve(b,l),this.dataX=p[0],this.dataY=p[1]},n.bezierDegree=3,f=o.length,n.setParents(o),c=0;c<f;c++)JXG$1.isPoint(o[c])&&o[c].addChild(n);return n.elType="metapostspline",n};JXG$1.registerElement("metapostspline",JXG$1.createMetapostSpline);JXG$1.createRiemannsum=function(t,r,a){var n,s,o,l,u,h;if(h=JXG$1.copyAttributes(a,t.options,"riemannsum"),h.curvetype="plot",o=r[0],n=JXG$1.createFunction(r[1],t,""),!JXG$1.exists(n))throw new Error(`JSXGraph: JXG.createRiemannsum: argument '2' n has to be number or function.
Possible parent types: [function,n:number|function,type,start:number|function,end:number|function]`);if(typeof r[2]=="string"&&(r[2]="'"+r[2]+"'"),s=JXG$1.createFunction(r[2],t,""),!JXG$1.exists(s))throw new Error(`JSXGraph: JXG.createRiemannsum: argument 3 'type' has to be string or function.
Possible parent types: [function,n:number|function,type,start:number|function,end:number|function]`);return l=[[0],[0]].concat(r.slice(3)),u=t.create("curve",l,h),u.sum=0,u.Value=function(){return this.sum},u.updateDataArray=function(){var c=Numerics.riemann(o,n(),s(),this.minX(),this.maxX());this.dataX=c[0],this.dataY=c[1],this.sum=c[2]},u.addParentsFromJCFunctions([n,s]),u};JXG$1.registerElement("riemannsum",JXG$1.createRiemannsum);JXG$1.createTracecurve=function(t,r,a){var n,s,o,l;if(r.length!==2)throw new Error(`JSXGraph: Can't create trace curve with given parent'
Possible parent types: [glider, point]`);if(s=t.select(r[0]),o=t.select(r[1]),s.type!==Const.OBJECT_TYPE_GLIDER||!JXG$1.isPoint(o))throw new Error("JSXGraph: Can't create trace curve with parent types '"+typeof r[0]+"' and '"+typeof r[1]+`'.
Possible parent types: [glider, point]`);return l=JXG$1.copyAttributes(a,t.options,"tracecurve"),l.curvetype="plot",n=t.create("curve",[[0],[0]],l),n.updateDataArray=function(){var u,h,c,f,d,p,v,y,b,_=this.visProp.numberpoints,N=s.position,M=s.slideObject,C=M.minX(),$=M.maxX();for(h=($-C)/_,this.dataX=[],this.dataY=[],M.elementClass!==Const.OBJECT_CLASS_CURVE&&_++,u=0;u<_;u++){c=C+u*h,p=M.X(c)/M.Z(c),v=M.Y(c)/M.Z(c),s.setPositionDirectly(Const.COORDS_BY_USER,[p,v]),y=!1;for(f in this.board.objects)if(this.board.objects.hasOwnProperty(f)&&(d=this.board.objects[f],d===s&&(y=!0),y&&d.needsRegularUpdate&&(b=d.visProp.trace,d.visProp.trace=!1,d.needsUpdate=!0,d.update(!0),d.visProp.trace=b,d===o)))break;this.dataX[u]=o.X(),this.dataY[u]=o.Y()}s.position=N,y=!1;for(f in this.board.objects)if(this.board.objects.hasOwnProperty(f)&&(d=this.board.objects[f],d===s&&(y=!0),y&&d.needsRegularUpdate&&(b=d.visProp.trace,d.visProp.trace=!1,d.needsUpdate=!0,d.update(!0),d.visProp.trace=b,d===o)))break},n};JXG$1.registerElement("tracecurve",JXG$1.createTracecurve);JXG$1.createStepfunction=function(t,r,a){var n,s;if(r.length!==2)throw new Error(`JSXGraph: Can't create step function with given parent'
Possible parent types: [array, array|function]`);return s=JXG$1.copyAttributes(a,t.options,"stepfunction"),n=t.create("curve",r,s),n.updateDataArray=function(){var o,l=0,u=this.xterm.length;if(this.dataX=[],this.dataY=[],u!==0)for(this.dataX[l]=this.xterm[0],this.dataY[l]=this.yterm[0],++l,o=1;o<u;++o)this.dataX[l]=this.xterm[o],this.dataY[l]=this.dataY[l-1],++l,this.dataX[l]=this.xterm[o],this.dataY[l]=this.yterm[o],++l},n};JXG$1.registerElement("stepfunction",JXG$1.createStepfunction);JXG$1.createDerivative=function(t,r,a){var n,s,o,l,u;if(r.length!==1&&r[0].class!==Const.OBJECT_CLASS_CURVE)throw new Error(`JSXGraph: Can't create derivative curve with given parent'
Possible parent types: [curve]`);return u=JXG$1.copyAttributes(a,t.options,"curve"),s=r[0],o=Numerics.D(s.X),l=Numerics.D(s.Y),n=t.create("curve",[function(h){return s.X(h)},function(h){return l(h)/o(h)},s.minX(),s.maxX()],u),n.setParents(s),n};JXG$1.registerElement("derivative",JXG$1.createDerivative);JXG$1.createCurveIntersection=function(t,r,a){var n;if(r.length!==2)throw new Error(`JSXGraph: Can't create curve intersection with given parent'
Possible parent types: [array, array|function]`);return n=t.create("curve",[[],[]],a),n.updateDataArray=function(){var s=Clip.intersection(r[0],r[1],this.board);this.dataX=s[0],this.dataY=s[1]},n};JXG$1.createCurveUnion=function(t,r,a){var n;if(r.length!==2)throw new Error(`JSXGraph: Can't create curve union with given parent'
Possible parent types: [array, array|function]`);return n=t.create("curve",[[],[]],a),n.updateDataArray=function(){var s=Clip.union(r[0],r[1],this.board);this.dataX=s[0],this.dataY=s[1]},n};JXG$1.createCurveDifference=function(t,r,a){var n;if(r.length!==2)throw new Error(`JSXGraph: Can't create curve difference with given parent'
Possible parent types: [array, array|function]`);return n=t.create("curve",[[],[]],a),n.updateDataArray=function(){var s=Clip.difference(r[0],r[1],this.board);this.dataX=s[0],this.dataY=s[1]},n};JXG$1.registerElement("curvedifference",JXG$1.createCurveDifference);JXG$1.registerElement("curveintersection",JXG$1.createCurveIntersection);JXG$1.registerElement("curveunion",JXG$1.createCurveUnion);JXG$1.createBoxPlot=function(t,r,a){var n,s,o,l=JXG$1.copyAttributes(a,t.options,"boxplot");if(r.length!==3)throw new Error(`JSXGraph: Can't create box plot with given parent'
Possible parent types: [array, number|function, number|function] containing quantiles, axis, width`);if(r[0].length<5)throw new Error(`JSXGraph: Can't create box plot with given parent[0]'
parent[0] has to contain at least 5 quantiles.`);for(n=t.create("curve",[[],[]],l),o=r[0].length,n.Q=[],s=0;s<o;s++)n.Q[s]=JXG$1.createFunction(r[0][s],t);return n.x=JXG$1.createFunction(r[1],t),n.w=JXG$1.createFunction(r[2],t),n.updateDataArray=function(){var u,h,c,f,d,p,v,y,b;v=this.evalVisProp("smallwidth"),y=this.evalVisProp("dir"),b=this.x(),c=b-this.w()*.5,f=b-this.w()*.5*v,d=b+this.w()*.5,p=b+this.w()*.5*v,u=[b,f,p,b,b,c,c,d,d,b,NaN,c,d,NaN,b,b,f,p,b],h=[this.Q[0](),this.Q[0](),this.Q[0](),this.Q[0](),this.Q[1](),this.Q[1](),this.Q[3](),this.Q[3](),this.Q[1](),this.Q[1](),NaN,this.Q[2](),this.Q[2](),NaN,this.Q[3](),this.Q[4](),this.Q[4](),this.Q[4](),this.Q[4]()],y==="vertical"?(this.dataX=u,this.dataY=h):(this.dataX=h,this.dataY=u)},n.addParentsFromJCFunctions([n.Q,n.x,n.w]),n};JXG$1.registerElement("boxplot",JXG$1.createBoxPlot);JXG$1.createImplicitCurve=function(t,r,a){var n,s;if([1,3,5].indexOf(r.length)<0)throw new Error(`JSXGraph: Can't create curve implicitCurve with given parent'
Possible parent types: [f], [f, rangex, rangey], [f, dfx, dfy] or [f, dfx, dfy, rangex, rangey]
with functions f, dfx, dfy and arrays of length 2 rangex, rangey.`);return s=JXG$1.copyAttributes(a,t.options,"implicitcurve"),n=t.create("curve",[[],[]],s),n.f=JXG$1.createFunction(r[0],t,"x, y"),r.length===5||JXG$1.isString(r[1])||JXG$1.isFunction(r[1])?n.dfx=JXG$1.createFunction(r[1],t,"x, y"):n.dfx=null,r.length===5||JXG$1.isString(r[2])||JXG$1.isFunction(r[2])?n.dfy=JXG$1.createFunction(r[2],t,"x, y"):n.dfy=null,n.domain=null,r.length===5?n.domain=[r[3],r[4]]:r.length===3&&(n.domain=[r[1],r[2]]),n.updateDataArray=function(){var o,l,u,h,c,f=[],d;this.domain===null?(d=this.evalVisProp("margin"),o=this.board.getBoundingBox(),o[0]-=d,o[1]+=d,o[2]+=d,o[3]-=d):(l=JXG$1.evaluate(this.domain[0]),u=JXG$1.evaluate(this.domain[1]),o=[Math.min(l[0],l[1]),Math.max(u[0],u[1]),Math.max(l[0],l[1]),Math.min(u[0],u[1])]),c={resolution_out:Math.max(.01,this.evalVisProp("resolution_outer")),resolution_in:Math.max(.01,this.evalVisProp("resolution_inner")),max_steps:this.evalVisProp("max_steps"),alpha_0:this.evalVisProp("alpha_0"),tol_u0:this.evalVisProp("tol_u0"),tol_newton:this.evalVisProp("tol_newton"),tol_cusp:this.evalVisProp("tol_cusp"),tol_progress:this.evalVisProp("tol_progress"),qdt_box:this.evalVisProp("qdt_box"),kappa_0:this.evalVisProp("kappa_0"),delta_0:this.evalVisProp("delta_0"),h_initial:this.evalVisProp("h_initial"),h_critical:this.evalVisProp("h_critical"),h_max:this.evalVisProp("h_max"),loop_dist:this.evalVisProp("loop_dist"),loop_dir:this.evalVisProp("loop_dir"),loop_detection:this.evalVisProp("loop_detection"),unitX:this.board.unitX,unitY:this.board.unitY},this.dataX=[],this.dataY=[],h=new ImplicitPlot(o,c,this.f,this.dfx,this.dfy),this.qdt=h.qdt,f=h.plot(),this.dataX=f[0],this.dataY=f[1]},n.elType="implicitcurve",n};JXG$1.registerElement("implicitcurve",JXG$1.createImplicitCurve);JXG$1.Curve;JXG$1.createArc=function(t,r,a){var n,s,o;if(o=JXG$1.providePoints(t,r,a,"arc",["center","radiuspoint","anglepoint"]),o===!1||o.length<3)throw new Error("JSXGraph: Can't create Arc with parent types '"+typeof r[0]+"' and '"+typeof r[1]+"' and '"+typeof r[2]+`'.
Possible parent types: [point,point,point], [arc, transformation]`);return s=JXG$1.copyAttributes(a,t.options,"arc"),n=t.create("curve",[[0],[0],0,4],s),n.elType="arc",n.setParents(o),n.type=Const.OBJECT_TYPE_ARC,n.center=o[0],n.radiuspoint=o[1],n.point2=n.radiuspoint,n.anglepoint=o[2],n.point3=n.anglepoint,JXG$1.exists(n.center._is_new)?(n.addChild(n.center),delete n.center._is_new):n.center.addChild(n),JXG$1.exists(n.radiuspoint._is_new)?(n.addChild(n.radiuspoint),delete n.radiuspoint._is_new):n.radiuspoint.addChild(n),JXG$1.exists(n.anglepoint._is_new)?(n.addChild(n.anglepoint),delete n.anglepoint._is_new):n.anglepoint.addChild(n),n.useDirection=s.usedirection,n.updateDataArray=function(){var l,u,h,c,f,d,p=1,v=this.radiuspoint,y=this.center,b=this.anglepoint,_=this.evalVisProp("selection");u=Geometry.rad(v,y,b),(_==="minor"&&u>Math.PI||_==="major"&&u<Math.PI)&&(p=-1),this.useDirection&&(c=o[1].coords.usrCoords,f=o[3].coords.usrCoords,d=o[2].coords.usrCoords,h=(c[1]-d[1])*(c[2]-f[2])-(c[2]-d[2])*(c[1]-f[1]),h<0?(this.radiuspoint=o[1],this.anglepoint=o[2]):(this.radiuspoint=o[2],this.anglepoint=o[1])),v=v.coords.usrCoords,y=y.coords.usrCoords,b=b.coords.usrCoords,l=Geometry.bezierArc(v,y,b,!1,p),this.dataX=l[0],this.dataY=l[1],this.bezierDegree=3,this.updateStdform(),this.updateQuadraticform()},n.Radius=function(){return this.radiuspoint.Dist(this.center)},n.getRadius=function(){return JXG$1.deprecated("Arc.getRadius()","Arc.Radius()"),this.Radius()},n.Value=function(l,u){var h;return u=u||Geometry.rad(this.radiuspoint,this.center,this.anglepoint),l=l||"length",l=l.toLocaleLowerCase(),l===""||l.indexOf("len")===0?h=u*this.Radius():l.indexOf("rad")===0?h=u:l.indexOf("deg")===0?h=u*180/Math.PI:l.indexOf("sem")===0?h=u/Math.PI:l.indexOf("cir")===0&&(h=u*.5/Math.PI),h},n.L=function(){return this.Value("length")},n.hasPoint=function(l,u){var h,c,f,d,p,v,y,b=this.Radius();return this.evalVisProp("hasinnerpoints")?this.hasPointSector(l,u):(JXG$1.isObject(this.evalVisProp("precision"))?(y=this.board._inputDevice,v=this.evalVisProp("precision."+y)):v=this.board.options.precision.hasPoint,v/=Math.min(Math.abs(this.board.unitX),Math.abs(this.board.unitY)),c=new Coords(Const.COORDS_BY_SCREEN,[l,u],this.board),this.transformations.length>0&&(this.updateTransformMatrix(),d=Mat.inverse(this.transformMat),p=Mat.matVecMult(d,c.usrCoords),c=new Coords(Const.COORDS_BY_USER,p,this.board)),h=this.center.coords.distance(Const.COORDS_BY_USER,c),f=Math.abs(h-b)<v,f&&(f=Geometry.coordsOnArc(this,c)),f)},n.hasPointSector=function(l,u){var h=new Coords(Const.COORDS_BY_SCREEN,[l,u],this.board),c=this.Radius(),f=this.center.coords.distance(Const.COORDS_BY_USER,h),d=f<c;return d&&(d=Geometry.coordsOnArc(this,h)),d},n.getTextAnchor=function(){return this.center.coords},n.getLabelAnchor=function(){var l,u,h,c,f,d=this.label.evalVisProp("position"),p=Geometry.rad(this.radiuspoint,this.center,this.anglepoint),v=10/this.board.unitX,y=10/this.board.unitY,b=this.point2.coords.usrCoords,_=this.center.coords.usrCoords,N=b[1]-_[1],M=b[2]-_[2],C=this.evalVisProp("selection"),$=this.label?this.label.visProp:this.visProp.label;return!JXG$1.isString(d)||d.indexOf("right")<0&&d.indexOf("left")<0?((C==="minor"&&p>Math.PI||C==="major"&&p<Math.PI)&&(p=-(2*Math.PI-p)),l=new Coords(Const.COORDS_BY_USER,[_[1]+Math.cos(p*.5)*N-Math.sin(p*.5)*M,_[2]+Math.sin(p*.5)*N+Math.cos(p*.5)*M],this.board),h=l.usrCoords[1]-_[1],c=l.usrCoords[2]-_[2],f=Mat.hypot(h,c),h=h*(f+v)/f,c=c*(f+y)/f,u=[_[1]+h,_[2]+c],$.position=Geometry.calcLabelQuadrant(Geometry.rad([1,0],[0,0],u)),new Coords(Const.COORDS_BY_USER,u,this.board)):this.getLabelPosition(d,this.label.evalVisProp("distance"))},n.updateQuadraticform=Circle.prototype.updateQuadraticform,n.updateStdform=Circle.prototype.updateStdform,n.methodMap=JXG$1.deepCopy(n.methodMap,{getRadius:"getRadius",radius:"Radius",Radius:"Radius",center:"center",radiuspoint:"radiuspoint",anglepoint:"anglepoint",Value:"Value",L:"L"}),n.prepareUpdate().update(),n};JXG$1.registerElement("arc",JXG$1.createArc);JXG$1.createSemicircle=function(t,r,a){var n,s,o,l;if(l=JXG$1.providePoints(t,r,a,"point"),l===!1||l.length!==2)throw new Error("JSXGraph: Can't create Semicircle with parent types '"+typeof r[0]+"' and '"+typeof r[1]+`'.
Possible parent types: [point,point]`);return o=JXG$1.copyAttributes(a,t.options,"semicircle","center"),s=t.create("midpoint",l,o),s.dump=!1,o=JXG$1.copyAttributes(a,t.options,"semicircle"),n=t.create("arc",[s,l[1],l[0]],o),n.elType="semicircle",n.setParents([l[0].id,l[1].id]),n.subs={midpoint:s},n.inherits.push(s),n.midpoint=n.center=s,n};JXG$1.registerElement("semicircle",JXG$1.createSemicircle);JXG$1.createCircumcircleArc=function(t,r,a){var n,s,o,l;if(l=JXG$1.providePoints(t,r,a,"point"),l===!1||l.length!==3)throw new Error("JSXGraph: create Circumcircle Arc with parent types '"+typeof r[0]+"' and '"+typeof r[1]+"' and '"+typeof r[2]+`'.
Possible parent types: [point,point,point]`);return o=JXG$1.copyAttributes(a,t.options,"circumcirclearc","center"),s=t.create("circumcenter",l,o),s.dump=!1,o=JXG$1.copyAttributes(a,t.options,"circumcirclearc"),o.usedirection=!0,n=t.create("arc",[s,l[0],l[2],l[1]],o),n.elType="circumcirclearc",n.setParents([l[0].id,l[1].id,l[2].id]),n.subs={center:s},n.inherits.push(s),n.center=s,n};JXG$1.registerElement("circumcirclearc",JXG$1.createCircumcircleArc);JXG$1.createMinorArc=function(t,r,a){return a.selection="minor",JXG$1.createArc(t,r,a)};JXG$1.registerElement("minorarc",JXG$1.createMinorArc);JXG$1.createMajorArc=function(t,r,a){return a.selection="major",JXG$1.createArc(t,r,a)};JXG$1.registerElement("majorarc",JXG$1.createMajorArc);JXG$1.createSector=function(t,r,a){var n,s,o,l=1e-14,u="invalid",h,c,f=["center","radiusPoint","anglePoint"],d;if(r[0].elementClass===Const.OBJECT_CLASS_LINE&&r[1].elementClass===Const.OBJECT_CLASS_LINE&&(JXG$1.isArray(r[2])||JXG$1.isNumber(r[2]))&&(JXG$1.isArray(r[3])||JXG$1.isNumber(r[3]))&&(JXG$1.isNumber(r[4])||JXG$1.isFunction(r[4])||JXG$1.isString(r[4])))u="2lines";else{if(d=JXG$1.providePoints(t,r,a,"sector",f),d===!1)throw new Error("JSXGraph: Can't create Sector with parent types '"+typeof r[0]+"' and '"+typeof r[1]+"' and '"+typeof r[2]+"'.");u="3points"}if(s=JXG$1.copyAttributes(a,t.options,"sector"),n=t.create("curve",[[0],[0],0,6],s),n.type=Const.OBJECT_TYPE_SECTOR,n.elType="sector",n.autoRadius=function(){var p=20/n.board.unitX,v=1/0,y=50/n.board.unitX;return JXG$1.isPoint(n.center)&&(v=n.center.Dist(n.point2)*.3333),Math.max(p,Math.min(v,y))},u==="2lines")n.Radius=function(){var p=JXG$1.evaluate(r[4]);return p==="auto"?this.autoRadius():p},n.line1=t.select(r[0]),n.line2=t.select(r[1]),n.line1.addChild(n),n.line2.addChild(n),n.setParents(r),n.point1={visProp:{}},n.point2={visProp:{}},n.point3={visProp:{}},h=Geometry.meetLineLine(n.line1.stdform,n.line2.stdform,0,t),Geometry.distance(h.usrCoords,[0,0,0],3)<l&&(n.line1.point1.Dist(n.line2.point1)<l||n.line1.point1.Dist(n.line2.point2)<l?h=n.line1.point1.coords:n.line1.point2.Dist(n.line2.point1)<l||n.line1.point2.Dist(n.line2.point1)<l?h=n.line1.point2.coords:console.log("JSXGraph warning: Can't create Sector from parallel lines with no common defining point.")),JXG$1.isArray(r[2])?(r[2].length===2&&(r[2]=[1].concat(r[2])),c=Geometry.projectPointToLine({coords:{usrCoords:r[2]}},n.line1,t),c=Stat.subtract(c.usrCoords,h.usrCoords),n.direction1=Mat.innerProduct(c,[0,n.line1.stdform[2],-n.line1.stdform[1]],3)>=0?1:-1):n.direction1=r[2]>=0?1:-1,JXG$1.isArray(r[3])?(r[3].length===2&&(r[3]=[1].concat(r[3])),c=Geometry.projectPointToLine({coords:{usrCoords:r[3]}},n.line2,t),c=Stat.subtract(c.usrCoords,h.usrCoords),n.direction2=Mat.innerProduct(c,[0,n.line2.stdform[2],-n.line2.stdform[1]],3)>=0?1:-1):n.direction2=r[3]>=0?1:-1,n.methodMap=JXG$1.deepCopy(n.methodMap,{arc:"arc",center:"center",line1:"line1",line2:"line2"}),n.updateDataArray=function(){var p,v,y,b=1e-14,_=[0,0,0],N=[0,0,0],M=[0,0,0],C;if(v=this.line1,y=this.line2,N=Mat.crossProduct(v.stdform,y.stdform),Geometry.distance(N,[0,0,0],3)<b&&(v.point1.Dist(y.point1)<b||v.point1.Dist(y.point2)<b?N=v.point1.coords.usrCoords:(v.point2.Dist(y.point1)<b||v.point2.Dist(y.point1)<b)&&(N=v.point2.coords.usrCoords)),Math.abs(N[0])>b&&(N[1]/=N[0],N[2]/=N[0],N[0]/=N[0]),p=this.direction1*this.Radius(),_=Stat.add(N,[0,p*v.stdform[2],-p*v.stdform[1]]),p=this.direction2*this.Radius(),M=Stat.add(N,[0,p*y.stdform[2],-p*y.stdform[1]]),this.point2.coords=new Coords(Const.COORDS_BY_USER,_,n.board),this.point1.coords=new Coords(Const.COORDS_BY_USER,N,n.board),this.point3.coords=new Coords(Const.COORDS_BY_USER,M,n.board),Math.abs(_[0])<Mat.eps||Math.abs(N[0])<Mat.eps||Math.abs(M[0])<Mat.eps){this.dataX=[NaN],this.dataY=[NaN];return}C=Geometry.bezierArc(_,N,M,!0,1),this.dataX=C[0],this.dataY=C[1],this.bezierDegree=3};else if(u==="3points"){for(n.point1=d[0],n.point2=d[1],n.point3=d[2],o=0;o<3;o++)JXG$1.exists(d[o]._is_new)?(n.addChild(d[o]),delete d[o]._is_new):d[o].addChild(n);n.useDirection=a.usedirection,n.setParents(d),JXG$1.exists(d[3])&&(n.point4=d[3],n.point4.addChild(n)),n.methodMap=JXG$1.deepCopy(n.methodMap,{arc:"arc",center:"center",radiuspoint:"radiuspoint",anglepoint:"anglepoint"}),n.updateDataArray=function(){var p,v,y,b,_,N=this.point2,M=this.point1,C=this.point3,$,w=1,A=this.evalVisProp("selection");if(!N.isReal||!M.isReal||!C.isReal){this.dataX=[NaN],this.dataY=[NaN];return}$=Geometry.rad(N,M,C),(A==="minor"&&$>Math.PI||A==="major"&&$<Math.PI)&&(w=-1),this.useDirection&&JXG$1.exists(this.point4)&&(y=this.point2.coords.usrCoords,b=this.point4.coords.usrCoords,_=this.point3.coords.usrCoords,v=(y[1]-_[1])*(y[2]-b[2])-(y[2]-_[2])*(y[1]-b[1]),v>=0&&(C=this.point2,N=this.point3)),N=N.coords.usrCoords,M=M.coords.usrCoords,C=C.coords.usrCoords,p=Geometry.bezierArc(N,M,C,!0,w),this.dataX=p[0],this.dataY=p[1],this.bezierDegree=3},n.Radius=function(){return this.point2.Dist(this.point1)}}return n.center=n.point1,n.radiuspoint=n.point2,n.anglepoint=n.point3,s=JXG$1.copyAttributes(a,t.options,"arc"),s=JXG$1.copyAttributes(s,t.options,"sector","arc"),s.withlabel=!1,s.selection=n.visProp.selection,s.name+="_arc",u==="2lines"?(n.updateDataArray(),n.arc=t.create("arc",[function(){return n.point1.coords.usrCoords},function(){var p=n.point2.coords.distance(Const.COORDS_BY_USER,n.point1.coords);return p===0?[n.point1.coords.usrCoords[1],n.point1.coords.usrCoords[2]]:[n.point1.coords.usrCoords[1]+n.Radius()*(n.point2.coords.usrCoords[1]-n.point1.coords.usrCoords[1])/p,n.point1.coords.usrCoords[2]+n.Radius()*(n.point2.coords.usrCoords[2]-n.point1.coords.usrCoords[2])/p]},function(){return n.point3.coords.usrCoords}],s)):n.arc=t.create("arc",[n.point1,function(){var p=n.point2.Dist(n.point1);return p===0?[n.point1.X(),n.point1.Y()]:[n.point1.X()+n.Radius()*(n.point2.X()-n.point1.X())/p,n.point1.Y()+n.Radius()*(n.point2.Y()-n.point1.Y())/p]},n.point3],s),n.addChild(n.arc),n.hasPointCurve=function(p,v){var y,b,_,N,M,C=new Coords(Const.COORDS_BY_SCREEN,[p,v],this.board),$=this.Radius(),w=this.center.coords.distance(Const.COORDS_BY_USER,C),A,X=this.evalVisProp("selection");return JXG$1.isObject(this.evalVisProp("precision"))?(M=this.board._inputDevice,N=this.evalVisProp("precision."+M)):N=this.board.options.precision.hasPoint,N/=Math.min(Math.abs(this.board.unitX),Math.abs(this.board.unitY)),A=Math.abs(w-$)<N,A&&(y=Geometry.rad(this.point2,this.center,C.usrCoords.slice(1)),b=0,_=Geometry.rad(this.point2,this.center,this.point3),(X==="minor"&&_>Math.PI||X==="major"&&_<Math.PI)&&(b=_,_=2*Math.PI),(y<b||y>_)&&(A=!1)),A},n.hasPointSector=function(p,v){var y,b=new Coords(Const.COORDS_BY_SCREEN,[p,v],this.board),_=this.Radius(),N=this.point1.coords.distance(Const.COORDS_BY_USER,b),M,C,$=N<_,w=this.evalVisProp("selection");return $&&(y=Geometry.rad(this.radiuspoint,this.center,b.usrCoords.slice(1)),M=0,C=Geometry.rad(this.radiuspoint,this.center,this.anglepoint),(w==="minor"&&C>Math.PI||w==="major"&&C<Math.PI)&&(M=C,C=2*Math.PI),(y<M||y>C)&&($=!1)),$},n.hasPoint=function(p,v){return this.evalVisProp("highlightonsector")||this.evalVisProp("hasinnerpoints")?this.hasPointSector(p,v):this.hasPointCurve(p,v)},n.getTextAnchor=function(){return this.point1.coords},n.getLabelAnchor=function(){var p,v,y,b,_,N=this.label.evalVisProp("position"),M=Geometry.rad(this.point2,this.point1,this.point3),C=13/this.board.unitX,$=13/this.board.unitY,w=this.point2.coords.usrCoords,A=this.point1.coords.usrCoords,X=w[1]-A[1],O=w[2]-A[2],G=this.evalVisProp("selection"),R=this.label?this.label.visProp:this.visProp.label;return!JXG$1.isString(N)||N.indexOf("right")<0&&N.indexOf("left")<0?((G==="minor"&&M>Math.PI||G==="major"&&M<Math.PI)&&(M=-(2*Math.PI-M)),p=new Coords(Const.COORDS_BY_USER,[A[1]+Math.cos(M*.5)*X-Math.sin(M*.5)*O,A[2]+Math.sin(M*.5)*X+Math.cos(M*.5)*O],this.board),y=p.usrCoords[1]-A[1],b=p.usrCoords[2]-A[2],_=Mat.hypot(y,b),y=y*(_+C)/_,b=b*(_+$)/_,v=[A[1]+y,A[2]+b],R.position=Geometry.calcLabelQuadrant(Geometry.rad([1,0],[0,0],v)),new Coords(Const.COORDS_BY_USER,v,this.board)):this.getLabelPosition(N,this.label.evalVisProp("distance"))},n.setRadius=function(p){var v,y=JXG$1.evaluate(p);p==="auto"||y==="auto"?v="auto":JXG$1.isNumber(p)?v="number":JXG$1.isFunction(p)&&!JXG$1.isString(y)?v="function":v="undefined",v!=="undefined"&&(this.visProp.radius=p),n.Radius=function(){var b=JXG$1.evaluate(p);return b==="auto"?this.autoRadius():b}},n.getRadius=function(){return JXG$1.deprecated("Sector.getRadius()","Sector.Radius()"),this.Radius()},n.Value=function(p){return this.arc.Value(p)},n.L=function(){return this.arc.L()},n.Area=function(){var p=this.Radius();return .5*p*p*this.Value("radians")},n.Perimeter=function(){return this.L()+2*this.Radius()},u==="3points"&&(n.setPositionDirectly=function(p,v,y){var b,_,N=new Coords(p,v,this.board),M=new Coords(p,y,this.board);return!n.point1.draggable()||!n.point2.draggable()||!n.point3.draggable()?this:(b=Stat.subtract(N.usrCoords,M.usrCoords),_=this.board.create("transform",b.slice(1),{type:"translate"}),_.applyOnce([n.point1,n.point2,n.point3]),this)}),n.methodMap=JXG$1.deepCopy(n.methodMap,{radius:"Radius",Radius:"Radius",getRadius:"Radius",setRadius:"setRadius",Value:"Value",L:"L",Area:"Area",Perimeter:"Perimeter"}),n};JXG$1.registerElement("sector",JXG$1.createSector);JXG$1.createCircumcircleSector=function(t,r,a){var n,s,o,l;if(l=JXG$1.providePoints(t,r,a,"point"),l===!1)throw new Error("JSXGraph: Can't create circumcircle sector with parent types '"+typeof r[0]+"' and '"+typeof r[1]+"' and '"+typeof r[2]+"'.");return s=t.create("circumcenter",l.slice(0,3),o),s.dump=!1,o=JXG$1.copyAttributes(a,t.options,"circumcirclesector"),n=t.create("sector",[s,l[0],l[2],l[1]],o),n.elType="circumcirclesector",n.setParents(l),n.center=s,n.subs={center:s},n};JXG$1.registerElement("circumcirclesector",JXG$1.createCircumcircleSector);JXG$1.createMinorSector=function(t,r,a){return a.selection="minor",JXG$1.createSector(t,r,a)};JXG$1.registerElement("minorsector",JXG$1.createMinorSector);JXG$1.createMajorSector=function(t,r,a){return a.selection="major",JXG$1.createSector(t,r,a)};JXG$1.registerElement("majorsector",JXG$1.createMajorSector);JXG$1.createAngle=function(t,r,a){var n,s,o,l,u,h,c="invalid";if(r[0].elementClass===Const.OBJECT_CLASS_LINE&&r[1].elementClass===Const.OBJECT_CLASS_LINE&&(JXG$1.isArray(r[2])||JXG$1.isNumber(r[2]))&&(JXG$1.isArray(r[3])||JXG$1.isNumber(r[3])))c="2lines";else{if(o={name:""},h=JXG$1.providePoints(t,r,o,"point"),h===!1)throw new Error("JSXGraph: Can't create angle with parent types '"+typeof r[0]+"' and '"+typeof r[1]+"' and '"+typeof r[2]+"'.");c="3points"}if(o=JXG$1.copyAttributes(a,t.options,"angle"),JXG$1.exists(o.name)||(o.name=t.generateName({type:Const.OBJECT_TYPE_ANGLE})),JXG$1.exists(o.radius)?s=o.radius:s=0,t.suspendUpdate(),c==="2lines"?(r.push(s),n=t.create("sector",r,o),n.updateDataArraySector=n.updateDataArray,n.setAngle=function(f){},n.free=function(f){}):(n=t.create("sector",[h[1],h[0],h[2]],o),n.arc.visProp.priv=!0,n.point=n.point2=n.radiuspoint=h[0],n.pointsquare=n.point3=n.anglepoint=h[2],n.Radius=function(){var f=JXG$1.evaluate(s);return f==="auto"?n.autoRadius():f},n.updateDataArraySector=function(){var f=this.point2,d=this.point1,p=this.point3,v=this.Radius(),y=d.Dist(f),b,_,N=1,M=this.evalVisProp("selection");_=Geometry.rad(f,d,p),(M==="minor"&&_>Math.PI||M==="major"&&_<Math.PI)&&(N=-1),f=f.coords.usrCoords,d=d.coords.usrCoords,p=p.coords.usrCoords,f=[1,d[1]+(f[1]-d[1])*v/y,d[2]+(f[2]-d[2])*v/y],p=[1,d[1]+(p[1]-d[1])*v/y,d[2]+(p[2]-d[2])*v/y],b=Geometry.bezierArc(f,d,p,!0,N),this.dataX=b[0],this.dataY=b[1],this.bezierDegree=3},n.setAngle=function(f){var d,p,v,y=this.anglepoint,b=this.radiuspoint;return y.draggable()&&(d=this.board.create("transform",[f,this.center],{type:"rotate"}),y.addTransform(b,d),d.update(),y.moveTo(Mat.matVecMult(d.matrix,b.coords.usrCoords)),JXG$1.isFunction(f)?v=function(){return Math.PI*2-f()}:v=function(){return Math.PI*2-f},p=this.board.create("transform",[v,this.center],{type:"rotate"}),y.coords.on("update",function(){p.update(),b.setPositionDirectly(Const.COORDS_BY_USER,Mat.matVecMult(p.matrix,y.coords.usrCoords))}),y.setParents(b),this.hasFixedAngle=!0),this},n.free=function(){var f=this.anglepoint;return f.transformations.length>0&&(f.transformations.pop(),f.isDraggable=!0,f.parents=[],f.coords.off("update")),this.hasFixedAngle=!1,this},n.setParents(h)),JXG$1.exists(n.visProp.text)&&n.label.setText(n.evalVisProp("text")),n.elType="angle",n.type=Const.OBJECT_TYPE_ANGLE,n.subs={},n.updateDataArraySquare=function(){var f,d,p,v,y,b,_,N,M=this.Radius();c==="2lines"&&this.updateDataArraySector(),f=this.point2,d=this.point1,p=this.point3,f=f.coords.usrCoords,d=d.coords.usrCoords,p=p.coords.usrCoords,v=Geometry.distance(f,d,3),y=Geometry.distance(p,d,3),f=[1,d[1]+(f[1]-d[1])*M/v,d[2]+(f[2]-d[2])*M/v],p=[1,d[1]+(p[1]-d[1])*M/y,d[2]+(p[2]-d[2])*M/y],b=Mat.crossProduct(p,d),_=[-f[1]*b[1]-f[2]*b[2],f[0]*b[1],f[0]*b[2]],b=Mat.crossProduct(f,d),N=[-p[1]*b[1]-p[2]*b[2],p[0]*b[1],p[0]*b[2]],b=Mat.crossProduct(_,N),b[1]/=b[0],b[2]/=b[0],this.dataX=[d[1],f[1],b[1],p[1],d[1]],this.dataY=[d[2],f[2],b[2],p[2],d[2]],this.bezierDegree=1},n.updateDataArrayNone=function(){this.dataX=[NaN],this.dataY=[NaN],this.bezierDegree=1},n.updateDataArray=function(){var f=this.evalVisProp("type"),d=Geometry.trueAngle(this.point2,this.point1,this.point3),p=this.evalVisProp("selection");(p==="minor"&&d>180||p==="major"&&d<180)&&(d=360-d),Math.abs(d-90)<this.evalVisProp("orthosensitivity")+Mat.eps&&(f=this.evalVisProp("orthotype")),f==="none"?(this.updateDataArrayNone(),this.maxX=function(){return 0}):f==="square"?(this.updateDataArraySquare(),this.maxX=function(){return 4}):f==="sector"?(this.updateDataArraySector(),this.maxX=function(){return 6}):f==="sectordot"&&(this.updateDataArraySector(),this.maxX=function(){return 6},this.dot.visProp.visible||this.dot.setAttribute({visible:!0})),(!this.visProp.visible||f!=="sectordot"&&this.dot.visProp.visible)&&this.dot.setAttribute({visible:!1})},l=JXG$1.copyAttributes(a,t.options,"angle","dot"),n.dot=t.create("point",[function(){var f,d,p,v,y,b,_,N,M;return JXG$1.exists(n.dot)&&!n.dot.visProp.visible?[0,0]:(f=n.point2.coords.usrCoords,d=n.point1.coords.usrCoords,p=n.Radius(),v=Geometry.distance(f,d,3),y=Geometry.rad(n.point2,n.point1,n.point3),M=n.evalVisProp("selection"),(M==="minor"&&y>Math.PI||M==="major"&&y<Math.PI)&&(y=-(2*Math.PI-y)),y*=.5,b=Math.cos(y),_=Math.sin(y),f=[1,d[1]+(f[1]-d[1])*p/v,d[2]+(f[2]-d[2])*p/v],N=[[1,0,0],[d[1]-.5*d[1]*b+.5*d[2]*_,b*.5,-_*.5],[d[2]-.5*d[1]*_-.5*d[2]*b,_*.5,b*.5]],Mat.matVecMult(N,f))}],l),n.dot.dump=!1,n.subs.dot=n.dot,c==="2lines")for(u=0;u<2;u++)t.select(r[u]).addChild(n.dot);else for(u=0;u<3;u++)t.select(h[u]).addChild(n.dot);return t.unsuspendUpdate(),n.Value=function(f){return f=f||"radians",f===""&&(f="radians"),n.arc.Value(f)},n.getLabelAnchor=function(){var f,d=12,p,v,y,b,_,N,M,C,$=n.evalVisProp("selection"),w=this.label?this.label.visProp:this.visProp.label,A=this.label?this.label.evalVisProp("position"):this.evalVisProp("label.position");return!JXG$1.isString(A)||A.indexOf("right")<0&&A.indexOf("left")<0?(JXG$1.exists(this.label)&&JXG$1.exists(this.label.visProp.fontsize)&&(d=this.label.evalVisProp("fontsize")),d/=this.board.unitX,p=n.point2.coords.usrCoords,v=n.point1.coords.usrCoords,y=n.Radius(),b=Geometry.distance(p,v,3),_=Geometry.rad(n.point2,n.point1,n.point3),($==="minor"&&_>Math.PI||$==="major"&&_<Math.PI)&&(_=-(2*Math.PI-_)),_*=.5,N=Math.cos(_),M=Math.sin(_),p=[1,v[1]+(p[1]-v[1])*y/b,v[2]+(p[2]-v[2])*y/b],C=[[1,0,0],[v[1]-.5*v[1]*N+.5*v[2]*M,N*.5,-M*.5],[v[2]-.5*v[1]*M-.5*v[2]*N,M*.5,N*.5]],f=Mat.matVecMult(C,p),f[1]/=f[0],f[2]/=f[0],f[0]/=f[0],b=Geometry.distance(f,v,3),f=[f[0],v[1]+(f[1]-v[1])*(y+d)/b,v[2]+(f[2]-v[2])*(y+d)/b],w.position=Geometry.calcLabelQuadrant(Geometry.rad([1,0],[0,0],f)),new Coords(Const.COORDS_BY_USER,f,this.board)):this.getLabelPosition(A,this.label.evalVisProp("distance"))},n.methodMap=JXG$1.deepCopy(n.methodMap,{setAngle:"setAngle",Value:"Value",free:"free"}),n};JXG$1.registerElement("angle",JXG$1.createAngle);JXG$1.createNonreflexAngle=function(t,r,a){var n;return a.selection="minor",a=JXG$1.copyAttributes(a,t.options,"nonreflexangle"),n=JXG$1.createAngle(t,r,a),n.Value=function(s){var o=Geometry.rad(this.point2,this.point1,this.point3);return s=s||"radians",s===""&&(s="radians"),o=o<Math.PI?o:2*Math.PI-o,this.arc.Value(s,o)},n};JXG$1.registerElement("nonreflexangle",JXG$1.createNonreflexAngle);JXG$1.createReflexAngle=function(t,r,a){var n;return a.selection="major",a=JXG$1.copyAttributes(a,t.options,"reflexangle"),n=JXG$1.createAngle(t,r,a),n.Value=function(s){var o=Geometry.rad(this.point2,this.point1,this.point3);return s=s||"radians",s===""&&(s="radians"),o=o>=Math.PI?o:2*Math.PI-o,this.arc.Value(s,o)},n};JXG$1.registerElement("reflexangle",JXG$1.createReflexAngle);JXG$1.createOrthogonalProjection=function(t,r,a){var n,s,o,l;if(r[0]=t.select(r[0]),r[1]=t.select(r[1]),JXG$1.isPointType(t,r[0])&&r[1].elementClass===Const.OBJECT_CLASS_LINE)s=JXG$1.providePoints(t,[r[0]],a,"point")[0],n=r[1];else if(JXG$1.isPointType(t,r[1])&&r[0].elementClass===Const.OBJECT_CLASS_LINE)s=JXG$1.providePoints(t,[r[1]],a,"point")[0],n=r[0];else throw new Error("JSXGraph: Can't create perpendicular point with parent types '"+typeof r[0]+"' and '"+typeof r[1]+`'.
Possible parent types: [point,line]`);return l=JXG$1.copyAttributes(a,t.options,"orthogonalprojection"),o=t.create("point",[function(){return Geometry.projectPointToLine(s,n,t)}],l),JXG$1.exists(s._is_new)?(o.addChild(s),delete s._is_new):s.addChild(o),n.addChild(o),o.elType="orthogonalprojection",o.setParents([s.id,o.id]),o.update(),o.generatePolynomial=function(){var u=n.point1.symbolic.x,h=n.point1.symbolic.y,c=n.point2.symbolic.x,f=n.point2.symbolic.y,d=s.symbolic.x,p=s.symbolic.y,v=o.symbolic.x,y=o.symbolic.y,b="("+h+")*("+v+")-("+h+")*("+c+")+("+y+")*("+c+")-("+u+")*("+y+")+("+u+")*("+f+")-("+v+")*("+f+")",_="("+p+")*("+h+")-("+p+")*("+f+")-("+y+")*("+h+")+("+y+")*("+f+")+("+d+")*("+u+")-("+d+")*("+c+")-("+v+")*("+u+")+("+v+")*("+c+")";return[b,_]},o};JXG$1.createPerpendicular=function(t,r,a){var n,s,o,l;if(r[0]=t.select(r[0]),r[1]=t.select(r[1]),JXG$1.isPointType(t,r[0])&&r[1].elementClass===Const.OBJECT_CLASS_LINE)s=r[1],n=JXG$1.providePoints(t,[r[0]],a,"point")[0];else if(JXG$1.isPointType(t,r[1])&&r[0].elementClass===Const.OBJECT_CLASS_LINE)s=r[0],n=JXG$1.providePoints(t,[r[1]],a,"point")[0];else throw new Error("JSXGraph: Can't create perpendicular with parent types '"+typeof r[0]+"' and '"+typeof r[1]+`'.
Possible parent types: [line,point]`);return l=JXG$1.copyAttributes(a,t.options,"perpendicular"),o=JXG$1.createLine(t,[function(){return s.stdform[2]*n.X()-s.stdform[1]*n.Y()},function(){return-s.stdform[2]*n.Z()},function(){return s.stdform[1]*n.Z()}],l),o.elType="perpendicular",o.setParents([s.id,n.id]),JXG$1.exists(n._is_new)?(o.addChild(n),delete n._is_new):n.addChild(o),s.addChild(o),o};JXG$1.createPerpendicularPoint=function(t,r,a){var n,s,o;if(r[0]=t.select(r[0]),r[1]=t.select(r[1]),JXG$1.isPointType(t,r[0])&&r[1].elementClass===Const.OBJECT_CLASS_LINE)s=JXG$1.providePoints(t,[r[0]],a,"point")[0],n=r[1];else if(JXG$1.isPointType(t,r[1])&&r[0].elementClass===Const.OBJECT_CLASS_LINE)s=JXG$1.providePoints(t,[r[1]],a,"point")[0],n=r[0];else throw new Error("JSXGraph: Can't create perpendicular point with parent types '"+typeof r[0]+"' and '"+typeof r[1]+`'.
Possible parent types: [point,line]`);return o=t.create("point",[function(){return Geometry.perpendicular(n,s,t)[0]}],a),JXG$1.exists(s._is_new)?(o.addChild(s),delete s._is_new):s.addChild(o),n.addChild(o),o.elType="perpendicularpoint",o.setParents([s.id,n.id]),o.update(),o.generatePolynomial=function(){var l=n.point1.symbolic.x,u=n.point1.symbolic.y,h=n.point2.symbolic.x,c=n.point2.symbolic.y,f=s.symbolic.x,d=s.symbolic.y,p=o.symbolic.x,v=o.symbolic.y,y="("+u+")*("+p+")-("+u+")*("+h+")+("+v+")*("+h+")-("+l+")*("+v+")+("+l+")*("+c+")-("+p+")*("+c+")",b="("+d+")*("+u+")-("+d+")*("+c+")-("+v+")*("+u+")+("+v+")*("+c+")+("+f+")*("+l+")-("+f+")*("+h+")-("+p+")*("+l+")+("+p+")*("+h+")";return[y,b]},o};JXG$1.createPerpendicularSegment=function(t,r,a){var n,s,o,l,u;if(r[0]=t.select(r[0]),r[1]=t.select(r[1]),JXG$1.isPointType(t,r[0])&&r[1].elementClass===Const.OBJECT_CLASS_LINE)s=r[1],n=JXG$1.providePoints(t,[r[0]],a,"point")[0];else if(JXG$1.isPointType(t,r[1])&&r[0].elementClass===Const.OBJECT_CLASS_LINE)s=r[0],n=JXG$1.providePoints(t,[r[1]],a,"point")[0];else throw new Error("JSXGraph: Can't create perpendicular with parent types '"+typeof r[0]+"' and '"+typeof r[1]+`'.
Possible parent types: [line,point]`);return u=JXG$1.copyAttributes(a,t.options,"perpendicularsegment","point"),l=JXG$1.createPerpendicularPoint(t,[s,n],u),l.dump=!1,JXG$1.exists(a.layer)||(a.layer=t.options.layer.line),u=JXG$1.copyAttributes(a,t.options,"perpendicularsegment"),o=JXG$1.createLine(t,[function(){return Geometry.perpendicular(s,n,t)[1]?[l,n]:[n,l]}],u),o.point=l,JXG$1.exists(n._is_new)?(o.addChild(n),delete n._is_new):n.addChild(o),s.addChild(o),o.elType="perpendicularsegment",o.setParents([n.id,s.id]),o.subs={point:l},o.inherits.push(l),o};JXG$1.createMidpoint=function(t,r,a){var n,s,o,l,u;for(l=0;l<r.length;++l)r[l]=t.select(r[l]);if(r.length===2&&JXG$1.isPointType(t,r[0])&&JXG$1.isPointType(t,r[1]))r=JXG$1.providePoints(t,r,a,"point"),n=r[0],s=r[1];else if(r.length===1&&r[0].elementClass===Const.OBJECT_CLASS_LINE)n=r[0].point1,s=r[0].point2;else throw new Error(`JSXGraph: Can't create midpoint.
Possible parent types: [point,point], [line]`);return u=JXG$1.copyAttributes(a,t.options,"midpoint"),o=t.create("point",[function(){var h=n.coords.usrCoords[1]+s.coords.usrCoords[1];return isNaN(h)||Math.abs(n.coords.usrCoords[0])<Mat.eps||Math.abs(s.coords.usrCoords[0])<Mat.eps?NaN:h*.5},function(){var h=n.coords.usrCoords[2]+s.coords.usrCoords[2];return isNaN(h)||Math.abs(n.coords.usrCoords[0])<Mat.eps||Math.abs(s.coords.usrCoords[0])<Mat.eps?NaN:h*.5}],u),JXG$1.exists(n._is_new)?(o.addChild(n),delete n._is_new):n.addChild(o),JXG$1.exists(s._is_new)?(o.addChild(s),delete s._is_new):s.addChild(o),o.elType="midpoint",o.setParents([n.id,s.id]),o.prepareUpdate().update(),o.generatePolynomial=function(){var h=n.symbolic.x,c=n.symbolic.y,f=s.symbolic.x,d=s.symbolic.y,p=o.symbolic.x,v=o.symbolic.y,y="("+c+")*("+p+")-("+c+")*("+f+")+("+v+")*("+f+")-("+h+")*("+v+")+("+h+")*("+d+")-("+p+")*("+d+")",b="("+h+")^2 - 2*("+h+")*("+p+")+("+c+")^2-2*("+c+")*("+v+")-("+f+")^2+2*("+f+")*("+p+")-("+d+")^2+2*("+d+")*("+v+")";return[y,b]},o};JXG$1.createParallelPoint=function(t,r,a){var n,s,o,l,u,h;for(u=0;u<r.length;++u)r[u]=t.select(r[u]);if(r.length===3&&JXG$1.isPointType(t,r[0])&&JXG$1.isPointType(t,r[1])&&JXG$1.isPointType(t,r[2]))r=JXG$1.providePoints(t,r,a,"point"),n=r[0],s=r[1],o=r[2];else if(JXG$1.isPointType(t,r[0])&&r[1].elementClass===Const.OBJECT_CLASS_LINE)o=JXG$1.providePoints(t,[r[0]],a,"point")[0],n=r[1].point1,s=r[1].point2;else if(JXG$1.isPointType(t,r[1])&&r[0].elementClass===Const.OBJECT_CLASS_LINE)o=JXG$1.providePoints(t,[r[1]],a,"point")[0],n=r[0].point1,s=r[0].point2;else throw new Error("JSXGraph: Can't create parallel point with parent types '"+typeof r[0]+"', '"+typeof r[1]+"' and '"+typeof r[2]+`'.
Possible parent types: [line,point], [point,point,point]`);return h=JXG$1.copyAttributes(a,t.options,"parallelpoint"),l=t.create("point",[function(){return o.coords.usrCoords[1]+s.coords.usrCoords[1]-n.coords.usrCoords[1]},function(){return o.coords.usrCoords[2]+s.coords.usrCoords[2]-n.coords.usrCoords[2]}],h),JXG$1.exists(n._is_new)?(l.addChild(n),delete n._is_new):n.addChild(l),JXG$1.exists(s._is_new)?(l.addChild(s),delete s._is_new):s.addChild(l),JXG$1.exists(o._is_new)?(l.addChild(o),delete o._is_new):o.addChild(l),l.elType="parallelpoint",l.setParents([n.id,s.id,o.id]),l.prepareUpdate().update(),l.generatePolynomial=function(){var c=n.symbolic.x,f=n.symbolic.y,d=s.symbolic.x,p=s.symbolic.y,v=o.symbolic.x,y=o.symbolic.y,b=l.symbolic.x,_=l.symbolic.y,N="("+p+")*("+b+")-("+p+")*("+v+")-("+f+")*("+b+")+("+f+")*("+v+")-("+_+")*("+d+")+("+_+")*("+c+")+("+y+")*("+d+")-("+y+")*("+c+")",M="("+_+")*("+c+")-("+_+")*("+v+")-("+p+")*("+c+")+("+p+")*("+v+")-("+b+")*("+f+")+("+b+")*("+y+")+("+d+")*("+f+")-("+d+")*("+y+")";return[N,M]},l};JXG$1.createParallel=function(t,r,a){var n,s,o,l,u,h,c=1;for(u=0;u<r.length;++u)r[u]=t.select(r[u]);return n=null,r.length===3?(r=JXG$1.providePoints(t,r,a,"point"),n=r[2],c=0):JXG$1.isPointType(t,r[0])?(n=JXG$1.providePoints(t,[r[0]],a,"point")[0],l=function(){return r[1].stdform}):JXG$1.isPointType(t,r[1])&&(n=JXG$1.providePoints(t,[r[1]],a,"point")[0],l=function(){return r[0].stdform}),JXG$1.exists(a.layer)||(a.layer=t.options.layer.line),h=JXG$1.copyAttributes(a,t.options,"parallel","point"),c===1?s=t.create("point",[function(){return Mat.crossProduct([1,0,0],l())}],h):s=t.create("parallelpoint",r,h),s.isDraggable=!0,h=JXG$1.copyAttributes(a,t.options,"parallel"),o=t.create("line",[n,s],h),o.elType="parallel",o.subs={point:s},o.inherits.push(s),o.setParents([r[0].id,r[1].id]),r.length===3&&o.addParents(r[2].id),o.point=s,o};JXG$1.createArrowParallel=function(t,r,a){var n,s;try{return s=JXG$1.copyAttributes(a,t.options,"arrowparallel"),s.lastArrow===!1&&(s.lastArrow=!0),n=JXG$1.createParallel(t,r,s).setAttribute({straightFirst:!1,straightLast:!1}),n.type=Const.OBJECT_TYPE_VECTOR,n.elType="arrowparallel",n}catch{throw new Error("JSXGraph: Can't create arrowparallel with parent types '"+typeof r[0]+"' and '"+typeof r[1]+`'.
Possible parent types: [line,point], [point,point,point]`)}};JXG$1.createBisector=function(t,r,a){var n,s,o,l;if(r=JXG$1.providePoints(t,r,a,"point"),JXG$1.isPoint(r[0])&&JXG$1.isPoint(r[1])&&JXG$1.isPoint(r[2])){for(l=JXG$1.copyAttributes(a,t.options,"bisector","point"),l.snapToGrid=!1,n=t.create("point",[function(){return Geometry.angleBisector(r[0],r[1],r[2],t)}],l),n.dump=!1,o=0;o<3;o++)JXG$1.exists(r[o]._is_new)?(n.addChild(r[o]),delete r[o]._is_new):r[o].addChild(n);return JXG$1.exists(a.layer)||(a.layer=t.options.layer.line),l=JXG$1.copyAttributes(a,t.options,"bisector"),s=JXG$1.createLine(t,[r[1],n],l),s.point=n,s.elType="bisector",s.setParents(r),s.subs={point:n},s.inherits.push(n),s}throw new Error("JSXGraph: Can't create angle bisector with parent types '"+typeof r[0]+"' and '"+typeof r[1]+`'.
Possible parent types: [point,point,point]`)};JXG$1.createAngularBisectorsOfTwoLines=function(t,r,a){var n,s,o,l,u=t.select(r[0]),h=t.select(r[1]);if(u.elementClass!==Const.OBJECT_CLASS_LINE||h.elementClass!==Const.OBJECT_CLASS_LINE)throw new Error("JSXGraph: Can't create angle bisectors of two lines with parent types '"+typeof r[0]+"' and '"+typeof r[1]+`'.
Possible parent types: [line,line]`);return JXG$1.exists(a.layer)||(a.layer=t.options.layer.line),o=JXG$1.copyAttributes(a,t.options,"bisectorlines","line1"),n=t.create("line",[function(){var c=Mat.hypot(u.stdform[1],u.stdform[2]),f=Mat.hypot(h.stdform[1],h.stdform[2]);return u.stdform[0]/c-h.stdform[0]/f},function(){var c=Mat.hypot(u.stdform[1],u.stdform[2]),f=Mat.hypot(h.stdform[1],h.stdform[2]);return u.stdform[1]/c-h.stdform[1]/f},function(){var c=Mat.hypot(u.stdform[1],u.stdform[2]),f=Mat.hypot(h.stdform[1],h.stdform[2]);return u.stdform[2]/c-h.stdform[2]/f}],o),JXG$1.exists(a.layer)||(a.layer=t.options.layer.line),o=JXG$1.copyAttributes(a,t.options,"bisectorlines","line2"),s=t.create("line",[function(){var c=Mat.hypot(u.stdform[1],u.stdform[2]),f=Mat.hypot(h.stdform[1],h.stdform[2]);return u.stdform[0]/c+h.stdform[0]/f},function(){var c=Mat.hypot(u.stdform[1],u.stdform[2]),f=Mat.hypot(h.stdform[1],h.stdform[2]);return u.stdform[1]/c+h.stdform[1]/f},function(){var c=Mat.hypot(u.stdform[1],u.stdform[2]),f=Mat.hypot(h.stdform[1],h.stdform[2]);return u.stdform[2]/c+h.stdform[2]/f}],o),l=new Composition({line1:n,line2:s}),n.dump=!1,s.dump=!1,l.elType="bisectorlines",l.setParents([u.id,h.id]),l.subs={line1:n,line2:s},l};JXG$1.createCircumcenter=function(t,r,a){var n,s,o,l,u;if(r=JXG$1.providePoints(t,r,a,"point"),JXG$1.isPoint(r[0])&&JXG$1.isPoint(r[1])&&JXG$1.isPoint(r[2])){for(o=r[0],l=r[1],u=r[2],n=JXG$1.createPoint(t,[function(){return Geometry.circumcenter(o,l,u,t)}],a),s=0;s<3;s++)JXG$1.exists(r[s]._is_new)?(n.addChild(r[s]),delete r[s]._is_new):r[s].addChild(n);return n.elType="circumcenter",n.setParents(r),n.generatePolynomial=function(){var h=o.symbolic.x,c=o.symbolic.y,f=l.symbolic.x,d=l.symbolic.y,p=u.symbolic.x,v=u.symbolic.y,y=n.symbolic.x,b=n.symbolic.y,_=["((",y,")-(",h,"))^2+((",b,")-(",c,"))^2-((",y,")-(",f,"))^2-((",b,")-(",d,"))^2"].join(""),N=["((",y,")-(",h,"))^2+((",b,")-(",c,"))^2-((",y,")-(",p,"))^2-((",b,")-(",v,"))^2"].join("");return[_,N]},n}throw new Error("JSXGraph: Can't create circumcircle midpoint with parent types '"+typeof r[0]+"', '"+typeof r[1]+"' and '"+typeof r[2]+`'.
Possible parent types: [point,point,point]`)};JXG$1.createIncenter=function(t,r,a){var n,s,o,l,u;if(r=JXG$1.providePoints(t,r,a,"point"),r.length>=3&&JXG$1.isPoint(r[0])&&JXG$1.isPoint(r[1])&&JXG$1.isPoint(r[2])){for(s=r[0],o=r[1],l=r[2],n=t.create("point",[function(){var h,c,f;return h=Mat.hypot(o.X()-l.X(),o.Y()-l.Y()),c=Mat.hypot(s.X()-l.X(),s.Y()-l.Y()),f=Mat.hypot(o.X()-s.X(),o.Y()-s.Y()),new Coords(Const.COORDS_BY_USER,[(h*s.X()+c*o.X()+f*l.X())/(h+c+f),(h*s.Y()+c*o.Y()+f*l.Y())/(h+c+f)],t)}],a),u=0;u<3;u++)JXG$1.exists(r[u]._is_new)?(n.addChild(r[u]),delete r[u]._is_new):r[u].addChild(n);n.elType="incenter",n.setParents(r)}else throw new Error("JSXGraph: Can't create incenter with parent types '"+typeof r[0]+"', '"+typeof r[1]+"' and '"+typeof r[2]+`'.
Possible parent types: [point,point,point]`);return n};JXG$1.createCircumcircle=function(t,r,a){var n,s,o,l;if(r=JXG$1.providePoints(t,r,a,"point"),r===!1)throw new Error("JSXGraph: Can't create circumcircle with parent types '"+typeof r[0]+"', '"+typeof r[1]+"' and '"+typeof r[2]+`'.
Possible parent types: [point,point,point]`);try{for(o=JXG$1.copyAttributes(a,t.options,"circumcircle","center"),n=JXG$1.createCircumcenter(t,r,o),n.dump=!1,JXG$1.exists(a.layer)||(a.layer=t.options.layer.circle),o=JXG$1.copyAttributes(a,t.options,"circumcircle"),s=JXG$1.createCircle(t,[n,r[0]],o),s.elType="circumcircle",s.setParents(r),s.subs={center:n},s.inherits.push(s),l=0;l<3;l++)JXG$1.exists(r[l]._is_new)?(s.addChild(r[l]),delete r[l]._is_new):r[l].addChild(s)}catch{throw new Error("JSXGraph: Can't create circumcircle with parent types '"+typeof r[0]+"', '"+typeof r[1]+"' and '"+typeof r[2]+`'.
Possible parent types: [point,point,point]`)}return s};JXG$1.createIncircle=function(t,r,a){var n,s,o,l;if(r=JXG$1.providePoints(t,r,a,"point"),r===!1)throw new Error("JSXGraph: Can't create circumcircle with parent types '"+typeof r[0]+"', '"+typeof r[1]+"' and '"+typeof r[2]+`'.
Possible parent types: [point,point,point]`);try{for(l=JXG$1.copyAttributes(a,t.options,"incircle","center"),s=JXG$1.createIncenter(t,r,l),s.dump=!1,JXG$1.exists(a.layer)||(a.layer=t.options.layer.circle),l=JXG$1.copyAttributes(a,t.options,"incircle"),o=JXG$1.createCircle(t,[s,function(){var u=Mat.hypot(r[1].X()-r[2].X(),r[1].Y()-r[2].Y()),h=Mat.hypot(r[0].X()-r[2].X(),r[0].Y()-r[2].Y()),c=Mat.hypot(r[1].X()-r[0].X(),r[1].Y()-r[0].Y()),f=(u+h+c)/2;return Math.sqrt((f-u)*(f-h)*(f-c)/f)}],l),o.elType="incircle",o.setParents(r),n=0;n<3;n++)JXG$1.exists(r[n]._is_new)?(o.addChild(r[n]),delete r[n]._is_new):r[n].addChild(o);o.center=s,o.subs={center:o.center},o.inherits.push(s)}catch{throw new Error("JSXGraph: Can't create circumcircle with parent types '"+typeof r[0]+"', '"+typeof r[1]+"' and '"+typeof r[2]+`'.
Possible parent types: [point,point,point]`)}return o};JXG$1.createReflection=function(t,r,a){var n,s,o,l,u,h,c,f,d=`
Possible parent types: [point|line|curve|polygon|circle|arc|sector, line]`;for(h=0;h<r.length;++h)r[h]=t.select(r[h]);if(c=JXG$1.copyAttributes(a,t.options,"reflection"),JXG$1.isPoint(r[0]))s=JXG$1.providePoints(t,[r[0]],f)[0];else if(r[0].elementClass===Const.OBJECT_CLASS_CURVE||r[0].elementClass===Const.OBJECT_CLASS_LINE||r[0].type===Const.OBJECT_TYPE_POLYGON||r[0].elementClass===Const.OBJECT_CLASS_CIRCLE)s=r[0];else throw new Error("JSXGraph: Can't create reflection element with parent types '"+typeof r[0]+"' and '"+typeof r[1]+"'."+d);if(r[1].elementClass===Const.OBJECT_CLASS_LINE)n=r[1];else throw new Error("JSXGraph: Can't create reflected element with parent types '"+typeof r[0]+"' and '"+typeof r[1]+"'."+d);if(u=JXG$1.createTransform(t,[n],{type:"reflect"}),JXG$1.isPoint(s))o=JXG$1.createPoint(t,[s,u],c);else if(s.elementClass===Const.OBJECT_CLASS_CURVE)o=JXG$1.createCurve(t,[s,u],c);else if(s.elementClass===Const.OBJECT_CLASS_LINE)o=JXG$1.createLine(t,[s,u],c);else if(s.type===Const.OBJECT_TYPE_POLYGON)o=JXG$1.createPolygon(t,[s,u],c);else if(s.elementClass===Const.OBJECT_CLASS_CIRCLE)c.type.toLowerCase()==="euclidean"?(f=JXG$1.copyAttributes(a,t.options,"reflection","center"),l=JXG$1.createPoint(t,[s.center,u],f),l.prepareUpdate().update().updateVisibility(l.evalVisProp("visible")).updateRenderer(),o=JXG$1.createCircle(t,[l,function(){return s.Radius()}],c)):o=JXG$1.createCircle(t,[s,u],c);else throw new Error("JSXGraph: Can't create reflected element with parent types '"+typeof r[0]+"' and '"+typeof r[1]+"'."+d);return JXG$1.exists(s._is_new)&&(o.addChild(s),delete s._is_new),n.addChild(o),o.elType="reflection",o.addParents(n),o.prepareUpdate().update(),JXG$1.isPoint(o)&&(o.generatePolynomial=function(){var p=n.point1.symbolic.x,v=n.point1.symbolic.y,y=n.point2.symbolic.x,b=n.point2.symbolic.y,_=s.symbolic.x,N=s.symbolic.y,M=o.symbolic.x,C=o.symbolic.y,$=["((",C,")-(",N,"))*((",v,")-(",b,"))+((",p,")-(",y,"))*((",M,")-(",_,"))"].join(""),w=["((",M,")-(",p,"))^2+((",C,")-(",v,"))^2-((",_,")-(",p,"))^2-((",N,")-(",v,"))^2"].join("");return[$,w]}),o};JXG$1.createMirrorElement=function(t,r,a){var n,s,o,l,u,h,c,f,d=`
Possible parent types: [point|line|curve|polygon|circle|arc|sector, point]`;for(s=0;s<r.length;++s)r[s]=t.select(r[s]);if(c=JXG$1.copyAttributes(a,t.options,"mirrorelement"),JXG$1.isPoint(r[0]))n=JXG$1.providePoints(t,[r[0]],c)[0];else if(r[0].elementClass===Const.OBJECT_CLASS_CURVE||r[0].elementClass===Const.OBJECT_CLASS_LINE||r[0].type===Const.OBJECT_TYPE_POLYGON||r[0].elementClass===Const.OBJECT_CLASS_CIRCLE)n=r[0];else throw new Error("JSXGraph: Can't create mirror element with parent types '"+typeof r[0]+"' and '"+typeof r[1]+"'."+d);if(JXG$1.isPoint(r[1]))f=JXG$1.copyAttributes(a,t.options,"mirrorelement","point"),o=JXG$1.providePoints(t,[r[1]],f)[0];else throw new Error("JSXGraph: Can't create mirror element with parent types '"+typeof r[0]+"' and '"+typeof r[1]+"'."+d);if(h=JXG$1.createTransform(t,[Math.PI,o],{type:"rotate"}),JXG$1.isPoint(n))l=JXG$1.createPoint(t,[n,h],c);else if(n.elementClass===Const.OBJECT_CLASS_CURVE)l=JXG$1.createCurve(t,[n,h],c);else if(n.elementClass===Const.OBJECT_CLASS_LINE)l=JXG$1.createLine(t,[n,h],c);else if(n.type===Const.OBJECT_TYPE_POLYGON)l=JXG$1.createPolygon(t,[n,h],c);else if(n.elementClass===Const.OBJECT_CLASS_CIRCLE)c.type.toLowerCase()==="euclidean"?(f=JXG$1.copyAttributes(a,t.options,"mirrorelement","center"),u=JXG$1.createPoint(t,[n.center,h],f),u.prepareUpdate().update().updateVisibility(u.evalVisProp("visible")).updateRenderer(),l=JXG$1.createCircle(t,[u,function(){return n.Radius()}],c)):l=JXG$1.createCircle(t,[n,h],c);else throw new Error("JSXGraph: Can't create mirror element with parent types '"+typeof r[0]+"' and '"+typeof r[1]+"'."+d);return JXG$1.exists(n._is_new)&&(l.addChild(n),delete n._is_new),o.addChild(l),l.elType="mirrorelement",l.addParents(o),l.prepareUpdate().update(),l};JXG$1.createMirrorPoint=function(t,r,a){var n=JXG$1.createMirrorElement(t,r,a);return n.elType="mirrorpoint",n};JXG$1.createIntegral=function(t,r,a){var n,s,o,l,u,h,c,f,d,p,v,y,b,_,N=null,M;if(JXG$1.isArray(r[0])&&r[1].elementClass===Const.OBJECT_CLASS_CURVE)n=r[0],s=r[1];else if(JXG$1.isArray(r[1])&&r[0].elementClass===Const.OBJECT_CLASS_CURVE)n=r[1],s=r[0];else throw new Error("JSXGraph: Can't create integral with parent types '"+typeof r[0]+"' and '"+typeof r[1]+`'.
Possible parent types: [[number|function,number|function],curve]`);return o=JXG$1.copyAttributes(a,t.options,"integral"),o.withlabel=!1,M=t.create("curve",[[0],[0]],o),t.objectsList.pop(),l=n[0],u=n[1],JXG$1.isFunction(l)?(h=l,c=function(){return s.Y(h())},l=h()):(h=l,c=s.Y(l)),JXG$1.isFunction(u)?(f=u,d=function(){return s.Y(f())},u=f()):(f=u,d=s.Y(u)),o=JXG$1.copyAttributes(a,t.options,"integral","curveleft"),p=t.create("glider",[h,c,s],o),JXG$1.isFunction(h)&&p.hideElement(),o=JXG$1.copyAttributes(a,t.options,"integral","baseleft"),v=t.create("point",[function(){return M.evalVisProp("axis")==="y"?0:p.X()},function(){return M.evalVisProp("axis")==="y"?p.Y():0}],o),o=JXG$1.copyAttributes(a,t.options,"integral","curveright"),y=t.create("glider",[f,d,s],o),JXG$1.isFunction(f)&&y.hideElement(),o=JXG$1.copyAttributes(a,t.options,"integral","baseright"),b=t.create("point",[function(){return M.evalVisProp("axis")==="y"?0:y.X()},function(){return M.evalVisProp("axis")==="y"?y.Y():0}],o),M._pos=t.objectsList.length,t.objectsList.push(M),o=JXG$1.copyAttributes(a,t.options,"integral"),o.withlabel!==!1&&o.axis!=="y"&&(o=JXG$1.copyAttributes(a,t.options,"integral","label"),o=JXG$1.copyAttributes(o,t.options,"label"),N=t.create("text",[function(){var C=new Coords(Const.COORDS_BY_SCREEN,[this.evalVisProp("offset.0")+this.board.origin.scrCoords[1],0],this.board,!1),$=this.board.getBoundingBox(),w=($[2]-$[0])*.1,A=y.X();return A<$[0]?A=$[0]+w:A>$[2]&&(A=$[2]-w),A+C.usrCoords[1]},function(){var C=new Coords(Const.COORDS_BY_SCREEN,[0,this.evalVisProp("offset.1")+this.board.origin.scrCoords[2]],this.board,!1),$=this.board.getBoundingBox(),w=($[1]-$[3])*.1,A=y.Y();return A>$[1]?A=$[1]-w:A<$[3]&&(A=$[3]+w),A+C.usrCoords[2]},""],o),_=function(){var C="&int;",$=Numerics.NewtonCotes([v.X(),b.X()],s.Y),w=N.evalVisProp("digits"),A;return N.useLocale()?A=N.formatNumberLocale($,w):A=JXG$1.toFixed($,w),(N.evalVisProp("usemathjax")||N.evalVisProp("usekatex"))&&(C="\\int"),C+" = "+A},N.setText(_),N.dump=!1,p.addChild(N),y.addChild(N)),p.dump=!1,v.dump=!1,y.dump=!1,b.dump=!1,M.elType="integral",M.setParents([s.id,n]),M.subs={curveLeft:p,baseLeft:v,curveRight:y,baseRight:b},M.inherits.push(p,v,y,b),o.withlabel&&(M.subs.label=N,M.inherits.push(N)),M.Value=function(){return Numerics.I([v.X(),b.X()],s.Y)},M.updateDataArray=function(){var C,$,w,A,X,O,G,R,B;if(this.evalVisProp("axis")==="y"){for(p.Y()<y.Y()?(O=p.X(),R=p.Y(),G=y.X(),B=y.Y()):(O=y.X(),R=y.Y(),G=p.X(),B=p.Y()),A=Math.min(O,G),X=Math.max(O,G),C=[0,O],$=[R,R],w=0;w<s.numberPoints;w++)R<=s.points[w].usrCoords[2]&&A<=s.points[w].usrCoords[1]&&s.points[w].usrCoords[2]<=B&&s.points[w].usrCoords[1]<=X&&(C.push(s.points[w].usrCoords[1]),$.push(s.points[w].usrCoords[2]));C.push(G),$.push(B),C.push(0),$.push(B),C.push(0),$.push(R)}else{for(v.X()<b.X()?(A=v.X(),X=b.X()):(A=b.X(),X=v.X()),C=[A,A],$=[0,s.Y(A)],w=0;w<s.numberPoints;w++)A<=s.points[w].usrCoords[1]&&s.points[w].usrCoords[1]<=X&&(C.push(s.points[w].usrCoords[1]),$.push(s.points[w].usrCoords[2]));C.push(X),$.push(s.Y(X)),C.push(X),$.push(0),C.push(A),$.push(0)}this.dataX=C,this.dataY=$},p.addChild(M),y.addChild(M),v.addChild(M),b.addChild(M),M.baseLeft=v,M.baseRight=b,M.curveLeft=p,M.curveRight=y,M.methodMap=JXG$1.deepCopy(M.methodMap,{curveLeft:"curveLeft",baseLeft:"baseLeft",curveRight:"curveRight",baseRight:"baseRight",Value:"Value"}),M.label=N,M};JXG$1.createInequality=function(t,r,a){var n,s,o;if(o=JXG$1.copyAttributes(a,t.options,"inequality"),r[0].elementClass===Const.OBJECT_CLASS_LINE)s=t.create("curve",[[],[]],o),s.hasPoint=function(){return!1},s.updateDataArray=function(){var l,u,h,c=t.getBoundingBox(),f=this.evalVisProp("inverse"),d=f?-1:1,p=1.5,v=p*Math.max(c[2]-c[0],c[1]-c[3]),y={coords:{usrCoords:[1,(c[0]+c[2])*.5,f?c[1]:c[3]]}},b=r[0].stdform.slice(1),_=b;h=p*Math.max(Geometry.perpendicular(r[0],y,t)[0].distance(Const.COORDS_BY_USER,y.coords),v),h*=d,y={coords:{usrCoords:[1,(c[0]+c[2])*.5,(c[1]+c[3])*.5]}},Math.abs(Mat.innerProduct(y.coords.usrCoords,r[0].stdform,3))>=Mat.eps?y=Geometry.perpendicular(r[0],y,t)[0].usrCoords:y=y.coords.usrCoords,l=[1,y[1]+b[1]*v,y[2]-b[0]*v],u=[1,y[1]-_[1]*v,y[2]+_[0]*v],this.dataX=[l[1],l[1]+b[0]*h,u[1]+_[0]*h,u[1],l[1]],this.dataY=[l[2],l[2]+b[1]*h,u[2]+_[1]*h,u[2],l[2]]};else if(r[0].elementClass===Const.OBJECT_CLASS_CURVE&&r[0].visProp.curvetype==="functiongraph")s=t.create("curve",[[],[]],o),s.updateDataArray=function(){var l=this.board.getBoundingBox(),u=[],h,c,f,d,p,v=r[0].minX(),y=r[0].maxX(),b,_,N,M,C=(l[1]-l[3])*.3,$=this.evalVisProp("inverse");if(h=$?1:3,this.dataX=[],this.dataY=[],d=r[0].points.length,d!==0)for(l[1]+=C,l[3]-=C,f=-1;f<d-1;){for(p=f+1,c=d;p<d;p++)if(r[0].points[p].isReal()){c=p;break}if(c>=d)break;for(p=c,f=d-1;p<d-1;p++)if(!r[0].points[p+1].isReal()){f=p;break}for(N=r[0].points[c].usrCoords[1],M=r[0].points[f].usrCoords[1],b=l[0]<v?v:l[0],_=l[2]>y?y:l[2],b=c===0?b:Math.max(b,N),_=f===d-1?_:Math.min(_,M),b=c===0?v:N,_=f===d-1?y:M,u=[],u.push([1,b,l[h]]),u.push([1,b,r[0].points[c].usrCoords[2]]),p=c;p<=f;p++)u.push(r[0].points[p].usrCoords);for(u.push([1,_,r[0].points[f].usrCoords[2]]),u.push([1,_,l[h]]),u.push(u[0]),p=0;p<u.length;p++)this.dataX.push(u[p][1]),this.dataY.push(u[p][2]);f<d-1&&(this.dataX.push(NaN),this.dataY.push(NaN))}},s.hasPoint=function(){return!1};else if(n=JXG$1.createFunction(r[0]),s.addParentsFromJCFunctions([n]),!JXG$1.exists(n))throw new Error(`JSXGraph: Can't create area with the given parents.
Possible parent types: [line], [function]`);return s.addParents(r[0]),s};JXG$1.registerElement("arrowparallel",JXG$1.createArrowParallel);JXG$1.registerElement("bisector",JXG$1.createBisector);JXG$1.registerElement("bisectorlines",JXG$1.createAngularBisectorsOfTwoLines);JXG$1.registerElement("msector",JXG$1.createMsector);JXG$1.registerElement("circumcircle",JXG$1.createCircumcircle);JXG$1.registerElement("circumcirclemidpoint",JXG$1.createCircumcenter);JXG$1.registerElement("circumcenter",JXG$1.createCircumcenter);JXG$1.registerElement("incenter",JXG$1.createIncenter);JXG$1.registerElement("incircle",JXG$1.createIncircle);JXG$1.registerElement("integral",JXG$1.createIntegral);JXG$1.registerElement("midpoint",JXG$1.createMidpoint);JXG$1.registerElement("mirrorelement",JXG$1.createMirrorElement);JXG$1.registerElement("mirrorpoint",JXG$1.createMirrorPoint);JXG$1.registerElement("orthogonalprojection",JXG$1.createOrthogonalProjection);JXG$1.registerElement("parallel",JXG$1.createParallel);JXG$1.registerElement("parallelpoint",JXG$1.createParallelPoint);JXG$1.registerElement("perpendicular",JXG$1.createPerpendicular);JXG$1.registerElement("perpendicularpoint",JXG$1.createPerpendicularPoint);JXG$1.registerElement("perpendicularsegment",JXG$1.createPerpendicularSegment);JXG$1.registerElement("reflection",JXG$1.createReflection);JXG$1.registerElement("inequality",JXG$1.createInequality);JXG$1.createGrid=function(t,r,a){var n=Mat.eps,s=5e3,o,l,u,h,c,f,d,p=[],v=[],y;if(u=r,u.length>2||u.length>=1&&u[0].elType!=="axis"||u.length>=2&&u[1].elType!=="axis")throw new Error("JSXGraph: Can't create 'grid' with parent type '"+r[0].elType+"'. Possible parent types: [axis,axis]");return!JXG$1.exists(u[0])&&JXG$1.exists(t.defaultAxes)&&(u[0]=t.defaultAxes.x),!JXG$1.exists(u[1])&&JXG$1.exists(t.defaultAxes)&&(u[1]=t.defaultAxes.y),y=function(b,_,N,M,C,$,w){var A,X,O,G,R,B,F;switch(b.toLowerCase()){case".":case"point":return _.visProp.linecap="round",_.visProp.strokewidth=C*_.board.unitX+$*_.board.unitY,[[N,N,NaN],[M,M,NaN]];case"o":case"circle":return _.visProp.linecap="square",_.bezierDegree=3,X=4*Math.tan(Math.PI/8)/3,[[N+C,N+C,N+X*C,N,N-X*C,N-C,N-C,N-C,N-X*C,N,N+X*C,N+C,N+C,NaN],[M,M+X*$,M+$,M+$,M+$,M+X*$,M,M-X*$,M-$,M-$,M-$,M-X*$,M,NaN]];case"regpol":case"regularpolygon":for(_.visProp.linecap="round",G=_.evalVisProp("polygonvertices"),R=[[],[]],A=0;A<=2*Math.PI;A+=2*Math.PI/G)R[0].push(N-C*Math.sin(A)),R[1].push(M-$*Math.cos(A));return R[0].push(NaN),R[1].push(NaN),R;case"[]":case"square":return _.visProp.linecap="square",[[N-C,N+C,N+C,N-C,N-C,NaN],[M+$,M+$,M-$,M-$,M+$,NaN]];case"<>":case"diamond":return _.visProp.linecap="square",[[N,N+C,N,N-C,N,NaN],[M+$,M,M-$,M,M+$,NaN]];case"<<>>":case"diamond2":return _.visProp.linecap="square",B=C*Math.sqrt(2),F=$*Math.sqrt(2),[[N,N+B,N,N-B,N,NaN],[M+F,M,M-F,M,M+F,NaN]];case"x":case"cross":return[[N-C,N+C,NaN,N-C,N+C,NaN],[M+$,M-$,NaN,M-$,M+$,NaN]];case"+":case"plus":return[[N-C,N+C,NaN,N,N,NaN],[M,M,NaN,M-$,M+$,NaN]];case"-":case"minus":return[[N-C,N+C,NaN],[M,M,NaN]];case"|":case"divide":return[[N,N,NaN],[M-$,M+$,NaN]];case"^":case"a":case"A":case"triangleup":return[[N-C,N,N+C,NaN],[M-$,M,M-$,NaN]];case"v":case"triangledown":return[[N-C,N,N+C,NaN],[M+$,M,M+$,NaN]];case"<":case"triangleleft":return[[N+C,N,N+C,NaN],[M+$,M,M-$,NaN]];case">":case"triangleright":return[[N-C,N,N-C,NaN],[M+$,M,M-$,NaN]];case"line":return O=_.evalVisProp("margin"),[[N,N,NaN,w[0]-O/_.board.unitX,w[2]+O/_.board.unitX,NaN],[w[1]+O/_.board.unitY,w[3]-O/_.board.unitY,NaN,M,M,NaN]];default:return[[],[]]}},h=JXG$1.copyAttributes(a,t.options,"grid"),JXG$1.mergeAttr(h,h.themes[h.theme],!1),c={},JXG$1.mergeAttr(c,h,!0,!0),JXG$1.mergeAttr(c,h.major,!0,!0),o=t.create("curve",[[null],[null]],c),o.elType="grid",o.type=Const.OBJECT_TYPE_GRID,f={},JXG$1.mergeAttr(f,h,!0,!0),JXG$1.mergeAttr(f,h.minor,!0,!0),f.id===c.id&&(f.id=o.id+"_minor"),f.name===c.name&&(f.name=o.name+"_minor"),l=t.create("curve",[[null],[null]],f),l.elType="grid",l.type=Const.OBJECT_TYPE_GRID,o.minorGrid=l,l.majorGrid=o,o.hasPoint=function(){return!1},l.hasPoint=function(){return!1},o.inherits.push(l),o.updateDataArray=function(){var b=this.board.getBoundingBox(),_,N,M,C,$,w,A,X,O=this.evalVisProp("gridx"),G=this.evalVisProp("gridy"),R=this.evalVisProp("face"),B=this.evalVisProp("drawzero"),F=B===!0||JXG$1.isObject(B)&&this.eval(B.origin)===!0,U=B===!0||JXG$1.isObject(B)&&this.eval(B.x)===!0,q=B===!0||JXG$1.isObject(B)&&this.eval(B.y)===!0,ee=this.evalVisProp("includeboundaries"),z=this.evalVisProp("forcesquare");if(this.dataX=[],this.dataY=[],d=this.evalVisProp("majorstep"),JXG$1.isArray(d)||(d=[d,d]),d.length<2&&(d=[d[0],d[0]]),JXG$1.exists(O)&&(JXG$1.deprecated("gridX","majorStep"),d[0]=O),JXG$1.exists(G)&&(JXG$1.deprecated("gridY","majorStep"),d[1]=G),d[0]==="auto"?(X=Math.pow(10,Math.floor(Math.log(50/this.board.unitX)/Math.LN10)),d[0]=X,JXG$1.exists(u[0])&&(d[0]=u[0].ticks[0].getDistanceMajorTicks())):d[0]=JXG$1.parseNumber(d[0],Math.abs(b[1]-b[3]),1/this.board.unitX),d[1]==="auto"?(X=Math.pow(10,Math.floor(Math.log(50/this.board.unitY)/Math.LN10)),d[1]=X,JXG$1.exists(u[1])&&(d[1]=u[1].ticks[0].getDistanceMajorTicks())):d[1]=JXG$1.parseNumber(d[1],Math.abs(b[0]-b[2]),1/this.board.unitY),z==="min"||z===!0?d[0]*this.board.unitX<=d[1]*this.board.unitY?d[1]=d[0]/this.board.unitY*this.board.unitX:d[0]=d[1]/this.board.unitX*this.board.unitY:z==="max"&&(d[0]*this.board.unitX<=d[1]*this.board.unitY?d[0]=d[1]/this.board.unitX*this.board.unitY:d[1]=d[0]/this.board.unitY*this.board.unitX),p=this.evalVisProp("size"),JXG$1.isArray(p)||(p=[p,p]),p.length<2&&(p=[p[0],p[0]]),JXG$1.isNumber(p[0],!0)&&(p[0]=p[0]+"px"),JXG$1.isNumber(p[1],!0)&&(p[1]=p[1]+"px"),p[0]=JXG$1.parseNumber(p[0],d[0],1/this.board.unitX),p[1]=JXG$1.parseNumber(p[1],d[1],1/this.board.unitY),v[0]=p[0]/2,v[1]=p[1]/2,_=Mat.roundToStep(b[0],d[0]),N=Mat.roundToStep(b[1],d[1]),A=isFinite(_)&&isFinite(N)&&isFinite(b[2])&&isFinite(b[3])&&Math.abs(b[2])<Math.abs(d[0]*s)&&Math.abs(b[3])<Math.abs(d[1]*s),R.toLowerCase()==="line"){for($=o.evalVisProp("margin"),C=N;A&&C>=b[3];C-=d[1])!F&&Math.abs(C)<n||!q&&Math.abs(C)<n||!ee&&(C<=b[3]+v[1]||C>=b[1]-v[1])||(w=[[b[0]-$/o.board.unitX,b[2]+$/o.board.unitX,NaN],[C,C,NaN]],JXG$1.concat(this.dataX,w[0]),JXG$1.concat(this.dataY,w[1]));for(M=_;A&&M<=b[2];M+=d[0])!F&&Math.abs(M)<n||!U&&Math.abs(M)<n||!ee&&(M<=b[0]+v[0]||M>=b[2]-v[0])||(w=[[M,M,NaN],[b[1]+$/o.board.unitY,b[3]-$/o.board.unitY,NaN]],JXG$1.concat(this.dataX,w[0]),JXG$1.concat(this.dataY,w[1]))}else for(C=N;A&&C>=b[3];C-=d[1])for(M=_;A&&M<=b[2];M+=d[0])!F&&Math.abs(C)<n&&Math.abs(M)<n||!U&&Math.abs(C)<n&&Math.abs(M)>=n||!q&&Math.abs(M)<n&&Math.abs(C)>=n||!ee&&(M<=b[0]+v[0]||M>=b[2]-v[0]||C<=b[3]+v[1]||C>=b[1]-v[1])||(w=y(R,o,M,C,v[0],v[1],b),JXG$1.concat(this.dataX,w[0]),JXG$1.concat(this.dataY,w[1]))},l.updateDataArray=function(){var b=this.board.getBoundingBox(),_,N,M,C,$,w,A,X=[],O=[],G,R,B,F,U,q,ee,z,Y,K,Z,ne,j=this.evalVisProp("minorelements"),V=this.evalVisProp("size"),L=this.evalVisProp("face"),ae=this.evalVisProp("drawzero"),W=ae===!0||JXG$1.isObject(ae)&&this.eval(ae.x)===!0,ve=ae===!0||JXG$1.isObject(ae)&&this.eval(ae.y)===!0,de=this.majorGrid.evalVisProp("face"),se=this.majorGrid.evalVisProp("drawzero"),ie=se===!0||JXG$1.isObject(se)&&this.eval(se.origin)===!0,ce=se===!0||JXG$1.isObject(se)&&this.eval(se.x)===!0,xe=se===!0||JXG$1.isObject(se)&&this.eval(se.y)===!0,fe=this.evalVisProp("includeboundaries");if(this.dataX=[],this.dataY=[],JXG$1.isArray(j)||(j=[j,j]),j.length<2&&(j=[j[0],j[0]]),JXG$1.isNumber(j[0],!0)?j[0]=parseFloat(j[0]):(j[0]=3,JXG$1.exists(u[0])&&(j[0]=u[0].eval(u[0].getAttribute("ticks").minorticks))),X[0]=d[0]/(j[0]+1),JXG$1.isNumber(j[1],!0)?j[1]=parseFloat(j[1]):(j[1]=3,JXG$1.exists(u[1])&&(j[1]=u[1].eval(u[1].getAttribute("ticks").minorticks))),X[1]=d[1]/(j[1]+1),JXG$1.isArray(V)||(V=[V,V]),V.length<2&&(V=[V[0],V[0]]),JXG$1.isNumber(V[0],!0)&&(V[0]=V[0]+"px"),JXG$1.isNumber(V[1],!0)&&(V[1]=V[1]+"px"),V[0]=JXG$1.parseNumber(V[0],X[0],1/this.board.unitX),V[1]=JXG$1.parseNumber(V[1],X[1],1/this.board.unitY),O[0]=V[0]*.5,O[1]=V[1]*.5,_=Mat.roundToStep(b[0],X[0]),N=Mat.roundToStep(b[1],X[1]),A=isFinite(_)&&isFinite(N)&&isFinite(b[2])&&isFinite(b[3])&&Math.abs(b[2])<=Math.abs(X[0]*s)&&Math.abs(b[3])<Math.abs(X[1]*s),L.toLowerCase()!=="line")for(C=N;A&&C>=b[3];C-=X[1])for(M=_;A&&M<=b[2];M+=X[0]){if(G=Mat.roundToStep(Math.abs(M),d[0]),G=Math.abs(G-Math.abs(M)),R=d[0]-G,B=Mat.roundToStep(Math.abs(C),d[1]),B=Math.abs(B-Math.abs(C)),F=d[1]-B,de==="line"){if(G-O[0]-v[0]<n||R-O[0]-v[0]<n||B-O[1]-v[1]<n||F-O[1]-v[1]<n)continue}else if((G-O[0]-v[0]<n||R-O[0]-v[0]<n)&&(B-O[1]-v[1]<n||F-O[1]-v[1]<n)&&(ie||v[1]-Math.abs(C)+O[1]<n||v[0]-Math.abs(M)+O[0]<n)&&(ce||v[1]-Math.abs(C)+O[1]<n||v[0]+Math.abs(M)-O[0]<n)&&(xe||v[0]-Math.abs(M)+O[0]<n||v[1]+Math.abs(C)-O[1]<n))continue;!ve&&Math.abs(M)<n||!W&&Math.abs(C)<n||(U=Math.abs(b[0]%d[0]),q=Math.abs(b[1]%d[1]),ee=Math.abs(b[2]%d[0]),z=Math.abs(b[3]%d[1]),Y=d[0]-U,K=d[1]-q,Z=d[0]-ee,ne=d[1]-z,!(!fe&&(M-O[0]-b[0]-v[0]+Y<n&&Y-v[0]<n||M-O[0]-b[0]-v[0]-U<n&&U-v[0]<n||-M-O[0]+b[2]-v[0]+Z<n&&Z-v[0]<n||-M-O[0]+b[2]-v[0]-ee<n&&ee-v[0]<n||-C-O[1]+b[1]-v[1]+K<n&&K-v[1]<n||-C-O[1]+b[1]-v[1]-q<n&&q-v[1]<n||C-O[1]-b[3]-v[1]+ne<n&&ne-v[1]<n||C-O[1]-b[3]-v[1]-z<n&&z-v[1]<n||-C-O[1]+b[1]<n||M-O[0]-b[0]<n||C-O[1]-b[3]<n||-M-O[0]+b[2]<n))&&(w=y(L,l,M,C,O[0],O[1],b),JXG$1.concat(this.dataX,w[0]),JXG$1.concat(this.dataY,w[1])))}else{for($=l.evalVisProp("margin"),C=N;A&&C>=b[3];C-=X[1]){if(B=Mat.roundToStep(Math.abs(C),d[1]),B=Math.abs(B-Math.abs(C)),F=d[1]-B,de==="line"){if(B-O[1]-v[1]<n||F-O[1]-v[1]<n)continue}else if((B-O[1]-v[1]<n||F-O[1]-v[1]<n)&&(ie||v[1]-Math.abs(C)+O[1]<n)&&(ce||v[1]-Math.abs(C)+O[1]<n)&&(xe||v[1]+Math.abs(C)-O[1]<n))continue;!W&&Math.abs(C)<n||(U=Math.abs(b[0]%d[0]),q=Math.abs(b[1]%d[1]),ee=Math.abs(b[2]%d[0]),z=Math.abs(b[3]%d[1]),Y=d[0]-U,K=d[1]-q,Z=d[0]-ee,ne=d[1]-z,!(!fe&&(-C-O[1]+b[1]-v[1]+K<n&&K-v[1]<n||-C-O[1]+b[1]-v[1]-q<n&&q-v[1]<n||C-O[1]-b[3]-v[1]+ne<n&&ne-v[1]<n||C-O[1]-b[3]-v[1]-z<n&&z-v[1]<n||-C-O[1]+b[1]<n||C-O[1]-b[3]<n))&&(w=[[b[0]-$/l.board.unitX,b[2]+$/l.board.unitX,NaN],[C,C,NaN]],JXG$1.concat(this.dataX,w[0]),JXG$1.concat(this.dataY,w[1])))}for(M=_;A&&M<=b[2];M+=X[0]){if(G=Mat.roundToStep(Math.abs(M),d[0]),G=Math.abs(G-Math.abs(M)),R=d[0]-G,de==="line"){if(G-O[0]-v[0]<n||R-O[0]-v[0]<n)continue}else if((G-O[0]-v[0]<n||R-O[0]-v[0]<n)&&(ie||v[0]-Math.abs(M)+O[0]<n)&&(ce||v[0]+Math.abs(M)-O[0]<n)&&(xe||v[0]-Math.abs(M)+O[0]<n))continue;!ve&&Math.abs(M)<n||(U=Math.abs(b[0]%d[0]),q=Math.abs(b[1]%d[1]),ee=Math.abs(b[2]%d[0]),z=Math.abs(b[3]%d[1]),Y=d[0]-U,K=d[1]-q,Z=d[0]-ee,ne=d[1]-z,!(!fe&&(M-O[0]-b[0]-v[0]+Y<n&&Y-v[0]<n||M-O[0]-b[0]-v[0]-U<n&&U-v[0]<n||-M-O[0]+b[2]-v[0]+Z<n&&Z-v[0]<n||-M-O[0]+b[2]-v[0]-ee<n&&ee-v[0]<n||M-O[0]-b[0]<n||-M-O[0]+b[2]<n))&&(w=[[M,M,NaN],[b[1]+$/l.board.unitY,b[3]-$/l.board.unitY,NaN]],JXG$1.concat(this.dataX,w[0]),JXG$1.concat(this.dataY,w[1])))}}},t.grids.push(o),t.grids.push(l),l.dump=!1,o.getParents=l.getParents=function(){return u.slice()},o};JXG$1.registerElement("grid",JXG$1.createGrid);JXG$1.Image=function(t,r,a,n,s){this.constructor(t,a,Const.OBJECT_TYPE_IMAGE,Const.OBJECT_CLASS_OTHER),this.element=this.board.select(a.anchor),this.coordsConstructor(r),this.W=JXG$1.createFunction(s[0],this.board,""),this.H=JXG$1.createFunction(s[1],this.board,""),this.addParentsFromJCFunctions([this.W,this.H]),this.usrSize=[this.W(),this.H()],this.size=[Math.abs(this.usrSize[0]*t.unitX),Math.abs(this.usrSize[1]*t.unitY)],this.url=n,this.elType="image",this.span=[this.coords.usrCoords.slice(0),[this.coords.usrCoords[0],this.W(),0],[this.coords.usrCoords[0],0,this.H()]],this.id=this.board.setId(this,"Im"),this.board.renderer.drawImage(this),this.board.finalizeAdding(this),this.methodMap=JXG$1.deepCopy(this.methodMap,{addTransformation:"addTransform",trans:"addTransform",W:"W",Width:"W",H:"H",Height:"H",setSize:"setSize"})};JXG$1.Image.prototype=new GeometryElement;JXG$1.copyPrototypeMethods(JXG$1.Image,CoordsElement,"coordsConstructor");JXG$1.extend(JXG$1.Image.prototype,{hasPoint:function(t,r){var a,n,s,o,l,u,h,c,f,d=this.transformations.length;return JXG$1.isObject(this.evalVisProp("precision"))?(o=this.board._inputDevice,l=this.evalVisProp("precision."+o)):l=this.board.options.precision.hasPoint,d===0?(a=t-this.coords.scrCoords[1],n=this.coords.scrCoords[2]-r,s=l,a>=-s&&a-this.size[0]<=s&&n>=-s&&n-this.size[1]<=s):(u=new Coords(Const.COORDS_BY_SCREEN,[t,r],this.board),u=u.usrCoords,h=[u[0]-this.span[0][0],u[1]-this.span[0][1],u[2]-this.span[0][2]],f=Mat.innerProduct,c=f(h,this.span[1]),0<=c&&c<=f(this.span[1],this.span[1])&&(c=f(h,this.span[2]),0<=c&&c<=f(this.span[2],this.span[2])))},update:function(t){return this.needsUpdate?(this.updateCoords(t),this.updateSize(),this.updateSpan(),this):this},updateRenderer:function(){return this.updateRendererGeneric("updateImage")},updateSize:function(){return this.usrSize=[this.W(),this.H()],this.size=[Math.abs(this.usrSize[0]*this.board.unitX),Math.abs(this.usrSize[1]*this.board.unitY)],this},updateSpan:function(){var t,r,a=this.transformations.length,n=[];if(a===0)this.span=[[this.Z(),this.X(),this.Y()],[this.Z(),this.W(),0],[this.Z(),0,this.H()]];else{for(n[0]=[this.Z(),this.X(),this.Y()],n[1]=[this.Z(),this.X()+this.W(),this.Y()],n[2]=[this.Z(),this.X(),this.Y()+this.H()],t=0;t<a;t++)for(r=0;r<3;r++)n[r]=Mat.matVecMult(this.transformations[t].matrix,n[r]);for(r=0;r<3;r++)n[r][1]/=n[r][0],n[r][2]/=n[r][0],n[r][0]/=n[r][0];for(r=1;r<3;r++)n[r][0]-=n[0][0],n[r][1]-=n[0][1],n[r][2]-=n[0][2];this.span=n}return this},addTransform:function(t){var r;if(JXG$1.isArray(t))for(r=0;r<t.length;r++)this.transformations.push(t[r]);else this.transformations.push(t);return this},getParents:function(){var t=[this.url,[this.Z(),this.X(),this.Y()],this.usrSize];return this.parents.length!==0&&(t=this.parents),t},setSize:function(t,r){return this.W=JXG$1.createFunction(t,this.board,""),this.H=JXG$1.createFunction(r,this.board,""),this.addParentsFromJCFunctions([this.W,this.H]),this},W:function(){},H:function(){}});JXG$1.createImage=function(t,r,a){var n,s,o=r[0],l=r[1],u=r[2];if(n=JXG$1.copyAttributes(a,t.options,"image"),s=CoordsElement.create(JXG$1.Image,t,l,n,o,u),!s)throw new Error("JSXGraph: Can't create image with parent types '"+typeof r[0]+"' and '"+typeof r[1]+`'.
Possible parent types: [x,y], [z,x,y], [element,transformation]`);return n.rotate!==0&&s.addRotation(n.rotate),s};JXG$1.registerElement("image",JXG$1.createImage);JXG$1.Image;JXG$1.createSlider=function(t,r,a){var n,s,o,l,u,h,c,f,d,p,v,y,b,_,N,M,C,$,w,A,X,O,G,R;return R=JXG$1.copyAttributes(a,t.options,"slider"),$=R.withticks,C=R.withlabel,X=R.snapwidth,w=R.snapvalues,A=R.snapvaluedistance,c=t.create("point",r[0],R.point1),f=t.create("point",r[1],R.point2),p=t.create("segment",[c,f],R.baseline),p.updateStdform(),n=c.coords.usrCoords.slice(1),s=f.coords.usrCoords.slice(1),o=r[2][0],l=r[2][1],u=r[2][2],h=u-o,O=JXG$1.evaluate(X),G=O===-1?l:Math.round((l-o)/O)*O+o,N=n[0]+(s[0]-n[0])*(G-o)/(u-o),M=n[1]+(s[1]-n[1])*(G-o)/(u-o),R.withlabel=!1,d=t.create("glider",[N,M,p],R),d.setAttribute({snapwidth:X,snapvalues:w,snapvaluedistance:A}),v=t.create("segment",[c,d],R.highline),d.Value=function(){var B=this._smax-this._smin,F=this.evalVisProp("snapwidth");return F===-1?this.position*B+this._smin:Math.round(this.position*B/F)*F+this._smin},d.methodMap=JXG$1.deepCopy(d.methodMap,{Value:"Value",setValue:"setValue",smax:"_smax",smin:"_smin",setMax:"setMax",setMin:"setMin",point1:"point1",point2:"point2",baseline:"baseline",highline:"highline",ticks:"ticks",label:"label"}),d._smax=u,d._smin=o,d.setMax=function(B){return this._smax=B,this},d.setValue=function(B){var F=this._smax-this._smin;return Math.abs(F)>Mat.eps?this.position=(B-this._smin)/F:this.position=0,this.position=Math.max(0,Math.min(1,this.position)),this},d.setMin=function(B){return this._smin=B,this},C&&(_=t.create("text",[function(){return(f.X()-c.X())*.05+f.X()},function(){return(f.Y()-c.Y())*.05+f.Y()},function(){var B,F=d.evalVisProp("digits"),U=d.evalVisProp("suffixlabel"),q=d.evalVisProp("unitlabel"),ee=d.evalVisProp("postlabel");return F===2&&d.evalVisProp("precision")!==2&&(F=d.evalVisProp("precision")),U!==null?B=U:d.name&&d.name!==""?B=d.name+" = ":B="",d.useLocale()?B+=d.formatNumberLocale(d.Value(),F):B+=JXG$1.toFixed(d.Value(),F),q!==null&&(B+=q),ee!==null&&(B+=ee),B}],R.label),d.label=_,d.visProp.withlabel=!0,d.hasLabel=!0),d.point1=c,d.point2=f,d.baseline=p,d.highline=v,$&&(JXG$1.exists(R.generatelabeltext)||(R.ticks.generateLabelText=function(B,F,U){var q,ee=d.point1.Dist(d.point2),z=d._smin,Y=d._smax,K=this.getDistanceFromZero(F,B)*(Y-z)/ee+z;return ee<Mat.eps||Math.abs(K)<Mat.eps?q="0":q=this.formatLabelText(K),q}),y=2,b=t.create("ticks",[d.baseline,d.point1.Dist(c)/y,function(B){var F=d.point1.Dist(d.point2),U=d.point1.coords.distance(Const.COORDS_BY_USER,B);return F<Mat.eps?0:U/F*h+o}],R.ticks),d.ticks=b),d.remove=function(){C&&t.removeObject(_),t.removeObject(v),t.removeObject(p),t.removeObject(f),t.removeObject(c),Point.prototype.remove.call(d)},c.dump=!1,f.dump=!1,p.dump=!1,v.dump=!1,C&&(_.dump=!1),d.elType="slider",d.parents=r,d.subs={point1:c,point2:f,baseLine:p,highLine:v},d.inherits.push(c,f,p,v),p.inherits=[],v.inherits=[],$&&(b.dump=!1,d.subs.ticks=b,d.inherits.push(b)),d.getParents=function(){return[this.point1.coords.usrCoords.slice(1),this.point2.coords.usrCoords.slice(1),[this._smin,this.position*(this._smax-this._smin)+this._smin,this._smax]]},d.baseline.on("up",function(B){var F,U;d.evalVisProp("moveonup")&&!d.evalVisProp("fixed")&&(F=p.board.getMousePosition(B,0),U=new Coords(Const.COORDS_BY_SCREEN,F,this.board),d.moveTo([U.usrCoords[1],U.usrCoords[2]]),d.triggerEventHandlers(["drag"],[B]))}),d.prepareUpdate().update(),t.isSuspendedUpdate||(d.updateVisibility().updateRenderer(),d.baseline.updateVisibility().updateRenderer(),d.highline.updateVisibility().updateRenderer(),$&&d.ticks.updateVisibility().updateRenderer()),d};JXG$1.registerElement("slider",JXG$1.createSlider);JXG$1.PrefixParser={parse:function(t,r){var a,n,s,o,l,u;if(JXG$1.isNumber(t)||JXG$1.isString(t))return t;if(!JXG$1.isArray(t)||t.length<2)throw new Error("prefixParser.parse: term is not an array, number or string");if(a=t[0],s=t.length,r==="execute")if(JXG$1.isInArray(["+","-","*","/"],a))for(o=this.parse(t[1],r),n=2;n<s;n++)switch(u=this.parse(t[n],r),a){case"+":o+=u;break;case"-":o-=u;break;case"*":o*=u;break;case"/":o/=u;break}else if(a==="exec"){for(l=t[1],u=[],n=2;n<s;n++)u.push(this.parse(t[n],r));if(JXG$1.exists(Math[l]))o=Math[l].apply(this,u);else if(JXG$1.exists(Mat[l]))o=Mat[l].apply(this,u);else throw new Error("PrefixParser.parse: "+l+" is not allowed")}else{if(l=t[0],l==="V"&&(l="Value"),l==="Coords"&&(t[2]="true"),!JXG$1.exists(t[1][l]))throw new Error("PrefixParser.parse: "+l+" is not a method of "+t[1]);for(u=[],n=2;n<s;n++)u.push(this.parse(t[n],r));o=t[1][l].apply(t[1],u)}return o},dimension:function(t){var r,a,n,s,o,l,u,h;if(JXG$1.isNumber(t))return 0;if(!JXG$1.isArray(t)||t.length<2)throw new Error("PrefixParser.dimension: term is not an array");if(r=t[0],n=t.length,JXG$1.isInArray(["+","-","*","/"],r))for(s=this.dimension(t[1]),a=2;a<n;a++)switch(u=this.dimension(t[a]),r){case"+":u!==s&&(s=NaN);break;case"-":u!==s&&(s=NaN);break;case"*":s+=u;break;case"/":s-=u;break}else if(r==="exec")t[2].type===JXG$1.OBJECT_TYPE_MEASUREMENT?(s=t[2].Dimension(),JXG$1.exists(t[2].visProp.dim)&&(l=t[2].evalVisProp("dim"),l!==null&&(s=l))):s=0;else switch(o=t[0],o){case"L":case"Length":case"Perimeter":case"Radius":case"R":s=1;break;case"Area":case"A":s=2;break;default:t[1].type===JXG$1.OBJECT_TYPE_MEASUREMENT?(s=t[1].Dimension(),JXG$1.exists(t[1].visProp.dim)&&(l=t[1].evalVisProp("dim"),l!==null&&(s=l))):(s=0,(o==="Value"||o==="V")&&[Const.OBJECT_TYPE_ARC,Const.OBJECT_TYPE_SECTOR,Const.OBJECT_TYPE_ANGLE].indexOf(t[1].type)>=0&&(h="",t.length===3&&JXG$1.isString(t[2])&&(h=t[2].toLowerCase()),h===""?t[1].type===Const.OBJECT_TYPE_ANGLE?s=0:s=1:h.indexOf("len")===0?s=1:s=0))}return s},toPrefix:function(t){var r,a,n,s;if(JXG$1.isNumber(t))return t;if(!JXG$1.isArray(t)||t.length<2)throw new Error("PrefixParser.toPrefix: term is not an array");for(r=t[0],n=t.length,s=[r],a=1;a<n;a++)JXG$1.isInArray(["+","-","*","/"],r)?s.push(this.toPrefix(t[a])):r==="V"&&t[a].type===JXG$1.OBJECT_TYPE_MEASUREMENT?s=t[a].toPrefix():r==="exec"?a===1?s.push(t[a]):s.push(this.toPrefix(t[a])):s=[r,t[a].id];return s},getParents:function(t){var r,a,n,s;if(JXG$1.isNumber(t))return[];if(!JXG$1.isArray(t)||t.length<2)throw new Error("PrefixParser.getParents: term is not an array");for(r=t[0],n=t.length,s=[],a=1;a<n;a++)JXG$1.isInArray(["+","-","*","/"],r)?JXG$1.concat(s,this.getParents(t[a])):r==="V"&&t[a].type===JXG$1.OBJECT_TYPE_MEASUREMENT?JXG$1.concat(s,t[a].getParents()):r==="exec"?a>1&&JXG$1.concat(s,this.getParents(t[a])):s.push(t[a]);return s}};const Prefix=JXG$1.PrefixParser;JXG$1.createTapemeasure=function(t,r,a){var n,s,o,l,u,h,c,f,d,p,v;return n=r[0],s=r[1],o=JXG$1.copyAttributes(a,t.options,"tapemeasure","point1"),f=t.create("point",n,o),o=JXG$1.copyAttributes(a,t.options,"tapemeasure","point2"),d=t.create("point",s,o),f.setAttribute({ignoredSnapToPoints:[d.id]}),d.setAttribute({ignoredSnapToPoints:[f.id]}),o=JXG$1.copyAttributes(a,t.options,"tapemeasure"),l=o.withticks,u=o.withlabel,h=o.digits,h===2&&o.precision!==2&&(h=o.precision),u&&(o.withlabel=!0),c=t.create("segment",[f,d],o),u&&(a.name&&a.name!==""?p=a.name+" = ":p="",c.label.setText(function(){var y=c.label.evalVisProp("digits");return c.label.useLocale()?p+c.label.formatNumberLocale(f.Dist(d),y):p+JXG$1.toFixed(f.Dist(d),y)})),l&&(o=JXG$1.copyAttributes(a,t.options,"tapemeasure","ticks"),v=t.create("ticks",[c,.1],o),c.inherits.push(v)),c.remove=function(){l&&c.removeTicks(v),t.removeObject(d),t.removeObject(f),GeometryElement.prototype.remove.call(this)},c.Value=function(){return f.Dist(d)},f.dump=!1,d.dump=!1,c.elType="tapemeasure",c.getParents=function(){return[[f.X(),f.Y()],[d.X(),d.Y()]]},c.subs={point1:f,point2:d},l&&(v.dump=!1),c.methodMap=JXG$1.deepCopy(c.methodMap,{Value:"Value"}),c.prepareUpdate().update(),t.isSuspendedUpdate||(c.updateVisibility().updateRenderer(),c.point1.updateVisibility().updateRenderer(),c.point2.updateVisibility().updateRenderer()),c};JXG$1.registerElement("tapemeasure",JXG$1.createTapemeasure);JXG$1.createMeasurement=function(t,r,a){var n,s,o,l,u,h;for(s=JXG$1.copyAttributes(a,t.options,"measurement"),o=r[0],l=r[1],u=r[2],n=t.create("text",[o,l,""],s),n.type=JXG$1.OBJECT_TYPE_MEASUREMENT,n.elType="measurement",n.Value=function(){return Prefix.parse(u,"execute")},n.Dimension=function(){var c=n.evalVisProp("dim");return c!==null?c:Prefix.dimension(u)},n.Unit=function(c){var f="",d=n.evalVisProp("units"),p=c,v={},y;if(JXG$1.exists(p)||(p=n.Dimension()),JXG$1.isArray(c)){for(y=0;y<c.length;y++)v["dim"+c[y]]=n.Unit(c[y]);return v}return JXG$1.isObject(d)&&JXG$1.exists(d[p])&&d[p]!==!1?f=n.eval(d[p]):JXG$1.isObject(d)&&JXG$1.exists(d["dim"+p])&&d["dim"+p]!==!1?f=n.eval(d["dim"+p]):(f=n.evalVisProp("baseunit"),p===0?f="":p>1&&f!==""&&(f=f+"^{"+p+"}")),f},n.getTerm=function(){return u},n.getMethod=function(){var c=u[0];return c==="V"&&(c="Value"),c},n.toPrefix=function(){return Prefix.toPrefix(u)},n.getParents=function(){return Prefix.getParents(u)},n.addParents(n.getParents()),h=0;h<n.parents.length;h++)t.select(n.parents[h]).addChild(n);return n.setText(function(){var c="",f="",d=n.Dimension(),p=n.evalVisProp("digits"),v=n.Unit(),y=n.Value(),b;if(n.evalVisProp("showprefix")&&(c=n.evalVisProp("prefix")),n.evalVisProp("showsuffix")&&(f=n.evalVisProp("suffix")),JXG$1.isNumber(y))p==="none"||(p==="auto"?n.useLocale()?y=n.formatNumberLocale(y):y=JXG$1.autoDigits(y):n.useLocale()?y=n.formatNumberLocale(y,p):y=JXG$1.toFixed(y,p));else if(JXG$1.isArray(y))for(b=0;b<y.length;b++)JXG$1.isNumber(y[b])&&(p==="none"||(p==="auto"?n.useLocale()?y[b]=n.formatNumberLocale(y[b]):y[b]=JXG$1.autoDigits(y[b]):n.useLocale()?y[b]=n.formatNumberLocale(y[b],p):y[b]=JXG$1.toFixed(y[b],p)));return d==="coords"&&JXG$1.isArray(y)&&(y.length===2&&y.unshift(void 0),y=n.visProp.formatcoords(n,y[1],y[2],y[0])),d==="direction"&&JXG$1.isArray(y)&&(y=n.visProp.formatdirection(n,y[0],y[1])),JXG$1.isString(d)?c+y+f:isNaN(d)?c+"NaN"+f:c+y+v+f}),n.methodMap=JXG$1.deepCopy(n.methodMap,{Value:"Value",Dimension:"Dimension",Unit:"Unit",getTerm:"getTerm",Term:"getTerm",getMethod:"getMethod",Method:"getMethod",getParents:"getParents",Parents:"getParents"}),n};JXG$1.registerElement("measurement",JXG$1.createMeasurement);JXG$1.DataSource=function(){return this.data=[],this.columnHeaders=[],this.rowHeaders=[],this};JXG$1.extend(JXG$1.DataSource.prototype,{loadFromArray:function(t,r,a){var n,s,o;if(JXG$1.isArray(r)&&(this.columnHeaders=r,r=!1),JXG$1.isArray(a)&&(this.rowHeaders=a,a=!1),this.data=[],r&&(this.columnHeaders=[]),a&&(this.rowHeaders=[]),JXG$1.exists(t)){for(this.data=[],n=0;n<t.length;n++)for(this.data[n]=[],s=0;s<t[n].length;s++)o=t[n][s],parseFloat(o).toString()===o?this.data[n][s]=parseFloat(o):o!=="-"?this.data[n][s]=o:this.data[n][s]=NaN;if(r&&(this.columnHeaders=this.data[0].slice(1),this.data=this.data.slice(1)),a)for(this.rowHeaders=[],n=0;n<this.data.length;n++)this.rowHeaders.push(this.data[n][0]),this.data[n]=this.data[n].slice(1)}return this},loadFromTable:function(t,r,a){var n,s,o,l,u;if(JXG$1.isArray(r)&&(this.columnHeaders=r,r=!1),JXG$1.isArray(a)&&(this.rowHeaders=a,a=!1),this.data=[],r&&(this.columnHeaders=[]),a&&(this.rowHeaders=[]),t=document.getElementById(t),JXG$1.exists(t)){for(n=t.getElementsByTagName("tr"),this.data=[],s=0;s<n.length;s++)for(l=n[s].getElementsByTagName("td"),this.data[s]=[],o=0;o<l.length;o++)u=l[o].innerText,parseFloat(u).toString()===u?this.data[s][o]=parseFloat(u):u!=="-"?this.data[s][o]=u:this.data[s][o]=NaN;if(r&&(this.columnHeaders=this.data[0].slice(1),this.data=this.data.slice(1)),a)for(this.rowHeaders=[],s=0;s<this.data.length;s++)this.rowHeaders.push(this.data[s][0]),this.data[s]=this.data[s].slice(1)}return this},addColumn:function(t,r,a){throw new Error("not implemented")},addRow:function(t,r,a){throw new Error("not implemented")},getColumn:function(t){var r,a=[];if(JXG$1.isString(t)){for(r=0;r<this.columnHeaders.length;r++)if(t===this.columnHeaders[r]){t=r;break}}for(r=0;r<this.data.length;r++)this.data[r].length>t&&(a[r]=parseFloat(this.data[r][t]));return a},getRow:function(t){var r,a;if(JXG$1.isString(t)){for(a=0;a<this.rowHeaders.length;a++)if(t===this.rowHeaders[a]){t=a;break}}for(r=[],a=0;a<this.data[t].length;a++)r[a]=this.data[t][a];return r}});const DataSource=JXG$1.DataSource;JXG$1.Chart=function(t,r,a){this.constructor(t,a);var n,s,o,l,u,h;if(!JXG$1.isArray(r)||r.length===0)throw new Error("JSXGraph: Can't create a chart without data");if(this.elements=[],JXG$1.isNumber(r[0]))for(s=r,n=[],o=0;o<s.length;o++)n[o]=o+1;else if(r.length===1&&JXG$1.isArray(r[0]))for(s=r[0],n=[],h=JXG$1.evaluate(s).length,o=0;o<h;o++)n[o]=o+1;else r.length===2&&(h=Math.min(r[0].length,r[1].length),n=r[0].slice(0,h),s=r[1].slice(0,h));if(JXG$1.isArray(s)&&s.length===0)throw new Error("JSXGraph: Can't create charts without data.");for(u=a.chartstyle.replace(/ /g,"").split(","),o=0;o<u.length;o++){switch(u[o]){case"bar":l=this.drawBar(t,n,s,a);break;case"line":l=this.drawLine(t,n,s,a);break;case"fit":l=this.drawFit(t,n,s,a);break;case"spline":l=this.drawSpline(t,n,s,a);break;case"pie":l=this.drawPie(t,s,a);break;case"point":l=this.drawPoints(t,n,s,a);break;case"radar":l=this.drawRadar(t,r,a);break}this.elements.push(l)}return this.id=this.board.setId(this,"Chart"),this.elements};JXG$1.Chart.prototype=new GeometryElement;JXG$1.extend(JXG$1.Chart.prototype,{drawLine:function(t,r,a,n){return n.fillcolor="none",n.highlightfillcolor="none",t.create("curve",[r,a],n)},drawSpline:function(t,r,a,n){return n.fillColor="none",n.highlightfillcolor="none",t.create("spline",[r,a],n)},drawFit:function(t,r,a,n){var s=n.degree;return s=Math.max(parseInt(s,10),1)||1,n.fillcolor="none",n.highlightfillcolor="none",t.create("functiongraph",[Numerics.regressionPolynomial(s,r,a)],n)},drawBar:function(t,r,a,n){var s,o,l,u,h,c,f,d,p=[],v=[],y,b,_=function(M,C){return function(){return r[M]()-C*l}},N={fixed:!0,withLabel:!1,visible:!1,name:""};if(y=JXG$1.copyAttributes(n,t.options,"chart"),y&&y.width)l=y.width;else{if(r.length<=1)l=1;else for(l=r[1]-r[0],s=1;s<r.length-1;s++)l=r[s+1]-r[s]<l?r[s+1]-r[s]:l;l*=.8}for(b=JXG$1.copyAttributes(n,t.options,"chart","label"),s=0;s<r.length;s++)JXG$1.isFunction(r[s])?(u=_(s,-.5),h=_(s,0),c=_(s,.5)):(u=r[s]-l*.5,h=r[s],c=r[s]+l*.5),JXG$1.isFunction(a[s])?f=a[s]():f=a[s],f=a[s],y.dir==="horizontal"?(v[0]=t.create("point",[0,u],N),v[1]=t.create("point",[f,u],N),v[2]=t.create("point",[f,c],N),v[3]=t.create("point",[0,c],N),JXG$1.exists(y.labels)&&JXG$1.exists(y.labels[s])&&(b.anchorX=function(M){return M.X()>=0?"left":"right"},b.anchorY="middle",o=t.create("text",[f,h,y.labels[s]],b))):(v[0]=t.create("point",[u,0],N),v[1]=t.create("point",[u,f],N),v[2]=t.create("point",[c,f],N),v[3]=t.create("point",[c,0],N),JXG$1.exists(y.labels)&&JXG$1.exists(y.labels[s])&&(b.anchorX="middle",b.anchorY=function(M){return M.Y()>=0?"bottom":"top"},o=t.create("text",[h,f,y.labels[s]],b))),JXG$1.isArray(y.colors)&&(d=y.colors,y.fillcolor=d[s%d.length]),p[s]=t.create("polygon",v,y),JXG$1.exists(y.labels)&&JXG$1.exists(y.labels[s])&&(p[s].text=o,p[s].addChild(o));return p},drawPoints:function(t,r,a,n){var s,o=[],l=n.infoboxarray;for(n.fixed=!0,n.name="",s=0;s<r.length;s++)n.infoboxtext=l?l[s%l.length]:!1,o[s]=t.create("point",[r[s],a[s]],n);return o},drawPie:function(t,r,a){var n,s,o=[],l=[],u=a.colors,h=a.highlightcolors,c=a.labels,f=a.radius||4,d=f,p=a.center||[0,0],v=p[0],y=p[1],b=function($,w,A){return function(){var X,O,G,R=0;for(O=0;O<=$;O++)R+=parseFloat(JXG$1.evaluate(r[O]));for(X=R,O=$+1;O<r.length;O++)X+=parseFloat(JXG$1.evaluate(r[O]));return G=X!==0?2*Math.PI*R/X:0,d()*Math[w](G)+A}},_=function($,w){var A=-this.point1.coords.usrCoords[1]+this.point2.coords.usrCoords[1],X=-this.point1.coords.usrCoords[2]+this.point2.coords.usrCoords[2];JXG$1.exists(this.label)&&(this.label.rendNode.style.fontSize=w*this.label.evalVisProp("fontsize")+"px",this.label.fullUpdate()),this.point2.coords=new Coords(Const.COORDS_BY_USER,[this.point1.coords.usrCoords[1]+A*$,this.point1.coords.usrCoords[2]+X*$],this.board),this.fullUpdate()},N=function(){this.highlighted||(this.highlighted=!0,this.board.highlightedObjects[this.id]=this,this.board.renderer.highlight(this),_.call(this,1.1,2))},M=function(){this.highlighted&&(this.highlighted=!1,this.board.renderer.noHighlight(this),_.call(this,.9090909,1))},C={fixed:!0,withLabel:!1,visible:!1,name:""};if(!JXG$1.isArray(c))for(c=[],n=0;n<r.length;n++)c[n]="";for(JXG$1.isFunction(f)||(d=function(){return f}),a.highlightonsector=a.highlightonsector||!1,a.straightfirst=!1,a.straightlast=!1,s=t.create("point",[v,y],C),o[0]=t.create("point",[function(){return d()+v},function(){return y}],C),n=0;n<r.length;n++)o[n+1]=t.create("point",[b(n,"cos",v),b(n,"sin",y)],C),a.name=c[n],a.withlabel=a.name!=="",a.fillcolor=u&&u[n%u.length],a.labelcolor=u&&u[n%u.length],a.highlightfillcolor=h&&h[n%h.length],l[n]=t.create("sector",[s,o[n],o[n+1]],a),a.highlightonsector&&(l[n].hasPoint=l[n].hasPointSector),a.highlightbysize&&(l[n].highlight=N,l[n].noHighlight=M);return{sectors:l,points:o,midpoint:s}},drawRadar:function(t,r,a){var n,s,o,l,u,h,c,f,d,p,v,y,b,_,N,M,C,$,w,A,X,O,G,R,B,F,U,q,ee,z,Y,K,Z,ne,j,V,L,ae,W,ve,de,se,ie,ce,xe=r.length,fe=function(){var we,Pe,Ie,Ye,Le=this.evalVisProp("label.offset).slice(0");return we=this.point1.X(),Pe=this.point2.X(),Ie=this.point1.Y(),Ye=this.point2.Y(),Pe<we&&(Le[0]=-Le[0]),Ye<Ie&&(Le[1]=-Le[1]),this.setLabelRelativeCoords(Le),new Coords(Const.COORDS_BY_USER,[this.point2.X(),this.point2.Y()],this.board)},Ne=function(we,Pe){var Ie,Ye,Le;return Ie=t.create("transform",[-(N[Pe]-b[Pe]),0],{type:"translate"}),Ye=t.create("transform",[w/(M[Pe]+_[Pe]-(N[Pe]-b[Pe])),1],{type:"scale"}),Ie.melt(Ye),Le=t.create("transform",[we],{type:"rotate"}),Ie.melt(Le),Ie};if(xe<=0)throw new Error("JSXGraph radar chart: no data");if(o=a.paramarray,!JXG$1.exists(o))throw new Error("JSXGraph radar chart: need paramArray attribute");if(l=o.length,l<=1)throw new Error("JSXGraph radar chart: need more than one param in paramArray");for(n=0;n<xe;n++)if(l!==r[n].length)throw new Error("JSXGraph radar chart: use data length equal to number of params ("+r[n].length+" != "+l+")");for(u=[],h=[],s=0;s<l;s++)u[s]=r[0][s],h[s]=u[s];for(n=1;n<xe;n++)for(s=0;s<l;s++)r[n][s]>u[s]&&(u[s]=r[n][s]),r[n][s]<h[s]&&(h[s]=r[n][s]);for(c=[],f=[],n=0;n<xe;n++)c[n]="",f[n]=[];for(d=[],p=[],v=a.startshiftratio||0,y=a.endshiftratio||0,n=0;n<l;n++)d[n]=(u[n]-h[n])*v,p[n]=(u[n]-h[n])*y;if(b=a.startshiftarray||d,_=a.endshiftarray||p,N=a.startarray||h,JXG$1.exists(a.start))for(n=0;n<l;n++)N[n]=a.start;if(M=a.endarray||u,JXG$1.exists(a.end))for(n=0;n<l;n++)M[n]=a.end;if(b.length!==l)throw new Error("JSXGraph radar chart: start shifts length is not equal to number of parameters");if(_.length!==l)throw new Error("JSXGraph radar chart: end shifts length is not equal to number of parameters");if(N.length!==l)throw new Error("JSXGraph radar chart: starts length is not equal to number of parameters");if(M.length!==l)throw new Error("JSXGraph radar chart: snds length is not equal to number of parameters");for(C=a.labelarray||c,$=a.colors,w=a.radius||10,ie=a.strokewidth||1,JXG$1.exists(a.highlightonsector)||(a.highlightonsector=!1),A={name:a.name,id:a.id,strokewidth:ie,polystrokewidth:a.polystrokewidth||ie,strokecolor:a.strokecolor||"black",straightfirst:!1,straightlast:!1,fillcolor:a.fillColor||"#FFFF88",fillopacity:a.fillOpacity||.4,highlightfillcolor:a.highlightFillColor||"#FF7400",highlightstrokecolor:a.highlightStrokeColor||"black",gradient:a.gradient||"none"},X=a.center||[0,0],O=X[0],G=X[1],R=t.create("point",[O,G],{name:"",fixed:!0,withlabel:!1,visible:!1}),B=Math.PI/2-Math.PI/l,B=a.startangle||0,F=B,U=[],q=[],n=0;n<l;n++)for(F+=2*Math.PI/l,z=w*Math.cos(F)+O,Y=w*Math.sin(F)+G,U[n]=t.create("point",[z,Y],{name:"",fixed:!0,withlabel:!1,visible:!1}),q[n]=t.create("line",[R,U[n]],{name:o[n],strokeColor:A.strokecolor,strokeWidth:A.strokewidth,strokeOpacity:1,straightFirst:!1,straightLast:!1,withLabel:!0,highlightStrokeColor:A.highlightstrokecolor}),q[n].getLabelAnchor=fe,ee=Ne(F,n),s=0;s<r.length;s++)ce=r[s][n],f[s][n]=t.create("point",[ce,0],{name:"",fixed:!0,withlabel:!1,visible:!1}),f[s][n].addTransform(f[s][n],ee);for(K=[],n=0;n<xe;n++)for(A.labelcolor=$&&$[n%$.length],A.strokecolor=$&&$[n%$.length],A.fillcolor=$&&$[n%$.length],K[n]=t.create("polygon",f[n],{withLines:!0,withLabel:!1,fillColor:A.fillcolor,fillOpacity:A.fillopacity,highlightFillColor:A.highlightfillcolor}),s=0;s<l;s++)K[n].borders[s].setAttribute("strokecolor:"+$[n%$.length]),K[n].borders[s].setAttribute("strokewidth:"+A.polystrokewidth);switch(Z=a.legendposition||"none",Z){case"right":j=a.legendleftoffset||2,V=a.legendtopoffset||1,this.legend=t.create("legend",[O+w+j,G+w-V],{labels:C,colors:$});break;case"none":break;default:JXG$1.debug("Unknown legend position")}if(ne=[],a.showcircles){for(L=[],n=0;n<6;n++)L[n]=20*n;if(L[0]="0",ae=a.circlelabelarray||L,W=ae.length,W<2)throw new Error("JSXGraph radar chart: too less circles in circleLabelArray");for(ve=[],de=B+Math.PI/l,ee=Ne(de,0),A.fillcolor="none",A.highlightfillcolor="none",A.strokecolor=a.strokecolor||"black",A.strokewidth=a.circlestrokewidth||.5,A.layer=0,se=(M[0]-N[0])/(W-1),n=0;n<W;n++)ve[n]=t.create("point",[N[0]+n*se,0],{name:ae[n],size:0,fixed:!0,withLabel:!0,visible:!0}),ve[n].addTransform(ve[n],ee),ne[n]=t.create("circle",[R,ve[n]],A)}return this.rendNode=K[0].rendNode,{circles:ne,lines:q,points:f,midpoint:R,polygons:K}},updateRenderer:function(){return this},update:function(){return this.needsUpdate&&this.updateDataArray(),this},updateDataArray:function(){return this}});JXG$1.createChart=function(t,r,a){var n,s,o,l,u,h=[],c,f,d,p,v,y,b,_,N,M,C,$=JXG$1.isBrowser?t.document.getElementById(r[0]):null;if(r.length===1&&JXG$1.isString(r[0])){if(JXG$1.exists($)){if(p=JXG$1.copyAttributes(a,t.options,"chart"),$=new DataSource().loadFromTable(r[0],p.withheaders,p.withheaders),n=$.data,u=$.columnHeaders,s=$.rowHeaders,v=p.width,y=p.name,b=p.strokecolor,_=p.fillcolor,N=p.highlightstrokecolor,M=p.highlightfillcolor,t.suspendUpdate(),C=n.length,d=[],p.rows&&JXG$1.isArray(p.rows)){for(o=0;o<C;o++)for(l=0;l<p.rows.length;l++)if(p.rows[l]===o||p.withheaders&&p.rows[l]===s[o]){d.push(n[o]);break}}else d=n;for(C=d.length,o=0;o<C;o++){if(f=[],p.chartstyle&&p.chartstyle.indexOf("bar")!==-1){for(v?c=v:c=.8,f.push(1-c/2+(o+.5)*c/C),l=1;l<d[o].length;l++)f.push(f[l-1]+1);p.width=c/C}y&&y.length===C?p.name=y[o]:p.withheaders&&(p.name=u[o]),b&&b.length===C?p.strokecolor=b[o]:p.strokecolor=JXG$1.hsv2rgb((o+1)/C*360,.9,.6),_&&_.length===C?p.fillcolor=_[o]:p.fillcolor=JXG$1.hsv2rgb((o+1)/C*360,.9,1),N&&N.length===C?p.highlightstrokecolor=N[o]:p.highlightstrokecolor=JXG$1.hsv2rgb((o+1)/C*360,.9,1),M&&M.length===C?p.highlightfillcolor=M[o]:p.highlightfillcolor=JXG$1.hsv2rgb((o+1)/C*360,.9,.6),p.chartstyle&&p.chartstyle.indexOf("bar")!==-1?h.push(new JXG$1.Chart(t,[f,d[o]],p)):h.push(new JXG$1.Chart(t,[d[o]],p))}t.unsuspendUpdate()}return h}return p=JXG$1.copyAttributes(a,t.options,"chart"),new JXG$1.Chart(t,r,p)};JXG$1.registerElement("chart",JXG$1.createChart);JXG$1.Legend=function(t,r,a){var n;if(this.constructor(),n=JXG$1.copyAttributes(a,t.options,"legend"),this.board=t,this.coords=new Coords(Const.COORDS_BY_USER,r,this.board),this.myAtts={},this.label_array=n.labelarray||n.labels,this.color_array=n.colorarray||n.colors,this.opacy_array=n.strokeopacity||[1],this.lines=[],this.myAtts.strokewidth=n.strokewidth||5,this.myAtts.straightfirst=!1,this.myAtts.straightlast=!1,this.myAtts.withlabel=!0,this.myAtts.fixed=!0,this.myAtts.frozen=n.frozen||!1,this.style=n.legendstyle||n.style,this.style==="vertical")this.drawVerticalLegend(t,n);else throw new Error("JSXGraph: Unknown legend style: "+this.style);this.id=this.board.setId(this,"Leg")};JXG$1.Legend.prototype=new GeometryElement;JXG$1.Legend.prototype.drawVerticalLegend=function(t,r){var a,n=r.linelength||1,s=(r.rowheight||20)/this.board.unitY,o=function(){return this.setLabelRelativeCoords(this.visProp.label.offset),new Coords(Const.COORDS_BY_USER,[this.point2.X(),this.point2.Y()],this.board)};for(a=0;a<this.label_array.length;a++)this.myAtts.name=this.label_array[a],this.myAtts.strokecolor=this.color_array[a%this.color_array.length],this.myAtts.highlightstrokecolor=this.color_array[a%this.color_array.length],this.myAtts.strokeopacity=this.opacy_array[a%this.opacy_array.length],this.myAtts.highlightstrokeopacity=this.opacy_array[a%this.opacy_array.length],this.myAtts.label={offset:[10,0],strokeColor:this.color_array[a%this.color_array.length],strokeWidth:this.myAtts.strokewidth},this.lines[a]=t.create("line",[[this.coords.usrCoords[1],this.coords.usrCoords[2]-a*s],[this.coords.usrCoords[1]+n,this.coords.usrCoords[2]-a*s]],this.myAtts),this.myAtts.frozen&&this.lines[a].setAttribute({point1:{frozen:!0},point2:{frozen:!0}}),this.lines[a].getLabelAnchor=o,this.lines[a].prepareUpdate().update().updateVisibility(this.lines[a].evalVisProp("visible")).updateRenderer(),this.addChild(this.lines[a])};JXG$1.createLegend=function(t,r,a){var n=[0,0];if(JXG$1.exists(r)&&r.length===2)n=r;else throw new Error("JSXGraph: Legend element needs two numbers as parameters");return new JXG$1.Legend(t,n,a)};JXG$1.registerElement("legend",JXG$1.createLegend);JXG$1.Chart,JXG$1.Legend;JXG$1.Transformation=function(t,r,a,n){this.elementClass=Const.OBJECT_CLASS_OTHER,this.type=Const.OBJECT_TYPE_TRANSFORMATION,n?(this.is3D=!0,this.matrix=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]]):(this.is3D=!1,this.matrix=[[1,0,0],[0,1,0],[0,0,1]]),this.board=t,this.isNumericMatrix=!1,this.is3D?this.setMatrix3D(a[0],r,a.slice(1)):this.setMatrix(t,r,a),this.methodMap={apply:"apply",applyOnce:"applyOnce",bindTo:"bindTo",bind:"bindTo",melt:"melt",meltTo:"meltTo"}};JXG$1.Transformation.prototype={};JXG$1.extend(JXG$1.Transformation.prototype,{update:function(){return this},setMatrix:function(t,r,a){var n;for(this.isNumericMatrix=!0,n=0;n<a.length;n++)if(typeof a[n]!="number"){this.isNumericMatrix=!1;break}if(r==="translate"){if(a.length!==2)throw new Error("JSXGraph: translate transformation needs 2 parameters.");this.evalParam=JXG$1.createEvalFunction(t,a,2),this.update=function(){this.matrix[1][0]=this.evalParam(0),this.matrix[2][0]=this.evalParam(1)}}else if(r==="scale"){if(a.length!==2)throw new Error("JSXGraph: scale transformation needs 2 parameters.");this.evalParam=JXG$1.createEvalFunction(t,a,2),this.update=function(){this.matrix[1][1]=this.evalParam(0),this.matrix[2][2]=this.evalParam(1)}}else if(r==="reflect")a.length<4&&(a[0]=t.select(a[0])),a.length===2&&(a[1]=t.select(a[1])),a.length===4&&(this.evalParam=JXG$1.createEvalFunction(t,a,4)),this.update=function(){var s,o,l,u,h,c,f,d;a.length===1?f=a[0].stdform:a.length===2?f=Mat.crossProduct(a[1].coords.usrCoords,a[0].coords.usrCoords):a.length===4&&(f=Mat.crossProduct([1,this.evalParam(2),this.evalParam(3)],[1,this.evalParam(0),this.evalParam(1)])),s=f[1],o=f[2],l=f[0],d=[-l*s,-l*o,s*s+o*o],c=d[2],u=d[0]/d[2],h=d[1]/d[2],s=-f[2],o=f[1],this.matrix[1][1]=(s*s-o*o)/c,this.matrix[1][2]=2*s*o/c,this.matrix[2][1]=this.matrix[1][2],this.matrix[2][2]=-this.matrix[1][1],this.matrix[1][0]=u*(1-this.matrix[1][1])-h*this.matrix[1][2],this.matrix[2][0]=h*(1-this.matrix[2][2])-u*this.matrix[2][1]};else if(r==="rotate")a.length===3?this.evalParam=JXG$1.createEvalFunction(t,a,3):a.length>0&&a.length<=2&&(this.evalParam=JXG$1.createEvalFunction(t,a,1),a.length===2&&!JXG$1.isArray(a[1])&&(a[1]=t.select(a[1]))),this.update=function(){var s,o,l=this.evalParam(0),u=Math.cos(l),h=Math.sin(l);this.matrix[1][1]=u,this.matrix[1][2]=-h,this.matrix[2][1]=h,this.matrix[2][2]=u,a.length>1&&(a.length===3?(s=this.evalParam(1),o=this.evalParam(2)):JXG$1.isArray(a[1])?(s=a[1][0],o=a[1][1]):(s=a[1].X(),o=a[1].Y()),this.matrix[1][0]=s*(1-u)+o*h,this.matrix[2][0]=o*(1-u)-s*h)};else if(r==="shear"){if(a.length!==2)throw new Error("JSXGraph: shear transformation needs 2 parameters.");this.evalParam=JXG$1.createEvalFunction(t,a,2),this.update=function(){this.matrix[1][2]=this.evalParam(0),this.matrix[2][1]=this.evalParam(1)}}else if(r==="generic"){if(a.length!==9)throw new Error("JSXGraph: generic transformation needs 9 parameters.");this.evalParam=JXG$1.createEvalFunction(t,a,9),this.update=function(){this.matrix[0][0]=this.evalParam(0),this.matrix[0][1]=this.evalParam(1),this.matrix[0][2]=this.evalParam(2),this.matrix[1][0]=this.evalParam(3),this.matrix[1][1]=this.evalParam(4),this.matrix[1][2]=this.evalParam(5),this.matrix[2][0]=this.evalParam(6),this.matrix[2][1]=this.evalParam(7),this.matrix[2][2]=this.evalParam(8)}}else if(r==="matrix"){if(a.length!==1)throw new Error("JSXGraph: transformation of type 'matrix' needs 1 parameter.");this.evalParam=a[0].slice(),this.update=function(){var s,o;for(s=0;s<3;s++)for(o=0;o<3;o++)this.matrix[s][o]=JXG$1.evaluate(this.evalParam[s][o])}}},setMatrix3D:function(t,r,a){var n,s=t.board;for(this.isNumericMatrix=!0,n=0;n<a.length;n++)if(typeof a[n]!="number"){this.isNumericMatrix=!1;break}if(r==="translate"){if(a.length!==3)throw new Error("JSXGraph: 3D translate transformation needs 3 parameters.");this.evalParam=JXG$1.createEvalFunction(s,a,3),this.update=function(){this.matrix[1][0]=this.evalParam(0),this.matrix[2][0]=this.evalParam(1),this.matrix[3][0]=this.evalParam(2)}}else if(r==="scale"){if(a.length!==3&&a.length!==4)throw new Error("JSXGraph: 3D scale transformation needs either 3 or 4 parameters.");this.evalParam=JXG$1.createEvalFunction(s,a,3),this.update=function(){var o=this.evalParam(0),l=this.evalParam(1),u=this.evalParam(2);this.matrix[1][1]=o,this.matrix[2][2]=l,this.matrix[3][3]=u}}else if(r==="rotateX")a.splice(1,0,[1,0,0]),this.setMatrix3D(t,"rotate",a);else if(r==="rotateY")a.splice(1,0,[0,1,0]),this.setMatrix3D(t,"rotate",a);else if(r==="rotateZ")a.splice(1,0,[0,0,1]),this.setMatrix3D(t,"rotate",a);else if(r==="rotate"){if(a.length<2)throw new Error("JSXGraph: 3D rotate transformation needs 2 or 3 parameters.");a.length===3&&!JXG$1.isFunction(a[2])&&!JXG$1.isArray(a[2])?(this.evalParam=JXG$1.createEvalFunction(s,a,2),a[2]=t.select(a[2])):this.evalParam=JXG$1.createEvalFunction(s,a,a.length),this.update=function(){var o=this.evalParam(0),l=this.evalParam(1),u=[1,0,0,0],h=Math.cos(o),c=Math.sin(o),f,d,p,v=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],y=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],b=Mat.norm(l);l.length===3?(f=l[0]/b,d=l[1]/b,p=l[2]/b):(f=l[1]/b,d=l[2]/b,p=l[3]/b),a.length===3&&(a.length===3&&JXG$1.exists(a[2].is3D)?u=a[2].coords.slice():u=this.evalParam(2),u.length===3&&u.unshift(1),v[1][0]=-u[1],v[2][0]=-u[2],v[3][0]=-u[3],y[1][0]=u[1],y[2][0]=u[2],y[3][0]=u[3]),this.matrix=[[1,0,0,0],[0,f*f*(1-h)+h,f*d*(1-h)-p*c,f*p*(1-h)+d*c],[0,d*f*(1-h)+p*c,d*d*(1-h)+h,d*p*(1-h)-f*c],[0,p*f*(1-h)-d*c,p*d*(1-h)+f*c,p*p*(1-h)+h]],this.matrix=Mat.matMatMult(this.matrix,v),this.matrix=Mat.matMatMult(y,this.matrix)}}},apply:function(t,r){var a;return this.update(),this.is3D?a=t.coords:JXG$1.exists(r)?a=t.initialCoords.usrCoords:a=t.coords.usrCoords,Mat.matVecMult(this.matrix,a)},applyOnce:function(t){var r,a,n;for(JXG$1.isArray(t)||(t=[t]),a=t.length,n=0;n<a;n++)this.update(),this.is3D?t[n].coords=Mat.matVecMult(this.matrix,t[n].coords):(r=Mat.matVecMult(this.matrix,t[n].coords.usrCoords),t[n].coords.setCoordinates(Const.COORDS_BY_USER,r))},bindTo:function(t){var r,a;if(JXG$1.isArray(t))for(a=t.length,r=0;r<a;r++)t[r].transformations.push(this);else t.transformations.push(this)},meltTo:function(t){var r,a,n;if(JXG$1.isArray(t))for(r=0;r<t.length;r++)this.meltTo(t[r]);else a=t.transformations,a.length>0&&a[a.length-1].isNumericMatrix&&this.isNumericMatrix?a[a.length-1].melt(this):(n=this.clone(),a.push(n))},clone:function(){var t=null;return this.isNumericMatrix&&(t=new JXG$1.Transformation(this.board,"none",[]),t.matrix=this.matrix.slice()),t},setProperty:function(t){JXG$1.deprecated("Transformation.setProperty()","Transformation.setAttribute()")},setAttribute:function(t){},melt:function(t){var r=[];return this.update(),t.update(),r=Mat.matMatMult(t.matrix,this.matrix),this.update=function(){this.matrix=r},this},getParents:function(){var t=[[].concat.apply([],this.matrix)];return this.parents.length!==0&&(t=this.parents),t}});JXG$1.createTransform=function(t,r,a){return new JXG$1.Transformation(t,a.type,r)};JXG$1.registerElement("transform",JXG$1.createTransform);JXG$1.createTransform3D=function(t,r,a){return new JXG$1.Transformation(t,a.type,r,!0)};JXG$1.registerElement("transform3d",JXG$1.createTransform3D);JXG$1.Transformation;JXG$1.Turtle=function(t,r,a){var n,s,o;return this.constructor(t,a,Const.OBJECT_TYPE_TURTLE,Const.OBJECT_CLASS_OTHER),this.turtleIsHidden=!1,this.board=t,this.visProp.curveType="plot",this._attributes=JXG$1.copyAttributes(this.visProp,t.options,"turtle"),delete this._attributes.id,n=0,s=0,o=90,r.length!==0&&(r.length===3?(n=r[0],s=r[1],o=r[2]):r.length===2?JXG$1.isArray(r[0])?(n=r[0][0],s=r[0][1],o=r[1]):(n=r[0],s=r[1]):(n=r[0][0],s=r[0][1])),this.init(n,s,o),this.methodMap=JXG$1.deepCopy(this.methodMap,{forward:"forward",fd:"forward",back:"back",bk:"back",right:"right",rt:"right",left:"left",lt:"left",penUp:"penUp",pu:"penUp",up:"penUp",penDown:"penDown",pd:"penDown",down:"penDown",clearScreen:"clearScreen",cs:"clearScreen",clean:"clean",setPos:"setPos",home:"home",hideTurtle:"hideTurtle",ht:"hideTurtle",hide:"hideTurtle",showTurtle:"showTurtle",st:"showTurtle",show:"showTurtle",penSize:"setPenSize",setPenSize:"setPenSize",penColor:"setPenColor",setPenColor:"setPenColor",highlightPenColor:"setHighlightPenColor",setHighlightPenColor:"setHighlightPenColor",getPenColor:"getPenColor",Color:"getPenColor",getHighlightPenColor:"getHighlightPenColor",HighlightColor:"getHighlightPenColor",getPenSize:"getPenSize",Size:"getPenSize",pushTurtle:"pushTurtle",push:"pushTurtle",popTurtle:"popTurtle",pop:"popTurtle",lookTo:"lookTo",pos:"pos",Pos:"pos",moveTo:"moveTo",X:"X",Y:"Y"}),this};JXG$1.Turtle.prototype=new GeometryElement;JXG$1.extend(JXG$1.Turtle.prototype,{init:function(t,r,a){var n={fixed:!0,name:"",visible:!1,withLabel:!1};this.arrowLen=20/Mat.hypot(this.board.unitX,this.board.unitY),this.pos=[t,r],this.isPenDown=!0,this.dir=90,this.stack=[],this.objects=[],this.curve=this.board.create("curve",[[this.pos[0]],[this.pos[1]]],this._attributes),this.objects.push(this.curve),this.turtle=this.board.create("point",this.pos,n),this.objects.push(this.turtle),this.turtle2=this.board.create("point",[this.pos[0],this.pos[1]+this.arrowLen],n),this.objects.push(this.turtle2),this.visProp.arrow.lastArrow=!0,this.visProp.arrow.straightFirst=!1,this.visProp.arrow.straightLast=!1,this.arrow=this.board.create("line",[this.turtle,this.turtle2],this.visProp.arrow),this.objects.push(this.arrow),this.subs={arrow:this.arrow},this.inherits.push(this.arrow),this.right(90-a),this.board.update()},forward:function(t){if(t===0)return this;var r,a=t*Math.cos(this.dir*Math.PI/180),n=t*Math.sin(this.dir*Math.PI/180);return this.turtleIsHidden||(r=this.board.create("transform",[a,n],{type:"translate"}),r.applyOnce(this.turtle),r.applyOnce(this.turtle2)),this.isPenDown&&this.curve.dataX.length>=8192&&(this.curve=this.board.create("curve",[[this.pos[0]],[this.pos[1]]],this._attributes),this.objects.push(this.curve)),this.pos[0]+=a,this.pos[1]+=n,this.isPenDown&&(this.curve.dataX.push(this.pos[0]),this.curve.dataY.push(this.pos[1])),this.board.update(),this},back:function(t){return this.forward(-t)},right:function(t){if(this.dir-=t,this.dir%=360,!this.turtleIsHidden){var r=this.board.create("transform",[-t*Math.PI/180,this.turtle],{type:"rotate"});r.applyOnce(this.turtle2)}return this.board.update(),this},left:function(t){return this.right(-t)},penUp:function(){return this.isPenDown=!1,this},penDown:function(){return this.isPenDown=!0,this.curve=this.board.create("curve",[[this.pos[0]],[this.pos[1]]],this._attributes),this.objects.push(this.curve),this},clean:function(){var t,r;for(t=0;t<this.objects.length;t++)r=this.objects[t],r.type===Const.OBJECT_TYPE_CURVE&&(this.board.removeObject(r),this.objects.splice(t,1));return this.curve=this.board.create("curve",[[this.pos[0]],[this.pos[1]]],this._attributes),this.objects.push(this.curve),this.board.update(),this},clearScreen:function(){return this.board.removeObject(this.objects),this.objects=[],this.init(0,0,90),this},setPos:function(t,r){var a;return JXG$1.isArray(t)?this.pos=t:this.pos=[t,r],this.turtleIsHidden||(this.turtle.setPositionDirectly(Const.COORDS_BY_USER,[t,r]),this.turtle2.setPositionDirectly(Const.COORDS_BY_USER,[t,r+this.arrowLen]),a=this.board.create("transform",[-(this.dir-90)*Math.PI/180,this.turtle],{type:"rotate"}),a.applyOnce(this.turtle2)),this.curve=this.board.create("curve",[[this.pos[0]],[this.pos[1]]],this._attributes),this.objects.push(this.curve),this.board.update(),this},setPenSize:function(t){return this.curve=this.board.create("curve",[[this.pos[0]],[this.pos[1]]],this.copyAttr("strokeWidth",t)),this.objects.push(this.curve),this},setPenColor:function(t){return this.curve=this.board.create("curve",[[this.pos[0]],[this.pos[1]]],this.copyAttr("strokeColor",t)),this.objects.push(this.curve),this},getPenAttribute:function(t){var r,a=this.objects.length;return a===4?r=0:r=a-1,this.objects[r].evalVisProp(t)},getPenSize:function(){return this.getPenAttribute("strokewidth")},getPenColor:function(){return this.getPenAttribute("strokecolor")},getHighlightPenColor:function(){return this.getPenAttribute("highlightstrokecolor")},setHighlightPenColor:function(t){return this.curve=this.board.create("curve",[[this.pos[0]],[this.pos[1]]],this.copyAttr("highlightStrokeColor",t)),this.objects.push(this.curve),this},setAttribute:function(t){var r,a,n,s=this.objects.length;for(r=0;r<s;r++)a=this.objects[r],a.type===Const.OBJECT_TYPE_CURVE&&a.setAttribute(t);return n=this.visProp.id,this.visProp=JXG$1.deepCopy(this.curve.visProp),this.visProp.id=n,this._attributes=JXG$1.deepCopy(this.visProp),delete this._attributes.id,this},copyAttr:function(t,r){return this._attributes[t.toLowerCase()]=r,this._attributes},showTurtle:function(){return this.turtleIsHidden=!1,this.arrow.setAttribute({visible:!0}),this.visProp.arrow.visible=!1,this.setPos(this.pos[0],this.pos[1]),this.board.update(),this},hideTurtle:function(){return this.turtleIsHidden=!0,this.arrow.setAttribute({visible:!1}),this.visProp.arrow.visible=!1,this.board.update(),this},home:function(){return this.pos=[0,0],this.setPos(this.pos[0],this.pos[1]),this},pushTurtle:function(){return this.stack.push([this.pos[0],this.pos[1],this.dir]),this},popTurtle:function(){var t=this.stack.pop();return this.pos[0]=t[0],this.pos[1]=t[1],this.dir=t[2],this.setPos(this.pos[0],this.pos[1]),this},lookTo:function(t){var r,a,n,s,o;return JXG$1.isArray(t)?(r=this.pos[0],a=this.pos[1],n=t[0],s=t[1],o=Math.atan2(s-a,n-r),this.right(this.dir-o*180/Math.PI)):JXG$1.isNumber(t)&&this.right(this.dir-t),this},moveTo:function(t){var r,a,n;return JXG$1.isArray(t)&&(r=t[0]-this.pos[0],a=t[1]-this.pos[1],this.turtleIsHidden||(n=this.board.create("transform",[r,a],{type:"translate"}),n.applyOnce(this.turtle),n.applyOnce(this.turtle2)),this.isPenDown&&this.curve.dataX.length>=8192&&(this.curve=this.board.create("curve",[[this.pos[0]],[this.pos[1]]],this._attributes),this.objects.push(this.curve)),this.pos[0]=t[0],this.pos[1]=t[1],this.isPenDown&&(this.curve.dataX.push(this.pos[0]),this.curve.dataY.push(this.pos[1])),this.board.update()),this},fd:function(t){return this.forward(t)},bk:function(t){return this.back(t)},lt:function(t){return this.left(t)},rt:function(t){return this.right(t)},pu:function(){return this.penUp()},pd:function(){return this.penDown()},ht:function(){return this.hideTurtle()},st:function(){return this.showTurtle()},cs:function(){return this.clearScreen()},push:function(){return this.pushTurtle()},pop:function(){return this.popTurtle()},evalAt:function(t,r){var a,n,s,o,l=this.objects.length;for(a=0,n=0;a<l;a++)if(s=this.objects[a],s.elementClass===Const.OBJECT_CLASS_CURVE){if(n<=t&&t<n+s.numberPoints)return o=t-n,s[r](o);n+=s.numberPoints}return this[r]()},X:function(t){return JXG$1.exists(t)?this.evalAt(t,"X"):this.pos[0]},Y:function(t){return JXG$1.exists(t)?this.evalAt(t,"Y"):this.pos[1]},Z:function(t){return 1},minX:function(){return 0},maxX:function(){var t,r,a=this.objects.length,n=0;for(t=0;t<a;t++)r=this.objects[t],r.elementClass===Const.OBJECT_CLASS_CURVE&&(n+=this.objects[t].numberPoints);return n},hasPoint:function(t,r){var a,n;for(a=0;a<this.objects.length;a++)if(n=this.objects[a],n.type===Const.OBJECT_TYPE_CURVE&&n.hasPoint(t,r))return!0;return!1}});JXG$1.createTurtle=function(t,r,a){var n;return r=r||[],n=JXG$1.copyAttributes(a,t.options,"turtle"),new JXG$1.Turtle(t,r,n)};JXG$1.registerElement("turtle",JXG$1.createTurtle);JXG$1.Turtle;JXG$1.Ticks=function(t,r,a){if(this.constructor(t.board,a,Const.OBJECT_TYPE_TICKS,Const.OBJECT_CLASS_OTHER),this.line=t,this.board=this.line.board,this.fixedTicks=null,this.equidistant=!1,this.labelsData=[],JXG$1.isFunction(r))throw this.ticksFunction=r,new Error("Function arguments are no longer supported.");JXG$1.isArray(r)?this.fixedTicks=r:this.equidistant=!0,this.ticks=[],this.labels=[],this.labelCounter=0,this.id=this.line.addTicks(this),this.elType="ticks",this.inherits.push(this.labels),this.board.setId(this,"Ti")};JXG$1.Ticks.prototype=new GeometryElement;JXG$1.extend(JXG$1.Ticks.prototype,{hasPoint:function(t,r){var a,n,s,o,l=this.ticks&&this.ticks.length||0;if(!this.line.evalVisProp("scalable")||this.line.elementClass===Const.OBJECT_CLASS_CURVE||(JXG$1.isObject(this.evalVisProp("precision"))?(o=this.board._inputDevice,s=this.evalVisProp("precision."+o)):s=this.board.options.precision.hasPoint,s+=this.evalVisProp("strokewidth")*.5,this.line.stdform[1]!==0&&this.line.stdform[2]!==0&&this.line.type!==Const.OBJECT_TYPE_AXIS))return!1;for(a=0;a<l;a++)if(n=this.ticks[a],n[2]&&!(this.line.stdform[1]===0&&Math.abs(n[0][0]-this.line.point1.coords.scrCoords[1])<Mat.eps||this.line.stdform[2]===0&&Math.abs(n[1][0]-this.line.point1.coords.scrCoords[2])<Mat.eps)&&(Math.abs(n[0][0]-n[0][1])>=1||Math.abs(n[1][0]-n[1][1])>=1)){if(this.line.stdform[1]===0){if(Math.abs(r-this.line.point1.coords.scrCoords[2])<2*s&&n[0][0]-s<t&&t<n[0][1]+s)return!0}else if(this.line.stdform[2]===0&&Math.abs(t-this.line.point1.coords.scrCoords[1])<2*s&&n[1][0]-s<r&&r<n[1][1]+s)return!0}return!1},setPositionDirectly:function(t,r,a){var n,s,o=new Coords(t,r,this.board),l=new Coords(t,a,this.board),u=this.board.getBoundingBox();return this.line.type!==Const.OBJECT_TYPE_AXIS||!this.line.evalVisProp("scalable")?this:(Math.abs(this.line.stdform[1])<Mat.eps&&Math.abs(o.usrCoords[1]*l.usrCoords[1])>Mat.eps?(n=l.usrCoords[1]/o.usrCoords[1],u[0]*=n,u[2]*=n,this.board.setBoundingBox(u,this.board.keepaspectratio,"update")):Math.abs(this.line.stdform[2])<Mat.eps&&Math.abs(o.usrCoords[2]*l.usrCoords[2])>Mat.eps&&(s=l.usrCoords[2]/o.usrCoords[2],u[3]*=s,u[1]*=s,this.board.setBoundingBox(u,this.board.keepaspectratio,"update")),this)},calculateTicksCoordinates:function(){var t,r,a,n;if(!(this.line.elementClass===Const.OBJECT_CLASS_LINE&&(this.setTicksSizeVariables(),Math.abs(this.dx)<Mat.eps&&Math.abs(this.dy)<Mat.eps)))return t=this.getZeroCoordinates(),this.line.elementClass===Const.OBJECT_CLASS_LINE?r=this.getLowerAndUpperBounds(t,"ticksdistance"):r={lower:this.line.minX(),upper:this.line.maxX(),a1:0,a2:0,m1:0,m2:0},this.evalVisProp("type")==="polar"&&(n=this.board.getBoundingBox(),a=Math.max(Mat.hypot(n[0],n[1]),Mat.hypot(n[2],n[3])),r.upper=a),this.ticks=[],this.labelsData=[],this.equidistant?this.generateEquidistantTicks(t,r):this.generateFixedTicks(t,r),this},setTicksSizeVariables:function(t){var r,a,n,s,o=this.evalVisProp("majorheight")*.5,l=this.evalVisProp("minorheight")*.5;JXG$1.exists(t)?(a=this.line.minX(),n=this.line.maxX(),s=this.line.points.length,s<2?(this.dxMaj=0,this.dyMaj=0):Mat.relDif(t,a)<Mat.eps?(this.dxMaj=this.line.points[0].usrCoords[2]-this.line.points[1].usrCoords[2],this.dyMaj=this.line.points[1].usrCoords[1]-this.line.points[0].usrCoords[1]):Mat.relDif(t,n)<Mat.eps?(this.dxMaj=this.line.points[s-2].usrCoords[2]-this.line.points[s-1].usrCoords[2],this.dyMaj=this.line.points[s-1].usrCoords[1]-this.line.points[s-2].usrCoords[1]):(this.dxMaj=-Numerics.D(this.line.Y)(t),this.dyMaj=Numerics.D(this.line.X)(t))):(this.dxMaj=this.line.stdform[1],this.dyMaj=this.line.stdform[2]),this.dxMin=this.dxMaj,this.dyMin=this.dyMaj,this.dx=this.dxMaj,this.dy=this.dyMaj,r=Mat.hypot(this.dxMaj*this.board.unitX,this.dyMaj*this.board.unitY),this.dxMaj*=o/r*this.board.unitX,this.dyMaj*=o/r*this.board.unitY,this.dxMin*=l/r*this.board.unitX,this.dyMin*=l/r*this.board.unitY,this.minStyle=this.evalVisProp("minorheight")<0?"infinite":"finite",this.majStyle=this.evalVisProp("majorheight")<0?"infinite":"finite"},getZeroCoordinates:function(){var t,r,a,n,s,o,l,u,h,c=this.evalVisProp("anchor");return this.line.elementClass===Const.OBJECT_CLASS_LINE?this.line.type===Const.OBJECT_TYPE_AXIS?Geometry.projectPointToLine({coords:{usrCoords:[1,0,0]}},this.line,this.board):(a=this.line.point1.coords.usrCoords[0],t=this.line.point1.coords.usrCoords[1],r=this.line.point1.coords.usrCoords[2],o=this.line.point2.coords.usrCoords[0],n=this.line.point2.coords.usrCoords[1],s=this.line.point2.coords.usrCoords[2],c==="right"?this.line.point2.coords:c==="middle"?new Coords(Const.COORDS_BY_USER,[(a+o)*.5,(t+n)*.5,(r+s)*.5],this.board):JXG$1.isNumber(c)?new Coords(Const.COORDS_BY_USER,[a+(o-a)*c,t+(n-t)*c,r+(s-r)*c],this.board):this.line.point1.coords):(u=this.line.minX(),h=this.line.maxX(),c==="right"?l=h:c==="middle"?l=(u+h)*.5:JXG$1.isNumber(c)?l=u*(1-c)+h*c:l=u,l)},getLowerAndUpperBounds:function(t,r){var a,n,s,o,l,u,h,c,f,d,p,v,y,b,_,N=Mat.eps*10,M=this.line.evalVisProp("straightfirst"),C=this.line.evalVisProp("straightlast"),$=this.evalVisProp("includeboundaries");return this.line.elementClass===Const.OBJECT_CLASS_CURVE?{lower:this.line.minX(),upper:this.line.maxX()}:(l=new Coords(Const.COORDS_BY_USER,this.line.point1.coords.usrCoords,this.board),u=new Coords(Const.COORDS_BY_USER,this.line.point2.coords.usrCoords,this.board),h=Math.abs(l.usrCoords[0])>=Mat.eps&&l.scrCoords[1]>=0&&l.scrCoords[1]<=this.board.canvasWidth&&l.scrCoords[2]>=0&&l.scrCoords[2]<=this.board.canvasHeight,c=Math.abs(u.usrCoords[0])>=Mat.eps&&u.scrCoords[1]>=0&&u.scrCoords[1]<=this.board.canvasWidth&&u.scrCoords[2]>=0&&u.scrCoords[2]<=this.board.canvasHeight,JXG$1.exists(r)&&r==="ticksdistance"?(Geometry.calcStraight(this.line,l,u,0),b=this.getDistanceFromZero(t,l),_=this.getDistanceFromZero(t,u),Geometry.calcStraight(this.line,l,u,this.line.evalVisProp("margin")),b=this.getDistanceFromZero(t,l)-b,_=this.getDistanceFromZero(t,u).m2):Geometry.calcLineDelimitingPoints(this.line,l,u),s=this.line.evalVisProp("firstarrow"),o=this.line.evalVisProp("lastarrow"),v=this.getDistanceFromZero(t,l),y=this.getDistanceFromZero(t,u),(s||o)&&(p=this.board.renderer.getArrowHeadData(this.line,this.line.evalVisProp("strokewidth"),""),this.board.renderer.getPositionArrowHead(this.line,l,u,p)),f=this.getDistanceFromZero(t,l),d=this.getDistanceFromZero(t,u),v=f-v,y=f-y,f<d?(a=f,n=d,!M&&h&&!$&&(a+=N),!C&&c&&!$&&(n-=N)):d<f?(a=d,n=f,!C&&c&&!$&&(a+=N),!M&&h&&!$&&(n-=N)):(a=0,n=0),{lower:a,upper:n,a1:v,a2:y,m1:b,m2:_})},getDistanceFromZero:function(t,r){var a,n,s,o,l;return a=this.line.point1.coords,n=this.line.point2.coords,l=t.distance(Const.COORDS_BY_USER,r),s=[n.usrCoords[0]-a.usrCoords[0],n.usrCoords[1]-a.usrCoords[1],n.usrCoords[2]-a.usrCoords[2]],o=[r.usrCoords[0]-t.usrCoords[0],r.usrCoords[1]-t.usrCoords[1],r.usrCoords[2]-t.usrCoords[2]],Mat.innerProduct(s,o,3)<0&&(l*=-1),l},generateEquidistantTicks:function(t,r){var a,n=Mat.eps,s,o,l=this.evalVisProp("minorticks");if(o=this.getDistanceMajorTicks(),this.line.elementClass===Const.OBJECT_CLASS_LINE&&(s=this.getXandYdeltas()),o*=this.evalVisProp("scale"),o/=l+1,this.ticksDelta=o,!(o<Mat.eps)){if(Math.abs(r.upper-r.lower)>o*2048){JXG$1.warn("JSXGraph ticks: too many ticks (>2048). Please increase ticksDistance.");return}for(a=0,this.evalVisProp("drawzero")||(a=o),a<r.lower&&(a=Math.floor((r.lower-n)/o)*o);a<=r.upper+n&&(a>=r.lower-n&&this.processTickPosition(t,a,o,s),a+=o,!(r.upper-a>o*1e4)););for(a=-o,a>r.upper&&(a=Math.ceil((r.upper+n)/-o)*-o);a>=r.lower-n&&(a<=r.upper+n&&this.processTickPosition(t,a,o,s),a-=o,!(a-r.lower>o*1e4)););}},getDistanceMajorTicks:function(){var t,r,a,n,s,o,l=5,u,h,c;return this.evalVisProp("insertticks")?(a=this.getLowerAndUpperBounds(this.getZeroCoordinates(),""),s=a.upper-a.lower,o=this.evalVisProp("scale"),u=s/(l+1)/o,h=this.evalVisProp("minticksdistance")/o,c=this.evalVisProp("minorticks"),n=this.getXandYdeltas(),n.x*=this.board.unitX,n.y*=this.board.unitY,h/=Mat.hypot(n.x,n.y),h*=c+1,t=Math.pow(10,Math.floor(Math.log(h)/Math.LN10)),2*t>=h?t*=2:5*t>=h&&(t*=5),r=Math.pow(10,Math.floor(Math.log(u)/Math.LN10)),5*r<u?r*=5:2*r<u&&(r*=2),t=Math.max(t,r),t):this.evalVisProp("ticksdistance")},processTickPosition:function(t,r,a,n){var s,o,l,u,h,c,f=this.evalVisProp("ticksperlabel"),d=null;this.line.elementClass===Const.OBJECT_CLASS_LINE?(s=t.usrCoords[1]+r*n.x,o=t.usrCoords[2]+r*n.y):(s=this.line.X(t+r),o=this.line.Y(t+r)),l=new Coords(Const.COORDS_BY_USER,[s,o],this.board),this.line.elementClass===Const.OBJECT_CLASS_CURVE&&(d=t+r,this.setTicksSizeVariables(d)),h=this.evalVisProp("minorticks"),l.major=Math.round(r/a)%(h+1)===0,f||(f=h+1),c=Math.round(r/a)%f===0,u=this.createTickPath(l,l.major),u.length===3&&(this.ticks.push(u),c&&this.evalVisProp("drawlabels")?this.labelsData.push(this.generateLabelData(this.generateLabelText(l,t,d),l,this.ticks.length)):this.labelsData.push(null))},generateFixedTicks:function(t,r){var a,n,s,o,l,u,h=Mat.eps,c,f=JXG$1.isArray(this.visProp.labels),d,p=this.evalVisProp("drawlabels");for(this.line.elementClass===Const.OBJECT_CLASS_LINE&&(d=this.getXandYdeltas()),s=0;s<this.fixedTicks.length;s++)this.line.elementClass===Const.OBJECT_CLASS_LINE?(c=this.fixedTicks[s],l=t.usrCoords[1]+c*d.x,u=t.usrCoords[2]+c*d.y):(c=t+this.fixedTicks[s],l=this.line.X(c),u=this.line.Y(c)),a=new Coords(Const.COORDS_BY_USER,[l,u],this.board),this.line.elementClass===Const.OBJECT_CLASS_CURVE&&this.setTicksSizeVariables(c),o=this.createTickPath(a,!0),o.length===3&&c>=r.lower-h&&c<=r.upper+h&&(this.ticks.push(o),p&&(f||JXG$1.exists(this.visProp.labels[s]))?(n=f?this.evalVisProp("labels."+s):c,this.labelsData.push(this.generateLabelData(this.generateLabelText(a,t,n),a,s))):this.labelsData.push(null))},getXandYdeltas:function(){var t,r,a=this.line.point1.Dist(this.line.point2);return t=this.line.point1.coords.usrCoords,r=this.line.point2.coords.usrCoords,{x:(r[1]-t[1])/a,y:(r[2]-t[2])/a}},_isInsideCanvas:function(t,r,a){var n=this.board.canvasWidth,s=this.board.canvasHeight;return a===void 0&&(a=0),t[0]>=a&&t[0]<=n-a&&r[0]>=a&&r[0]<=s-a||t[1]>=a&&t[1]<=n-a&&r[1]>=a&&r[1]<=s-a},createTickPath:function(t,r){var a,n,s,o,l,u,h,c,f,d=[-2e6,-2e6],p=[-2e6,-2e6],v,y,b,_,N,M,C,$,w;if(a=t.scrCoords,r?(o=this.dxMaj,l=this.dyMaj,f=this.majStyle,C=this.evalVisProp("majortickendings.0")>0,$=this.evalVisProp("majortickendings.1")>0):(o=this.dxMin,l=this.dyMin,f=this.minStyle,C=this.evalVisProp("tickendings.0")>0,$=this.evalVisProp("tickendings.1")>0),n=[-l*a[1]-o*a[2],l,o],r&&this.evalVisProp("type")==="polar"){if(_=this.board.getBoundingBox(),N=2*Math.PI,M=N/180,a=t.usrCoords,y=Mat.hypot(a[1],a[2]),b=Math.max(Mat.hypot(_[0],_[1]),Mat.hypot(_[2],_[3])),y<b){for(d=[],p=[],v=0;v<=N;v+=M)d.push(this.board.origin.scrCoords[1]+y*Math.cos(v)*this.board.unitX),p.push(this.board.origin.scrCoords[2]+y*Math.sin(v)*this.board.unitY);return[d,p,r]}}else{if(f==="infinite"){if(this.evalVisProp("ignoreinfinitetickendings")&&(C=$=!0),s=Geometry.meetLineBoard(n,this.board),C&&$)d[0]=s[0].scrCoords[1],d[1]=s[1].scrCoords[1],p[0]=s[0].scrCoords[2],p[1]=s[1].scrCoords[2];else if(w=[Mat.innerProduct(s[0].usrCoords.slice(1,3),this.line.stdform.slice(1,3))+this.line.stdform[0],Mat.innerProduct(s[1].usrCoords.slice(1,3),this.line.stdform.slice(1,3))+this.line.stdform[0]],w[0]<w[1]&&(s.reverse(),w.reverse()),C){if(w[0]<0)return[];w[1]<0?(d[0]=s[0].scrCoords[1],p[0]=s[0].scrCoords[2],d[1]=a[1],p[1]=a[2]):(d[0]=s[0].scrCoords[1],p[0]=s[0].scrCoords[2],d[1]=s[1].scrCoords[1],p[1]=s[1].scrCoords[2])}else if($){if(w[1]>0)return[];w[0]>0?(d[0]=a[1],p[0]=a[2],d[1]=s[1].scrCoords[1],p[1]=s[1].scrCoords[2]):(d[0]=s[0].scrCoords[1],p[0]=s[0].scrCoords[2],d[1]=s[1].scrCoords[1],p[1]=s[1].scrCoords[2])}}else this.evalVisProp("face")===">"?c=Math.PI/4:this.evalVisProp("face")==="<"?c=-Math.PI/4:c=0,u=Math.cos(c)*o-Math.sin(c)*l,h=Math.sin(c)*o+Math.cos(c)*l,d[0]=a[1]+u*C,p[0]=a[2]-h*C,d[1]=a[1],p[1]=a[2],c=-c,u=Math.cos(c)*o-Math.sin(c)*l,h=Math.sin(c)*o+Math.cos(c)*l,d[2]=a[1]-u*$,p[2]=a[2]+h*$;if(this._isInsideCanvas(d,p))return[d,p,r]}return[]},formatLabelText:function(t){var r,a,n=this.evalVisProp("label.usemathjax"),s=this.evalVisProp("label.usekatex"),o=this.evalVisProp("scalesymbol");return JXG$1.isNumber(t)?(this.evalVisProp("label.tofraction")?n?r="\\("+JXG$1.toFraction(t,!0)+"\\)":r=JXG$1.toFraction(t,s):(a=this.evalVisProp("digits"),this.useLocale()?r=this.formatNumberLocale(t,a):(r=(Math.round(t*1e11)/1e11).toString(),(r.length>this.evalVisProp("maxlabellength")||r.indexOf("e")!==-1)&&(this.evalVisProp("precision")!==3&&a===3&&(a=this.evalVisProp("precision")),r=t.toExponential(a).toString()))),this.evalVisProp("beautifulscientificticklabels")&&(r=this.beautifyScientificNotationLabel(r)),r.indexOf(".")>-1&&r.indexOf("e")===-1&&(r=r.replace(/0+$/,""),r=r.replace(/\.$/,""))):r=t.toString(),o.length>0&&(r==="1"?r=o:r==="-1"?r="-"+o:r!=="0"&&(r=r+o)),this.evalVisProp("useunicodeminus")&&(r=r.replace(/-/g,"")),r},beautifyScientificNotationLabel:function(t){var r;return t.indexOf("e")===-1?t:(r=parseFloat(t.substring(0,t.indexOf("e")))+t.substring(t.indexOf("e")),r=r.replace(/e(.*)$/g,function(a,n){var s="10";return s+=n.replace(/-/g,"").replace(/\+/g,"").replace(/0/g,"").replace(/1/g,"").replace(/2/g,"").replace(/3/g,"").replace(/4/g,"").replace(/5/g,"").replace(/6/g,"").replace(/7/g,"").replace(/8/g,"").replace(/9/g,""),s}),r)},generateLabelText:function(t,r,a){var n,s;if(!JXG$1.exists(a)){if(s=this.getDistanceFromZero(r,t),Math.abs(s)<Mat.eps)return"0";a=s/this.evalVisProp("scale")}return n=this.formatLabelText(a),n},generateLabelData:function(t,r,a){var n,s,o,l;return l=this.evalVisProp("label.fontsize"),n=[r.scrCoords[1],r.scrCoords[1]],s=[r.scrCoords[2],r.scrCoords[2]],o=l===void 0?12:l,o*=.5,this._isInsideCanvas(n,s,o)?(n=this.evalVisProp("label.offset")[0],s=this.evalVisProp("label.offset")[1],{x:r.usrCoords[1]+n/this.board.unitX,y:r.usrCoords[2]+s/this.board.unitY,t,i:a}):null},update:function(){return this.needsUpdate&&this.board.canvasWidth!==0&&this.board.canvasHeight!==0&&this.calculateTicksCoordinates(),this},updateRenderer:function(){return this.needsUpdate?(this.visPropCalc.visible&&this.board.renderer.updateTicks(this),this.updateRendererLabels(),this.setDisplayRendNode(),this.needsUpdate=!1,this):this},updateRendererLabels:function(){var t,r,a,n,s,o,l,u;for(a=this.labelsData.length,n=this.labels.length,t=0,r=0;t<a;t++)this.labelsData[t]!==null&&(l=this.labelsData[t],r<n?(o=this.labels[r],o.setText(l.t),o.setCoords(l.x,l.y),r++):(this.labelCounter+=1,s=JXG$1.deepCopy(this.visProp.label),s.isLabel=!0,s.priv=this.visProp.priv,s.id=this.id+l.i+"Label"+this.labelCounter,o=JXG$1.createText(this.board,[l.x,l.y,l.t],s),this.addChild(o),o.setParents(this),o.isDraggable=!1,o.dump=!1,this.labels.push(o)),u=this.evalVisProp("label.visible"),u==="inherit"&&(u=this.visPropCalc.visible),o.prepareUpdate().updateVisibility(u).updateRenderer(),o.distanceX=this.evalVisProp("label.offset")[0],o.distanceY=this.evalVisProp("label.offset")[1]);for(a=r,r=a;r<n;r++)this.board.renderer.display(this.labels[r],!1),this.labels[r].visProp.visible=this.labels[r].visPropCalc.visible=!1;return this},hideElement:function(){var t;for(JXG$1.deprecated("Element.hideElement()","Element.setDisplayRendNode()"),this.visPropCalc.visible=!1,this.board.renderer.display(this,!1),t=0;t<this.labels.length;t++)JXG$1.exists(this.labels[t])&&this.labels[t].hideElement();return this},showElement:function(){var t;for(JXG$1.deprecated("Element.showElement()","Element.setDisplayRendNode()"),this.visPropCalc.visible=!0,this.board.renderer.display(this,!1),t=0;t<this.labels.length;t++)JXG$1.exists(this.labels[t])&&this.labels[t].showElement();return this}});JXG$1.createTicks=function(t,r,a){var n,s,o=JXG$1.copyAttributes(a,t.options,"ticks");if(r.length<2?s=o.ticksdistance:s=r[1],r[0].elementClass===Const.OBJECT_CLASS_LINE||r[0].elementClass===Const.OBJECT_CLASS_CURVE)n=new JXG$1.Ticks(r[0],s,o);else throw new Error("JSXGraph: Can't create Ticks with parent types '"+typeof r[0]+"'.");return JXG$1.isFunction(o.generatelabelvalue)&&(n.generateLabelText=o.generatelabelvalue),JXG$1.isFunction(o.generatelabeltext)&&(n.generateLabelText=o.generatelabeltext),n.setParents(r[0]),n.isDraggable=!0,n.fullUpdate(r[0].visPropCalc.visible),n};JXG$1.createHatchmark=function(t,r,a){var n,s,o,l,u,h,c=[],f=JXG$1.copyAttributes(a,t.options,"hatch");if(r[0].elementClass!==Const.OBJECT_CLASS_LINE&&r[0].elementClass!==Const.OBJECT_CLASS_CURVE||typeof r[1]!="number")throw new Error("JSXGraph: Can't create Hatch mark with parent types '"+typeof r[0]+"' and '"+typeof r[1]+" and ''"+typeof r[2]+"'.");for(n=r[1],l=f.ticksdistance,u=(n-1)*l,o=-u*.5,s=0;s<n;s++)c[s]=o+s*l;return h=t.create("ticks",[r[0],c],f),h.elType="hatch",r[0].inherits.push(h),h};JXG$1.registerElement("ticks",JXG$1.createTicks);JXG$1.registerElement("hash",JXG$1.createHatchmark);JXG$1.registerElement("hatch",JXG$1.createHatchmark);JXG$1.Ticks;var bitReverse=[0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240,8,136,72,200,40,168,104,232,24,152,88,216,56,184,120,248,4,132,68,196,36,164,100,228,20,148,84,212,52,180,116,244,12,140,76,204,44,172,108,236,28,156,92,220,60,188,124,252,2,130,66,194,34,162,98,226,18,146,82,210,50,178,114,242,10,138,74,202,42,170,106,234,26,154,90,218,58,186,122,250,6,134,70,198,38,166,102,230,22,150,86,214,54,182,118,246,14,142,78,206,46,174,110,238,30,158,94,222,62,190,126,254,1,129,65,193,33,161,97,225,17,145,81,209,49,177,113,241,9,137,73,201,41,169,105,233,25,153,89,217,57,185,121,249,5,133,69,197,37,165,101,229,21,149,85,213,53,181,117,245,13,141,77,205,45,173,109,237,29,157,93,221,61,189,125,253,3,131,67,195,35,163,99,227,19,147,83,211,51,179,115,243,11,139,75,203,43,171,107,235,27,155,91,219,59,187,123,251,7,135,71,199,39,167,103,231,23,151,87,215,55,183,119,247,15,143,79,207,47,175,111,239,31,159,95,223,63,191,127,255],cplens=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],cplext=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,99,99],cpdist=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],cpdext=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],border=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],NAMEMAX=256;JXG$1.Util=JXG$1.Util||{};JXG$1.Util.Unzip=function(t){var r,a,n,s,o=[],l=0,u=[],h=new Array(32768),c=0,f=!1,d=t.length,p=0,v=1,y=new Array(288),b=new Array(32),_=0,N=null,M=0,C=new Array(17),$=[];C[0]=0;function w(){return p<d?t[p++]:-1}function A(){v=1}function X(){var Z;try{Z=v&1,v>>=1,v===0&&(v=w(),Z=v&1,v=v>>1|128)}catch(ne){throw console.log("Probably problems on iOS7 with >>"),ne}return Z}function O(Z){var ne=0,j=Z;try{for(;j--;)ne=ne<<1|X();Z&&(ne=bitReverse[ne]>>8-Z)}catch(V){throw console.log("Probably problems on iOS7 with >>"),V}return ne}function G(){c=0}function R(Z){h[c++]=Z,o.push(String.fromCharCode(Z)),c===32768&&(c=0)}function B(){this.b0=0,this.b1=0,this.jump=null,this.jumppos=-1}function F(){for(var Z=!0;Z;){if(C[M]>=s)return-1;if(n[C[M]]===M)return C[M]++;C[M]++}}function U(){var Z=N[_],ne;if(M===17)return-1;if(_++,M++,ne=F(),ne>=0)Z.b0=ne;else if(Z.b0=32768,U())return-1;if(ne=F(),ne>=0)Z.b1=ne,Z.jump=null;else if(Z.b1=32768,Z.jump=N[_],Z.jumppos=_,U())return-1;return M--,0}function q(Z,ne,j,V){var L;for(N=Z,_=0,n=j,s=ne,L=0;L<17;L++)C[L]=0;return M=0,U()?-1:0}function ee(Z){for(var ne,j,V,L=!0,ae=0,W=Z[ae];L;)if(V=X(),V){if(!(W.b1&32768))return W.b1;for(W=W.jump,ne=Z.length,j=0;j<ne;j++)if(Z[j]===W){ae=j;break}}else{if(!(W.b0&32768))return W.b0;ae++,W=Z[ae]}}function z(){var Z,ne,j,V,L,ae,W,ve,de,se,ie,ce,xe,fe,Ne,we,Pe=!0;do if(Z=X(),j=O(2),j===0)for(A(),se=w(),se|=w()<<8,ce=w(),ce|=w()<<8,(se^~ce)&65535&&JXG$1.debug(`BlockLen checksum mismatch
`);se--;)ne=w(),R(ne);else if(j===1)for(;Pe;)if(L=bitReverse[O(7)]>>1,L>23?(L=L<<1|X(),L>199?(L-=128,L=L<<1|X()):(L-=48,L>143&&(L=L+136))):L+=256,L<256)R(L);else{if(L===256)break;for(L-=257,de=O(cplext[L])+cplens[L],L=bitReverse[O(5)]>>3,cpdext[L]>8?(ie=O(8),ie|=O(cpdext[L]-8)<<8):ie=O(cpdext[L]),ie+=cpdist[L],L=0;L<de;L++)ne=h[c-ie&32767],R(ne)}else if(j===2){for(W=new Array(320),fe=257+O(5),Ne=1+O(5),we=4+O(4),L=0;L<19;L++)W[L]=0;for(L=0;L<we;L++)W[border[L]]=O(3);for(de=b.length,V=0;V<de;V++)b[V]=new B;if(q(b,19,W))return G(),1;for(xe=fe+Ne,V=0;V<xe;)if(L=ee(b),L<16)W[V++]=L;else if(L===16){if(L=3+O(2),V+L>xe)return G(),1;for(ae=V?W[V-1]:0;L--;)W[V++]=ae}else{if(L===17?L=3+O(3):L=11+O(7),V+L>xe)return G(),1;for(;L--;)W[V++]=0}for(de=y.length,V=0;V<de;V++)y[V]=new B;if(q(y,fe,W))return G(),1;for(de=y.length,V=0;V<de;V++)b[V]=new B;for(ve=[],V=fe;V<W.length;V++)ve[V-fe]=W[V];if(q(b,Ne,ve))return G(),1;for(;Pe;)if(L=ee(y),L>=256){if(L-=256,L===0)break;for(L-=1,de=O(cplext[L])+cplens[L],L=ee(b),cpdext[L]>8?(ie=O(8),ie|=O(cpdext[L]-8)<<8):ie=O(cpdext[L]),ie+=cpdist[L];de--;)ne=h[c-ie&32767],R(ne)}else R(L)}while(!Z);return G(),A(),0}function Y(){var Z,ne,j,V,L,ae,W,ve,de=[];try{if(o=[],f=!1,de[0]=w(),de[1]=w(),de[0]===120&&de[1]===218&&(z(),u[l]=[o.join(""),"geonext.gxt"],l++),de[0]===31&&de[1]===139&&(K(),u[l]=[o.join(""),"file"],l++),de[0]===80&&de[1]===75){if(f=!0,de[2]=w(),de[3]=w(),de[2]===3&&de[3]===4){for(de[0]=w(),de[1]=w(),r=w(),r|=w()<<8,ve=w(),ve|=w()<<8,w(),w(),w(),w(),W=w(),W|=w()<<8,W|=w()<<16,W|=w()<<24,ae=w(),ae|=w()<<8,ae|=w()<<16,ae|=w()<<24,L=w(),L|=w()<<8,L|=w()<<16,L|=w()<<24,V=w(),V|=w()<<8,j=w(),j|=w()<<8,Z=0,$=[];V--;)ne=w(),ne==="/"|ne===":"?Z=0:Z<NAMEMAX-1&&($[Z++]=String.fromCharCode(ne));for(a||(a=$),Z=0;Z<j;)ne=w(),Z++;if(ve===8&&(z(),u[l]=new Array(2),u[l][0]=o.join(""),u[l][1]=$.join(""),l++),K())return!1}return!0}}catch(se){throw console.log("Probably problems on iOS7 with >>"),se}return!1}function K(){var Z,ne,j,V,L,ae=[];if(r&8&&(ae[0]=w(),ae[1]=w(),ae[2]=w(),ae[3]=w(),ae[0]===80&&ae[1]===75&&ae[2]===7&&ae[3]===8?(Z=w(),Z|=w()<<8,Z|=w()<<16,Z|=w()<<24):Z=ae[0]|ae[1]<<8|ae[2]<<16|ae[3]<<24,ne=w(),ne|=w()<<8,ne|=w()<<16,ne|=w()<<24,j=w(),j|=w()<<8,j|=w()<<16,j|=w()<<24),f&&Y())return!1;if(ae[0]=w(),ae[0]!==8)return!0;if(r=w(),w(),w(),w(),w(),w(),w(),r&4)for(ae[0]=w(),ae[2]=w(),M=ae[0]+256*ae[1],V=0;V<M;V++)w();if(r&8)for(V=0,$=[],L=w();L;)(L==="7"||L===":")&&(V=0),V<NAMEMAX-1&&($[V++]=L),L=w();if(r&16)for(L=w();L;)L=w();return r&2&&(w(),w()),z(),Z=w(),Z|=w()<<8,Z|=w()<<16,Z|=w()<<24,j=w(),j|=w()<<8,j|=w()<<16,j|=w()<<24,f&&Y(),!1}JXG$1.Util.Unzip.prototype.unzipFile=function(Z){var ne;for(this.unzip(),ne=0;ne<u.length;ne++)if(u[ne][1]===Z)return u[ne][0];return""},JXG$1.Util.Unzip.prototype.unzip=function(){return Y(),u}};JXG$1.Util;JXG$1.CA=function(t,r,a){this.node=t,this.createNode=r,this.parser=a};JXG$1.extend(JXG$1.CA.prototype,{findMapNode:function(t,r){var a,n,s;if(r.value==="op_assign"&&r.children[0].value===t)return r.children[1];if(r.children){for(n=r.children.length,a=0;a<n;++a)if(s=this.findMapNode(t,r.children[a]),s!==null)return s}return null},setMath:function(t){var r,a;if((t.type=="node_op"&&(t.value=="op_add"||t.value=="op_sub"||t.value=="op_mul"||t.value=="op_div"||t.value=="op_neg"||t.value=="op_execfun"||t.value=="op_exp")||t.type=="node_var"||t.type=="node_const")&&(t.isMath=!0),t.children)for(a=t.children.length,r=0;r<a;++r)this.setMath(t.children[r])},deriveElementary:function(t,r){var a=t.children[0].value,n=t.children[1],s;switch(a){case"abs":s=this.createNode("node_op","op_div",n[0],this.createNode("node_op","op_execfun",this.createNode("node_var","sqrt"),[this.createNode("node_op","op_mul",JXG$1.deepCopy(n[0]),JXG$1.deepCopy(n[0]))]));break;case"sqrt":s=this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_mul",this.createNode("node_const",2),this.createNode(t.type,t.value,JXG$1.deepCopy(t.children[0]),JXG$1.deepCopy(t.children[1]))));break;case"sin":s=this.createNode("node_op","op_execfun",this.createNode("node_var","cos"),JXG$1.deepCopy(n));break;case"cos":s=this.createNode("node_op","op_neg",this.createNode("node_op","op_execfun",this.createNode("node_var","sin"),JXG$1.deepCopy(n)));break;case"tan":s=this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_exp",this.createNode("node_op","op_execfun",this.createNode("node_var","cos"),JXG$1.deepCopy(n)),this.createNode("node_const",2)));break;case"cot":s=this.createNode("node_op","op_neg",this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_exp",this.createNode("node_op","op_execfun",this.createNode("node_var","sin"),JXG$1.deepCopy(n)),this.createNode("node_const",2))));break;case"exp":s=this.createNode(t.type,t.value,JXG$1.deepCopy(t.children[0]),JXG$1.deepCopy(t.children[1]));break;case"pow":s=this.createNode("node_op","op_mul",this.createNode("node_op","op_execfun",JXG$1.deepCopy(t.children[0]),JXG$1.deepCopy(t.children[1])),this.createNode("node_op","op_add",this.createNode("node_op","op_mul",this.derivative(t.children[1][0],r),this.createNode("node_op","op_div",JXG$1.deepCopy(t.children[1][1]),JXG$1.deepCopy(t.children[1][0]))),this.createNode("node_op","op_mul",this.derivative(t.children[1][1],r),this.createNode("node_op","op_execfun",this.createNode("node_var","log"),[JXG$1.deepCopy(t.children[1][0])]))));break;case"log":case"ln":s=this.createNode("node_op","op_div",this.createNode("node_const",1),JXG$1.deepCopy(n[0]));break;case"log2":case"lb":case"ld":s=this.createNode("node_op","op_mul",this.createNode("node_op","op_div",this.createNode("node_const",1),JXG$1.deepCopy(n[0])),this.createNode("node_const",1.4426950408889634));break;case"log10":case"lg":s=this.createNode("node_op","op_mul",this.createNode("node_op","op_div",this.createNode("node_const",1),JXG$1.deepCopy(n[0])),this.createNode("node_const",.43429448190325176));break;case"asin":s=this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_execfun",this.createNode("node_var","sqrt"),[this.createNode("node_op","op_sub",this.createNode("node_const",1),this.createNode("node_op","op_mul",JXG$1.deepCopy(n[0]),JXG$1.deepCopy(n[0])))]));break;case"acos":s=this.createNode("node_op","op_neg",this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_execfun",this.createNode("node_var","sqrt"),[this.createNode("node_op","op_sub",this.createNode("node_const",1),this.createNode("node_op","op_mul",JXG$1.deepCopy(n[0]),JXG$1.deepCopy(n[0])))])));break;case"atan":s=this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_add",this.createNode("node_const",1),this.createNode("node_op","op_mul",JXG$1.deepCopy(n[0]),JXG$1.deepCopy(n[0]))));break;case"acot":s=this.createNode("node_op","op_neg",this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_add",this.createNode("node_const",1),this.createNode("node_op","op_mul",JXG$1.deepCopy(n[0]),JXG$1.deepCopy(n[0])))));break;case"sinh":s=this.createNode("node_op","op_execfun",this.createNode("node_var","cosh"),[JXG$1.deepCopy(n[0])]);break;case"cosh":s=this.createNode("node_op","op_execfun",this.createNode("node_var","sinh"),[JXG$1.deepCopy(n[0])]);break;case"tanh":s=this.createNode("node_op","op_sub",this.createNode("node_const",1),this.createNode("node_op","op_exp",this.createNode("node_op","op_execfun",this.createNode("node_var","tanh"),[JXG$1.deepCopy(n[0])]),this.createNode("node_const",2)));break;case"asinh":s=this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_execfun",this.createNode("node_var","sqrt"),[this.createNode("node_op","op_add",this.createNode("node_op","op_mul",JXG$1.deepCopy(n[0]),JXG$1.deepCopy(n[0])),this.createNode("node_const",1))]));break;case"acosh":s=this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_execfun",this.createNode("node_var","sqrt"),[this.createNode("node_op","op_sub",this.createNode("node_op","op_mul",JXG$1.deepCopy(n[0]),JXG$1.deepCopy(n[0])),this.createNode("node_const",1))]));break;case"atanh":s=this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_sub",this.createNode("node_const",1),this.createNode("node_op","op_mul",JXG$1.deepCopy(n[0]),JXG$1.deepCopy(n[0]))));break;default:throw s=this.createNode("node_const",0),console.log('Derivative of "'+a+'" not yet implemented'),new Error("Error("+this.line+"): ")}return s},derivative:function(t,r){var a;switch(t.type){case"node_op":switch(t.value){case"op_execfun":t.children[0].value=="pow"?a=this.deriveElementary(t,r):t.children[1].length===0?a=this.createNode("node_const",0):a=this.createNode("node_op","op_mul",this.deriveElementary(t,r),this.derivative(t.children[1][0],r));break;case"op_div":a=this.createNode("node_op","op_div",this.createNode("node_op","op_sub",this.createNode("node_op","op_mul",this.derivative(t.children[0],r),JXG$1.deepCopy(t.children[1])),this.createNode("node_op","op_mul",JXG$1.deepCopy(t.children[0]),this.derivative(t.children[1],r))),this.createNode("node_op","op_mul",JXG$1.deepCopy(t.children[1]),JXG$1.deepCopy(t.children[1])));break;case"op_mul":a=this.createNode("node_op","op_add",this.createNode("node_op","op_mul",JXG$1.deepCopy(t.children[0]),this.derivative(t.children[1],r)),this.createNode("node_op","op_mul",this.derivative(t.children[0],r),JXG$1.deepCopy(t.children[1])));break;case"op_neg":a=this.createNode("node_op","op_neg",this.derivative(t.children[0],r));break;case"op_add":case"op_sub":a=this.createNode("node_op",t.value,this.derivative(t.children[0],r),this.derivative(t.children[1],r));break;case"op_exp":a=this.createNode("node_op","op_mul",JXG$1.deepCopy(t),this.createNode("node_op","op_add",this.createNode("node_op","op_mul",this.derivative(t.children[0],r),this.createNode("node_op","op_div",JXG$1.deepCopy(t.children[1]),JXG$1.deepCopy(t.children[0]))),this.createNode("node_op","op_mul",this.derivative(t.children[1],r),this.createNode("node_op","op_execfun",this.createNode("node_var","log"),[JXG$1.deepCopy(t.children[0])]))));break}break;case"node_var":t.value===r?a=this.createNode("node_const",1):a=this.createNode("node_const",0);break;case"node_const":a=this.createNode("node_const",0);break}return a},expandDerivatives:function(t,r,a){var n,s,o,l,u,h,c,f,d,p,v,y,b;if(h=0,!t)return h;for(this.line=t.line,this.col=t.col,n=t.children.length,s=0;s<n;++s)if(t.children[s]&&t.children[s].type)t.children[s]=this.expandDerivatives(t.children[s],t,a);else if(JXG$1.isArray(t.children[s]))for(o=0;o<t.children[s].length;++o)t.children[s][o]&&t.children[s][o].type&&(t.children[s][o]=this.expandDerivatives(t.children[s][o],t,a));switch(t.type){case"node_op":switch(t.value){case"op_execfun":if(t.children[0]&&t.children[0].value==="D"){if(b=!1,t.children[1][0].type=="node_var"&&(d=t.children[1][0].value,l=this.findMapNode(d,a),l!==null&&(b=!0)),b?(v=l.children[0],t.children[1].length>=2?p=t.children[1][1].value:p=l.children[0][0],u=l.children[1]):(u=t.children[1][0],v=["x"],t.children[1].length>=2?p=t.children[1][1].value:p="x"),t.children[1].length>=3?y=t.children[1][2].value:y=1,f=u,y>=1)for(;y>=1;)f=this.derivative(f,p),f=this.removeTrivialNodes(f),y--;r.type=="node_op"&&r.value=="op_assign"?c=this.createNode("node_op","op_map",v,f):c=f,this.setMath(c),t.type=c.type,t.value=c.value,c.children.length>0&&(t.children[0]=c.children[0]),c.children.length>1&&(t.children[1]=c.children[1])}}break}return t},removeTrivialNodes:function(t){var r,a,n,s,o;if(JXG$1.isArray(t))for(a=t.length,r=0;r<a;++r)t[r]=this.removeTrivialNodes(t[r]);if(t.type!="node_op"||!t.children)return t;for(a=t.children.length,r=0;r<a;++r){this.mayNotBeSimplified=!1;do t.children[r]=this.removeTrivialNodes(t.children[r]);while(this.mayNotBeSimplified)}switch(t.value){case"op_map":if(n=t.children[0],s=t.children[1],s.type=="node_var"){for(r=0;r<n.length;++r)if(n[r]==s.value){s.isMath=!0;break}}break;case"op_add":if(n=t.children[0],s=t.children[1],n.type=="node_const"&&n.value===0)return s;if(s.type=="node_const"&&s.value===0)return n;if(n.type=="node_const"&&s.type=="node_const")return n.value+=s.value,n;break;case"op_mul":if(n=t.children[0],s=t.children[1],n.type=="node_const"&&n.value==1)return s;if(s.type=="node_const"&&s.value==1||n.type=="node_const"&&n.value===0)return n;if(s.type=="node_const"&&s.value===0||s.type=="node_const"&&s.value===0)return s;if(n.type=="node_op"&&n.value=="op_neg"&&s.type=="node_op"&&s.value=="op_neg")return t.children=[n.children[0],s.children[0]],this.mayNotBeSimplified=!0,t;if(n.value=="op_neg"&&s.value!="op_neg")return t.type="node_op",t.value="op_neg",t.children=[this.createNode("node_op","op_mul",n.children[0],s)],this.mayNotBeSimplified=!0,t;if(n.value!="op_neg"&&s.value=="op_neg")return t.type="node_op",t.value="op_neg",t.children=[this.createNode("node_op","op_mul",n,s.children[0])],this.mayNotBeSimplified=!0,t;if(n.value=="op_div"&&n.children[0].type=="node_const"&&n.children[0].value==1)return t.type="node_op",t.value="op_div",t.children=[s,n.children[1]],this.mayNotBeSimplified=!0,t;if(s.value=="op_div"&&s.children[0].type=="node_const"&&s.children[0].value==1)return t.type="node_op",t.value="op_div",t.children=[n,s.children[1]],this.mayNotBeSimplified=!0,t;if(n.type!="node_const"&&s.type=="node_const")return t.children=[s,n],this.mayNotBeSimplified=!0,t;if(n.type!="node_const"&&s.type=="node_op"&&s.value=="op_neg"&&s.children[0].type=="node_const")return t.children=[s,n],this.mayNotBeSimplified=!0,t;if(n.type=="node_op"&&n.value!="op_execfun"&&(s.type=="node_var"||s.type=="node_op"&&s.value=="op_execfun"))return t.children=[s,n],this.mayNotBeSimplified=!0,t;if(n.type!="node_op"&&s.type=="node_op"&&s.value=="op_neg"&&s.children[0].type=="node_var")return t.children=[s,n],this.mayNotBeSimplified=!0,t;if(n.type!="node_const"&&s.type=="node_op"&&(s.value=="op_mul"||s.value=="op_div")&&s.children[0].type=="node_const")return o=s.children[0],s.children[0]=n,t.children=[o,s],this.mayNotBeSimplified=!0,t;if(s.type!="node_const"&&n.type=="node_op"&&n.value=="op_mul"&&n.children[0].type=="node_const")return t.children=[n.children[0],this.createNode("node_op","op_mul",n.children[1],s)],this.mayNotBeSimplified=!0,t;if(n.type=="node_const"&&s.type=="node_const")return n.value*=s.value,n;if(n.type=="node_const"&&s.type=="node_op"&&(s.value=="op_mul"||s.value=="op_div")&&s.children[0].type=="node_const")return s.children[0].value*=n.value,s;if(n.hash=this.parser.compile(n),s.hash=this.parser.compile(s),n.hash===s.hash)return t.value="op_exp",t.children[1]=this.createNode("node_const",2),t;if(n.type=="node_const"&&s.type=="node_op"&&(s.value=="op_mul"||s.value=="op_div")&&s.children[0].type=="node_const")return s.children[0].value*=n.value,s;if(s.type=="node_op"&&s.value=="op_exp"&&(n.hash||(n.hash=this.parser.compile(n)),s.children[0].hash||(s.children[0].hash=this.parser.compile(s.children[0])),n.hash===s.children[0].hash))return s.children[1]=this.createNode("node_op","op_add",s.children[1],this.createNode("node_const",1)),this.mayNotBeSimplified=!0,s;if(n.type=="node_op"&&n.value=="op_exp"&&s.type=="node_op"&&s.value=="op_exp"&&(n.children[0].hash=this.parser.compile(n.children[0]),s.children[0].hash=this.parser.compile(s.children[0]),n.children[0].hash===s.children[0].hash))return n.children[1]=this.createNode("node_op","op_add",n.children[1],s.children[1]),this.mayNotBeSimplified=!0,n;break;case"op_sub":if(n=t.children[0],s=t.children[1],n.type=="node_const"&&n.value===0)return t.value="op_neg",t.children[0]=s,t;if(s.type=="node_const"&&s.value===0)return n;if(n.type=="node_const"&&s.type=="node_const"&&n.value==s.value)return this.createNode("node_const",0);if(n.type=="node_var"&&s.type=="node_var"&&n.value==s.value)return this.createNode("node_const",0);if(n.type=="node_const"&&s.type=="node_const")return n.value-=s.value,n;if(n.type=="node_op"&&n.value=="op_mul"&&s.type=="node_op"&&s.value=="op_mul"&&(n.children[1].hash=this.parser.compile(n.children[1]),s.children[1].hash=this.parser.compile(s.children[1]),n.children[1].hash===s.children[1].hash))return t.value="op_mul",t.children=[this.createNode("node_op","op_sub",n.children[0],s.children[0]),n.children[1]],this.mayNotBeSimplified=!0,t;if(n.type=="node_op"&&n.value=="op_mul"&&(n.children[1].hash=this.parser.compile(n.children[1]),s.hash=this.parser.compile(s),n.children[1].hash===s.hash))return t.value="op_mul",t.children=[this.createNode("node_op","op_sub",n.children[0],this.createNode("node_const",1)),s],this.mayNotBeSimplified=!0,t;if(s.type=="node_op"&&s.value=="op_mul"&&(s.children[1].hash=this.parser.compile(s.children[1]),n.hash=this.parser.compile(n),s.children[1].hash===n.hash))return t.value="op_mul",t.children=[this.createNode("node_op","op_sub",this.createNode("node_const",1),s.children[0]),n],this.mayNotBeSimplified=!0,t;break;case"op_neg":if(n=t.children[0],n.type=="node_const"&&n.value===0)return n;if(n.type=="node_op"&&n.value=="op_neg")return n.children[0];break;case"op_div":if(n=t.children[0],s=t.children[1],n.type=="node_const"&&s.type=="node_const"&&n.value==s.value&&n.value!==0)return n.value=1,n;if(n.type=="node_const"&&n.value===0&&s.type=="node_const"&&s.value!==0)return n.value=0,n;if(n.type=="node_const"&&n.value===0&&(s.type=="node_op"||s.type=="node_var"))return t.type="node_const",t.value=0,t;if(n.type=="node_var"&&s.type=="node_var"&&n.value==s.value)return this.createNode("node_const",1);if(n.type=="node_const"&&n.value!==0&&s.type=="node_const"&&s.value===0)return n.value>0?n.value=1/0:n.value=-1/0,n;if(n.type=="node_op"&&n.value=="op_neg"&&s.type=="node_op"&&s.value=="op_neg")return t.children=[n.children[0],s.children[0]],this.mayNotBeSimplified=!0,t;if(n.value=="op_neg"&&s.value!="op_neg")return t.type="node_op",t.value="op_neg",t.children=[this.createNode("node_op","op_div",n.children[0],s)],this.mayNotBeSimplified=!0,t;if(n.value!="op_neg"&&s.value=="op_neg")return t.type="node_op",t.value="op_neg",t.children=[this.createNode("node_op","op_div",n,s.children[0])],this.mayNotBeSimplified=!0,t;if(n.type=="node_op"&&n.value=="op_exp"&&(s.hash||(s.hash=this.parser.compile(s)),n.children[0].hash||(n.children[0].hash=this.parser.compile(n.children[0])),s.hash===n.children[0].hash))return n.children[1]=this.createNode("node_op","op_sub",n.children[1],this.createNode("node_const",1)),this.mayNotBeSimplified=!0,n;if(s.type!="node_const"&&n.type=="node_op"&&n.value=="op_mul"&&n.children[0].type=="node_const")return t.value="op_mul",t.children=[n.children[0],this.createNode("node_op","op_div",n.children[1],s)],this.mayNotBeSimplified=!0,t;if(n.type=="node_op"&&n.value=="op_exp"&&s.type=="node_op"&&s.value=="op_exp"&&(n.children[0].hash=this.parser.compile(n.children[0]),s.children[0].hash=this.parser.compile(s.children[0]),n.children[0].hash===s.children[0].hash))return n.children[1]=this.createNode("node_op","op_sub",n.children[1],s.children[1]),this.mayNotBeSimplified=!0,n;break;case"op_exp":if(n=t.children[0],s=t.children[1],s.type=="node_const"&&s.value===0)return s.value=1,s;if(s.type=="node_const"&&s.value==1||n.type=="node_const"&&n.value==1||n.type=="node_const"&&n.value===0&&s.type=="node_const"&&s.value!==0)return n;if(n.type=="node_op"&&n.value=="op_exp")return t.children=[n.children[0],this.createNode("node_op","op_mul",n.children[1],s)],t;break}switch(t.value){case"op_add":if(n=t.children[0],s=t.children[1],n.type=="node_const"&&s.type=="node_const"&&n.value==s.value)return n.value+=s.value,n;if(n.type=="node_var"&&s.type=="node_var"&&n.value==s.value)return t.children[0]=this.createNode("node_const",2),t.value="op_mul",t;if(n.type=="node_op"&&n.value=="op_neg")return t.value="op_sub",t.children[0]=s,t.children[1]=n.children[0],this.mayNotBeSimplified=!0,t;if(s.type=="node_op"&&s.value=="op_neg")return t.value="op_sub",t.children[1]=s.children[0],this.mayNotBeSimplified=!0,t;if(n.type=="node_op"&&n.value=="op_mul"&&s.type=="node_op"&&s.value=="op_mul"&&(n.children[1].hash=this.parser.compile(n.children[1]),s.children[1].hash=this.parser.compile(s.children[1]),n.children[1].hash===s.children[1].hash))return t.value="op_mul",t.children=[this.createNode("node_op","op_add",n.children[0],s.children[0]),n.children[1]],this.mayNotBeSimplified=!0,t;if(n.type=="node_op"&&n.value=="op_mul"&&(n.children[1].hash=this.parser.compile(n.children[1]),s.hash=this.parser.compile(s),n.children[1].hash===s.hash))return t.value="op_mul",t.children=[this.createNode("node_op","op_add",n.children[0],this.createNode("node_const",1)),s],this.mayNotBeSimplified=!0,t;if(s.type=="node_op"&&s.value=="op_mul"&&(s.children[1].hash=this.parser.compile(s.children[1]),n.hash=this.parser.compile(n),s.children[1].hash===n.hash))return t.value="op_mul",t.children=[this.createNode("node_op","op_add",this.createNode("node_const",1),s.children[0]),n],this.mayNotBeSimplified=!0,t;break;case"op_sub":if(n=t.children[0],s=t.children[1],s.type=="node_op"&&s.value=="op_neg")return t.value="op_add",t.children[1]=s.children[0],this.mayNotBeSimplified=!0,t;break;case"op_execfun":return this.simplifyElementary(t)}return t},simplifyElementary:function(t){var r=t.children[0].value,a=t.children[1];if(a.length==0)return t;switch(r){case"sin":case"tan":if(a[0].type=="node_const"&&a[0].value===0||a[0].type=="node_var"&&a[0].value=="PI"||a[0].type=="node_op"&&a[0].value=="op_mul"&&a[0].children[0].type=="node_const"&&a[0].children[0].value%1===0&&a[0].children[1].type=="node_var"&&a[0].children[1].value=="PI")return t.type="node_const",t.value=0,t;break;case"cos":if(a[0].type=="node_const"&&a[0].value===0)return t.type="node_const",t.value=1,t;if(a[0].type=="node_var"&&a[0].value=="PI")return t.type="node_op",t.value="op_neg",t.children=[this.createNode("node_const",1)],t;break;case"exp":if(a[0].type=="node_const"&&a[0].value===0)return t.type="node_const",t.value=1,t;break;case"pow":if(a[1].type=="node_const"&&a[1].value===0)return t.type="node_const",t.value=1,t;break}return t}});JXG$1.CA;JXG$1.Dump={addMarkers:function(t,r,a){var n,s,o;JXG$1.isArray(r)||(r=[r]),JXG$1.isArray(a)||(a=[a]),s=Math.min(r.length,a.length),r.length=s,a.length=s;for(n in t.objects)if(t.objects.hasOwnProperty(n))for(o=0;o<s;o++)t.objects[n][r[o]]=a[o]},deleteMarkers:function(t,r){var a,n,s;JXG$1.isArray(r)||(r=[r]),n=r.length,r.length=n;for(a in t.objects)if(t.objects.hasOwnProperty(a))for(s=0;s<n;s++)delete t.objects[a][r[s]]},str:function(t){return typeof t=="string"&&t.slice(0,7)!=="function"&&(t='"'+t+'"'),t},minimizeObject:function(t,r){var a,n,s,o={},l=JXG$1.deepCopy(t),u=[];for(s=1;s<arguments.length;s++)u.push(arguments[s]);for(o=JXG$1.deepCopy(o,JXG$1.Options.elements,!0),s=u.length;s>0;s--)o=JXG$1.deepCopy(o,u[s-1],!0);for(a in o)o.hasOwnProperty(a)&&(n=a.toLowerCase(),o[a]!==null&&typeof o[a]!="object"&&o[a]===l[n]&&delete l[n]);return l},prepareAttributes:function(t,r){var a,n;a=this.minimizeObject(r.getAttributes(),JXG$1.Options[r.elType]);for(n in r.subs)r.subs.hasOwnProperty(n)&&(a[n]=this.minimizeObject(r.subs[n].getAttributes(),JXG$1.Options[r.elType][n],JXG$1.Options[r.subs[n].elType]),a[n].id=r.subs[n].id,a[n].name=r.subs[n].name);return a.id=r.id,a.name=r.name,a},setBoundingBox:function(t,r,a){return t.push({obj:a,method:"setBoundingBox",params:[r.getBoundingBox(),r.keepaspectratio]}),t},dump:function(t){var r,a,n,s,o=[],l=[],u=[],h=t.objectsList.length;for(this.addMarkers(t,"dumped",!1),r=0;r<h;r++)if(a=t.objectsList[r],n={},!a.dumped&&a.dump){for(n.type=a.getType(),n.parents=a.getParents().slice(),n.type==="point"&&n.parents[0]===1&&(n.parents=n.parents.slice(1)),s=0;s<n.parents.length;s++)JXG$1.isString(n.parents[s])&&n.parents[s][0]!=="'"&&n.parents[s][0]!=='"'?n.parents[s]='"'+n.parents[s]+'"':JXG$1.isArray(n.parents[s])&&(n.parents[s]="["+n.parents[s].toString()+"]");n.attributes=this.prepareAttributes(t,a),n.type==="glider"&&a.onPolygon&&o.push({obj:a.id,prop:"onPolygon",val:!0}),u.push(n)}return this.deleteMarkers(t,"dumped"),{elements:u,props:o,methods:l}},arrayToParamStr:function(t,r){var a,n=[];for(a=0;a<t.length;a++)n.push(r.call(this,t[a]));return n.join(", ")},toJCAN:function(t){var r,a,n;switch(typeof t){case"object":if(t){if(a=[],JXG$1.isArray(t)){for(r=0;r<t.length;r++)a.push(this.toJCAN(t[r]));return"["+a.join(",")+"]"}for(n in t)t.hasOwnProperty(n)&&a.push(n+": "+this.toJCAN(t[n]));return"<<"+a.join(", ")+">> "}return"null";case"string":return"'"+t.replace(/\\/g,"\\\\").replace(/(["'])/g,"\\$1")+"'";case"number":case"boolean":return t.toString();case"null":return"null"}},toJessie:function(t){var r,a,n,s=this.dump(t),o=[];for(s.methods=this.setBoundingBox(s.methods,t,"$board"),a=s.elements,r=0;r<a.length;r++)a[r].attributes.name.length>0&&o.push("// "+a[r].attributes.name),o.push("s"+r+" = "+a[r].type+"("+a[r].parents.join(", ")+") "+this.toJCAN(a[r].attributes).replace(/\n/,"\\n")+";"),a[r].type==="axis"&&(n=a[r].attributes.id,t.objects[n].defaultTicks===null&&o.push("s"+r+".removeAllTicks();")),o.push("");for(r=0;r<s.methods.length;r++)o.push(s.methods[r].obj+"."+s.methods[r].method+"("+this.arrayToParamStr(s.methods[r].params,this.toJCAN)+");"),o.push("");for(r=0;r<s.props.length;r++)o.push(s.props[r].obj+"."+s.props[r].prop+" = "+this.toJCAN(s.props[r].val)+";"),o.push("");return o.join(`
`)},toJavaScript:function(t){var r,a,n,s=this.dump(t),o=[];for(s.methods=this.setBoundingBox(s.methods,t,"board"),a=s.elements,r=0;r<a.length;r++)o.push('board.create("'+a[r].type+'", ['+a[r].parents.join(", ")+"], "+JXG$1.toJSON(a[r].attributes)+");"),a[r].type==="axis"&&(n=a[r].attributes.id,t.objects[n].defaultTicks===null&&o.push('board.objects["'+n+'"].removeTicks(board.objects["'+n+'"].defaultTicks);'));for(r=0;r<s.methods.length;r++)o.push(s.methods[r].obj+"."+s.methods[r].method+"("+this.arrayToParamStr(s.methods[r].params,JXG$1.toJSON)+");"),o.push("");for(r=0;r<s.props.length;r++)o.push(s.props[r].obj+"."+s.props[r].prop+" = "+JXG$1.toJSON(s.props[r].val)+";"),o.push("");return o.join(`
`)}};JXG$1.Dump;JXG$1.createComb=function(t,r,a){var n,s,o,l,u;if(r.length===2){if(JXG$1.isArray(r[0])&&r[0].length>1)l=JXG$1.copyAttributes(a,t.options,"comb","point1"),n=t.create("point",r[0],l);else if(JXG$1.isString(r[0])||JXG$1.isPoint(r[0]))n=t.select(r[0]);else if(JXG$1.isFunction(r[0])&&JXG$1.isPoint(r[0]()))n=r[0]();else if(JXG$1.isFunction(r[0])&&r[0]().length&&r[0]().length>=2)l=JXG$1.copyAttributes(a,t.options,"comb","point1"),n=JXG$1.createPoint(t,r[0](),l);else throw new Error("JSXGraph: Can't create comb with parent types '"+typeof r[0]+"' and '"+typeof r[1]+`'.
Possible parent types: [point,point], [[x1,y1],[x2,y2]]`);if(JXG$1.isArray(r[1])&&r[1].length>1)l=JXG$1.copyAttributes(a,t.options,"comb","point2"),s=t.create("point",r[1],l);else if(JXG$1.isString(r[1])||JXG$1.isPoint(r[1]))s=t.select(r[1]);else if(JXG$1.isFunction(r[1])&&JXG$1.isPoint(r[1]()))s=r[1]();else if(JXG$1.isFunction(r[1])&&r[1]().length&&r[1]().length>=2)l=JXG$1.copyAttributes(a,t.options,"comb","point2"),s=JXG$1.createPoint(t,r[1](),l);else throw new Error("JSXGraph: Can't create comb with parent types '"+typeof r[0]+"' and '"+typeof r[1]+`'.
Possible parent types: [point,point], [[x1,y1],[x2,y2]]`)}else throw u=r.map(function(h){return"'"+typeof h+"'"}),new Error("JSXGraph: Can't create comb with parent types "+u.join(", ")+`.
Possible parent types: [point,point], [[x1,y1],[x2,y2]]`);return l=JXG$1.copyAttributes(a,t.options,"comb"),o=t.create("curve",[[0],[0]],l),o.updateDataArray=function(){var h=0,c=n.Dist(s),f,d,p,v,y,b,_,N=n,M=s,C,$,w;for(C=o.evalVisProp("frequency"),$=-o.evalVisProp("angle"),w=o.evalVisProp("width"),o.evalVisProp("reverse")&&(N=s,M=n,$=-$),f=Math.cos($),d=Math.sin($),p=(M.X()-N.X())/c,v=(M.Y()-N.Y())/c,f*=w/Math.abs(d),d*=w/Math.abs(d),this.dataX=[],this.dataY=[];h<c;)y=N.X()+p*h,b=N.Y()+v*h,_=Math.min(f,c-h)/Math.abs(f),d*=_,f*=_,this.dataX.push(y),this.dataY.push(b),this.dataX.push(y+p*f+v*d),this.dataY.push(b-p*d+v*f),this.dataX.push(NaN),this.dataY.push(NaN),h+=C},o};JXG$1.registerElement("comb",JXG$1.createComb);var priv$3={removeSlopeTriangle:function(){Polygon.prototype.remove.call(this),this.board.removeObject(this.toppoint),this.board.removeObject(this.glider),this.board.removeObject(this.baseline),this.board.removeObject(this.basepoint),this.board.removeObject(this.label),this._isPrivateTangent&&this.board.removeObject(this.tangent)},Value:function(){return this.tangent.getSlope()},Direction:function(){return this.tangent.Direction()}};JXG$1.createSlopeTriangle=function(t,r,a){var n,s,o,l,u,h,c,f,d,p=!1;if(r.length===1&&r[0].type===Const.OBJECT_TYPE_TANGENT)s=r[0],o=s.glider;else if(r.length===1&&r[0].type===Const.OBJECT_TYPE_GLIDER)o=r[0],d=JXG$1.copyAttributes(a,t.options,"slopetriangle","tangent"),s=t.create("tangent",[o],d),p=!0;else if(r.length===2&&r[0].elementClass===Const.OBJECT_CLASS_LINE&&JXG$1.isPoint(r[1]))s=r[0],o=r[1];else throw new Error("JSXGraph: Can't create slope triangle with parent types '"+typeof r[0]+"'.");return d=JXG$1.copyAttributes(a,t.options,"slopetriangle","basepoint"),c=t.create("point",[function(){return[o.X()+1,o.Y()]}],d),d=JXG$1.copyAttributes(a,t.options,"slopetriangle","baseline"),h=t.create("line",[o,c],d),d=JXG$1.copyAttributes(a,t.options,"slopetriangle","glider"),l=t.create("glider",[o.X()+1,o.Y(),h],d),d=JXG$1.copyAttributes(a,t.options,"slopetriangle","toppoint"),u=t.create("point",[function(){return[l.X(),l.Y()+(l.X()-o.X())*s.getSlope()]}],d),d=JXG$1.copyAttributes(a,t.options,"slopetriangle"),n=t.create("polygon",[o,l,u],d),n.Value=priv$3.Value,n.Direction=priv$3.Direction,n.tangent=s,n._isPrivateTangent=p,n.borders[2].setArrow(!1,!1),d=JXG$1.copyAttributes(a,t.options,"slopetriangle","label"),d=JXG$1.copyAttributes(d,t.options,"label"),d.isLabel=!0,d.anchor=n.borders[1],d.priv=n.borders[1].visProp.priv,d.id=n.borders[1].id+"Label",f=t.create("text",[0,0,function(){return""}],d),f.needsUpdate=!0,f.dump=!1,n.borders[1].label=f,n.borders[1].hasLabel=!0,n.borders[1].visProp.withlabel=!0,f._setText(function(){var v=f.evalVisProp("digits");return f.useLocale()?f.formatNumberLocale(n.Value(),v):JXG$1.toFixed(n.Value(),v)}),f.fullUpdate(),n.glider=l,n.basepoint=c,n.baseline=h,n.toppoint=u,n.label=f,n.subs={glider:l,basePoint:c,baseLine:h,topPoint:u,label:f},n.inherits.push(l,c,h,u,f),n.methodMap=JXG$1.deepCopy(n.methodMap,{tangent:"tangent",glider:"glider",basepoint:"basepoint",baseline:"baseline",toppoint:"toppoint",label:"label",Value:"Value",V:"Value",Direction:"Direction"}),n.remove=priv$3.removeSlopeTriangle,n};JXG$1.registerElement("slopetriangle",JXG$1.createSlopeTriangle);var priv$2={CheckboxChangeEventHandler:function(){this._value=this.rendNodeCheckbox.checked,this.board.update()}};JXG$1.createCheckbox=function(t,r,a){var n,s,o=JXG$1.copyAttributes(a,t.options,"checkbox");return s=[r[0],r[1],'<span style="display:inline"><input type="checkbox" /><label for=""></label></span>'],n=t.create("text",s,o),n.type=JXG$1.OBJECT_TYPE_CHECKBOX,n.rendNodeCheckbox=n.rendNode.childNodes[0].childNodes[0],n.rendNodeLabel=n.rendNode.childNodes[0].childNodes[1],n.rendNodeTag=n.rendNodeCheckbox,n.rendNodeTag.disabled=!!o.disabled,n.rendNodeCheckbox.id=n.rendNode.id+"_checkbox",n.rendNodeLabel.id=n.rendNode.id+"_label",n.rendNodeLabel.setAttribute("for",n.rendNodeCheckbox.id),n.setText(r[2]),n.visPropOld.fontsize="0px",t.renderer.updateTextStyle(n,!1),n.rendNodeCheckbox.checked=o.checked,n._value=o.checked,n.Value=function(){return this._value},n.update=function(){return this.needsUpdate&&(JXG$1.Text.prototype.update.call(this),this._value=this.rendNodeCheckbox.checked),this},JXG$1.addEvent(n.rendNodeCheckbox,"change",priv$2.CheckboxChangeEventHandler,n),n};JXG$1.registerElement("checkbox",JXG$1.createCheckbox);var priv$1={InputInputEventHandler:function(t){this._value=this.rendNodeInput.value,this.board.update()}};JXG$1.createInput=function(t,r,a){var n,s,o=JXG$1.copyAttributes(a,t.options,"input");return s=[r[0],r[1],'<span style="display:inline; white-space:nowrap; padding:0px;"><label></label><input type="text" maxlength="'+o.maxlength+'" style="width:100%" /></span>'],n=t.create("text",s,o),n.type=JXG$1.OBJECT_TYPE_INPUT,n.rendNodeLabel=n.rendNode.childNodes[0].childNodes[0],n.rendNodeInput=n.rendNode.childNodes[0].childNodes[1],n.rendNodeInput.value=r[2],n.rendNodeTag=n.rendNodeInput,n.rendNodeTag.disabled=!!o.disabled,n.rendNodeLabel.id=n.rendNode.id+"_label",n.rendNodeInput.id=n.rendNode.id+"_input",n.rendNodeInput.setAttribute("aria-labelledby",n.rendNodeLabel.id),n.setText(r[3]),n._value=r[2],n.rendNodeInput.addEventListener("keydown",l=>{(l.key==="ArrowLeft"||l.key==="ArrowRight")&&l.stopPropagation()}),n.update=function(){return this.needsUpdate&&(JXG$1.Text.prototype.update.call(this),this._value=this.rendNodeInput.value),this},n.Value=function(){return this._value},n.set=function(l){return this._value=l,this.rendNodeInput.value=l,this},JXG$1.addEvent(n.rendNodeInput,"input",priv$1.InputInputEventHandler,n),JXG$1.addEvent(n.rendNodeInput,"mousedown",function(l){JXG$1.exists(l.stopPropagation)&&l.stopPropagation()},n),JXG$1.addEvent(n.rendNodeInput,"touchstart",function(l){JXG$1.exists(l.stopPropagation)&&l.stopPropagation()},n),JXG$1.addEvent(n.rendNodeInput,"pointerdown",function(l){JXG$1.exists(l.stopPropagation)&&l.stopPropagation()},n),n.visPropOld.fontsize="0px",t.renderer.updateTextStyle(n,!1),n};JXG$1.registerElement("input",JXG$1.createInput);var priv={ButtonClickEventHandler:function(){this._handler&&this._handler(),this.board.update()}};JXG$1.createButton=function(t,r,a){var n,s,o=JXG$1.copyAttributes(a,t.options,"button");return s=[r[0],r[1],'<button type="button" style="width:100%; height:100%;" tabindex="0"></button>'],n=t.create("text",s,o),n.type=JXG$1.OBJECT_TYPE_BUTTON,n.rendNodeButton=n.rendNode.childNodes[0],n.rendNodeButton.id=n.rendNode.id+"_button",n.rendNodeTag=n.rendNodeButton,n.rendNodeTag.disabled=!!o.disabled,n.setText(r[2]),n.visPropOld.fontsize="0px",t.renderer.updateTextStyle(n,!1),r[3]&&(JXG$1.isString(r[3])?(n._jc=new JXG$1.JessieCode,n._jc.use(t),n._handler=function(){n._jc.parse(r[3])}):n._handler=r[3]),JXG$1.addEvent(n.rendNodeButton,"click",priv.ButtonClickEventHandler,n),JXG$1.addEvent(n.rendNodeButton,"mousedown",function(l){JXG$1.exists(l.stopPropagation)&&l.stopPropagation()},n),JXG$1.addEvent(n.rendNodeButton,"touchstart",function(l){JXG$1.exists(l.stopPropagation)&&l.stopPropagation()},n),JXG$1.addEvent(n.rendNodeButton,"pointerdown",function(l){JXG$1.exists(l.stopPropagation)&&l.stopPropagation()},n),n};JXG$1.registerElement("button",JXG$1.createButton);JXG$1.createVectorField=function(t,r,a){var n,s;if(!(r.length>=3&&(JXG$1.isArray(r[0])||JXG$1.isFunction(r[0])||JXG$1.isString(r[0]))&&JXG$1.isArray(r[1])&&r[1].length===3&&JXG$1.isArray(r[2])&&r[2].length===3))throw new Error("JSXGraph: Can't create vector field with parent types '"+typeof r[0]+"', '"+typeof r[1]+"', '"+typeof r[2]+"'.");return s=JXG$1.copyAttributes(a,t.options,"vectorfield"),n=t.create("curve",[[],[]],s),n.elType="vectorfield",n.setF=function(o,l){var u,h;return JXG$1.isArray(o)?(u=JXG$1.createFunction(o[0],this.board,l),h=JXG$1.createFunction(o[1],this.board,l),this.F=function(c,f){return[u(c,f),h(c,f)]}):this.F=JXG$1.createFunction(o,n.board,l),this},n.setF(r[0],"x, y"),n.xData=r[1],n.yData=r[2],n.updateDataArray=function(){var o,l,u,h,c=this.evalVisProp("scale"),f=JXG$1.evaluate(this.xData[0]),d=JXG$1.evaluate(this.xData[1]),p=JXG$1.evaluate(this.xData[2]),v=(p-f)/d,y=JXG$1.evaluate(this.yData[0]),b=JXG$1.evaluate(this.yData[1]),_=JXG$1.evaluate(this.yData[2]),N=(_-y)/b,M,C,$,w,A=this.evalVisProp("arrowhead.enabled"),X,O,G,R;for(A&&(X=this.evalVisProp("arrowhead.size"),O=X/t.unitX,G=X/t.unitY,R=this.evalVisProp("arrowhead.angle")),this.dataX=[],this.dataY=[],u=0,o=f;u<=d;o+=v,u++)for(h=0,l=y;h<=b;l+=N,h++)M=this.F(o,l),M[0]*=c,M[1]*=c,JXG$1.concat(this.dataX,[o,o+M[0],NaN]),JXG$1.concat(this.dataY,[l,l+M[1],NaN]),A&&Math.abs(M[0])+Math.abs(M[1])>0&&(C=Math.atan2(M[1],M[0]),$=C+R,w=C-R,JXG$1.concat(this.dataX,[o+M[0]-Math.cos($)*O,o+M[0],o+M[0]-Math.cos(w)*O,NaN]),JXG$1.concat(this.dataY,[l+M[1]-Math.sin($)*G,l+M[1],l+M[1]-Math.sin(w)*G,NaN]))},n.methodMap=JXG$1.deepCopy(n.methodMap,{setF:"setF"}),n};JXG$1.registerElement("vectorfield",JXG$1.createVectorField);JXG$1.createSlopeField=function(t,r,a){var n,s,o;if(!(r.length>=3&&(JXG$1.isFunction(r[0])||JXG$1.isString(r[0]))&&JXG$1.isArray(r[1])&&r[1].length===3&&JXG$1.isArray(r[2])&&r[2].length===3))throw new Error("JSXGraph: Can't create slope field with parent types '"+typeof r[0]+"', '"+typeof r[1]+"', '"+typeof r[2]+"'.");return s=JXG$1.createFunction(r[0],t,"x, y"),r[0]=function(l,u){var h=s(l,u),c=Math.sqrt(1+h*h);return[1/c,h/c]},o=JXG$1.copyAttributes(a,t.options,"slopefield"),n=t.create("vectorfield",r,o),n.elType="slopefield",n.setF=function(l,u){var h=JXG$1.createFunction(l,n.board,u);this.F=function(c,f){var d=h(c,f),p=Math.sqrt(1+d*d);return[1/p,d/p]}},n.methodMap=JXG$1.deepCopy(n.methodMap,{setF:"setF"}),n};JXG$1.registerElement("slopefield",JXG$1.createSlopeField);JXG$1.createSmartLabel=function(t,r,a){var n,s,o,l,u,h;if(r.length===0||[Const.OBJECT_CLASS_POINT,Const.OBJECT_CLASS_LINE,Const.OBJECT_CLASS_CIRCLE].indexOf(r[0].elementClass)<0&&[Const.OBJECT_TYPE_POLYGON,Const.OBJECT_TYPE_ANGLE].indexOf(r[0].type)<0)throw new Error("JSXGraph: Can't create smartlabel with parent types '"+typeof r[0]+"', '"+typeof r[1]+"'.");return o=r[0],l=r[1]||"",o.elementClass===Const.OBJECT_CLASS_POINT?s=JXG$1.copyAttributes(a,t.options,"smartlabelpoint"):o.elementClass===Const.OBJECT_CLASS_LINE?(s=JXG$1.copyAttributes(a,t.options,"smartlabelline"),s.rotate=function(){return Math.atan(o.getSlope())*180/Math.PI},s.visible=function(){return!(o.L()<1.5)}):o.elementClass===Const.OBJECT_CLASS_CIRCLE?(s=JXG$1.copyAttributes(a,t.options,"smartlabelcircle"),s.visible=function(){return!(o.Radius()<1.5)}):o.type===Const.OBJECT_TYPE_POLYGON?s=JXG$1.copyAttributes(a,t.options,"smartlabelpolygon"):o.type===Const.OBJECT_TYPE_ANGLE&&(s=JXG$1.copyAttributes(a,t.options,"smartlabelangle"),s.rotate=function(){var c=o.center.coords.usrCoords,f=o.getLabelAnchor().usrCoords,d=Math.atan2(f[2]-c[2],f[1]-c[1])*180/Math.PI;return d>90&&d<270?d+180:d},s.anchorX=function(){var c=o.center.coords.usrCoords,f=o.getLabelAnchor().usrCoords,d=Math.atan2(f[2]-c[2],f[1]-c[1])*180/Math.PI;return d>90&&d<270?"right":"left"}),u=function(c,f,d,p){var v;switch(p){case"length":v=function(){return f.L()};break;case"slope":v=function(){return f.Slope()};break;case"area":v=function(){return f.Area()};break;case"radius":v=function(){return f.Radius()};break;case"perimeter":v=function(){return f.Perimeter()};break;case"rad":v=function(){return f.Value()};break;case"deg":v=function(){return f.Value()*180/Math.PI};break;default:v=function(){return 0}}return function(){var y="",b,_=JXG$1.evaluate(l),N=c.evalVisProp("digits"),M=c.evalVisProp("unit"),C=c.evalVisProp("prefix"),$=c.evalVisProp("suffix"),w=c.evalVisProp("usemathjax")||c.evalVisProp("usekatex");return _===""?(c.useLocale()?b=c.formatNumberLocale(v(),N):b=JXG$1.toFixed(v(),N),w?y=["\\(",C,b,"\\,",M,$,"\\)"].join(""):y=[C,b,M,$].join("")):y=_,y}},o.elementClass===Const.OBJECT_CLASS_POINT?(n=t.create("text",[function(){return o.X()},function(){return o.Y()},""],s),h=function(){var c="",f=JXG$1.evaluate(l),d=n.evalVisProp("digits"),p=n.evalVisProp("unit"),v=n.evalVisProp("prefix"),y=n.evalVisProp("suffix"),b=n.evalVisProp("dir"),_=n.evalVisProp("usemathjax")||n.evalVisProp("usekatex"),N,M;return n.useLocale()?(N=n.formatNumberLocale(o.X(),d),M=n.formatNumberLocale(o.Y(),d)):(N=JXG$1.toFixed(o.X(),d),M=JXG$1.toFixed(o.Y(),d)),f===""?b==="row"?_?c=["\\(",v,N,"\\,",p," / ",M,"\\,",p,y,"\\)"].join(""):c=[v,N," ",p," / ",M," ",p,y].join(""):b.indexOf("col")===0&&(_?c=["\\(",v,"\\left(\\array{",N,"\\,",p,"\\\\ ",M,"\\,",p,"}\\right)",y,"\\)"].join(""):c=[v,N," ",p,"<br />",M," ",p,y].join("")):c=f,c}):o.elementClass===Const.OBJECT_CLASS_LINE?s.measure==="length"?(n=t.create("text",[function(){return(o.point1.X()+o.point2.X())*.5},function(){return(o.point1.Y()+o.point2.Y())*.5},""],s),h=u(n,o,"line","length")):s.measure==="slope"&&(n=t.create("text",[function(){return o.point1.X()*.25+o.point2.X()*.75},function(){return o.point1.Y()*.25+o.point2.Y()*.75},""],s),h=u(n,o,"line","slope")):o.elementClass===Const.OBJECT_CLASS_CIRCLE?s.measure==="radius"?(n=t.create("text",[function(){return o.center.X()+o.Radius()*.5},function(){return o.center.Y()},""],s),h=u(n,o,"circle","radius")):s.measure==="area"?(n=t.create("text",[function(){return o.center.X()},function(){return o.center.Y()+o.Radius()*.5},""],s),h=u(n,o,"circle","area")):(s.measure==="circumference"||s.measure==="perimeter")&&(n=t.create("text",[function(){return o.getLabelAnchor()},""],s),h=u(n,o,"circle","perimeter")):o.type===Const.OBJECT_TYPE_POLYGON?s.measure==="area"?(n=t.create("text",[function(){return o.getTextAnchor()},""],s),h=u(n,o,"polygon","area")):s.measure==="perimeter"&&(n=t.create("text",[function(){var c=o.borders.length-1;return c>=0?[(o.borders[c].point1.X()+o.borders[c].point2.X())*.5,(o.borders[c].point1.Y()+o.borders[c].point2.Y())*.5]:o.getTextAnchor()},""],s),h=u(n,o,"polygon","perimeter")):o.type===Const.OBJECT_TYPE_ANGLE&&(n=t.create("text",[function(){return o.getLabelAnchor()},""],s),h=u(n,o,"angle",s.measure)),JXG$1.exists(n)&&(n.setText(h),o.addChild(n),n.setParents([o])),n};JXG$1.registerElement("smartlabel",JXG$1.createSmartLabel);JXG$1.ForeignObject=function(t,r,a,n,s){this.constructor(t,a,Const.OBJECT_TYPE_FOREIGNOBJECT,Const.OBJECT_CLASS_OTHER),this.element=this.board.select(a.anchor),this.coordsConstructor(r),this._useUserSize=!1,this.size=[1,1],JXG$1.exists(s)&&s.length>0&&(this._useUserSize=!0,this.W=JXG$1.createFunction(s[0],this.board,""),this.H=JXG$1.createFunction(s[1],this.board,""),this.addParentsFromJCFunctions([this.W,this.H]),this.usrSize=[this.W(),this.H()]),this.content=n,this.elType="foreignobject",this.id=this.board.setId(this,"Im"),this.board.renderer.drawForeignObject(this),this.board.finalizeAdding(this),this.methodMap=JXG$1.deepCopy(this.methodMap,{addTransformation:"addTransform",trans:"addTransform",W:"W",Width:"W",H:"H",Height:"H"})};JXG$1.ForeignObject.prototype=new GeometryElement;JXG$1.copyPrototypeMethods(JXG$1.ForeignObject,CoordsElement,"coordsConstructor");JXG$1.extend(JXG$1.ForeignObject.prototype,{hasPoint:function(t,r){var a,n,s,o,l,u,h,c,f,d=this.transformations.length;return JXG$1.isObject(this.evalVisProp("precision"))?(o=this.board._inputDevice,l=this.evalVisProp("precision."+o)):l=this.board.options.precision.hasPoint,d===0?(a=t-this.coords.scrCoords[1],n=this.coords.scrCoords[2]-r,s=l,a>=-s&&a-this.size[0]<=s&&n>=-s&&n-this.size[1]<=s):(u=new Coords(Const.COORDS_BY_SCREEN,[t,r],this.board),u=u.usrCoords,h=[u[0]-this.span[0][0],u[1]-this.span[0][1],u[2]-this.span[0][2]],f=Mat.innerProduct,c=f(h,this.span[1]),0<=c&&c<=f(this.span[1],this.span[1])&&(c=f(h,this.span[2]),0<=c&&c<=f(this.span[2],this.span[2])))},update:function(t){return this.needsUpdate?(this.updateCoords(t),this.updateSize(),this):this},updateRenderer:function(){return this.updateRendererGeneric("updateForeignObject")},updateSize:function(){var t=[0,0];return this._useUserSize?(this.usrSize=[this.W(),this.H()],this.size=[Math.abs(this.usrSize[0]*this.board.unitX),Math.abs(this.usrSize[1]*this.board.unitY)]):this.rendNode.hasChildNodes()&&(t=this.rendNode.childNodes[0].getBoundingClientRect(),this.size=[t.width,t.height]),this},updateSpan:function(){var t,r,a=this.transformations.length,n=[];if(a===0)this.span=[[this.Z(),this.X(),this.Y()],[this.Z(),this.W(),0],[this.Z(),0,this.H()]];else{for(n[0]=[this.Z(),this.X(),this.Y()],n[1]=[this.Z(),this.X()+this.W(),this.Y()],n[2]=[this.Z(),this.X(),this.Y()+this.H()],t=0;t<a;t++)for(r=0;r<3;r++)n[r]=Mat.matVecMult(this.transformations[t].matrix,n[r]);for(r=0;r<3;r++)n[r][1]/=n[r][0],n[r][2]/=n[r][0],n[r][0]/=n[r][0];for(r=1;r<3;r++)n[r][0]-=n[0][0],n[r][1]-=n[0][1],n[r][2]-=n[0][2];this.span=n}return this},addTransform:function(t){var r;if(JXG$1.isArray(t))for(r=0;r<t.length;r++)this.transformations.push(t[r]);else this.transformations.push(t);return this},getParents:function(){var t=[this.url,[this.Z(),this.X(),this.Y()],this.usrSize];return this.parents.length!==0&&(t=this.parents),t},setSize:function(t,r){return this.W=JXG$1.createFunction(t,this.board,""),this.H=JXG$1.createFunction(r,this.board,""),this._useUserSize=!0,this.addParentsFromJCFunctions([this.W,this.H]),this},W:function(){},H:function(){}});JXG$1.createForeignObject=function(t,r,a){var n,s,o=r[0],l=r[1],u=[];if(r.length>=2&&(u=r[2]),n=JXG$1.copyAttributes(a,t.options,"foreignobject"),s=CoordsElement.create(JXG$1.ForeignObject,t,l,n,o,u),!s)throw new Error("JSXGraph: Can't create foreignObject with parent types '"+typeof r[0]+"' and '"+typeof r[1]+`'.
Possible parent types: [string, [x, y], [w, h]], [string, [x, y]], [element,transformation]`);return s};JXG$1.registerElement("foreignobject",JXG$1.createForeignObject);JXG$1.registerElement("fo",JXG$1.createForeignObject);JXG$1.ForeignObject;JXG$1.extend(Options$1,{axes3d:{axesPosition:"center",xAxis:{visible:!0,point2:{name:"x"},strokeColor:JXG$1.palette.red},yAxis:{visible:!0,point2:{name:"y"},strokeColor:JXG$1.palette.green},zAxis:{visible:!0,point2:{name:"z"},strokeColor:JXG$1.palette.blue},xAxisBorder:{name:"x",visible:"nherit",withLabel:!1,label:{position:"50% left",offset:[30,0],fontsize:15},strokeWidth:1,lastArrow:!1,ticks3d:{visible:"nherit",label:{anchorX:"middle",anchorY:"middle"}}},yAxisBorder:{name:"y",visible:"nherit",withLabel:!1,label:{position:"50% right",offset:[0,-30],fontsize:15},strokeWidth:1,lastArrow:!1,ticks3d:{visible:"nherit",label:{anchorX:"middle"}}},zAxisBorder:{name:"z",visible:"nherit",withLabel:!1,label:{position:"50% right",offset:[30,0],fontsize:15},strokeWidth:1,lastArrow:!1,ticks3d:{visible:"nherit",label:{anchorX:"middle",anchorY:"middle"}}},xPlaneRear:{visible:!0,layer:0,strokeWidth:1,strokeColor:"#dddddd",fillColor:"#dddddd",mesh3d:{layer:1}},yPlaneRear:{visible:!0,strokeWidth:1,strokeColor:"#dddddd",fillColor:"#dddddd",layer:0,mesh3d:{layer:1}},zPlaneRear:{visible:!0,strokeWidth:1,strokeColor:"#dddddd",fillColor:"#dddddd",layer:0,mesh3d:{layer:1}},xPlaneFront:{visible:!1,strokeWidth:1,strokeColor:"#dddddd",fillColor:"#dddddd",layer:0,mesh3d:{layer:1}},yPlaneFront:{visible:!1,strokeWidth:1,strokeColor:"#dddddd",fillColor:"#dddddd",layer:0,mesh3d:{layer:1}},zPlaneFront:{visible:!1,strokeWidth:1,strokeColor:"#dddddd",fillColor:"#dddddd",layer:0,mesh3d:{layer:1}},xPlaneRearYAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1},xPlaneRearZAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1},xPlaneFrontYAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1},xPlaneFrontZAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1},yPlaneRearXAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1},yPlaneRearZAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1},yPlaneFrontXAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1},yPlaneFrontZAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1},zPlaneRearXAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1},zPlaneRearYAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1},zPlaneFrontXAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1},zPlaneFrontYAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1}},axis3d:{highlight:!1,fixed:!0,strokeColor:"black",strokeWidth:1,tabindex:null,point1:{visible:!1,name:"",withLabel:!1},point2:{visible:!1,name:"",withLabel:!1,label:{visible:!0}}},circle3d:{layer:12,point:{visible:!1,name:""},needsRegularUpdate:!0},curve3d:{layer:12,highlight:!1,tabindex:-1,strokeWidth:1,numberPointsHigh:200,needsRegularUpdate:!0},face3d:{transitionProperties:[],layer:12,highlight:!1,tabindex:null,strokeWidth:1,fillColor:JXG$1.palette.yellow,fillOpacity:.4,needsRegularUpdate:!0,shader:{enabled:!1,type:"angle",hue:60,saturation:90,minLightness:30,maxLightness:90}},intersectionline3d:{point1:{visible:!1,name:""},point2:{visible:!1,name:""}},line3d:{layer:12,strokeWidth:1,strokeColor:"black",fixed:!0,tabindex:null,needsRegularUpdate:!0,point:{visible:!1,name:""},point1:{visible:!1,name:""},point2:{visible:!1,name:""},straightFirst:!1,straightLast:!1},mesh3d:{layer:12,strokeWidth:1,strokeColor:"#9a9a9a",strokeOpacity:.6,highlight:!1,tabindex:null,needsRegularUpdate:!0,stepWidthU:1,stepWidthV:1},plane3d:{layer:12,strokeWidth:0,strokeColor:"black",strokeOpacity:1,highlight:!1,tabindex:null,needsRegularUpdate:!0,visible:!0,gradient:"linear",gradientSecondColor:"#ffffff",gradientAngle:Math.PI,fillColor:"#a7a7a7",fillOpacity:.6,mesh3d:{visible:"inherit"},threePoints:!1,point:{visible:!1,name:"",fixed:!0},point1:{visible:!1,name:""},point2:{visible:!1,name:""},point3:{visible:!1,name:""}},point3d:{layer:13,infoboxDigits:"auto",strokeWidth:0,gradient:"radial",gradientSecondColor:"#555555",fillColor:"yellow",highlightStrokeColor:"#555555",gradientFX:.7,gradientFY:.3,needsRegularUpdate:!0},polygon3d:{layer:12,highlight:!1,tabindex:-1,strokeWidth:1,fillColor:"none",needsRegularUpdate:!0},polyhedron3d:{fillColorArray:["white","black"],needsRegularUpdate:!0},sphere3d:{layer:12,highlight:!1,strokeWidth:1,strokeColor:"#00ff80",fillColor:"white",gradient:"radial",gradientSecondColor:"#00ff80",gradientFX:.7,gradientFY:.3,fillOpacity:.4,needsRegularUpdate:!0},surface3d:{layer:12,highlight:!1,tabindex:-1,strokeWidth:1,stepsU:30,stepsV:30,needsRegularUpdate:!0},text3d:{withLabel:!1,needsRegularUpdate:!0},ticks3d:{visible:!0,ticksDistance:1,majorHeight:10,minorTicks:0,tickEndings:[0,1],drawLabels:!0,needsRegularUpdate:!0,label:{visible:!0,withLabel:!1}},vectorfield3d:{scale:1,arrowhead:{enabled:!0,size:5,angle:Math.PI*.125},needsRegularUpdate:!0},view3d:{needsRegularUpdate:!0,depthOrder:{enabled:!1,layers:[12,13]},projection:"parallel",verticalDrag:{enabled:!0,key:"shift"},az:{pointer:{enabled:!0,speed:1,outside:!0,button:-1,key:"none"},keyboard:{enabled:!0,step:10,key:"ctrl"},continuous:!0,slider:{visible:"inherit",style:6,point1:{pos:"auto",frozen:!1},point2:{pos:"auto",frozen:!1},min:0,max:2*Math.PI,start:1}},el:{pointer:{enabled:!0,speed:1,outside:!0,button:-1,key:"none"},keyboard:{enabled:!0,step:10,key:"ctrl"},continuous:!0,slider:{visible:"inherit",style:6,point1:{frozen:!1,pos:"auto"},point2:{frozen:!1,pos:"auto"},min:0,max:2*Math.PI,start:.3}},bank:{pointer:{enabled:!0,speed:.08,outside:!0,button:-1,key:"none"},keyboard:{enabled:!0,step:10,key:"ctrl"},continuous:!0,slider:{visible:"inherit",style:6,point1:{frozen:!1,pos:"auto"},point2:{frozen:!1,pos:"auto"},min:-Math.PI,max:Math.PI,start:0}},trackball:{enabled:!1,outside:!0,button:-1,key:"none"},r:"auto",fov:1/5*2*Math.PI,values:[[0,1.57],[.78,.62],[0,0],[5.49,.62],[4.71,0],[3.93,.62],[3.14,0],[2.36,.62],[1.57,1.57]],infobox:{strokeColor:"#000000",fontSize:16,useKatex:!1,useMathjax:!1,intl:{enabled:!0,options:{minimumFractionDigits:2,maximumFractionDigits:3}}},_currentView:-1}});JXG$1.Options;JXG$1.View3D=function(t,r,a){this.constructor(t,a,Const.OBJECT_TYPE_VIEW3D,Const.OBJECT_CLASS_3D),this.objects={},this.depthOrdered={},this.elementsByName={},this.defaultAxes=null,this.angles={az:null,el:null,bank:null},this.matrix3DRot=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],this.matrix3DRotShift=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],this.matrix3D=[[1,0,0,0],[0,1,0,0],[0,0,1,0]],this.boxToCam=[],this.llftCorner=r[0],this.size=r[1],this.bbox3D=r[2],this.r=-1,this.focalDist=-1,this.projectionType="parallel",this.trackballEnabled=!1,this.timeoutAzimuth=null,this.zIndexMin=1/0,this.zIndexMax=-1/0,this.id=this.board.setId(this,"V"),this.board.finalizeAdding(this),this.elType="view3d",this.methodMap=JXG$1.deepCopy(this.methodMap,{})};JXG$1.View3D.prototype=new GeometryElement;JXG$1.extend(JXG$1.View3D.prototype,{create:function(t,r,a){var n=[],s;return t.indexOf("3d")>0&&n.push(this),s=this.board.create(t,n.concat(r),a),s},select:function(t,r){var a,n,s,o,l=t;if(l===null)return l;if(JXG$1.isString(l)&&l!=="")JXG$1.exists(this.objects[l])?l=this.objects[l]:JXG$1.exists(this.elementsByName[l])&&(l=this.elementsByName[l]);else if(!r&&(JXG$1.isFunction(l)||JXG$1.isObject(l)&&!JXG$1.isFunction(l.setAttribute))){for(a=JXG$1.filterElements(this.objectsList,l),n={},o=a.length,s=0;s<o;s++)n[a[s].id]=a[s];l=new Composition(n)}else JXG$1.isObject(l)&&JXG$1.exists(l.id)&&!JXG$1.exists(this.objects[l.id])&&(l=null);return l},setAnglesFromRotation:function(){var t=this.matrix3DRot,r,a,n,s,o,l,u;r=Math.sqrt(t[1][3]*t[1][3]+t[2][3]*t[2][3]),r>Mat.eps?(a=t[2][3]/r,n=t[1][3]/r):(a=Math.cos(this.angles.bank),n=Math.sin(this.angles.bank)),t=Mat.matMatMult([[1,0,0,0],[0,a,-n,0],[0,n,a,0],[0,0,0,1]],t),this.angles.bank=Math.atan2(n,a),s=t[2][3],o=t[3][3],t=Mat.matMatMult([[1,0,0,0],[0,1,0,0],[0,0,s,o],[0,0,-o,s]],t),this.angles.el=Math.atan2(o,s),l=-t[1][1],u=t[3][1],this.angles.az=Math.atan2(u,l),this.angles.az<0&&(this.angles.az+=2*Math.PI),this.setSlidersFromAngles()},anglesHaveMoved:function(){return this._hasMoveAz||this._hasMoveEl||Math.abs(this.angles.az-this.az_slide.Value())>Mat.eps||Math.abs(this.angles.el-this.el_slide.Value())>Mat.eps||Math.abs(this.angles.bank-this.bank_slide.Value())>Mat.eps},getAnglesFromSliders:function(){this.angles.az=this.az_slide.Value(),this.angles.el=this.el_slide.Value(),this.angles.bank=this.bank_slide.Value()},setSlidersFromAngles:function(){this.az_slide.setValue(this.angles.az),this.el_slide.setValue(this.angles.el),this.bank_slide.setValue(this.angles.bank)},getRotationFromAngles:function(){var t,r,a,n,s,o,l=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];return t=this.angles.az,r=this.angles.el,a=this.angles.bank,n=-Math.sin(r),l[1][1]=-Math.cos(t),l[1][2]=Math.sin(t),l[1][3]=0,l[2][1]=n*Math.sin(t),l[2][2]=n*Math.cos(t),l[2][3]=Math.cos(r),l[3][1]=Math.cos(r)*Math.sin(t),l[3][2]=Math.cos(r)*Math.cos(t),l[3][3]=Math.sin(r),s=Math.cos(a),o=Math.sin(a),l=Mat.matMatMult([[1,0,0,0],[0,s,o,0],[0,-o,s,0],[0,0,0,1]],l),l},_projectToSphere:function(t,r,a){var n=Mat.hypot(r,a),s,o;return n<t*.7071067811865475?o=Math.sqrt(t*t-n*n):(s=t/1.414213562373095,o=s*s/n),o},updateProjectionTrackball:function(t){var r=100,a,n,s,o,l,u,h,c,f,d,p,v,y,b=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];return JXG$1.exists(this._trackball)?(a=this._trackball.dx,n=this._trackball.dy,s=a*a+n*n,s>Mat.eps&&(r=(this.size[0]*this.board.unitX+this.size[1]*this.board.unitY)*.25,u=this._trackball.x,h=this._trackball.y,l=[u,h,this._projectToSphere(r,u,h)],u-=a,h-=n,o=[u,h,this._projectToSphere(r,u,h)],y=Mat.crossProduct(o,l),d=Mat.hypot(y[0],y[1],y[2]),y[0]/=d,y[1]/=d,y[2]/=d,f=Geometry.distance(l,o,3)/(2*r),f=f>1?1:f,f=f<-1?-1:f,c=2*Math.asin(f),p=Math.cos(c),f=1-p,v=Math.sin(c),b[1][1]=p+y[0]*y[0]*f,b[2][1]=y[1]*y[0]*f+y[2]*v,b[3][1]=y[2]*y[0]*f-y[1]*v,b[1][2]=y[0]*y[1]*f-y[2]*v,b[2][2]=p+y[1]*y[1]*f,b[3][2]=y[2]*y[1]*f+y[0]*v,b[1][3]=y[0]*y[2]*f+y[1]*v,b[2][3]=y[1]*y[2]*f-y[0]*v,b[3][3]=p+y[2]*y[2]*f),b=Mat.matMatMult(b,this.matrix3DRot),b):this.matrix3DRot},updateAngleSliderBounds:function(){var t,r,a,n,s,o,l,u,h,c,f,d,p;this.trackballEnabled=this.evalVisProp("trackball.enabled"),this.trackballEnabled?(this.az_slide.setMin(0),this.az_slide.setMax(2*Math.PI),this.el_slide.setMin(-.5*Math.PI),this.el_slide.setMax(.5*Math.PI),this.bank_slide.setMin(-Math.PI),this.bank_slide.setMax(Math.PI)):(this.az_slide.setMin(this.visProp.az.slider.min),this.az_slide.setMax(this.visProp.az.slider.max),this.el_slide.setMin(this.visProp.el.slider.min),this.el_slide.setMax(this.visProp.el.slider.max),this.bank_slide.setMin(this.visProp.bank.slider.min),this.bank_slide.setMax(this.visProp.bank.slider.max)),t=this.az_slide._smax,r=this.az_slide._smin,a=this.el_slide._smax,n=this.el_slide._smin,d=this.bank_slide._smax,p=this.bank_slide._smin,this.trackballEnabled?(s=Mat.mod(this.angles.el,2*Math.PI),.5*Math.PI<s&&s<1.5*Math.PI&&(this.angles.el=Math.PI-s,this.angles.az=Mat.wrap(this.angles.az+Math.PI,r,t),this.angles.bank=Mat.wrap(this.angles.bank+Math.PI,p,d)),this.angles.az=Mat.wrap(this.angles.az,r,t),this.angles.el=Mat.wrap(this.angles.el,n,a),this.angles.bank=Mat.wrap(this.angles.bank,p,d)):(f=function(v){return v<n?n-v:a<v?v-a:0},o=.5*(n+a),l=Mat.wrap(this.angles.el,o-Math.PI,o+Math.PI),u=Mat.wrap(Math.PI-this.angles.el,o-Math.PI,o+Math.PI),h=f(l),c=f(u),h<=c?this.angles.el=Mat.clamp(l,n,a):(this.angles.el=Mat.clamp(u,n,a),this.angles.az=Mat.wrap(this.angles.az+Math.PI,r,t),this.angles.bank=Mat.wrap(this.angles.bank+Math.PI,p,d)),this.angles.az=Mat.wrapAndClamp(this.angles.az,r,t,2*Math.PI),this.angles.bank=Mat.wrapAndClamp(this.angles.bank,p,d,2*Math.PI),this.matrix3DRot=this.getRotationFromAngles()),this.setSlidersFromAngles()},_updateCentralProjection:function(){var t=20,r=8,a,n;return a=this.evalVisProp("r"),a==="auto"&&(a=Mat.hypot(this.bbox3D[0][0]-this.bbox3D[0][1],this.bbox3D[1][0]-this.bbox3D[1][1],this.bbox3D[2][0]-this.bbox3D[2][1])*1.01),this.boxToCam=this.matrix3DRot.map(function(s){return s.slice()}),this.boxToCam[3][0]=-a,this.focalDist=1/Math.tan(.5*this.evalVisProp("fov")),n=[[0,0,0,-1],[0,this.focalDist,0,0],[0,0,this.focalDist,0],[2*t*r/(r-t),0,0,(t+r)/(r-t)]],Mat.matMatMult(n,this.boxToCam)},update:function(){var t=this.r,r=[[1,0,0,0],[0,-t,0,0],[0,0,-t,0],[0,0,0,1]],a,n,s,o,l;return!JXG$1.exists(this.el_slide)||!JXG$1.exists(this.az_slide)||!JXG$1.exists(this.bank_slide)||!this.needsUpdate?(this.needsUpdate=!1,this):(a=[[1,0,0],[0,1,0],[0,0,1]],this.projectionType=this.evalVisProp("projection").toLowerCase(),this.trackballEnabled!==this.evalVisProp("trackball.enabled")&&this.updateAngleSliderBounds(),this._hasMoveTrackball?(this.matrix3DRot=this.updateProjectionTrackball(),this.setAnglesFromRotation()):this.anglesHaveMoved()&&(this.getAnglesFromSliders(),this.matrix3DRot=this.getRotationFromAngles()),this.shift=[[1,0,0,0],[-.5*(this.bbox3D[0][0]+this.bbox3D[0][1]),1,0,0],[-.5*(this.bbox3D[1][0]+this.bbox3D[1][1]),0,1,0],[-.5*(this.bbox3D[2][0]+this.bbox3D[2][1]),0,0,1]],this.projectionType==="central"?(s=2*.4,a[1][1]=this.size[0]/s,a[2][2]=this.size[1]/s,a[1][0]=this.llftCorner[0]+a[1][1]*.5*s,a[2][0]=this.llftCorner[1]+a[2][2]*.5*s,this.viewPortTransform=a,n=this._updateCentralProjection(),this.matrix3D=Mat.matMatMult(n,this.shift)):(o=this.bbox3D[0][1]-this.bbox3D[0][0],l=this.bbox3D[1][1]-this.bbox3D[1][0],a[1][1]=this.size[0]/o,a[2][2]=this.size[1]/l,a[1][0]=this.llftCorner[0]+a[1][1]*.5*o,a[2][0]=this.llftCorner[1]+a[2][2]*.5*l,this.matrix3D=Mat.matMatMult(a,Mat.matMatMult(Mat.matMatMult(this.matrix3DRot,r),this.shift).slice(0,3))),this.matrix3DRotShift=Mat.matMatMult(this.matrix3DRot,this.shift),this)},compareDepth:function(t,r){return t.zIndex-r.zIndex},updateZIndices:function(){var t,r;for(t in this.objects)this.objects.hasOwnProperty(t)&&(r=this.objects[t],(r.type===Const.OBJECT_TYPE_LINE3D||r.type===Const.OBJECT_TYPE_POLYGON3D)&&JXG$1.exists(r.element2D)&&r.element2D.evalVisProp("visible")&&r.updateZIndex())},updateShaders:function(){var t,r,a;for(t in this.objects)this.objects.hasOwnProperty(t)&&(r=this.objects[t],JXG$1.exists(r.shader)&&(a=r.shader(),a<this.zIndexMin?this.zIndexMin=a:a>this.zIndexMax&&(this.zIndexMax=a)))},updateDepthOrdering:function(){var t,r,a,n,s,o,l;for(o=this.evalVisProp("depthorder.layers"),a=0;a<o.length;a++)this.depthOrdered[o[a]]=[];for(t in this.objects)this.objects.hasOwnProperty(t)&&(r=this.objects[t],(r.type===Const.OBJECT_TYPE_FACE3D||r.type===Const.OBJECT_TYPE_LINE3D||r.type===Const.OBJECT_TYPE_POINT3D||r.type===Const.OBJECT_TYPE_POLYGON3D)&&JXG$1.exists(r.element2D)&&r.element2D.evalVisProp("visible")&&(l=r.element2D.evalVisProp("layer"),o.indexOf(l)>=0&&this.depthOrdered[l].push(r)));if(this.board.renderer&&this.board.renderer.type==="svg")for(a=0;a<o.length;a++)for(l=o[a],this.depthOrdered[l].sort(this.compareDepth.bind(this)),s=this.depthOrdered[l],n=0;n<s.length;n++)this.board.renderer.setLayer(s[n].element2D,l);return this},updateRenderer:function(){return this.needsUpdate?(this.depthOrdered={},this.shift!==void 0&&this.evalVisProp("depthorder.enabled")&&(this.updateZIndices(),this.updateShaders(),this.board.renderer&&this.board.renderer.type==="svg"&&this.updateDepthOrdering()),this.needsUpdate=!1,this):this},removeObject:function(t,r){var a,n;if(JXG$1.isArray(t)){for(a=0;a<t.length;a++)this.removeObject(t[a]);return this}if(t=this.select(t),!JXG$1.exists(t)||JXG$1.isString(t))return this;try{for(n in t.childElements)t.childElements.hasOwnProperty(n)&&this.removeObject(t.childElements[n]);delete this.objects[t.id]}catch(s){JXG$1.debug("View3D "+t.id+": Could not be removed: "+s)}return this.board.removeObject(t,r),this},worldToFocal:function(t,r=!0){var a,n=Mat.matVecMult(this.boxToCam,Mat.matVecMult(this.shift,t));if(n[3]-=n[0]*this.focalDist,r)return n;for(a=1;a<4;a++)n[a]/=n[0];return n.slice(1,4)},project3DTo2D:function(t,r,a){var n,s;return arguments.length===3?n=[1,t,r,a]:t.length===3?(n=t.slice(),n.unshift(1)):n=t,s=Mat.matVecMult(this.matrix3D,n),this.projectionType==="central"?(s[1]/=s[0],s[2]/=s[0],s[3]/=s[0],s[0]/=s[0],Mat.matVecMult(this.viewPortTransform,s.slice(0,3))):s},_getW0:function(t,r,a){var n=Mat.inverse(t),s=n[0][0]+r[1]*n[0][1]+r[2]*n[0][2],o=n[3][0]+r[1]*n[3][1]+r[2]*n[3][2],l,u,h;return h=a*n[0][3]-n[3][3],l=(o*n[0][3]-s*n[3][3])/h,u=(o-s*a)/h,[1/l,u]},project2DTo3DPlane:function(t,r,a){var n,s,o,l,u,h=a.slice(1)||[0,0,0],c=r.slice(1),f,d,p;if(l=Mat.norm(c,3),o=Mat.innerProduct(h,c,3)/l,this.projectionType==="parallel"){n=this.matrix3D.slice(0,3),n.push([0,c[0],c[1],c[2]]),s=t.coords.usrCoords.slice(),s.push(o);try{n[2][3]===1&&(n[2][1]=n[2][2]=Mat.eps*.001),u=Mat.Numerics.Gauss(n,s)}catch{u=[0,NaN,NaN,NaN]}}else{n=this.matrix3D,s=t.coords.usrCoords.slice(),f=Mat.Numerics.Gauss(this.viewPortTransform,s),p=this._getW0(n,f,o),d=p[0],s=[f[0]*d,f[1]*d,f[2]*d,p[1]*d];try{n[2][3]===1&&(n[2][1]=n[2][2]=Mat.eps*.001),u=Mat.Numerics.Gauss(n,s),u[1]/=u[0],u[2]/=u[0],u[3]/=u[0],u[0]/=u[0]}catch{u=[0,NaN,NaN,NaN]}}return u},projectScreenToSegment:function(t,r,a){var n=this.project3DTo2D(r).slice(1,3),s=this.project3DTo2D(a).slice(1,3),o=[s[0]-n[0],s[1]-n[1]],l=Mat.innerProduct(o,o),u=[t[0]-n[0],t[1]-n[1]],h=Mat.innerProduct(u,o)/l,c,f,d,p,v,y,b;return this.projectionType==="central"?(c=[.5*(r[0]+a[0]),.5*(r[1]+a[1]),.5*(r[2]+a[2])],f=this.project3DTo2D(c).slice(1,3),d=[f[0]-n[0],f[1]-n[1]],p=Mat.innerProduct(d,o)/l,v=(1-p)*h/((1-2*p)*h+p)):v=h,y=Math.min(Math.max(v,0),1),b=1-y,[1,b*r[0]+y*a[0],b*r[1]+y*a[1],b*r[2]+y*a[2]]},project2DTo3DVertical:function(t,r){var a=t.coords.usrCoords.slice(1,3),n=[r[1],r[2],this.bbox3D[2][0]],s=[r[1],r[2],this.bbox3D[2][1]];return this.projectScreenToSegment(a,n,s)},project3DToCube:function(t){var r=this.bbox3D,a=!1;return t[1]<r[0][0]&&(t[1]=r[0][0],a=!0),t[1]>r[0][1]&&(t[1]=r[0][1],a=!0),t[2]<r[1][0]&&(t[2]=r[1][0],a=!0),t[2]>r[1][1]&&(t[2]=r[1][1],a=!0),t[3]<=r[2][0]&&(t[3]=r[2][0],a=!0),t[3]>=r[2][1]&&(t[3]=r[2][1],a=!0),[t,a]},intersectionLineCube:function(t,r,a){var n,s,o,l,u;for(u=r.length===3?r:r.slice(1),n=a,s=0;s<3;s++)u[s]!==0&&(o=(this.bbox3D[s][0]-t[s+1])/u[s],l=(this.bbox3D[s][1]-t[s+1])/u[s],a<0?n=Math.max(n,Math.min(o,l)):n=Math.min(n,Math.max(o,l)));return n},isInCube:function(t,r){var a;if(t.length===4){if(t[0]===0)return!1;a=t.slice(1)}return a[0]>this.bbox3D[0][0]-Mat.eps&&a[0]<this.bbox3D[0][1]+Mat.eps&&a[1]>this.bbox3D[1][0]-Mat.eps&&a[1]<this.bbox3D[1][1]+Mat.eps&&a[2]>this.bbox3D[2][0]-Mat.eps&&a[2]<this.bbox3D[2][1]+Mat.eps},intersectionPlanePlane:function(t,r,a){var n=[!1,!1],s,o,l,u,h;return a=a||r.d,u=Mat.crossProduct(t.normal.slice(1),r.normal.slice(1)),u.unshift(0),s=Mat.Geometry.meet3Planes(t.normal,t.d,r.normal,a,u,0),h=Mat.Geometry.meetPlanePlane(t.vec1,t.vec2,r.vec1,r.vec2),l=this.intersectionLineCube(s,h,1/0),o=Mat.axpy(l,h,s),this.isInCube(o)&&(n[0]=o),l=this.intersectionLineCube(s,h,-1/0),o=Mat.axpy(l,h,s),this.isInCube(o)&&(n[1]=o),n},intersectionPlaneFace:function(t,r){var a=[],n,s,o,l,u,h,c,f,d,p,v,y,b,_,N,M,C=[],$=[],w;for(M=Mat.crossProduct(t.normal.slice(1),r.normal.slice(1)),M.unshift(0),o=Geometry.meet3Planes(t.normal,t.d,r.normal,r.d,M,0),_=Geometry.meetPlanePlane(t.vec1,t.vec2,r.vec1,r.vec2),f=r.polyhedron.faces[r.faceNumber],l=r.polyhedron.coords,d=f.length,n=1;n<=d;n++)u=l[f[n-1]],h=l[f[n%d]],N=[0,h[1]-u[1],h[2]-u[2],h[3]-u[3]],p=Math.random(),v=Math.random(),y=Math.random(),b=Math.random(),C=[[p*_[1]+v*_[3],p*-N[1]+v*-N[3]],[y*_[2]+b*_[3],y*-N[2]+b*-N[3]]],$=[p*(u[1]-o[1])+v*(u[3]-o[3]),y*(u[2]-o[2])+b*(u[3]-o[3])],w=Numerics.Gauss(C,$),s=w[1],s>-Mat.eps&&s<1+Mat.eps&&(c=[1,u[1]+s*N[1],u[2]+s*N[2],u[3]+s*N[3]],a.push(c));return a},intersectionPlanePolyhedron:function(t,r){var a,n,s,o,l,u,h,c=1e-12,f=[],d=[],p=[],v=[];for(a=0;a<r.numberFaces;a++)if(!(r.def.faces[a].length<3)&&(s=this.intersectionPlaneFace(t,r.faces[a]),!(s.length<2)&&s[0].length===4&&s[1].length===4)){for(n=0;n<f.length&&!(Geometry.distance(s[0],f[n][0],4)<c&&Geometry.distance(s[1],f[n][1],4)<c||Geometry.distance(s[0],f[n][1],4)<c&&Geometry.distance(s[1],f[n][0],4)<c);n++);n===f.length&&f.push(s.slice())}if(f.length===0)return{X:d,Y:p,Z:v};l=0,u=l,a=0;do{for(o=f[u][a],o.length===4&&(d.push(o[1]),p.push(o[2]),v.push(o[3])),a=(a+1)%2,o=f[u][a],h=u,n=0;n<f.length;n++){if(n!==u&&Geometry.distance(o,f[n][0])<c){u=n,a=0;break}if(n!==u&&Geometry.distance(o,f[n][1])<c){u=n,a=1;break}}if(u===h){console.log("Error face3d intersection update: did not find next",u,a);break}}while(u!==l);return d.push(d[0]),p.push(p[0]),v.push(v[0]),{X:d,Y:p,Z:v}},getMesh:function(t,r,a){var n,s,o,l,u,h,c,f=[0,0,0],d=JXG$1.evaluate(r[2]),p=JXG$1.evaluate(a[2]),v=[],y=[];for(h=(JXG$1.evaluate(r[1])-JXG$1.evaluate(r[0]))/d,c=(JXG$1.evaluate(a[1])-JXG$1.evaluate(a[0]))/p,n=0;n<=d;n++){for(o=r[0]+h*n,s=0;s<=p;s++)l=a[0]+c*s,JXG$1.isFunction(t)?f=t(o,l):f=[t[0](o,l),t[1](o,l),t[2](o,l)],u=this.project3DTo2D(f),v.push(u[1]),y.push(u[2]);v.push(NaN),y.push(NaN)}for(s=0;s<=p;s++){for(l=a[0]+c*s,n=0;n<=d;n++)o=r[0]+h*n,JXG$1.isFunction(t)?f=t(o,l):f=[t[0](o,l),t[1](o,l),t[2](o,l)],u=this.project3DTo2D(f),v.push(u[1]),y.push(u[2]);v.push(NaN),y.push(NaN)}return[v,y]},animateAzimuth:function(){var t=this.az_slide._smin,r=this.az_slide._smax,a=r-t,n=this.az_slide.Value()+.1;this.az_slide.position=(n-t)/a,this.az_slide.position>1&&(this.az_slide.position=0),this.board._change3DView=!0,this.board.update(),this.board._change3DView=!1,this.timeoutAzimuth=setTimeout((function(){this.animateAzimuth()}).bind(this),200)},stopAzimuth:function(){clearTimeout(this.timeoutAzimuth),this.timeoutAzimuth=null},isVerticalDrag:function(){var t=this.board,r;return this.evalVisProp("verticaldrag.enabled")?(r="_"+this.evalVisProp("verticaldrag.key")+"Key",t[r]):!1},setView:function(t,r,a){return a=a||this.r,this.az_slide.setValue(t),this.el_slide.setValue(r),this.r=a,this.board.update(),this},nextView:function(){var t=this.evalVisProp("values"),r=this.visProp._currentview;return r=(r+1)%t.length,this.setCurrentView(r),this},previousView:function(){var t=this.evalVisProp("values"),r=this.visProp._currentview;return r=(r+t.length-1)%t.length,this.setCurrentView(r),this},setCurrentView:function(t){var r=this.evalVisProp("values");return(t<0||t>=r.length)&&(t=(t%r.length+r.length)%r.length),this.setView(r[t][0],r[t][1],r[t][2]),this.visProp._currentview=t,this},_azEventHandler:function(t){var r=this.az_slide._smax,a=this.az_slide._smin,n=(r-a)/this.board.canvasWidth*this.evalVisProp("az.pointer.speed"),s=t.movementX,o=this.az_slide.Value(),l=this.el_slide.Value();return this.board.mode===this.board.BOARD_MODE_DRAG?this:(this.evalVisProp("az.keyboard.enabled")&&(t.key==="ArrowRight"?o=o+this.evalVisProp("az.keyboard.step")*Math.PI/180:t.key==="ArrowLeft"&&(o=o-this.evalVisProp("az.keyboard.step")*Math.PI/180)),this.evalVisProp("az.pointer.enabled")&&s!==0&&t.key==null&&(o+=s*n),this.evalVisProp("az.continuous")?o=Mat.wrap(o,a,r):o>0?o=Math.min(r,o):o<0&&(o=Math.max(a,o)),this.setView(o,l),this)},_elEventHandler:function(t){var r=this.el_slide._smax,a=this.el_slide._smin,n=(r-a)/this.board.canvasHeight*this.evalVisProp("el.pointer.speed"),s=t.movementY,o=this.az_slide.Value(),l=this.el_slide.Value();return this.board.mode===this.board.BOARD_MODE_DRAG?this:(this.evalVisProp("el.keyboard.enabled")&&(t.key==="ArrowUp"?l=l-this.evalVisProp("el.keyboard.step")*Math.PI/180:t.key==="ArrowDown"&&(l=l+this.evalVisProp("el.keyboard.step")*Math.PI/180)),this.evalVisProp("el.pointer.enabled")&&s!==0&&t.key==null&&(l+=s*n),this.evalVisProp("el.continuous")&&!this.trackballEnabled?l=Mat.wrap(l,a,r):l>0?l=Math.min(r,l):l<0&&(l=Math.max(a,l)),this.setView(o,l),this)},_bankEventHandler:function(t){var r=this.bank_slide._smax,a=this.bank_slide._smin,n,s,o=t.deltaY,l=this.bank_slide.Value();return this.board.mode===this.board.BOARD_MODE_DRAG?this:(this.evalVisProp("bank.keyboard.enabled")&&(n=this.evalVisProp("bank.keyboard.step")*Math.PI/180,t.key==="."||t.key==="<"?l-=n:(t.key===","||t.key===">")&&(l+=n)),this.evalVisProp("bank.pointer.enabled")&&o!==0&&t.key==null&&(s=(r-a)/this.board.canvasHeight*this.evalVisProp("bank.pointer.speed"),l+=o*s,t.preventDefault()),this.evalVisProp("bank.continuous")?l=Mat.wrap(l,a,r):l=Mat.clamp(l,a,r),this.bank_slide.setValue(l),this.board.update(),this)},_trackballHandler:function(t){var r=this.board.getMousePosition(t),a,n,s;return s=new Coords(Const.COORDS_BY_USER,[this.llftCorner[0]+this.size[0]*.5,this.llftCorner[1]+this.size[1]*.5],this.board),a=r[0]-s.scrCoords[1],n=r[1]-s.scrCoords[2],this._trackball={dx:t.movementX,dy:-t.movementY,x:a,y:-n},this.board.update(),this},pointerDownHandler:function(t){var r,a,n;this._hasMoveAz=!1,this._hasMoveEl=!1,this._hasMoveBank=!1,this._hasMoveTrackball=!1,this.board.mode===this.board.BOARD_MODE_NONE&&(this.board._change3DView=!0,this.evalVisProp("trackball.enabled")?(r=this.evalVisProp("trackball.button"),a=this.evalVisProp("trackball.key"),(r===-1||r===t.button)&&(a==="none"||a.indexOf("shift")>-1&&t.shiftKey||a.indexOf("ctrl")>-1&&t.ctrlKey)&&(n=this.evalVisProp("trackball.outside")?document:this.board.containerObj,JXG$1.addEvent(n,"pointermove",this._trackballHandler,this),this._hasMoveTrackball=!0)):(this.evalVisProp("az.pointer.enabled")&&(r=this.evalVisProp("az.pointer.button"),a=this.evalVisProp("az.pointer.key"),(r===-1||r===t.button)&&(a==="none"||a.indexOf("shift")>-1&&t.shiftKey||a.indexOf("ctrl")>-1&&t.ctrlKey)&&(n=this.evalVisProp("az.pointer.outside")?document:this.board.containerObj,JXG$1.addEvent(n,"pointermove",this._azEventHandler,this),this._hasMoveAz=!0)),this.evalVisProp("el.pointer.enabled")&&(r=this.evalVisProp("el.pointer.button"),a=this.evalVisProp("el.pointer.key"),(r===-1||r===t.button)&&(a==="none"||a.indexOf("shift")>-1&&t.shiftKey||a.indexOf("ctrl")>-1&&t.ctrlKey)&&(n=this.evalVisProp("el.pointer.outside")?document:this.board.containerObj,JXG$1.addEvent(n,"pointermove",this._elEventHandler,this),this._hasMoveEl=!0)),this.evalVisProp("bank.pointer.enabled")&&(r=this.evalVisProp("bank.pointer.button"),a=this.evalVisProp("bank.pointer.key"),(r===-1||r===t.button)&&(a==="none"||a.indexOf("shift")>-1&&t.shiftKey||a.indexOf("ctrl")>-1&&t.ctrlKey)&&(n=this.evalVisProp("bank.pointer.outside")?document:this.board.containerObj,JXG$1.addEvent(n,"wheel",this._bankEventHandler,this,{passive:!1}),this._hasMoveBank=!0))),JXG$1.addEvent(document,"pointerup",this.pointerUpHandler,this))},pointerUpHandler:function(t){var r;this._hasMoveAz&&(r=this.evalVisProp("az.pointer.outside")?document:this.board.containerObj,JXG$1.removeEvent(r,"pointermove",this._azEventHandler,this),this._hasMoveAz=!1),this._hasMoveEl&&(r=this.evalVisProp("el.pointer.outside")?document:this.board.containerObj,JXG$1.removeEvent(r,"pointermove",this._elEventHandler,this),this._hasMoveEl=!1),this._hasMoveBank&&(r=this.evalVisProp("bank.pointer.outside")?document:this.board.containerObj,JXG$1.removeEvent(r,"wheel",this._bankEventHandler,this),this._hasMoveBank=!1),this._hasMoveTrackball&&(r=this.evalVisProp("trackball.outside")?document:this.board.containerObj,JXG$1.removeEvent(r,"pointermove",this._trackballHandler,this),this._hasMoveTrackball=!1),JXG$1.removeEvent(document,"pointerup",this.pointerUpHandler,this),this.board._change3DView=!1}});JXG$1.createView3D=function(t,r,a){var n,s,o,l,u,h,c,f,d,p,v,y,b=r[0],_=r[1];return s=JXG$1.copyAttributes(a,t.options,"view3d"),n=new JXG$1.View3D(t,r,s),n.defaultAxes=n.create("axes3d",[],s),h=b[0],c=b[1],f=_[0],d=_[1],o=JXG$1.copyAttributes(s,t.options,"view3d","az","slider"),o.name="az",l=JXG$1.copyAttributes(s,t.options,"view3d","el","slider"),l.name="el",u=JXG$1.copyAttributes(s,t.options,"view3d","bank","slider"),u.name="bank",y=JXG$1.evaluate(o.point1.pos),JXG$1.isArray(y)?p=y:p=[h-1,c-2],y=JXG$1.evaluate(o.point2.pos),JXG$1.isArray(y)?v=y:v=[h+f+1,c-2],n.az_slide=t.create("slider",[p,v,[JXG$1.evaluate(o.min),JXG$1.evaluate(o.start),JXG$1.evaluate(o.max)]],o),n.inherits.push(n.az_slide),n.az_slide.elType="view3d_slider",y=JXG$1.evaluate(l.point1.pos),JXG$1.isArray(y)?p=y:p=[h-1,c],y=JXG$1.evaluate(l.point2.pos),JXG$1.isArray(y)?v=y:v=[h-1,c+d],n.el_slide=t.create("slider",[p,v,[JXG$1.evaluate(l.min),JXG$1.evaluate(l.start),JXG$1.evaluate(l.max)]],l),n.inherits.push(n.el_slide),n.el_slide.elType="view3d_slider",y=JXG$1.evaluate(u.point1.pos),JXG$1.isArray(y)?p=y:p=[h-1,c+d+2],y=JXG$1.evaluate(u.point2.pos),JXG$1.isArray(y)?v=y:v=[h+f+1,c+d+2],n.bank_slide=t.create("slider",[p,v,[JXG$1.evaluate(u.min),JXG$1.evaluate(u.start),JXG$1.evaluate(u.max)]],u),n.inherits.push(n.bank_slide),n.bank_slide.elType="view3d_slider",n.board.infobox.visProp=JXG$1.merge(n.board.infobox.visProp,s.infobox),n.board.highlightInfobox=function(N,M,C){var $,w,A,X,O="",G=C.board,R,B,F=null;for(this.mode===this.BOARD_MODE_DRAG&&(n.isVerticalDrag()?O='<span style="color:black; font-size:200%"> &nbsp;</span>':O='<span style="color:black; font-size:200%"> &nbsp;</span>'),w=0;w<C.parents.length&&(F=G.objects[C.parents[w]],!F.is3D);w++);if(F&&JXG$1.exists(F.element2D)){if(X=[1,0,0,F.coords[3]],n._w0=Mat.innerProduct(n.matrix3D[0],X,4),A=n.project2DTo3DPlane(F.element2D,[1,0,0,1],X),!n.isInCube(A)){n.board.highlightCustomInfobox("",F);return}$=F.evalVisProp("infoboxdigits"),B=n.board.infobox,$==="auto"?B.useLocale()?R=[O,"(",B.formatNumberLocale(F.X())," | ",B.formatNumberLocale(F.Y())," | ",B.formatNumberLocale(F.Z()),")"]:R=[O,"(",JXG$1.autoDigits(F.X())," | ",JXG$1.autoDigits(F.Y())," | ",JXG$1.autoDigits(F.Z()),")"]:B.useLocale()?R=[O,"(",B.formatNumberLocale(F.X(),$)," | ",B.formatNumberLocale(F.Y(),$)," | ",B.formatNumberLocale(F.Z(),$),")"]:R=[O,"(",JXG$1.toFixed(F.X(),$)," | ",JXG$1.toFixed(F.Y(),$)," | ",JXG$1.toFixed(F.Z(),$),")"],n.board.highlightCustomInfobox(R.join(""),F)}else n.board.highlightCustomInfobox("("+N+", "+M+")",C)},n.BOARD_MODE_NONE=0,JXG$1.addEvent(t.containerObj,"keydown",function(N){var M,C=!1;n.evalVisProp("el.keyboard.enabled")&&(N.key==="ArrowUp"||N.key==="ArrowDown")&&(M=n.evalVisProp("el.keyboard.key"),(M==="none"||M.indexOf("shift")>-1&&N.shiftKey||M.indexOf("ctrl")>-1&&N.ctrlKey)&&(n._elEventHandler(N),C=!0)),n.evalVisProp("az.keyboard.enabled")&&(N.key==="ArrowLeft"||N.key==="ArrowRight")&&(M=n.evalVisProp("az.keyboard.key"),(M==="none"||M.indexOf("shift")>-1&&N.shiftKey||M.indexOf("ctrl")>-1&&N.ctrlKey)&&(n._azEventHandler(N),C=!0)),n.evalVisProp("bank.keyboard.enabled")&&(N.key===","||N.key==="<"||N.key==="."||N.key===">")&&(M=n.evalVisProp("bank.keyboard.key"),(M==="none"||M.indexOf("shift")>-1&&N.shiftKey||M.indexOf("ctrl")>-1&&N.ctrlKey)&&(n._bankEventHandler(N),C=!0)),N.key==="PageUp"?(n.nextView(),C=!0):N.key==="PageDown"&&(n.previousView(),C=!0),C&&N.preventDefault(),this.board._change3DView=!1},n),JXG$1.addEvent(t.containerObj,"pointerdown",n.pointerDownHandler,n),n.getAnglesFromSliders(),n.matrix3DRot=n.getRotationFromAngles(),n.updateAngleSliderBounds(),n.board.update(),n};JXG$1.registerElement("view3d",JXG$1.createView3D);JXG$1.View3D;JXG$1.GeometryElement3D=function(t,r){this.elType=r,this.view=t,this.id=this.view.board.setId(this,r),this.element2D=null,this.is3D=!0,this.zIndex=0,this.view.objects[this.id]=this,this.name!==""&&(this.view.elementsByName[this.name]=this)};JXG$1.extend(JXG$1.GeometryElement3D.prototype,{setAttr2D:function(t){var r=t;return r.name=this.name,r.element3d=this,r.id=null,r},setAttribute:function(t){var r,a,n,s,o,l={};for(r=0;r<arguments.length;r++)s=arguments[r],JXG$1.isString(s)?(o=s.split(":"),l[JXG$1.trim(o[0])]=JXG$1.trim(o[1])):JXG$1.isArray(s)?l[s[0]]=s[1]:JXG$1.extend(l,s);for(r in l)if(l.hasOwnProperty(r))switch(a=r.replace(/\s+/g,"").toLowerCase(),n=l[r],a){case"numberpointshigh":case"stepsu":case"stepsv":JXG$1.exists(this.visProp[a])&&(!JXG$1.Validator[a]||JXG$1.Validator[a]&&JXG$1.Validator[a](n)||JXG$1.Validator[a]&&JXG$1.isFunction(n)&&JXG$1.Validator[a](n()))&&(n=n.toLowerCase&&n.toLowerCase()==="false"?!1:n,this._set(a,n));break;default:JXG$1.exists(this.element2D)&&this.element2D.setAttribute(l)}},getAttribute:function(t){var r;switch(t=t.toLowerCase(),t){case"numberpointshigh":case"stepsu":case"stepsv":r=this.visProp[t];break;default:JXG$1.exists(this.element2D)&&(r=this.element2D.getAttribute(t));break}return r},getAttributes:function(){var t={},r,a,n=["numberpointshigh","stepsu","stepsv"],s=n.length;for(JXG$1.exists(this.element2D)&&(t=JXG$1.merge(this.element2D.getAttributes())),r=0;r<s;r++)a=n[r],JXG$1.exists(this.visProp[a])&&(t[a]=this.visProp[a]);return t},addTransformGeneric:function(t,r){var a,n=JXG$1.isArray(r)?r:[r],s=n.length;for(this.transformations.length===0&&(this.baseElement=t),a=0;a<s;a++)this.transformations.push(n[a]);return this},setPosition2D:function(t){},projectCoords:function(t,r){},remove:function(){}});JXG$1.GeometryElement3D;JXG$1.createAxes3D=function(t,r,a){var n=r[0],s=["x","y","z"],o="Axis",l=["Rear","Front"],u=[0,0,0],h=[0,0,0],c,f,d,p,v,y,b,_,N,M,C,$,w,A,X,O,G,R,B,F={};if(JXG$1.exists(n.bbox3D))for(c=0;c<s.length;c++)u[c]=n.bbox3D[c][0],h[c]=n.bbox3D[c][1];else for(c=0;c<s.length;c++)u[c]=r[1][c],h[c]=r[2][1];for(y=JXG$1.copyAttributes(a,t.options,"axes3d"),b=y.axesposition,c=0;c<s.length;c++)_=s[c],G=_+o,b==="center"?(C=[0,0,0],$=[0,0,0],$[c]=h[c],F[G]=n.create("axis3d",[C,$],y[G.toLowerCase()]),F[G].view=n):b==="border"&&(G+="Border",C=u.slice(),$=h.slice(),_==="z"?(C[1]=h[1],$[0]=u[0]):_==="x"?(C=[u[0],h[1],u[2]],$=[h[0],h[1],u[2]]):(C=[h[0],u[1],u[2]],$=[h[0],h[1],u[2]]),$[c]=h[c],F[G]=n.create("axis3d",[C,$],y[G.toLowerCase()]),F[G].view=n,B=y[G.toLowerCase()].ticks3d,B.element3d=!0,M=h[c]-u[c],_==="x"?F[G+"Ticks"]=n.create("ticks3d",[C,[1,0,0],M,[0,1,0]],B):_==="y"?F[G+"Ticks"]=n.create("ticks3d",[C,[0,1,0],M,[1,0,0]],B):F[G+"Ticks"]=n.create("ticks3d",[C,[0,0,1],M,[0,1,0]],B),F[G+"Ticks"].view=n);for(b==="center"?(F.O=n.create("intersection",[F[s[0]+o],F[s[1]+o]],{name:"",visible:!1,withLabel:!1}),F.O.view=n):F.O=null,c=0;c<s.length;c++)for(p=(c+1)%3,v=(c+2)%3,_=s[c],f=0;f<l.length;f++)G=_+"Plane"+l[f],C=[0,0,0],C[c]=f===0?u[c]:h[c],w=[0,0,0],A=[0,0,0],w[p]=1,A[v]=1,X=[u[p],h[p]],O=[u[v],h[v]],y=JXG$1.copyAttributes(a,t.options,"axes3d",G),F[G]=n.create("plane3d",[C,w,A,X,O],y),F[G].elType="axisplane3d";for(c=0;c<s.length;c++)for(_=s[c],f=0;f<l.length;f++)for(d=1;d<=2;d++)p=(c+d)%3,N=s[p],G=_+"Plane"+l[f]+N.toUpperCase()+"Axis",R=_+"Plane"+l[f],C=[0,0,0],$=[0,0,0],C[c]=$[c]=f===0?u[c]:h[c],C[p]=u[p],$[p]=h[p],y=JXG$1.copyAttributes(a,t.options,"axes3d",G),F[G]=n.create("axis3d",[C,$],y),F[G].view=n,F[R].addChild(F[G]),F[R].element2D.inherits.push(F[G]);return F};JXG$1.registerElement("axes3d",JXG$1.createAxes3D);JXG$1.createAxis3D=function(t,r,a){var n=r[0],s,o=r[1],l=r[2],u,h,c;return s=JXG$1.copyAttributes(a.point1,t.options,"axis3d","point1"),s.element3d=!0,u=n.create("point",[(function(f,d,p){return function(){return n.project3DTo2D(f,d,p)[1]}})(o[0],o[1],o[2]),(function(f,d,p){return function(){return n.project3DTo2D(f,d,p)[2]}})(o[0],o[1],o[2])],s),s=JXG$1.copyAttributes(a.point2,t.options,"axis3d","point2"),s.element3d=!0,h=n.create("point",[(function(f,d,p){return function(){return n.project3DTo2D(f,d,p)[1]}})(l[0],l[1],l[2]),(function(f,d,p){return function(){return n.project3DTo2D(f,d,p)[2]}})(l[0],l[1],l[2])],s),s=JXG$1.copyAttributes(a,t.options,"axis3d"),s.element3d=!0,c=n.create("arrow",[u,h],s),c};JXG$1.registerElement("axis3d",JXG$1.createAxis3D);JXG$1.createMesh3D=function(t,r,a){var n=r[0],s,o;return s=JXG$1.copyAttributes(a,t.options,"mesh3d"),s.element3d=!0,o=n.create("curve",[[],[]],s),o.point=r[1],o.direction1=r[2],o.direction2=r[3],o.range1=r[4],o.range2=r[5],o.updateDataArray=function(){var l=JXG$1.evaluate(this.range1),u=JXG$1.evaluate(this.range2),h=l[0],c=l[1],f=u[0],d=u[1],p,v,y,b,_=[0,0,0],N=[0,0,0],M=this.evalVisProp("stepwidthu"),C=this.evalVisProp("stepwidthv"),$=[0,0,0];if(this.dataX=[],this.dataY=[],JXG$1.isFunction(this.point))$=this.point();else if(JXG$1.isPoint3D(this.point))$=this.point.coords;else for(b=0;b<this.point.length;b++)$[b]=JXG$1.evaluate(this.point[b]);if(JXG$1.isFunction(this.direction1))_=JXG$1.evaluate(this.direction1);else for(b=0;b<this.direction1.length;b++)_[b]=JXG$1.evaluate(this.direction1[b]);if(JXG$1.isFunction(this.direction2))N=JXG$1.evaluate(this.direction2);else for(b=0;b<this.direction2.length;b++)N[b]=JXG$1.evaluate(this.direction2[b]);for($.length===4&&($=$.slice(1)),_.length===4&&(_=_.slice(1)),N.length===4&&(N=N.slice(1)),p=JXG$1.Math.norm(_,3),v=JXG$1.Math.norm(N,3),b=0;b<3;b++)_[b]/=p,N[b]/=v;y=n.getMesh([function(w,A){return $[0]+w*_[0]+A*N[0]},function(w,A){return $[1]+w*_[1]+A*N[1]},function(w,A){return $[2]+w*_[2]+A*N[2]}],[Math.ceil(h),Math.floor(c),(Math.ceil(c)-Math.floor(h))/M],[Math.ceil(f),Math.floor(d),(Math.ceil(d)-Math.floor(f))/C]),this.dataX=y[0],this.dataY=y[1]},o};JXG$1.registerElement("mesh3d",JXG$1.createMesh3D);JXG$1.Circle3D=function(t,r,a,n,s){var o,l;this.constructor(t.board,s,Const.OBJECT_TYPE_CIRCLE3D,Const.OBJECT_CLASS_3D),this.constructor3D(t,"circle3d"),this.center=this.board.select(r),this.normalFunc=a,this.normal=[0,0,0,0],this.curve,this.frame1,this.frame2,JXG$1.exists(this.center._is_new)?(this.addChild(this.center),delete this.center._is_new):this.center.addChild(this),this.updateRadius=JXG$1.createFunction(n,this.board),this.addParentsFromJCFunctions([this.updateRadius]),this.updateNormal(),this.frame1=Mat.crossProduct(this.normal.slice(1),[1,0,0]),this.frame1.unshift(0),o=Mat.crossProduct(this.normal.slice(1),[-.5,.8660254037844386,0]),o.unshift(0),Mat.norm(o)>Mat.norm(this.frame1)&&(this.frame1=o),this.frame2=Mat.crossProduct(this.normal.slice(1),this.frame1.slice(1)),this.frame2.unshift(0),this.normalizeFrame(),l=this,this.curve=t.create("curve3d",[function(u){var h=l.Radius(),c=Math.sin(u),f=Math.cos(u);return[l.center.coords[1]+h*(f*l.frame1[1]+c*l.frame2[1]),l.center.coords[2]+h*(f*l.frame1[2]+c*l.frame2[2]),l.center.coords[3]+h*(f*l.frame1[3]+c*l.frame2[3])]},[0,2*Math.PI]],s)};JXG$1.Circle3D.prototype=new JXG$1.GeometryElement;JXG$1.copyPrototypeMethods(JXG$1.Circle3D,JXG$1.GeometryElement3D,"constructor3D");JXG$1.extend(JXG$1.Circle3D.prototype,{update:function(){return this.needsUpdate&&(this.updateNormal().updateFrame(),this.curve.visProp.visible=!isNaN(this.Radius())),this},updateRenderer:function(){return this.needsUpdate=!1,this},setRadius:function(t){return this.updateRadius=JXG$1.createFunction(t,this.board),this.addParentsFromJCFunctions([this.updateRadius]),this.board.update(),this},Radius:function(t){return JXG$1.exists(t)?(this.setRadius(t),this.Radius()):Math.abs(this.updateRadius())},normalizeFrame:function(){var t=Mat.norm(this.frame1),r=Mat.norm(this.frame2),a;for(a=0;a<4;a++)this.frame1[a]/=t,this.frame2[a]/=r;return this},updateNormal:function(){var t,r,a=1e-12;if(this.normal=JXG$1.evaluate(this.normalFunc),r=Mat.norm(this.normal),Math.abs(r)>a)for(t=0;t<4;t++)this.normal[t]/=r;return this},updateFrame:function(){return this.frame1=Mat.crossProduct(this.frame2.slice(1),this.normal.slice(1)),this.frame1.unshift(0),this.frame2=Mat.crossProduct(this.normal.slice(1),this.frame1.slice(1)),this.frame2.unshift(0),this.normalizeFrame(),this},projectCoords:function(t,r){return this.curve.projectCoords(t,r)}});JXG$1.createCircle3D=function(t,r,a){var n=r[0],s=JXG$1.copyAttributes(a,t.options,"circle3d"),o=JXG$1.providePoints3D(n,[r[1]],a,"circle3d",["point"])[0],l=r[2],u=r[3],h;return h=new JXG$1.Circle3D(n,o,l,u,s),h.curve.addParents([h]),h.addChild(h.curve),h.update(),h};JXG$1.registerElement("circle3d",JXG$1.createCircle3D);JXG$1.createIntersectionCircle3D=function(t,r,a){var n=r[0],s=r[1],o=r[2],l,u,h,c=JXG$1.copyAttributes(a,t.options,"intersectioncircle3d");h=Geometry.intersectionFunction3D(n,s,o),u=n.create("point3d",h[0],{visible:!1}),l=n.create("circle3d",[u,h[1],h[2]],c);try{s.addChild(l),o.addChild(l)}catch{throw new Error("JSXGraph: Can't create 'intersection' with parent types '"+typeof r[1]+"' and '"+typeof r[2]+"'.")}return l.type=Const.OBJECT_TYPE_INTERSECTION_CIRCLE3D,l.elType="intersectioncircle3d",l.setParents([s.id,o.id]),l};JXG$1.registerElement("intersectioncircle3d",JXG$1.createIntersectionCircle3D);JXG$1.Point3D=function(t,r,a,n){this.constructor(t.board,n,Const.OBJECT_TYPE_POINT3D,Const.OBJECT_CLASS_3D),this.constructor3D(t,"point3d"),this.board.finalizeAdding(this),this.coords=[0,0,0,0],this.initialCoords=[0,0,0,0],this.F=r,this.slide=a,this.position=[],this.movePath=[],this.moveCallback=null,this.moveInterval=null,this._c2d=null,this.methodMap=JXG$1.deepCopy(this.methodMap,{})};JXG$1.Point3D.prototype=new JXG$1.GeometryElement;JXG$1.copyPrototypeMethods(JXG$1.Point3D,JXG$1.GeometryElement3D,"constructor3D");JXG$1.extend(JXG$1.Point3D.prototype,{X:function(){return this.coords[1]},Y:function(){return this.coords[2]},Z:function(){return this.coords[3]},W:function(){return this.coords[0]},updateCoords:function(){var t,r=0;if(JXG$1.isFunction(this.F))this.coords=JXG$1.evaluate(this.F),this.coords.length===3&&this.coords.unshift(1);else for(this.F.length===3&&(this.coords[0]=1,r=1),t=0;t<this.F.length;t++)JXG$1.isFunction(this.F[t])&&(this.coords[r+t]=JXG$1.evaluate(this.F[t]));return this},initCoords:function(){var t,r=0;if(JXG$1.isFunction(this.F))this.coords=JXG$1.evaluate(this.F),this.coords.length===3&&this.coords.unshift(1);else for(this.F.length===3&&(this.coords[0]=1,r=1),t=0;t<this.F.length;t++)this.coords[r+t]=JXG$1.evaluate(this.F[t]);return this.initialCoords=this.coords.slice(),this},normalizeCoords:function(){return Math.abs(this.coords[0])>1e-14&&(this.coords[1]/=this.coords[0],this.coords[2]/=this.coords[0],this.coords[3]/=this.coords[0],this.coords[0]=1),this},setPosition:function(t,r){var a=this.coords;return t.length===3?(a[0]=1,a[1]=t[0],a[2]=t[1],a[3]=t[2]):(a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=t[2],this.normalizeCoords()),this},addTransform:function(t,r){return this.addTransformGeneric(t,r),this},updateTransform:function(){var t,r;if(this.transformations.length===0||this.baseElement===null)return this;for(this===this.baseElement?t=this.initialCoords:t=this.baseElement.coords,r=0;r<this.transformations.length;r++)this.transformations[r].update(),t=Mat.matVecMult(this.transformations[r].matrix,t);return this.coords=t,this},update:function(t){var r,a,n;return this.element2D.draggable()&&Geometry.distance(this._c2d,this.element2D.coords.usrCoords)!==0?(this.view.isVerticalDrag()?r=this.view.project2DTo3DVertical(this.element2D,this.coords):(a=[1,0,0,this.coords[3]],r=this.view.project2DTo3DPlane(this.element2D,[1,0,0,1],a)),r[0]!==0&&(n=this.view.project3DToCube(r),this.coords=n[0],n[1]&&this.element2D.coords.setCoordinates(Const.COORDS_BY_USER,this.view.project3DTo2D(this.coords)),this.slide&&(this.coords=this.slide.projectCoords([1,this.X(),this.Y(),this.Z()],this.position),this.element2D.coords.setCoordinates(Const.COORDS_BY_USER,this.view.project3DTo2D(this.coords))))):(this.updateCoords().updateTransform(),this.slide&&(this.coords=this.slide.projectCoords([1,this.X(),this.Y(),this.Z()],this.position)),r=this.coords,this.element2D.coords.setCoordinates(Const.COORDS_BY_USER,this.view.project3DTo2D(r)),this.zIndex=Mat.innerProduct(this.view.matrix3DRotShift[3],r)),this._c2d=this.element2D.coords.usrCoords.slice(),this},updateRenderer:function(){return this.needsUpdate=!1,this},testIfFinite:function(){return Math.abs(this.coords[0])>1e-12},distance:function(t){var r=1e-12,a=this.coords,n=t.coords;return a[0]*a[0]>r&&n[0]*n[0]>r?Mat.hypot(n[1]-a[1],n[2]-a[2],n[3]-a[3]):Number.POSITIVE_INFINITY},moveTo:function(t,r,a){a=a||{};var n,s=Math.ceil(r/this.board.attr.animationdelay),o=t[0],l=t[1],u=t[2],h=this.coords[1]-o,c=this.coords[2]-l,f=this.coords[3]-u,d=()=>{},p;if(a.callback&&(d=a.callback),p=function(v){var y=v/s;if(a.effect){if(a.effect==="<>")return Math.pow(Math.sin(y*Math.PI/2),2);if(a.effect==="<")return y*y*y;if(a.effect===">")return 1-Math.pow(1-y,3);if(a.effect==="==")return v/s;throw new Error("valid effects are '==', '<>', '>', and '<'.")}return v/s},!JXG$1.exists(r)||r===0)return this.setPosition([o,l,u],!0),this.board.update(this);if(!JXG$1.exists(a.callback)&&Math.abs(h)<Mat.eps&&Math.abs(c)<Mat.eps&&Math.abs(f)<Mat.eps)return this;for(this.animationPath=[],n=s;n>=0;n--)this.animationPath[s-n]=[o+h*p(n),l+c*p(n),u+f*p(n)];return this.moveAlong(this.animationPath,r,{callback:d})},moveAlong:function(t,r,a){let n=r/t.length;if(JXG$1.isObject(a)&&"callback"in a&&(this.moveCallback=a.callback),this.movePath.length>0){this.movePath=t;return}return this.movePath=t,new Promise((s,o)=>{this.moveInterval=setInterval(()=>{if(this.movePath.length>0){let l=this.movePath.shift();this.setPosition(l,!0),this.board.update(this)}this.movePath.length===0&&(clearInterval(this.moveInterval),s(),JXG$1.isFunction(this.moveCallback)&&this.moveCallback())},n)})},__evt__update3D:function(t){}});JXG$1.createPoint3D=function(t,r,a){var n=r[0],s,o,l,u,h,c=null,f=null;if(r.length>2&&JXG$1.exists(r[r.length-1].is3D)&&!JXG$1.isTransformationOrArray(r[r.length-1])?l=r.pop():l=null,r.length===2)o=r[1];else if(r.length===3&&JXG$1.isPoint3D(r[1])&&JXG$1.isTransformationOrArray(r[2]))o=[0,0,0],c=r[1],f=r[2];else if(r.length===4)o=r.slice(1);else if(r.length===5)o=r.slice(1);else throw new Error("JSXGraph: Can't create point3d with parent types '"+typeof r[1]+"' and '"+typeof r[2]+`'.
Possible parent types: [[x,y,z]], [x,y,z], or [[x,y,z], slide], () => [x, y, z], or [point, transformation(s)]`);return s=JXG$1.copyAttributes(a,t.options,"point3d"),h=new JXG$1.Point3D(n,o,l,s),h.initCoords(),c!==null&&f!==null&&h.addTransform(c,f),u=n.project3DTo2D(h.coords),s=h.setAttr2D(s),h.element2D=n.create("point",u,s),h.element2D.view=n,h.addChild(h.element2D),h.inherits.push(h.element2D),h.element2D.setParents(h),h.slide&&(h.slide.addChild(h),h.setParents(h.slide)),c&&h.setParents(c),h._c2d=h.element2D.coords.usrCoords.slice(),h};JXG$1.registerElement("point3d",JXG$1.createPoint3D);JXG$1.Curve3D=function(t,r,a,n,s,o,l){this.constructor(t.board,l,Const.OBJECT_TYPE_CURVE3D,Const.OBJECT_CLASS_3D),this.constructor3D(t,"curve3d"),this.board.finalizeAdding(this),this._F=r,this._X=a,this._Y=n,this._Z=s,this.points=[],this.numberPoints=0,this.dataX=null,this.dataY=null,this.dataZ=null,this._F!==null?(this._X=function(u){return this._F(u)[0]},this._Y=function(u){return this._F(u)[1]},this._Z=function(u){return this._F(u)[2]}):JXG$1.isFunction(this._X)?this._F=function(u){return[this._X(u),this._Y(u),this._Z(u)]}:this._F=null,this.range=o,this.methodMap=JXG$1.deepCopy(this.methodMap,{})};JXG$1.Curve3D.prototype=new JXG$1.GeometryElement;JXG$1.copyPrototypeMethods(JXG$1.Curve3D,JXG$1.GeometryElement3D,"constructor3D");JXG$1.extend(JXG$1.Curve3D.prototype,{updateCoords:function(){var t=this.evalVisProp("numberpointshigh"),r,a,n,s,o,l,u=[1,0,0,0];if(this.points=[],JXG$1.exists(this.dataX))for(t=this.dataX.length,o=0;o<t;o++)this.points.push([1,this.dataX[o],this.dataY[o],this.dataZ[o]]);else if(JXG$1.isArray(this._X))for(t=this._X.length,o=0;o<t;o++)this.points.push([1,this._X[o],this._Y[o],this._Z[o]]);else for(r=JXG$1.evaluate(this.range),a=JXG$1.evaluate(r[0]),n=JXG$1.evaluate(r[1]),s=(n-a)/(t-1),l=0,o=a;l<t&&o<=n;l++,o+=s)u=this.F(o),u.unshift(1),this.points.push(u);return this.numberPoints=this.points.length,this},evalF:function(t){var r,a,n=[0,0,0,0];if(this.transformations.length===0||!JXG$1.exists(this.baseElement))return JXG$1.exists(this._F)?n=this._F(t):n=[this._X[t],this._Y[t],this._Z[t]],n;for(r=this.transformations,a=0;a<r.length;a++)r[a].update();for(n.length===3&&n.unshift(1),this===this.baseElement?JXG$1.exists(this._F)?n=this._F(t):n=[this._X[t],this._Y[t],this._Z[t]]:n=this.baseElement.evalF(t),n.unshift(1),n=Mat.matVecMult(r[0].matrix,n),a=1;a<r.length;a++)n=Mat.matVecMult(r[a].matrix,n);return n.slice(1)},F:function(t){return this.evalF(t)},X:function(t){return this.evalF(t)[0]},Y:function(t){return this.evalF(t)[1]},Z:function(t){return this.evalF(t)[2]},updateDataArray2D:function(){var t,r,a=[],n=[],s=this.points.length;for(t=0;t<s;t++)r=this.view.project3DTo2D(this.points[t]),a.push(r[1]),n.push(r[2]);return{X:a,Y:n}},addTransform:function(t,r){return this.addTransformGeneric(t,r),this},updateTransform:function(){var t,r,a,n,s;if(this.transformations.length===0||this.baseElement===null||JXG$1.exists(this._F))return this;for(t=this.transformations,a=0;a<t.length;a++)t[a].update();for(s=this.baseElement.numberPoints,a=0;a<s;a++){for(this===this.baseElement?r=this.points[a]:r=this.baseElement.points[a],n=0;n<t.length;n++)r=Mat.matVecMult(t[n].matrix,r);this.points[a]=r}return this.numberPoints=s,this},updateDataArray:function(){},update:function(){return this.needsUpdate&&(this.updateDataArray(),this.updateCoords().updateTransform()),this},updateRenderer:function(){return this.needsUpdate=!1,this},projectCoords:function(t,r){return Geometry.projectCoordsToParametric(t,this,1,r)}});JXG$1.createCurve3D=function(t,r,a){var n=r[0],s,o,l,u,h,c,f,d,p=null,v=null;return r.length===3?JXG$1.isTransformationOrArray(r[2])&&r[1].type===Const.OBJECT_TYPE_CURVE3D?(p=r[1],v=r[2],s=null,o=[],l=[],u=[]):(s=r[1],h=r[2],o=null,l=null,u=null):r.length===2&&JXG$1.isArray(r[1])?(d=Mat.transpose(r[1]),o=d[0],l=d[1],u=d[2],s=null):(o=r[1],l=r[2],u=r[3],h=r[4],s=null),c=JXG$1.copyAttributes(a,t.options,"curve3d"),f=new JXG$1.Curve3D(n,s,o,l,u,h,c),c=f.setAttr2D(c),f.element2D=n.create("curve",[[],[]],c),f.element2D.view=n,p!==null&&(f.addTransform(p,v),f.addParents(p)),f.element2D.updateDataArray=function(){var y=f.updateDataArray2D();this.dataX=y.X,this.dataY=y.Y},f.addChild(f.element2D),f.inherits.push(f.element2D),f.element2D.setParents(f),f.element2D.prepareUpdate().update(),t.isSuspendedUpdate||f.element2D.updateVisibility().updateRenderer(),f};JXG$1.registerElement("curve3d",JXG$1.createCurve3D);JXG$1.createVectorfield3D=function(t,r,a){var n=r[0],s,o;if(!(r.length>=5&&(JXG$1.isArray(r[1])||JXG$1.isFunction(r[1])||JXG$1.isString(r[1]))&&JXG$1.isArray(r[2])&&r[1].length===3&&JXG$1.isArray(r[3])&&r[2].length===3&&JXG$1.isArray(r[4])&&r[3].length===3))throw new Error("JSXGraph: Can't create vector field 3D with parent types '"+typeof r[1]+"', '"+typeof r[2]+"', '"+typeof r[3]+"'.'"+typeof r[4]+"', ");return o=JXG$1.copyAttributes(a,t.options,"vectorfield3d"),s=n.create("curve3d",[[],[],[]],o),s.setF=function(l,u){var h,c,f;return JXG$1.isArray(l)?(h=JXG$1.createFunction(l[0],this.board,u),c=JXG$1.createFunction(l[1],this.board,u),f=JXG$1.createFunction(l[2],this.board,u),this.F=function(d,p,v){return[h(d,p,v),c(d,p,v),f(d,p,v)]}):this.F=JXG$1.createFunction(l,s.board,u),this},s.setF(r[1],"x, y, z"),s.xData=r[2],s.yData=r[3],s.zData=r[4],s.updateDataArray=function(){var l,u,h,c,f,d,p,v,y=this.evalVisProp("scale"),b=[JXG$1.evaluate(this.xData[0]),JXG$1.evaluate(this.yData[0]),JXG$1.evaluate(this.zData[0])],_=[JXG$1.evaluate(this.xData[1]),JXG$1.evaluate(this.yData[1]),JXG$1.evaluate(this.zData[1])],N=[JXG$1.evaluate(this.xData[2]),JXG$1.evaluate(this.yData[2]),JXG$1.evaluate(this.zData[2])],M=[(N[0]-b[0])/_[0],(N[1]-b[1])/_[1],(N[2]-b[2])/_[2]],C,$,w,A,X=this.evalVisProp("arrowhead.enabled"),O,G,R,B,F;for(X&&(O=this.evalVisProp("arrowhead.size"),F=this.evalVisProp("arrowhead.angle"),G=O/t.unitX,R=O/t.unitY,B=O/Math.sqrt(t.unitX*t.unitY)),this.dataX=[],this.dataY=[],this.dataZ=[],u=0,d=b[0];u<=_[0];d+=M[0],u++)for(h=0,p=b[1];h<=_[1];p+=M[1],h++)for(l=0,v=b[2];l<=_[2];v+=M[2],l++)c=this.F(d,p,v),f=Mat.norm(c),!(f<Number.EPSILON)&&(c[0]*=y,c[1]*=y,c[2]*=y,JXG$1.concat(this.dataX,[d,d+c[0],NaN]),JXG$1.concat(this.dataY,[p,p+c[1],NaN]),JXG$1.concat(this.dataZ,[v,v+c[2],NaN]),X&&(f*=y,C=Math.atan2(c[1],c[0]),A=Math.asin(c[2]/f),$=A-F,w=A+F,JXG$1.concat(this.dataX,[d+c[0]-G*Math.cos(C)*Math.cos($),d+c[0],d+c[0]-G*Math.cos(C)*Math.cos(w),NaN]),JXG$1.concat(this.dataY,[p+c[1]-R*Math.sin(C)*Math.cos($),p+c[1],p+c[1]-R*Math.sin(C)*Math.cos(w),NaN]),JXG$1.concat(this.dataZ,[v+c[2]-B*Math.sin(w),v+c[2],v+c[2]-B*Math.sin($),NaN])))},s.methodMap=JXG$1.deepCopy(s.methodMap,{setF:"setF"}),s};JXG$1.registerElement("vectorfield3D",JXG$1.createVectorfield3D);JXG$1.Line3D=function(t,r,a,n,s){this.constructor(t.board,s,Const.OBJECT_TYPE_LINE3D,Const.OBJECT_CLASS_3D),this.constructor3D(t,"line3d"),this.point=r,this.direction=a,this.vec=[0,0,0,0],this.range=n||[-1/0,1/0],this.point1=null,this.point2=null,this.board.finalizeAdding(this),this.methodMap=JXG$1.deepCopy(this.methodMap,{})};JXG$1.Line3D.prototype=new JXG$1.GeometryElement;JXG$1.copyPrototypeMethods(JXG$1.Line3D,JXG$1.GeometryElement3D,"constructor3D");JXG$1.extend(JXG$1.Line3D.prototype,{updateCoords:function(){var t,r=0;if(JXG$1.exists(this.direction.view)&&this.direction.type===Const.OBJECT_TYPE_LINE3D)this.vec=this.direction.vec.slice();else if(JXG$1.isFunction(this.direction))this.vec=JXG$1.evaluate(this.direction),this.vec.length===3&&this.vec.unshift(0);else for(this.direction.length===3&&(this.vec[0]=0,r=1),t=0;t<this.direction.length;t++)this.vec[r+t]=JXG$1.evaluate(this.direction[t]);return this},getPointCoords:function(t){var r=[],a=[],n;return r=this.point.coords,a=this.vec,n=JXG$1.evaluate(t),t=this.view.intersectionLineCube(r,a,n),Math.abs(t)===1/0&&(t=0),[r[0]+a[0]*t,r[1]+a[1]*t,r[2]+a[2]*t,r[3]+a[3]*t]},addTransform:function(t,r){return this.point.addTransform(t.point,r),this.addTransformGeneric(t,r),this},updateTransform:function(){var t,r;if(this.transformations.length===0||this.baseElement===null)return this;for(this===this.baseElement?t=this.vec:t=this.baseElement.vec,r=0;r<this.transformations.length;r++)this.transformations[r].update(),t=Mat.matVecMult(this.transformations[r].matrix,t);return this.vec=t,this},update:function(){return this.needsUpdate&&this.updateCoords().updateTransform(),this},setPosition2D:function(t){var r,a;for(r=0;r<this.parents.length;r++)a=this.view.select(this.parents[r]),a.elType==="point3d"&&a.element2D.draggable()&&t.applyOnce(a.element2D);this.endpoints[0].update(),this.endpoints[1].update()},updateRenderer:function(){return this.needsUpdate=!1,this},projectCoords:function(t,r){var a=this.getPointCoords(0),n=this.getPointCoords(1),s=[n[0]-a[0],n[1]-a[1],n[2]-a[2]],o=[t[0]-a[0],t[1]-a[1],t[2]-a[2]],l=Mat.innerProduct(o,s)/Mat.innerProduct(s,s),u=Math.min(Math.max(l,JXG$1.evaluate(this.range[0])),JXG$1.evaluate(this.range[1])),h;return h=this.getPointCoords(u).slice(),r[0]=u,h},updateZIndex:function(){var t=this.endpoints[0],r=this.endpoints[1],a=[1,t.X()+r.X(),t.Y()+r.Y(),t.Z()+r.Z()];return a[1]*=.5,a[2]*=.5,a[3]*=.5,this.zIndex=Mat.innerProduct(this.view.matrix3DRotShift[3],a),this}});JXG$1.createLine3D=function(t,r,a){var n=r[0],s,o,l,u,h,c,f,d,p,v=null,y=null;if(s=JXG$1.copyAttributes(a,t.options,"line3d"),r[1].type===Const.OBJECT_TYPE_LINE3D&&JXG$1.isTransformationOrArray(r[2])&&(v=r[1],y=r[2],o=JXG$1.providePoints3D(n,[[0,0,0,0],[0,0,0,0]],a,"line3d",["point1","point2"])),v===null&&(JXG$1.isPoint3D(r[2])||r.length===3&&(JXG$1.isArray(r[2])||JXG$1.isFunction(r[2]))))c=JXG$1.providePoints3D(n,[r[1]],a,"line3d",["point1"])[0],f=JXG$1.providePoints3D(n,[r[2]],a,"line3d",["point2"])[0],u=function(){return[0,f.X()-c.X(),f.Y()-c.Y(),f.Z()-c.Z()]},h=[0,1],p=new JXG$1.Line3D(n,c,u,h,s),p.prepareUpdate().update(),d=JXG$1.providePoints3D(n,[[1,0,0,0],[1,0,0,0]],{visible:!0},"line3d",["point1","point2"]),d[0].F=function(){var b=0;return p.evalVisProp("straightfirst")&&(b=-1/0),p.getPointCoords(b)},d[1].F=function(){var b=1;return p.evalVisProp("straightlast")&&(b=1/0),p.getPointCoords(b)},d[0].prepareUpdate().update(),d[1].prepareUpdate().update(),s=p.setAttr2D(s),s.straightfirst=!1,s.straightlast=!1,p.element2D=n.create("segment",[d[0].element2D,d[1].element2D],s),p.element2D.view=n,p.endpoints=d,p.addChild(d[0]),p.addChild(d[1]),p.addParents([c,f]);else{if(v!==null)l=JXG$1.providePoints3D(n,[[0,0,0]],a,"line3d",["point"])[0],u=[0,0,0,1e-4],h=r[3]||[-1/0,1/0];else if(JXG$1.exists(r[2].view)&&r[2].type===Const.OBJECT_TYPE_LINE3D||JXG$1.isFunction(r[2])||r[2].length===3||r[2].length===4)l=JXG$1.providePoints3D(n,[r[1]],a,"line3d",["point"])[0],u=r[2],h=r[3];else throw new Error("JSXGraph: Can't create line3d with parents of type '"+typeof r[1]+", "+typeof r[2]+", "+typeof r[3]+"'.");o=JXG$1.providePoints3D(n,[[1,0,0,0],[1,0,0,0]],a,"line3d",["point1","point2"]),p=new JXG$1.Line3D(n,l,u,h,s),p.prepareUpdate().update(),o[0].F=function(){return p.getPointCoords(JXG$1.evaluate(p.range[0]))},o[0].prepareUpdate().update(),c=o[0],o[1].F=function(){return p.getPointCoords(JXG$1.evaluate(p.range[1]))},o[1].prepareUpdate().update(),f=o[1],s=p.setAttr2D(s),s.straightfirst=!1,s.straightlast=!1,p.element2D=n.create("segment",[c.element2D,f.element2D],s),p.element2D.view=n,p.endpoints=o,p.addParents(l),v!==null&&y!==null&&(p.addTransform(v,y),p.addParents(v))}return p.addChild(p.element2D),p.inherits.push(p.element2D),p.element2D.addParents(p),p.point1=c,p.point2=f,p.point1._is_new?(p.addChild(p.point1),delete p.point1._is_new):p.point1.addChild(p),p.point2._is_new?(p.addChild(p.point2),delete p.point2._is_new):p.point2.addChild(p),JXG$1.exists(l)&&(l._is_new?(p.addChild(l),delete l._is_new):l.addChild(p)),p.update(),p.element2D.prepareUpdate().update().updateRenderer(),p};JXG$1.registerElement("line3d",JXG$1.createLine3D);JXG$1.Plane3D=function(t,r,a,n,s,o,l){this.constructor(t.board,l,Const.OBJECT_TYPE_PLANE3D,Const.OBJECT_CLASS_3D),this.constructor3D(t,"plane3d"),this.board.finalizeAdding(this),this.point=r,this.direction1=a,this.direction2=s,this.range_u=n||[-1/0,1/0],this.range_v=o||[-1/0,1/0],this.vec1=[0,0,0,0],this.vec2=[0,0,0,0],this.mesh3d=null,this.normal=[0,0,0,0],this.d=0,this.updateCoords(),this.updateNormal(),this.methodMap=JXG$1.deepCopy(this.methodMap,{})};JXG$1.Plane3D.prototype=new JXG$1.GeometryElement;JXG$1.copyPrototypeMethods(JXG$1.Plane3D,JXG$1.GeometryElement3D,"constructor3D");JXG$1.extend(JXG$1.Plane3D.prototype,{F:function(t,r){var a,n,s,o,l;for(n=this.vec1.slice(),s=this.vec2.slice(),o=Mat.norm(n,3),l=Mat.norm(s,3),a=0;a<3;a++)n[a]/=o,s[a]/=l;return[this.point.X()+t*n[0]+r*s[0],this.point.Y()+t*n[1]+r*s[1],this.point.Z()+t*n[2]+r*s[2]]},X:function(t,r){return this.F(t,r)[0]},Y:function(t,r){return this.F(t,r)[1]},Z:function(t,r){return this.F(t,r)[2]},updateCoords:function(){var t,r;if(JXG$1.exists(this.direction1.view)&&this.direction1.type===Const.OBJECT_TYPE_LINE3D)this.vec1=this.direction1.vec.slice();else if(JXG$1.isFunction(this.direction1))this.vec1=JXG$1.evaluate(this.direction1),this.vec1.length===3&&this.vec1.unshift(0);else for(r=0,this.direction1.length===3&&(this.vec1[0]=0,r=1),t=0;t<this.direction1.length;t++)this.vec1[r+t]=JXG$1.evaluate(this.direction1[t]);if(JXG$1.exists(this.direction2.view)&&this.direction2.type===Const.OBJECT_TYPE_LINE3D)this.vec2=this.direction2.vec.slice();else if(JXG$1.isFunction(this.direction2))this.vec2=JXG$1.evaluate(this.direction2),this.vec2.length===3&&this.vec2.unshift(0);else for(r=0,this.direction2.length===3&&(this.vec2[0]=0,r=1),t=0;t<this.direction2.length;t++)this.vec2[r+t]=JXG$1.evaluate(this.direction2[t]);return this},updateNormal:function(){var t,r;if(this.needsUpdate,this.normal=Mat.crossProduct(this.vec1.slice(1),this.vec2.slice(1)),r=Mat.norm(this.normal),Math.abs(r)>Mat.eps*Mat.eps)for(t=0;t<3;t++)this.normal[t]/=r;return this.normal.unshift(0),this.d=Mat.innerProduct(this.point.coords,this.normal,4),this},updateDataArray:function(){var t,r,a,n,s,o,l,u=["xPlaneRear","yPlaneRear","zPlaneRear"],h=[],c=[0,0,0],f=[0,0,0],d=[0,0,0],p=[0,0,0],v=1e-12,y,b,_,N,M,C,$,w,A=this.view;if(this.dataX=[],this.dataY=[],this.updateNormal(),this.elType!=="axisplane3d"&&A.defaultAxes&&JXG$1.evaluate(this.range_u[0])===-1/0&&JXG$1.evaluate(this.range_u[1])===1/0&&JXG$1.evaluate(this.range_v[0])===-1/0&&JXG$1.evaluate(this.range_v[1])===1/0){for(_=0;_<u.length;_++){if(p=A.intersectionPlanePlane(this,A.defaultAxes[u[_]]),p[0]!==!1&&p[1]!==!1){for(b=0;b<h.length&&!(Geometry.distance(p[0],h[b][0],4)<v&&Geometry.distance(p[1],h[b][1],4)<v||Geometry.distance(p[0],h[b][1],4)<v&&Geometry.distance(p[1],h[b][0],4)<v);b++);b===h.length&&h.push(p.slice())}if(p=[1,0,0,0],p[_+1]=A.bbox3D[_][1],y=Mat.innerProduct(p,A.defaultAxes[u[_]].normal,4),p=A.intersectionPlanePlane(this,A.defaultAxes[u[_]],y),p[0]!==!1&&p[1]!==!1){for(b=0;b<h.length&&!(Geometry.distance(p[0],h[b][0],4)<v&&Geometry.distance(p[1],h[b][1],4)<v||Geometry.distance(p[0],h[b][1],4)<v&&Geometry.distance(p[1],h[b][0],4)<v);b++);b===h.length&&h.push(p.slice())}}if(h.length===0)return{X:this.dataX,Y:this.dataY};C=0,$=C,b=0;do{for(p=h[$][b],p.length===4&&(s=A.project3DTo2D(p),this.dataX.push(s[1]),this.dataY.push(s[2])),b=(b+1)%2,p=h[$][b],w=$,_=0;_<h.length;_++){if(_!==$&&Geometry.distance(p,h[_][0])<v){$=_,b=0;break}if(_!==$&&Geometry.distance(p,h[_][1])<v){$=_,b=1;break}}if($===w){console.log("Error plane3d update: did not find next",$);break}}while($!==C);s=A.project3DTo2D(h[C][0]),this.dataX.push(s[1]),this.dataY.push(s[2])}else{for(t=JXG$1.evaluate(this.range_u[0]),r=JXG$1.evaluate(this.range_u[1]),a=JXG$1.evaluate(this.range_v[0]),n=JXG$1.evaluate(this.range_v[1]),d=this.point.coords,c=this.vec1.slice(),f=this.vec2.slice(),o=Mat.norm(c,4),l=Mat.norm(f,4),b=1;b<4;b++)c[b]/=o,f[b]/=l;for(_=0;_<4;_++){switch(_){case 0:N=t,M=a;break;case 1:N=r,M=a;break;case 2:N=r,M=n;break;case 3:N=t,M=n}for(b=0;b<4;b++)p[b]=d[b]+N*c[b]+M*f[b];s=A.project3DTo2D(p),this.dataX.push(s[1]),this.dataY.push(s[2])}this.dataX.push(this.dataX[0]),this.dataY.push(this.dataY[0])}return{X:this.dataX,Y:this.dataY}},addTransform:function(t,r){return this.addTransformGeneric(t,r),this.point.addTransform(t.point,r),this},updateTransform:function(){var t,r,a;if(this.transformations.length===0||this.baseElement===null)return this;for(this===this.baseElement?(t=this.vec1,r=this.vec2):(t=this.baseElement.vec1,r=this.baseElement.vec2),a=0;a<this.transformations.length;a++)this.transformations[a].update(),t=Mat.matVecMult(this.transformations[a].matrix,t),r=Mat.matVecMult(this.transformations[a].matrix,r);return this.vec1=t,this.vec2=r,this},update:function(){return this.needsUpdate&&this.updateCoords().updateTransform(),this},updateRenderer:function(){return this.needsUpdate=!1,this},projectCoords:function(t,r){return Geometry.projectCoordsToParametric(t,this,2,r)}});JXG$1.createPlane3D=function(t,r,a){var n=r[0],s,o,l,u,h,c,f,d,p,v,y=null,b=null;if(s=JXG$1.copyAttributes(a,t.options,"plane3d"),s.threepoints||JXG$1.isPoint3D(r[2])||JXG$1.isPoint3D(r[3]))o=JXG$1.providePoints3D(n,[r[1]],a,"plane3d",["point1"])[0],l=JXG$1.providePoints3D(n,[r[2]],a,"plane3d",["point2"])[0],u=JXG$1.providePoints3D(n,[r[3]],a,"plane3d",["point3"])[0],h=function(){return[l.X()-o.X(),l.Y()-o.Y(),l.Z()-o.Z()]},c=function(){return[u.X()-o.X(),u.Y()-o.Y(),u.Z()-o.Z()]},f=r[4]||[-1/0,1/0],d=r[5]||[-1/0,1/0];else{if(r[1].type===Const.OBJECT_TYPE_PLANE3D&&JXG$1.isTransformationOrArray(r[2])?(y=r[1],b=r[2],o=JXG$1.providePoints3D(n,[[0,0,0,0]],a,"plane3d",["point"])[0],h=[0,1e-4,0,0],c=[0,0,1e-4,0],f=r[3]||[-1/0,1/0],d=r[4]||[-1/0,1/0]):(o=JXG$1.providePoints3D(n,[r[1]],a,"plane3d",["point"])[0],h=r[2],c=r[3],f=r[4]||[-1/0,1/0],d=r[5]||[-1/0,1/0]),o===!1)throw new Error("JSXGraph: Can't create plane3d with first parent of type '"+typeof r[1]+`'.
Possible first parent types are: point3d, array of length 3, function returning an array of length 3.`);if(y!==null&&r<3||y===null&&r.length<4)throw new Error("JSXGraph: Can't create plane3d with parents of type '"+typeof r[1]+", "+typeof r[2]+", "+typeof r[3]+", "+typeof r[4]+", "+typeof r[5]+"'.")}return p=new JXG$1.Plane3D(n,o,h,f,c,d,s),o.addChild(p),s=p.setAttr2D(s),p.element2D=n.create("curve",[[],[]],s),p.element2D.view=n,y!==null&&b!==null&&(p.addTransform(y,b),p.addParents(y)),p.element2D.updateDataArray=function(){var _=p.updateDataArray();this.dataX=_.X,this.dataY=_.Y},p.addChild(p.element2D),p.inherits.push(p.element2D),p.element2D.setParents(p),Math.abs(p.range_u[0])!==1/0&&Math.abs(p.range_u[1])!==1/0&&Math.abs(p.range_v[0])!==1/0&&Math.abs(p.range_v[1])!==1/0&&(s=JXG$1.copyAttributes(s.mesh3d,t.options,"mesh3d"),v=n.create("mesh3d",[function(){return o.coords},function(){return p.vec1},function(){return p.vec2},p.range_u,p.range_v],s),p.mesh3d=v,p.addChild(v),p.inherits.push(v),p.element2D.inherits.push(v),v.setParents(p),p.mesh3d.view=n),p.element2D.prepareUpdate().update(),t.isSuspendedUpdate||p.element2D.updateVisibility().updateRenderer(),p};JXG$1.registerElement("plane3d",JXG$1.createPlane3D);JXG$1.createIntersectionLine3D=function(t,r,a){var n=r[0],s=r[1],o=r[2],l,u,h,c=JXG$1.copyAttributes(a,t.options,"intersectionline3d"),f=[];for(h=Geometry.intersectionFunction3D(n,s,o),u=0;u<2;u++)f[u]=n.create("point3d",h[u],c["point"+(u+1)]);l=n.create("line3d",f,c);try{s.addChild(l),o.addChild(l)}catch{throw new Error("JSXGraph: Can't create 'intersection' with parent types '"+typeof r[1]+"' and '"+typeof r[2]+"'.")}return l.type=Const.OBJECT_TYPE_INTERSECTION_LINE3D,l.elType="intersectionline3d",l.setParents([s.id,o.id]),l};JXG$1.registerElement("intersectionline3d",JXG$1.createIntersectionLine3D);JXG$1.Text3D=function(t,r,a,n,s){this.constructor(t.board,s,Const.OBJECT_TYPE_TEXT3D,Const.OBJECT_CLASS_3D),this.constructor3D(t,"text3d"),this.board.finalizeAdding(this),this.coords=[0,0,0,0],this.F=r,this.slide=n,this.X=function(){return this.coords[1]},this.Y=function(){return this.coords[2]},this.Z=function(){return this.coords[3]},this.position=[],this._c2d=null,this.methodMap=JXG$1.deepCopy(this.methodMap,{})};JXG$1.Text3D.prototype=new JXG$1.GeometryElement;JXG$1.copyPrototypeMethods(JXG$1.Text3D,JXG$1.GeometryElement3D,"constructor3D");JXG$1.extend(JXG$1.Text3D.prototype,{updateCoords:function(){var t;if(JXG$1.isFunction(this.F))this.coords=JXG$1.evaluate(this.F),this.coords.unshift(1);else for(this.coords[0]=1,t=0;t<3;t++)JXG$1.isFunction(this.F[t])&&(this.coords[t+1]=JXG$1.evaluate(this.F[t]));return this},initCoords:function(){var t;if(JXG$1.isFunction(this.F))this.coords=JXG$1.evaluate(this.F),this.coords.unshift(1);else for(this.coords[0]=1,t=0;t<3;t++)this.coords[t+1]=JXG$1.evaluate(this.F[t]);return this},normalizeCoords:function(){return Math.abs(this.coords[0])>Mat.eps&&(this.coords[1]/=this.coords[0],this.coords[2]/=this.coords[0],this.coords[3]/=this.coords[0],this.coords[0]=1),this},setPosition:function(t,r){var a=this.coords;return t.length===3?(a[0]=1,a[1]=t[0],a[2]=t[1],a[3]=t[2]):(a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=t[2],this.normalizeCoords()),this},update:function(t){var r,a,n;return this.element2D.draggable()&&Geometry.distance(this._c2d,this.element2D.coords.usrCoords)!==0?(this.view.isVerticalDrag()?r=this.view.project2DTo3DVertical(this.element2D,this.coords):(a=[1,0,0,this.coords[3]],r=this.view.project2DTo3DPlane(this.element2D,[1,0,0,1],a)),r[0]!==0&&(n=this.view.project3DToCube(r),this.coords=n[0],n[1]&&this.element2D.coords.setCoordinates(Const.COORDS_BY_USER,this.view.project3DTo2D(this.coords)),this.slide&&(this.coords=this.slide.projectCoords([this.X(),this.Y(),this.Z()],this.position),this.element2D.coords.setCoordinates(Const.COORDS_BY_USER,this.view.project3DTo2D(this.coords))))):(this.updateCoords(),this.slide&&(this.coords=this.slide.projectCoords([this.X(),this.Y(),this.Z()],this.position)),r=this.coords,this.element2D.coords.setCoordinates(Const.COORDS_BY_USER,this.view.project3DTo2D(r)),this.zIndex=Mat.innerProduct(this.view.matrix3DRotShift[3],r),this.element2D.prepareUpdate().update()),this._c2d=this.element2D.coords.usrCoords.slice(),this},updateRenderer:function(){return this.needsUpdate=!1,this},testIfFinite:function(){return Math.abs(this.coords[0])>Mat.eps},__evt__update3D:function(t){}});JXG$1.createText3D=function(t,r,a){var n=r[0],s,o,l,u,h,c;if(r.length>2&&JXG$1.exists(r[r.length-1].is3D)?l=r.pop():l=null,r.length===3)o=r[1],u=r[2];else if(r.length===5)o=r.slice(1,4),u=r[4];else throw new Error("JSXGraph: Can't create text3d with parent types '"+typeof r[1]+"' and '"+typeof r[2]+`'.
Possible parent types: [[x,y,z], text], [x,y,z, text]`);return s=JXG$1.copyAttributes(a,t.options,"text3d"),c=new JXG$1.Text3D(n,o,u,l,s),c.initCoords(),h=n.project3DTo2D(c.coords),s=c.setAttr2D(s),c.element2D=n.create("text",[h[1],h[2],u],s),c.element2D.view=n,c.addChild(c.element2D),c.inherits.push(c.element2D),c.element2D.setParents(c),c.slide&&(c.slide.addChild(c),c.setParents(c.slide)),c._c2d=c.element2D.coords.usrCoords.slice(),c};JXG$1.registerElement("text3d",JXG$1.createText3D);JXG$1.createTicks3D=function(t,r,a){var n=r[0],s=r[1],o=r[2],l=r[3],u=r[4],h,c;return c=JXG$1.copyAttributes(a,t.options,"ticks3d"),h=n.create("curve",[[],[]],c),h.point=s,h.direction1=o,h.len=l,h.direction2=u,h.drawLabels=function(f){var d=0,p=this.len,v=this.evalVisProp("ticksdistance"),y=this.evalVisProp("tickendings"),b=this.evalVisProp("majorheight"),_,N,M,C,$,w,A,X=[0,0,0],O=[0,0,0],G=[0,0,0],R=[];if(b/=Math.sqrt(t.unitX*t.unitY),_=b*y[1]*2,this.dataX=[],this.dataY=[],JXG$1.isFunction(this.point))G=this.point().slice(1);else for(C=0;C<3;C++)G[C]=JXG$1.evaluate(this.point[C]);for(C=0;C<3;C++)X[C]=JXG$1.evaluate(this.direction1[C]),O[C]=JXG$1.evaluate(this.direction2[C]);for(N=JXG$1.Math.norm(X,3),M=JXG$1.Math.norm(O,3),C=0;C<3;C++)X[C]/=N,O[C]/=M;if(!(Math.abs(v)<Mat.eps)){for($=d;$<=p;$+=v){for(A=[G[0]+$*X[0]+_*O[0],G[1]+$*X[1]+_*O[1],G[2]+$*X[2]+_*O[2]],C=0;C<3;C++)X[C]!==0&&(w=G[C]+$*X[C]);R.push(n.create("text3d",[A,w],f))}return R}},h.evalVisProp("drawlabels")&&(h.labels=h.drawLabels(c.label)),h.updateDataArray=function(){var f=0,d=this.len,p=this.evalVisProp("ticksdistance"),v=this.evalVisProp("tickendings"),y=this.evalVisProp("majorheight"),b,_,N,M,C,$,w,A,X=[0,0,0],O=[0,0,0],G=[0,0,0];if(y/=Math.sqrt(t.unitX*t.unitY),b=y*-v[0],_=y*v[1],this.dataX=[],this.dataY=[],JXG$1.isFunction(this.point))G=this.point().slice(1);else for(C=0;C<3;C++)G[C]=JXG$1.evaluate(this.point[C]);for(C=0;C<3;C++)X[C]=JXG$1.evaluate(this.direction1[C]),O[C]=JXG$1.evaluate(this.direction2[C]);for(N=JXG$1.Math.norm(X,3),M=JXG$1.Math.norm(O,3),C=0;C<3;C++)X[C]/=N,O[C]/=M;if(!(Math.abs(p)<Mat.eps))for($=f;$<=d;$+=p)A=[G[0]+$*X[0]+b*O[0],G[1]+$*X[1]+b*O[1],G[2]+$*X[2]+b*O[2]],w=n.project3DTo2D(A),this.dataX.push(w[1]),this.dataY.push(w[2]),A=[G[0]+$*X[0]+_*O[0],G[1]+$*X[1]+_*O[1],G[2]+$*X[2]+_*O[2]],w=n.project3DTo2D(A),this.dataX.push(w[1]),this.dataY.push(w[2]),this.dataX.push(NaN),this.dataY.push(NaN)},h};JXG$1.registerElement("ticks3d",JXG$1.createTicks3D);JXG$1.Polygon3D=function(t,r,a){var n;for(this.constructor(t.board,a,Const.OBJECT_TYPE_POLYGON3D,Const.OBJECT_CLASS_3D),this.constructor3D(t,"polygon3d"),this.board.finalizeAdding(this),this.vertices=[],n=0;n<r.length;n++)this.vertices[n]=this.board.select(r[n]),this.vertices[n]._is_new&&(delete this.vertices[n]._is_new,this.vertices[n]._is_new_pol=!0)};JXG$1.Polygon3D.prototype=new JXG$1.GeometryElement;JXG$1.copyPrototypeMethods(JXG$1.Polygon3D,JXG$1.GeometryElement3D,"constructor3D");JXG$1.extend(JXG$1.Polygon3D.prototype,{update:function(){return this},updateRenderer:function(){return this.needsUpdate=!1,this},updateZIndex:function(){var t,r=this.vertices.length,a=[1,0,0,0];if(r<=0)return[NaN,NaN,NaN,NaN];for(t=0;t<r;t++)a[1]+=this.vertices[t].coords[1],a[2]+=this.vertices[t].coords[2],a[3]+=this.vertices[t].coords[3];return a[1]/=r,a[2]/=r,a[3]/=r,this.zIndex=Mat.innerProduct(this.view.matrix3DRotShift[3],a),this}});JXG$1.createPolygon3D=function(t,r,a){var n=r[0],s,o,l,u,h=[],c=[],f,d,p=!1;if(f=JXG$1.copyAttributes(a,t.options,"polygon3d"),u=t.select(r[1]),u===null&&(u=r[1]),JXG$1.isObject(u)&&u.type===Const.OBJECT_TYPE_POLYGON3D&&JXG$1.isTransformationOrArray(r[2]))for(p=!0,l=u.vertices.length-1,d=JXG$1.copyAttributes(a,t.options,"polygon3d","vertices"),o=0;o<l;o++)d.withlabel&&(d.name=u.vertices[o].name===""?"":u.vertices[o].name+"'"),h.push(t.create("point3d",[u.vertices[o],r[2]],d));else if(JXG$1.isArray(r[1])&&r[1].every(v=>JXG$1.isPoint3D(v)))h=r[1];else if(h=JXG$1.providePoints3D(n,r.slice(1),a,"polygon3d",["vertices"]),h===!1)throw new Error("JSXGraph: Can't create polygon3d with parent types other than 'point' and 'coordinate arrays' or a function returning an array of coordinates. Alternatively, a polygon3d and a transformation can be supplied");for(s=new JXG$1.Polygon3D(n,h,f),s.isDraggable=!0,f=s.setAttr2D(f),o=0;o<h.length;o++)c.push(h[o].element2D);if(s.element2D=t.create("polygon",c,f),s.element2D.view=n,s.addChild(s.element2D),s.inherits.push(s.element2D),s.element2D.setParents(s),p)for(s.prepareUpdate().update().updateVisibility().updateRenderer(),l=u.vertices.length-1,o=0;o<l;o++)h[o].prepareUpdate().update().updateVisibility().updateRenderer();return s};JXG$1.registerElement("polygon3d",JXG$1.createPolygon3D);JXG$1.Face3D=function(t,r,a,n){this.constructor(t.board,n,Const.OBJECT_TYPE_FACE3D,Const.OBJECT_CLASS_3D),this.constructor3D(t,"face3d"),this.board.finalizeAdding(this),this.polyhedron=r,this.faceNumber=a,this.normal=[0,0,0,0],this.d=0,this.vec1=[0,0,0,0],this.vec2=[0,0,0,0],this.faceNumber===0&&this.updateCoords(),this.methodMap=JXG$1.deepCopy(this.methodMap,{})};JXG$1.Face3D.prototype=new JXG$1.GeometryElement;JXG$1.copyPrototypeMethods(JXG$1.Face3D,JXG$1.GeometryElement3D,"constructor3D");JXG$1.extend(JXG$1.Face3D.prototype,{updateCoords:function(){var t,r,a,n,s=this.polyhedron;for(t in s.vertices){if(n=s.vertices[t],JXG$1.isFunction(n))s.coords[t]=JXG$1.evaluate(n);else if(JXG$1.isArray(n))for(s.coords[t]=[],a=n.length,r=0;r<a;r++)s.coords[t][r]=JXG$1.evaluate(n[r]);else if(n=s.view.select(n),JXG$1.isPoint3D(n))s.coords[t]=n.coords;else throw new Error("Polyhedron3D.updateCoords: unknown vertices type!");s.coords[t].length===3&&s.coords[t].unshift(1)}return this},updateDataArray2D:function(){var t,r,a,n,s=[],o=[],l=this.polyhedron,u=l.faces[this.faceNumber];if(this.faceNumber===0)for(t in l.vertices)l.coords2D[t]=[];for(r=u.length,this.zIndex=0,t=0;t<r;t++)n=l.coords2D[u[t]],n.length===0&&(a=l.coords[u[t]],n=this.view.project3DTo2D(a),l.coords2D[u[t]]=n,l.zIndex[u[t]]=Mat.innerProduct(this.view.matrix3DRotShift[3],a)),s.push(n[1]),o.push(n[2]),this.zIndex+=l.zIndex[u[t]];return r>0&&(this.zIndex/=r),r!==2&&(s.push(s[0]),o.push(o[0])),{X:s,Y:o}},addTransform:function(t,r){return this.faceNumber===0&&this.addTransformGeneric(t,r),this},updateTransform:function(){var t,r,a,n,s;if(this.faceNumber!==0)return this;if(this.transformations.length===0||this.baseElement===null)return this;for(t=this.transformations,a=0;a<t.length;a++)t[a].update();this===this.baseElement?s=this.polyhedron:s=this.baseElement.polyhedron;for(a in s.coords)if(s.coords.hasOwnProperty(a)){for(r=s.coords[a],n=0;n<t.length;n++)r=Mat.matVecMult(t[n].matrix,r);this.polyhedron.coords[a]=r}return this},update:function(){var t,r,a,n,s,o,l;if(this.needsUpdate&&!this.view.board._change3DView){if(a=this.polyhedron,this.faceNumber===0&&this.updateCoords().updateTransform(),l=a.faces[this.faceNumber],r=l.length,r<3)return this;if(s=a.coords[l[0]],o=a.coords[l[1]],this.vec1=[o[0]-s[0],o[1]-s[1],o[2]-s[2],o[3]-s[3]],o=a.coords[l[2]],this.vec2=[o[0]-s[0],o[1]-s[1],o[2]-s[2],o[3]-s[3]],this.normal=Mat.crossProduct(this.vec1.slice(1),this.vec2.slice(1)),n=Mat.norm(this.normal),this.normal.unshift(0),Math.abs(n)>1e-12)for(t=1;t<4;t++)this.normal[t]/=n;this.d=Mat.innerProduct(s,this.normal,4)}return this},updateRenderer:function(){return this.needsUpdate&&(this.needsUpdate=!1,this.shader()),this},shader:function(){var t,r,a,n,s,o,l,u,h;if(this.evalVisProp("shader.enabled"))return t=this.evalVisProp("shader.hue"),r=this.evalVisProp("shader.saturation"),u=this.evalVisProp("shader.minlightness"),h=this.evalVisProp("shader.maxlightness"),this.evalVisProp("shader.type").toLowerCase()==="angle"?(n=Mat.innerProduct(this.view.matrix3DRotShift[3],this.normal),n=Math.abs(n),a=u+(h-u)*n):(l=this.view.zIndexMax,o=this.view.zIndexMin,a=u+(h-u)*((this.zIndex-o)/(l-o))),s="hsl("+t+","+r+"%,"+a+"%)",this.element2D.visProp.fillcolor=s,this.zIndex}});JXG$1.createFace3D=function(t,r,a){var n=r[0],s=r[1],o=r[2],l,u;return l=JXG$1.copyAttributes(a,t.options,"face3d"),u=new JXG$1.Face3D(n,s,o,l),l=u.setAttr2D(l),u.element2D=n.create("curve",[[],[]],l),u.element2D.view=n,u.element2D.updateDataArray=function(){var h=u.updateDataArray2D();this.dataX=h.X,this.dataY=h.Y},u.addChild(u.element2D),u.inherits.push(u.element2D),u.element2D.setParents(u),u.element2D.prepareUpdate().update(),t.isSuspendedUpdate||u.element2D.updateVisibility().updateRenderer(),u};JXG$1.registerElement("face3d",JXG$1.createFace3D);JXG$1.Polyhedron3D=function(t,r,a,n){var s,o,l,u=this;for(this.constructor(t.board,n,Const.OBJECT_TYPE_POLYHEDRON3D,Const.OBJECT_CLASS_3D),this.constructor3D(t,"polyhedron3d"),this.board.finalizeAdding(this),this.elType="polyhedron3d",this.faces=a,this.numberFaces=a.length,this.def=r,o=["setAttribute","setParents","prepareUpdate","updateRenderer","update","fullUpdate","highlight","noHighlight"],l=function(h){return function(){var c;for(c in u.faces)u.faces.hasOwnProperty(c)&&JXG$1.exists(u.faces[c][h])&&u.faces[c][h].apply(u.faces[c],arguments);return u}},s=0;s<o.length;s++)this[o[s]]=l(o[s]);this.methodMap=JXG$1.deepCopy(this.methodMap,{setAttribute:"setAttribute",setParents:"setParents",addTransform:"addTransform"})};JXG$1.Polyhedron3D.prototype=new JXG$1.GeometryElement;JXG$1.copyPrototypeMethods(JXG$1.Polyhedron3D,JXG$1.GeometryElement3D,"constructor3D");JXG$1.extend(JXG$1.Polyhedron3D.prototype,{addTransform:function(t,r){if(this.faces.length>0&&t.faces.length>0)this.faces[0].addTransform(t.faces[0],r);else throw new Error("Adding transformation failed. At least one of the two polyhedra has no faces.");return this},toSTL:function(t){var r,a,n,s,o,l,u="solid ";for(t===void 0&&(t=this.name),u+=t+`
`,r=0;r<this.def.faces.length;r++){for(u+=` facet normal 0 0 0
  outer loop
`,s=this.def.faces[r],l=s.length,n=this.def.coords,a=0;a<l;a++)o=n[s[a]],u+="   vertex "+o[1]+" "+o[2]+" "+o[3]+`
`;u+=`  endloop
 endfacet
`}return u+="endsolid "+t+`
`,u}});JXG$1.createPolyhedron3D=function(t,r,a){var n=r[0],s,o,l,u,h,c,f,d=[],p=null,v=null,y={view:n,vertices:{},coords:{},coords2D:{},zIndex:{},faces:[]};if(JXG$1.exists(r[1].type)&&r[1].type===Const.OBJECT_TYPE_POLYHEDRON3D)p=r[1],v=r[2],y.vertices=p.def.vertices,y.faces=p.def.faces;else{if(JXG$1.isArray(r[1]))for(o=r[1].length,s=0;s<o;s++)y.vertices[s]=r[1][s];else if(JXG$1.isObject(r[1]))for(s in r[1])r[1].hasOwnProperty(s)&&(y.vertices[s]=r[1][s]);y.faces=r[2]}for(f=JXG$1.copyAttributes(a,t.options,"polyhedron3d"),console.time("polyhedron"),n.board.suspendUpdate(),o=y.faces.length,s=0;s<o;s++)c=JXG$1.copyAttributes(a,t.options,"face3d"),f.fillcolorarray.length>0&&(c.fillcolor=f.fillcolorarray[s%f.fillcolorarray.length]),u=y.faces[s],JXG$1.isArray(u)&&u.length===2&&JXG$1.isObject(u[1])&&JXG$1.isArray(u[0])&&(JXG$1.mergeAttr(c,u[1]),y.faces[s]=u[0]),l=n.create("face3d",[y,s],c),d.push(l);for(h=new JXG$1.Polyhedron3D(n,y,d,f),h.setParents(h),s=0;s<o;s++)h.inherits.push(h.faces[s]),h.addChild(h.faces[s]);return p!==null&&(h.addTransform(p,v),h.addParents(p)),n.board.unsuspendUpdate(),console.timeEnd("polyhedron"),h};JXG$1.registerElement("polyhedron3d",JXG$1.createPolyhedron3D);JXG$1.Sphere3D=function(t,r,a,n,s){this.constructor(t.board,s,Const.OBJECT_TYPE_SPHERE3D,Const.OBJECT_CLASS_3D),this.constructor3D(t,"sphere3d"),this.board.finalizeAdding(this),this.method=r,this.center=this.board.select(a),this.point2=null,this.points=[],this.element2D=null,this.aux2D=[],this.projectionType=t.projectionType,r==="twoPoints"?(this.point2=this.board.select(n),this.radius=this.Radius()):r==="pointRadius"&&(this.updateRadius=JXG$1.createFunction(n,this.board),this.updateRadius(),this.addParentsFromJCFunctions([this.updateRadius])),JXG$1.exists(this.center._is_new)?(this.addChild(this.center),delete this.center._is_new):this.center.addChild(this),r==="twoPoints"&&(JXG$1.exists(this.point2._is_new)?(this.addChild(this.point2),delete this.point2._is_new):this.point2.addChild(this)),this.methodMap=JXG$1.deepCopy(this.methodMap,{center:"center",point2:"point2",Radius:"Radius"})};JXG$1.Sphere3D.prototype=new JXG$1.GeometryElement;JXG$1.copyPrototypeMethods(JXG$1.Sphere3D,JXG$1.GeometryElement3D,"constructor3D");JXG$1.extend(JXG$1.Sphere3D.prototype,{X:function(t,r){var a=this.Radius();return a*Math.sin(t)*Math.cos(r)},Y:function(t,r){var a=this.Radius();return a*Math.sin(t)*Math.sin(r)},Z:function(t,r){var a=this.Radius();return a*Math.cos(t)},range_u:[0,2*Math.PI],range_v:[0,Math.PI],update:function(){return this.projectionType!==this.view.projectionType&&this.rebuildProjection(),this},updateRenderer:function(){return this.needsUpdate=!1,this},setRadius:function(t){return this.updateRadius=JXG$1.createFunction(t,this.board),this.addParentsFromJCFunctions([this.updateRadius]),this.board.update(),this},Radius:function(t){return JXG$1.exists(t)?(this.setRadius(t),this.Radius()):this.method==="twoPoints"?!this.center.testIfFinite()||!this.point2.testIfFinite()?NaN:this.center.distance(this.point2):this.method==="pointRadius"?Math.abs(this.updateRadius()):NaN},focusFn:function(t){var r=this;return function(){var a=r.view.boxToCam[3],n=r.Radius();return r.view.project3DTo2D([r.center.X()+t*n*a[1],r.center.Y()+t*n*a[2],r.center.Z()+t*n*a[3]]).slice(1,3)}},innerVertexFn:function(){var t=this;return function(){var r=t.view,a=r.worldToFocal(t.center.coords,!1),n=Mat.hypot(a[0],a[1]),s=r.boxToCam,o=t.Radius(),l=Math.atan(-n/a[2]),u=Math.acos(o/Mat.norm(a)),h=l+u,c=Math.cos(h),f=Math.sin(h),d;return n>1e-8?d=[-(a[0]*s[1][1]+a[1]*s[2][1])/n,-(a[0]*s[1][2]+a[1]*s[2][2])/n,-(a[0]*s[1][3]+a[1]*s[2][3])/n]:d=[s[1][1],s[1][2],s[1][3]],r.project3DTo2D([t.center.X()+o*(f*d[0]+c*s[3][1]),t.center.Y()+o*(f*d[1]+c*s[3][2]),t.center.Z()+o*(f*d[2]+c*s[3][3])])}},buildCentralProjection:function(t){var r=this.view,a={visible:!1,withLabel:!1},n=r.create("point",this.focusFn(-1),a),s=r.create("point",this.focusFn(1),a),o=r.create("point",this.innerVertexFn(r),a);this.aux2D=[n,s,o],this.element2D=r.create("ellipse",this.aux2D,t===void 0?this.visProp:t)},buildParallelProjection:function(t){var r=this,a=function(){var n=r.view.bbox3D[0][1]-r.view.bbox3D[0][0];return r.Radius()*r.view.size[0]/n};this.aux2D=[],this.element2D=this.view.create("circle",[r.center.element2D,a],t===void 0?this.visProp:t)},rebuildProjection:function(t){var r;if(this.element2D){this.view.board.removeObject(this.element2D);for(r in this.aux2D)this.aux2D.hasOwnProperty(r)&&this.view.board.removeObject(this.aux2D[r])}this.projectionType=this.view.projectionType,this.projectionType==="central"?this.buildCentralProjection(t):this.buildParallelProjection(t),this.addChild(this.element2D),this.inherits.push(this.element2D),this.element2D.view=this.view},projectCoords:function(t,r){var a=this.Radius(),n=[1].concat(t),s=this.center.coords,o=Geometry.distance(s,n,4),l=Stat.subtract(n,s);return o===0?(r[0]=0,r[1]=0,[1,a,0,0]):a===0?(r[0]=0,r[1]=0,this.center.coords):(o=a/o,l[0]=1,l[1]*=o,l[2]*=o,l[3]*=o,r[1]=Math.atan2(l[2],l[1]),r[1]+=r[1]<0?Math.PI:0,r[1]!==0?r[0]=Math.atan2(l[2],l[3]*Math.sin(r[1])):r[0]=Math.atan2(l[1],l[3]*Math.cos(r[1])),r[0]+=r[0]<0?2*Math.PI:0,l)}});JXG$1.createSphere3D=function(t,r,a){var n=r[0],s,o,l,u,h,c;for(s=JXG$1.copyAttributes(a,t.options,"sphere3d"),o=[],c=1;c<r.length;c++)if(JXG$1.isPointType3D(t,r[c])){if(o.length===0?l="center":l="point",u=JXG$1.providePoints3D(n,[r[c]],a,"sphere3d",[l])[0],u===!1)throw new Error("JSXGraph: Can't create sphere3d from this type. Please provide a point type.");o.push(u)}else o.push(r[c]);if(JXG$1.isPoint3D(o[0])&&JXG$1.isPoint3D(o[1]))h=new JXG$1.Sphere3D(n,"twoPoints",o[0],o[1],s);else if(JXG$1.isPoint3D(o[0])&&(JXG$1.isNumber(o[1])||JXG$1.isFunction(o[1])||JXG$1.isString(o[1])))h=new JXG$1.Sphere3D(n,"pointRadius",o[0],o[1],s);else throw new Error("JSXGraph: Can't create sphere3d with parent types '"+typeof r[1]+"' and '"+typeof r[2]+`'.
Possible parent types: [point,point], [point,number], [point,function]`);return s=h.setAttr2D(s),h.rebuildProjection(s),h.element2D.prepareUpdate().update(),t.isSuspendedUpdate||h.element2D.updateVisibility().updateRenderer(),h};JXG$1.registerElement("sphere3d",JXG$1.createSphere3D);JXG$1.Surface3D=function(t,r,a,n,s,o,l,u){this.constructor(t.board,u,Const.OBJECT_TYPE_SURFACE3D,Const.OBJECT_CLASS_3D),this.constructor3D(t,"surface3d"),this.board.finalizeAdding(this),this._F=r,this._X=a,this._Y=n,this._Z=s,this._F!==null?(this._X=function(h,c){return this._F(h,c)[0]},this._Y=function(h,c){return this._F(h,c)[1]},this._Z=function(h,c){return this._F(h,c)[2]}):this._X!==null&&(this._F=function(h,c){return[this._X(h,c),this._Y(h,c),this._Z(h,c)]}),this.range_u=o,this.range_v=l,this.dataX=null,this.dataY=null,this.dataZ=null,this.points=[],this.methodMap=JXG$1.deepCopy(this.methodMap,{})};JXG$1.Surface3D.prototype=new JXG$1.GeometryElement;JXG$1.copyPrototypeMethods(JXG$1.Surface3D,JXG$1.GeometryElement3D,"constructor3D");JXG$1.extend(JXG$1.Surface3D.prototype,{updateWireframe:function(){var t,r,a,n,s,o,l,u,h,c,f,d,p,v,y=[1,0,0,0];for(this.points=[],t=this.evalVisProp("stepsu"),r=this.evalVisProp("stepsv"),s=JXG$1.evaluate(this.range_u),o=JXG$1.evaluate(this.range_v),l=JXG$1.evaluate(s[0]),u=JXG$1.evaluate(o[0]),h=JXG$1.evaluate(s[1]),c=JXG$1.evaluate(o[1]),f=(h-l)/t,d=(c-u)/r,a=0,p=l;a<=t;a++,p+=f)for(this.points.push([]),n=0,v=u;n<=r;n++,v+=d)y=this.F(p,v),y.unshift(1),this.points[a].push(y);return this},updateCoords:function(){return this._F!==null?this.updateWireframe():this.updateTransform(),this},evalF:function(t,r){var a,n,s=[0,0,0,0];if(this.transformations.length===0||!JXG$1.exists(this.baseElement))return s=this._F(t,r),s;for(a=this.transformations,n=0;n<a.length;n++)a[n].update();for(this===this.baseElement?s=this._F(t,r):s=this.baseElement.evalF(t,r),s.unshift(1),s=Mat.matVecMult(a[0].matrix,s),n=1;n<a.length;n++)s=Mat.matVecMult(a[n].matrix,s);return s.slice(1)},F:function(t,r){return this.evalF(t,r)},X:function(t,r){return this.evalF(t,r)[0]},Y:function(t,r){return this.evalF(t,r)[1]},Z:function(t,r){return this.evalF(t,r)[2]},updateDataArray2D:function(){var t,r,a,n,s=[],o=[],l;if(a=this.points.length,a!==0){for(n=this.points[0].length,t=0;t<a;t++){for(r=0;r<n;r++)l=this.view.project3DTo2D(this.points[t][r]),s.push(l[1]),o.push(l[2]);s.push(NaN),o.push(NaN)}for(r=0;r<n;r++){for(t=0;t<a;t++)l=this.view.project3DTo2D(this.points[t][r]),s.push(l[1]),o.push(l[2]);s.push(NaN),o.push(NaN)}}return{X:s,Y:o}},addTransform:function(t,r){return this.addTransformGeneric(t,r),this},updateTransform:function(){var t,r,a,n,s,o,l;if(this.transformations.length===0||this.baseElement===null||JXG$1.exists(this._F))return this;for(t=this.transformations,a=0;a<t.length;a++)t[a].update();if(this!==this.baseElement&&(this.points=[]),o=this.baseElement.points.length,o>0)for(l=this.baseElement.points[0].length,a=0;a<o;a++)for(this!==this.baseElement&&this.points.push([]),n=0;n<l;n++){for(this===this.baseElement?r=this.points[a][n]:r=this.baseElement.points[a][n],s=0;s<t.length;s++)r=Mat.matVecMult(t[s].matrix,r);this===this.baseElement?this.points[a][n]=r:this.points[a].push(r)}return this},updateDataArray:function(){},update:function(){return this.needsUpdate&&(this.updateDataArray(),this.updateCoords()),this},updateRenderer:function(){return this.needsUpdate=!1,this},projectCoords:function(t,r){return Geometry.projectCoordsToParametric(t,this,2,r)}});JXG$1.createParametricSurface3D=function(t,r,a){var n=r[0],s,o,l,u,h,c,f,d=null,p=null,v;return r.length===3?(d=r[1],p=r[2],s=null,o=null,l=null,u=null):r.length===4?(s=r[1],h=r[2],c=r[3],o=null,l=null,u=null):(o=r[1],l=r[2],u=r[3],h=r[4],c=r[5],s=null),f=JXG$1.copyAttributes(a,t.options,"surface3d"),v=new JXG$1.Surface3D(n,s,o,l,u,h,c,f),f=v.setAttr2D(f),v.element2D=n.create("curve",[[],[]],f),v.element2D.view=n,d!==null&&(v.addTransform(d,p),v.addParents(d)),v.element2D.updateDataArray=function(){var y=v.updateDataArray2D();this.dataX=y.X,this.dataY=y.Y},v.addChild(v.element2D),v.inherits.push(v.element2D),v.element2D.setParents(v),v.element2D.prepareUpdate().update(),t.isSuspendedUpdate||v.element2D.updateVisibility().updateRenderer(),v};JXG$1.registerElement("parametricsurface3d",JXG$1.createParametricSurface3D);JXG$1.createFunctiongraph3D=function(t,r,a){var n=r[0],s=function(f,d){return f},o=function(f,d){return d},l=JXG$1.createFunction(r[1],t,"x, y"),u=r[2],h=r[3],c;return c=n.create("parametricsurface3d",[s,o,l,u,h],a),c.elType="functiongraph3d",c};JXG$1.registerElement("functiongraph3d",JXG$1.createFunctiongraph3D);JXG$1.Parse3D={STL:function(t){var r,a,n,s,o,l,u,h,c,f=[],d=[],p=[];for(l=t.split(`
`),s=l.length,r=0;r<s;r++)if(o=l[r].trim(),o.indexOf("solid")===0)h=-1,d=[],p=[];else if(o.indexOf("endsolid")===0)f.push([d.slice(),p.slice()]);else if(o.indexOf("facet")===0)h++,p.push([]);else{if(o.indexOf("outer loop")===0||o.indexOf("endloop")===0)continue;if(o.indexOf("vertex")===0){for(u=o.split(" ").slice(1).map(v=>parseFloat(v)),c=!1,a=0;a<d.length;a++)if(JXG$1.Math.Geometry.distance(d[a],u,3)<JXG$1.Math.eps){c=!0,n=a;break}c===!1&&(n=d.length,d.push(u)),p[h].push(n)}}return f}};JXG$1.Parse3D;let size=.75,color="#000";JXG$1.themes.mono_thin={board:{showInfobox:!1,showCopyright:!0,defaultAxes:{x:{ticks:{minorTicks:0,majorHeight:10,majorTickEndings:[1,0]}},y:{ticks:{minorTicks:0,majorHeight:10,majorTickEndings:[0,1]}}}},navbar:{strokeColor:"#bbb",fillColor:"none"},elements:{strokeColor:color,highlightStrokeColor:color,fillColor:"none",highlightFillColor:"none",strokeOpacity:.6,highlightStrokeOpacity:1},angle:{strokeColor:color,fillColor:"#aaaaaa55",fillOpacity:.3,highlightFillColor:"#aaaaaa33",highlightFillOpacity:.3,label:{strokeColor:color}},arc:{strokeColor:color,strokeWidth:size,highlightStrokeColor:color,highlightStrokeWidth:size},axis:{},boxplot:{strokeWidth:size,strokeColor:color,fillColor:color,fillOpacity:.2,highlightStrokeWidth:size,highlightStrokeColor:color,highlightFillColor:color,highlightFillOpacity:.1},circle:{strokeWidth:size,highlightStrokeWidth:1.5*size,strokeColor:color,highlightFillColor:"none",highlightStrokeColor:color,center:{size,fillColor:color,strokeColor:color,highlightStrokeWidth:4*size,highlightFillColor:color,highlightStrokeColor:color},point2:{size,fillColor:color,strokeColor:color,highlightStrokeWidth:4*size,highlightFillColor:color,highlightStrokeColor:color}},circumcircle:{strokeWidth:size,highlightStrokeWidth:1.5*size,strokeColor:color,highlightFillColor:"none",highlightStrokeColor:color,center:{size,fillColor:color,strokeColor:color,highlightStrokeWidth:4*size,highlightFillColor:color,highlightStrokeColor:color}},circumcirclearc:{strokeColor:color,strokeWidth:size,highlightStrokeColor:color,highlightStrokeWidth:size},circumcirclesector:{strokeColor:color,fillColor:"#aaaaaa55",fillOpacity:.3,highlightFillColor:"#aaaaaa33",highlightFillOpacity:.3},comb:{strokeColor:color,strokeWidth:size},conic:{strokeWidth:size,highlightStrokeWidth:1.5*size,strokeColor:color,highlightStrokeColor:color,fillColor:"none",highlightFillColor:"none"},curve:{strokeColor:color,strokeWidth:size,highlightStrokeColor:color,highlightStrokeWidth:size},grid:{strokeWidth:size},hatch:{strokeColor:color,strokeWidth:size},incircle:{strokeWidth:size,highlightStrokeWidth:1.5*size,strokeColor:color,highlightFillColor:"none",highlightStrokeColor:color,center:{size,fillColor:color,strokeColor:color,highlightStrokeWidth:4*size,highlightFillColor:color,highlightStrokeColor:color}},inequality:{fillColor:"#aaaaaa55",fillOpacity:.2},integral:{fillColor:"#aaaaaa55",highlightFillColor:"#aaaaa33",fillOpacity:.3,highlightFillOpacity:.3,curveLeft:{color},baseLeft:{color},curveRight:{color},baseRight:{color}},label:{strokeColor:color},line:{strokeColor:color,strokeWidth:size,highlightStrokeColor:color,highlightStrokeWidth:size,point1:{size,fillColor:color,strokeColor:color,highlightStrokeWidth:4*size,highlightFillColor:color,highlightStrokeColor:color},point2:{size,fillColor:color,strokeColor:color,highlightStrokeWidth:4*size,highlightFillColor:color,highlightStrokeColor:color}},normal:{strokeColor:color},parallel:{strokeColor:color},perpendicular:{strokeColor:color},perpendicularsegment:{strokeColor:color},point:{size,fillColor:color,strokeColor:color,highlightStrokeWidth:4*size,highlightFillColor:color,highlightStrokeColor:color},polygon:{fillColor:"#aaaaaa55",highlightFillColor:"#aaaaaa33",fillOpacity:.3,highlightFillOpacity:.3,vertices:{size,fillColor:color,strokeColor:color,highlightStrokeWidth:4*size,highlightFillColor:color,highlightStrokeColor:color},borders:{strokeColor:color,strokeWidth:size,highlightStrokeColor:color,highlightStrokeWidth:size}},sector:{strokeColor:color,fillColor:"#aaaaaa55",fillOpacity:.3,highlightFillColor:"#aaaaaa33",highlightFillOpacity:.3},semicircle:{center:{size,fillColor:color,strokeColor:color,highlightStrokeWidth:4*size,highlightFillColor:color,highlightStrokeColor:color}},slider:{size,fillColor:color,strokeColor:color,highlightStrokeWidth:4*size,highlightFillColor:color,highlightStrokeColor:color,baseline:{strokeWidth:size,strokeColor:color,highlightStrokeColor:color},label:{strokeColor:color},highline:{strokeWidth:3*size,name:"",strokeColor:color,highlightStrokeColor:color},ticks:{strokeColor:color}},slopefield:{strokeWidth:.75*size,highlightStrokeWidth:size,highlightStrokeColor:color,highlightStrokeOpacity:.8},tapemeasure:{strokeColor:color,strokeWidth:size,highlightStrokeColor:color,highlightStrokeWidth:size,point1:{size,fillColor:color,strokeColor:color,highlightStrokeWidth:4*size,highlightFillColor:color,highlightStrokeColor:color},point2:{size,fillColor:color,strokeColor:color,highlightStrokeWidth:4*size,highlightFillColor:color,highlightStrokeColor:color},ticks:{strokeWidth:size}},text:{strokeColor:color},tracecurve:{strokeColor:color},turtle:{strokeWidth:size,strokeColor:color,arrow:{strokeWidth:2*size,strokeColor:"#aaaaaa55"}},vectorfield:{strokeWidth:.75*size,highlightStrokeWidth:size,highlightStrokeColor:color,highlightStrokeOpacity:.8}};JXG$1.COORDS_BY_SCREEN;JXG$1.COORDS_BY_USER;JXG$1.Dump;JXG$1.Expect;JXG$1.JSXGraph;JXG$1.Math;JXG$1.Options;JXG$1.boards;JXG$1.elements;JXG$1.palette;JXG$1.paletteWong;JXG$1.Board;JXG$1.Chart;JXG$1.Circle;JXG$1.Complex;JXG$1.Composition;JXG$1.Coords;JXG$1.CoordsElement;JXG$1.Curve;JXG$1.GeometryElement;JXG$1.Group;JXG$1.Image;JXG$1.JessieCode;JXG$1.PrefixParser;JXG$1.Line;JXG$1.Point;JXG$1.Polygon;JXG$1.Text;JXG$1.Ticks;JXG$1.Transformation;JXG$1.Turtle;JXG$1.View3D;JXG$1.LMS2rgb;JXG$1.addEvent;JXG$1.autoDigits;JXG$1.autoHighlight;JXG$1.bind;JXG$1.capitalize;JXG$1.clearVisPropOld;JXG$1.clone;JXG$1.cloneAndCopy;JXG$1.cmpArrays;JXG$1.coordsArrayToMatrix;JXG$1.copyAttributes;JXG$1.createEvalFunction;JXG$1.createFunction;JXG$1.createHTMLSlider;JXG$1.darkenColor;JXG$1.debug;JXG$1.debugInt;JXG$1.debugLine;JXG$1.debugWST;JXG$1.deepCopy;JXG$1.def;JXG$1.deprecated;JXG$1.eliminateDuplicates;JXG$1.escapeHTML;JXG$1.evalSlider;JXG$1.evaluate;JXG$1.filterElements;JXG$1.getBoardByContainerId;JXG$1.getCSSTransformMatrix;JXG$1.getCSSTransform;JXG$1.getDimensions;JXG$1.getOffset;JXG$1.getPosition;JXG$1.getProp;JXG$1.hex2rgb;JXG$1.hsv2rgb;JXG$1.isAndroid;JXG$1.isApple;JXG$1.isArray;JXG$1.isDesktop;JXG$1.isInArray;JXG$1.isInObject;JXG$1.isMetroApp;JXG$1.isMobile;JXG$1.isMozilla;JXG$1.isBoard;JXG$1.isName;JXG$1.isNode;JXG$1.isNumber;JXG$1.isObject;JXG$1.isPoint;JXG$1.isPoint3D;JXG$1.isPointType;JXG$1.isPointType3D;JXG$1.isString;JXG$1.isTouchDevice;JXG$1.isTransformationOrArray;JXG$1.isWebWorker;JXG$1.isWebkitAndroid;JXG$1.isWebkitApple;JXG$1.keys;JXG$1.lightenColor;JXG$1.merge;JXG$1.normalizePointFace;JXG$1.providePoints;JXG$1.registerElement;JXG$1.registerReader;JXG$1.removeAllEvents;JXG$1.removeElementFromArray;JXG$1.removeEvent;JXG$1.rgb2LMS;JXG$1.rgb2bw;JXG$1.rgb2cb;JXG$1.rgb2css;JXG$1.rgb2hex;JXG$1.rgb2hsv;JXG$1.rgbParser;JXG$1.rgba2rgbo;JXG$1.rgbo2rgba;JXG$1.sanitizeHTML;JXG$1.shortcut;JXG$1.str2Bool;JXG$1.supportsCanvas;JXG$1.supportsPointerEvents;JXG$1.supportsSVG;JXG$1.supportsVML;JXG$1.swap;JXG$1.timedChunk;JXG$1.toFixed;JXG$1.toFullscreen;JXG$1.toJSON;JXG$1.trim;JXG$1.trimNumber;JXG$1.truncate;JXG$1.unescapeHTML;JXG$1.uniqueArray;JXG$1.useBlackWhiteOptions;JXG$1.useStandardOptions;JXG$1.warn;JXG$1.isBrowser?window.JXG=JXG$1:JXG$1.isWebWorker()&&(self.JXG=JXG$1);function ConvergenceChart({convergenceData:t,enabledMethods:r,isDarkMode:a,degree:n}){const s=reactExports.useRef(null),o=reactExports.useRef(null);return reactExports.useEffect(()=>{if(!s.current||!t)return;o.current&&(JXG$1.JSXGraph.freeBoard(o.current),o.current=null);const l=a?"#9ca3af":"#374151",u=a?"#d1d5db":"#4b5563",h=-17,c=2,f=JXG$1.JSXGraph.initBoard(s.current,{boundingbox:[-2,c+1.5,11.5,h-1.5],axis:!1,showNavigation:!1,showCopyright:!1,pan:{enabled:!1},zoom:{enabled:!1},grid:!1});o.current=f;for(let p=1;p<=10;p++)f.create("segment",[[p,h],[p,c]],{strokeColor:a?"#374151":"#e5e7eb",strokeWidth:1,fixed:!0,highlight:!1}),f.create("text",[p,h-.5,`${p}`],{fontSize:14,color:l,fixed:!0,anchorX:"middle"});for(let p=Math.ceil(h);p<=Math.floor(c);p++){const v=p===0;f.create("segment",[[.5,p],[10.5,p]],{strokeColor:v?a?"#9ca3af":"#6b7280":a?"#374151":"#e5e7eb",strokeWidth:v?2.5:1,fixed:!0,highlight:!1}),f.create("text",[-.3,p,`10<sup>${p}</sup>`],{fontSize:12,color:l,fixed:!0,anchorX:"right",display:"html"})}f.create("segment",[[.5,h],[.5,c]],{strokeColor:a?"#9ca3af":"#374151",strokeWidth:2,fixed:!0,highlight:!1}),f.create("segment",[[.5,h],[10.5,h]],{strokeColor:a?"#9ca3af":"#374151",strokeWidth:2,fixed:!0,highlight:!1}),f.create("text",[-1.3,(h+c)/2,"Error"],{fontSize:15,color:u,fixed:!0,anchorX:"middle",rotate:90}),f.create("text",[5.5,h-1.3,"Number of points (n)"],{fontSize:15,color:u,fixed:!0,anchorX:"middle"}),n>=1&&n<=10&&(f.create("polygon",[[n-.4,h],[n+.4,h],[n+.4,c],[n-.4,c]],{fillColor:"#6366f1",fillOpacity:a?.12:.08,strokeWidth:0,fixed:!0,highlight:!1,vertices:{visible:!1,fixed:!0},hasInnerPoints:!1}),f.create("text",[n,c+.5,`n=${n}`],{fontSize:12,color:a?"#a5b4fc":"#6366f1",fixed:!0,anchorX:"middle",fontWeight:"bold"}));for(const p of r){const v=QUADRATURE_METHODS[p],y=t.data[p];if(!y)continue;const b=y.filter(N=>N.error>0).map(N=>[N.n,Math.log10(N.error)]);if(b.length===0)continue;if(b.length>=2){const N=b.map(C=>C[0]),M=b.map(C=>C[1]);f.create("curve",[N,M],{strokeColor:v.color,strokeWidth:2.5,highlight:!1})}for(const[N,M]of b)f.create("point",[N,M],{size:3,color:v.color,name:"",fixed:!0,highlight:!1});const _=y.filter(N=>N.error===0);for(const N of _)f.create("point",[N.n,h+.3],{size:4,color:v.color,name:"",fixed:!0,highlight:!1,face:"diamond"})}if(n>=1&&n<=10){let p=0;for(const v of r){const y=QUADRATURE_METHODS[v],b=t.data[v];if(!b)continue;const _=b.find(N=>N.n===n);if(_)if(_.error>0){const N=Math.log10(_.error);f.create("point",[n,N],{size:5,color:y.color,name:"",fixed:!0,highlight:!1,strokeColor:a?"#e5e7eb":"#ffffff",strokeWidth:2}),f.create("text",[n+.45,N+.3+p,_.error.toExponential(1)],{fontSize:10,color:y.color,fixed:!0,anchorX:"left",fontWeight:"bold"}),p+=.8}else f.create("point",[n,h+.3],{size:6,color:y.color,name:"",fixed:!0,highlight:!1,face:"diamond",strokeColor:a?"#e5e7eb":"#ffffff",strokeWidth:2})}}let d=h+.5+r.length*.8;for(const p of r){const v=QUADRATURE_METHODS[p];f.create("segment",[[1,d],[1.8,d]],{strokeColor:v.color,strokeWidth:2.5,fixed:!0,highlight:!1}),f.create("point",[1.4,d],{size:2,color:v.color,name:"",fixed:!0,highlight:!1}),f.create("text",[2,d,v.shortName],{fontSize:11,color:v.color,fixed:!0,anchorX:"left"}),d-=.8}return()=>{o.current&&(JXG$1.JSXGraph.freeBoard(o.current),o.current=null)}},[t,r,a,n]),t?jsxRuntimeExports.jsx("div",{ref:s,className:"jxgbox w-full",style:{aspectRatio:"10/9",minHeight:"400px"}}):jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center h-64 text-gray-500 dark:text-gray-400",children:"Enter a valid function to see convergence data"})}function useDarkMode(){const t=()=>{if(typeof window<"u"){const n=localStorage.getItem("darkMode");return n!==null?n==="true":window.matchMedia("(prefers-color-scheme: dark)").matches}return!1},[r,a]=reactExports.useState(t);return reactExports.useEffect(()=>{const n=new MutationObserver(s=>{s.forEach(o=>{o.attributeName==="class"&&a(document.documentElement.classList.contains("dark"))})});return n.observe(document.documentElement,{attributes:!0}),()=>n.disconnect()},[]),r}function Graph({fn:t,intervalA:r,intervalB:a,allResults:n,enabledMethods:s,onIntervalChange:o,isValid:l,degree:u,convergenceData:h,randomSeed:c,onRandomSeedChange:f,onReshuffle:d,functionValidation:p}){const v=reactExports.useRef(null),y=reactExports.useRef(null),[b,_]=reactExports.useState("original"),N=useDarkMode(),M=reactExports.useRef(o);M.current=o;const C=reactExports.useRef(null),$=reactExports.useMemo(()=>{const B=[{id:"original",label:"Original Function"}];for(const F of s){const U=QUADRATURE_METHODS[F];B.push({id:F,label:U.shortName})}return B.push({id:"convergence",label:"Convergence"}),B},[s]);reactExports.useEffect(()=>{$.find(B=>B.id===b)||_("original")},[$,b]);const w=p&&!p.valid,A=reactExports.useCallback(()=>{const B=Math.max(1,(a-r)*.2);let F=r-B,U=a+B,q=-1,ee=1;if(t){const Z=(a-r)/100;for(let j=0;j<=100;j++){const V=r+j*Z,L=t(V);isFinite(L)&&(L<q&&(q=L),L>ee&&(ee=L))}const ne=Math.max(.5,(ee-q)*.2);q-=ne,ee+=ne}const z=U-F,Y=ee-q;if(z>Y){const K=(z-Y)/2;q-=K,ee+=K}else if(Y>z){const K=(Y-z)/2;F-=K,U+=K}return[F,ee,U,q]},[t,r,a]),X=reactExports.useCallback(()=>{let B=-1.5,F=1.5,U=-1,q=1;if(t){const Y=(a-r)/2;for(let Z=0;Z<=100;Z++){const ne=-1+2*Z/100,j=Y*ne+(r+a)/2,V=t(j)*Y;isFinite(V)&&(V<U&&(U=V),V>q&&(q=V))}const K=Math.max(.5,(q-U)*.2);U-=K,q+=K}const ee=F-B,z=q-U;if(ee>z){const Y=(ee-z)/2;U-=Y,q+=Y}else if(z>ee){const Y=(z-ee)/2;B-=Y,F+=Y}return[B,q,F,U]},[t,r,a]);reactExports.useEffect(()=>{if(!v.current||b==="convergence")return;y.current&&(JXG$1.JSXGraph.freeBoard(y.current),y.current=null);const B=b==="original"?A():X(),F=N?"#9ca3af":"#374151",U=N?"#e5e7eb":"#374151",q=JXG$1.JSXGraph.initBoard(v.current,{boundingbox:B,axis:!0,showNavigation:!1,showCopyright:!1,pan:{enabled:!0,needTwoFingers:!1,needShift:!1},zoom:{wheel:!0,needShift:!1,min:.1,max:10},grid:!0,defaultAxes:{x:{strokeColor:F,ticks:{strokeColor:F,label:{strokeColor:U,fontSize:14}}},y:{strokeColor:F,ticks:{strokeColor:F,label:{strokeColor:U,fontSize:14}}}}});return y.current=q,b==="original"?O(q):G(q,b),()=>{C.current&&clearTimeout(C.current),y.current&&(JXG$1.JSXGraph.freeBoard(y.current),y.current=null)}},[b,t,l,r,a,u,n,N,s,w]);const O=B=>{if(!t)return;B.create("functiongraph",[Z=>{const ne=t(Z);return isFinite(ne)?ne:NaN}],{strokeColor:"#6366f1",strokeWidth:2,highlight:!1});const F=[],U=200;for(let Z=0;Z<=U;Z++){const ne=r+(a-r)*Z/U,j=t(ne);isFinite(j)&&F.push([ne,j])}F.push([a,0]),F.push([r,0]),F.length>2&&B.create("polygon",F,{fillColor:"#6366f1",fillOpacity:.2,strokeColor:"#6366f1",strokeWidth:0,highlight:!1,fixed:!0,vertices:{visible:!1,fixed:!0},hasInnerPoints:!1});const q=N?"rgba(75, 85, 99, 0.95)":"rgba(255, 255, 255, 0.95)",ee=B.defaultAxes.x,z=B.create("glider",[r,0,ee],{name:"a",size:8,color:"#3b82f6",strokeColor:"#1d4ed8",strokeWidth:2,label:{offset:[0,-25],fontSize:18,color:"#1d4ed8",fontWeight:"bold",cssStyle:`font-weight: bold; background-color: ${q}; padding: 2px 6px; border-radius: 4px; border: 1px solid #3b82f6;`}}),Y=B.create("glider",[a,0,ee],{name:"b",size:8,color:"#ef4444",strokeColor:"#dc2626",strokeWidth:2,label:{offset:[0,-25],fontSize:18,color:"#dc2626",fontWeight:"bold",cssStyle:`font-weight: bold; background-color: ${q}; padding: 2px 6px; border-radius: 4px; border: 1px solid #ef4444;`}}),K=()=>{C.current&&clearTimeout(C.current),C.current=setTimeout(()=>{const Z=z.X(),ne=Y.X();Z<ne-.05&&M.current&&M.current(Z,ne)},150)};z.on("drag",K),Y.on("drag",K)},G=(B,F)=>{if(!t||!l)return;const U=QUADRATURE_METHODS[F],q=n?.[F];if(!U||!q)return;const ee=U.color,z=(a-r)/2,Y=Z=>{const ne=z*Z+(r+a)/2,j=t(ne);return isFinite(j)?j*z:NaN};B.create("line",[[-1,0],[-1,1]],{strokeColor:ee,strokeWidth:3,fixed:!0,highlight:!1}),B.create("line",[[1,0],[1,1]],{strokeColor:ee,strokeWidth:3,fixed:!0,highlight:!1}),B.create("text",[-1.05,.1,"-1"],{fontSize:14,color:ee,fixed:!0,anchorX:"right"}),B.create("text",[1.05,.1,"1"],{fontSize:14,color:ee,fixed:!0,anchorX:"left"}),B.create("functiongraph",[Y],{strokeColor:ee,strokeWidth:2,highlight:!1});const K=q.details;if(K&&K.length>0){const Z=ee;if(F==="equallySpaced"&&K.length>1){for(let ne=0;ne<K.length-1;ne++){const j=K[ne].originalNode,V=K[ne+1].originalNode,L=Y(j),ae=Y(V);if(!isFinite(L)||!isFinite(ae))continue;const W=ne%2===0?.5:.35;B.create("polygon",[[j,0],[V,0],[V,ae],[j,L]],{fillColor:Z,fillOpacity:W,strokeColor:Z,strokeWidth:1,fixed:!0,highlight:!1,vertices:{visible:!1,fixed:!0},hasInnerPoints:!1})}K.forEach((ne,j)=>{const V=ne.originalNode,L=Y(V);isFinite(L)&&(B.create("point",[V,0],{size:4,color:N?"#e5e7eb":"#1f2937",name:"",fixed:!0,highlight:!0,showInfobox:!1}),B.create("point",[V,L],{size:3,color:Z,name:"",fixed:!0,highlight:!0,showInfobox:!0,infoboxDigits:4,label:{visible:!1,offset:[10,10],fontSize:13,strokeColor:N?"#e5e7eb":"#1f2937",useMathJax:!1}}))})}else{let ne=-1;K.forEach((j,V)=>{const L=j.originalNode,ae=j.originalWeight,W=Y(L);if(!isFinite(W)||!isFinite(ae))return;const ve=ne,de=ne+ae,se=V%2===0?.5:.35;B.create("polygon",[[ve,0],[de,0],[de,W],[ve,W]],{fillColor:Z,fillOpacity:se,strokeColor:Z,strokeWidth:1,fixed:!0,highlight:!1,vertices:{visible:!1,fixed:!0},hasInnerPoints:!1}),B.create("point",[L,0],{size:4,color:N?"#e5e7eb":"#1f2937",name:"",fixed:!0,highlight:!0,showInfobox:!1}),B.create("point",[L,W],{size:3,color:Z,name:"",fixed:!0,highlight:!0,showInfobox:!0,infoboxDigits:4,label:{visible:!1,offset:[10,10],fontSize:13,strokeColor:N?"#e5e7eb":"#1f2937",useMathJax:!1}}),ne=de})}}},R=()=>{if(b==="original")return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("span",{className:"inline-flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{className:"w-3 h-3 rounded-full bg-blue-500"}),jsxRuntimeExports.jsx("span",{children:"a (drag to adjust)"})]}),jsxRuntimeExports.jsxs("span",{className:"inline-flex items-center gap-2 ml-4",children:[jsxRuntimeExports.jsx("span",{className:"w-3 h-3 rounded-full bg-red-500"}),jsxRuntimeExports.jsx("span",{children:"b (drag to adjust)"})]}),jsxRuntimeExports.jsx("span",{className:"ml-4 text-gray-400 dark:text-gray-500",children:"| Scroll to zoom, drag to pan"})]});if(b==="convergence")return jsxRuntimeExports.jsx("span",{children:"Error vs number of quadrature points (log scale) for all enabled methods"});const B=QUADRATURE_METHODS[b];return B?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("span",{className:"inline-flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{className:"w-3 h-3 rounded-full",style:{backgroundColor:B.color}}),jsxRuntimeExports.jsx("span",{children:B.name})]}),jsxRuntimeExports.jsxs("span",{className:"ml-4 text-gray-400 dark:text-gray-500",children:["| Transformed to [-1, 1]  ",b==="equallySpaced"?"trapezoids show composite trapezoid rule":"rectangles show weighted contributions (widths = weights)"]})]}):null};return jsxRuntimeExports.jsxs("div",{className:"w-full bg-white dark:bg-gray-800/50 rounded-xl border border-gray-200 dark:border-gray-700 overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:"flex border-b border-gray-200 dark:border-gray-700 bg-gray-50/50 dark:bg-gray-800/50 overflow-x-auto",children:$.map(B=>{const F=QUADRATURE_METHODS[B.id],U=b===B.id,q=F?F.color:void 0;return jsxRuntimeExports.jsxs("button",{onClick:()=>_(B.id),className:`flex-shrink-0 px-4 py-2.5 text-sm font-medium transition-all whitespace-nowrap ${U?"bg-white dark:bg-gray-800 border-b-2":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"}`,style:U?{color:q||(N?"#818cf8":"#4f46e5"),borderBottomColor:q||(N?"#818cf8":"#4f46e5")}:void 0,children:[F&&jsxRuntimeExports.jsx("span",{className:"inline-block w-2 h-2 rounded-full mr-2",style:{backgroundColor:F.color}}),B.label]},B.id)})}),b==="convergence"?w?jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center",style:{aspectRatio:"10/9",minHeight:"400px"},children:jsxRuntimeExports.jsxs("div",{className:"text-center px-8 py-6 max-w-md",children:[jsxRuntimeExports.jsx("div",{className:"text-amber-500 dark:text-amber-400 mb-3",children:jsxRuntimeExports.jsx("svg",{className:"w-12 h-12 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),jsxRuntimeExports.jsx("p",{className:"text-gray-700 dark:text-gray-300 font-medium mb-1",children:"Cannot compute convergence"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:p?.message})]})}):jsxRuntimeExports.jsx(ConvergenceChart,{convergenceData:h,enabledMethods:s,isDarkMode:N,degree:u}):jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("div",{ref:v,id:"jxgbox",className:"jxgbox w-full",style:{aspectRatio:"10/9",minHeight:"400px"}}),w&&b!=="original"&&jsxRuntimeExports.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm z-10",children:jsxRuntimeExports.jsxs("div",{className:"text-center px-8 py-6 max-w-md",children:[jsxRuntimeExports.jsx("div",{className:"text-amber-500 dark:text-amber-400 mb-3",children:jsxRuntimeExports.jsx("svg",{className:"w-12 h-12 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),jsxRuntimeExports.jsx("p",{className:"text-gray-700 dark:text-gray-300 font-medium mb-1",children:"Cannot compute quadrature"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:p?.message})]})}),b==="random"&&!w&&jsxRuntimeExports.jsxs("div",{className:"absolute top-3 right-3 bg-white/90 dark:bg-gray-800/90 backdrop-blur-sm rounded-lg border border-gray-200 dark:border-gray-700 p-3 shadow-lg z-10 min-w-[160px]",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[jsxRuntimeExports.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Seed"}),jsxRuntimeExports.jsx("input",{type:"number",step:"1",value:c,onChange:B=>{const F=parseInt(B.target.value);isNaN(F)||f(F)},className:"w-16 px-2 py-1 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded text-xs font-mono text-center"})]}),jsxRuntimeExports.jsxs("button",{onClick:d,className:"w-full flex items-center justify-center gap-1.5 px-3 py-1.5 bg-red-50 dark:bg-red-900/30 text-red-600 dark:text-red-400 border border-red-200 dark:border-red-800 rounded-md hover:bg-red-100 dark:hover:bg-red-900/50 transition-colors text-xs font-medium",children:[jsxRuntimeExports.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Reshuffle"]})]})]}),jsxRuntimeExports.jsx("div",{className:"px-4 py-2.5 bg-gray-50/80 dark:bg-gray-800/80 border-t border-gray-200 dark:border-gray-700 text-sm text-gray-600 dark:text-gray-400",children:R()})]})}class SourceLocation{constructor(r,a,n){this.lexer=void 0,this.start=void 0,this.end=void 0,this.lexer=r,this.start=a,this.end=n}static range(r,a){return a?!r||!r.loc||!a.loc||r.loc.lexer!==a.loc.lexer?null:new SourceLocation(r.loc.lexer,r.loc.start,a.loc.end):r&&r.loc}}class Token{constructor(r,a){this.text=void 0,this.loc=void 0,this.noexpand=void 0,this.treatAsRelax=void 0,this.text=r,this.loc=a}range(r,a){return new Token(a,SourceLocation.range(this,r))}}class ParseError{constructor(r,a){this.name=void 0,this.position=void 0,this.length=void 0,this.rawMessage=void 0;var n="KaTeX parse error: "+r,s,o,l=a&&a.loc;if(l&&l.start<=l.end){var u=l.lexer.input;s=l.start,o=l.end,s===u.length?n+=" at end of input: ":n+=" at position "+(s+1)+": ";var h=u.slice(s,o).replace(/[^]/g,"$&"),c;s>15?c=""+u.slice(s-15,s):c=u.slice(0,s);var f;o+15<u.length?f=u.slice(o,o+15)+"":f=u.slice(o),n+=c+h+f}var d=new Error(n);return d.name="ParseError",d.__proto__=ParseError.prototype,d.position=s,s!=null&&o!=null&&(d.length=o-s),d.rawMessage=r,d}}ParseError.prototype.__proto__=Error.prototype;var deflt=function t(r,a){return r===void 0?a:r},uppercase=/([A-Z])/g,hyphenate=function t(r){return r.replace(uppercase,"-$1").toLowerCase()},ESCAPE_LOOKUP={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},ESCAPE_REGEX=/[&><"']/g;function escape(t){return String(t).replace(ESCAPE_REGEX,r=>ESCAPE_LOOKUP[r])}var getBaseElem=function t(r){return r.type==="ordgroup"||r.type==="color"?r.body.length===1?t(r.body[0]):r:r.type==="font"?t(r.body):r},isCharacterBox=function t(r){var a=getBaseElem(r);return a.type==="mathord"||a.type==="textord"||a.type==="atom"},assert=function t(r){if(!r)throw new Error("Expected non-null, but got "+String(r));return r},protocolFromUrl=function t(r){var a=/^[\x00-\x20]*([^\\/#?]*?)(:|&#0*58|&#x0*3a|&colon)/i.exec(r);return a?a[2]!==":"||!/^[a-zA-Z][a-zA-Z0-9+\-.]*$/.test(a[1])?null:a[1].toLowerCase():"_relative"},utils={deflt,escape,hyphenate,getBaseElem,isCharacterBox,protocolFromUrl},SETTINGS_SCHEMA={displayMode:{type:"boolean",description:"Render math in display mode, which puts the math in display style (so \\int and \\sum are large, for example), and centers the math on the page on its own line.",cli:"-d, --display-mode"},output:{type:{enum:["htmlAndMathml","html","mathml"]},description:"Determines the markup language of the output.",cli:"-F, --format <type>"},leqno:{type:"boolean",description:"Render display math in leqno style (left-justified tags)."},fleqn:{type:"boolean",description:"Render display math flush left."},throwOnError:{type:"boolean",default:!0,cli:"-t, --no-throw-on-error",cliDescription:"Render errors (in the color given by --error-color) instead of throwing a ParseError exception when encountering an error."},errorColor:{type:"string",default:"#cc0000",cli:"-c, --error-color <color>",cliDescription:"A color string given in the format 'rgb' or 'rrggbb' (no #). This option determines the color of errors rendered by the -t option.",cliProcessor:t=>"#"+t},macros:{type:"object",cli:"-m, --macro <def>",cliDescription:"Define custom macro of the form '\\foo:expansion' (use multiple -m arguments for multiple macros).",cliDefault:[],cliProcessor:(t,r)=>(r.push(t),r)},minRuleThickness:{type:"number",description:"Specifies a minimum thickness, in ems, for fraction lines, `\\sqrt` top lines, `{array}` vertical lines, `\\hline`, `\\hdashline`, `\\underline`, `\\overline`, and the borders of `\\fbox`, `\\boxed`, and `\\fcolorbox`.",processor:t=>Math.max(0,t),cli:"--min-rule-thickness <size>",cliProcessor:parseFloat},colorIsTextColor:{type:"boolean",description:"Makes \\color behave like LaTeX's 2-argument \\textcolor, instead of LaTeX's one-argument \\color mode change.",cli:"-b, --color-is-text-color"},strict:{type:[{enum:["warn","ignore","error"]},"boolean","function"],description:"Turn on strict / LaTeX faithfulness mode, which throws an error if the input uses features that are not supported by LaTeX.",cli:"-S, --strict",cliDefault:!1},trust:{type:["boolean","function"],description:"Trust the input, enabling all HTML features such as \\url.",cli:"-T, --trust"},maxSize:{type:"number",default:1/0,description:"If non-zero, all user-specified sizes, e.g. in \\rule{500em}{500em}, will be capped to maxSize ems. Otherwise, elements and spaces can be arbitrarily large",processor:t=>Math.max(0,t),cli:"-s, --max-size <n>",cliProcessor:parseInt},maxExpand:{type:"number",default:1e3,description:"Limit the number of macro expansions to the specified number, to prevent e.g. infinite macro loops. If set to Infinity, the macro expander will try to fully expand as in LaTeX.",processor:t=>Math.max(0,t),cli:"-e, --max-expand <n>",cliProcessor:t=>t==="Infinity"?1/0:parseInt(t)},globalGroup:{type:"boolean",cli:!1}};function getDefaultValue(t){if(t.default)return t.default;var r=t.type,a=Array.isArray(r)?r[0]:r;if(typeof a!="string")return a.enum[0];switch(a){case"boolean":return!1;case"string":return"";case"number":return 0;case"object":return{}}}class Settings{constructor(r){this.displayMode=void 0,this.output=void 0,this.leqno=void 0,this.fleqn=void 0,this.throwOnError=void 0,this.errorColor=void 0,this.macros=void 0,this.minRuleThickness=void 0,this.colorIsTextColor=void 0,this.strict=void 0,this.trust=void 0,this.maxSize=void 0,this.maxExpand=void 0,this.globalGroup=void 0,r=r||{};for(var a in SETTINGS_SCHEMA)if(SETTINGS_SCHEMA.hasOwnProperty(a)){var n=SETTINGS_SCHEMA[a];this[a]=r[a]!==void 0?n.processor?n.processor(r[a]):r[a]:getDefaultValue(n)}}reportNonstrict(r,a,n){var s=this.strict;if(typeof s=="function"&&(s=s(r,a,n)),!(!s||s==="ignore")){if(s===!0||s==="error")throw new ParseError("LaTeX-incompatible input and strict mode is set to 'error': "+(a+" ["+r+"]"),n);s==="warn"?typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(a+" ["+r+"]")):typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+s+"': "+a+" ["+r+"]"))}}useStrictBehavior(r,a,n){var s=this.strict;if(typeof s=="function")try{s=s(r,a,n)}catch{s="error"}return!s||s==="ignore"?!1:s===!0||s==="error"?!0:s==="warn"?(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(a+" ["+r+"]")),!1):(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+s+"': "+a+" ["+r+"]")),!1)}isTrusted(r){if(r.url&&!r.protocol){var a=utils.protocolFromUrl(r.url);if(a==null)return!1;r.protocol=a}var n=typeof this.trust=="function"?this.trust(r):this.trust;return!!n}}class Style{constructor(r,a,n){this.id=void 0,this.size=void 0,this.cramped=void 0,this.id=r,this.size=a,this.cramped=n}sup(){return styles[sup[this.id]]}sub(){return styles[sub[this.id]]}fracNum(){return styles[fracNum[this.id]]}fracDen(){return styles[fracDen[this.id]]}cramp(){return styles[cramp[this.id]]}text(){return styles[text$1[this.id]]}isTight(){return this.size>=2}}var D=0,Dc=1,T=2,Tc=3,S=4,Sc=5,SS=6,SSc=7,styles=[new Style(D,0,!1),new Style(Dc,0,!0),new Style(T,1,!1),new Style(Tc,1,!0),new Style(S,2,!1),new Style(Sc,2,!0),new Style(SS,3,!1),new Style(SSc,3,!0)],sup=[S,Sc,S,Sc,SS,SSc,SS,SSc],sub=[Sc,Sc,Sc,Sc,SSc,SSc,SSc,SSc],fracNum=[T,Tc,S,Sc,SS,SSc,SS,SSc],fracDen=[Tc,Tc,Sc,Sc,SSc,SSc,SSc,SSc],cramp=[Dc,Dc,Tc,Tc,Sc,Sc,SSc,SSc],text$1=[D,Dc,T,Tc,T,Tc,T,Tc],Style$1={DISPLAY:styles[D],TEXT:styles[T],SCRIPT:styles[S],SCRIPTSCRIPT:styles[SS]},scriptData=[{name:"latin",blocks:[[256,591],[768,879]]},{name:"cyrillic",blocks:[[1024,1279]]},{name:"armenian",blocks:[[1328,1423]]},{name:"brahmic",blocks:[[2304,4255]]},{name:"georgian",blocks:[[4256,4351]]},{name:"cjk",blocks:[[12288,12543],[19968,40879],[65280,65376]]},{name:"hangul",blocks:[[44032,55215]]}];function scriptFromCodepoint(t){for(var r=0;r<scriptData.length;r++)for(var a=scriptData[r],n=0;n<a.blocks.length;n++){var s=a.blocks[n];if(t>=s[0]&&t<=s[1])return a.name}return null}var allBlocks=[];scriptData.forEach(t=>t.blocks.forEach(r=>allBlocks.push(...r)));function supportedCodepoint(t){for(var r=0;r<allBlocks.length;r+=2)if(t>=allBlocks[r]&&t<=allBlocks[r+1])return!0;return!1}var hLinePad=80,sqrtMain=function t(r,a){return"M95,"+(622+r+a)+`
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l`+r/2.075+" -"+r+`
c5.3,-9.3,12,-14,20,-14
H400000v`+(40+r)+`H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M`+(834+r)+" "+a+"h400000v"+(40+r)+"h-400000z"},sqrtSize1=function t(r,a){return"M263,"+(601+r+a)+`c0.7,0,18,39.7,52,119
c34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120
c340,-704.7,510.7,-1060.3,512,-1067
l`+r/2.084+" -"+r+`
c4.7,-7.3,11,-11,19,-11
H40000v`+(40+r)+`H1012.3
s-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232
c-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1
s-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26
c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z
M`+(1001+r)+" "+a+"h400000v"+(40+r)+"h-400000z"},sqrtSize2=function t(r,a){return"M983 "+(10+r+a)+`
l`+r/3.13+" -"+r+`
c4,-6.7,10,-10,18,-10 H400000v`+(40+r)+`
H1013.1s-83.4,268,-264.1,840c-180.7,572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7
s-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744
c-10,12,-21,25,-33,39s-32,39,-32,39c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30
c26.7,-32.7,52,-63,76,-91s52,-60,52,-60s208,722,208,722
c56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,-658.5
c53.7,-170.3,84.5,-266.8,92.5,-289.5z
M`+(1001+r)+" "+a+"h400000v"+(40+r)+"h-400000z"},sqrtSize3=function t(r,a){return"M424,"+(2398+r+a)+`
c-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514
c0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20
s-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121
s209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081
l`+r/4.223+" -"+r+`c4,-6.7,10,-10,18,-10 H400000
v`+(40+r)+`H1014.6
s-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185
c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2z M`+(1001+r)+" "+a+`
h400000v`+(40+r)+"h-400000z"},sqrtSize4=function t(r,a){return"M473,"+(2713+r+a)+`
c339.3,-1799.3,509.3,-2700,510,-2702 l`+r/5.298+" -"+r+`
c3.3,-7.3,9.3,-11,18,-11 H400000v`+(40+r)+`H1017.7
s-90.5,478,-276.2,1466c-185.7,988,-279.5,1483,-281.5,1485c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2c0,-1.3,-5.3,-32,-16,-92c-50.7,-293.3,-119.7,-693.3,-207,-1200
c0,-1.3,-5.3,8.7,-16,30c-10.7,21.3,-21.3,42.7,-32,64s-16,33,-16,33s-26,-26,-26,-26
s76,-153,76,-153s77,-151,77,-151c0.7,0.7,35.7,202,105,604c67.3,400.7,102,602.7,104,
606zM`+(1001+r)+" "+a+"h400000v"+(40+r)+"H1017.7z"},phasePath=function t(r){var a=r/2;return"M400000 "+r+" H0 L"+a+" 0 l65 45 L145 "+(r-80)+" H400000z"},sqrtTall=function t(r,a,n){var s=n-54-a-r;return"M702 "+(r+a)+"H400000"+(40+r)+`
H742v`+s+`l-4 4-4 4c-.667.7 -2 1.5-4 2.5s-4.167 1.833-6.5 2.5-5.5 1-9.5 1
h-12l-28-84c-16.667-52-96.667 -294.333-240-727l-212 -643 -85 170
c-4-3.333-8.333-7.667-13 -13l-13-13l77-155 77-156c66 199.333 139 419.667
219 661 l218 661zM702 `+a+"H400000v"+(40+r)+"H742z"},sqrtPath=function t(r,a,n){a=1e3*a;var s="";switch(r){case"sqrtMain":s=sqrtMain(a,hLinePad);break;case"sqrtSize1":s=sqrtSize1(a,hLinePad);break;case"sqrtSize2":s=sqrtSize2(a,hLinePad);break;case"sqrtSize3":s=sqrtSize3(a,hLinePad);break;case"sqrtSize4":s=sqrtSize4(a,hLinePad);break;case"sqrtTall":s=sqrtTall(a,hLinePad,n)}return s},innerPath=function t(r,a){switch(r){case"":return"M291 0 H417 V"+a+" H291z M291 0 H417 V"+a+" H291z";case"":return"M145 0 H188 V"+a+" H145z M145 0 H188 V"+a+" H145z";case"":return"M145 0 H188 V"+a+" H145z M145 0 H188 V"+a+" H145z"+("M367 0 H410 V"+a+" H367z M367 0 H410 V"+a+" H367z");case"":return"M457 0 H583 V"+a+" H457z M457 0 H583 V"+a+" H457z";case"":return"M319 0 H403 V"+a+" H319z M319 0 H403 V"+a+" H319z";case"":return"M263 0 H347 V"+a+" H263z M263 0 H347 V"+a+" H263z";case"":return"M384 0 H504 V"+a+" H384z M384 0 H504 V"+a+" H384z";case"":return"M312 0 H355 V"+a+" H312z M312 0 H355 V"+a+" H312z";case"":return"M257 0 H300 V"+a+" H257z M257 0 H300 V"+a+" H257z"+("M478 0 H521 V"+a+" H478z M478 0 H521 V"+a+" H478z");default:return""}},path={doubleleftarrow:`M262 157
l10-10c34-36 62.7-77 86-123 3.3-8 5-13.3 5-16 0-5.3-6.7-8-20-8-7.3
 0-12.2.5-14.5 1.5-2.3 1-4.8 4.5-7.5 10.5-49.3 97.3-121.7 169.3-217 216-28
 14-57.3 25-88 33-6.7 2-11 3.8-13 5.5-2 1.7-3 4.2-3 7.5s1 5.8 3 7.5
c2 1.7 6.3 3.5 13 5.5 68 17.3 128.2 47.8 180.5 91.5 52.3 43.7 93.8 96.2 124.5
 157.5 9.3 8 15.3 12.3 18 13h6c12-.7 18-4 18-10 0-2-1.7-7-5-15-23.3-46-52-87
-86-123l-10-10h399738v-40H218c328 0 0 0 0 0l-10-8c-26.7-20-65.7-43-117-69 2.7
-2 6-3.7 10-5 36.7-16 72.3-37.3 107-64l10-8h399782v-40z
m8 0v40h399730v-40zm0 194v40h399730v-40z`,doublerightarrow:`M399738 392l
-10 10c-34 36-62.7 77-86 123-3.3 8-5 13.3-5 16 0 5.3 6.7 8 20 8 7.3 0 12.2-.5
 14.5-1.5 2.3-1 4.8-4.5 7.5-10.5 49.3-97.3 121.7-169.3 217-216 28-14 57.3-25 88
-33 6.7-2 11-3.8 13-5.5 2-1.7 3-4.2 3-7.5s-1-5.8-3-7.5c-2-1.7-6.3-3.5-13-5.5-68
-17.3-128.2-47.8-180.5-91.5-52.3-43.7-93.8-96.2-124.5-157.5-9.3-8-15.3-12.3-18
-13h-6c-12 .7-18 4-18 10 0 2 1.7 7 5 15 23.3 46 52 87 86 123l10 10H0v40h399782
c-328 0 0 0 0 0l10 8c26.7 20 65.7 43 117 69-2.7 2-6 3.7-10 5-36.7 16-72.3 37.3
-107 64l-10 8H0v40zM0 157v40h399730v-40zm0 194v40h399730v-40z`,leftarrow:`M400000 241H110l3-3c68.7-52.7 113.7-120
 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8
-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247
c-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208
 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3
 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202
 l-3-3h399890zM100 241v40h399900v-40z`,leftbrace:`M6 548l-6-6v-35l6-11c56-104 135.3-181.3 238-232 57.3-28.7 117
-45 179-50h399577v120H403c-43.3 7-81 15-113 26-100.7 33-179.7 91-237 174-2.7
 5-6 9-10 13-.7 1-7.3 1-20 1H6z`,leftbraceunder:`M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13
 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688
 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7
-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z`,leftgroup:`M400000 80
H435C64 80 168.3 229.4 21 260c-5.9 1.2-18 0-18 0-2 0-3-1-3-3v-38C76 61 257 0
 435 0h399565z`,leftgroupunder:`M400000 262
H435C64 262 168.3 112.6 21 82c-5.9-1.2-18 0-18 0-2 0-3 1-3 3v38c76 158 257 219
 435 219h399565z`,leftharpoon:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3
-3.3 10.2-9.5 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5
-18.3 3-21-1.3-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7
-196 228-6.7 4.7-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40z`,leftharpoonplus:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3-3.3 10.2-9.5
 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5-18.3 3-21-1.3
-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7-196 228-6.7 4.7
-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40zM0 435v40h400000v-40z
m0 0v40h400000v-40z`,leftharpoondown:`M7 241c-4 4-6.333 8.667-7 14 0 5.333.667 9 2 11s5.333
 5.333 12 10c90.667 54 156 130 196 228 3.333 10.667 6.333 16.333 9 17 2 .667 5
 1 9 1h5c10.667 0 16.667-2 18-6 2-2.667 1-9.667-3-21-32-87.333-82.667-157.667
-152-211l-3-3h399907v-40zM93 281 H400000 v-40L7 241z`,leftharpoondownplus:`M7 435c-4 4-6.3 8.7-7 14 0 5.3.7 9 2 11s5.3 5.3 12
 10c90.7 54 156 130 196 228 3.3 10.7 6.3 16.3 9 17 2 .7 5 1 9 1h5c10.7 0 16.7
-2 18-6 2-2.7 1-9.7-3-21-32-87.3-82.7-157.7-152-211l-3-3h399907v-40H7zm93 0
v40h399900v-40zM0 241v40h399900v-40zm0 0v40h399900v-40z`,lefthook:`M400000 281 H103s-33-11.2-61-33.5S0 197.3 0 164s14.2-61.2 42.5
-83.5C70.8 58.2 104 47 142 47 c16.7 0 25 6.7 25 20 0 12-8.7 18.7-26 20-40 3.3
-68.7 15.7-86 37-10 12-15 25.3-15 40 0 22.7 9.8 40.7 29.5 54 19.7 13.3 43.5 21
 71.5 23h399859zM103 281v-40h399897v40z`,leftlinesegment:`M40 281 V428 H0 V94 H40 V241 H400000 v40z
M40 281 V428 H0 V94 H40 V241 H400000 v40z`,leftmapsto:`M40 281 V448H0V74H40V241H400000v40z
M40 281 V448H0V74H40V241H400000v40z`,leftToFrom:`M0 147h400000v40H0zm0 214c68 40 115.7 95.7 143 167h22c15.3 0 23
-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69-70-101l-7-8h399905v-40H95l7-8
c28.7-32 52-65.7 70-101 10.7-23.3 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 265.3
 68 321 0 361zm0-174v-40h399900v40zm100 154v40h399900v-40z`,longequal:`M0 50 h400000 v40H0z m0 194h40000v40H0z
M0 50 h400000 v40H0z m0 194h40000v40H0z`,midbrace:`M200428 334
c-100.7-8.3-195.3-44-280-108-55.3-42-101.7-93-139-153l-9-14c-2.7 4-5.7 8.7-9 14
-53.3 86.7-123.7 153-211 199-66.7 36-137.3 56.3-212 62H0V214h199568c178.3-11.7
 311.7-78.3 403-201 6-8 9.7-12 11-12 .7-.7 6.7-1 18-1s17.3.3 18 1c1.3 0 5 4 11
 12 44.7 59.3 101.3 106.3 170 141s145.3 54.3 229 60h199572v120z`,midbraceunder:`M199572 214
c100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14
 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3
 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0
-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z`,oiintSize1:`M512.6 71.6c272.6 0 320.3 106.8 320.3 178.2 0 70.8-47.7 177.6
-320.3 177.6S193.1 320.6 193.1 249.8c0-71.4 46.9-178.2 319.5-178.2z
m368.1 178.2c0-86.4-60.9-215.4-368.1-215.4-306.4 0-367.3 129-367.3 215.4 0 85.8
60.9 214.8 367.3 214.8 307.2 0 368.1-129 368.1-214.8z`,oiintSize2:`M757.8 100.1c384.7 0 451.1 137.6 451.1 230 0 91.3-66.4 228.8
-451.1 228.8-386.3 0-452.7-137.5-452.7-228.8 0-92.4 66.4-230 452.7-230z
m502.4 230c0-111.2-82.4-277.2-502.4-277.2s-504 166-504 277.2
c0 110 84 276 504 276s502.4-166 502.4-276z`,oiiintSize1:`M681.4 71.6c408.9 0 480.5 106.8 480.5 178.2 0 70.8-71.6 177.6
-480.5 177.6S202.1 320.6 202.1 249.8c0-71.4 70.5-178.2 479.3-178.2z
m525.8 178.2c0-86.4-86.8-215.4-525.7-215.4-437.9 0-524.7 129-524.7 215.4 0
85.8 86.8 214.8 524.7 214.8 438.9 0 525.7-129 525.7-214.8z`,oiiintSize2:`M1021.2 53c603.6 0 707.8 165.8 707.8 277.2 0 110-104.2 275.8
-707.8 275.8-606 0-710.2-165.8-710.2-275.8C311 218.8 415.2 53 1021.2 53z
m770.4 277.1c0-131.2-126.4-327.6-770.5-327.6S248.4 198.9 248.4 330.1
c0 130 128.8 326.4 772.7 326.4s770.5-196.4 770.5-326.4z`,rightarrow:`M0 241v40h399891c-47.3 35.3-84 78-110 128
-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20
 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7
 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85
-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
 151.7 139 205zm0 0v40h399900v-40z`,rightbrace:`M400000 542l
-6 6h-17c-12.7 0-19.3-.3-20-1-4-4-7.3-8.3-10-13-35.3-51.3-80.8-93.8-136.5-127.5
s-117.2-55.8-184.5-66.5c-.7 0-2-.3-4-1-18.7-2.7-76-4.3-172-5H0V214h399571l6 1
c124.7 8 235 61.7 331 161 31.3 33.3 59.7 72.7 85 118l7 13v35z`,rightbraceunder:`M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3
 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237
-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z`,rightgroup:`M0 80h399565c371 0 266.7 149.4 414 180 5.9 1.2 18 0 18 0 2 0
 3-1 3-3v-38c-76-158-257-219-435-219H0z`,rightgroupunder:`M0 262h399565c371 0 266.7-149.4 414-180 5.9-1.2 18 0 18
 0 2 0 3 1 3 3v38c-76 158-257 219-435 219H0z`,rightharpoon:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3
-3.7-15.3-11-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2
-10.7 0-16.7 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58
 69.2 92 94.5zm0 0v40h399900v-40z`,rightharpoonplus:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3-3.7-15.3-11
-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2-10.7 0-16.7
 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58 69.2 92 94.5z
m0 0v40h399900v-40z m100 194v40h399900v-40zm0 0v40h399900v-40z`,rightharpoondown:`M399747 511c0 7.3 6.7 11 20 11 8 0 13-.8 15-2.5s4.7-6.8
 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3 8.5-5.8 9.5
-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3-64.7 57-92 95
-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 241v40h399900v-40z`,rightharpoondownplus:`M399747 705c0 7.3 6.7 11 20 11 8 0 13-.8
 15-2.5s4.7-6.8 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3
 8.5-5.8 9.5-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3
-64.7 57-92 95-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 435v40h399900v-40z
m0-194v40h400000v-40zm0 0v40h400000v-40z`,righthook:`M399859 241c-764 0 0 0 0 0 40-3.3 68.7-15.7 86-37 10-12 15-25.3
 15-40 0-22.7-9.8-40.7-29.5-54-19.7-13.3-43.5-21-71.5-23-17.3-1.3-26-8-26-20 0
-13.3 8.7-20 26-20 38 0 71 11.2 99 33.5 0 0 7 5.6 21 16.7 14 11.2 21 33.5 21
 66.8s-14 61.2-42 83.5c-28 22.3-61 33.5-99 33.5L0 241z M0 281v-40h399859v40z`,rightlinesegment:`M399960 241 V94 h40 V428 h-40 V281 H0 v-40z
M399960 241 V94 h40 V428 h-40 V281 H0 v-40z`,rightToFrom:`M400000 167c-70.7-42-118-97.7-142-167h-23c-15.3 0-23 .3-23
 1 0 1.3 5.3 13.7 16 37 18 35.3 41.3 69 70 101l7 8H0v40h399905l-7 8c-28.7 32
-52 65.7-70 101-10.7 23.3-16 35.7-16 37 0 .7 7.7 1 23 1h23c24-69.3 71.3-125 142
-167z M100 147v40h399900v-40zM0 341v40h399900v-40z`,twoheadleftarrow:`M0 167c68 40
 115.7 95.7 143 167h22c15.3 0 23-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69
-70-101l-7-8h125l9 7c50.7 39.3 85 86 103 140h46c0-4.7-6.3-18.7-19-42-18-35.3
-40-67.3-66-96l-9-9h399716v-40H284l9-9c26-28.7 48-60.7 66-96 12.7-23.333 19
-37.333 19-42h-46c-18 54-52.3 100.7-103 140l-9 7H95l7-8c28.7-32 52-65.7 70-101
 10.7-23.333 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 71.3 68 127 0 167z`,twoheadrightarrow:`M400000 167
c-68-40-115.7-95.7-143-167h-22c-15.3 0-23 .3-23 1 0 1.3 5.3 13.7 16 37 18 35.3
 41.3 69 70 101l7 8h-125l-9-7c-50.7-39.3-85-86-103-140h-46c0 4.7 6.3 18.7 19 42
 18 35.3 40 67.3 66 96l9 9H0v40h399716l-9 9c-26 28.7-48 60.7-66 96-12.7 23.333
-19 37.333-19 42h46c18-54 52.3-100.7 103-140l9-7h125l-7 8c-28.7 32-52 65.7-70
 101-10.7 23.333-16 35.7-16 37 0 .7 7.7 1 23 1h22c27.3-71.3 75-127 143-167z`,tilde1:`M200 55.538c-77 0-168 73.953-177 73.953-3 0-7
-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0
 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0
 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128
-68.267.847-113-73.952-191-73.952z`,tilde2:`M344 55.266c-142 0-300.638 81.316-311.5 86.418
-8.01 3.762-22.5 10.91-23.5 5.562L1 120c-1-2-1-3-1-4 0-5 3-9 8-10l18.4-9C160.9
 31.9 283 0 358 0c148 0 188 122 331 122s314-97 326-97c4 0 8 2 10 7l7 21.114
c1 2.14 1 3.21 1 4.28 0 5.347-3 9.626-7 10.696l-22.3 12.622C852.6 158.372 751
 181.476 676 181.476c-149 0-189-126.21-332-126.21z`,tilde3:`M786 59C457 59 32 175.242 13 175.242c-6 0-10-3.457
-11-10.37L.15 138c-1-7 3-12 10-13l19.2-6.4C378.4 40.7 634.3 0 804.3 0c337 0
 411.8 157 746.8 157 328 0 754-112 773-112 5 0 10 3 11 9l1 14.075c1 8.066-.697
 16.595-6.697 17.492l-21.052 7.31c-367.9 98.146-609.15 122.696-778.15 122.696
 -338 0-409-156.573-744-156.573z`,tilde4:`M786 58C457 58 32 177.487 13 177.487c-6 0-10-3.345
-11-10.035L.15 143c-1-7 3-12 10-13l22-6.7C381.2 35 637.15 0 807.15 0c337 0 409
 177 744 177 328 0 754-127 773-127 5 0 10 3 11 9l1 14.794c1 7.805-3 13.38-9
 14.495l-20.7 5.574c-366.85 99.79-607.3 139.372-776.3 139.372-338 0-409
 -175.236-744-175.236z`,vec:`M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z`,widehat1:`M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22
c-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z`,widehat2:`M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat3:`M1181 0h2l1171 236c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 280h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat4:`M1181 0h2l1171 296c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 340h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widecheck1:`M529,159h5l519,-115c5,-1,9,-5,9,-10c0,-1,-1,-2,-1,-3l-4,-22c-1,
-5,-5,-9,-11,-9h-2l-512,92l-513,-92h-2c-5,0,-9,4,-11,9l-5,22c-1,6,2,12,8,13z`,widecheck2:`M1181,220h2l1171,-176c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,153l-1167,-153h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck3:`M1181,280h2l1171,-236c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,213l-1167,-213h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck4:`M1181,340h2l1171,-296c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,273l-1167,-273h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,baraboveleftarrow:`M400000 620h-399890l3 -3c68.7 -52.7 113.7 -120 135 -202
c4 -14.7 6 -23 6 -25c0 -7.3 -7 -11 -21 -11c-8 0 -13.2 0.8 -15.5 2.5
c-2.3 1.7 -4.2 5.8 -5.5 12.5c-1.3 4.7 -2.7 10.3 -4 17c-12 48.7 -34.8 92 -68.5 130
s-74.2 66.3 -121.5 85c-10 4 -16 7.7 -18 11c0 8.7 6 14.3 18 17c47.3 18.7 87.8 47
121.5 85s56.5 81.3 68.5 130c0.7 2 1.3 5 2 9s1.2 6.7 1.5 8c0.3 1.3 1 3.3 2 6
s2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21 -3.7 21 -11
c0 -2 -2 -10.3 -6 -25c-20 -79.3 -65 -146.7 -135 -202l-3 -3h399890z
M100 620v40h399900v-40z M0 241v40h399900v-40zM0 241v40h399900v-40z`,rightarrowabovebar:`M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32
-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0
13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39
-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5
-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
151.7 139 205zm96 379h399894v40H0zm0 0h399904v40H0z`,baraboveshortleftharpoon:`M507,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17
c2,0.7,5,1,9,1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21
c-32,-87.3,-82.7,-157.7,-152,-211c0,0,-3,-3,-3,-3l399351,0l0,-40
c-398570,0,-399437,0,-399437,0z M593 435 v40 H399500 v-40z
M0 281 v-40 H399908 v40z M0 281 v-40 H399908 v40z`,rightharpoonaboveshortbar:`M0,241 l0,40c399126,0,399993,0,399993,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M0 241 v40 H399908 v-40z M0 475 v-40 H399500 v40z M0 475 v-40 H399500 v40z`,shortbaraboveleftharpoon:`M7,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17c2,0.7,5,1,9,
1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21c-32,-87.3,-82.7,-157.7,
-152,-211c0,0,-3,-3,-3,-3l399907,0l0,-40c-399126,0,-399993,0,-399993,0z
M93 435 v40 H400000 v-40z M500 241 v40 H400000 v-40z M500 241 v40 H400000 v-40z`,shortrightharpoonabovebar:`M53,241l0,40c398570,0,399437,0,399437,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M500 241 v40 H399408 v-40z M500 435 v40 H400000 v-40z`},tallDelim=function t(r,a){switch(r){case"lbrack":return"M403 1759 V84 H666 V0 H319 V1759 v"+a+` v1759 h347 v-84
H403z M403 1759 V0 H319 V1759 v`+a+" v1759 h84z";case"rbrack":return"M347 1759 V0 H0 V84 H263 V1759 v"+a+` v1759 H0 v84 H347z
M347 1759 V0 H263 V1759 v`+a+" v1759 h84z";case"vert":return"M145 15 v585 v"+a+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-a+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+a+" v585 h43z";case"doublevert":return"M145 15 v585 v"+a+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-a+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+a+` v585 h43z
M367 15 v585 v`+a+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-a+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M410 15 H367 v585 v`+a+" v585 h43z";case"lfloor":return"M319 602 V0 H403 V602 v"+a+` v1715 h263 v84 H319z
MM319 602 V0 H403 V602 v`+a+" v1715 H319z";case"rfloor":return"M319 602 V0 H403 V602 v"+a+` v1799 H0 v-84 H319z
MM319 602 V0 H403 V602 v`+a+" v1715 H319z";case"lceil":return"M403 1759 V84 H666 V0 H319 V1759 v"+a+` v602 h84z
M403 1759 V0 H319 V1759 v`+a+" v602 h84z";case"rceil":return"M347 1759 V0 H0 V84 H263 V1759 v"+a+` v602 h84z
M347 1759 V0 h-84 V1759 v`+a+" v602 h84z";case"lparen":return`M863,9c0,-2,-2,-5,-6,-9c0,0,-17,0,-17,0c-12.7,0,-19.3,0.3,-20,1
c-5.3,5.3,-10.3,11,-15,17c-242.7,294.7,-395.3,682,-458,1162c-21.3,163.3,-33.3,349,
-36,557 l0,`+(a+84)+`c0.2,6,0,26,0,60c2,159.3,10,310.7,24,454c53.3,528,210,
949.7,470,1265c4.7,6,9.7,11.7,15,17c0.7,0.7,7,1,19,1c0,0,18,0,18,0c4,-4,6,-7,6,-9
c0,-2.7,-3.3,-8.7,-10,-18c-135.3,-192.7,-235.5,-414.3,-300.5,-665c-65,-250.7,-102.5,
-544.7,-112.5,-882c-2,-104,-3,-167,-3,-189
l0,-`+(a+92)+`c0,-162.7,5.7,-314,17,-454c20.7,-272,63.7,-513,129,-723c65.3,
-210,155.3,-396.3,270,-559c6.7,-9.3,10,-15.3,10,-18z`;case"rparen":return`M76,0c-16.7,0,-25,3,-25,9c0,2,2,6.3,6,13c21.3,28.7,42.3,60.3,
63,95c96.7,156.7,172.8,332.5,228.5,527.5c55.7,195,92.8,416.5,111.5,664.5
c11.3,139.3,17,290.7,17,454c0,28,1.7,43,3.3,45l0,`+(a+9)+`
c-3,4,-3.3,16.7,-3.3,38c0,162,-5.7,313.7,-17,455c-18.7,248,-55.8,469.3,-111.5,664
c-55.7,194.7,-131.8,370.3,-228.5,527c-20.7,34.7,-41.7,66.3,-63,95c-2,3.3,-4,7,-6,11
c0,7.3,5.7,11,17,11c0,0,11,0,11,0c9.3,0,14.3,-0.3,15,-1c5.3,-5.3,10.3,-11,15,-17
c242.7,-294.7,395.3,-681.7,458,-1161c21.3,-164.7,33.3,-350.7,36,-558
l0,-`+(a+144)+`c-2,-159.3,-10,-310.7,-24,-454c-53.3,-528,-210,-949.7,
-470,-1265c-4.7,-6,-9.7,-11.7,-15,-17c-0.7,-0.7,-6.7,-1,-18,-1z`;default:throw new Error("Unknown stretchy delimiter.")}};class DocumentFragment{constructor(r){this.children=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.children=r,this.classes=[],this.height=0,this.depth=0,this.maxFontSize=0,this.style={}}hasClass(r){return this.classes.includes(r)}toNode(){for(var r=document.createDocumentFragment(),a=0;a<this.children.length;a++)r.appendChild(this.children[a].toNode());return r}toMarkup(){for(var r="",a=0;a<this.children.length;a++)r+=this.children[a].toMarkup();return r}toText(){var r=a=>a.toText();return this.children.map(r).join("")}}var fontMetricsData={"AMS-Regular":{32:[0,0,0,0,.25],65:[0,.68889,0,0,.72222],66:[0,.68889,0,0,.66667],67:[0,.68889,0,0,.72222],68:[0,.68889,0,0,.72222],69:[0,.68889,0,0,.66667],70:[0,.68889,0,0,.61111],71:[0,.68889,0,0,.77778],72:[0,.68889,0,0,.77778],73:[0,.68889,0,0,.38889],74:[.16667,.68889,0,0,.5],75:[0,.68889,0,0,.77778],76:[0,.68889,0,0,.66667],77:[0,.68889,0,0,.94445],78:[0,.68889,0,0,.72222],79:[.16667,.68889,0,0,.77778],80:[0,.68889,0,0,.61111],81:[.16667,.68889,0,0,.77778],82:[0,.68889,0,0,.72222],83:[0,.68889,0,0,.55556],84:[0,.68889,0,0,.66667],85:[0,.68889,0,0,.72222],86:[0,.68889,0,0,.72222],87:[0,.68889,0,0,1],88:[0,.68889,0,0,.72222],89:[0,.68889,0,0,.72222],90:[0,.68889,0,0,.66667],107:[0,.68889,0,0,.55556],160:[0,0,0,0,.25],165:[0,.675,.025,0,.75],174:[.15559,.69224,0,0,.94666],240:[0,.68889,0,0,.55556],295:[0,.68889,0,0,.54028],710:[0,.825,0,0,2.33334],732:[0,.9,0,0,2.33334],770:[0,.825,0,0,2.33334],771:[0,.9,0,0,2.33334],989:[.08167,.58167,0,0,.77778],1008:[0,.43056,.04028,0,.66667],8245:[0,.54986,0,0,.275],8463:[0,.68889,0,0,.54028],8487:[0,.68889,0,0,.72222],8498:[0,.68889,0,0,.55556],8502:[0,.68889,0,0,.66667],8503:[0,.68889,0,0,.44445],8504:[0,.68889,0,0,.66667],8513:[0,.68889,0,0,.63889],8592:[-.03598,.46402,0,0,.5],8594:[-.03598,.46402,0,0,.5],8602:[-.13313,.36687,0,0,1],8603:[-.13313,.36687,0,0,1],8606:[.01354,.52239,0,0,1],8608:[.01354,.52239,0,0,1],8610:[.01354,.52239,0,0,1.11111],8611:[.01354,.52239,0,0,1.11111],8619:[0,.54986,0,0,1],8620:[0,.54986,0,0,1],8621:[-.13313,.37788,0,0,1.38889],8622:[-.13313,.36687,0,0,1],8624:[0,.69224,0,0,.5],8625:[0,.69224,0,0,.5],8630:[0,.43056,0,0,1],8631:[0,.43056,0,0,1],8634:[.08198,.58198,0,0,.77778],8635:[.08198,.58198,0,0,.77778],8638:[.19444,.69224,0,0,.41667],8639:[.19444,.69224,0,0,.41667],8642:[.19444,.69224,0,0,.41667],8643:[.19444,.69224,0,0,.41667],8644:[.1808,.675,0,0,1],8646:[.1808,.675,0,0,1],8647:[.1808,.675,0,0,1],8648:[.19444,.69224,0,0,.83334],8649:[.1808,.675,0,0,1],8650:[.19444,.69224,0,0,.83334],8651:[.01354,.52239,0,0,1],8652:[.01354,.52239,0,0,1],8653:[-.13313,.36687,0,0,1],8654:[-.13313,.36687,0,0,1],8655:[-.13313,.36687,0,0,1],8666:[.13667,.63667,0,0,1],8667:[.13667,.63667,0,0,1],8669:[-.13313,.37788,0,0,1],8672:[-.064,.437,0,0,1.334],8674:[-.064,.437,0,0,1.334],8705:[0,.825,0,0,.5],8708:[0,.68889,0,0,.55556],8709:[.08167,.58167,0,0,.77778],8717:[0,.43056,0,0,.42917],8722:[-.03598,.46402,0,0,.5],8724:[.08198,.69224,0,0,.77778],8726:[.08167,.58167,0,0,.77778],8733:[0,.69224,0,0,.77778],8736:[0,.69224,0,0,.72222],8737:[0,.69224,0,0,.72222],8738:[.03517,.52239,0,0,.72222],8739:[.08167,.58167,0,0,.22222],8740:[.25142,.74111,0,0,.27778],8741:[.08167,.58167,0,0,.38889],8742:[.25142,.74111,0,0,.5],8756:[0,.69224,0,0,.66667],8757:[0,.69224,0,0,.66667],8764:[-.13313,.36687,0,0,.77778],8765:[-.13313,.37788,0,0,.77778],8769:[-.13313,.36687,0,0,.77778],8770:[-.03625,.46375,0,0,.77778],8774:[.30274,.79383,0,0,.77778],8776:[-.01688,.48312,0,0,.77778],8778:[.08167,.58167,0,0,.77778],8782:[.06062,.54986,0,0,.77778],8783:[.06062,.54986,0,0,.77778],8785:[.08198,.58198,0,0,.77778],8786:[.08198,.58198,0,0,.77778],8787:[.08198,.58198,0,0,.77778],8790:[0,.69224,0,0,.77778],8791:[.22958,.72958,0,0,.77778],8796:[.08198,.91667,0,0,.77778],8806:[.25583,.75583,0,0,.77778],8807:[.25583,.75583,0,0,.77778],8808:[.25142,.75726,0,0,.77778],8809:[.25142,.75726,0,0,.77778],8812:[.25583,.75583,0,0,.5],8814:[.20576,.70576,0,0,.77778],8815:[.20576,.70576,0,0,.77778],8816:[.30274,.79383,0,0,.77778],8817:[.30274,.79383,0,0,.77778],8818:[.22958,.72958,0,0,.77778],8819:[.22958,.72958,0,0,.77778],8822:[.1808,.675,0,0,.77778],8823:[.1808,.675,0,0,.77778],8828:[.13667,.63667,0,0,.77778],8829:[.13667,.63667,0,0,.77778],8830:[.22958,.72958,0,0,.77778],8831:[.22958,.72958,0,0,.77778],8832:[.20576,.70576,0,0,.77778],8833:[.20576,.70576,0,0,.77778],8840:[.30274,.79383,0,0,.77778],8841:[.30274,.79383,0,0,.77778],8842:[.13597,.63597,0,0,.77778],8843:[.13597,.63597,0,0,.77778],8847:[.03517,.54986,0,0,.77778],8848:[.03517,.54986,0,0,.77778],8858:[.08198,.58198,0,0,.77778],8859:[.08198,.58198,0,0,.77778],8861:[.08198,.58198,0,0,.77778],8862:[0,.675,0,0,.77778],8863:[0,.675,0,0,.77778],8864:[0,.675,0,0,.77778],8865:[0,.675,0,0,.77778],8872:[0,.69224,0,0,.61111],8873:[0,.69224,0,0,.72222],8874:[0,.69224,0,0,.88889],8876:[0,.68889,0,0,.61111],8877:[0,.68889,0,0,.61111],8878:[0,.68889,0,0,.72222],8879:[0,.68889,0,0,.72222],8882:[.03517,.54986,0,0,.77778],8883:[.03517,.54986,0,0,.77778],8884:[.13667,.63667,0,0,.77778],8885:[.13667,.63667,0,0,.77778],8888:[0,.54986,0,0,1.11111],8890:[.19444,.43056,0,0,.55556],8891:[.19444,.69224,0,0,.61111],8892:[.19444,.69224,0,0,.61111],8901:[0,.54986,0,0,.27778],8903:[.08167,.58167,0,0,.77778],8905:[.08167,.58167,0,0,.77778],8906:[.08167,.58167,0,0,.77778],8907:[0,.69224,0,0,.77778],8908:[0,.69224,0,0,.77778],8909:[-.03598,.46402,0,0,.77778],8910:[0,.54986,0,0,.76042],8911:[0,.54986,0,0,.76042],8912:[.03517,.54986,0,0,.77778],8913:[.03517,.54986,0,0,.77778],8914:[0,.54986,0,0,.66667],8915:[0,.54986,0,0,.66667],8916:[0,.69224,0,0,.66667],8918:[.0391,.5391,0,0,.77778],8919:[.0391,.5391,0,0,.77778],8920:[.03517,.54986,0,0,1.33334],8921:[.03517,.54986,0,0,1.33334],8922:[.38569,.88569,0,0,.77778],8923:[.38569,.88569,0,0,.77778],8926:[.13667,.63667,0,0,.77778],8927:[.13667,.63667,0,0,.77778],8928:[.30274,.79383,0,0,.77778],8929:[.30274,.79383,0,0,.77778],8934:[.23222,.74111,0,0,.77778],8935:[.23222,.74111,0,0,.77778],8936:[.23222,.74111,0,0,.77778],8937:[.23222,.74111,0,0,.77778],8938:[.20576,.70576,0,0,.77778],8939:[.20576,.70576,0,0,.77778],8940:[.30274,.79383,0,0,.77778],8941:[.30274,.79383,0,0,.77778],8994:[.19444,.69224,0,0,.77778],8995:[.19444,.69224,0,0,.77778],9416:[.15559,.69224,0,0,.90222],9484:[0,.69224,0,0,.5],9488:[0,.69224,0,0,.5],9492:[0,.37788,0,0,.5],9496:[0,.37788,0,0,.5],9585:[.19444,.68889,0,0,.88889],9586:[.19444,.74111,0,0,.88889],9632:[0,.675,0,0,.77778],9633:[0,.675,0,0,.77778],9650:[0,.54986,0,0,.72222],9651:[0,.54986,0,0,.72222],9654:[.03517,.54986,0,0,.77778],9660:[0,.54986,0,0,.72222],9661:[0,.54986,0,0,.72222],9664:[.03517,.54986,0,0,.77778],9674:[.11111,.69224,0,0,.66667],9733:[.19444,.69224,0,0,.94445],10003:[0,.69224,0,0,.83334],10016:[0,.69224,0,0,.83334],10731:[.11111,.69224,0,0,.66667],10846:[.19444,.75583,0,0,.61111],10877:[.13667,.63667,0,0,.77778],10878:[.13667,.63667,0,0,.77778],10885:[.25583,.75583,0,0,.77778],10886:[.25583,.75583,0,0,.77778],10887:[.13597,.63597,0,0,.77778],10888:[.13597,.63597,0,0,.77778],10889:[.26167,.75726,0,0,.77778],10890:[.26167,.75726,0,0,.77778],10891:[.48256,.98256,0,0,.77778],10892:[.48256,.98256,0,0,.77778],10901:[.13667,.63667,0,0,.77778],10902:[.13667,.63667,0,0,.77778],10933:[.25142,.75726,0,0,.77778],10934:[.25142,.75726,0,0,.77778],10935:[.26167,.75726,0,0,.77778],10936:[.26167,.75726,0,0,.77778],10937:[.26167,.75726,0,0,.77778],10938:[.26167,.75726,0,0,.77778],10949:[.25583,.75583,0,0,.77778],10950:[.25583,.75583,0,0,.77778],10955:[.28481,.79383,0,0,.77778],10956:[.28481,.79383,0,0,.77778],57350:[.08167,.58167,0,0,.22222],57351:[.08167,.58167,0,0,.38889],57352:[.08167,.58167,0,0,.77778],57353:[0,.43056,.04028,0,.66667],57356:[.25142,.75726,0,0,.77778],57357:[.25142,.75726,0,0,.77778],57358:[.41951,.91951,0,0,.77778],57359:[.30274,.79383,0,0,.77778],57360:[.30274,.79383,0,0,.77778],57361:[.41951,.91951,0,0,.77778],57366:[.25142,.75726,0,0,.77778],57367:[.25142,.75726,0,0,.77778],57368:[.25142,.75726,0,0,.77778],57369:[.25142,.75726,0,0,.77778],57370:[.13597,.63597,0,0,.77778],57371:[.13597,.63597,0,0,.77778]},"Caligraphic-Regular":{32:[0,0,0,0,.25],65:[0,.68333,0,.19445,.79847],66:[0,.68333,.03041,.13889,.65681],67:[0,.68333,.05834,.13889,.52653],68:[0,.68333,.02778,.08334,.77139],69:[0,.68333,.08944,.11111,.52778],70:[0,.68333,.09931,.11111,.71875],71:[.09722,.68333,.0593,.11111,.59487],72:[0,.68333,.00965,.11111,.84452],73:[0,.68333,.07382,0,.54452],74:[.09722,.68333,.18472,.16667,.67778],75:[0,.68333,.01445,.05556,.76195],76:[0,.68333,0,.13889,.68972],77:[0,.68333,0,.13889,1.2009],78:[0,.68333,.14736,.08334,.82049],79:[0,.68333,.02778,.11111,.79611],80:[0,.68333,.08222,.08334,.69556],81:[.09722,.68333,0,.11111,.81667],82:[0,.68333,0,.08334,.8475],83:[0,.68333,.075,.13889,.60556],84:[0,.68333,.25417,0,.54464],85:[0,.68333,.09931,.08334,.62583],86:[0,.68333,.08222,0,.61278],87:[0,.68333,.08222,.08334,.98778],88:[0,.68333,.14643,.13889,.7133],89:[.09722,.68333,.08222,.08334,.66834],90:[0,.68333,.07944,.13889,.72473],160:[0,0,0,0,.25]},"Fraktur-Regular":{32:[0,0,0,0,.25],33:[0,.69141,0,0,.29574],34:[0,.69141,0,0,.21471],38:[0,.69141,0,0,.73786],39:[0,.69141,0,0,.21201],40:[.24982,.74947,0,0,.38865],41:[.24982,.74947,0,0,.38865],42:[0,.62119,0,0,.27764],43:[.08319,.58283,0,0,.75623],44:[0,.10803,0,0,.27764],45:[.08319,.58283,0,0,.75623],46:[0,.10803,0,0,.27764],47:[.24982,.74947,0,0,.50181],48:[0,.47534,0,0,.50181],49:[0,.47534,0,0,.50181],50:[0,.47534,0,0,.50181],51:[.18906,.47534,0,0,.50181],52:[.18906,.47534,0,0,.50181],53:[.18906,.47534,0,0,.50181],54:[0,.69141,0,0,.50181],55:[.18906,.47534,0,0,.50181],56:[0,.69141,0,0,.50181],57:[.18906,.47534,0,0,.50181],58:[0,.47534,0,0,.21606],59:[.12604,.47534,0,0,.21606],61:[-.13099,.36866,0,0,.75623],63:[0,.69141,0,0,.36245],65:[0,.69141,0,0,.7176],66:[0,.69141,0,0,.88397],67:[0,.69141,0,0,.61254],68:[0,.69141,0,0,.83158],69:[0,.69141,0,0,.66278],70:[.12604,.69141,0,0,.61119],71:[0,.69141,0,0,.78539],72:[.06302,.69141,0,0,.7203],73:[0,.69141,0,0,.55448],74:[.12604,.69141,0,0,.55231],75:[0,.69141,0,0,.66845],76:[0,.69141,0,0,.66602],77:[0,.69141,0,0,1.04953],78:[0,.69141,0,0,.83212],79:[0,.69141,0,0,.82699],80:[.18906,.69141,0,0,.82753],81:[.03781,.69141,0,0,.82699],82:[0,.69141,0,0,.82807],83:[0,.69141,0,0,.82861],84:[0,.69141,0,0,.66899],85:[0,.69141,0,0,.64576],86:[0,.69141,0,0,.83131],87:[0,.69141,0,0,1.04602],88:[0,.69141,0,0,.71922],89:[.18906,.69141,0,0,.83293],90:[.12604,.69141,0,0,.60201],91:[.24982,.74947,0,0,.27764],93:[.24982,.74947,0,0,.27764],94:[0,.69141,0,0,.49965],97:[0,.47534,0,0,.50046],98:[0,.69141,0,0,.51315],99:[0,.47534,0,0,.38946],100:[0,.62119,0,0,.49857],101:[0,.47534,0,0,.40053],102:[.18906,.69141,0,0,.32626],103:[.18906,.47534,0,0,.5037],104:[.18906,.69141,0,0,.52126],105:[0,.69141,0,0,.27899],106:[0,.69141,0,0,.28088],107:[0,.69141,0,0,.38946],108:[0,.69141,0,0,.27953],109:[0,.47534,0,0,.76676],110:[0,.47534,0,0,.52666],111:[0,.47534,0,0,.48885],112:[.18906,.52396,0,0,.50046],113:[.18906,.47534,0,0,.48912],114:[0,.47534,0,0,.38919],115:[0,.47534,0,0,.44266],116:[0,.62119,0,0,.33301],117:[0,.47534,0,0,.5172],118:[0,.52396,0,0,.5118],119:[0,.52396,0,0,.77351],120:[.18906,.47534,0,0,.38865],121:[.18906,.47534,0,0,.49884],122:[.18906,.47534,0,0,.39054],160:[0,0,0,0,.25],8216:[0,.69141,0,0,.21471],8217:[0,.69141,0,0,.21471],58112:[0,.62119,0,0,.49749],58113:[0,.62119,0,0,.4983],58114:[.18906,.69141,0,0,.33328],58115:[.18906,.69141,0,0,.32923],58116:[.18906,.47534,0,0,.50343],58117:[0,.69141,0,0,.33301],58118:[0,.62119,0,0,.33409],58119:[0,.47534,0,0,.50073]},"Main-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.35],34:[0,.69444,0,0,.60278],35:[.19444,.69444,0,0,.95833],36:[.05556,.75,0,0,.575],37:[.05556,.75,0,0,.95833],38:[0,.69444,0,0,.89444],39:[0,.69444,0,0,.31944],40:[.25,.75,0,0,.44722],41:[.25,.75,0,0,.44722],42:[0,.75,0,0,.575],43:[.13333,.63333,0,0,.89444],44:[.19444,.15556,0,0,.31944],45:[0,.44444,0,0,.38333],46:[0,.15556,0,0,.31944],47:[.25,.75,0,0,.575],48:[0,.64444,0,0,.575],49:[0,.64444,0,0,.575],50:[0,.64444,0,0,.575],51:[0,.64444,0,0,.575],52:[0,.64444,0,0,.575],53:[0,.64444,0,0,.575],54:[0,.64444,0,0,.575],55:[0,.64444,0,0,.575],56:[0,.64444,0,0,.575],57:[0,.64444,0,0,.575],58:[0,.44444,0,0,.31944],59:[.19444,.44444,0,0,.31944],60:[.08556,.58556,0,0,.89444],61:[-.10889,.39111,0,0,.89444],62:[.08556,.58556,0,0,.89444],63:[0,.69444,0,0,.54305],64:[0,.69444,0,0,.89444],65:[0,.68611,0,0,.86944],66:[0,.68611,0,0,.81805],67:[0,.68611,0,0,.83055],68:[0,.68611,0,0,.88194],69:[0,.68611,0,0,.75555],70:[0,.68611,0,0,.72361],71:[0,.68611,0,0,.90416],72:[0,.68611,0,0,.9],73:[0,.68611,0,0,.43611],74:[0,.68611,0,0,.59444],75:[0,.68611,0,0,.90138],76:[0,.68611,0,0,.69166],77:[0,.68611,0,0,1.09166],78:[0,.68611,0,0,.9],79:[0,.68611,0,0,.86388],80:[0,.68611,0,0,.78611],81:[.19444,.68611,0,0,.86388],82:[0,.68611,0,0,.8625],83:[0,.68611,0,0,.63889],84:[0,.68611,0,0,.8],85:[0,.68611,0,0,.88472],86:[0,.68611,.01597,0,.86944],87:[0,.68611,.01597,0,1.18888],88:[0,.68611,0,0,.86944],89:[0,.68611,.02875,0,.86944],90:[0,.68611,0,0,.70277],91:[.25,.75,0,0,.31944],92:[.25,.75,0,0,.575],93:[.25,.75,0,0,.31944],94:[0,.69444,0,0,.575],95:[.31,.13444,.03194,0,.575],97:[0,.44444,0,0,.55902],98:[0,.69444,0,0,.63889],99:[0,.44444,0,0,.51111],100:[0,.69444,0,0,.63889],101:[0,.44444,0,0,.52708],102:[0,.69444,.10903,0,.35139],103:[.19444,.44444,.01597,0,.575],104:[0,.69444,0,0,.63889],105:[0,.69444,0,0,.31944],106:[.19444,.69444,0,0,.35139],107:[0,.69444,0,0,.60694],108:[0,.69444,0,0,.31944],109:[0,.44444,0,0,.95833],110:[0,.44444,0,0,.63889],111:[0,.44444,0,0,.575],112:[.19444,.44444,0,0,.63889],113:[.19444,.44444,0,0,.60694],114:[0,.44444,0,0,.47361],115:[0,.44444,0,0,.45361],116:[0,.63492,0,0,.44722],117:[0,.44444,0,0,.63889],118:[0,.44444,.01597,0,.60694],119:[0,.44444,.01597,0,.83055],120:[0,.44444,0,0,.60694],121:[.19444,.44444,.01597,0,.60694],122:[0,.44444,0,0,.51111],123:[.25,.75,0,0,.575],124:[.25,.75,0,0,.31944],125:[.25,.75,0,0,.575],126:[.35,.34444,0,0,.575],160:[0,0,0,0,.25],163:[0,.69444,0,0,.86853],168:[0,.69444,0,0,.575],172:[0,.44444,0,0,.76666],176:[0,.69444,0,0,.86944],177:[.13333,.63333,0,0,.89444],184:[.17014,0,0,0,.51111],198:[0,.68611,0,0,1.04166],215:[.13333,.63333,0,0,.89444],216:[.04861,.73472,0,0,.89444],223:[0,.69444,0,0,.59722],230:[0,.44444,0,0,.83055],247:[.13333,.63333,0,0,.89444],248:[.09722,.54167,0,0,.575],305:[0,.44444,0,0,.31944],338:[0,.68611,0,0,1.16944],339:[0,.44444,0,0,.89444],567:[.19444,.44444,0,0,.35139],710:[0,.69444,0,0,.575],711:[0,.63194,0,0,.575],713:[0,.59611,0,0,.575],714:[0,.69444,0,0,.575],715:[0,.69444,0,0,.575],728:[0,.69444,0,0,.575],729:[0,.69444,0,0,.31944],730:[0,.69444,0,0,.86944],732:[0,.69444,0,0,.575],733:[0,.69444,0,0,.575],915:[0,.68611,0,0,.69166],916:[0,.68611,0,0,.95833],920:[0,.68611,0,0,.89444],923:[0,.68611,0,0,.80555],926:[0,.68611,0,0,.76666],928:[0,.68611,0,0,.9],931:[0,.68611,0,0,.83055],933:[0,.68611,0,0,.89444],934:[0,.68611,0,0,.83055],936:[0,.68611,0,0,.89444],937:[0,.68611,0,0,.83055],8211:[0,.44444,.03194,0,.575],8212:[0,.44444,.03194,0,1.14999],8216:[0,.69444,0,0,.31944],8217:[0,.69444,0,0,.31944],8220:[0,.69444,0,0,.60278],8221:[0,.69444,0,0,.60278],8224:[.19444,.69444,0,0,.51111],8225:[.19444,.69444,0,0,.51111],8242:[0,.55556,0,0,.34444],8407:[0,.72444,.15486,0,.575],8463:[0,.69444,0,0,.66759],8465:[0,.69444,0,0,.83055],8467:[0,.69444,0,0,.47361],8472:[.19444,.44444,0,0,.74027],8476:[0,.69444,0,0,.83055],8501:[0,.69444,0,0,.70277],8592:[-.10889,.39111,0,0,1.14999],8593:[.19444,.69444,0,0,.575],8594:[-.10889,.39111,0,0,1.14999],8595:[.19444,.69444,0,0,.575],8596:[-.10889,.39111,0,0,1.14999],8597:[.25,.75,0,0,.575],8598:[.19444,.69444,0,0,1.14999],8599:[.19444,.69444,0,0,1.14999],8600:[.19444,.69444,0,0,1.14999],8601:[.19444,.69444,0,0,1.14999],8636:[-.10889,.39111,0,0,1.14999],8637:[-.10889,.39111,0,0,1.14999],8640:[-.10889,.39111,0,0,1.14999],8641:[-.10889,.39111,0,0,1.14999],8656:[-.10889,.39111,0,0,1.14999],8657:[.19444,.69444,0,0,.70277],8658:[-.10889,.39111,0,0,1.14999],8659:[.19444,.69444,0,0,.70277],8660:[-.10889,.39111,0,0,1.14999],8661:[.25,.75,0,0,.70277],8704:[0,.69444,0,0,.63889],8706:[0,.69444,.06389,0,.62847],8707:[0,.69444,0,0,.63889],8709:[.05556,.75,0,0,.575],8711:[0,.68611,0,0,.95833],8712:[.08556,.58556,0,0,.76666],8715:[.08556,.58556,0,0,.76666],8722:[.13333,.63333,0,0,.89444],8723:[.13333,.63333,0,0,.89444],8725:[.25,.75,0,0,.575],8726:[.25,.75,0,0,.575],8727:[-.02778,.47222,0,0,.575],8728:[-.02639,.47361,0,0,.575],8729:[-.02639,.47361,0,0,.575],8730:[.18,.82,0,0,.95833],8733:[0,.44444,0,0,.89444],8734:[0,.44444,0,0,1.14999],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.31944],8741:[.25,.75,0,0,.575],8743:[0,.55556,0,0,.76666],8744:[0,.55556,0,0,.76666],8745:[0,.55556,0,0,.76666],8746:[0,.55556,0,0,.76666],8747:[.19444,.69444,.12778,0,.56875],8764:[-.10889,.39111,0,0,.89444],8768:[.19444,.69444,0,0,.31944],8771:[.00222,.50222,0,0,.89444],8773:[.027,.638,0,0,.894],8776:[.02444,.52444,0,0,.89444],8781:[.00222,.50222,0,0,.89444],8801:[.00222,.50222,0,0,.89444],8804:[.19667,.69667,0,0,.89444],8805:[.19667,.69667,0,0,.89444],8810:[.08556,.58556,0,0,1.14999],8811:[.08556,.58556,0,0,1.14999],8826:[.08556,.58556,0,0,.89444],8827:[.08556,.58556,0,0,.89444],8834:[.08556,.58556,0,0,.89444],8835:[.08556,.58556,0,0,.89444],8838:[.19667,.69667,0,0,.89444],8839:[.19667,.69667,0,0,.89444],8846:[0,.55556,0,0,.76666],8849:[.19667,.69667,0,0,.89444],8850:[.19667,.69667,0,0,.89444],8851:[0,.55556,0,0,.76666],8852:[0,.55556,0,0,.76666],8853:[.13333,.63333,0,0,.89444],8854:[.13333,.63333,0,0,.89444],8855:[.13333,.63333,0,0,.89444],8856:[.13333,.63333,0,0,.89444],8857:[.13333,.63333,0,0,.89444],8866:[0,.69444,0,0,.70277],8867:[0,.69444,0,0,.70277],8868:[0,.69444,0,0,.89444],8869:[0,.69444,0,0,.89444],8900:[-.02639,.47361,0,0,.575],8901:[-.02639,.47361,0,0,.31944],8902:[-.02778,.47222,0,0,.575],8968:[.25,.75,0,0,.51111],8969:[.25,.75,0,0,.51111],8970:[.25,.75,0,0,.51111],8971:[.25,.75,0,0,.51111],8994:[-.13889,.36111,0,0,1.14999],8995:[-.13889,.36111,0,0,1.14999],9651:[.19444,.69444,0,0,1.02222],9657:[-.02778,.47222,0,0,.575],9661:[.19444,.69444,0,0,1.02222],9667:[-.02778,.47222,0,0,.575],9711:[.19444,.69444,0,0,1.14999],9824:[.12963,.69444,0,0,.89444],9825:[.12963,.69444,0,0,.89444],9826:[.12963,.69444,0,0,.89444],9827:[.12963,.69444,0,0,.89444],9837:[0,.75,0,0,.44722],9838:[.19444,.69444,0,0,.44722],9839:[.19444,.69444,0,0,.44722],10216:[.25,.75,0,0,.44722],10217:[.25,.75,0,0,.44722],10815:[0,.68611,0,0,.9],10927:[.19667,.69667,0,0,.89444],10928:[.19667,.69667,0,0,.89444],57376:[.19444,.69444,0,0,0]},"Main-BoldItalic":{32:[0,0,0,0,.25],33:[0,.69444,.11417,0,.38611],34:[0,.69444,.07939,0,.62055],35:[.19444,.69444,.06833,0,.94444],37:[.05556,.75,.12861,0,.94444],38:[0,.69444,.08528,0,.88555],39:[0,.69444,.12945,0,.35555],40:[.25,.75,.15806,0,.47333],41:[.25,.75,.03306,0,.47333],42:[0,.75,.14333,0,.59111],43:[.10333,.60333,.03306,0,.88555],44:[.19444,.14722,0,0,.35555],45:[0,.44444,.02611,0,.41444],46:[0,.14722,0,0,.35555],47:[.25,.75,.15806,0,.59111],48:[0,.64444,.13167,0,.59111],49:[0,.64444,.13167,0,.59111],50:[0,.64444,.13167,0,.59111],51:[0,.64444,.13167,0,.59111],52:[.19444,.64444,.13167,0,.59111],53:[0,.64444,.13167,0,.59111],54:[0,.64444,.13167,0,.59111],55:[.19444,.64444,.13167,0,.59111],56:[0,.64444,.13167,0,.59111],57:[0,.64444,.13167,0,.59111],58:[0,.44444,.06695,0,.35555],59:[.19444,.44444,.06695,0,.35555],61:[-.10889,.39111,.06833,0,.88555],63:[0,.69444,.11472,0,.59111],64:[0,.69444,.09208,0,.88555],65:[0,.68611,0,0,.86555],66:[0,.68611,.0992,0,.81666],67:[0,.68611,.14208,0,.82666],68:[0,.68611,.09062,0,.87555],69:[0,.68611,.11431,0,.75666],70:[0,.68611,.12903,0,.72722],71:[0,.68611,.07347,0,.89527],72:[0,.68611,.17208,0,.8961],73:[0,.68611,.15681,0,.47166],74:[0,.68611,.145,0,.61055],75:[0,.68611,.14208,0,.89499],76:[0,.68611,0,0,.69777],77:[0,.68611,.17208,0,1.07277],78:[0,.68611,.17208,0,.8961],79:[0,.68611,.09062,0,.85499],80:[0,.68611,.0992,0,.78721],81:[.19444,.68611,.09062,0,.85499],82:[0,.68611,.02559,0,.85944],83:[0,.68611,.11264,0,.64999],84:[0,.68611,.12903,0,.7961],85:[0,.68611,.17208,0,.88083],86:[0,.68611,.18625,0,.86555],87:[0,.68611,.18625,0,1.15999],88:[0,.68611,.15681,0,.86555],89:[0,.68611,.19803,0,.86555],90:[0,.68611,.14208,0,.70888],91:[.25,.75,.1875,0,.35611],93:[.25,.75,.09972,0,.35611],94:[0,.69444,.06709,0,.59111],95:[.31,.13444,.09811,0,.59111],97:[0,.44444,.09426,0,.59111],98:[0,.69444,.07861,0,.53222],99:[0,.44444,.05222,0,.53222],100:[0,.69444,.10861,0,.59111],101:[0,.44444,.085,0,.53222],102:[.19444,.69444,.21778,0,.4],103:[.19444,.44444,.105,0,.53222],104:[0,.69444,.09426,0,.59111],105:[0,.69326,.11387,0,.35555],106:[.19444,.69326,.1672,0,.35555],107:[0,.69444,.11111,0,.53222],108:[0,.69444,.10861,0,.29666],109:[0,.44444,.09426,0,.94444],110:[0,.44444,.09426,0,.64999],111:[0,.44444,.07861,0,.59111],112:[.19444,.44444,.07861,0,.59111],113:[.19444,.44444,.105,0,.53222],114:[0,.44444,.11111,0,.50167],115:[0,.44444,.08167,0,.48694],116:[0,.63492,.09639,0,.385],117:[0,.44444,.09426,0,.62055],118:[0,.44444,.11111,0,.53222],119:[0,.44444,.11111,0,.76777],120:[0,.44444,.12583,0,.56055],121:[.19444,.44444,.105,0,.56166],122:[0,.44444,.13889,0,.49055],126:[.35,.34444,.11472,0,.59111],160:[0,0,0,0,.25],168:[0,.69444,.11473,0,.59111],176:[0,.69444,0,0,.94888],184:[.17014,0,0,0,.53222],198:[0,.68611,.11431,0,1.02277],216:[.04861,.73472,.09062,0,.88555],223:[.19444,.69444,.09736,0,.665],230:[0,.44444,.085,0,.82666],248:[.09722,.54167,.09458,0,.59111],305:[0,.44444,.09426,0,.35555],338:[0,.68611,.11431,0,1.14054],339:[0,.44444,.085,0,.82666],567:[.19444,.44444,.04611,0,.385],710:[0,.69444,.06709,0,.59111],711:[0,.63194,.08271,0,.59111],713:[0,.59444,.10444,0,.59111],714:[0,.69444,.08528,0,.59111],715:[0,.69444,0,0,.59111],728:[0,.69444,.10333,0,.59111],729:[0,.69444,.12945,0,.35555],730:[0,.69444,0,0,.94888],732:[0,.69444,.11472,0,.59111],733:[0,.69444,.11472,0,.59111],915:[0,.68611,.12903,0,.69777],916:[0,.68611,0,0,.94444],920:[0,.68611,.09062,0,.88555],923:[0,.68611,0,0,.80666],926:[0,.68611,.15092,0,.76777],928:[0,.68611,.17208,0,.8961],931:[0,.68611,.11431,0,.82666],933:[0,.68611,.10778,0,.88555],934:[0,.68611,.05632,0,.82666],936:[0,.68611,.10778,0,.88555],937:[0,.68611,.0992,0,.82666],8211:[0,.44444,.09811,0,.59111],8212:[0,.44444,.09811,0,1.18221],8216:[0,.69444,.12945,0,.35555],8217:[0,.69444,.12945,0,.35555],8220:[0,.69444,.16772,0,.62055],8221:[0,.69444,.07939,0,.62055]},"Main-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.12417,0,.30667],34:[0,.69444,.06961,0,.51444],35:[.19444,.69444,.06616,0,.81777],37:[.05556,.75,.13639,0,.81777],38:[0,.69444,.09694,0,.76666],39:[0,.69444,.12417,0,.30667],40:[.25,.75,.16194,0,.40889],41:[.25,.75,.03694,0,.40889],42:[0,.75,.14917,0,.51111],43:[.05667,.56167,.03694,0,.76666],44:[.19444,.10556,0,0,.30667],45:[0,.43056,.02826,0,.35778],46:[0,.10556,0,0,.30667],47:[.25,.75,.16194,0,.51111],48:[0,.64444,.13556,0,.51111],49:[0,.64444,.13556,0,.51111],50:[0,.64444,.13556,0,.51111],51:[0,.64444,.13556,0,.51111],52:[.19444,.64444,.13556,0,.51111],53:[0,.64444,.13556,0,.51111],54:[0,.64444,.13556,0,.51111],55:[.19444,.64444,.13556,0,.51111],56:[0,.64444,.13556,0,.51111],57:[0,.64444,.13556,0,.51111],58:[0,.43056,.0582,0,.30667],59:[.19444,.43056,.0582,0,.30667],61:[-.13313,.36687,.06616,0,.76666],63:[0,.69444,.1225,0,.51111],64:[0,.69444,.09597,0,.76666],65:[0,.68333,0,0,.74333],66:[0,.68333,.10257,0,.70389],67:[0,.68333,.14528,0,.71555],68:[0,.68333,.09403,0,.755],69:[0,.68333,.12028,0,.67833],70:[0,.68333,.13305,0,.65277],71:[0,.68333,.08722,0,.77361],72:[0,.68333,.16389,0,.74333],73:[0,.68333,.15806,0,.38555],74:[0,.68333,.14028,0,.525],75:[0,.68333,.14528,0,.76888],76:[0,.68333,0,0,.62722],77:[0,.68333,.16389,0,.89666],78:[0,.68333,.16389,0,.74333],79:[0,.68333,.09403,0,.76666],80:[0,.68333,.10257,0,.67833],81:[.19444,.68333,.09403,0,.76666],82:[0,.68333,.03868,0,.72944],83:[0,.68333,.11972,0,.56222],84:[0,.68333,.13305,0,.71555],85:[0,.68333,.16389,0,.74333],86:[0,.68333,.18361,0,.74333],87:[0,.68333,.18361,0,.99888],88:[0,.68333,.15806,0,.74333],89:[0,.68333,.19383,0,.74333],90:[0,.68333,.14528,0,.61333],91:[.25,.75,.1875,0,.30667],93:[.25,.75,.10528,0,.30667],94:[0,.69444,.06646,0,.51111],95:[.31,.12056,.09208,0,.51111],97:[0,.43056,.07671,0,.51111],98:[0,.69444,.06312,0,.46],99:[0,.43056,.05653,0,.46],100:[0,.69444,.10333,0,.51111],101:[0,.43056,.07514,0,.46],102:[.19444,.69444,.21194,0,.30667],103:[.19444,.43056,.08847,0,.46],104:[0,.69444,.07671,0,.51111],105:[0,.65536,.1019,0,.30667],106:[.19444,.65536,.14467,0,.30667],107:[0,.69444,.10764,0,.46],108:[0,.69444,.10333,0,.25555],109:[0,.43056,.07671,0,.81777],110:[0,.43056,.07671,0,.56222],111:[0,.43056,.06312,0,.51111],112:[.19444,.43056,.06312,0,.51111],113:[.19444,.43056,.08847,0,.46],114:[0,.43056,.10764,0,.42166],115:[0,.43056,.08208,0,.40889],116:[0,.61508,.09486,0,.33222],117:[0,.43056,.07671,0,.53666],118:[0,.43056,.10764,0,.46],119:[0,.43056,.10764,0,.66444],120:[0,.43056,.12042,0,.46389],121:[.19444,.43056,.08847,0,.48555],122:[0,.43056,.12292,0,.40889],126:[.35,.31786,.11585,0,.51111],160:[0,0,0,0,.25],168:[0,.66786,.10474,0,.51111],176:[0,.69444,0,0,.83129],184:[.17014,0,0,0,.46],198:[0,.68333,.12028,0,.88277],216:[.04861,.73194,.09403,0,.76666],223:[.19444,.69444,.10514,0,.53666],230:[0,.43056,.07514,0,.71555],248:[.09722,.52778,.09194,0,.51111],338:[0,.68333,.12028,0,.98499],339:[0,.43056,.07514,0,.71555],710:[0,.69444,.06646,0,.51111],711:[0,.62847,.08295,0,.51111],713:[0,.56167,.10333,0,.51111],714:[0,.69444,.09694,0,.51111],715:[0,.69444,0,0,.51111],728:[0,.69444,.10806,0,.51111],729:[0,.66786,.11752,0,.30667],730:[0,.69444,0,0,.83129],732:[0,.66786,.11585,0,.51111],733:[0,.69444,.1225,0,.51111],915:[0,.68333,.13305,0,.62722],916:[0,.68333,0,0,.81777],920:[0,.68333,.09403,0,.76666],923:[0,.68333,0,0,.69222],926:[0,.68333,.15294,0,.66444],928:[0,.68333,.16389,0,.74333],931:[0,.68333,.12028,0,.71555],933:[0,.68333,.11111,0,.76666],934:[0,.68333,.05986,0,.71555],936:[0,.68333,.11111,0,.76666],937:[0,.68333,.10257,0,.71555],8211:[0,.43056,.09208,0,.51111],8212:[0,.43056,.09208,0,1.02222],8216:[0,.69444,.12417,0,.30667],8217:[0,.69444,.12417,0,.30667],8220:[0,.69444,.1685,0,.51444],8221:[0,.69444,.06961,0,.51444],8463:[0,.68889,0,0,.54028]},"Main-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.27778],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.77778],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.19444,.10556,0,0,.27778],45:[0,.43056,0,0,.33333],46:[0,.10556,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.64444,0,0,.5],49:[0,.64444,0,0,.5],50:[0,.64444,0,0,.5],51:[0,.64444,0,0,.5],52:[0,.64444,0,0,.5],53:[0,.64444,0,0,.5],54:[0,.64444,0,0,.5],55:[0,.64444,0,0,.5],56:[0,.64444,0,0,.5],57:[0,.64444,0,0,.5],58:[0,.43056,0,0,.27778],59:[.19444,.43056,0,0,.27778],60:[.0391,.5391,0,0,.77778],61:[-.13313,.36687,0,0,.77778],62:[.0391,.5391,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.77778],65:[0,.68333,0,0,.75],66:[0,.68333,0,0,.70834],67:[0,.68333,0,0,.72222],68:[0,.68333,0,0,.76389],69:[0,.68333,0,0,.68056],70:[0,.68333,0,0,.65278],71:[0,.68333,0,0,.78472],72:[0,.68333,0,0,.75],73:[0,.68333,0,0,.36111],74:[0,.68333,0,0,.51389],75:[0,.68333,0,0,.77778],76:[0,.68333,0,0,.625],77:[0,.68333,0,0,.91667],78:[0,.68333,0,0,.75],79:[0,.68333,0,0,.77778],80:[0,.68333,0,0,.68056],81:[.19444,.68333,0,0,.77778],82:[0,.68333,0,0,.73611],83:[0,.68333,0,0,.55556],84:[0,.68333,0,0,.72222],85:[0,.68333,0,0,.75],86:[0,.68333,.01389,0,.75],87:[0,.68333,.01389,0,1.02778],88:[0,.68333,0,0,.75],89:[0,.68333,.025,0,.75],90:[0,.68333,0,0,.61111],91:[.25,.75,0,0,.27778],92:[.25,.75,0,0,.5],93:[.25,.75,0,0,.27778],94:[0,.69444,0,0,.5],95:[.31,.12056,.02778,0,.5],97:[0,.43056,0,0,.5],98:[0,.69444,0,0,.55556],99:[0,.43056,0,0,.44445],100:[0,.69444,0,0,.55556],101:[0,.43056,0,0,.44445],102:[0,.69444,.07778,0,.30556],103:[.19444,.43056,.01389,0,.5],104:[0,.69444,0,0,.55556],105:[0,.66786,0,0,.27778],106:[.19444,.66786,0,0,.30556],107:[0,.69444,0,0,.52778],108:[0,.69444,0,0,.27778],109:[0,.43056,0,0,.83334],110:[0,.43056,0,0,.55556],111:[0,.43056,0,0,.5],112:[.19444,.43056,0,0,.55556],113:[.19444,.43056,0,0,.52778],114:[0,.43056,0,0,.39167],115:[0,.43056,0,0,.39445],116:[0,.61508,0,0,.38889],117:[0,.43056,0,0,.55556],118:[0,.43056,.01389,0,.52778],119:[0,.43056,.01389,0,.72222],120:[0,.43056,0,0,.52778],121:[.19444,.43056,.01389,0,.52778],122:[0,.43056,0,0,.44445],123:[.25,.75,0,0,.5],124:[.25,.75,0,0,.27778],125:[.25,.75,0,0,.5],126:[.35,.31786,0,0,.5],160:[0,0,0,0,.25],163:[0,.69444,0,0,.76909],167:[.19444,.69444,0,0,.44445],168:[0,.66786,0,0,.5],172:[0,.43056,0,0,.66667],176:[0,.69444,0,0,.75],177:[.08333,.58333,0,0,.77778],182:[.19444,.69444,0,0,.61111],184:[.17014,0,0,0,.44445],198:[0,.68333,0,0,.90278],215:[.08333,.58333,0,0,.77778],216:[.04861,.73194,0,0,.77778],223:[0,.69444,0,0,.5],230:[0,.43056,0,0,.72222],247:[.08333,.58333,0,0,.77778],248:[.09722,.52778,0,0,.5],305:[0,.43056,0,0,.27778],338:[0,.68333,0,0,1.01389],339:[0,.43056,0,0,.77778],567:[.19444,.43056,0,0,.30556],710:[0,.69444,0,0,.5],711:[0,.62847,0,0,.5],713:[0,.56778,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.66786,0,0,.27778],730:[0,.69444,0,0,.75],732:[0,.66786,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.68333,0,0,.625],916:[0,.68333,0,0,.83334],920:[0,.68333,0,0,.77778],923:[0,.68333,0,0,.69445],926:[0,.68333,0,0,.66667],928:[0,.68333,0,0,.75],931:[0,.68333,0,0,.72222],933:[0,.68333,0,0,.77778],934:[0,.68333,0,0,.72222],936:[0,.68333,0,0,.77778],937:[0,.68333,0,0,.72222],8211:[0,.43056,.02778,0,.5],8212:[0,.43056,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5],8224:[.19444,.69444,0,0,.44445],8225:[.19444,.69444,0,0,.44445],8230:[0,.123,0,0,1.172],8242:[0,.55556,0,0,.275],8407:[0,.71444,.15382,0,.5],8463:[0,.68889,0,0,.54028],8465:[0,.69444,0,0,.72222],8467:[0,.69444,0,.11111,.41667],8472:[.19444,.43056,0,.11111,.63646],8476:[0,.69444,0,0,.72222],8501:[0,.69444,0,0,.61111],8592:[-.13313,.36687,0,0,1],8593:[.19444,.69444,0,0,.5],8594:[-.13313,.36687,0,0,1],8595:[.19444,.69444,0,0,.5],8596:[-.13313,.36687,0,0,1],8597:[.25,.75,0,0,.5],8598:[.19444,.69444,0,0,1],8599:[.19444,.69444,0,0,1],8600:[.19444,.69444,0,0,1],8601:[.19444,.69444,0,0,1],8614:[.011,.511,0,0,1],8617:[.011,.511,0,0,1.126],8618:[.011,.511,0,0,1.126],8636:[-.13313,.36687,0,0,1],8637:[-.13313,.36687,0,0,1],8640:[-.13313,.36687,0,0,1],8641:[-.13313,.36687,0,0,1],8652:[.011,.671,0,0,1],8656:[-.13313,.36687,0,0,1],8657:[.19444,.69444,0,0,.61111],8658:[-.13313,.36687,0,0,1],8659:[.19444,.69444,0,0,.61111],8660:[-.13313,.36687,0,0,1],8661:[.25,.75,0,0,.61111],8704:[0,.69444,0,0,.55556],8706:[0,.69444,.05556,.08334,.5309],8707:[0,.69444,0,0,.55556],8709:[.05556,.75,0,0,.5],8711:[0,.68333,0,0,.83334],8712:[.0391,.5391,0,0,.66667],8715:[.0391,.5391,0,0,.66667],8722:[.08333,.58333,0,0,.77778],8723:[.08333,.58333,0,0,.77778],8725:[.25,.75,0,0,.5],8726:[.25,.75,0,0,.5],8727:[-.03472,.46528,0,0,.5],8728:[-.05555,.44445,0,0,.5],8729:[-.05555,.44445,0,0,.5],8730:[.2,.8,0,0,.83334],8733:[0,.43056,0,0,.77778],8734:[0,.43056,0,0,1],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.27778],8741:[.25,.75,0,0,.5],8743:[0,.55556,0,0,.66667],8744:[0,.55556,0,0,.66667],8745:[0,.55556,0,0,.66667],8746:[0,.55556,0,0,.66667],8747:[.19444,.69444,.11111,0,.41667],8764:[-.13313,.36687,0,0,.77778],8768:[.19444,.69444,0,0,.27778],8771:[-.03625,.46375,0,0,.77778],8773:[-.022,.589,0,0,.778],8776:[-.01688,.48312,0,0,.77778],8781:[-.03625,.46375,0,0,.77778],8784:[-.133,.673,0,0,.778],8801:[-.03625,.46375,0,0,.77778],8804:[.13597,.63597,0,0,.77778],8805:[.13597,.63597,0,0,.77778],8810:[.0391,.5391,0,0,1],8811:[.0391,.5391,0,0,1],8826:[.0391,.5391,0,0,.77778],8827:[.0391,.5391,0,0,.77778],8834:[.0391,.5391,0,0,.77778],8835:[.0391,.5391,0,0,.77778],8838:[.13597,.63597,0,0,.77778],8839:[.13597,.63597,0,0,.77778],8846:[0,.55556,0,0,.66667],8849:[.13597,.63597,0,0,.77778],8850:[.13597,.63597,0,0,.77778],8851:[0,.55556,0,0,.66667],8852:[0,.55556,0,0,.66667],8853:[.08333,.58333,0,0,.77778],8854:[.08333,.58333,0,0,.77778],8855:[.08333,.58333,0,0,.77778],8856:[.08333,.58333,0,0,.77778],8857:[.08333,.58333,0,0,.77778],8866:[0,.69444,0,0,.61111],8867:[0,.69444,0,0,.61111],8868:[0,.69444,0,0,.77778],8869:[0,.69444,0,0,.77778],8872:[.249,.75,0,0,.867],8900:[-.05555,.44445,0,0,.5],8901:[-.05555,.44445,0,0,.27778],8902:[-.03472,.46528,0,0,.5],8904:[.005,.505,0,0,.9],8942:[.03,.903,0,0,.278],8943:[-.19,.313,0,0,1.172],8945:[-.1,.823,0,0,1.282],8968:[.25,.75,0,0,.44445],8969:[.25,.75,0,0,.44445],8970:[.25,.75,0,0,.44445],8971:[.25,.75,0,0,.44445],8994:[-.14236,.35764,0,0,1],8995:[-.14236,.35764,0,0,1],9136:[.244,.744,0,0,.412],9137:[.244,.745,0,0,.412],9651:[.19444,.69444,0,0,.88889],9657:[-.03472,.46528,0,0,.5],9661:[.19444,.69444,0,0,.88889],9667:[-.03472,.46528,0,0,.5],9711:[.19444,.69444,0,0,1],9824:[.12963,.69444,0,0,.77778],9825:[.12963,.69444,0,0,.77778],9826:[.12963,.69444,0,0,.77778],9827:[.12963,.69444,0,0,.77778],9837:[0,.75,0,0,.38889],9838:[.19444,.69444,0,0,.38889],9839:[.19444,.69444,0,0,.38889],10216:[.25,.75,0,0,.38889],10217:[.25,.75,0,0,.38889],10222:[.244,.744,0,0,.412],10223:[.244,.745,0,0,.412],10229:[.011,.511,0,0,1.609],10230:[.011,.511,0,0,1.638],10231:[.011,.511,0,0,1.859],10232:[.024,.525,0,0,1.609],10233:[.024,.525,0,0,1.638],10234:[.024,.525,0,0,1.858],10236:[.011,.511,0,0,1.638],10815:[0,.68333,0,0,.75],10927:[.13597,.63597,0,0,.77778],10928:[.13597,.63597,0,0,.77778],57376:[.19444,.69444,0,0,0]},"Math-BoldItalic":{32:[0,0,0,0,.25],48:[0,.44444,0,0,.575],49:[0,.44444,0,0,.575],50:[0,.44444,0,0,.575],51:[.19444,.44444,0,0,.575],52:[.19444,.44444,0,0,.575],53:[.19444,.44444,0,0,.575],54:[0,.64444,0,0,.575],55:[.19444,.44444,0,0,.575],56:[0,.64444,0,0,.575],57:[.19444,.44444,0,0,.575],65:[0,.68611,0,0,.86944],66:[0,.68611,.04835,0,.8664],67:[0,.68611,.06979,0,.81694],68:[0,.68611,.03194,0,.93812],69:[0,.68611,.05451,0,.81007],70:[0,.68611,.15972,0,.68889],71:[0,.68611,0,0,.88673],72:[0,.68611,.08229,0,.98229],73:[0,.68611,.07778,0,.51111],74:[0,.68611,.10069,0,.63125],75:[0,.68611,.06979,0,.97118],76:[0,.68611,0,0,.75555],77:[0,.68611,.11424,0,1.14201],78:[0,.68611,.11424,0,.95034],79:[0,.68611,.03194,0,.83666],80:[0,.68611,.15972,0,.72309],81:[.19444,.68611,0,0,.86861],82:[0,.68611,.00421,0,.87235],83:[0,.68611,.05382,0,.69271],84:[0,.68611,.15972,0,.63663],85:[0,.68611,.11424,0,.80027],86:[0,.68611,.25555,0,.67778],87:[0,.68611,.15972,0,1.09305],88:[0,.68611,.07778,0,.94722],89:[0,.68611,.25555,0,.67458],90:[0,.68611,.06979,0,.77257],97:[0,.44444,0,0,.63287],98:[0,.69444,0,0,.52083],99:[0,.44444,0,0,.51342],100:[0,.69444,0,0,.60972],101:[0,.44444,0,0,.55361],102:[.19444,.69444,.11042,0,.56806],103:[.19444,.44444,.03704,0,.5449],104:[0,.69444,0,0,.66759],105:[0,.69326,0,0,.4048],106:[.19444,.69326,.0622,0,.47083],107:[0,.69444,.01852,0,.6037],108:[0,.69444,.0088,0,.34815],109:[0,.44444,0,0,1.0324],110:[0,.44444,0,0,.71296],111:[0,.44444,0,0,.58472],112:[.19444,.44444,0,0,.60092],113:[.19444,.44444,.03704,0,.54213],114:[0,.44444,.03194,0,.5287],115:[0,.44444,0,0,.53125],116:[0,.63492,0,0,.41528],117:[0,.44444,0,0,.68102],118:[0,.44444,.03704,0,.56666],119:[0,.44444,.02778,0,.83148],120:[0,.44444,0,0,.65903],121:[.19444,.44444,.03704,0,.59028],122:[0,.44444,.04213,0,.55509],160:[0,0,0,0,.25],915:[0,.68611,.15972,0,.65694],916:[0,.68611,0,0,.95833],920:[0,.68611,.03194,0,.86722],923:[0,.68611,0,0,.80555],926:[0,.68611,.07458,0,.84125],928:[0,.68611,.08229,0,.98229],931:[0,.68611,.05451,0,.88507],933:[0,.68611,.15972,0,.67083],934:[0,.68611,0,0,.76666],936:[0,.68611,.11653,0,.71402],937:[0,.68611,.04835,0,.8789],945:[0,.44444,0,0,.76064],946:[.19444,.69444,.03403,0,.65972],947:[.19444,.44444,.06389,0,.59003],948:[0,.69444,.03819,0,.52222],949:[0,.44444,0,0,.52882],950:[.19444,.69444,.06215,0,.50833],951:[.19444,.44444,.03704,0,.6],952:[0,.69444,.03194,0,.5618],953:[0,.44444,0,0,.41204],954:[0,.44444,0,0,.66759],955:[0,.69444,0,0,.67083],956:[.19444,.44444,0,0,.70787],957:[0,.44444,.06898,0,.57685],958:[.19444,.69444,.03021,0,.50833],959:[0,.44444,0,0,.58472],960:[0,.44444,.03704,0,.68241],961:[.19444,.44444,0,0,.6118],962:[.09722,.44444,.07917,0,.42361],963:[0,.44444,.03704,0,.68588],964:[0,.44444,.13472,0,.52083],965:[0,.44444,.03704,0,.63055],966:[.19444,.44444,0,0,.74722],967:[.19444,.44444,0,0,.71805],968:[.19444,.69444,.03704,0,.75833],969:[0,.44444,.03704,0,.71782],977:[0,.69444,0,0,.69155],981:[.19444,.69444,0,0,.7125],982:[0,.44444,.03194,0,.975],1009:[.19444,.44444,0,0,.6118],1013:[0,.44444,0,0,.48333],57649:[0,.44444,0,0,.39352],57911:[.19444,.44444,0,0,.43889]},"Math-Italic":{32:[0,0,0,0,.25],48:[0,.43056,0,0,.5],49:[0,.43056,0,0,.5],50:[0,.43056,0,0,.5],51:[.19444,.43056,0,0,.5],52:[.19444,.43056,0,0,.5],53:[.19444,.43056,0,0,.5],54:[0,.64444,0,0,.5],55:[.19444,.43056,0,0,.5],56:[0,.64444,0,0,.5],57:[.19444,.43056,0,0,.5],65:[0,.68333,0,.13889,.75],66:[0,.68333,.05017,.08334,.75851],67:[0,.68333,.07153,.08334,.71472],68:[0,.68333,.02778,.05556,.82792],69:[0,.68333,.05764,.08334,.7382],70:[0,.68333,.13889,.08334,.64306],71:[0,.68333,0,.08334,.78625],72:[0,.68333,.08125,.05556,.83125],73:[0,.68333,.07847,.11111,.43958],74:[0,.68333,.09618,.16667,.55451],75:[0,.68333,.07153,.05556,.84931],76:[0,.68333,0,.02778,.68056],77:[0,.68333,.10903,.08334,.97014],78:[0,.68333,.10903,.08334,.80347],79:[0,.68333,.02778,.08334,.76278],80:[0,.68333,.13889,.08334,.64201],81:[.19444,.68333,0,.08334,.79056],82:[0,.68333,.00773,.08334,.75929],83:[0,.68333,.05764,.08334,.6132],84:[0,.68333,.13889,.08334,.58438],85:[0,.68333,.10903,.02778,.68278],86:[0,.68333,.22222,0,.58333],87:[0,.68333,.13889,0,.94445],88:[0,.68333,.07847,.08334,.82847],89:[0,.68333,.22222,0,.58056],90:[0,.68333,.07153,.08334,.68264],97:[0,.43056,0,0,.52859],98:[0,.69444,0,0,.42917],99:[0,.43056,0,.05556,.43276],100:[0,.69444,0,.16667,.52049],101:[0,.43056,0,.05556,.46563],102:[.19444,.69444,.10764,.16667,.48959],103:[.19444,.43056,.03588,.02778,.47697],104:[0,.69444,0,0,.57616],105:[0,.65952,0,0,.34451],106:[.19444,.65952,.05724,0,.41181],107:[0,.69444,.03148,0,.5206],108:[0,.69444,.01968,.08334,.29838],109:[0,.43056,0,0,.87801],110:[0,.43056,0,0,.60023],111:[0,.43056,0,.05556,.48472],112:[.19444,.43056,0,.08334,.50313],113:[.19444,.43056,.03588,.08334,.44641],114:[0,.43056,.02778,.05556,.45116],115:[0,.43056,0,.05556,.46875],116:[0,.61508,0,.08334,.36111],117:[0,.43056,0,.02778,.57246],118:[0,.43056,.03588,.02778,.48472],119:[0,.43056,.02691,.08334,.71592],120:[0,.43056,0,.02778,.57153],121:[.19444,.43056,.03588,.05556,.49028],122:[0,.43056,.04398,.05556,.46505],160:[0,0,0,0,.25],915:[0,.68333,.13889,.08334,.61528],916:[0,.68333,0,.16667,.83334],920:[0,.68333,.02778,.08334,.76278],923:[0,.68333,0,.16667,.69445],926:[0,.68333,.07569,.08334,.74236],928:[0,.68333,.08125,.05556,.83125],931:[0,.68333,.05764,.08334,.77986],933:[0,.68333,.13889,.05556,.58333],934:[0,.68333,0,.08334,.66667],936:[0,.68333,.11,.05556,.61222],937:[0,.68333,.05017,.08334,.7724],945:[0,.43056,.0037,.02778,.6397],946:[.19444,.69444,.05278,.08334,.56563],947:[.19444,.43056,.05556,0,.51773],948:[0,.69444,.03785,.05556,.44444],949:[0,.43056,0,.08334,.46632],950:[.19444,.69444,.07378,.08334,.4375],951:[.19444,.43056,.03588,.05556,.49653],952:[0,.69444,.02778,.08334,.46944],953:[0,.43056,0,.05556,.35394],954:[0,.43056,0,0,.57616],955:[0,.69444,0,0,.58334],956:[.19444,.43056,0,.02778,.60255],957:[0,.43056,.06366,.02778,.49398],958:[.19444,.69444,.04601,.11111,.4375],959:[0,.43056,0,.05556,.48472],960:[0,.43056,.03588,0,.57003],961:[.19444,.43056,0,.08334,.51702],962:[.09722,.43056,.07986,.08334,.36285],963:[0,.43056,.03588,0,.57141],964:[0,.43056,.1132,.02778,.43715],965:[0,.43056,.03588,.02778,.54028],966:[.19444,.43056,0,.08334,.65417],967:[.19444,.43056,0,.05556,.62569],968:[.19444,.69444,.03588,.11111,.65139],969:[0,.43056,.03588,0,.62245],977:[0,.69444,0,.08334,.59144],981:[.19444,.69444,0,.08334,.59583],982:[0,.43056,.02778,0,.82813],1009:[.19444,.43056,0,.08334,.51702],1013:[0,.43056,0,.05556,.4059],57649:[0,.43056,0,.02778,.32246],57911:[.19444,.43056,0,.08334,.38403]},"SansSerif-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.36667],34:[0,.69444,0,0,.55834],35:[.19444,.69444,0,0,.91667],36:[.05556,.75,0,0,.55],37:[.05556,.75,0,0,1.02912],38:[0,.69444,0,0,.83056],39:[0,.69444,0,0,.30556],40:[.25,.75,0,0,.42778],41:[.25,.75,0,0,.42778],42:[0,.75,0,0,.55],43:[.11667,.61667,0,0,.85556],44:[.10556,.13056,0,0,.30556],45:[0,.45833,0,0,.36667],46:[0,.13056,0,0,.30556],47:[.25,.75,0,0,.55],48:[0,.69444,0,0,.55],49:[0,.69444,0,0,.55],50:[0,.69444,0,0,.55],51:[0,.69444,0,0,.55],52:[0,.69444,0,0,.55],53:[0,.69444,0,0,.55],54:[0,.69444,0,0,.55],55:[0,.69444,0,0,.55],56:[0,.69444,0,0,.55],57:[0,.69444,0,0,.55],58:[0,.45833,0,0,.30556],59:[.10556,.45833,0,0,.30556],61:[-.09375,.40625,0,0,.85556],63:[0,.69444,0,0,.51945],64:[0,.69444,0,0,.73334],65:[0,.69444,0,0,.73334],66:[0,.69444,0,0,.73334],67:[0,.69444,0,0,.70278],68:[0,.69444,0,0,.79445],69:[0,.69444,0,0,.64167],70:[0,.69444,0,0,.61111],71:[0,.69444,0,0,.73334],72:[0,.69444,0,0,.79445],73:[0,.69444,0,0,.33056],74:[0,.69444,0,0,.51945],75:[0,.69444,0,0,.76389],76:[0,.69444,0,0,.58056],77:[0,.69444,0,0,.97778],78:[0,.69444,0,0,.79445],79:[0,.69444,0,0,.79445],80:[0,.69444,0,0,.70278],81:[.10556,.69444,0,0,.79445],82:[0,.69444,0,0,.70278],83:[0,.69444,0,0,.61111],84:[0,.69444,0,0,.73334],85:[0,.69444,0,0,.76389],86:[0,.69444,.01528,0,.73334],87:[0,.69444,.01528,0,1.03889],88:[0,.69444,0,0,.73334],89:[0,.69444,.0275,0,.73334],90:[0,.69444,0,0,.67223],91:[.25,.75,0,0,.34306],93:[.25,.75,0,0,.34306],94:[0,.69444,0,0,.55],95:[.35,.10833,.03056,0,.55],97:[0,.45833,0,0,.525],98:[0,.69444,0,0,.56111],99:[0,.45833,0,0,.48889],100:[0,.69444,0,0,.56111],101:[0,.45833,0,0,.51111],102:[0,.69444,.07639,0,.33611],103:[.19444,.45833,.01528,0,.55],104:[0,.69444,0,0,.56111],105:[0,.69444,0,0,.25556],106:[.19444,.69444,0,0,.28611],107:[0,.69444,0,0,.53056],108:[0,.69444,0,0,.25556],109:[0,.45833,0,0,.86667],110:[0,.45833,0,0,.56111],111:[0,.45833,0,0,.55],112:[.19444,.45833,0,0,.56111],113:[.19444,.45833,0,0,.56111],114:[0,.45833,.01528,0,.37222],115:[0,.45833,0,0,.42167],116:[0,.58929,0,0,.40417],117:[0,.45833,0,0,.56111],118:[0,.45833,.01528,0,.5],119:[0,.45833,.01528,0,.74445],120:[0,.45833,0,0,.5],121:[.19444,.45833,.01528,0,.5],122:[0,.45833,0,0,.47639],126:[.35,.34444,0,0,.55],160:[0,0,0,0,.25],168:[0,.69444,0,0,.55],176:[0,.69444,0,0,.73334],180:[0,.69444,0,0,.55],184:[.17014,0,0,0,.48889],305:[0,.45833,0,0,.25556],567:[.19444,.45833,0,0,.28611],710:[0,.69444,0,0,.55],711:[0,.63542,0,0,.55],713:[0,.63778,0,0,.55],728:[0,.69444,0,0,.55],729:[0,.69444,0,0,.30556],730:[0,.69444,0,0,.73334],732:[0,.69444,0,0,.55],733:[0,.69444,0,0,.55],915:[0,.69444,0,0,.58056],916:[0,.69444,0,0,.91667],920:[0,.69444,0,0,.85556],923:[0,.69444,0,0,.67223],926:[0,.69444,0,0,.73334],928:[0,.69444,0,0,.79445],931:[0,.69444,0,0,.79445],933:[0,.69444,0,0,.85556],934:[0,.69444,0,0,.79445],936:[0,.69444,0,0,.85556],937:[0,.69444,0,0,.79445],8211:[0,.45833,.03056,0,.55],8212:[0,.45833,.03056,0,1.10001],8216:[0,.69444,0,0,.30556],8217:[0,.69444,0,0,.30556],8220:[0,.69444,0,0,.55834],8221:[0,.69444,0,0,.55834]},"SansSerif-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.05733,0,.31945],34:[0,.69444,.00316,0,.5],35:[.19444,.69444,.05087,0,.83334],36:[.05556,.75,.11156,0,.5],37:[.05556,.75,.03126,0,.83334],38:[0,.69444,.03058,0,.75834],39:[0,.69444,.07816,0,.27778],40:[.25,.75,.13164,0,.38889],41:[.25,.75,.02536,0,.38889],42:[0,.75,.11775,0,.5],43:[.08333,.58333,.02536,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,.01946,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,.13164,0,.5],48:[0,.65556,.11156,0,.5],49:[0,.65556,.11156,0,.5],50:[0,.65556,.11156,0,.5],51:[0,.65556,.11156,0,.5],52:[0,.65556,.11156,0,.5],53:[0,.65556,.11156,0,.5],54:[0,.65556,.11156,0,.5],55:[0,.65556,.11156,0,.5],56:[0,.65556,.11156,0,.5],57:[0,.65556,.11156,0,.5],58:[0,.44444,.02502,0,.27778],59:[.125,.44444,.02502,0,.27778],61:[-.13,.37,.05087,0,.77778],63:[0,.69444,.11809,0,.47222],64:[0,.69444,.07555,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,.08293,0,.66667],67:[0,.69444,.11983,0,.63889],68:[0,.69444,.07555,0,.72223],69:[0,.69444,.11983,0,.59722],70:[0,.69444,.13372,0,.56945],71:[0,.69444,.11983,0,.66667],72:[0,.69444,.08094,0,.70834],73:[0,.69444,.13372,0,.27778],74:[0,.69444,.08094,0,.47222],75:[0,.69444,.11983,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,.08094,0,.875],78:[0,.69444,.08094,0,.70834],79:[0,.69444,.07555,0,.73611],80:[0,.69444,.08293,0,.63889],81:[.125,.69444,.07555,0,.73611],82:[0,.69444,.08293,0,.64584],83:[0,.69444,.09205,0,.55556],84:[0,.69444,.13372,0,.68056],85:[0,.69444,.08094,0,.6875],86:[0,.69444,.1615,0,.66667],87:[0,.69444,.1615,0,.94445],88:[0,.69444,.13372,0,.66667],89:[0,.69444,.17261,0,.66667],90:[0,.69444,.11983,0,.61111],91:[.25,.75,.15942,0,.28889],93:[.25,.75,.08719,0,.28889],94:[0,.69444,.0799,0,.5],95:[.35,.09444,.08616,0,.5],97:[0,.44444,.00981,0,.48056],98:[0,.69444,.03057,0,.51667],99:[0,.44444,.08336,0,.44445],100:[0,.69444,.09483,0,.51667],101:[0,.44444,.06778,0,.44445],102:[0,.69444,.21705,0,.30556],103:[.19444,.44444,.10836,0,.5],104:[0,.69444,.01778,0,.51667],105:[0,.67937,.09718,0,.23889],106:[.19444,.67937,.09162,0,.26667],107:[0,.69444,.08336,0,.48889],108:[0,.69444,.09483,0,.23889],109:[0,.44444,.01778,0,.79445],110:[0,.44444,.01778,0,.51667],111:[0,.44444,.06613,0,.5],112:[.19444,.44444,.0389,0,.51667],113:[.19444,.44444,.04169,0,.51667],114:[0,.44444,.10836,0,.34167],115:[0,.44444,.0778,0,.38333],116:[0,.57143,.07225,0,.36111],117:[0,.44444,.04169,0,.51667],118:[0,.44444,.10836,0,.46111],119:[0,.44444,.10836,0,.68334],120:[0,.44444,.09169,0,.46111],121:[.19444,.44444,.10836,0,.46111],122:[0,.44444,.08752,0,.43472],126:[.35,.32659,.08826,0,.5],160:[0,0,0,0,.25],168:[0,.67937,.06385,0,.5],176:[0,.69444,0,0,.73752],184:[.17014,0,0,0,.44445],305:[0,.44444,.04169,0,.23889],567:[.19444,.44444,.04169,0,.26667],710:[0,.69444,.0799,0,.5],711:[0,.63194,.08432,0,.5],713:[0,.60889,.08776,0,.5],714:[0,.69444,.09205,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,.09483,0,.5],729:[0,.67937,.07774,0,.27778],730:[0,.69444,0,0,.73752],732:[0,.67659,.08826,0,.5],733:[0,.69444,.09205,0,.5],915:[0,.69444,.13372,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,.07555,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,.12816,0,.66667],928:[0,.69444,.08094,0,.70834],931:[0,.69444,.11983,0,.72222],933:[0,.69444,.09031,0,.77778],934:[0,.69444,.04603,0,.72222],936:[0,.69444,.09031,0,.77778],937:[0,.69444,.08293,0,.72222],8211:[0,.44444,.08616,0,.5],8212:[0,.44444,.08616,0,1],8216:[0,.69444,.07816,0,.27778],8217:[0,.69444,.07816,0,.27778],8220:[0,.69444,.14205,0,.5],8221:[0,.69444,.00316,0,.5]},"SansSerif-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.31945],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.75834],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,0,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.65556,0,0,.5],49:[0,.65556,0,0,.5],50:[0,.65556,0,0,.5],51:[0,.65556,0,0,.5],52:[0,.65556,0,0,.5],53:[0,.65556,0,0,.5],54:[0,.65556,0,0,.5],55:[0,.65556,0,0,.5],56:[0,.65556,0,0,.5],57:[0,.65556,0,0,.5],58:[0,.44444,0,0,.27778],59:[.125,.44444,0,0,.27778],61:[-.13,.37,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,0,0,.66667],67:[0,.69444,0,0,.63889],68:[0,.69444,0,0,.72223],69:[0,.69444,0,0,.59722],70:[0,.69444,0,0,.56945],71:[0,.69444,0,0,.66667],72:[0,.69444,0,0,.70834],73:[0,.69444,0,0,.27778],74:[0,.69444,0,0,.47222],75:[0,.69444,0,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,0,0,.875],78:[0,.69444,0,0,.70834],79:[0,.69444,0,0,.73611],80:[0,.69444,0,0,.63889],81:[.125,.69444,0,0,.73611],82:[0,.69444,0,0,.64584],83:[0,.69444,0,0,.55556],84:[0,.69444,0,0,.68056],85:[0,.69444,0,0,.6875],86:[0,.69444,.01389,0,.66667],87:[0,.69444,.01389,0,.94445],88:[0,.69444,0,0,.66667],89:[0,.69444,.025,0,.66667],90:[0,.69444,0,0,.61111],91:[.25,.75,0,0,.28889],93:[.25,.75,0,0,.28889],94:[0,.69444,0,0,.5],95:[.35,.09444,.02778,0,.5],97:[0,.44444,0,0,.48056],98:[0,.69444,0,0,.51667],99:[0,.44444,0,0,.44445],100:[0,.69444,0,0,.51667],101:[0,.44444,0,0,.44445],102:[0,.69444,.06944,0,.30556],103:[.19444,.44444,.01389,0,.5],104:[0,.69444,0,0,.51667],105:[0,.67937,0,0,.23889],106:[.19444,.67937,0,0,.26667],107:[0,.69444,0,0,.48889],108:[0,.69444,0,0,.23889],109:[0,.44444,0,0,.79445],110:[0,.44444,0,0,.51667],111:[0,.44444,0,0,.5],112:[.19444,.44444,0,0,.51667],113:[.19444,.44444,0,0,.51667],114:[0,.44444,.01389,0,.34167],115:[0,.44444,0,0,.38333],116:[0,.57143,0,0,.36111],117:[0,.44444,0,0,.51667],118:[0,.44444,.01389,0,.46111],119:[0,.44444,.01389,0,.68334],120:[0,.44444,0,0,.46111],121:[.19444,.44444,.01389,0,.46111],122:[0,.44444,0,0,.43472],126:[.35,.32659,0,0,.5],160:[0,0,0,0,.25],168:[0,.67937,0,0,.5],176:[0,.69444,0,0,.66667],184:[.17014,0,0,0,.44445],305:[0,.44444,0,0,.23889],567:[.19444,.44444,0,0,.26667],710:[0,.69444,0,0,.5],711:[0,.63194,0,0,.5],713:[0,.60889,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.67937,0,0,.27778],730:[0,.69444,0,0,.66667],732:[0,.67659,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.69444,0,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,0,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,0,0,.66667],928:[0,.69444,0,0,.70834],931:[0,.69444,0,0,.72222],933:[0,.69444,0,0,.77778],934:[0,.69444,0,0,.72222],936:[0,.69444,0,0,.77778],937:[0,.69444,0,0,.72222],8211:[0,.44444,.02778,0,.5],8212:[0,.44444,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5]},"Script-Regular":{32:[0,0,0,0,.25],65:[0,.7,.22925,0,.80253],66:[0,.7,.04087,0,.90757],67:[0,.7,.1689,0,.66619],68:[0,.7,.09371,0,.77443],69:[0,.7,.18583,0,.56162],70:[0,.7,.13634,0,.89544],71:[0,.7,.17322,0,.60961],72:[0,.7,.29694,0,.96919],73:[0,.7,.19189,0,.80907],74:[.27778,.7,.19189,0,1.05159],75:[0,.7,.31259,0,.91364],76:[0,.7,.19189,0,.87373],77:[0,.7,.15981,0,1.08031],78:[0,.7,.3525,0,.9015],79:[0,.7,.08078,0,.73787],80:[0,.7,.08078,0,1.01262],81:[0,.7,.03305,0,.88282],82:[0,.7,.06259,0,.85],83:[0,.7,.19189,0,.86767],84:[0,.7,.29087,0,.74697],85:[0,.7,.25815,0,.79996],86:[0,.7,.27523,0,.62204],87:[0,.7,.27523,0,.80532],88:[0,.7,.26006,0,.94445],89:[0,.7,.2939,0,.70961],90:[0,.7,.24037,0,.8212],160:[0,0,0,0,.25]},"Size1-Regular":{32:[0,0,0,0,.25],40:[.35001,.85,0,0,.45834],41:[.35001,.85,0,0,.45834],47:[.35001,.85,0,0,.57778],91:[.35001,.85,0,0,.41667],92:[.35001,.85,0,0,.57778],93:[.35001,.85,0,0,.41667],123:[.35001,.85,0,0,.58334],125:[.35001,.85,0,0,.58334],160:[0,0,0,0,.25],710:[0,.72222,0,0,.55556],732:[0,.72222,0,0,.55556],770:[0,.72222,0,0,.55556],771:[0,.72222,0,0,.55556],8214:[-99e-5,.601,0,0,.77778],8593:[1e-5,.6,0,0,.66667],8595:[1e-5,.6,0,0,.66667],8657:[1e-5,.6,0,0,.77778],8659:[1e-5,.6,0,0,.77778],8719:[.25001,.75,0,0,.94445],8720:[.25001,.75,0,0,.94445],8721:[.25001,.75,0,0,1.05556],8730:[.35001,.85,0,0,1],8739:[-.00599,.606,0,0,.33333],8741:[-.00599,.606,0,0,.55556],8747:[.30612,.805,.19445,0,.47222],8748:[.306,.805,.19445,0,.47222],8749:[.306,.805,.19445,0,.47222],8750:[.30612,.805,.19445,0,.47222],8896:[.25001,.75,0,0,.83334],8897:[.25001,.75,0,0,.83334],8898:[.25001,.75,0,0,.83334],8899:[.25001,.75,0,0,.83334],8968:[.35001,.85,0,0,.47222],8969:[.35001,.85,0,0,.47222],8970:[.35001,.85,0,0,.47222],8971:[.35001,.85,0,0,.47222],9168:[-99e-5,.601,0,0,.66667],10216:[.35001,.85,0,0,.47222],10217:[.35001,.85,0,0,.47222],10752:[.25001,.75,0,0,1.11111],10753:[.25001,.75,0,0,1.11111],10754:[.25001,.75,0,0,1.11111],10756:[.25001,.75,0,0,.83334],10758:[.25001,.75,0,0,.83334]},"Size2-Regular":{32:[0,0,0,0,.25],40:[.65002,1.15,0,0,.59722],41:[.65002,1.15,0,0,.59722],47:[.65002,1.15,0,0,.81111],91:[.65002,1.15,0,0,.47222],92:[.65002,1.15,0,0,.81111],93:[.65002,1.15,0,0,.47222],123:[.65002,1.15,0,0,.66667],125:[.65002,1.15,0,0,.66667],160:[0,0,0,0,.25],710:[0,.75,0,0,1],732:[0,.75,0,0,1],770:[0,.75,0,0,1],771:[0,.75,0,0,1],8719:[.55001,1.05,0,0,1.27778],8720:[.55001,1.05,0,0,1.27778],8721:[.55001,1.05,0,0,1.44445],8730:[.65002,1.15,0,0,1],8747:[.86225,1.36,.44445,0,.55556],8748:[.862,1.36,.44445,0,.55556],8749:[.862,1.36,.44445,0,.55556],8750:[.86225,1.36,.44445,0,.55556],8896:[.55001,1.05,0,0,1.11111],8897:[.55001,1.05,0,0,1.11111],8898:[.55001,1.05,0,0,1.11111],8899:[.55001,1.05,0,0,1.11111],8968:[.65002,1.15,0,0,.52778],8969:[.65002,1.15,0,0,.52778],8970:[.65002,1.15,0,0,.52778],8971:[.65002,1.15,0,0,.52778],10216:[.65002,1.15,0,0,.61111],10217:[.65002,1.15,0,0,.61111],10752:[.55001,1.05,0,0,1.51112],10753:[.55001,1.05,0,0,1.51112],10754:[.55001,1.05,0,0,1.51112],10756:[.55001,1.05,0,0,1.11111],10758:[.55001,1.05,0,0,1.11111]},"Size3-Regular":{32:[0,0,0,0,.25],40:[.95003,1.45,0,0,.73611],41:[.95003,1.45,0,0,.73611],47:[.95003,1.45,0,0,1.04445],91:[.95003,1.45,0,0,.52778],92:[.95003,1.45,0,0,1.04445],93:[.95003,1.45,0,0,.52778],123:[.95003,1.45,0,0,.75],125:[.95003,1.45,0,0,.75],160:[0,0,0,0,.25],710:[0,.75,0,0,1.44445],732:[0,.75,0,0,1.44445],770:[0,.75,0,0,1.44445],771:[0,.75,0,0,1.44445],8730:[.95003,1.45,0,0,1],8968:[.95003,1.45,0,0,.58334],8969:[.95003,1.45,0,0,.58334],8970:[.95003,1.45,0,0,.58334],8971:[.95003,1.45,0,0,.58334],10216:[.95003,1.45,0,0,.75],10217:[.95003,1.45,0,0,.75]},"Size4-Regular":{32:[0,0,0,0,.25],40:[1.25003,1.75,0,0,.79167],41:[1.25003,1.75,0,0,.79167],47:[1.25003,1.75,0,0,1.27778],91:[1.25003,1.75,0,0,.58334],92:[1.25003,1.75,0,0,1.27778],93:[1.25003,1.75,0,0,.58334],123:[1.25003,1.75,0,0,.80556],125:[1.25003,1.75,0,0,.80556],160:[0,0,0,0,.25],710:[0,.825,0,0,1.8889],732:[0,.825,0,0,1.8889],770:[0,.825,0,0,1.8889],771:[0,.825,0,0,1.8889],8730:[1.25003,1.75,0,0,1],8968:[1.25003,1.75,0,0,.63889],8969:[1.25003,1.75,0,0,.63889],8970:[1.25003,1.75,0,0,.63889],8971:[1.25003,1.75,0,0,.63889],9115:[.64502,1.155,0,0,.875],9116:[1e-5,.6,0,0,.875],9117:[.64502,1.155,0,0,.875],9118:[.64502,1.155,0,0,.875],9119:[1e-5,.6,0,0,.875],9120:[.64502,1.155,0,0,.875],9121:[.64502,1.155,0,0,.66667],9122:[-99e-5,.601,0,0,.66667],9123:[.64502,1.155,0,0,.66667],9124:[.64502,1.155,0,0,.66667],9125:[-99e-5,.601,0,0,.66667],9126:[.64502,1.155,0,0,.66667],9127:[1e-5,.9,0,0,.88889],9128:[.65002,1.15,0,0,.88889],9129:[.90001,0,0,0,.88889],9130:[0,.3,0,0,.88889],9131:[1e-5,.9,0,0,.88889],9132:[.65002,1.15,0,0,.88889],9133:[.90001,0,0,0,.88889],9143:[.88502,.915,0,0,1.05556],10216:[1.25003,1.75,0,0,.80556],10217:[1.25003,1.75,0,0,.80556],57344:[-.00499,.605,0,0,1.05556],57345:[-.00499,.605,0,0,1.05556],57680:[0,.12,0,0,.45],57681:[0,.12,0,0,.45],57682:[0,.12,0,0,.45],57683:[0,.12,0,0,.45]},"Typewriter-Regular":{32:[0,0,0,0,.525],33:[0,.61111,0,0,.525],34:[0,.61111,0,0,.525],35:[0,.61111,0,0,.525],36:[.08333,.69444,0,0,.525],37:[.08333,.69444,0,0,.525],38:[0,.61111,0,0,.525],39:[0,.61111,0,0,.525],40:[.08333,.69444,0,0,.525],41:[.08333,.69444,0,0,.525],42:[0,.52083,0,0,.525],43:[-.08056,.53055,0,0,.525],44:[.13889,.125,0,0,.525],45:[-.08056,.53055,0,0,.525],46:[0,.125,0,0,.525],47:[.08333,.69444,0,0,.525],48:[0,.61111,0,0,.525],49:[0,.61111,0,0,.525],50:[0,.61111,0,0,.525],51:[0,.61111,0,0,.525],52:[0,.61111,0,0,.525],53:[0,.61111,0,0,.525],54:[0,.61111,0,0,.525],55:[0,.61111,0,0,.525],56:[0,.61111,0,0,.525],57:[0,.61111,0,0,.525],58:[0,.43056,0,0,.525],59:[.13889,.43056,0,0,.525],60:[-.05556,.55556,0,0,.525],61:[-.19549,.41562,0,0,.525],62:[-.05556,.55556,0,0,.525],63:[0,.61111,0,0,.525],64:[0,.61111,0,0,.525],65:[0,.61111,0,0,.525],66:[0,.61111,0,0,.525],67:[0,.61111,0,0,.525],68:[0,.61111,0,0,.525],69:[0,.61111,0,0,.525],70:[0,.61111,0,0,.525],71:[0,.61111,0,0,.525],72:[0,.61111,0,0,.525],73:[0,.61111,0,0,.525],74:[0,.61111,0,0,.525],75:[0,.61111,0,0,.525],76:[0,.61111,0,0,.525],77:[0,.61111,0,0,.525],78:[0,.61111,0,0,.525],79:[0,.61111,0,0,.525],80:[0,.61111,0,0,.525],81:[.13889,.61111,0,0,.525],82:[0,.61111,0,0,.525],83:[0,.61111,0,0,.525],84:[0,.61111,0,0,.525],85:[0,.61111,0,0,.525],86:[0,.61111,0,0,.525],87:[0,.61111,0,0,.525],88:[0,.61111,0,0,.525],89:[0,.61111,0,0,.525],90:[0,.61111,0,0,.525],91:[.08333,.69444,0,0,.525],92:[.08333,.69444,0,0,.525],93:[.08333,.69444,0,0,.525],94:[0,.61111,0,0,.525],95:[.09514,0,0,0,.525],96:[0,.61111,0,0,.525],97:[0,.43056,0,0,.525],98:[0,.61111,0,0,.525],99:[0,.43056,0,0,.525],100:[0,.61111,0,0,.525],101:[0,.43056,0,0,.525],102:[0,.61111,0,0,.525],103:[.22222,.43056,0,0,.525],104:[0,.61111,0,0,.525],105:[0,.61111,0,0,.525],106:[.22222,.61111,0,0,.525],107:[0,.61111,0,0,.525],108:[0,.61111,0,0,.525],109:[0,.43056,0,0,.525],110:[0,.43056,0,0,.525],111:[0,.43056,0,0,.525],112:[.22222,.43056,0,0,.525],113:[.22222,.43056,0,0,.525],114:[0,.43056,0,0,.525],115:[0,.43056,0,0,.525],116:[0,.55358,0,0,.525],117:[0,.43056,0,0,.525],118:[0,.43056,0,0,.525],119:[0,.43056,0,0,.525],120:[0,.43056,0,0,.525],121:[.22222,.43056,0,0,.525],122:[0,.43056,0,0,.525],123:[.08333,.69444,0,0,.525],124:[.08333,.69444,0,0,.525],125:[.08333,.69444,0,0,.525],126:[0,.61111,0,0,.525],127:[0,.61111,0,0,.525],160:[0,0,0,0,.525],176:[0,.61111,0,0,.525],184:[.19445,0,0,0,.525],305:[0,.43056,0,0,.525],567:[.22222,.43056,0,0,.525],711:[0,.56597,0,0,.525],713:[0,.56555,0,0,.525],714:[0,.61111,0,0,.525],715:[0,.61111,0,0,.525],728:[0,.61111,0,0,.525],730:[0,.61111,0,0,.525],770:[0,.61111,0,0,.525],771:[0,.61111,0,0,.525],776:[0,.61111,0,0,.525],915:[0,.61111,0,0,.525],916:[0,.61111,0,0,.525],920:[0,.61111,0,0,.525],923:[0,.61111,0,0,.525],926:[0,.61111,0,0,.525],928:[0,.61111,0,0,.525],931:[0,.61111,0,0,.525],933:[0,.61111,0,0,.525],934:[0,.61111,0,0,.525],936:[0,.61111,0,0,.525],937:[0,.61111,0,0,.525],8216:[0,.61111,0,0,.525],8217:[0,.61111,0,0,.525],8242:[0,.61111,0,0,.525],9251:[.11111,.21944,0,0,.525]}},sigmasAndXis={slant:[.25,.25,.25],space:[0,0,0],stretch:[0,0,0],shrink:[0,0,0],xHeight:[.431,.431,.431],quad:[1,1.171,1.472],extraSpace:[0,0,0],num1:[.677,.732,.925],num2:[.394,.384,.387],num3:[.444,.471,.504],denom1:[.686,.752,1.025],denom2:[.345,.344,.532],sup1:[.413,.503,.504],sup2:[.363,.431,.404],sup3:[.289,.286,.294],sub1:[.15,.143,.2],sub2:[.247,.286,.4],supDrop:[.386,.353,.494],subDrop:[.05,.071,.1],delim1:[2.39,1.7,1.98],delim2:[1.01,1.157,1.42],axisHeight:[.25,.25,.25],defaultRuleThickness:[.04,.049,.049],bigOpSpacing1:[.111,.111,.111],bigOpSpacing2:[.166,.166,.166],bigOpSpacing3:[.2,.2,.2],bigOpSpacing4:[.6,.611,.611],bigOpSpacing5:[.1,.143,.143],sqrtRuleThickness:[.04,.04,.04],ptPerEm:[10,10,10],doubleRuleSep:[.2,.2,.2],arrayRuleWidth:[.04,.04,.04],fboxsep:[.3,.3,.3],fboxrule:[.04,.04,.04]},extraCharacterMap={:"A",:"D",:"o",:"a",:"d",:"o",:"A",:"B",:"B",:"F",:"A",:"E",:"K",:"3",:"N",:"N",:"K",:"N",:"M",:"H",:"O",:"N",:"P",:"C",:"T",:"y",:"O",:"X",:"U",:"h",:"W",:"W",:"B",:"X",:"B",:"3",:"X",:"R",:"a",:"b",:"a",:"r",:"y",:"e",:"m",:"e",:"n",:"n",:"n",:"n",:"m",:"n",:"o",:"n",:"p",:"c",:"o",:"y",:"b",:"x",:"n",:"n",:"w",:"w",:"a",:"m",:"a",:"e",:"m",:"r"};function setFontMetrics(t,r){fontMetricsData[t]=r}function getCharacterMetrics(t,r,a){if(!fontMetricsData[r])throw new Error("Font metrics not found for font: "+r+".");var n=t.charCodeAt(0),s=fontMetricsData[r][n];if(!s&&t[0]in extraCharacterMap&&(n=extraCharacterMap[t[0]].charCodeAt(0),s=fontMetricsData[r][n]),!s&&a==="text"&&supportedCodepoint(n)&&(s=fontMetricsData[r][77]),s)return{depth:s[0],height:s[1],italic:s[2],skew:s[3],width:s[4]}}var fontMetricsBySizeIndex={};function getGlobalMetrics(t){var r;if(t>=5?r=0:t>=3?r=1:r=2,!fontMetricsBySizeIndex[r]){var a=fontMetricsBySizeIndex[r]={cssEmPerMu:sigmasAndXis.quad[r]/18};for(var n in sigmasAndXis)sigmasAndXis.hasOwnProperty(n)&&(a[n]=sigmasAndXis[n][r])}return fontMetricsBySizeIndex[r]}var sizeStyleMap=[[1,1,1],[2,1,1],[3,1,1],[4,2,1],[5,2,1],[6,3,1],[7,4,2],[8,6,3],[9,7,6],[10,8,7],[11,10,9]],sizeMultipliers=[.5,.6,.7,.8,.9,1,1.2,1.44,1.728,2.074,2.488],sizeAtStyle=function t(r,a){return a.size<2?r:sizeStyleMap[r-1][a.size-1]};class Options{constructor(r){this.style=void 0,this.color=void 0,this.size=void 0,this.textSize=void 0,this.phantom=void 0,this.font=void 0,this.fontFamily=void 0,this.fontWeight=void 0,this.fontShape=void 0,this.sizeMultiplier=void 0,this.maxSize=void 0,this.minRuleThickness=void 0,this._fontMetrics=void 0,this.style=r.style,this.color=r.color,this.size=r.size||Options.BASESIZE,this.textSize=r.textSize||this.size,this.phantom=!!r.phantom,this.font=r.font||"",this.fontFamily=r.fontFamily||"",this.fontWeight=r.fontWeight||"",this.fontShape=r.fontShape||"",this.sizeMultiplier=sizeMultipliers[this.size-1],this.maxSize=r.maxSize,this.minRuleThickness=r.minRuleThickness,this._fontMetrics=void 0}extend(r){var a={style:this.style,size:this.size,textSize:this.textSize,color:this.color,phantom:this.phantom,font:this.font,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontShape:this.fontShape,maxSize:this.maxSize,minRuleThickness:this.minRuleThickness};for(var n in r)r.hasOwnProperty(n)&&(a[n]=r[n]);return new Options(a)}havingStyle(r){return this.style===r?this:this.extend({style:r,size:sizeAtStyle(this.textSize,r)})}havingCrampedStyle(){return this.havingStyle(this.style.cramp())}havingSize(r){return this.size===r&&this.textSize===r?this:this.extend({style:this.style.text(),size:r,textSize:r,sizeMultiplier:sizeMultipliers[r-1]})}havingBaseStyle(r){r=r||this.style.text();var a=sizeAtStyle(Options.BASESIZE,r);return this.size===a&&this.textSize===Options.BASESIZE&&this.style===r?this:this.extend({style:r,size:a})}havingBaseSizing(){var r;switch(this.style.id){case 4:case 5:r=3;break;case 6:case 7:r=1;break;default:r=6}return this.extend({style:this.style.text(),size:r})}withColor(r){return this.extend({color:r})}withPhantom(){return this.extend({phantom:!0})}withFont(r){return this.extend({font:r})}withTextFontFamily(r){return this.extend({fontFamily:r,font:""})}withTextFontWeight(r){return this.extend({fontWeight:r,font:""})}withTextFontShape(r){return this.extend({fontShape:r,font:""})}sizingClasses(r){return r.size!==this.size?["sizing","reset-size"+r.size,"size"+this.size]:[]}baseSizingClasses(){return this.size!==Options.BASESIZE?["sizing","reset-size"+this.size,"size"+Options.BASESIZE]:[]}fontMetrics(){return this._fontMetrics||(this._fontMetrics=getGlobalMetrics(this.size)),this._fontMetrics}getColor(){return this.phantom?"transparent":this.color}}Options.BASESIZE=6;var ptPerUnit={pt:1,mm:7227/2540,cm:7227/254,in:72.27,bp:803/800,pc:12,dd:1238/1157,cc:14856/1157,nd:685/642,nc:1370/107,sp:1/65536,px:803/800},relativeUnit={ex:!0,em:!0,mu:!0},validUnit=function t(r){return typeof r!="string"&&(r=r.unit),r in ptPerUnit||r in relativeUnit||r==="ex"},calculateSize=function t(r,a){var n;if(r.unit in ptPerUnit)n=ptPerUnit[r.unit]/a.fontMetrics().ptPerEm/a.sizeMultiplier;else if(r.unit==="mu")n=a.fontMetrics().cssEmPerMu;else{var s;if(a.style.isTight()?s=a.havingStyle(a.style.text()):s=a,r.unit==="ex")n=s.fontMetrics().xHeight;else if(r.unit==="em")n=s.fontMetrics().quad;else throw new ParseError("Invalid unit: '"+r.unit+"'");s!==a&&(n*=s.sizeMultiplier/a.sizeMultiplier)}return Math.min(r.number*n,a.maxSize)},makeEm=function t(r){return+r.toFixed(4)+"em"},createClass=function t(r){return r.filter(a=>a).join(" ")},initNode=function t(r,a,n){if(this.classes=r||[],this.attributes={},this.height=0,this.depth=0,this.maxFontSize=0,this.style=n||{},a){a.style.isTight()&&this.classes.push("mtight");var s=a.getColor();s&&(this.style.color=s)}},toNode=function t(r){var a=document.createElement(r);a.className=createClass(this.classes);for(var n in this.style)this.style.hasOwnProperty(n)&&(a.style[n]=this.style[n]);for(var s in this.attributes)this.attributes.hasOwnProperty(s)&&a.setAttribute(s,this.attributes[s]);for(var o=0;o<this.children.length;o++)a.appendChild(this.children[o].toNode());return a},invalidAttributeNameRegex=/[\s"'>/=\x00-\x1f]/,toMarkup=function t(r){var a="<"+r;this.classes.length&&(a+=' class="'+utils.escape(createClass(this.classes))+'"');var n="";for(var s in this.style)this.style.hasOwnProperty(s)&&(n+=utils.hyphenate(s)+":"+this.style[s]+";");n&&(a+=' style="'+utils.escape(n)+'"');for(var o in this.attributes)if(this.attributes.hasOwnProperty(o)){if(invalidAttributeNameRegex.test(o))throw new ParseError("Invalid attribute name '"+o+"'");a+=" "+o+'="'+utils.escape(this.attributes[o])+'"'}a+=">";for(var l=0;l<this.children.length;l++)a+=this.children[l].toMarkup();return a+="</"+r+">",a};class Span{constructor(r,a,n,s){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.width=void 0,this.maxFontSize=void 0,this.style=void 0,initNode.call(this,r,n,s),this.children=a||[]}setAttribute(r,a){this.attributes[r]=a}hasClass(r){return this.classes.includes(r)}toNode(){return toNode.call(this,"span")}toMarkup(){return toMarkup.call(this,"span")}}class Anchor{constructor(r,a,n,s){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,initNode.call(this,a,s),this.children=n||[],this.setAttribute("href",r)}setAttribute(r,a){this.attributes[r]=a}hasClass(r){return this.classes.includes(r)}toNode(){return toNode.call(this,"a")}toMarkup(){return toMarkup.call(this,"a")}}class Img{constructor(r,a,n){this.src=void 0,this.alt=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.alt=a,this.src=r,this.classes=["mord"],this.style=n}hasClass(r){return this.classes.includes(r)}toNode(){var r=document.createElement("img");r.src=this.src,r.alt=this.alt,r.className="mord";for(var a in this.style)this.style.hasOwnProperty(a)&&(r.style[a]=this.style[a]);return r}toMarkup(){var r='<img src="'+utils.escape(this.src)+'"'+(' alt="'+utils.escape(this.alt)+'"'),a="";for(var n in this.style)this.style.hasOwnProperty(n)&&(a+=utils.hyphenate(n)+":"+this.style[n]+";");return a&&(r+=' style="'+utils.escape(a)+'"'),r+="'/>",r}}var iCombinations={:"",:"",:"",:""};class SymbolNode{constructor(r,a,n,s,o,l,u,h){this.text=void 0,this.height=void 0,this.depth=void 0,this.italic=void 0,this.skew=void 0,this.width=void 0,this.maxFontSize=void 0,this.classes=void 0,this.style=void 0,this.text=r,this.height=a||0,this.depth=n||0,this.italic=s||0,this.skew=o||0,this.width=l||0,this.classes=u||[],this.style=h||{},this.maxFontSize=0;var c=scriptFromCodepoint(this.text.charCodeAt(0));c&&this.classes.push(c+"_fallback"),/[]/.test(this.text)&&(this.text=iCombinations[this.text])}hasClass(r){return this.classes.includes(r)}toNode(){var r=document.createTextNode(this.text),a=null;this.italic>0&&(a=document.createElement("span"),a.style.marginRight=makeEm(this.italic)),this.classes.length>0&&(a=a||document.createElement("span"),a.className=createClass(this.classes));for(var n in this.style)this.style.hasOwnProperty(n)&&(a=a||document.createElement("span"),a.style[n]=this.style[n]);return a?(a.appendChild(r),a):r}toMarkup(){var r=!1,a="<span";this.classes.length&&(r=!0,a+=' class="',a+=utils.escape(createClass(this.classes)),a+='"');var n="";this.italic>0&&(n+="margin-right:"+this.italic+"em;");for(var s in this.style)this.style.hasOwnProperty(s)&&(n+=utils.hyphenate(s)+":"+this.style[s]+";");n&&(r=!0,a+=' style="'+utils.escape(n)+'"');var o=utils.escape(this.text);return r?(a+=">",a+=o,a+="</span>",a):o}}class SvgNode{constructor(r,a){this.children=void 0,this.attributes=void 0,this.children=r||[],this.attributes=a||{}}toNode(){var r="http://www.w3.org/2000/svg",a=document.createElementNS(r,"svg");for(var n in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,n)&&a.setAttribute(n,this.attributes[n]);for(var s=0;s<this.children.length;s++)a.appendChild(this.children[s].toNode());return a}toMarkup(){var r='<svg xmlns="http://www.w3.org/2000/svg"';for(var a in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,a)&&(r+=" "+a+'="'+utils.escape(this.attributes[a])+'"');r+=">";for(var n=0;n<this.children.length;n++)r+=this.children[n].toMarkup();return r+="</svg>",r}}class PathNode{constructor(r,a){this.pathName=void 0,this.alternate=void 0,this.pathName=r,this.alternate=a}toNode(){var r="http://www.w3.org/2000/svg",a=document.createElementNS(r,"path");return this.alternate?a.setAttribute("d",this.alternate):a.setAttribute("d",path[this.pathName]),a}toMarkup(){return this.alternate?'<path d="'+utils.escape(this.alternate)+'"/>':'<path d="'+utils.escape(path[this.pathName])+'"/>'}}class LineNode{constructor(r){this.attributes=void 0,this.attributes=r||{}}toNode(){var r="http://www.w3.org/2000/svg",a=document.createElementNS(r,"line");for(var n in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,n)&&a.setAttribute(n,this.attributes[n]);return a}toMarkup(){var r="<line";for(var a in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,a)&&(r+=" "+a+'="'+utils.escape(this.attributes[a])+'"');return r+="/>",r}}function assertSymbolDomNode(t){if(t instanceof SymbolNode)return t;throw new Error("Expected symbolNode but got "+String(t)+".")}function assertSpan(t){if(t instanceof Span)return t;throw new Error("Expected span<HtmlDomNode> but got "+String(t)+".")}var ATOMS={bin:1,close:1,inner:1,open:1,punct:1,rel:1},NON_ATOMS={"accent-token":1,mathord:1,"op-token":1,spacing:1,textord:1},symbols={math:{},text:{}};function defineSymbol(t,r,a,n,s,o){symbols[t][s]={font:r,group:a,replace:n},o&&n&&(symbols[t][n]=symbols[t][s])}var math="math",text="text",main="main",ams="ams",accent="accent-token",bin="bin",close="close",inner="inner",mathord="mathord",op="op-token",open="open",punct="punct",rel="rel",spacing="spacing",textord="textord";defineSymbol(math,main,rel,"","\\equiv",!0);defineSymbol(math,main,rel,"","\\prec",!0);defineSymbol(math,main,rel,"","\\succ",!0);defineSymbol(math,main,rel,"","\\sim",!0);defineSymbol(math,main,rel,"","\\perp");defineSymbol(math,main,rel,"","\\preceq",!0);defineSymbol(math,main,rel,"","\\succeq",!0);defineSymbol(math,main,rel,"","\\simeq",!0);defineSymbol(math,main,rel,"","\\mid",!0);defineSymbol(math,main,rel,"","\\ll",!0);defineSymbol(math,main,rel,"","\\gg",!0);defineSymbol(math,main,rel,"","\\asymp",!0);defineSymbol(math,main,rel,"","\\parallel");defineSymbol(math,main,rel,"","\\bowtie",!0);defineSymbol(math,main,rel,"","\\smile",!0);defineSymbol(math,main,rel,"","\\sqsubseteq",!0);defineSymbol(math,main,rel,"","\\sqsupseteq",!0);defineSymbol(math,main,rel,"","\\doteq",!0);defineSymbol(math,main,rel,"","\\frown",!0);defineSymbol(math,main,rel,"","\\ni",!0);defineSymbol(math,main,rel,"","\\propto",!0);defineSymbol(math,main,rel,"","\\vdash",!0);defineSymbol(math,main,rel,"","\\dashv",!0);defineSymbol(math,main,rel,"","\\owns");defineSymbol(math,main,punct,".","\\ldotp");defineSymbol(math,main,punct,"","\\cdotp");defineSymbol(math,main,textord,"#","\\#");defineSymbol(text,main,textord,"#","\\#");defineSymbol(math,main,textord,"&","\\&");defineSymbol(text,main,textord,"&","\\&");defineSymbol(math,main,textord,"","\\aleph",!0);defineSymbol(math,main,textord,"","\\forall",!0);defineSymbol(math,main,textord,"","\\hbar",!0);defineSymbol(math,main,textord,"","\\exists",!0);defineSymbol(math,main,textord,"","\\nabla",!0);defineSymbol(math,main,textord,"","\\flat",!0);defineSymbol(math,main,textord,"","\\ell",!0);defineSymbol(math,main,textord,"","\\natural",!0);defineSymbol(math,main,textord,"","\\clubsuit",!0);defineSymbol(math,main,textord,"","\\wp",!0);defineSymbol(math,main,textord,"","\\sharp",!0);defineSymbol(math,main,textord,"","\\diamondsuit",!0);defineSymbol(math,main,textord,"","\\Re",!0);defineSymbol(math,main,textord,"","\\heartsuit",!0);defineSymbol(math,main,textord,"","\\Im",!0);defineSymbol(math,main,textord,"","\\spadesuit",!0);defineSymbol(math,main,textord,"","\\S",!0);defineSymbol(text,main,textord,"","\\S");defineSymbol(math,main,textord,"","\\P",!0);defineSymbol(text,main,textord,"","\\P");defineSymbol(math,main,textord,"","\\dag");defineSymbol(text,main,textord,"","\\dag");defineSymbol(text,main,textord,"","\\textdagger");defineSymbol(math,main,textord,"","\\ddag");defineSymbol(text,main,textord,"","\\ddag");defineSymbol(text,main,textord,"","\\textdaggerdbl");defineSymbol(math,main,close,"","\\rmoustache",!0);defineSymbol(math,main,open,"","\\lmoustache",!0);defineSymbol(math,main,close,"","\\rgroup",!0);defineSymbol(math,main,open,"","\\lgroup",!0);defineSymbol(math,main,bin,"","\\mp",!0);defineSymbol(math,main,bin,"","\\ominus",!0);defineSymbol(math,main,bin,"","\\uplus",!0);defineSymbol(math,main,bin,"","\\sqcap",!0);defineSymbol(math,main,bin,"","\\ast");defineSymbol(math,main,bin,"","\\sqcup",!0);defineSymbol(math,main,bin,"","\\bigcirc",!0);defineSymbol(math,main,bin,"","\\bullet",!0);defineSymbol(math,main,bin,"","\\ddagger");defineSymbol(math,main,bin,"","\\wr",!0);defineSymbol(math,main,bin,"","\\amalg");defineSymbol(math,main,bin,"&","\\And");defineSymbol(math,main,rel,"","\\longleftarrow",!0);defineSymbol(math,main,rel,"","\\Leftarrow",!0);defineSymbol(math,main,rel,"","\\Longleftarrow",!0);defineSymbol(math,main,rel,"","\\longrightarrow",!0);defineSymbol(math,main,rel,"","\\Rightarrow",!0);defineSymbol(math,main,rel,"","\\Longrightarrow",!0);defineSymbol(math,main,rel,"","\\leftrightarrow",!0);defineSymbol(math,main,rel,"","\\longleftrightarrow",!0);defineSymbol(math,main,rel,"","\\Leftrightarrow",!0);defineSymbol(math,main,rel,"","\\Longleftrightarrow",!0);defineSymbol(math,main,rel,"","\\mapsto",!0);defineSymbol(math,main,rel,"","\\longmapsto",!0);defineSymbol(math,main,rel,"","\\nearrow",!0);defineSymbol(math,main,rel,"","\\hookleftarrow",!0);defineSymbol(math,main,rel,"","\\hookrightarrow",!0);defineSymbol(math,main,rel,"","\\searrow",!0);defineSymbol(math,main,rel,"","\\leftharpoonup",!0);defineSymbol(math,main,rel,"","\\rightharpoonup",!0);defineSymbol(math,main,rel,"","\\swarrow",!0);defineSymbol(math,main,rel,"","\\leftharpoondown",!0);defineSymbol(math,main,rel,"","\\rightharpoondown",!0);defineSymbol(math,main,rel,"","\\nwarrow",!0);defineSymbol(math,main,rel,"","\\rightleftharpoons",!0);defineSymbol(math,ams,rel,"","\\nless",!0);defineSymbol(math,ams,rel,"","\\@nleqslant");defineSymbol(math,ams,rel,"","\\@nleqq");defineSymbol(math,ams,rel,"","\\lneq",!0);defineSymbol(math,ams,rel,"","\\lneqq",!0);defineSymbol(math,ams,rel,"","\\@lvertneqq");defineSymbol(math,ams,rel,"","\\lnsim",!0);defineSymbol(math,ams,rel,"","\\lnapprox",!0);defineSymbol(math,ams,rel,"","\\nprec",!0);defineSymbol(math,ams,rel,"","\\npreceq",!0);defineSymbol(math,ams,rel,"","\\precnsim",!0);defineSymbol(math,ams,rel,"","\\precnapprox",!0);defineSymbol(math,ams,rel,"","\\nsim",!0);defineSymbol(math,ams,rel,"","\\@nshortmid");defineSymbol(math,ams,rel,"","\\nmid",!0);defineSymbol(math,ams,rel,"","\\nvdash",!0);defineSymbol(math,ams,rel,"","\\nvDash",!0);defineSymbol(math,ams,rel,"","\\ntriangleleft");defineSymbol(math,ams,rel,"","\\ntrianglelefteq",!0);defineSymbol(math,ams,rel,"","\\subsetneq",!0);defineSymbol(math,ams,rel,"","\\@varsubsetneq");defineSymbol(math,ams,rel,"","\\subsetneqq",!0);defineSymbol(math,ams,rel,"","\\@varsubsetneqq");defineSymbol(math,ams,rel,"","\\ngtr",!0);defineSymbol(math,ams,rel,"","\\@ngeqslant");defineSymbol(math,ams,rel,"","\\@ngeqq");defineSymbol(math,ams,rel,"","\\gneq",!0);defineSymbol(math,ams,rel,"","\\gneqq",!0);defineSymbol(math,ams,rel,"","\\@gvertneqq");defineSymbol(math,ams,rel,"","\\gnsim",!0);defineSymbol(math,ams,rel,"","\\gnapprox",!0);defineSymbol(math,ams,rel,"","\\nsucc",!0);defineSymbol(math,ams,rel,"","\\nsucceq",!0);defineSymbol(math,ams,rel,"","\\succnsim",!0);defineSymbol(math,ams,rel,"","\\succnapprox",!0);defineSymbol(math,ams,rel,"","\\ncong",!0);defineSymbol(math,ams,rel,"","\\@nshortparallel");defineSymbol(math,ams,rel,"","\\nparallel",!0);defineSymbol(math,ams,rel,"","\\nVDash",!0);defineSymbol(math,ams,rel,"","\\ntriangleright");defineSymbol(math,ams,rel,"","\\ntrianglerighteq",!0);defineSymbol(math,ams,rel,"","\\@nsupseteqq");defineSymbol(math,ams,rel,"","\\supsetneq",!0);defineSymbol(math,ams,rel,"","\\@varsupsetneq");defineSymbol(math,ams,rel,"","\\supsetneqq",!0);defineSymbol(math,ams,rel,"","\\@varsupsetneqq");defineSymbol(math,ams,rel,"","\\nVdash",!0);defineSymbol(math,ams,rel,"","\\precneqq",!0);defineSymbol(math,ams,rel,"","\\succneqq",!0);defineSymbol(math,ams,rel,"","\\@nsubseteqq");defineSymbol(math,ams,bin,"","\\unlhd");defineSymbol(math,ams,bin,"","\\unrhd");defineSymbol(math,ams,rel,"","\\nleftarrow",!0);defineSymbol(math,ams,rel,"","\\nrightarrow",!0);defineSymbol(math,ams,rel,"","\\nLeftarrow",!0);defineSymbol(math,ams,rel,"","\\nRightarrow",!0);defineSymbol(math,ams,rel,"","\\nleftrightarrow",!0);defineSymbol(math,ams,rel,"","\\nLeftrightarrow",!0);defineSymbol(math,ams,rel,"","\\vartriangle");defineSymbol(math,ams,textord,"","\\hslash");defineSymbol(math,ams,textord,"","\\triangledown");defineSymbol(math,ams,textord,"","\\lozenge");defineSymbol(math,ams,textord,"","\\circledS");defineSymbol(math,ams,textord,"","\\circledR");defineSymbol(text,ams,textord,"","\\circledR");defineSymbol(math,ams,textord,"","\\measuredangle",!0);defineSymbol(math,ams,textord,"","\\nexists");defineSymbol(math,ams,textord,"","\\mho");defineSymbol(math,ams,textord,"","\\Finv",!0);defineSymbol(math,ams,textord,"","\\Game",!0);defineSymbol(math,ams,textord,"","\\backprime");defineSymbol(math,ams,textord,"","\\blacktriangle");defineSymbol(math,ams,textord,"","\\blacktriangledown");defineSymbol(math,ams,textord,"","\\blacksquare");defineSymbol(math,ams,textord,"","\\blacklozenge");defineSymbol(math,ams,textord,"","\\bigstar");defineSymbol(math,ams,textord,"","\\sphericalangle",!0);defineSymbol(math,ams,textord,"","\\complement",!0);defineSymbol(math,ams,textord,"","\\eth",!0);defineSymbol(text,main,textord,"","");defineSymbol(math,ams,textord,"","\\diagup");defineSymbol(math,ams,textord,"","\\diagdown");defineSymbol(math,ams,textord,"","\\square");defineSymbol(math,ams,textord,"","\\Box");defineSymbol(math,ams,textord,"","\\Diamond");defineSymbol(math,ams,textord,"","\\yen",!0);defineSymbol(text,ams,textord,"","\\yen",!0);defineSymbol(math,ams,textord,"","\\checkmark",!0);defineSymbol(text,ams,textord,"","\\checkmark");defineSymbol(math,ams,textord,"","\\beth",!0);defineSymbol(math,ams,textord,"","\\daleth",!0);defineSymbol(math,ams,textord,"","\\gimel",!0);defineSymbol(math,ams,textord,"","\\digamma",!0);defineSymbol(math,ams,textord,"","\\varkappa");defineSymbol(math,ams,open,"","\\@ulcorner",!0);defineSymbol(math,ams,close,"","\\@urcorner",!0);defineSymbol(math,ams,open,"","\\@llcorner",!0);defineSymbol(math,ams,close,"","\\@lrcorner",!0);defineSymbol(math,ams,rel,"","\\leqq",!0);defineSymbol(math,ams,rel,"","\\leqslant",!0);defineSymbol(math,ams,rel,"","\\eqslantless",!0);defineSymbol(math,ams,rel,"","\\lesssim",!0);defineSymbol(math,ams,rel,"","\\lessapprox",!0);defineSymbol(math,ams,rel,"","\\approxeq",!0);defineSymbol(math,ams,bin,"","\\lessdot");defineSymbol(math,ams,rel,"","\\lll",!0);defineSymbol(math,ams,rel,"","\\lessgtr",!0);defineSymbol(math,ams,rel,"","\\lesseqgtr",!0);defineSymbol(math,ams,rel,"","\\lesseqqgtr",!0);defineSymbol(math,ams,rel,"","\\doteqdot");defineSymbol(math,ams,rel,"","\\risingdotseq",!0);defineSymbol(math,ams,rel,"","\\fallingdotseq",!0);defineSymbol(math,ams,rel,"","\\backsim",!0);defineSymbol(math,ams,rel,"","\\backsimeq",!0);defineSymbol(math,ams,rel,"","\\subseteqq",!0);defineSymbol(math,ams,rel,"","\\Subset",!0);defineSymbol(math,ams,rel,"","\\sqsubset",!0);defineSymbol(math,ams,rel,"","\\preccurlyeq",!0);defineSymbol(math,ams,rel,"","\\curlyeqprec",!0);defineSymbol(math,ams,rel,"","\\precsim",!0);defineSymbol(math,ams,rel,"","\\precapprox",!0);defineSymbol(math,ams,rel,"","\\vartriangleleft");defineSymbol(math,ams,rel,"","\\trianglelefteq");defineSymbol(math,ams,rel,"","\\vDash",!0);defineSymbol(math,ams,rel,"","\\Vvdash",!0);defineSymbol(math,ams,rel,"","\\smallsmile");defineSymbol(math,ams,rel,"","\\smallfrown");defineSymbol(math,ams,rel,"","\\bumpeq",!0);defineSymbol(math,ams,rel,"","\\Bumpeq",!0);defineSymbol(math,ams,rel,"","\\geqq",!0);defineSymbol(math,ams,rel,"","\\geqslant",!0);defineSymbol(math,ams,rel,"","\\eqslantgtr",!0);defineSymbol(math,ams,rel,"","\\gtrsim",!0);defineSymbol(math,ams,rel,"","\\gtrapprox",!0);defineSymbol(math,ams,bin,"","\\gtrdot");defineSymbol(math,ams,rel,"","\\ggg",!0);defineSymbol(math,ams,rel,"","\\gtrless",!0);defineSymbol(math,ams,rel,"","\\gtreqless",!0);defineSymbol(math,ams,rel,"","\\gtreqqless",!0);defineSymbol(math,ams,rel,"","\\eqcirc",!0);defineSymbol(math,ams,rel,"","\\circeq",!0);defineSymbol(math,ams,rel,"","\\triangleq",!0);defineSymbol(math,ams,rel,"","\\thicksim");defineSymbol(math,ams,rel,"","\\thickapprox");defineSymbol(math,ams,rel,"","\\supseteqq",!0);defineSymbol(math,ams,rel,"","\\Supset",!0);defineSymbol(math,ams,rel,"","\\sqsupset",!0);defineSymbol(math,ams,rel,"","\\succcurlyeq",!0);defineSymbol(math,ams,rel,"","\\curlyeqsucc",!0);defineSymbol(math,ams,rel,"","\\succsim",!0);defineSymbol(math,ams,rel,"","\\succapprox",!0);defineSymbol(math,ams,rel,"","\\vartriangleright");defineSymbol(math,ams,rel,"","\\trianglerighteq");defineSymbol(math,ams,rel,"","\\Vdash",!0);defineSymbol(math,ams,rel,"","\\shortmid");defineSymbol(math,ams,rel,"","\\shortparallel");defineSymbol(math,ams,rel,"","\\between",!0);defineSymbol(math,ams,rel,"","\\pitchfork",!0);defineSymbol(math,ams,rel,"","\\varpropto");defineSymbol(math,ams,rel,"","\\blacktriangleleft");defineSymbol(math,ams,rel,"","\\therefore",!0);defineSymbol(math,ams,rel,"","\\backepsilon");defineSymbol(math,ams,rel,"","\\blacktriangleright");defineSymbol(math,ams,rel,"","\\because",!0);defineSymbol(math,ams,rel,"","\\llless");defineSymbol(math,ams,rel,"","\\gggtr");defineSymbol(math,ams,bin,"","\\lhd");defineSymbol(math,ams,bin,"","\\rhd");defineSymbol(math,ams,rel,"","\\eqsim",!0);defineSymbol(math,main,rel,"","\\Join");defineSymbol(math,ams,rel,"","\\Doteq",!0);defineSymbol(math,ams,bin,"","\\dotplus",!0);defineSymbol(math,ams,bin,"","\\smallsetminus");defineSymbol(math,ams,bin,"","\\Cap",!0);defineSymbol(math,ams,bin,"","\\Cup",!0);defineSymbol(math,ams,bin,"","\\doublebarwedge",!0);defineSymbol(math,ams,bin,"","\\boxminus",!0);defineSymbol(math,ams,bin,"","\\boxplus",!0);defineSymbol(math,ams,bin,"","\\divideontimes",!0);defineSymbol(math,ams,bin,"","\\ltimes",!0);defineSymbol(math,ams,bin,"","\\rtimes",!0);defineSymbol(math,ams,bin,"","\\leftthreetimes",!0);defineSymbol(math,ams,bin,"","\\rightthreetimes",!0);defineSymbol(math,ams,bin,"","\\curlywedge",!0);defineSymbol(math,ams,bin,"","\\curlyvee",!0);defineSymbol(math,ams,bin,"","\\circleddash",!0);defineSymbol(math,ams,bin,"","\\circledast",!0);defineSymbol(math,ams,bin,"","\\centerdot");defineSymbol(math,ams,bin,"","\\intercal",!0);defineSymbol(math,ams,bin,"","\\doublecap");defineSymbol(math,ams,bin,"","\\doublecup");defineSymbol(math,ams,bin,"","\\boxtimes",!0);defineSymbol(math,ams,rel,"","\\dashrightarrow",!0);defineSymbol(math,ams,rel,"","\\dashleftarrow",!0);defineSymbol(math,ams,rel,"","\\leftleftarrows",!0);defineSymbol(math,ams,rel,"","\\leftrightarrows",!0);defineSymbol(math,ams,rel,"","\\Lleftarrow",!0);defineSymbol(math,ams,rel,"","\\twoheadleftarrow",!0);defineSymbol(math,ams,rel,"","\\leftarrowtail",!0);defineSymbol(math,ams,rel,"","\\looparrowleft",!0);defineSymbol(math,ams,rel,"","\\leftrightharpoons",!0);defineSymbol(math,ams,rel,"","\\curvearrowleft",!0);defineSymbol(math,ams,rel,"","\\circlearrowleft",!0);defineSymbol(math,ams,rel,"","\\Lsh",!0);defineSymbol(math,ams,rel,"","\\upuparrows",!0);defineSymbol(math,ams,rel,"","\\upharpoonleft",!0);defineSymbol(math,ams,rel,"","\\downharpoonleft",!0);defineSymbol(math,main,rel,"","\\origof",!0);defineSymbol(math,main,rel,"","\\imageof",!0);defineSymbol(math,ams,rel,"","\\multimap",!0);defineSymbol(math,ams,rel,"","\\leftrightsquigarrow",!0);defineSymbol(math,ams,rel,"","\\rightrightarrows",!0);defineSymbol(math,ams,rel,"","\\rightleftarrows",!0);defineSymbol(math,ams,rel,"","\\twoheadrightarrow",!0);defineSymbol(math,ams,rel,"","\\rightarrowtail",!0);defineSymbol(math,ams,rel,"","\\looparrowright",!0);defineSymbol(math,ams,rel,"","\\curvearrowright",!0);defineSymbol(math,ams,rel,"","\\circlearrowright",!0);defineSymbol(math,ams,rel,"","\\Rsh",!0);defineSymbol(math,ams,rel,"","\\downdownarrows",!0);defineSymbol(math,ams,rel,"","\\upharpoonright",!0);defineSymbol(math,ams,rel,"","\\downharpoonright",!0);defineSymbol(math,ams,rel,"","\\rightsquigarrow",!0);defineSymbol(math,ams,rel,"","\\leadsto");defineSymbol(math,ams,rel,"","\\Rrightarrow",!0);defineSymbol(math,ams,rel,"","\\restriction");defineSymbol(math,main,textord,"","`");defineSymbol(math,main,textord,"$","\\$");defineSymbol(text,main,textord,"$","\\$");defineSymbol(text,main,textord,"$","\\textdollar");defineSymbol(math,main,textord,"%","\\%");defineSymbol(text,main,textord,"%","\\%");defineSymbol(math,main,textord,"_","\\_");defineSymbol(text,main,textord,"_","\\_");defineSymbol(text,main,textord,"_","\\textunderscore");defineSymbol(math,main,textord,"","\\angle",!0);defineSymbol(math,main,textord,"","\\infty",!0);defineSymbol(math,main,textord,"","\\prime");defineSymbol(math,main,textord,"","\\triangle");defineSymbol(math,main,textord,"","\\Gamma",!0);defineSymbol(math,main,textord,"","\\Delta",!0);defineSymbol(math,main,textord,"","\\Theta",!0);defineSymbol(math,main,textord,"","\\Lambda",!0);defineSymbol(math,main,textord,"","\\Xi",!0);defineSymbol(math,main,textord,"","\\Pi",!0);defineSymbol(math,main,textord,"","\\Sigma",!0);defineSymbol(math,main,textord,"","\\Upsilon",!0);defineSymbol(math,main,textord,"","\\Phi",!0);defineSymbol(math,main,textord,"","\\Psi",!0);defineSymbol(math,main,textord,"","\\Omega",!0);defineSymbol(math,main,textord,"A","");defineSymbol(math,main,textord,"B","");defineSymbol(math,main,textord,"E","");defineSymbol(math,main,textord,"Z","");defineSymbol(math,main,textord,"H","");defineSymbol(math,main,textord,"I","");defineSymbol(math,main,textord,"K","");defineSymbol(math,main,textord,"M","");defineSymbol(math,main,textord,"N","");defineSymbol(math,main,textord,"O","");defineSymbol(math,main,textord,"P","");defineSymbol(math,main,textord,"T","");defineSymbol(math,main,textord,"X","");defineSymbol(math,main,textord,"","\\neg",!0);defineSymbol(math,main,textord,"","\\lnot");defineSymbol(math,main,textord,"","\\top");defineSymbol(math,main,textord,"","\\bot");defineSymbol(math,main,textord,"","\\emptyset");defineSymbol(math,ams,textord,"","\\varnothing");defineSymbol(math,main,mathord,"","\\alpha",!0);defineSymbol(math,main,mathord,"","\\beta",!0);defineSymbol(math,main,mathord,"","\\gamma",!0);defineSymbol(math,main,mathord,"","\\delta",!0);defineSymbol(math,main,mathord,"","\\epsilon",!0);defineSymbol(math,main,mathord,"","\\zeta",!0);defineSymbol(math,main,mathord,"","\\eta",!0);defineSymbol(math,main,mathord,"","\\theta",!0);defineSymbol(math,main,mathord,"","\\iota",!0);defineSymbol(math,main,mathord,"","\\kappa",!0);defineSymbol(math,main,mathord,"","\\lambda",!0);defineSymbol(math,main,mathord,"","\\mu",!0);defineSymbol(math,main,mathord,"","\\nu",!0);defineSymbol(math,main,mathord,"","\\xi",!0);defineSymbol(math,main,mathord,"","\\omicron",!0);defineSymbol(math,main,mathord,"","\\pi",!0);defineSymbol(math,main,mathord,"","\\rho",!0);defineSymbol(math,main,mathord,"","\\sigma",!0);defineSymbol(math,main,mathord,"","\\tau",!0);defineSymbol(math,main,mathord,"","\\upsilon",!0);defineSymbol(math,main,mathord,"","\\phi",!0);defineSymbol(math,main,mathord,"","\\chi",!0);defineSymbol(math,main,mathord,"","\\psi",!0);defineSymbol(math,main,mathord,"","\\omega",!0);defineSymbol(math,main,mathord,"","\\varepsilon",!0);defineSymbol(math,main,mathord,"","\\vartheta",!0);defineSymbol(math,main,mathord,"","\\varpi",!0);defineSymbol(math,main,mathord,"","\\varrho",!0);defineSymbol(math,main,mathord,"","\\varsigma",!0);defineSymbol(math,main,mathord,"","\\varphi",!0);defineSymbol(math,main,bin,"","*",!0);defineSymbol(math,main,bin,"+","+");defineSymbol(math,main,bin,"","-",!0);defineSymbol(math,main,bin,"","\\cdot",!0);defineSymbol(math,main,bin,"","\\circ",!0);defineSymbol(math,main,bin,"","\\div",!0);defineSymbol(math,main,bin,"","\\pm",!0);defineSymbol(math,main,bin,"","\\times",!0);defineSymbol(math,main,bin,"","\\cap",!0);defineSymbol(math,main,bin,"","\\cup",!0);defineSymbol(math,main,bin,"","\\setminus",!0);defineSymbol(math,main,bin,"","\\land");defineSymbol(math,main,bin,"","\\lor");defineSymbol(math,main,bin,"","\\wedge",!0);defineSymbol(math,main,bin,"","\\vee",!0);defineSymbol(math,main,textord,"","\\surd");defineSymbol(math,main,open,"","\\langle",!0);defineSymbol(math,main,open,"","\\lvert");defineSymbol(math,main,open,"","\\lVert");defineSymbol(math,main,close,"?","?");defineSymbol(math,main,close,"!","!");defineSymbol(math,main,close,"","\\rangle",!0);defineSymbol(math,main,close,"","\\rvert");defineSymbol(math,main,close,"","\\rVert");defineSymbol(math,main,rel,"=","=");defineSymbol(math,main,rel,":",":");defineSymbol(math,main,rel,"","\\approx",!0);defineSymbol(math,main,rel,"","\\cong",!0);defineSymbol(math,main,rel,"","\\ge");defineSymbol(math,main,rel,"","\\geq",!0);defineSymbol(math,main,rel,"","\\gets");defineSymbol(math,main,rel,">","\\gt",!0);defineSymbol(math,main,rel,"","\\in",!0);defineSymbol(math,main,rel,"","\\@not");defineSymbol(math,main,rel,"","\\subset",!0);defineSymbol(math,main,rel,"","\\supset",!0);defineSymbol(math,main,rel,"","\\subseteq",!0);defineSymbol(math,main,rel,"","\\supseteq",!0);defineSymbol(math,ams,rel,"","\\nsubseteq",!0);defineSymbol(math,ams,rel,"","\\nsupseteq",!0);defineSymbol(math,main,rel,"","\\models");defineSymbol(math,main,rel,"","\\leftarrow",!0);defineSymbol(math,main,rel,"","\\le");defineSymbol(math,main,rel,"","\\leq",!0);defineSymbol(math,main,rel,"<","\\lt",!0);defineSymbol(math,main,rel,"","\\rightarrow",!0);defineSymbol(math,main,rel,"","\\to");defineSymbol(math,ams,rel,"","\\ngeq",!0);defineSymbol(math,ams,rel,"","\\nleq",!0);defineSymbol(math,main,spacing,"","\\ ");defineSymbol(math,main,spacing,"","\\space");defineSymbol(math,main,spacing,"","\\nobreakspace");defineSymbol(text,main,spacing,"","\\ ");defineSymbol(text,main,spacing,""," ");defineSymbol(text,main,spacing,"","\\space");defineSymbol(text,main,spacing,"","\\nobreakspace");defineSymbol(math,main,spacing,null,"\\nobreak");defineSymbol(math,main,spacing,null,"\\allowbreak");defineSymbol(math,main,punct,",",",");defineSymbol(math,main,punct,";",";");defineSymbol(math,ams,bin,"","\\barwedge",!0);defineSymbol(math,ams,bin,"","\\veebar",!0);defineSymbol(math,main,bin,"","\\odot",!0);defineSymbol(math,main,bin,"","\\oplus",!0);defineSymbol(math,main,bin,"","\\otimes",!0);defineSymbol(math,main,textord,"","\\partial",!0);defineSymbol(math,main,bin,"","\\oslash",!0);defineSymbol(math,ams,bin,"","\\circledcirc",!0);defineSymbol(math,ams,bin,"","\\boxdot",!0);defineSymbol(math,main,bin,"","\\bigtriangleup");defineSymbol(math,main,bin,"","\\bigtriangledown");defineSymbol(math,main,bin,"","\\dagger");defineSymbol(math,main,bin,"","\\diamond");defineSymbol(math,main,bin,"","\\star");defineSymbol(math,main,bin,"","\\triangleleft");defineSymbol(math,main,bin,"","\\triangleright");defineSymbol(math,main,open,"{","\\{");defineSymbol(text,main,textord,"{","\\{");defineSymbol(text,main,textord,"{","\\textbraceleft");defineSymbol(math,main,close,"}","\\}");defineSymbol(text,main,textord,"}","\\}");defineSymbol(text,main,textord,"}","\\textbraceright");defineSymbol(math,main,open,"{","\\lbrace");defineSymbol(math,main,close,"}","\\rbrace");defineSymbol(math,main,open,"[","\\lbrack",!0);defineSymbol(text,main,textord,"[","\\lbrack",!0);defineSymbol(math,main,close,"]","\\rbrack",!0);defineSymbol(text,main,textord,"]","\\rbrack",!0);defineSymbol(math,main,open,"(","\\lparen",!0);defineSymbol(math,main,close,")","\\rparen",!0);defineSymbol(text,main,textord,"<","\\textless",!0);defineSymbol(text,main,textord,">","\\textgreater",!0);defineSymbol(math,main,open,"","\\lfloor",!0);defineSymbol(math,main,close,"","\\rfloor",!0);defineSymbol(math,main,open,"","\\lceil",!0);defineSymbol(math,main,close,"","\\rceil",!0);defineSymbol(math,main,textord,"\\","\\backslash");defineSymbol(math,main,textord,"","|");defineSymbol(math,main,textord,"","\\vert");defineSymbol(text,main,textord,"|","\\textbar",!0);defineSymbol(math,main,textord,"","\\|");defineSymbol(math,main,textord,"","\\Vert");defineSymbol(text,main,textord,"","\\textbardbl");defineSymbol(text,main,textord,"~","\\textasciitilde");defineSymbol(text,main,textord,"\\","\\textbackslash");defineSymbol(text,main,textord,"^","\\textasciicircum");defineSymbol(math,main,rel,"","\\uparrow",!0);defineSymbol(math,main,rel,"","\\Uparrow",!0);defineSymbol(math,main,rel,"","\\downarrow",!0);defineSymbol(math,main,rel,"","\\Downarrow",!0);defineSymbol(math,main,rel,"","\\updownarrow",!0);defineSymbol(math,main,rel,"","\\Updownarrow",!0);defineSymbol(math,main,op,"","\\coprod");defineSymbol(math,main,op,"","\\bigvee");defineSymbol(math,main,op,"","\\bigwedge");defineSymbol(math,main,op,"","\\biguplus");defineSymbol(math,main,op,"","\\bigcap");defineSymbol(math,main,op,"","\\bigcup");defineSymbol(math,main,op,"","\\int");defineSymbol(math,main,op,"","\\intop");defineSymbol(math,main,op,"","\\iint");defineSymbol(math,main,op,"","\\iiint");defineSymbol(math,main,op,"","\\prod");defineSymbol(math,main,op,"","\\sum");defineSymbol(math,main,op,"","\\bigotimes");defineSymbol(math,main,op,"","\\bigoplus");defineSymbol(math,main,op,"","\\bigodot");defineSymbol(math,main,op,"","\\oint");defineSymbol(math,main,op,"","\\oiint");defineSymbol(math,main,op,"","\\oiiint");defineSymbol(math,main,op,"","\\bigsqcup");defineSymbol(math,main,op,"","\\smallint");defineSymbol(text,main,inner,"","\\textellipsis");defineSymbol(math,main,inner,"","\\mathellipsis");defineSymbol(text,main,inner,"","\\ldots",!0);defineSymbol(math,main,inner,"","\\ldots",!0);defineSymbol(math,main,inner,"","\\@cdots",!0);defineSymbol(math,main,inner,"","\\ddots",!0);defineSymbol(math,main,textord,"","\\varvdots");defineSymbol(text,main,textord,"","\\varvdots");defineSymbol(math,main,accent,"","\\acute");defineSymbol(math,main,accent,"","\\grave");defineSymbol(math,main,accent,"","\\ddot");defineSymbol(math,main,accent,"~","\\tilde");defineSymbol(math,main,accent,"","\\bar");defineSymbol(math,main,accent,"","\\breve");defineSymbol(math,main,accent,"","\\check");defineSymbol(math,main,accent,"^","\\hat");defineSymbol(math,main,accent,"","\\vec");defineSymbol(math,main,accent,"","\\dot");defineSymbol(math,main,accent,"","\\mathring");defineSymbol(math,main,mathord,"","\\@imath");defineSymbol(math,main,mathord,"","\\@jmath");defineSymbol(math,main,textord,"","");defineSymbol(math,main,textord,"","");defineSymbol(text,main,textord,"","\\i",!0);defineSymbol(text,main,textord,"","\\j",!0);defineSymbol(text,main,textord,"","\\ss",!0);defineSymbol(text,main,textord,"","\\ae",!0);defineSymbol(text,main,textord,"","\\oe",!0);defineSymbol(text,main,textord,"","\\o",!0);defineSymbol(text,main,textord,"","\\AE",!0);defineSymbol(text,main,textord,"","\\OE",!0);defineSymbol(text,main,textord,"","\\O",!0);defineSymbol(text,main,accent,"","\\'");defineSymbol(text,main,accent,"","\\`");defineSymbol(text,main,accent,"","\\^");defineSymbol(text,main,accent,"","\\~");defineSymbol(text,main,accent,"","\\=");defineSymbol(text,main,accent,"","\\u");defineSymbol(text,main,accent,"","\\.");defineSymbol(text,main,accent,"","\\c");defineSymbol(text,main,accent,"","\\r");defineSymbol(text,main,accent,"","\\v");defineSymbol(text,main,accent,"",'\\"');defineSymbol(text,main,accent,"","\\H");defineSymbol(text,main,accent,"","\\textcircled");var ligatures={"--":!0,"---":!0,"``":!0,"''":!0};defineSymbol(text,main,textord,"","--",!0);defineSymbol(text,main,textord,"","\\textendash");defineSymbol(text,main,textord,"","---",!0);defineSymbol(text,main,textord,"","\\textemdash");defineSymbol(text,main,textord,"","`",!0);defineSymbol(text,main,textord,"","\\textquoteleft");defineSymbol(text,main,textord,"","'",!0);defineSymbol(text,main,textord,"","\\textquoteright");defineSymbol(text,main,textord,"","``",!0);defineSymbol(text,main,textord,"","\\textquotedblleft");defineSymbol(text,main,textord,"","''",!0);defineSymbol(text,main,textord,"","\\textquotedblright");defineSymbol(math,main,textord,"","\\degree",!0);defineSymbol(text,main,textord,"","\\degree");defineSymbol(text,main,textord,"","\\textdegree",!0);defineSymbol(math,main,textord,"","\\pounds");defineSymbol(math,main,textord,"","\\mathsterling",!0);defineSymbol(text,main,textord,"","\\pounds");defineSymbol(text,main,textord,"","\\textsterling",!0);defineSymbol(math,ams,textord,"","\\maltese");defineSymbol(text,ams,textord,"","\\maltese");var mathTextSymbols='0123456789/@."';for(var i=0;i<mathTextSymbols.length;i++){var ch=mathTextSymbols.charAt(i);defineSymbol(math,main,textord,ch,ch)}var textSymbols='0123456789!@*()-=+";:?/.,';for(var _i=0;_i<textSymbols.length;_i++){var _ch=textSymbols.charAt(_i);defineSymbol(text,main,textord,_ch,_ch)}var letters="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";for(var _i2=0;_i2<letters.length;_i2++){var _ch2=letters.charAt(_i2);defineSymbol(math,main,mathord,_ch2,_ch2),defineSymbol(text,main,textord,_ch2,_ch2)}defineSymbol(math,ams,textord,"C","");defineSymbol(text,ams,textord,"C","");defineSymbol(math,ams,textord,"H","");defineSymbol(text,ams,textord,"H","");defineSymbol(math,ams,textord,"N","");defineSymbol(text,ams,textord,"N","");defineSymbol(math,ams,textord,"P","");defineSymbol(text,ams,textord,"P","");defineSymbol(math,ams,textord,"Q","");defineSymbol(text,ams,textord,"Q","");defineSymbol(math,ams,textord,"R","");defineSymbol(text,ams,textord,"R","");defineSymbol(math,ams,textord,"Z","");defineSymbol(text,ams,textord,"Z","");defineSymbol(math,main,mathord,"h","");defineSymbol(text,main,mathord,"h","");var wideChar="";for(var _i3=0;_i3<letters.length;_i3++){var _ch3=letters.charAt(_i3);wideChar=String.fromCharCode(55349,56320+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),wideChar=String.fromCharCode(55349,56372+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),wideChar=String.fromCharCode(55349,56424+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),wideChar=String.fromCharCode(55349,56580+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),wideChar=String.fromCharCode(55349,56684+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),wideChar=String.fromCharCode(55349,56736+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),wideChar=String.fromCharCode(55349,56788+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),wideChar=String.fromCharCode(55349,56840+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),wideChar=String.fromCharCode(55349,56944+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),_i3<26&&(wideChar=String.fromCharCode(55349,56632+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),wideChar=String.fromCharCode(55349,56476+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar))}wideChar="";defineSymbol(math,main,mathord,"k",wideChar);defineSymbol(text,main,textord,"k",wideChar);for(var _i4=0;_i4<10;_i4++){var _ch4=_i4.toString();wideChar=String.fromCharCode(55349,57294+_i4),defineSymbol(math,main,mathord,_ch4,wideChar),defineSymbol(text,main,textord,_ch4,wideChar),wideChar=String.fromCharCode(55349,57314+_i4),defineSymbol(math,main,mathord,_ch4,wideChar),defineSymbol(text,main,textord,_ch4,wideChar),wideChar=String.fromCharCode(55349,57324+_i4),defineSymbol(math,main,mathord,_ch4,wideChar),defineSymbol(text,main,textord,_ch4,wideChar),wideChar=String.fromCharCode(55349,57334+_i4),defineSymbol(math,main,mathord,_ch4,wideChar),defineSymbol(text,main,textord,_ch4,wideChar)}var extraLatin="";for(var _i5=0;_i5<extraLatin.length;_i5++){var _ch5=extraLatin.charAt(_i5);defineSymbol(math,main,mathord,_ch5,_ch5),defineSymbol(text,main,textord,_ch5,_ch5)}var wideLatinLetterData=[["mathbf","textbf","Main-Bold"],["mathbf","textbf","Main-Bold"],["mathnormal","textit","Math-Italic"],["mathnormal","textit","Math-Italic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["mathscr","textscr","Script-Regular"],["","",""],["","",""],["","",""],["mathfrak","textfrak","Fraktur-Regular"],["mathfrak","textfrak","Fraktur-Regular"],["mathbb","textbb","AMS-Regular"],["mathbb","textbb","AMS-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathitsf","textitsf","SansSerif-Italic"],["mathitsf","textitsf","SansSerif-Italic"],["","",""],["","",""],["mathtt","texttt","Typewriter-Regular"],["mathtt","texttt","Typewriter-Regular"]],wideNumeralData=[["mathbf","textbf","Main-Bold"],["","",""],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathtt","texttt","Typewriter-Regular"]],wideCharacterFont=function t(r,a){var n=r.charCodeAt(0),s=r.charCodeAt(1),o=(n-55296)*1024+(s-56320)+65536,l=a==="math"?0:1;if(119808<=o&&o<120484){var u=Math.floor((o-119808)/26);return[wideLatinLetterData[u][2],wideLatinLetterData[u][l]]}else if(120782<=o&&o<=120831){var h=Math.floor((o-120782)/10);return[wideNumeralData[h][2],wideNumeralData[h][l]]}else{if(o===120485||o===120486)return[wideLatinLetterData[0][2],wideLatinLetterData[0][l]];if(120486<o&&o<120782)return["",""];throw new ParseError("Unsupported character: "+r)}},lookupSymbol=function t(r,a,n){return symbols[n][r]&&symbols[n][r].replace&&(r=symbols[n][r].replace),{value:r,metrics:getCharacterMetrics(r,a,n)}},makeSymbol=function t(r,a,n,s,o){var l=lookupSymbol(r,a,n),u=l.metrics;r=l.value;var h;if(u){var c=u.italic;(n==="text"||s&&s.font==="mathit")&&(c=0),h=new SymbolNode(r,u.height,u.depth,c,u.skew,u.width,o)}else typeof console<"u"&&console.warn("No character metrics "+("for '"+r+"' in style '"+a+"' and mode '"+n+"'")),h=new SymbolNode(r,0,0,0,0,0,o);if(s){h.maxFontSize=s.sizeMultiplier,s.style.isTight()&&h.classes.push("mtight");var f=s.getColor();f&&(h.style.color=f)}return h},mathsym=function t(r,a,n,s){return s===void 0&&(s=[]),n.font==="boldsymbol"&&lookupSymbol(r,"Main-Bold",a).metrics?makeSymbol(r,"Main-Bold",a,n,s.concat(["mathbf"])):r==="\\"||symbols[a][r].font==="main"?makeSymbol(r,"Main-Regular",a,n,s):makeSymbol(r,"AMS-Regular",a,n,s.concat(["amsrm"]))},boldsymbol=function t(r,a,n,s,o){return o!=="textord"&&lookupSymbol(r,"Math-BoldItalic",a).metrics?{fontName:"Math-BoldItalic",fontClass:"boldsymbol"}:{fontName:"Main-Bold",fontClass:"mathbf"}},makeOrd=function t(r,a,n){var s=r.mode,o=r.text,l=["mord"],u=s==="math"||s==="text"&&a.font,h=u?a.font:a.fontFamily,c="",f="";if(o.charCodeAt(0)===55349&&([c,f]=wideCharacterFont(o,s)),c.length>0)return makeSymbol(o,c,s,a,l.concat(f));if(h){var d,p;if(h==="boldsymbol"){var v=boldsymbol(o,s,a,l,n);d=v.fontName,p=[v.fontClass]}else u?(d=fontMap[h].fontName,p=[h]):(d=retrieveTextFontName(h,a.fontWeight,a.fontShape),p=[h,a.fontWeight,a.fontShape]);if(lookupSymbol(o,d,s).metrics)return makeSymbol(o,d,s,a,l.concat(p));if(ligatures.hasOwnProperty(o)&&d.slice(0,10)==="Typewriter"){for(var y=[],b=0;b<o.length;b++)y.push(makeSymbol(o[b],d,s,a,l.concat(p)));return makeFragment(y)}}if(n==="mathord")return makeSymbol(o,"Math-Italic",s,a,l.concat(["mathnormal"]));if(n==="textord"){var _=symbols[s][o]&&symbols[s][o].font;if(_==="ams"){var N=retrieveTextFontName("amsrm",a.fontWeight,a.fontShape);return makeSymbol(o,N,s,a,l.concat("amsrm",a.fontWeight,a.fontShape))}else if(_==="main"||!_){var M=retrieveTextFontName("textrm",a.fontWeight,a.fontShape);return makeSymbol(o,M,s,a,l.concat(a.fontWeight,a.fontShape))}else{var C=retrieveTextFontName(_,a.fontWeight,a.fontShape);return makeSymbol(o,C,s,a,l.concat(C,a.fontWeight,a.fontShape))}}else throw new Error("unexpected type: "+n+" in makeOrd")},canCombine=(t,r)=>{if(createClass(t.classes)!==createClass(r.classes)||t.skew!==r.skew||t.maxFontSize!==r.maxFontSize)return!1;if(t.classes.length===1){var a=t.classes[0];if(a==="mbin"||a==="mord")return!1}for(var n in t.style)if(t.style.hasOwnProperty(n)&&t.style[n]!==r.style[n])return!1;for(var s in r.style)if(r.style.hasOwnProperty(s)&&t.style[s]!==r.style[s])return!1;return!0},tryCombineChars=t=>{for(var r=0;r<t.length-1;r++){var a=t[r],n=t[r+1];a instanceof SymbolNode&&n instanceof SymbolNode&&canCombine(a,n)&&(a.text+=n.text,a.height=Math.max(a.height,n.height),a.depth=Math.max(a.depth,n.depth),a.italic=n.italic,t.splice(r+1,1),r--)}return t},sizeElementFromChildren=function t(r){for(var a=0,n=0,s=0,o=0;o<r.children.length;o++){var l=r.children[o];l.height>a&&(a=l.height),l.depth>n&&(n=l.depth),l.maxFontSize>s&&(s=l.maxFontSize)}r.height=a,r.depth=n,r.maxFontSize=s},makeSpan$2=function t(r,a,n,s){var o=new Span(r,a,n,s);return sizeElementFromChildren(o),o},makeSvgSpan=(t,r,a,n)=>new Span(t,r,a,n),makeLineSpan=function t(r,a,n){var s=makeSpan$2([r],[],a);return s.height=Math.max(n||a.fontMetrics().defaultRuleThickness,a.minRuleThickness),s.style.borderBottomWidth=makeEm(s.height),s.maxFontSize=1,s},makeAnchor=function t(r,a,n,s){var o=new Anchor(r,a,n,s);return sizeElementFromChildren(o),o},makeFragment=function t(r){var a=new DocumentFragment(r);return sizeElementFromChildren(a),a},wrapFragment=function t(r,a){return r instanceof DocumentFragment?makeSpan$2([],[r],a):r},getVListChildrenAndDepth=function t(r){if(r.positionType==="individualShift"){for(var a=r.children,n=[a[0]],s=-a[0].shift-a[0].elem.depth,o=s,l=1;l<a.length;l++){var u=-a[l].shift-o-a[l].elem.depth,h=u-(a[l-1].elem.height+a[l-1].elem.depth);o=o+u,n.push({type:"kern",size:h}),n.push(a[l])}return{children:n,depth:s}}var c;if(r.positionType==="top"){for(var f=r.positionData,d=0;d<r.children.length;d++){var p=r.children[d];f-=p.type==="kern"?p.size:p.elem.height+p.elem.depth}c=f}else if(r.positionType==="bottom")c=-r.positionData;else{var v=r.children[0];if(v.type!=="elem")throw new Error('First child must have type "elem".');if(r.positionType==="shift")c=-v.elem.depth-r.positionData;else if(r.positionType==="firstBaseline")c=-v.elem.depth;else throw new Error("Invalid positionType "+r.positionType+".")}return{children:r.children,depth:c}},makeVList=function t(r,a){for(var{children:n,depth:s}=getVListChildrenAndDepth(r),o=0,l=0;l<n.length;l++){var u=n[l];if(u.type==="elem"){var h=u.elem;o=Math.max(o,h.maxFontSize,h.height)}}o+=2;var c=makeSpan$2(["pstrut"],[]);c.style.height=makeEm(o);for(var f=[],d=s,p=s,v=s,y=0;y<n.length;y++){var b=n[y];if(b.type==="kern")v+=b.size;else{var _=b.elem,N=b.wrapperClasses||[],M=b.wrapperStyle||{},C=makeSpan$2(N,[c,_],void 0,M);C.style.top=makeEm(-o-v-_.depth),b.marginLeft&&(C.style.marginLeft=b.marginLeft),b.marginRight&&(C.style.marginRight=b.marginRight),f.push(C),v+=_.height+_.depth}d=Math.min(d,v),p=Math.max(p,v)}var $=makeSpan$2(["vlist"],f);$.style.height=makeEm(p);var w;if(d<0){var A=makeSpan$2([],[]),X=makeSpan$2(["vlist"],[A]);X.style.height=makeEm(-d);var O=makeSpan$2(["vlist-s"],[new SymbolNode("")]);w=[makeSpan$2(["vlist-r"],[$,O]),makeSpan$2(["vlist-r"],[X])]}else w=[makeSpan$2(["vlist-r"],[$])];var G=makeSpan$2(["vlist-t"],w);return w.length===2&&G.classes.push("vlist-t2"),G.height=p,G.depth=-d,G},makeGlue=(t,r)=>{var a=makeSpan$2(["mspace"],[],r),n=calculateSize(t,r);return a.style.marginRight=makeEm(n),a},retrieveTextFontName=function t(r,a,n){var s="";switch(r){case"amsrm":s="AMS";break;case"textrm":s="Main";break;case"textsf":s="SansSerif";break;case"texttt":s="Typewriter";break;default:s=r}var o;return a==="textbf"&&n==="textit"?o="BoldItalic":a==="textbf"?o="Bold":a==="textit"?o="Italic":o="Regular",s+"-"+o},fontMap={mathbf:{variant:"bold",fontName:"Main-Bold"},mathrm:{variant:"normal",fontName:"Main-Regular"},textit:{variant:"italic",fontName:"Main-Italic"},mathit:{variant:"italic",fontName:"Main-Italic"},mathnormal:{variant:"italic",fontName:"Math-Italic"},mathsfit:{variant:"sans-serif-italic",fontName:"SansSerif-Italic"},mathbb:{variant:"double-struck",fontName:"AMS-Regular"},mathcal:{variant:"script",fontName:"Caligraphic-Regular"},mathfrak:{variant:"fraktur",fontName:"Fraktur-Regular"},mathscr:{variant:"script",fontName:"Script-Regular"},mathsf:{variant:"sans-serif",fontName:"SansSerif-Regular"},mathtt:{variant:"monospace",fontName:"Typewriter-Regular"}},svgData={vec:["vec",.471,.714],oiintSize1:["oiintSize1",.957,.499],oiintSize2:["oiintSize2",1.472,.659],oiiintSize1:["oiiintSize1",1.304,.499],oiiintSize2:["oiiintSize2",1.98,.659]},staticSvg=function t(r,a){var[n,s,o]=svgData[r],l=new PathNode(n),u=new SvgNode([l],{width:makeEm(s),height:makeEm(o),style:"width:"+makeEm(s),viewBox:"0 0 "+1e3*s+" "+1e3*o,preserveAspectRatio:"xMinYMin"}),h=makeSvgSpan(["overlay"],[u],a);return h.height=o,h.style.height=makeEm(o),h.style.width=makeEm(s),h},buildCommon={fontMap,makeSymbol,mathsym,makeSpan:makeSpan$2,makeSvgSpan,makeLineSpan,makeAnchor,makeFragment,wrapFragment,makeVList,makeOrd,makeGlue,staticSvg,svgData,tryCombineChars},thinspace={number:3,unit:"mu"},mediumspace={number:4,unit:"mu"},thickspace={number:5,unit:"mu"},spacings={mord:{mop:thinspace,mbin:mediumspace,mrel:thickspace,minner:thinspace},mop:{mord:thinspace,mop:thinspace,mrel:thickspace,minner:thinspace},mbin:{mord:mediumspace,mop:mediumspace,mopen:mediumspace,minner:mediumspace},mrel:{mord:thickspace,mop:thickspace,mopen:thickspace,minner:thickspace},mopen:{},mclose:{mop:thinspace,mbin:mediumspace,mrel:thickspace,minner:thinspace},mpunct:{mord:thinspace,mop:thinspace,mrel:thickspace,mopen:thinspace,mclose:thinspace,mpunct:thinspace,minner:thinspace},minner:{mord:thinspace,mop:thinspace,mbin:mediumspace,mrel:thickspace,mopen:thinspace,mpunct:thinspace,minner:thinspace}},tightSpacings={mord:{mop:thinspace},mop:{mord:thinspace,mop:thinspace},mbin:{},mrel:{},mopen:{},mclose:{mop:thinspace},mpunct:{},minner:{mop:thinspace}},_functions={},_htmlGroupBuilders={},_mathmlGroupBuilders={};function defineFunction(t){for(var{type:r,names:a,props:n,handler:s,htmlBuilder:o,mathmlBuilder:l}=t,u={type:r,numArgs:n.numArgs,argTypes:n.argTypes,allowedInArgument:!!n.allowedInArgument,allowedInText:!!n.allowedInText,allowedInMath:n.allowedInMath===void 0?!0:n.allowedInMath,numOptionalArgs:n.numOptionalArgs||0,infix:!!n.infix,primitive:!!n.primitive,handler:s},h=0;h<a.length;++h)_functions[a[h]]=u;r&&(o&&(_htmlGroupBuilders[r]=o),l&&(_mathmlGroupBuilders[r]=l))}function defineFunctionBuilders(t){var{type:r,htmlBuilder:a,mathmlBuilder:n}=t;defineFunction({type:r,names:[],props:{numArgs:0},handler(){throw new Error("Should never be called.")},htmlBuilder:a,mathmlBuilder:n})}var normalizeArgument=function t(r){return r.type==="ordgroup"&&r.body.length===1?r.body[0]:r},ordargument=function t(r){return r.type==="ordgroup"?r.body:[r]},makeSpan$1=buildCommon.makeSpan,binLeftCanceller=["leftmost","mbin","mopen","mrel","mop","mpunct"],binRightCanceller=["rightmost","mrel","mclose","mpunct"],styleMap$1={display:Style$1.DISPLAY,text:Style$1.TEXT,script:Style$1.SCRIPT,scriptscript:Style$1.SCRIPTSCRIPT},DomEnum={mord:"mord",mop:"mop",mbin:"mbin",mrel:"mrel",mopen:"mopen",mclose:"mclose",mpunct:"mpunct",minner:"minner"},buildExpression$1=function t(r,a,n,s){s===void 0&&(s=[null,null]);for(var o=[],l=0;l<r.length;l++){var u=buildGroup$1(r[l],a);if(u instanceof DocumentFragment){var h=u.children;o.push(...h)}else o.push(u)}if(buildCommon.tryCombineChars(o),!n)return o;var c=a;if(r.length===1){var f=r[0];f.type==="sizing"?c=a.havingSize(f.size):f.type==="styling"&&(c=a.havingStyle(styleMap$1[f.style]))}var d=makeSpan$1([s[0]||"leftmost"],[],a),p=makeSpan$1([s[1]||"rightmost"],[],a),v=n==="root";return traverseNonSpaceNodes(o,(y,b)=>{var _=b.classes[0],N=y.classes[0];_==="mbin"&&binRightCanceller.includes(N)?b.classes[0]="mord":N==="mbin"&&binLeftCanceller.includes(_)&&(y.classes[0]="mord")},{node:d},p,v),traverseNonSpaceNodes(o,(y,b)=>{var _=getTypeOfDomTree(b),N=getTypeOfDomTree(y),M=_&&N?y.hasClass("mtight")?tightSpacings[_][N]:spacings[_][N]:null;if(M)return buildCommon.makeGlue(M,c)},{node:d},p,v),o},traverseNonSpaceNodes=function t(r,a,n,s,o){s&&r.push(s);for(var l=0;l<r.length;l++){var u=r[l],h=checkPartialGroup(u);if(h){t(h.children,a,n,null,o);continue}var c=!u.hasClass("mspace");if(c){var f=a(u,n.node);f&&(n.insertAfter?n.insertAfter(f):(r.unshift(f),l++))}c?n.node=u:o&&u.hasClass("newline")&&(n.node=makeSpan$1(["leftmost"])),n.insertAfter=(d=>p=>{r.splice(d+1,0,p),l++})(l)}s&&r.pop()},checkPartialGroup=function t(r){return r instanceof DocumentFragment||r instanceof Anchor||r instanceof Span&&r.hasClass("enclosing")?r:null},getOutermostNode=function t(r,a){var n=checkPartialGroup(r);if(n){var s=n.children;if(s.length){if(a==="right")return t(s[s.length-1],"right");if(a==="left")return t(s[0],"left")}}return r},getTypeOfDomTree=function t(r,a){return r?(a&&(r=getOutermostNode(r,a)),DomEnum[r.classes[0]]||null):null},makeNullDelimiter=function t(r,a){var n=["nulldelimiter"].concat(r.baseSizingClasses());return makeSpan$1(a.concat(n))},buildGroup$1=function t(r,a,n){if(!r)return makeSpan$1();if(_htmlGroupBuilders[r.type]){var s=_htmlGroupBuilders[r.type](r,a);if(n&&a.size!==n.size){s=makeSpan$1(a.sizingClasses(n),[s],a);var o=a.sizeMultiplier/n.sizeMultiplier;s.height*=o,s.depth*=o}return s}else throw new ParseError("Got group of unknown type: '"+r.type+"'")};function buildHTMLUnbreakable(t,r){var a=makeSpan$1(["base"],t,r),n=makeSpan$1(["strut"]);return n.style.height=makeEm(a.height+a.depth),a.depth&&(n.style.verticalAlign=makeEm(-a.depth)),a.children.unshift(n),a}function buildHTML(t,r){var a=null;t.length===1&&t[0].type==="tag"&&(a=t[0].tag,t=t[0].body);var n=buildExpression$1(t,r,"root"),s;n.length===2&&n[1].hasClass("tag")&&(s=n.pop());for(var o=[],l=[],u=0;u<n.length;u++)if(l.push(n[u]),n[u].hasClass("mbin")||n[u].hasClass("mrel")||n[u].hasClass("allowbreak")){for(var h=!1;u<n.length-1&&n[u+1].hasClass("mspace")&&!n[u+1].hasClass("newline");)u++,l.push(n[u]),n[u].hasClass("nobreak")&&(h=!0);h||(o.push(buildHTMLUnbreakable(l,r)),l=[])}else n[u].hasClass("newline")&&(l.pop(),l.length>0&&(o.push(buildHTMLUnbreakable(l,r)),l=[]),o.push(n[u]));l.length>0&&o.push(buildHTMLUnbreakable(l,r));var c;a?(c=buildHTMLUnbreakable(buildExpression$1(a,r,!0)),c.classes=["tag"],o.push(c)):s&&o.push(s);var f=makeSpan$1(["katex-html"],o);if(f.setAttribute("aria-hidden","true"),c){var d=c.children[0];d.style.height=makeEm(f.height+f.depth),f.depth&&(d.style.verticalAlign=makeEm(-f.depth))}return f}function newDocumentFragment(t){return new DocumentFragment(t)}class MathNode{constructor(r,a,n){this.type=void 0,this.attributes=void 0,this.children=void 0,this.classes=void 0,this.type=r,this.attributes={},this.children=a||[],this.classes=n||[]}setAttribute(r,a){this.attributes[r]=a}getAttribute(r){return this.attributes[r]}toNode(){var r=document.createElementNS("http://www.w3.org/1998/Math/MathML",this.type);for(var a in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,a)&&r.setAttribute(a,this.attributes[a]);this.classes.length>0&&(r.className=createClass(this.classes));for(var n=0;n<this.children.length;n++)if(this.children[n]instanceof TextNode&&this.children[n+1]instanceof TextNode){for(var s=this.children[n].toText()+this.children[++n].toText();this.children[n+1]instanceof TextNode;)s+=this.children[++n].toText();r.appendChild(new TextNode(s).toNode())}else r.appendChild(this.children[n].toNode());return r}toMarkup(){var r="<"+this.type;for(var a in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,a)&&(r+=" "+a+'="',r+=utils.escape(this.attributes[a]),r+='"');this.classes.length>0&&(r+=' class ="'+utils.escape(createClass(this.classes))+'"'),r+=">";for(var n=0;n<this.children.length;n++)r+=this.children[n].toMarkup();return r+="</"+this.type+">",r}toText(){return this.children.map(r=>r.toText()).join("")}}class TextNode{constructor(r){this.text=void 0,this.text=r}toNode(){return document.createTextNode(this.text)}toMarkup(){return utils.escape(this.toText())}toText(){return this.text}}class SpaceNode{constructor(r){this.width=void 0,this.character=void 0,this.width=r,r>=.05555&&r<=.05556?this.character="":r>=.1666&&r<=.1667?this.character="":r>=.2222&&r<=.2223?this.character="":r>=.2777&&r<=.2778?this.character="":r>=-.05556&&r<=-.05555?this.character="":r>=-.1667&&r<=-.1666?this.character="":r>=-.2223&&r<=-.2222?this.character="":r>=-.2778&&r<=-.2777?this.character="":this.character=null}toNode(){if(this.character)return document.createTextNode(this.character);var r=document.createElementNS("http://www.w3.org/1998/Math/MathML","mspace");return r.setAttribute("width",makeEm(this.width)),r}toMarkup(){return this.character?"<mtext>"+this.character+"</mtext>":'<mspace width="'+makeEm(this.width)+'"/>'}toText(){return this.character?this.character:" "}}var mathMLTree={MathNode,TextNode,SpaceNode,newDocumentFragment},makeText=function t(r,a,n){return symbols[a][r]&&symbols[a][r].replace&&r.charCodeAt(0)!==55349&&!(ligatures.hasOwnProperty(r)&&n&&(n.fontFamily&&n.fontFamily.slice(4,6)==="tt"||n.font&&n.font.slice(4,6)==="tt"))&&(r=symbols[a][r].replace),new mathMLTree.TextNode(r)},makeRow=function t(r){return r.length===1?r[0]:new mathMLTree.MathNode("mrow",r)},getVariant=function t(r,a){if(a.fontFamily==="texttt")return"monospace";if(a.fontFamily==="textsf")return a.fontShape==="textit"&&a.fontWeight==="textbf"?"sans-serif-bold-italic":a.fontShape==="textit"?"sans-serif-italic":a.fontWeight==="textbf"?"bold-sans-serif":"sans-serif";if(a.fontShape==="textit"&&a.fontWeight==="textbf")return"bold-italic";if(a.fontShape==="textit")return"italic";if(a.fontWeight==="textbf")return"bold";var n=a.font;if(!n||n==="mathnormal")return null;var s=r.mode;if(n==="mathit")return"italic";if(n==="boldsymbol")return r.type==="textord"?"bold":"bold-italic";if(n==="mathbf")return"bold";if(n==="mathbb")return"double-struck";if(n==="mathsfit")return"sans-serif-italic";if(n==="mathfrak")return"fraktur";if(n==="mathscr"||n==="mathcal")return"script";if(n==="mathsf")return"sans-serif";if(n==="mathtt")return"monospace";var o=r.text;if(["\\imath","\\jmath"].includes(o))return null;symbols[s][o]&&symbols[s][o].replace&&(o=symbols[s][o].replace);var l=buildCommon.fontMap[n].fontName;return getCharacterMetrics(o,l,s)?buildCommon.fontMap[n].variant:null};function isNumberPunctuation(t){if(!t)return!1;if(t.type==="mi"&&t.children.length===1){var r=t.children[0];return r instanceof TextNode&&r.text==="."}else if(t.type==="mo"&&t.children.length===1&&t.getAttribute("separator")==="true"&&t.getAttribute("lspace")==="0em"&&t.getAttribute("rspace")==="0em"){var a=t.children[0];return a instanceof TextNode&&a.text===","}else return!1}var buildExpression=function t(r,a,n){if(r.length===1){var s=buildGroup(r[0],a);return n&&s instanceof MathNode&&s.type==="mo"&&(s.setAttribute("lspace","0em"),s.setAttribute("rspace","0em")),[s]}for(var o=[],l,u=0;u<r.length;u++){var h=buildGroup(r[u],a);if(h instanceof MathNode&&l instanceof MathNode){if(h.type==="mtext"&&l.type==="mtext"&&h.getAttribute("mathvariant")===l.getAttribute("mathvariant")){l.children.push(...h.children);continue}else if(h.type==="mn"&&l.type==="mn"){l.children.push(...h.children);continue}else if(isNumberPunctuation(h)&&l.type==="mn"){l.children.push(...h.children);continue}else if(h.type==="mn"&&isNumberPunctuation(l))h.children=[...l.children,...h.children],o.pop();else if((h.type==="msup"||h.type==="msub")&&h.children.length>=1&&(l.type==="mn"||isNumberPunctuation(l))){var c=h.children[0];c instanceof MathNode&&c.type==="mn"&&(c.children=[...l.children,...c.children],o.pop())}else if(l.type==="mi"&&l.children.length===1){var f=l.children[0];if(f instanceof TextNode&&f.text===""&&(h.type==="mo"||h.type==="mi"||h.type==="mn")){var d=h.children[0];d instanceof TextNode&&d.text.length>0&&(d.text=d.text.slice(0,1)+""+d.text.slice(1),o.pop())}}}o.push(h),l=h}return o},buildExpressionRow=function t(r,a,n){return makeRow(buildExpression(r,a,n))},buildGroup=function t(r,a){if(!r)return new mathMLTree.MathNode("mrow");if(_mathmlGroupBuilders[r.type]){var n=_mathmlGroupBuilders[r.type](r,a);return n}else throw new ParseError("Got group of unknown type: '"+r.type+"'")};function buildMathML(t,r,a,n,s){var o=buildExpression(t,a),l;o.length===1&&o[0]instanceof MathNode&&["mrow","mtable"].includes(o[0].type)?l=o[0]:l=new mathMLTree.MathNode("mrow",o);var u=new mathMLTree.MathNode("annotation",[new mathMLTree.TextNode(r)]);u.setAttribute("encoding","application/x-tex");var h=new mathMLTree.MathNode("semantics",[l,u]),c=new mathMLTree.MathNode("math",[h]);c.setAttribute("xmlns","http://www.w3.org/1998/Math/MathML"),n&&c.setAttribute("display","block");var f=s?"katex":"katex-mathml";return buildCommon.makeSpan([f],[c])}var optionsFromSettings=function t(r){return new Options({style:r.displayMode?Style$1.DISPLAY:Style$1.TEXT,maxSize:r.maxSize,minRuleThickness:r.minRuleThickness})},displayWrap=function t(r,a){if(a.displayMode){var n=["katex-display"];a.leqno&&n.push("leqno"),a.fleqn&&n.push("fleqn"),r=buildCommon.makeSpan(n,[r])}return r},buildTree=function t(r,a,n){var s=optionsFromSettings(n),o;if(n.output==="mathml")return buildMathML(r,a,s,n.displayMode,!0);if(n.output==="html"){var l=buildHTML(r,s);o=buildCommon.makeSpan(["katex"],[l])}else{var u=buildMathML(r,a,s,n.displayMode,!1),h=buildHTML(r,s);o=buildCommon.makeSpan(["katex"],[u,h])}return displayWrap(o,n)},buildHTMLTree=function t(r,a,n){var s=optionsFromSettings(n),o=buildHTML(r,s),l=buildCommon.makeSpan(["katex"],[o]);return displayWrap(l,n)},stretchyCodePoint={widehat:"^",widecheck:"",widetilde:"~",utilde:"~",overleftarrow:"",underleftarrow:"",xleftarrow:"",overrightarrow:"",underrightarrow:"",xrightarrow:"",underbrace:"",overbrace:"",overgroup:"",undergroup:"",overleftrightarrow:"",underleftrightarrow:"",xleftrightarrow:"",Overrightarrow:"",xRightarrow:"",overleftharpoon:"",xleftharpoonup:"",overrightharpoon:"",xrightharpoonup:"",xLeftarrow:"",xLeftrightarrow:"",xhookleftarrow:"",xhookrightarrow:"",xmapsto:"",xrightharpoondown:"",xleftharpoondown:"",xrightleftharpoons:"",xleftrightharpoons:"",xtwoheadleftarrow:"",xtwoheadrightarrow:"",xlongequal:"=",xtofrom:"",xrightleftarrows:"",xrightequilibrium:"",xleftequilibrium:"","\\cdrightarrow":"","\\cdleftarrow":"","\\cdlongequal":"="},mathMLnode=function t(r){var a=new mathMLTree.MathNode("mo",[new mathMLTree.TextNode(stretchyCodePoint[r.replace(/^\\/,"")])]);return a.setAttribute("stretchy","true"),a},katexImagesData={overrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],overleftarrow:[["leftarrow"],.888,522,"xMinYMin"],underrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],underleftarrow:[["leftarrow"],.888,522,"xMinYMin"],xrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],"\\cdrightarrow":[["rightarrow"],3,522,"xMaxYMin"],xleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],"\\cdleftarrow":[["leftarrow"],3,522,"xMinYMin"],Overrightarrow:[["doublerightarrow"],.888,560,"xMaxYMin"],xRightarrow:[["doublerightarrow"],1.526,560,"xMaxYMin"],xLeftarrow:[["doubleleftarrow"],1.526,560,"xMinYMin"],overleftharpoon:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoonup:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoondown:[["leftharpoondown"],.888,522,"xMinYMin"],overrightharpoon:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoonup:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoondown:[["rightharpoondown"],.888,522,"xMaxYMin"],xlongequal:[["longequal"],.888,334,"xMinYMin"],"\\cdlongequal":[["longequal"],3,334,"xMinYMin"],xtwoheadleftarrow:[["twoheadleftarrow"],.888,334,"xMinYMin"],xtwoheadrightarrow:[["twoheadrightarrow"],.888,334,"xMaxYMin"],overleftrightarrow:[["leftarrow","rightarrow"],.888,522],overbrace:[["leftbrace","midbrace","rightbrace"],1.6,548],underbrace:[["leftbraceunder","midbraceunder","rightbraceunder"],1.6,548],underleftrightarrow:[["leftarrow","rightarrow"],.888,522],xleftrightarrow:[["leftarrow","rightarrow"],1.75,522],xLeftrightarrow:[["doubleleftarrow","doublerightarrow"],1.75,560],xrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],xleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],xhookleftarrow:[["leftarrow","righthook"],1.08,522],xhookrightarrow:[["lefthook","rightarrow"],1.08,522],overlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],underlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],overgroup:[["leftgroup","rightgroup"],.888,342],undergroup:[["leftgroupunder","rightgroupunder"],.888,342],xmapsto:[["leftmapsto","rightarrow"],1.5,522],xtofrom:[["leftToFrom","rightToFrom"],1.75,528],xrightleftarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],xrightequilibrium:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],xleftequilibrium:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716]},groupLength=function t(r){return r.type==="ordgroup"?r.body.length:1},svgSpan=function t(r,a){function n(){var u=4e5,h=r.label.slice(1);if(["widehat","widecheck","widetilde","utilde"].includes(h)){var c=r,f=groupLength(c.base),d,p,v;if(f>5)h==="widehat"||h==="widecheck"?(d=420,u=2364,v=.42,p=h+"4"):(d=312,u=2340,v=.34,p="tilde4");else{var y=[1,1,2,2,3,3][f];h==="widehat"||h==="widecheck"?(u=[0,1062,2364,2364,2364][y],d=[0,239,300,360,420][y],v=[0,.24,.3,.3,.36,.42][y],p=h+y):(u=[0,600,1033,2339,2340][y],d=[0,260,286,306,312][y],v=[0,.26,.286,.3,.306,.34][y],p="tilde"+y)}var b=new PathNode(p),_=new SvgNode([b],{width:"100%",height:makeEm(v),viewBox:"0 0 "+u+" "+d,preserveAspectRatio:"none"});return{span:buildCommon.makeSvgSpan([],[_],a),minWidth:0,height:v}}else{var N=[],M=katexImagesData[h],[C,$,w]=M,A=w/1e3,X=C.length,O,G;if(X===1){var R=M[3];O=["hide-tail"],G=[R]}else if(X===2)O=["halfarrow-left","halfarrow-right"],G=["xMinYMin","xMaxYMin"];else if(X===3)O=["brace-left","brace-center","brace-right"],G=["xMinYMin","xMidYMin","xMaxYMin"];else throw new Error(`Correct katexImagesData or update code here to support
                    `+X+" children.");for(var B=0;B<X;B++){var F=new PathNode(C[B]),U=new SvgNode([F],{width:"400em",height:makeEm(A),viewBox:"0 0 "+u+" "+w,preserveAspectRatio:G[B]+" slice"}),q=buildCommon.makeSvgSpan([O[B]],[U],a);if(X===1)return{span:q,minWidth:$,height:A};q.style.height=makeEm(A),N.push(q)}return{span:buildCommon.makeSpan(["stretchy"],N,a),minWidth:$,height:A}}}var{span:s,minWidth:o,height:l}=n();return s.height=l,s.style.height=makeEm(l),o>0&&(s.style.minWidth=makeEm(o)),s},encloseSpan=function t(r,a,n,s,o){var l,u=r.height+r.depth+n+s;if(/fbox|color|angl/.test(a)){if(l=buildCommon.makeSpan(["stretchy",a],[],o),a==="fbox"){var h=o.color&&o.getColor();h&&(l.style.borderColor=h)}}else{var c=[];/^[bx]cancel$/.test(a)&&c.push(new LineNode({x1:"0",y1:"0",x2:"100%",y2:"100%","stroke-width":"0.046em"})),/^x?cancel$/.test(a)&&c.push(new LineNode({x1:"0",y1:"100%",x2:"100%",y2:"0","stroke-width":"0.046em"}));var f=new SvgNode(c,{width:"100%",height:makeEm(u)});l=buildCommon.makeSvgSpan([],[f],o)}return l.height=u,l.style.height=makeEm(u),l},stretchy={encloseSpan,mathMLnode,svgSpan};function assertNodeType(t,r){if(!t||t.type!==r)throw new Error("Expected node of type "+r+", but got "+(t?"node of type "+t.type:String(t)));return t}function assertSymbolNodeType(t){var r=checkSymbolNodeType(t);if(!r)throw new Error("Expected node of symbol group type, but got "+(t?"node of type "+t.type:String(t)));return r}function checkSymbolNodeType(t){return t&&(t.type==="atom"||NON_ATOMS.hasOwnProperty(t.type))?t:null}var htmlBuilder$a=(t,r)=>{var a,n,s;t&&t.type==="supsub"?(n=assertNodeType(t.base,"accent"),a=n.base,t.base=a,s=assertSpan(buildGroup$1(t,r)),t.base=n):(n=assertNodeType(t,"accent"),a=n.base);var o=buildGroup$1(a,r.havingCrampedStyle()),l=n.isShifty&&utils.isCharacterBox(a),u=0;if(l){var h=utils.getBaseElem(a),c=buildGroup$1(h,r.havingCrampedStyle());u=assertSymbolDomNode(c).skew}var f=n.label==="\\c",d=f?o.height+o.depth:Math.min(o.height,r.fontMetrics().xHeight),p;if(n.isStretchy)p=stretchy.svgSpan(n,r),p=buildCommon.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:o},{type:"elem",elem:p,wrapperClasses:["svg-align"],wrapperStyle:u>0?{width:"calc(100% - "+makeEm(2*u)+")",marginLeft:makeEm(2*u)}:void 0}]},r);else{var v,y;n.label==="\\vec"?(v=buildCommon.staticSvg("vec",r),y=buildCommon.svgData.vec[1]):(v=buildCommon.makeOrd({mode:n.mode,text:n.label},r,"textord"),v=assertSymbolDomNode(v),v.italic=0,y=v.width,f&&(d+=v.depth)),p=buildCommon.makeSpan(["accent-body"],[v]);var b=n.label==="\\textcircled";b&&(p.classes.push("accent-full"),d=o.height);var _=u;b||(_-=y/2),p.style.left=makeEm(_),n.label==="\\textcircled"&&(p.style.top=".2em"),p=buildCommon.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:o},{type:"kern",size:-d},{type:"elem",elem:p}]},r)}var N=buildCommon.makeSpan(["mord","accent"],[p],r);return s?(s.children[0]=N,s.height=Math.max(N.height,s.height),s.classes[0]="mord",s):N},mathmlBuilder$9=(t,r)=>{var a=t.isStretchy?stretchy.mathMLnode(t.label):new mathMLTree.MathNode("mo",[makeText(t.label,t.mode)]),n=new mathMLTree.MathNode("mover",[buildGroup(t.base,r),a]);return n.setAttribute("accent","true"),n},NON_STRETCHY_ACCENT_REGEX=new RegExp(["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring"].map(t=>"\\"+t).join("|"));defineFunction({type:"accent",names:["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring","\\widecheck","\\widehat","\\widetilde","\\overrightarrow","\\overleftarrow","\\Overrightarrow","\\overleftrightarrow","\\overgroup","\\overlinesegment","\\overleftharpoon","\\overrightharpoon"],props:{numArgs:1},handler:(t,r)=>{var a=normalizeArgument(r[0]),n=!NON_STRETCHY_ACCENT_REGEX.test(t.funcName),s=!n||t.funcName==="\\widehat"||t.funcName==="\\widetilde"||t.funcName==="\\widecheck";return{type:"accent",mode:t.parser.mode,label:t.funcName,isStretchy:n,isShifty:s,base:a}},htmlBuilder:htmlBuilder$a,mathmlBuilder:mathmlBuilder$9});defineFunction({type:"accent",names:["\\'","\\`","\\^","\\~","\\=","\\u","\\.",'\\"',"\\c","\\r","\\H","\\v","\\textcircled"],props:{numArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["primitive"]},handler:(t,r)=>{var a=r[0],n=t.parser.mode;return n==="math"&&(t.parser.settings.reportNonstrict("mathVsTextAccents","LaTeX's accent "+t.funcName+" works only in text mode"),n="text"),{type:"accent",mode:n,label:t.funcName,isStretchy:!1,isShifty:!0,base:a}},htmlBuilder:htmlBuilder$a,mathmlBuilder:mathmlBuilder$9});defineFunction({type:"accentUnder",names:["\\underleftarrow","\\underrightarrow","\\underleftrightarrow","\\undergroup","\\underlinesegment","\\utilde"],props:{numArgs:1},handler:(t,r)=>{var{parser:a,funcName:n}=t,s=r[0];return{type:"accentUnder",mode:a.mode,label:n,base:s}},htmlBuilder:(t,r)=>{var a=buildGroup$1(t.base,r),n=stretchy.svgSpan(t,r),s=t.label==="\\utilde"?.12:0,o=buildCommon.makeVList({positionType:"top",positionData:a.height,children:[{type:"elem",elem:n,wrapperClasses:["svg-align"]},{type:"kern",size:s},{type:"elem",elem:a}]},r);return buildCommon.makeSpan(["mord","accentunder"],[o],r)},mathmlBuilder:(t,r)=>{var a=stretchy.mathMLnode(t.label),n=new mathMLTree.MathNode("munder",[buildGroup(t.base,r),a]);return n.setAttribute("accentunder","true"),n}});var paddedNode=t=>{var r=new mathMLTree.MathNode("mpadded",t?[t]:[]);return r.setAttribute("width","+0.6em"),r.setAttribute("lspace","0.3em"),r};defineFunction({type:"xArrow",names:["\\xleftarrow","\\xrightarrow","\\xLeftarrow","\\xRightarrow","\\xleftrightarrow","\\xLeftrightarrow","\\xhookleftarrow","\\xhookrightarrow","\\xmapsto","\\xrightharpoondown","\\xrightharpoonup","\\xleftharpoondown","\\xleftharpoonup","\\xrightleftharpoons","\\xleftrightharpoons","\\xlongequal","\\xtwoheadrightarrow","\\xtwoheadleftarrow","\\xtofrom","\\xrightleftarrows","\\xrightequilibrium","\\xleftequilibrium","\\\\cdrightarrow","\\\\cdleftarrow","\\\\cdlongequal"],props:{numArgs:1,numOptionalArgs:1},handler(t,r,a){var{parser:n,funcName:s}=t;return{type:"xArrow",mode:n.mode,label:s,body:r[0],below:a[0]}},htmlBuilder(t,r){var a=r.style,n=r.havingStyle(a.sup()),s=buildCommon.wrapFragment(buildGroup$1(t.body,n,r),r),o=t.label.slice(0,2)==="\\x"?"x":"cd";s.classes.push(o+"-arrow-pad");var l;t.below&&(n=r.havingStyle(a.sub()),l=buildCommon.wrapFragment(buildGroup$1(t.below,n,r),r),l.classes.push(o+"-arrow-pad"));var u=stretchy.svgSpan(t,r),h=-r.fontMetrics().axisHeight+.5*u.height,c=-r.fontMetrics().axisHeight-.5*u.height-.111;(s.depth>.25||t.label==="\\xleftequilibrium")&&(c-=s.depth);var f;if(l){var d=-r.fontMetrics().axisHeight+l.height+.5*u.height+.111;f=buildCommon.makeVList({positionType:"individualShift",children:[{type:"elem",elem:s,shift:c},{type:"elem",elem:u,shift:h},{type:"elem",elem:l,shift:d}]},r)}else f=buildCommon.makeVList({positionType:"individualShift",children:[{type:"elem",elem:s,shift:c},{type:"elem",elem:u,shift:h}]},r);return f.children[0].children[0].children[1].classes.push("svg-align"),buildCommon.makeSpan(["mrel","x-arrow"],[f],r)},mathmlBuilder(t,r){var a=stretchy.mathMLnode(t.label);a.setAttribute("minsize",t.label.charAt(0)==="x"?"1.75em":"3.0em");var n;if(t.body){var s=paddedNode(buildGroup(t.body,r));if(t.below){var o=paddedNode(buildGroup(t.below,r));n=new mathMLTree.MathNode("munderover",[a,o,s])}else n=new mathMLTree.MathNode("mover",[a,s])}else if(t.below){var l=paddedNode(buildGroup(t.below,r));n=new mathMLTree.MathNode("munder",[a,l])}else n=paddedNode(),n=new mathMLTree.MathNode("mover",[a,n]);return n}});var makeSpan=buildCommon.makeSpan;function htmlBuilder$9(t,r){var a=buildExpression$1(t.body,r,!0);return makeSpan([t.mclass],a,r)}function mathmlBuilder$8(t,r){var a,n=buildExpression(t.body,r);return t.mclass==="minner"?a=new mathMLTree.MathNode("mpadded",n):t.mclass==="mord"?t.isCharacterBox?(a=n[0],a.type="mi"):a=new mathMLTree.MathNode("mi",n):(t.isCharacterBox?(a=n[0],a.type="mo"):a=new mathMLTree.MathNode("mo",n),t.mclass==="mbin"?(a.attributes.lspace="0.22em",a.attributes.rspace="0.22em"):t.mclass==="mpunct"?(a.attributes.lspace="0em",a.attributes.rspace="0.17em"):t.mclass==="mopen"||t.mclass==="mclose"?(a.attributes.lspace="0em",a.attributes.rspace="0em"):t.mclass==="minner"&&(a.attributes.lspace="0.0556em",a.attributes.width="+0.1111em")),a}defineFunction({type:"mclass",names:["\\mathord","\\mathbin","\\mathrel","\\mathopen","\\mathclose","\\mathpunct","\\mathinner"],props:{numArgs:1,primitive:!0},handler(t,r){var{parser:a,funcName:n}=t,s=r[0];return{type:"mclass",mode:a.mode,mclass:"m"+n.slice(5),body:ordargument(s),isCharacterBox:utils.isCharacterBox(s)}},htmlBuilder:htmlBuilder$9,mathmlBuilder:mathmlBuilder$8});var binrelClass=t=>{var r=t.type==="ordgroup"&&t.body.length?t.body[0]:t;return r.type==="atom"&&(r.family==="bin"||r.family==="rel")?"m"+r.family:"mord"};defineFunction({type:"mclass",names:["\\@binrel"],props:{numArgs:2},handler(t,r){var{parser:a}=t;return{type:"mclass",mode:a.mode,mclass:binrelClass(r[0]),body:ordargument(r[1]),isCharacterBox:utils.isCharacterBox(r[1])}}});defineFunction({type:"mclass",names:["\\stackrel","\\overset","\\underset"],props:{numArgs:2},handler(t,r){var{parser:a,funcName:n}=t,s=r[1],o=r[0],l;n!=="\\stackrel"?l=binrelClass(s):l="mrel";var u={type:"op",mode:s.mode,limits:!0,alwaysHandleSupSub:!0,parentIsSupSub:!1,symbol:!1,suppressBaseShift:n!=="\\stackrel",body:ordargument(s)},h={type:"supsub",mode:o.mode,base:u,sup:n==="\\underset"?null:o,sub:n==="\\underset"?o:null};return{type:"mclass",mode:a.mode,mclass:l,body:[h],isCharacterBox:utils.isCharacterBox(h)}},htmlBuilder:htmlBuilder$9,mathmlBuilder:mathmlBuilder$8});defineFunction({type:"pmb",names:["\\pmb"],props:{numArgs:1,allowedInText:!0},handler(t,r){var{parser:a}=t;return{type:"pmb",mode:a.mode,mclass:binrelClass(r[0]),body:ordargument(r[0])}},htmlBuilder(t,r){var a=buildExpression$1(t.body,r,!0),n=buildCommon.makeSpan([t.mclass],a,r);return n.style.textShadow="0.02em 0.01em 0.04px",n},mathmlBuilder(t,r){var a=buildExpression(t.body,r),n=new mathMLTree.MathNode("mstyle",a);return n.setAttribute("style","text-shadow: 0.02em 0.01em 0.04px"),n}});var cdArrowFunctionName={">":"\\\\cdrightarrow","<":"\\\\cdleftarrow","=":"\\\\cdlongequal",A:"\\uparrow",V:"\\downarrow","|":"\\Vert",".":"no arrow"},newCell=()=>({type:"styling",body:[],mode:"math",style:"display"}),isStartOfArrow=t=>t.type==="textord"&&t.text==="@",isLabelEnd=(t,r)=>(t.type==="mathord"||t.type==="atom")&&t.text===r;function cdArrow(t,r,a){var n=cdArrowFunctionName[t];switch(n){case"\\\\cdrightarrow":case"\\\\cdleftarrow":return a.callFunction(n,[r[0]],[r[1]]);case"\\uparrow":case"\\downarrow":{var s=a.callFunction("\\\\cdleft",[r[0]],[]),o={type:"atom",text:n,mode:"math",family:"rel"},l=a.callFunction("\\Big",[o],[]),u=a.callFunction("\\\\cdright",[r[1]],[]),h={type:"ordgroup",mode:"math",body:[s,l,u]};return a.callFunction("\\\\cdparent",[h],[])}case"\\\\cdlongequal":return a.callFunction("\\\\cdlongequal",[],[]);case"\\Vert":{var c={type:"textord",text:"\\Vert",mode:"math"};return a.callFunction("\\Big",[c],[])}default:return{type:"textord",text:" ",mode:"math"}}}function parseCD(t){var r=[];for(t.gullet.beginGroup(),t.gullet.macros.set("\\cr","\\\\\\relax"),t.gullet.beginGroup();;){r.push(t.parseExpression(!1,"\\\\")),t.gullet.endGroup(),t.gullet.beginGroup();var a=t.fetch().text;if(a==="&"||a==="\\\\")t.consume();else if(a==="\\end"){r[r.length-1].length===0&&r.pop();break}else throw new ParseError("Expected \\\\ or \\cr or \\end",t.nextToken)}for(var n=[],s=[n],o=0;o<r.length;o++){for(var l=r[o],u=newCell(),h=0;h<l.length;h++)if(!isStartOfArrow(l[h]))u.body.push(l[h]);else{n.push(u),h+=1;var c=assertSymbolNodeType(l[h]).text,f=new Array(2);if(f[0]={type:"ordgroup",mode:"math",body:[]},f[1]={type:"ordgroup",mode:"math",body:[]},!("=|.".indexOf(c)>-1))if("<>AV".indexOf(c)>-1)for(var d=0;d<2;d++){for(var p=!0,v=h+1;v<l.length;v++){if(isLabelEnd(l[v],c)){p=!1,h=v;break}if(isStartOfArrow(l[v]))throw new ParseError("Missing a "+c+" character to complete a CD arrow.",l[v]);f[d].body.push(l[v])}if(p)throw new ParseError("Missing a "+c+" character to complete a CD arrow.",l[h])}else throw new ParseError('Expected one of "<>AV=|." after @',l[h]);var y=cdArrow(c,f,t),b={type:"styling",body:[y],mode:"math",style:"display"};n.push(b),u=newCell()}o%2===0?n.push(u):n.shift(),n=[],s.push(n)}t.gullet.endGroup(),t.gullet.endGroup();var _=new Array(s[0].length).fill({type:"align",align:"c",pregap:.25,postgap:.25});return{type:"array",mode:"math",body:s,arraystretch:1,addJot:!0,rowGaps:[null],cols:_,colSeparationType:"CD",hLinesBeforeRow:new Array(s.length+1).fill([])}}defineFunction({type:"cdlabel",names:["\\\\cdleft","\\\\cdright"],props:{numArgs:1},handler(t,r){var{parser:a,funcName:n}=t;return{type:"cdlabel",mode:a.mode,side:n.slice(4),label:r[0]}},htmlBuilder(t,r){var a=r.havingStyle(r.style.sup()),n=buildCommon.wrapFragment(buildGroup$1(t.label,a,r),r);return n.classes.push("cd-label-"+t.side),n.style.bottom=makeEm(.8-n.depth),n.height=0,n.depth=0,n},mathmlBuilder(t,r){var a=new mathMLTree.MathNode("mrow",[buildGroup(t.label,r)]);return a=new mathMLTree.MathNode("mpadded",[a]),a.setAttribute("width","0"),t.side==="left"&&a.setAttribute("lspace","-1width"),a.setAttribute("voffset","0.7em"),a=new mathMLTree.MathNode("mstyle",[a]),a.setAttribute("displaystyle","false"),a.setAttribute("scriptlevel","1"),a}});defineFunction({type:"cdlabelparent",names:["\\\\cdparent"],props:{numArgs:1},handler(t,r){var{parser:a}=t;return{type:"cdlabelparent",mode:a.mode,fragment:r[0]}},htmlBuilder(t,r){var a=buildCommon.wrapFragment(buildGroup$1(t.fragment,r),r);return a.classes.push("cd-vert-arrow"),a},mathmlBuilder(t,r){return new mathMLTree.MathNode("mrow",[buildGroup(t.fragment,r)])}});defineFunction({type:"textord",names:["\\@char"],props:{numArgs:1,allowedInText:!0},handler(t,r){for(var{parser:a}=t,n=assertNodeType(r[0],"ordgroup"),s=n.body,o="",l=0;l<s.length;l++){var u=assertNodeType(s[l],"textord");o+=u.text}var h=parseInt(o),c;if(isNaN(h))throw new ParseError("\\@char has non-numeric argument "+o);if(h<0||h>=1114111)throw new ParseError("\\@char with invalid code point "+o);return h<=65535?c=String.fromCharCode(h):(h-=65536,c=String.fromCharCode((h>>10)+55296,(h&1023)+56320)),{type:"textord",mode:a.mode,text:c}}});var htmlBuilder$8=(t,r)=>{var a=buildExpression$1(t.body,r.withColor(t.color),!1);return buildCommon.makeFragment(a)},mathmlBuilder$7=(t,r)=>{var a=buildExpression(t.body,r.withColor(t.color)),n=new mathMLTree.MathNode("mstyle",a);return n.setAttribute("mathcolor",t.color),n};defineFunction({type:"color",names:["\\textcolor"],props:{numArgs:2,allowedInText:!0,argTypes:["color","original"]},handler(t,r){var{parser:a}=t,n=assertNodeType(r[0],"color-token").color,s=r[1];return{type:"color",mode:a.mode,color:n,body:ordargument(s)}},htmlBuilder:htmlBuilder$8,mathmlBuilder:mathmlBuilder$7});defineFunction({type:"color",names:["\\color"],props:{numArgs:1,allowedInText:!0,argTypes:["color"]},handler(t,r){var{parser:a,breakOnTokenText:n}=t,s=assertNodeType(r[0],"color-token").color;a.gullet.macros.set("\\current@color",s);var o=a.parseExpression(!0,n);return{type:"color",mode:a.mode,color:s,body:o}},htmlBuilder:htmlBuilder$8,mathmlBuilder:mathmlBuilder$7});defineFunction({type:"cr",names:["\\\\"],props:{numArgs:0,numOptionalArgs:0,allowedInText:!0},handler(t,r,a){var{parser:n}=t,s=n.gullet.future().text==="["?n.parseSizeGroup(!0):null,o=!n.settings.displayMode||!n.settings.useStrictBehavior("newLineInDisplayMode","In LaTeX, \\\\ or \\newline does nothing in display mode");return{type:"cr",mode:n.mode,newLine:o,size:s&&assertNodeType(s,"size").value}},htmlBuilder(t,r){var a=buildCommon.makeSpan(["mspace"],[],r);return t.newLine&&(a.classes.push("newline"),t.size&&(a.style.marginTop=makeEm(calculateSize(t.size,r)))),a},mathmlBuilder(t,r){var a=new mathMLTree.MathNode("mspace");return t.newLine&&(a.setAttribute("linebreak","newline"),t.size&&a.setAttribute("height",makeEm(calculateSize(t.size,r)))),a}});var globalMap={"\\global":"\\global","\\long":"\\\\globallong","\\\\globallong":"\\\\globallong","\\def":"\\gdef","\\gdef":"\\gdef","\\edef":"\\xdef","\\xdef":"\\xdef","\\let":"\\\\globallet","\\futurelet":"\\\\globalfuture"},checkControlSequence=t=>{var r=t.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(r))throw new ParseError("Expected a control sequence",t);return r},getRHS=t=>{var r=t.gullet.popToken();return r.text==="="&&(r=t.gullet.popToken(),r.text===" "&&(r=t.gullet.popToken())),r},letCommand=(t,r,a,n)=>{var s=t.gullet.macros.get(a.text);s==null&&(a.noexpand=!0,s={tokens:[a],numArgs:0,unexpandable:!t.gullet.isExpandable(a.text)}),t.gullet.macros.set(r,s,n)};defineFunction({type:"internal",names:["\\global","\\long","\\\\globallong"],props:{numArgs:0,allowedInText:!0},handler(t){var{parser:r,funcName:a}=t;r.consumeSpaces();var n=r.fetch();if(globalMap[n.text])return(a==="\\global"||a==="\\\\globallong")&&(n.text=globalMap[n.text]),assertNodeType(r.parseFunction(),"internal");throw new ParseError("Invalid token after macro prefix",n)}});defineFunction({type:"internal",names:["\\def","\\gdef","\\edef","\\xdef"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t){var{parser:r,funcName:a}=t,n=r.gullet.popToken(),s=n.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(s))throw new ParseError("Expected a control sequence",n);for(var o=0,l,u=[[]];r.gullet.future().text!=="{";)if(n=r.gullet.popToken(),n.text==="#"){if(r.gullet.future().text==="{"){l=r.gullet.future(),u[o].push("{");break}if(n=r.gullet.popToken(),!/^[1-9]$/.test(n.text))throw new ParseError('Invalid argument number "'+n.text+'"');if(parseInt(n.text)!==o+1)throw new ParseError('Argument number "'+n.text+'" out of order');o++,u.push([])}else{if(n.text==="EOF")throw new ParseError("Expected a macro definition");u[o].push(n.text)}var{tokens:h}=r.gullet.consumeArg();return l&&h.unshift(l),(a==="\\edef"||a==="\\xdef")&&(h=r.gullet.expandTokens(h),h.reverse()),r.gullet.macros.set(s,{tokens:h,numArgs:o,delimiters:u},a===globalMap[a]),{type:"internal",mode:r.mode}}});defineFunction({type:"internal",names:["\\let","\\\\globallet"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t){var{parser:r,funcName:a}=t,n=checkControlSequence(r.gullet.popToken());r.gullet.consumeSpaces();var s=getRHS(r);return letCommand(r,n,s,a==="\\\\globallet"),{type:"internal",mode:r.mode}}});defineFunction({type:"internal",names:["\\futurelet","\\\\globalfuture"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t){var{parser:r,funcName:a}=t,n=checkControlSequence(r.gullet.popToken()),s=r.gullet.popToken(),o=r.gullet.popToken();return letCommand(r,n,o,a==="\\\\globalfuture"),r.gullet.pushToken(o),r.gullet.pushToken(s),{type:"internal",mode:r.mode}}});var getMetrics=function t(r,a,n){var s=symbols.math[r]&&symbols.math[r].replace,o=getCharacterMetrics(s||r,a,n);if(!o)throw new Error("Unsupported symbol "+r+" and font size "+a+".");return o},styleWrap=function t(r,a,n,s){var o=n.havingBaseStyle(a),l=buildCommon.makeSpan(s.concat(o.sizingClasses(n)),[r],n),u=o.sizeMultiplier/n.sizeMultiplier;return l.height*=u,l.depth*=u,l.maxFontSize=o.sizeMultiplier,l},centerSpan=function t(r,a,n){var s=a.havingBaseStyle(n),o=(1-a.sizeMultiplier/s.sizeMultiplier)*a.fontMetrics().axisHeight;r.classes.push("delimcenter"),r.style.top=makeEm(o),r.height-=o,r.depth+=o},makeSmallDelim=function t(r,a,n,s,o,l){var u=buildCommon.makeSymbol(r,"Main-Regular",o,s),h=styleWrap(u,a,s,l);return n&&centerSpan(h,s,a),h},mathrmSize=function t(r,a,n,s){return buildCommon.makeSymbol(r,"Size"+a+"-Regular",n,s)},makeLargeDelim=function t(r,a,n,s,o,l){var u=mathrmSize(r,a,o,s),h=styleWrap(buildCommon.makeSpan(["delimsizing","size"+a],[u],s),Style$1.TEXT,s,l);return n&&centerSpan(h,s,Style$1.TEXT),h},makeGlyphSpan=function t(r,a,n){var s;a==="Size1-Regular"?s="delim-size1":s="delim-size4";var o=buildCommon.makeSpan(["delimsizinginner",s],[buildCommon.makeSpan([],[buildCommon.makeSymbol(r,a,n)])]);return{type:"elem",elem:o}},makeInner=function t(r,a,n){var s=fontMetricsData["Size4-Regular"][r.charCodeAt(0)]?fontMetricsData["Size4-Regular"][r.charCodeAt(0)][4]:fontMetricsData["Size1-Regular"][r.charCodeAt(0)][4],o=new PathNode("inner",innerPath(r,Math.round(1e3*a))),l=new SvgNode([o],{width:makeEm(s),height:makeEm(a),style:"width:"+makeEm(s),viewBox:"0 0 "+1e3*s+" "+Math.round(1e3*a),preserveAspectRatio:"xMinYMin"}),u=buildCommon.makeSvgSpan([],[l],n);return u.height=a,u.style.height=makeEm(a),u.style.width=makeEm(s),{type:"elem",elem:u}},lapInEms=.008,lap={type:"kern",size:-1*lapInEms},verts=["|","\\lvert","\\rvert","\\vert"],doubleVerts=["\\|","\\lVert","\\rVert","\\Vert"],makeStackedDelim=function t(r,a,n,s,o,l){var u,h,c,f,d="",p=0;u=c=f=r,h=null;var v="Size1-Regular";r==="\\uparrow"?c=f="":r==="\\Uparrow"?c=f="":r==="\\downarrow"?u=c="":r==="\\Downarrow"?u=c="":r==="\\updownarrow"?(u="\\uparrow",c="",f="\\downarrow"):r==="\\Updownarrow"?(u="\\Uparrow",c="",f="\\Downarrow"):verts.includes(r)?(c="",d="vert",p=333):doubleVerts.includes(r)?(c="",d="doublevert",p=556):r==="["||r==="\\lbrack"?(u="",c="",f="",v="Size4-Regular",d="lbrack",p=667):r==="]"||r==="\\rbrack"?(u="",c="",f="",v="Size4-Regular",d="rbrack",p=667):r==="\\lfloor"||r===""?(c=u="",f="",v="Size4-Regular",d="lfloor",p=667):r==="\\lceil"||r===""?(u="",c=f="",v="Size4-Regular",d="lceil",p=667):r==="\\rfloor"||r===""?(c=u="",f="",v="Size4-Regular",d="rfloor",p=667):r==="\\rceil"||r===""?(u="",c=f="",v="Size4-Regular",d="rceil",p=667):r==="("||r==="\\lparen"?(u="",c="",f="",v="Size4-Regular",d="lparen",p=875):r===")"||r==="\\rparen"?(u="",c="",f="",v="Size4-Regular",d="rparen",p=875):r==="\\{"||r==="\\lbrace"?(u="",h="",f="",c="",v="Size4-Regular"):r==="\\}"||r==="\\rbrace"?(u="",h="",f="",c="",v="Size4-Regular"):r==="\\lgroup"||r===""?(u="",f="",c="",v="Size4-Regular"):r==="\\rgroup"||r===""?(u="",f="",c="",v="Size4-Regular"):r==="\\lmoustache"||r===""?(u="",f="",c="",v="Size4-Regular"):(r==="\\rmoustache"||r==="")&&(u="",f="",c="",v="Size4-Regular");var y=getMetrics(u,v,o),b=y.height+y.depth,_=getMetrics(c,v,o),N=_.height+_.depth,M=getMetrics(f,v,o),C=M.height+M.depth,$=0,w=1;if(h!==null){var A=getMetrics(h,v,o);$=A.height+A.depth,w=2}var X=b+C+$,O=Math.max(0,Math.ceil((a-X)/(w*N))),G=X+O*w*N,R=s.fontMetrics().axisHeight;n&&(R*=s.sizeMultiplier);var B=G/2-R,F=[];if(d.length>0){var U=G-b-C,q=Math.round(G*1e3),ee=tallDelim(d,Math.round(U*1e3)),z=new PathNode(d,ee),Y=(p/1e3).toFixed(3)+"em",K=(q/1e3).toFixed(3)+"em",Z=new SvgNode([z],{width:Y,height:K,viewBox:"0 0 "+p+" "+q}),ne=buildCommon.makeSvgSpan([],[Z],s);ne.height=q/1e3,ne.style.width=Y,ne.style.height=K,F.push({type:"elem",elem:ne})}else{if(F.push(makeGlyphSpan(f,v,o)),F.push(lap),h===null){var j=G-b-C+2*lapInEms;F.push(makeInner(c,j,s))}else{var V=(G-b-C-$)/2+2*lapInEms;F.push(makeInner(c,V,s)),F.push(lap),F.push(makeGlyphSpan(h,v,o)),F.push(lap),F.push(makeInner(c,V,s))}F.push(lap),F.push(makeGlyphSpan(u,v,o))}var L=s.havingBaseStyle(Style$1.TEXT),ae=buildCommon.makeVList({positionType:"bottom",positionData:B,children:F},L);return styleWrap(buildCommon.makeSpan(["delimsizing","mult"],[ae],L),Style$1.TEXT,s,l)},vbPad=80,emPad=.08,sqrtSvg=function t(r,a,n,s,o){var l=sqrtPath(r,s,n),u=new PathNode(r,l),h=new SvgNode([u],{width:"400em",height:makeEm(a),viewBox:"0 0 400000 "+n,preserveAspectRatio:"xMinYMin slice"});return buildCommon.makeSvgSpan(["hide-tail"],[h],o)},makeSqrtImage=function t(r,a){var n=a.havingBaseSizing(),s=traverseSequence("\\surd",r*n.sizeMultiplier,stackLargeDelimiterSequence,n),o=n.sizeMultiplier,l=Math.max(0,a.minRuleThickness-a.fontMetrics().sqrtRuleThickness),u,h=0,c=0,f=0,d;return s.type==="small"?(f=1e3+1e3*l+vbPad,r<1?o=1:r<1.4&&(o=.7),h=(1+l+emPad)/o,c=(1+l)/o,u=sqrtSvg("sqrtMain",h,f,l,a),u.style.minWidth="0.853em",d=.833/o):s.type==="large"?(f=(1e3+vbPad)*sizeToMaxHeight[s.size],c=(sizeToMaxHeight[s.size]+l)/o,h=(sizeToMaxHeight[s.size]+l+emPad)/o,u=sqrtSvg("sqrtSize"+s.size,h,f,l,a),u.style.minWidth="1.02em",d=1/o):(h=r+l+emPad,c=r+l,f=Math.floor(1e3*r+l)+vbPad,u=sqrtSvg("sqrtTall",h,f,l,a),u.style.minWidth="0.742em",d=1.056),u.height=c,u.style.height=makeEm(h),{span:u,advanceWidth:d,ruleWidth:(a.fontMetrics().sqrtRuleThickness+l)*o}},stackLargeDelimiters=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","","","\\lceil","\\rceil","","","\\surd"],stackAlwaysDelimiters=["\\uparrow","\\downarrow","\\updownarrow","\\Uparrow","\\Downarrow","\\Updownarrow","|","\\|","\\vert","\\Vert","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","","","\\lmoustache","\\rmoustache","",""],stackNeverDelimiters=["<",">","\\langle","\\rangle","/","\\backslash","\\lt","\\gt"],sizeToMaxHeight=[0,1.2,1.8,2.4,3],makeSizedDelim=function t(r,a,n,s,o){if(r==="<"||r==="\\lt"||r===""?r="\\langle":(r===">"||r==="\\gt"||r==="")&&(r="\\rangle"),stackLargeDelimiters.includes(r)||stackNeverDelimiters.includes(r))return makeLargeDelim(r,a,!1,n,s,o);if(stackAlwaysDelimiters.includes(r))return makeStackedDelim(r,sizeToMaxHeight[a],!1,n,s,o);throw new ParseError("Illegal delimiter: '"+r+"'")},stackNeverDelimiterSequence=[{type:"small",style:Style$1.SCRIPTSCRIPT},{type:"small",style:Style$1.SCRIPT},{type:"small",style:Style$1.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4}],stackAlwaysDelimiterSequence=[{type:"small",style:Style$1.SCRIPTSCRIPT},{type:"small",style:Style$1.SCRIPT},{type:"small",style:Style$1.TEXT},{type:"stack"}],stackLargeDelimiterSequence=[{type:"small",style:Style$1.SCRIPTSCRIPT},{type:"small",style:Style$1.SCRIPT},{type:"small",style:Style$1.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4},{type:"stack"}],delimTypeToFont=function t(r){if(r.type==="small")return"Main-Regular";if(r.type==="large")return"Size"+r.size+"-Regular";if(r.type==="stack")return"Size4-Regular";throw new Error("Add support for delim type '"+r.type+"' here.")},traverseSequence=function t(r,a,n,s){for(var o=Math.min(2,3-s.style.size),l=o;l<n.length&&n[l].type!=="stack";l++){var u=getMetrics(r,delimTypeToFont(n[l]),"math"),h=u.height+u.depth;if(n[l].type==="small"){var c=s.havingBaseStyle(n[l].style);h*=c.sizeMultiplier}if(h>a)return n[l]}return n[n.length-1]},makeCustomSizedDelim=function t(r,a,n,s,o,l){r==="<"||r==="\\lt"||r===""?r="\\langle":(r===">"||r==="\\gt"||r==="")&&(r="\\rangle");var u;stackNeverDelimiters.includes(r)?u=stackNeverDelimiterSequence:stackLargeDelimiters.includes(r)?u=stackLargeDelimiterSequence:u=stackAlwaysDelimiterSequence;var h=traverseSequence(r,a,u,s);return h.type==="small"?makeSmallDelim(r,h.style,n,s,o,l):h.type==="large"?makeLargeDelim(r,h.size,n,s,o,l):makeStackedDelim(r,a,n,s,o,l)},makeLeftRightDelim=function t(r,a,n,s,o,l){var u=s.fontMetrics().axisHeight*s.sizeMultiplier,h=901,c=5/s.fontMetrics().ptPerEm,f=Math.max(a-u,n+u),d=Math.max(f/500*h,2*f-c);return makeCustomSizedDelim(r,d,!0,s,o,l)},delimiter={sqrtImage:makeSqrtImage,sizedDelim:makeSizedDelim,sizeToMaxHeight,customSizedDelim:makeCustomSizedDelim,leftRightDelim:makeLeftRightDelim},delimiterSizes={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}},delimiters=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","","","\\lceil","\\rceil","","","<",">","\\langle","","\\rangle","","\\lt","\\gt","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","","","\\lmoustache","\\rmoustache","","","/","\\backslash","|","\\vert","\\|","\\Vert","\\uparrow","\\Uparrow","\\downarrow","\\Downarrow","\\updownarrow","\\Updownarrow","."];function checkDelimiter(t,r){var a=checkSymbolNodeType(t);if(a&&delimiters.includes(a.text))return a;throw a?new ParseError("Invalid delimiter '"+a.text+"' after '"+r.funcName+"'",t):new ParseError("Invalid delimiter type '"+t.type+"'",t)}defineFunction({type:"delimsizing",names:["\\bigl","\\Bigl","\\biggl","\\Biggl","\\bigr","\\Bigr","\\biggr","\\Biggr","\\bigm","\\Bigm","\\biggm","\\Biggm","\\big","\\Big","\\bigg","\\Bigg"],props:{numArgs:1,argTypes:["primitive"]},handler:(t,r)=>{var a=checkDelimiter(r[0],t);return{type:"delimsizing",mode:t.parser.mode,size:delimiterSizes[t.funcName].size,mclass:delimiterSizes[t.funcName].mclass,delim:a.text}},htmlBuilder:(t,r)=>t.delim==="."?buildCommon.makeSpan([t.mclass]):delimiter.sizedDelim(t.delim,t.size,r,t.mode,[t.mclass]),mathmlBuilder:t=>{var r=[];t.delim!=="."&&r.push(makeText(t.delim,t.mode));var a=new mathMLTree.MathNode("mo",r);t.mclass==="mopen"||t.mclass==="mclose"?a.setAttribute("fence","true"):a.setAttribute("fence","false"),a.setAttribute("stretchy","true");var n=makeEm(delimiter.sizeToMaxHeight[t.size]);return a.setAttribute("minsize",n),a.setAttribute("maxsize",n),a}});function assertParsed(t){if(!t.body)throw new Error("Bug: The leftright ParseNode wasn't fully parsed.")}defineFunction({type:"leftright-right",names:["\\right"],props:{numArgs:1,primitive:!0},handler:(t,r)=>{var a=t.parser.gullet.macros.get("\\current@color");if(a&&typeof a!="string")throw new ParseError("\\current@color set to non-string in \\right");return{type:"leftright-right",mode:t.parser.mode,delim:checkDelimiter(r[0],t).text,color:a}}});defineFunction({type:"leftright",names:["\\left"],props:{numArgs:1,primitive:!0},handler:(t,r)=>{var a=checkDelimiter(r[0],t),n=t.parser;++n.leftrightDepth;var s=n.parseExpression(!1);--n.leftrightDepth,n.expect("\\right",!1);var o=assertNodeType(n.parseFunction(),"leftright-right");return{type:"leftright",mode:n.mode,body:s,left:a.text,right:o.delim,rightColor:o.color}},htmlBuilder:(t,r)=>{assertParsed(t);for(var a=buildExpression$1(t.body,r,!0,["mopen","mclose"]),n=0,s=0,o=!1,l=0;l<a.length;l++)a[l].isMiddle?o=!0:(n=Math.max(a[l].height,n),s=Math.max(a[l].depth,s));n*=r.sizeMultiplier,s*=r.sizeMultiplier;var u;if(t.left==="."?u=makeNullDelimiter(r,["mopen"]):u=delimiter.leftRightDelim(t.left,n,s,r,t.mode,["mopen"]),a.unshift(u),o)for(var h=1;h<a.length;h++){var c=a[h],f=c.isMiddle;f&&(a[h]=delimiter.leftRightDelim(f.delim,n,s,f.options,t.mode,[]))}var d;if(t.right===".")d=makeNullDelimiter(r,["mclose"]);else{var p=t.rightColor?r.withColor(t.rightColor):r;d=delimiter.leftRightDelim(t.right,n,s,p,t.mode,["mclose"])}return a.push(d),buildCommon.makeSpan(["minner"],a,r)},mathmlBuilder:(t,r)=>{assertParsed(t);var a=buildExpression(t.body,r);if(t.left!=="."){var n=new mathMLTree.MathNode("mo",[makeText(t.left,t.mode)]);n.setAttribute("fence","true"),a.unshift(n)}if(t.right!=="."){var s=new mathMLTree.MathNode("mo",[makeText(t.right,t.mode)]);s.setAttribute("fence","true"),t.rightColor&&s.setAttribute("mathcolor",t.rightColor),a.push(s)}return makeRow(a)}});defineFunction({type:"middle",names:["\\middle"],props:{numArgs:1,primitive:!0},handler:(t,r)=>{var a=checkDelimiter(r[0],t);if(!t.parser.leftrightDepth)throw new ParseError("\\middle without preceding \\left",a);return{type:"middle",mode:t.parser.mode,delim:a.text}},htmlBuilder:(t,r)=>{var a;if(t.delim===".")a=makeNullDelimiter(r,[]);else{a=delimiter.sizedDelim(t.delim,1,r,t.mode,[]);var n={delim:t.delim,options:r};a.isMiddle=n}return a},mathmlBuilder:(t,r)=>{var a=t.delim==="\\vert"||t.delim==="|"?makeText("|","text"):makeText(t.delim,t.mode),n=new mathMLTree.MathNode("mo",[a]);return n.setAttribute("fence","true"),n.setAttribute("lspace","0.05em"),n.setAttribute("rspace","0.05em"),n}});var htmlBuilder$7=(t,r)=>{var a=buildCommon.wrapFragment(buildGroup$1(t.body,r),r),n=t.label.slice(1),s=r.sizeMultiplier,o,l=0,u=utils.isCharacterBox(t.body);if(n==="sout")o=buildCommon.makeSpan(["stretchy","sout"]),o.height=r.fontMetrics().defaultRuleThickness/s,l=-.5*r.fontMetrics().xHeight;else if(n==="phase"){var h=calculateSize({number:.6,unit:"pt"},r),c=calculateSize({number:.35,unit:"ex"},r),f=r.havingBaseSizing();s=s/f.sizeMultiplier;var d=a.height+a.depth+h+c;a.style.paddingLeft=makeEm(d/2+h);var p=Math.floor(1e3*d*s),v=phasePath(p),y=new SvgNode([new PathNode("phase",v)],{width:"400em",height:makeEm(p/1e3),viewBox:"0 0 400000 "+p,preserveAspectRatio:"xMinYMin slice"});o=buildCommon.makeSvgSpan(["hide-tail"],[y],r),o.style.height=makeEm(d),l=a.depth+h+c}else{/cancel/.test(n)?u||a.classes.push("cancel-pad"):n==="angl"?a.classes.push("anglpad"):a.classes.push("boxpad");var b=0,_=0,N=0;/box/.test(n)?(N=Math.max(r.fontMetrics().fboxrule,r.minRuleThickness),b=r.fontMetrics().fboxsep+(n==="colorbox"?0:N),_=b):n==="angl"?(N=Math.max(r.fontMetrics().defaultRuleThickness,r.minRuleThickness),b=4*N,_=Math.max(0,.25-a.depth)):(b=u?.2:0,_=b),o=stretchy.encloseSpan(a,n,b,_,r),/fbox|boxed|fcolorbox/.test(n)?(o.style.borderStyle="solid",o.style.borderWidth=makeEm(N)):n==="angl"&&N!==.049&&(o.style.borderTopWidth=makeEm(N),o.style.borderRightWidth=makeEm(N)),l=a.depth+_,t.backgroundColor&&(o.style.backgroundColor=t.backgroundColor,t.borderColor&&(o.style.borderColor=t.borderColor))}var M;if(t.backgroundColor)M=buildCommon.makeVList({positionType:"individualShift",children:[{type:"elem",elem:o,shift:l},{type:"elem",elem:a,shift:0}]},r);else{var C=/cancel|phase/.test(n)?["svg-align"]:[];M=buildCommon.makeVList({positionType:"individualShift",children:[{type:"elem",elem:a,shift:0},{type:"elem",elem:o,shift:l,wrapperClasses:C}]},r)}return/cancel/.test(n)&&(M.height=a.height,M.depth=a.depth),/cancel/.test(n)&&!u?buildCommon.makeSpan(["mord","cancel-lap"],[M],r):buildCommon.makeSpan(["mord"],[M],r)},mathmlBuilder$6=(t,r)=>{var a=0,n=new mathMLTree.MathNode(t.label.indexOf("colorbox")>-1?"mpadded":"menclose",[buildGroup(t.body,r)]);switch(t.label){case"\\cancel":n.setAttribute("notation","updiagonalstrike");break;case"\\bcancel":n.setAttribute("notation","downdiagonalstrike");break;case"\\phase":n.setAttribute("notation","phasorangle");break;case"\\sout":n.setAttribute("notation","horizontalstrike");break;case"\\fbox":n.setAttribute("notation","box");break;case"\\angl":n.setAttribute("notation","actuarial");break;case"\\fcolorbox":case"\\colorbox":if(a=r.fontMetrics().fboxsep*r.fontMetrics().ptPerEm,n.setAttribute("width","+"+2*a+"pt"),n.setAttribute("height","+"+2*a+"pt"),n.setAttribute("lspace",a+"pt"),n.setAttribute("voffset",a+"pt"),t.label==="\\fcolorbox"){var s=Math.max(r.fontMetrics().fboxrule,r.minRuleThickness);n.setAttribute("style","border: "+s+"em solid "+String(t.borderColor))}break;case"\\xcancel":n.setAttribute("notation","updiagonalstrike downdiagonalstrike");break}return t.backgroundColor&&n.setAttribute("mathbackground",t.backgroundColor),n};defineFunction({type:"enclose",names:["\\colorbox"],props:{numArgs:2,allowedInText:!0,argTypes:["color","text"]},handler(t,r,a){var{parser:n,funcName:s}=t,o=assertNodeType(r[0],"color-token").color,l=r[1];return{type:"enclose",mode:n.mode,label:s,backgroundColor:o,body:l}},htmlBuilder:htmlBuilder$7,mathmlBuilder:mathmlBuilder$6});defineFunction({type:"enclose",names:["\\fcolorbox"],props:{numArgs:3,allowedInText:!0,argTypes:["color","color","text"]},handler(t,r,a){var{parser:n,funcName:s}=t,o=assertNodeType(r[0],"color-token").color,l=assertNodeType(r[1],"color-token").color,u=r[2];return{type:"enclose",mode:n.mode,label:s,backgroundColor:l,borderColor:o,body:u}},htmlBuilder:htmlBuilder$7,mathmlBuilder:mathmlBuilder$6});defineFunction({type:"enclose",names:["\\fbox"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!0},handler(t,r){var{parser:a}=t;return{type:"enclose",mode:a.mode,label:"\\fbox",body:r[0]}}});defineFunction({type:"enclose",names:["\\cancel","\\bcancel","\\xcancel","\\sout","\\phase"],props:{numArgs:1},handler(t,r){var{parser:a,funcName:n}=t,s=r[0];return{type:"enclose",mode:a.mode,label:n,body:s}},htmlBuilder:htmlBuilder$7,mathmlBuilder:mathmlBuilder$6});defineFunction({type:"enclose",names:["\\angl"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!1},handler(t,r){var{parser:a}=t;return{type:"enclose",mode:a.mode,label:"\\angl",body:r[0]}}});var _environments={};function defineEnvironment(t){for(var{type:r,names:a,props:n,handler:s,htmlBuilder:o,mathmlBuilder:l}=t,u={type:r,numArgs:n.numArgs||0,allowedInText:!1,numOptionalArgs:0,handler:s},h=0;h<a.length;++h)_environments[a[h]]=u;o&&(_htmlGroupBuilders[r]=o),l&&(_mathmlGroupBuilders[r]=l)}var _macros={};function defineMacro(t,r){_macros[t]=r}function getHLines(t){var r=[];t.consumeSpaces();var a=t.fetch().text;for(a==="\\relax"&&(t.consume(),t.consumeSpaces(),a=t.fetch().text);a==="\\hline"||a==="\\hdashline";)t.consume(),r.push(a==="\\hdashline"),t.consumeSpaces(),a=t.fetch().text;return r}var validateAmsEnvironmentContext=t=>{var r=t.parser.settings;if(!r.displayMode)throw new ParseError("{"+t.envName+"} can be used only in display mode.")};function getAutoTag(t){if(t.indexOf("ed")===-1)return t.indexOf("*")===-1}function parseArray(t,r,a){var{hskipBeforeAndAfter:n,addJot:s,cols:o,arraystretch:l,colSeparationType:u,autoTag:h,singleRow:c,emptySingleRow:f,maxNumCols:d,leqno:p}=r;if(t.gullet.beginGroup(),c||t.gullet.macros.set("\\cr","\\\\\\relax"),!l){var v=t.gullet.expandMacroAsText("\\arraystretch");if(v==null)l=1;else if(l=parseFloat(v),!l||l<0)throw new ParseError("Invalid \\arraystretch: "+v)}t.gullet.beginGroup();var y=[],b=[y],_=[],N=[],M=h!=null?[]:void 0;function C(){h&&t.gullet.macros.set("\\@eqnsw","1",!0)}function $(){M&&(t.gullet.macros.get("\\df@tag")?(M.push(t.subparse([new Token("\\df@tag")])),t.gullet.macros.set("\\df@tag",void 0,!0)):M.push(!!h&&t.gullet.macros.get("\\@eqnsw")==="1"))}for(C(),N.push(getHLines(t));;){var w=t.parseExpression(!1,c?"\\end":"\\\\");t.gullet.endGroup(),t.gullet.beginGroup(),w={type:"ordgroup",mode:t.mode,body:w},a&&(w={type:"styling",mode:t.mode,style:a,body:[w]}),y.push(w);var A=t.fetch().text;if(A==="&"){if(d&&y.length===d){if(c||u)throw new ParseError("Too many tab characters: &",t.nextToken);t.settings.reportNonstrict("textEnv","Too few columns specified in the {array} column argument.")}t.consume()}else if(A==="\\end"){$(),y.length===1&&w.type==="styling"&&w.body[0].body.length===0&&(b.length>1||!f)&&b.pop(),N.length<b.length+1&&N.push([]);break}else if(A==="\\\\"){t.consume();var X=void 0;t.gullet.future().text!==" "&&(X=t.parseSizeGroup(!0)),_.push(X?X.value:null),$(),N.push(getHLines(t)),y=[],b.push(y),C()}else throw new ParseError("Expected & or \\\\ or \\cr or \\end",t.nextToken)}return t.gullet.endGroup(),t.gullet.endGroup(),{type:"array",mode:t.mode,addJot:s,arraystretch:l,body:b,cols:o,rowGaps:_,hskipBeforeAndAfter:n,hLinesBeforeRow:N,colSeparationType:u,tags:M,leqno:p}}function dCellStyle(t){return t.slice(0,1)==="d"?"display":"text"}var htmlBuilder$6=function t(r,a){var n,s,o=r.body.length,l=r.hLinesBeforeRow,u=0,h=new Array(o),c=[],f=Math.max(a.fontMetrics().arrayRuleWidth,a.minRuleThickness),d=1/a.fontMetrics().ptPerEm,p=5*d;if(r.colSeparationType&&r.colSeparationType==="small"){var v=a.havingStyle(Style$1.SCRIPT).sizeMultiplier;p=.2778*(v/a.sizeMultiplier)}var y=r.colSeparationType==="CD"?calculateSize({number:3,unit:"ex"},a):12*d,b=3*d,_=r.arraystretch*y,N=.7*_,M=.3*_,C=0;function $(Le){for(var Ve=0;Ve<Le.length;++Ve)Ve>0&&(C+=.25),c.push({pos:C,isDashed:Le[Ve]})}for($(l[0]),n=0;n<r.body.length;++n){var w=r.body[n],A=N,X=M;u<w.length&&(u=w.length);var O=new Array(w.length);for(s=0;s<w.length;++s){var G=buildGroup$1(w[s],a);X<G.depth&&(X=G.depth),A<G.height&&(A=G.height),O[s]=G}var R=r.rowGaps[n],B=0;R&&(B=calculateSize(R,a),B>0&&(B+=M,X<B&&(X=B),B=0)),r.addJot&&(X+=b),O.height=A,O.depth=X,C+=A,O.pos=C,C+=X+B,h[n]=O,$(l[n+1])}var F=C/2+a.fontMetrics().axisHeight,U=r.cols||[],q=[],ee,z,Y=[];if(r.tags&&r.tags.some(Le=>Le))for(n=0;n<o;++n){var K=h[n],Z=K.pos-F,ne=r.tags[n],j=void 0;ne===!0?j=buildCommon.makeSpan(["eqn-num"],[],a):ne===!1?j=buildCommon.makeSpan([],[],a):j=buildCommon.makeSpan([],buildExpression$1(ne,a,!0),a),j.depth=K.depth,j.height=K.height,Y.push({type:"elem",elem:j,shift:Z})}for(s=0,z=0;s<u||z<U.length;++s,++z){for(var V=U[z]||{},L=!0;V.type==="separator";){if(L||(ee=buildCommon.makeSpan(["arraycolsep"],[]),ee.style.width=makeEm(a.fontMetrics().doubleRuleSep),q.push(ee)),V.separator==="|"||V.separator===":"){var ae=V.separator==="|"?"solid":"dashed",W=buildCommon.makeSpan(["vertical-separator"],[],a);W.style.height=makeEm(C),W.style.borderRightWidth=makeEm(f),W.style.borderRightStyle=ae,W.style.margin="0 "+makeEm(-f/2);var ve=C-F;ve&&(W.style.verticalAlign=makeEm(-ve)),q.push(W)}else throw new ParseError("Invalid separator type: "+V.separator);z++,V=U[z]||{},L=!1}if(!(s>=u)){var de=void 0;(s>0||r.hskipBeforeAndAfter)&&(de=utils.deflt(V.pregap,p),de!==0&&(ee=buildCommon.makeSpan(["arraycolsep"],[]),ee.style.width=makeEm(de),q.push(ee)));var se=[];for(n=0;n<o;++n){var ie=h[n],ce=ie[s];if(ce){var xe=ie.pos-F;ce.depth=ie.depth,ce.height=ie.height,se.push({type:"elem",elem:ce,shift:xe})}}se=buildCommon.makeVList({positionType:"individualShift",children:se},a),se=buildCommon.makeSpan(["col-align-"+(V.align||"c")],[se]),q.push(se),(s<u-1||r.hskipBeforeAndAfter)&&(de=utils.deflt(V.postgap,p),de!==0&&(ee=buildCommon.makeSpan(["arraycolsep"],[]),ee.style.width=makeEm(de),q.push(ee)))}}if(h=buildCommon.makeSpan(["mtable"],q),c.length>0){for(var fe=buildCommon.makeLineSpan("hline",a,f),Ne=buildCommon.makeLineSpan("hdashline",a,f),we=[{type:"elem",elem:h,shift:0}];c.length>0;){var Pe=c.pop(),Ie=Pe.pos-F;Pe.isDashed?we.push({type:"elem",elem:Ne,shift:Ie}):we.push({type:"elem",elem:fe,shift:Ie})}h=buildCommon.makeVList({positionType:"individualShift",children:we},a)}if(Y.length===0)return buildCommon.makeSpan(["mord"],[h],a);var Ye=buildCommon.makeVList({positionType:"individualShift",children:Y},a);return Ye=buildCommon.makeSpan(["tag"],[Ye],a),buildCommon.makeFragment([h,Ye])},alignMap={c:"center ",l:"left ",r:"right "},mathmlBuilder$5=function t(r,a){for(var n=[],s=new mathMLTree.MathNode("mtd",[],["mtr-glue"]),o=new mathMLTree.MathNode("mtd",[],["mml-eqn-num"]),l=0;l<r.body.length;l++){for(var u=r.body[l],h=[],c=0;c<u.length;c++)h.push(new mathMLTree.MathNode("mtd",[buildGroup(u[c],a)]));r.tags&&r.tags[l]&&(h.unshift(s),h.push(s),r.leqno?h.unshift(o):h.push(o)),n.push(new mathMLTree.MathNode("mtr",h))}var f=new mathMLTree.MathNode("mtable",n),d=r.arraystretch===.5?.1:.16+r.arraystretch-1+(r.addJot?.09:0);f.setAttribute("rowspacing",makeEm(d));var p="",v="";if(r.cols&&r.cols.length>0){var y=r.cols,b="",_=!1,N=0,M=y.length;y[0].type==="separator"&&(p+="top ",N=1),y[y.length-1].type==="separator"&&(p+="bottom ",M-=1);for(var C=N;C<M;C++)y[C].type==="align"?(v+=alignMap[y[C].align],_&&(b+="none "),_=!0):y[C].type==="separator"&&_&&(b+=y[C].separator==="|"?"solid ":"dashed ",_=!1);f.setAttribute("columnalign",v.trim()),/[sd]/.test(b)&&f.setAttribute("columnlines",b.trim())}if(r.colSeparationType==="align"){for(var $=r.cols||[],w="",A=1;A<$.length;A++)w+=A%2?"0em ":"1em ";f.setAttribute("columnspacing",w.trim())}else r.colSeparationType==="alignat"||r.colSeparationType==="gather"?f.setAttribute("columnspacing","0em"):r.colSeparationType==="small"?f.setAttribute("columnspacing","0.2778em"):r.colSeparationType==="CD"?f.setAttribute("columnspacing","0.5em"):f.setAttribute("columnspacing","1em");var X="",O=r.hLinesBeforeRow;p+=O[0].length>0?"left ":"",p+=O[O.length-1].length>0?"right ":"";for(var G=1;G<O.length-1;G++)X+=O[G].length===0?"none ":O[G][0]?"dashed ":"solid ";return/[sd]/.test(X)&&f.setAttribute("rowlines",X.trim()),p!==""&&(f=new mathMLTree.MathNode("menclose",[f]),f.setAttribute("notation",p.trim())),r.arraystretch&&r.arraystretch<1&&(f=new mathMLTree.MathNode("mstyle",[f]),f.setAttribute("scriptlevel","1")),f},alignedHandler=function t(r,a){r.envName.indexOf("ed")===-1&&validateAmsEnvironmentContext(r);var n=[],s=r.envName.indexOf("at")>-1?"alignat":"align",o=r.envName==="split",l=parseArray(r.parser,{cols:n,addJot:!0,autoTag:o?void 0:getAutoTag(r.envName),emptySingleRow:!0,colSeparationType:s,maxNumCols:o?2:void 0,leqno:r.parser.settings.leqno},"display"),u,h=0,c={type:"ordgroup",mode:r.mode,body:[]};if(a[0]&&a[0].type==="ordgroup"){for(var f="",d=0;d<a[0].body.length;d++){var p=assertNodeType(a[0].body[d],"textord");f+=p.text}u=Number(f),h=u*2}var v=!h;l.body.forEach(function(N){for(var M=1;M<N.length;M+=2){var C=assertNodeType(N[M],"styling"),$=assertNodeType(C.body[0],"ordgroup");$.body.unshift(c)}if(v)h<N.length&&(h=N.length);else{var w=N.length/2;if(u<w)throw new ParseError("Too many math in a row: "+("expected "+u+", but got "+w),N[0])}});for(var y=0;y<h;++y){var b="r",_=0;y%2===1?b="l":y>0&&v&&(_=1),n[y]={type:"align",align:b,pregap:_,postgap:0}}return l.colSeparationType=v?"align":"alignat",l};defineEnvironment({type:"array",names:["array","darray"],props:{numArgs:1},handler(t,r){var a=checkSymbolNodeType(r[0]),n=a?[r[0]]:assertNodeType(r[0],"ordgroup").body,s=n.map(function(l){var u=assertSymbolNodeType(l),h=u.text;if("lcr".indexOf(h)!==-1)return{type:"align",align:h};if(h==="|")return{type:"separator",separator:"|"};if(h===":")return{type:"separator",separator:":"};throw new ParseError("Unknown column alignment: "+h,l)}),o={cols:s,hskipBeforeAndAfter:!0,maxNumCols:s.length};return parseArray(t.parser,o,dCellStyle(t.envName))},htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5});defineEnvironment({type:"array",names:["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix","matrix*","pmatrix*","bmatrix*","Bmatrix*","vmatrix*","Vmatrix*"],props:{numArgs:0},handler(t){var r={matrix:null,pmatrix:["(",")"],bmatrix:["[","]"],Bmatrix:["\\{","\\}"],vmatrix:["|","|"],Vmatrix:["\\Vert","\\Vert"]}[t.envName.replace("*","")],a="c",n={hskipBeforeAndAfter:!1,cols:[{type:"align",align:a}]};if(t.envName.charAt(t.envName.length-1)==="*"){var s=t.parser;if(s.consumeSpaces(),s.fetch().text==="["){if(s.consume(),s.consumeSpaces(),a=s.fetch().text,"lcr".indexOf(a)===-1)throw new ParseError("Expected l or c or r",s.nextToken);s.consume(),s.consumeSpaces(),s.expect("]"),s.consume(),n.cols=[{type:"align",align:a}]}}var o=parseArray(t.parser,n,dCellStyle(t.envName)),l=Math.max(0,...o.body.map(u=>u.length));return o.cols=new Array(l).fill({type:"align",align:a}),r?{type:"leftright",mode:t.mode,body:[o],left:r[0],right:r[1],rightColor:void 0}:o},htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5});defineEnvironment({type:"array",names:["smallmatrix"],props:{numArgs:0},handler(t){var r={arraystretch:.5},a=parseArray(t.parser,r,"script");return a.colSeparationType="small",a},htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5});defineEnvironment({type:"array",names:["subarray"],props:{numArgs:1},handler(t,r){var a=checkSymbolNodeType(r[0]),n=a?[r[0]]:assertNodeType(r[0],"ordgroup").body,s=n.map(function(l){var u=assertSymbolNodeType(l),h=u.text;if("lc".indexOf(h)!==-1)return{type:"align",align:h};throw new ParseError("Unknown column alignment: "+h,l)});if(s.length>1)throw new ParseError("{subarray} can contain only one column");var o={cols:s,hskipBeforeAndAfter:!1,arraystretch:.5};if(o=parseArray(t.parser,o,"script"),o.body.length>0&&o.body[0].length>1)throw new ParseError("{subarray} can contain only one column");return o},htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5});defineEnvironment({type:"array",names:["cases","dcases","rcases","drcases"],props:{numArgs:0},handler(t){var r={arraystretch:1.2,cols:[{type:"align",align:"l",pregap:0,postgap:1},{type:"align",align:"l",pregap:0,postgap:0}]},a=parseArray(t.parser,r,dCellStyle(t.envName));return{type:"leftright",mode:t.mode,body:[a],left:t.envName.indexOf("r")>-1?".":"\\{",right:t.envName.indexOf("r")>-1?"\\}":".",rightColor:void 0}},htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5});defineEnvironment({type:"array",names:["align","align*","aligned","split"],props:{numArgs:0},handler:alignedHandler,htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5});defineEnvironment({type:"array",names:["gathered","gather","gather*"],props:{numArgs:0},handler(t){["gather","gather*"].includes(t.envName)&&validateAmsEnvironmentContext(t);var r={cols:[{type:"align",align:"c"}],addJot:!0,colSeparationType:"gather",autoTag:getAutoTag(t.envName),emptySingleRow:!0,leqno:t.parser.settings.leqno};return parseArray(t.parser,r,"display")},htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5});defineEnvironment({type:"array",names:["alignat","alignat*","alignedat"],props:{numArgs:1},handler:alignedHandler,htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5});defineEnvironment({type:"array",names:["equation","equation*"],props:{numArgs:0},handler(t){validateAmsEnvironmentContext(t);var r={autoTag:getAutoTag(t.envName),emptySingleRow:!0,singleRow:!0,maxNumCols:1,leqno:t.parser.settings.leqno};return parseArray(t.parser,r,"display")},htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5});defineEnvironment({type:"array",names:["CD"],props:{numArgs:0},handler(t){return validateAmsEnvironmentContext(t),parseCD(t.parser)},htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5});defineMacro("\\nonumber","\\gdef\\@eqnsw{0}");defineMacro("\\notag","\\nonumber");defineFunction({type:"text",names:["\\hline","\\hdashline"],props:{numArgs:0,allowedInText:!0,allowedInMath:!0},handler(t,r){throw new ParseError(t.funcName+" valid only within array environment")}});var environments=_environments;defineFunction({type:"environment",names:["\\begin","\\end"],props:{numArgs:1,argTypes:["text"]},handler(t,r){var{parser:a,funcName:n}=t,s=r[0];if(s.type!=="ordgroup")throw new ParseError("Invalid environment name",s);for(var o="",l=0;l<s.body.length;++l)o+=assertNodeType(s.body[l],"textord").text;if(n==="\\begin"){if(!environments.hasOwnProperty(o))throw new ParseError("No such environment: "+o,s);var u=environments[o],{args:h,optArgs:c}=a.parseArguments("\\begin{"+o+"}",u),f={mode:a.mode,envName:o,parser:a},d=u.handler(f,h,c);a.expect("\\end",!1);var p=a.nextToken,v=assertNodeType(a.parseFunction(),"environment");if(v.name!==o)throw new ParseError("Mismatch: \\begin{"+o+"} matched by \\end{"+v.name+"}",p);return d}return{type:"environment",mode:a.mode,name:o,nameGroup:s}}});var htmlBuilder$5=(t,r)=>{var a=t.font,n=r.withFont(a);return buildGroup$1(t.body,n)},mathmlBuilder$4=(t,r)=>{var a=t.font,n=r.withFont(a);return buildGroup(t.body,n)},fontAliases={"\\Bbb":"\\mathbb","\\bold":"\\mathbf","\\frak":"\\mathfrak","\\bm":"\\boldsymbol"};defineFunction({type:"font",names:["\\mathrm","\\mathit","\\mathbf","\\mathnormal","\\mathsfit","\\mathbb","\\mathcal","\\mathfrak","\\mathscr","\\mathsf","\\mathtt","\\Bbb","\\bold","\\frak"],props:{numArgs:1,allowedInArgument:!0},handler:(t,r)=>{var{parser:a,funcName:n}=t,s=normalizeArgument(r[0]),o=n;return o in fontAliases&&(o=fontAliases[o]),{type:"font",mode:a.mode,font:o.slice(1),body:s}},htmlBuilder:htmlBuilder$5,mathmlBuilder:mathmlBuilder$4});defineFunction({type:"mclass",names:["\\boldsymbol","\\bm"],props:{numArgs:1},handler:(t,r)=>{var{parser:a}=t,n=r[0],s=utils.isCharacterBox(n);return{type:"mclass",mode:a.mode,mclass:binrelClass(n),body:[{type:"font",mode:a.mode,font:"boldsymbol",body:n}],isCharacterBox:s}}});defineFunction({type:"font",names:["\\rm","\\sf","\\tt","\\bf","\\it","\\cal"],props:{numArgs:0,allowedInText:!0},handler:(t,r)=>{var{parser:a,funcName:n,breakOnTokenText:s}=t,{mode:o}=a,l=a.parseExpression(!0,s),u="math"+n.slice(1);return{type:"font",mode:o,font:u,body:{type:"ordgroup",mode:a.mode,body:l}}},htmlBuilder:htmlBuilder$5,mathmlBuilder:mathmlBuilder$4});var adjustStyle=(t,r)=>{var a=r;return t==="display"?a=a.id>=Style$1.SCRIPT.id?a.text():Style$1.DISPLAY:t==="text"&&a.size===Style$1.DISPLAY.size?a=Style$1.TEXT:t==="script"?a=Style$1.SCRIPT:t==="scriptscript"&&(a=Style$1.SCRIPTSCRIPT),a},htmlBuilder$4=(t,r)=>{var a=adjustStyle(t.size,r.style),n=a.fracNum(),s=a.fracDen(),o;o=r.havingStyle(n);var l=buildGroup$1(t.numer,o,r);if(t.continued){var u=8.5/r.fontMetrics().ptPerEm,h=3.5/r.fontMetrics().ptPerEm;l.height=l.height<u?u:l.height,l.depth=l.depth<h?h:l.depth}o=r.havingStyle(s);var c=buildGroup$1(t.denom,o,r),f,d,p;t.hasBarLine?(t.barSize?(d=calculateSize(t.barSize,r),f=buildCommon.makeLineSpan("frac-line",r,d)):f=buildCommon.makeLineSpan("frac-line",r),d=f.height,p=f.height):(f=null,d=0,p=r.fontMetrics().defaultRuleThickness);var v,y,b;a.size===Style$1.DISPLAY.size||t.size==="display"?(v=r.fontMetrics().num1,d>0?y=3*p:y=7*p,b=r.fontMetrics().denom1):(d>0?(v=r.fontMetrics().num2,y=p):(v=r.fontMetrics().num3,y=3*p),b=r.fontMetrics().denom2);var _;if(f){var M=r.fontMetrics().axisHeight;v-l.depth-(M+.5*d)<y&&(v+=y-(v-l.depth-(M+.5*d))),M-.5*d-(c.height-b)<y&&(b+=y-(M-.5*d-(c.height-b)));var C=-(M-.5*d);_=buildCommon.makeVList({positionType:"individualShift",children:[{type:"elem",elem:c,shift:b},{type:"elem",elem:f,shift:C},{type:"elem",elem:l,shift:-v}]},r)}else{var N=v-l.depth-(c.height-b);N<y&&(v+=.5*(y-N),b+=.5*(y-N)),_=buildCommon.makeVList({positionType:"individualShift",children:[{type:"elem",elem:c,shift:b},{type:"elem",elem:l,shift:-v}]},r)}o=r.havingStyle(a),_.height*=o.sizeMultiplier/r.sizeMultiplier,_.depth*=o.sizeMultiplier/r.sizeMultiplier;var $;a.size===Style$1.DISPLAY.size?$=r.fontMetrics().delim1:a.size===Style$1.SCRIPTSCRIPT.size?$=r.havingStyle(Style$1.SCRIPT).fontMetrics().delim2:$=r.fontMetrics().delim2;var w,A;return t.leftDelim==null?w=makeNullDelimiter(r,["mopen"]):w=delimiter.customSizedDelim(t.leftDelim,$,!0,r.havingStyle(a),t.mode,["mopen"]),t.continued?A=buildCommon.makeSpan([]):t.rightDelim==null?A=makeNullDelimiter(r,["mclose"]):A=delimiter.customSizedDelim(t.rightDelim,$,!0,r.havingStyle(a),t.mode,["mclose"]),buildCommon.makeSpan(["mord"].concat(o.sizingClasses(r)),[w,buildCommon.makeSpan(["mfrac"],[_]),A],r)},mathmlBuilder$3=(t,r)=>{var a=new mathMLTree.MathNode("mfrac",[buildGroup(t.numer,r),buildGroup(t.denom,r)]);if(!t.hasBarLine)a.setAttribute("linethickness","0px");else if(t.barSize){var n=calculateSize(t.barSize,r);a.setAttribute("linethickness",makeEm(n))}var s=adjustStyle(t.size,r.style);if(s.size!==r.style.size){a=new mathMLTree.MathNode("mstyle",[a]);var o=s.size===Style$1.DISPLAY.size?"true":"false";a.setAttribute("displaystyle",o),a.setAttribute("scriptlevel","0")}if(t.leftDelim!=null||t.rightDelim!=null){var l=[];if(t.leftDelim!=null){var u=new mathMLTree.MathNode("mo",[new mathMLTree.TextNode(t.leftDelim.replace("\\",""))]);u.setAttribute("fence","true"),l.push(u)}if(l.push(a),t.rightDelim!=null){var h=new mathMLTree.MathNode("mo",[new mathMLTree.TextNode(t.rightDelim.replace("\\",""))]);h.setAttribute("fence","true"),l.push(h)}return makeRow(l)}return a};defineFunction({type:"genfrac",names:["\\dfrac","\\frac","\\tfrac","\\dbinom","\\binom","\\tbinom","\\\\atopfrac","\\\\bracefrac","\\\\brackfrac"],props:{numArgs:2,allowedInArgument:!0},handler:(t,r)=>{var{parser:a,funcName:n}=t,s=r[0],o=r[1],l,u=null,h=null,c="auto";switch(n){case"\\dfrac":case"\\frac":case"\\tfrac":l=!0;break;case"\\\\atopfrac":l=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":l=!1,u="(",h=")";break;case"\\\\bracefrac":l=!1,u="\\{",h="\\}";break;case"\\\\brackfrac":l=!1,u="[",h="]";break;default:throw new Error("Unrecognized genfrac command")}switch(n){case"\\dfrac":case"\\dbinom":c="display";break;case"\\tfrac":case"\\tbinom":c="text";break}return{type:"genfrac",mode:a.mode,continued:!1,numer:s,denom:o,hasBarLine:l,leftDelim:u,rightDelim:h,size:c,barSize:null}},htmlBuilder:htmlBuilder$4,mathmlBuilder:mathmlBuilder$3});defineFunction({type:"genfrac",names:["\\cfrac"],props:{numArgs:2},handler:(t,r)=>{var{parser:a,funcName:n}=t,s=r[0],o=r[1];return{type:"genfrac",mode:a.mode,continued:!0,numer:s,denom:o,hasBarLine:!0,leftDelim:null,rightDelim:null,size:"display",barSize:null}}});defineFunction({type:"infix",names:["\\over","\\choose","\\atop","\\brace","\\brack"],props:{numArgs:0,infix:!0},handler(t){var{parser:r,funcName:a,token:n}=t,s;switch(a){case"\\over":s="\\frac";break;case"\\choose":s="\\binom";break;case"\\atop":s="\\\\atopfrac";break;case"\\brace":s="\\\\bracefrac";break;case"\\brack":s="\\\\brackfrac";break;default:throw new Error("Unrecognized infix genfrac command")}return{type:"infix",mode:r.mode,replaceWith:s,token:n}}});var stylArray=["display","text","script","scriptscript"],delimFromValue=function t(r){var a=null;return r.length>0&&(a=r,a=a==="."?null:a),a};defineFunction({type:"genfrac",names:["\\genfrac"],props:{numArgs:6,allowedInArgument:!0,argTypes:["math","math","size","text","math","math"]},handler(t,r){var{parser:a}=t,n=r[4],s=r[5],o=normalizeArgument(r[0]),l=o.type==="atom"&&o.family==="open"?delimFromValue(o.text):null,u=normalizeArgument(r[1]),h=u.type==="atom"&&u.family==="close"?delimFromValue(u.text):null,c=assertNodeType(r[2],"size"),f,d=null;c.isBlank?f=!0:(d=c.value,f=d.number>0);var p="auto",v=r[3];if(v.type==="ordgroup"){if(v.body.length>0){var y=assertNodeType(v.body[0],"textord");p=stylArray[Number(y.text)]}}else v=assertNodeType(v,"textord"),p=stylArray[Number(v.text)];return{type:"genfrac",mode:a.mode,numer:n,denom:s,continued:!1,hasBarLine:f,barSize:d,leftDelim:l,rightDelim:h,size:p}},htmlBuilder:htmlBuilder$4,mathmlBuilder:mathmlBuilder$3});defineFunction({type:"infix",names:["\\above"],props:{numArgs:1,argTypes:["size"],infix:!0},handler(t,r){var{parser:a,funcName:n,token:s}=t;return{type:"infix",mode:a.mode,replaceWith:"\\\\abovefrac",size:assertNodeType(r[0],"size").value,token:s}}});defineFunction({type:"genfrac",names:["\\\\abovefrac"],props:{numArgs:3,argTypes:["math","size","math"]},handler:(t,r)=>{var{parser:a,funcName:n}=t,s=r[0],o=assert(assertNodeType(r[1],"infix").size),l=r[2],u=o.number>0;return{type:"genfrac",mode:a.mode,numer:s,denom:l,continued:!1,hasBarLine:u,barSize:o,leftDelim:null,rightDelim:null,size:"auto"}},htmlBuilder:htmlBuilder$4,mathmlBuilder:mathmlBuilder$3});var htmlBuilder$3=(t,r)=>{var a=r.style,n,s;t.type==="supsub"?(n=t.sup?buildGroup$1(t.sup,r.havingStyle(a.sup()),r):buildGroup$1(t.sub,r.havingStyle(a.sub()),r),s=assertNodeType(t.base,"horizBrace")):s=assertNodeType(t,"horizBrace");var o=buildGroup$1(s.base,r.havingBaseStyle(Style$1.DISPLAY)),l=stretchy.svgSpan(s,r),u;if(s.isOver?(u=buildCommon.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:o},{type:"kern",size:.1},{type:"elem",elem:l}]},r),u.children[0].children[0].children[1].classes.push("svg-align")):(u=buildCommon.makeVList({positionType:"bottom",positionData:o.depth+.1+l.height,children:[{type:"elem",elem:l},{type:"kern",size:.1},{type:"elem",elem:o}]},r),u.children[0].children[0].children[0].classes.push("svg-align")),n){var h=buildCommon.makeSpan(["mord",s.isOver?"mover":"munder"],[u],r);s.isOver?u=buildCommon.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:h},{type:"kern",size:.2},{type:"elem",elem:n}]},r):u=buildCommon.makeVList({positionType:"bottom",positionData:h.depth+.2+n.height+n.depth,children:[{type:"elem",elem:n},{type:"kern",size:.2},{type:"elem",elem:h}]},r)}return buildCommon.makeSpan(["mord",s.isOver?"mover":"munder"],[u],r)},mathmlBuilder$2=(t,r)=>{var a=stretchy.mathMLnode(t.label);return new mathMLTree.MathNode(t.isOver?"mover":"munder",[buildGroup(t.base,r),a])};defineFunction({type:"horizBrace",names:["\\overbrace","\\underbrace"],props:{numArgs:1},handler(t,r){var{parser:a,funcName:n}=t;return{type:"horizBrace",mode:a.mode,label:n,isOver:/^\\over/.test(n),base:r[0]}},htmlBuilder:htmlBuilder$3,mathmlBuilder:mathmlBuilder$2});defineFunction({type:"href",names:["\\href"],props:{numArgs:2,argTypes:["url","original"],allowedInText:!0},handler:(t,r)=>{var{parser:a}=t,n=r[1],s=assertNodeType(r[0],"url").url;return a.settings.isTrusted({command:"\\href",url:s})?{type:"href",mode:a.mode,href:s,body:ordargument(n)}:a.formatUnsupportedCmd("\\href")},htmlBuilder:(t,r)=>{var a=buildExpression$1(t.body,r,!1);return buildCommon.makeAnchor(t.href,[],a,r)},mathmlBuilder:(t,r)=>{var a=buildExpressionRow(t.body,r);return a instanceof MathNode||(a=new MathNode("mrow",[a])),a.setAttribute("href",t.href),a}});defineFunction({type:"href",names:["\\url"],props:{numArgs:1,argTypes:["url"],allowedInText:!0},handler:(t,r)=>{var{parser:a}=t,n=assertNodeType(r[0],"url").url;if(!a.settings.isTrusted({command:"\\url",url:n}))return a.formatUnsupportedCmd("\\url");for(var s=[],o=0;o<n.length;o++){var l=n[o];l==="~"&&(l="\\textasciitilde"),s.push({type:"textord",mode:"text",text:l})}var u={type:"text",mode:a.mode,font:"\\texttt",body:s};return{type:"href",mode:a.mode,href:n,body:ordargument(u)}}});defineFunction({type:"hbox",names:["\\hbox"],props:{numArgs:1,argTypes:["text"],allowedInText:!0,primitive:!0},handler(t,r){var{parser:a}=t;return{type:"hbox",mode:a.mode,body:ordargument(r[0])}},htmlBuilder(t,r){var a=buildExpression$1(t.body,r,!1);return buildCommon.makeFragment(a)},mathmlBuilder(t,r){return new mathMLTree.MathNode("mrow",buildExpression(t.body,r))}});defineFunction({type:"html",names:["\\htmlClass","\\htmlId","\\htmlStyle","\\htmlData"],props:{numArgs:2,argTypes:["raw","original"],allowedInText:!0},handler:(t,r)=>{var{parser:a,funcName:n,token:s}=t,o=assertNodeType(r[0],"raw").string,l=r[1];a.settings.strict&&a.settings.reportNonstrict("htmlExtension","HTML extension is disabled on strict mode");var u,h={};switch(n){case"\\htmlClass":h.class=o,u={command:"\\htmlClass",class:o};break;case"\\htmlId":h.id=o,u={command:"\\htmlId",id:o};break;case"\\htmlStyle":h.style=o,u={command:"\\htmlStyle",style:o};break;case"\\htmlData":{for(var c=o.split(","),f=0;f<c.length;f++){var d=c[f],p=d.indexOf("=");if(p<0)throw new ParseError("\\htmlData key/value '"+d+"' missing equals sign");var v=d.slice(0,p),y=d.slice(p+1);h["data-"+v.trim()]=y}u={command:"\\htmlData",attributes:h};break}default:throw new Error("Unrecognized html command")}return a.settings.isTrusted(u)?{type:"html",mode:a.mode,attributes:h,body:ordargument(l)}:a.formatUnsupportedCmd(n)},htmlBuilder:(t,r)=>{var a=buildExpression$1(t.body,r,!1),n=["enclosing"];t.attributes.class&&n.push(...t.attributes.class.trim().split(/\s+/));var s=buildCommon.makeSpan(n,a,r);for(var o in t.attributes)o!=="class"&&t.attributes.hasOwnProperty(o)&&s.setAttribute(o,t.attributes[o]);return s},mathmlBuilder:(t,r)=>buildExpressionRow(t.body,r)});defineFunction({type:"htmlmathml",names:["\\html@mathml"],props:{numArgs:2,allowedInText:!0},handler:(t,r)=>{var{parser:a}=t;return{type:"htmlmathml",mode:a.mode,html:ordargument(r[0]),mathml:ordargument(r[1])}},htmlBuilder:(t,r)=>{var a=buildExpression$1(t.html,r,!1);return buildCommon.makeFragment(a)},mathmlBuilder:(t,r)=>buildExpressionRow(t.mathml,r)});var sizeData=function t(r){if(/^[-+]? *(\d+(\.\d*)?|\.\d+)$/.test(r))return{number:+r,unit:"bp"};var a=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(r);if(!a)throw new ParseError("Invalid size: '"+r+"' in \\includegraphics");var n={number:+(a[1]+a[2]),unit:a[3]};if(!validUnit(n))throw new ParseError("Invalid unit: '"+n.unit+"' in \\includegraphics.");return n};defineFunction({type:"includegraphics",names:["\\includegraphics"],props:{numArgs:1,numOptionalArgs:1,argTypes:["raw","url"],allowedInText:!1},handler:(t,r,a)=>{var{parser:n}=t,s={number:0,unit:"em"},o={number:.9,unit:"em"},l={number:0,unit:"em"},u="";if(a[0])for(var h=assertNodeType(a[0],"raw").string,c=h.split(","),f=0;f<c.length;f++){var d=c[f].split("=");if(d.length===2){var p=d[1].trim();switch(d[0].trim()){case"alt":u=p;break;case"width":s=sizeData(p);break;case"height":o=sizeData(p);break;case"totalheight":l=sizeData(p);break;default:throw new ParseError("Invalid key: '"+d[0]+"' in \\includegraphics.")}}}var v=assertNodeType(r[0],"url").url;return u===""&&(u=v,u=u.replace(/^.*[\\/]/,""),u=u.substring(0,u.lastIndexOf("."))),n.settings.isTrusted({command:"\\includegraphics",url:v})?{type:"includegraphics",mode:n.mode,alt:u,width:s,height:o,totalheight:l,src:v}:n.formatUnsupportedCmd("\\includegraphics")},htmlBuilder:(t,r)=>{var a=calculateSize(t.height,r),n=0;t.totalheight.number>0&&(n=calculateSize(t.totalheight,r)-a);var s=0;t.width.number>0&&(s=calculateSize(t.width,r));var o={height:makeEm(a+n)};s>0&&(o.width=makeEm(s)),n>0&&(o.verticalAlign=makeEm(-n));var l=new Img(t.src,t.alt,o);return l.height=a,l.depth=n,l},mathmlBuilder:(t,r)=>{var a=new mathMLTree.MathNode("mglyph",[]);a.setAttribute("alt",t.alt);var n=calculateSize(t.height,r),s=0;if(t.totalheight.number>0&&(s=calculateSize(t.totalheight,r)-n,a.setAttribute("valign",makeEm(-s))),a.setAttribute("height",makeEm(n+s)),t.width.number>0){var o=calculateSize(t.width,r);a.setAttribute("width",makeEm(o))}return a.setAttribute("src",t.src),a}});defineFunction({type:"kern",names:["\\kern","\\mkern","\\hskip","\\mskip"],props:{numArgs:1,argTypes:["size"],primitive:!0,allowedInText:!0},handler(t,r){var{parser:a,funcName:n}=t,s=assertNodeType(r[0],"size");if(a.settings.strict){var o=n[1]==="m",l=s.value.unit==="mu";o?(l||a.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" supports only mu units, "+("not "+s.value.unit+" units")),a.mode!=="math"&&a.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" works only in math mode")):l&&a.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" doesn't support mu units")}return{type:"kern",mode:a.mode,dimension:s.value}},htmlBuilder(t,r){return buildCommon.makeGlue(t.dimension,r)},mathmlBuilder(t,r){var a=calculateSize(t.dimension,r);return new mathMLTree.SpaceNode(a)}});defineFunction({type:"lap",names:["\\mathllap","\\mathrlap","\\mathclap"],props:{numArgs:1,allowedInText:!0},handler:(t,r)=>{var{parser:a,funcName:n}=t,s=r[0];return{type:"lap",mode:a.mode,alignment:n.slice(5),body:s}},htmlBuilder:(t,r)=>{var a;t.alignment==="clap"?(a=buildCommon.makeSpan([],[buildGroup$1(t.body,r)]),a=buildCommon.makeSpan(["inner"],[a],r)):a=buildCommon.makeSpan(["inner"],[buildGroup$1(t.body,r)]);var n=buildCommon.makeSpan(["fix"],[]),s=buildCommon.makeSpan([t.alignment],[a,n],r),o=buildCommon.makeSpan(["strut"]);return o.style.height=makeEm(s.height+s.depth),s.depth&&(o.style.verticalAlign=makeEm(-s.depth)),s.children.unshift(o),s=buildCommon.makeSpan(["thinbox"],[s],r),buildCommon.makeSpan(["mord","vbox"],[s],r)},mathmlBuilder:(t,r)=>{var a=new mathMLTree.MathNode("mpadded",[buildGroup(t.body,r)]);if(t.alignment!=="rlap"){var n=t.alignment==="llap"?"-1":"-0.5";a.setAttribute("lspace",n+"width")}return a.setAttribute("width","0px"),a}});defineFunction({type:"styling",names:["\\(","$"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(t,r){var{funcName:a,parser:n}=t,s=n.mode;n.switchMode("math");var o=a==="\\("?"\\)":"$",l=n.parseExpression(!1,o);return n.expect(o),n.switchMode(s),{type:"styling",mode:n.mode,style:"text",body:l}}});defineFunction({type:"text",names:["\\)","\\]"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(t,r){throw new ParseError("Mismatched "+t.funcName)}});var chooseMathStyle=(t,r)=>{switch(r.style.size){case Style$1.DISPLAY.size:return t.display;case Style$1.TEXT.size:return t.text;case Style$1.SCRIPT.size:return t.script;case Style$1.SCRIPTSCRIPT.size:return t.scriptscript;default:return t.text}};defineFunction({type:"mathchoice",names:["\\mathchoice"],props:{numArgs:4,primitive:!0},handler:(t,r)=>{var{parser:a}=t;return{type:"mathchoice",mode:a.mode,display:ordargument(r[0]),text:ordargument(r[1]),script:ordargument(r[2]),scriptscript:ordargument(r[3])}},htmlBuilder:(t,r)=>{var a=chooseMathStyle(t,r),n=buildExpression$1(a,r,!1);return buildCommon.makeFragment(n)},mathmlBuilder:(t,r)=>{var a=chooseMathStyle(t,r);return buildExpressionRow(a,r)}});var assembleSupSub=(t,r,a,n,s,o,l)=>{t=buildCommon.makeSpan([],[t]);var u=a&&utils.isCharacterBox(a),h,c;if(r){var f=buildGroup$1(r,n.havingStyle(s.sup()),n);c={elem:f,kern:Math.max(n.fontMetrics().bigOpSpacing1,n.fontMetrics().bigOpSpacing3-f.depth)}}if(a){var d=buildGroup$1(a,n.havingStyle(s.sub()),n);h={elem:d,kern:Math.max(n.fontMetrics().bigOpSpacing2,n.fontMetrics().bigOpSpacing4-d.height)}}var p;if(c&&h){var v=n.fontMetrics().bigOpSpacing5+h.elem.height+h.elem.depth+h.kern+t.depth+l;p=buildCommon.makeVList({positionType:"bottom",positionData:v,children:[{type:"kern",size:n.fontMetrics().bigOpSpacing5},{type:"elem",elem:h.elem,marginLeft:makeEm(-o)},{type:"kern",size:h.kern},{type:"elem",elem:t},{type:"kern",size:c.kern},{type:"elem",elem:c.elem,marginLeft:makeEm(o)},{type:"kern",size:n.fontMetrics().bigOpSpacing5}]},n)}else if(h){var y=t.height-l;p=buildCommon.makeVList({positionType:"top",positionData:y,children:[{type:"kern",size:n.fontMetrics().bigOpSpacing5},{type:"elem",elem:h.elem,marginLeft:makeEm(-o)},{type:"kern",size:h.kern},{type:"elem",elem:t}]},n)}else if(c){var b=t.depth+l;p=buildCommon.makeVList({positionType:"bottom",positionData:b,children:[{type:"elem",elem:t},{type:"kern",size:c.kern},{type:"elem",elem:c.elem,marginLeft:makeEm(o)},{type:"kern",size:n.fontMetrics().bigOpSpacing5}]},n)}else return t;var _=[p];if(h&&o!==0&&!u){var N=buildCommon.makeSpan(["mspace"],[],n);N.style.marginRight=makeEm(o),_.unshift(N)}return buildCommon.makeSpan(["mop","op-limits"],_,n)},noSuccessor=["\\smallint"],htmlBuilder$2=(t,r)=>{var a,n,s=!1,o;t.type==="supsub"?(a=t.sup,n=t.sub,o=assertNodeType(t.base,"op"),s=!0):o=assertNodeType(t,"op");var l=r.style,u=!1;l.size===Style$1.DISPLAY.size&&o.symbol&&!noSuccessor.includes(o.name)&&(u=!0);var h;if(o.symbol){var c=u?"Size2-Regular":"Size1-Regular",f="";if((o.name==="\\oiint"||o.name==="\\oiiint")&&(f=o.name.slice(1),o.name=f==="oiint"?"\\iint":"\\iiint"),h=buildCommon.makeSymbol(o.name,c,"math",r,["mop","op-symbol",u?"large-op":"small-op"]),f.length>0){var d=h.italic,p=buildCommon.staticSvg(f+"Size"+(u?"2":"1"),r);h=buildCommon.makeVList({positionType:"individualShift",children:[{type:"elem",elem:h,shift:0},{type:"elem",elem:p,shift:u?.08:0}]},r),o.name="\\"+f,h.classes.unshift("mop"),h.italic=d}}else if(o.body){var v=buildExpression$1(o.body,r,!0);v.length===1&&v[0]instanceof SymbolNode?(h=v[0],h.classes[0]="mop"):h=buildCommon.makeSpan(["mop"],v,r)}else{for(var y=[],b=1;b<o.name.length;b++)y.push(buildCommon.mathsym(o.name[b],o.mode,r));h=buildCommon.makeSpan(["mop"],y,r)}var _=0,N=0;return(h instanceof SymbolNode||o.name==="\\oiint"||o.name==="\\oiiint")&&!o.suppressBaseShift&&(_=(h.height-h.depth)/2-r.fontMetrics().axisHeight,N=h.italic),s?assembleSupSub(h,a,n,r,l,N,_):(_&&(h.style.position="relative",h.style.top=makeEm(_)),h)},mathmlBuilder$1=(t,r)=>{var a;if(t.symbol)a=new MathNode("mo",[makeText(t.name,t.mode)]),noSuccessor.includes(t.name)&&a.setAttribute("largeop","false");else if(t.body)a=new MathNode("mo",buildExpression(t.body,r));else{a=new MathNode("mi",[new TextNode(t.name.slice(1))]);var n=new MathNode("mo",[makeText("","text")]);t.parentIsSupSub?a=new MathNode("mrow",[a,n]):a=newDocumentFragment([a,n])}return a},singleCharBigOps={"":"\\prod","":"\\coprod","":"\\sum","":"\\bigwedge","":"\\bigvee","":"\\bigcap","":"\\bigcup","":"\\bigodot","":"\\bigoplus","":"\\bigotimes","":"\\biguplus","":"\\bigsqcup"};defineFunction({type:"op",names:["\\coprod","\\bigvee","\\bigwedge","\\biguplus","\\bigcap","\\bigcup","\\intop","\\prod","\\sum","\\bigotimes","\\bigoplus","\\bigodot","\\bigsqcup","\\smallint","","","","","","","","","","","",""],props:{numArgs:0},handler:(t,r)=>{var{parser:a,funcName:n}=t,s=n;return s.length===1&&(s=singleCharBigOps[s]),{type:"op",mode:a.mode,limits:!0,parentIsSupSub:!1,symbol:!0,name:s}},htmlBuilder:htmlBuilder$2,mathmlBuilder:mathmlBuilder$1});defineFunction({type:"op",names:["\\mathop"],props:{numArgs:1,primitive:!0},handler:(t,r)=>{var{parser:a}=t,n=r[0];return{type:"op",mode:a.mode,limits:!1,parentIsSupSub:!1,symbol:!1,body:ordargument(n)}},htmlBuilder:htmlBuilder$2,mathmlBuilder:mathmlBuilder$1});var singleCharIntegrals={"":"\\int","":"\\iint","":"\\iiint","":"\\oint","":"\\oiint","":"\\oiiint"};defineFunction({type:"op",names:["\\arcsin","\\arccos","\\arctan","\\arctg","\\arcctg","\\arg","\\ch","\\cos","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\deg","\\dim","\\exp","\\hom","\\ker","\\lg","\\ln","\\log","\\sec","\\sin","\\sinh","\\sh","\\tan","\\tanh","\\tg","\\th"],props:{numArgs:0},handler(t){var{parser:r,funcName:a}=t;return{type:"op",mode:r.mode,limits:!1,parentIsSupSub:!1,symbol:!1,name:a}},htmlBuilder:htmlBuilder$2,mathmlBuilder:mathmlBuilder$1});defineFunction({type:"op",names:["\\det","\\gcd","\\inf","\\lim","\\max","\\min","\\Pr","\\sup"],props:{numArgs:0},handler(t){var{parser:r,funcName:a}=t;return{type:"op",mode:r.mode,limits:!0,parentIsSupSub:!1,symbol:!1,name:a}},htmlBuilder:htmlBuilder$2,mathmlBuilder:mathmlBuilder$1});defineFunction({type:"op",names:["\\int","\\iint","\\iiint","\\oint","\\oiint","\\oiiint","","","","","",""],props:{numArgs:0,allowedInArgument:!0},handler(t){var{parser:r,funcName:a}=t,n=a;return n.length===1&&(n=singleCharIntegrals[n]),{type:"op",mode:r.mode,limits:!1,parentIsSupSub:!1,symbol:!0,name:n}},htmlBuilder:htmlBuilder$2,mathmlBuilder:mathmlBuilder$1});var htmlBuilder$1=(t,r)=>{var a,n,s=!1,o;t.type==="supsub"?(a=t.sup,n=t.sub,o=assertNodeType(t.base,"operatorname"),s=!0):o=assertNodeType(t,"operatorname");var l;if(o.body.length>0){for(var u=o.body.map(d=>{var p=d.text;return typeof p=="string"?{type:"textord",mode:d.mode,text:p}:d}),h=buildExpression$1(u,r.withFont("mathrm"),!0),c=0;c<h.length;c++){var f=h[c];f instanceof SymbolNode&&(f.text=f.text.replace(/\u2212/,"-").replace(/\u2217/,"*"))}l=buildCommon.makeSpan(["mop"],h,r)}else l=buildCommon.makeSpan(["mop"],[],r);return s?assembleSupSub(l,a,n,r,r.style,0,0):l},mathmlBuilder=(t,r)=>{for(var a=buildExpression(t.body,r.withFont("mathrm")),n=!0,s=0;s<a.length;s++){var o=a[s];if(!(o instanceof mathMLTree.SpaceNode))if(o instanceof mathMLTree.MathNode)switch(o.type){case"mi":case"mn":case"ms":case"mspace":case"mtext":break;case"mo":{var l=o.children[0];o.children.length===1&&l instanceof mathMLTree.TextNode?l.text=l.text.replace(/\u2212/,"-").replace(/\u2217/,"*"):n=!1;break}default:n=!1}else n=!1}if(n){var u=a.map(f=>f.toText()).join("");a=[new mathMLTree.TextNode(u)]}var h=new mathMLTree.MathNode("mi",a);h.setAttribute("mathvariant","normal");var c=new mathMLTree.MathNode("mo",[makeText("","text")]);return t.parentIsSupSub?new mathMLTree.MathNode("mrow",[h,c]):mathMLTree.newDocumentFragment([h,c])};defineFunction({type:"operatorname",names:["\\operatorname@","\\operatornamewithlimits"],props:{numArgs:1},handler:(t,r)=>{var{parser:a,funcName:n}=t,s=r[0];return{type:"operatorname",mode:a.mode,body:ordargument(s),alwaysHandleSupSub:n==="\\operatornamewithlimits",limits:!1,parentIsSupSub:!1}},htmlBuilder:htmlBuilder$1,mathmlBuilder});defineMacro("\\operatorname","\\@ifstar\\operatornamewithlimits\\operatorname@");defineFunctionBuilders({type:"ordgroup",htmlBuilder(t,r){return t.semisimple?buildCommon.makeFragment(buildExpression$1(t.body,r,!1)):buildCommon.makeSpan(["mord"],buildExpression$1(t.body,r,!0),r)},mathmlBuilder(t,r){return buildExpressionRow(t.body,r,!0)}});defineFunction({type:"overline",names:["\\overline"],props:{numArgs:1},handler(t,r){var{parser:a}=t,n=r[0];return{type:"overline",mode:a.mode,body:n}},htmlBuilder(t,r){var a=buildGroup$1(t.body,r.havingCrampedStyle()),n=buildCommon.makeLineSpan("overline-line",r),s=r.fontMetrics().defaultRuleThickness,o=buildCommon.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:a},{type:"kern",size:3*s},{type:"elem",elem:n},{type:"kern",size:s}]},r);return buildCommon.makeSpan(["mord","overline"],[o],r)},mathmlBuilder(t,r){var a=new mathMLTree.MathNode("mo",[new mathMLTree.TextNode("")]);a.setAttribute("stretchy","true");var n=new mathMLTree.MathNode("mover",[buildGroup(t.body,r),a]);return n.setAttribute("accent","true"),n}});defineFunction({type:"phantom",names:["\\phantom"],props:{numArgs:1,allowedInText:!0},handler:(t,r)=>{var{parser:a}=t,n=r[0];return{type:"phantom",mode:a.mode,body:ordargument(n)}},htmlBuilder:(t,r)=>{var a=buildExpression$1(t.body,r.withPhantom(),!1);return buildCommon.makeFragment(a)},mathmlBuilder:(t,r)=>{var a=buildExpression(t.body,r);return new mathMLTree.MathNode("mphantom",a)}});defineFunction({type:"hphantom",names:["\\hphantom"],props:{numArgs:1,allowedInText:!0},handler:(t,r)=>{var{parser:a}=t,n=r[0];return{type:"hphantom",mode:a.mode,body:n}},htmlBuilder:(t,r)=>{var a=buildCommon.makeSpan([],[buildGroup$1(t.body,r.withPhantom())]);if(a.height=0,a.depth=0,a.children)for(var n=0;n<a.children.length;n++)a.children[n].height=0,a.children[n].depth=0;return a=buildCommon.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:a}]},r),buildCommon.makeSpan(["mord"],[a],r)},mathmlBuilder:(t,r)=>{var a=buildExpression(ordargument(t.body),r),n=new mathMLTree.MathNode("mphantom",a),s=new mathMLTree.MathNode("mpadded",[n]);return s.setAttribute("height","0px"),s.setAttribute("depth","0px"),s}});defineFunction({type:"vphantom",names:["\\vphantom"],props:{numArgs:1,allowedInText:!0},handler:(t,r)=>{var{parser:a}=t,n=r[0];return{type:"vphantom",mode:a.mode,body:n}},htmlBuilder:(t,r)=>{var a=buildCommon.makeSpan(["inner"],[buildGroup$1(t.body,r.withPhantom())]),n=buildCommon.makeSpan(["fix"],[]);return buildCommon.makeSpan(["mord","rlap"],[a,n],r)},mathmlBuilder:(t,r)=>{var a=buildExpression(ordargument(t.body),r),n=new mathMLTree.MathNode("mphantom",a),s=new mathMLTree.MathNode("mpadded",[n]);return s.setAttribute("width","0px"),s}});defineFunction({type:"raisebox",names:["\\raisebox"],props:{numArgs:2,argTypes:["size","hbox"],allowedInText:!0},handler(t,r){var{parser:a}=t,n=assertNodeType(r[0],"size").value,s=r[1];return{type:"raisebox",mode:a.mode,dy:n,body:s}},htmlBuilder(t,r){var a=buildGroup$1(t.body,r),n=calculateSize(t.dy,r);return buildCommon.makeVList({positionType:"shift",positionData:-n,children:[{type:"elem",elem:a}]},r)},mathmlBuilder(t,r){var a=new mathMLTree.MathNode("mpadded",[buildGroup(t.body,r)]),n=t.dy.number+t.dy.unit;return a.setAttribute("voffset",n),a}});defineFunction({type:"internal",names:["\\relax"],props:{numArgs:0,allowedInText:!0,allowedInArgument:!0},handler(t){var{parser:r}=t;return{type:"internal",mode:r.mode}}});defineFunction({type:"rule",names:["\\rule"],props:{numArgs:2,numOptionalArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["size","size","size"]},handler(t,r,a){var{parser:n}=t,s=a[0],o=assertNodeType(r[0],"size"),l=assertNodeType(r[1],"size");return{type:"rule",mode:n.mode,shift:s&&assertNodeType(s,"size").value,width:o.value,height:l.value}},htmlBuilder(t,r){var a=buildCommon.makeSpan(["mord","rule"],[],r),n=calculateSize(t.width,r),s=calculateSize(t.height,r),o=t.shift?calculateSize(t.shift,r):0;return a.style.borderRightWidth=makeEm(n),a.style.borderTopWidth=makeEm(s),a.style.bottom=makeEm(o),a.width=n,a.height=s+o,a.depth=-o,a.maxFontSize=s*1.125*r.sizeMultiplier,a},mathmlBuilder(t,r){var a=calculateSize(t.width,r),n=calculateSize(t.height,r),s=t.shift?calculateSize(t.shift,r):0,o=r.color&&r.getColor()||"black",l=new mathMLTree.MathNode("mspace");l.setAttribute("mathbackground",o),l.setAttribute("width",makeEm(a)),l.setAttribute("height",makeEm(n));var u=new mathMLTree.MathNode("mpadded",[l]);return s>=0?u.setAttribute("height",makeEm(s)):(u.setAttribute("height",makeEm(s)),u.setAttribute("depth",makeEm(-s))),u.setAttribute("voffset",makeEm(s)),u}});function sizingGroup(t,r,a){for(var n=buildExpression$1(t,r,!1),s=r.sizeMultiplier/a.sizeMultiplier,o=0;o<n.length;o++){var l=n[o].classes.indexOf("sizing");l<0?Array.prototype.push.apply(n[o].classes,r.sizingClasses(a)):n[o].classes[l+1]==="reset-size"+r.size&&(n[o].classes[l+1]="reset-size"+a.size),n[o].height*=s,n[o].depth*=s}return buildCommon.makeFragment(n)}var sizeFuncs=["\\tiny","\\sixptsize","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"],htmlBuilder=(t,r)=>{var a=r.havingSize(t.size);return sizingGroup(t.body,a,r)};defineFunction({type:"sizing",names:sizeFuncs,props:{numArgs:0,allowedInText:!0},handler:(t,r)=>{var{breakOnTokenText:a,funcName:n,parser:s}=t,o=s.parseExpression(!1,a);return{type:"sizing",mode:s.mode,size:sizeFuncs.indexOf(n)+1,body:o}},htmlBuilder,mathmlBuilder:(t,r)=>{var a=r.havingSize(t.size),n=buildExpression(t.body,a),s=new mathMLTree.MathNode("mstyle",n);return s.setAttribute("mathsize",makeEm(a.sizeMultiplier)),s}});defineFunction({type:"smash",names:["\\smash"],props:{numArgs:1,numOptionalArgs:1,allowedInText:!0},handler:(t,r,a)=>{var{parser:n}=t,s=!1,o=!1,l=a[0]&&assertNodeType(a[0],"ordgroup");if(l)for(var u="",h=0;h<l.body.length;++h){var c=l.body[h];if(u=c.text,u==="t")s=!0;else if(u==="b")o=!0;else{s=!1,o=!1;break}}else s=!0,o=!0;var f=r[0];return{type:"smash",mode:n.mode,body:f,smashHeight:s,smashDepth:o}},htmlBuilder:(t,r)=>{var a=buildCommon.makeSpan([],[buildGroup$1(t.body,r)]);if(!t.smashHeight&&!t.smashDepth)return a;if(t.smashHeight&&(a.height=0,a.children))for(var n=0;n<a.children.length;n++)a.children[n].height=0;if(t.smashDepth&&(a.depth=0,a.children))for(var s=0;s<a.children.length;s++)a.children[s].depth=0;var o=buildCommon.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:a}]},r);return buildCommon.makeSpan(["mord"],[o],r)},mathmlBuilder:(t,r)=>{var a=new mathMLTree.MathNode("mpadded",[buildGroup(t.body,r)]);return t.smashHeight&&a.setAttribute("height","0px"),t.smashDepth&&a.setAttribute("depth","0px"),a}});defineFunction({type:"sqrt",names:["\\sqrt"],props:{numArgs:1,numOptionalArgs:1},handler(t,r,a){var{parser:n}=t,s=a[0],o=r[0];return{type:"sqrt",mode:n.mode,body:o,index:s}},htmlBuilder(t,r){var a=buildGroup$1(t.body,r.havingCrampedStyle());a.height===0&&(a.height=r.fontMetrics().xHeight),a=buildCommon.wrapFragment(a,r);var n=r.fontMetrics(),s=n.defaultRuleThickness,o=s;r.style.id<Style$1.TEXT.id&&(o=r.fontMetrics().xHeight);var l=s+o/4,u=a.height+a.depth+l+s,{span:h,ruleWidth:c,advanceWidth:f}=delimiter.sqrtImage(u,r),d=h.height-c;d>a.height+a.depth+l&&(l=(l+d-a.height-a.depth)/2);var p=h.height-a.height-l-c;a.style.paddingLeft=makeEm(f);var v=buildCommon.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:a,wrapperClasses:["svg-align"]},{type:"kern",size:-(a.height+p)},{type:"elem",elem:h},{type:"kern",size:c}]},r);if(t.index){var y=r.havingStyle(Style$1.SCRIPTSCRIPT),b=buildGroup$1(t.index,y,r),_=.6*(v.height-v.depth),N=buildCommon.makeVList({positionType:"shift",positionData:-_,children:[{type:"elem",elem:b}]},r),M=buildCommon.makeSpan(["root"],[N]);return buildCommon.makeSpan(["mord","sqrt"],[M,v],r)}else return buildCommon.makeSpan(["mord","sqrt"],[v],r)},mathmlBuilder(t,r){var{body:a,index:n}=t;return n?new mathMLTree.MathNode("mroot",[buildGroup(a,r),buildGroup(n,r)]):new mathMLTree.MathNode("msqrt",[buildGroup(a,r)])}});var styleMap={display:Style$1.DISPLAY,text:Style$1.TEXT,script:Style$1.SCRIPT,scriptscript:Style$1.SCRIPTSCRIPT};defineFunction({type:"styling",names:["\\displaystyle","\\textstyle","\\scriptstyle","\\scriptscriptstyle"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t,r){var{breakOnTokenText:a,funcName:n,parser:s}=t,o=s.parseExpression(!0,a),l=n.slice(1,n.length-5);return{type:"styling",mode:s.mode,style:l,body:o}},htmlBuilder(t,r){var a=styleMap[t.style],n=r.havingStyle(a).withFont("");return sizingGroup(t.body,n,r)},mathmlBuilder(t,r){var a=styleMap[t.style],n=r.havingStyle(a),s=buildExpression(t.body,n),o=new mathMLTree.MathNode("mstyle",s),l={display:["0","true"],text:["0","false"],script:["1","false"],scriptscript:["2","false"]},u=l[t.style];return o.setAttribute("scriptlevel",u[0]),o.setAttribute("displaystyle",u[1]),o}});var htmlBuilderDelegate=function t(r,a){var n=r.base;if(n)if(n.type==="op"){var s=n.limits&&(a.style.size===Style$1.DISPLAY.size||n.alwaysHandleSupSub);return s?htmlBuilder$2:null}else if(n.type==="operatorname"){var o=n.alwaysHandleSupSub&&(a.style.size===Style$1.DISPLAY.size||n.limits);return o?htmlBuilder$1:null}else{if(n.type==="accent")return utils.isCharacterBox(n.base)?htmlBuilder$a:null;if(n.type==="horizBrace"){var l=!r.sub;return l===n.isOver?htmlBuilder$3:null}else return null}else return null};defineFunctionBuilders({type:"supsub",htmlBuilder(t,r){var a=htmlBuilderDelegate(t,r);if(a)return a(t,r);var{base:n,sup:s,sub:o}=t,l=buildGroup$1(n,r),u,h,c=r.fontMetrics(),f=0,d=0,p=n&&utils.isCharacterBox(n);if(s){var v=r.havingStyle(r.style.sup());u=buildGroup$1(s,v,r),p||(f=l.height-v.fontMetrics().supDrop*v.sizeMultiplier/r.sizeMultiplier)}if(o){var y=r.havingStyle(r.style.sub());h=buildGroup$1(o,y,r),p||(d=l.depth+y.fontMetrics().subDrop*y.sizeMultiplier/r.sizeMultiplier)}var b;r.style===Style$1.DISPLAY?b=c.sup1:r.style.cramped?b=c.sup3:b=c.sup2;var _=r.sizeMultiplier,N=makeEm(.5/c.ptPerEm/_),M=null;if(h){var C=t.base&&t.base.type==="op"&&t.base.name&&(t.base.name==="\\oiint"||t.base.name==="\\oiiint");(l instanceof SymbolNode||C)&&(M=makeEm(-l.italic))}var $;if(u&&h){f=Math.max(f,b,u.depth+.25*c.xHeight),d=Math.max(d,c.sub2);var w=c.defaultRuleThickness,A=4*w;if(f-u.depth-(h.height-d)<A){d=A-(f-u.depth)+h.height;var X=.8*c.xHeight-(f-u.depth);X>0&&(f+=X,d-=X)}var O=[{type:"elem",elem:h,shift:d,marginRight:N,marginLeft:M},{type:"elem",elem:u,shift:-f,marginRight:N}];$=buildCommon.makeVList({positionType:"individualShift",children:O},r)}else if(h){d=Math.max(d,c.sub1,h.height-.8*c.xHeight);var G=[{type:"elem",elem:h,marginLeft:M,marginRight:N}];$=buildCommon.makeVList({positionType:"shift",positionData:d,children:G},r)}else if(u)f=Math.max(f,b,u.depth+.25*c.xHeight),$=buildCommon.makeVList({positionType:"shift",positionData:-f,children:[{type:"elem",elem:u,marginRight:N}]},r);else throw new Error("supsub must have either sup or sub.");var R=getTypeOfDomTree(l,"right")||"mord";return buildCommon.makeSpan([R],[l,buildCommon.makeSpan(["msupsub"],[$])],r)},mathmlBuilder(t,r){var a=!1,n,s;t.base&&t.base.type==="horizBrace"&&(s=!!t.sup,s===t.base.isOver&&(a=!0,n=t.base.isOver)),t.base&&(t.base.type==="op"||t.base.type==="operatorname")&&(t.base.parentIsSupSub=!0);var o=[buildGroup(t.base,r)];t.sub&&o.push(buildGroup(t.sub,r)),t.sup&&o.push(buildGroup(t.sup,r));var l;if(a)l=n?"mover":"munder";else if(t.sub)if(t.sup){var c=t.base;c&&c.type==="op"&&c.limits&&r.style===Style$1.DISPLAY||c&&c.type==="operatorname"&&c.alwaysHandleSupSub&&(r.style===Style$1.DISPLAY||c.limits)?l="munderover":l="msubsup"}else{var h=t.base;h&&h.type==="op"&&h.limits&&(r.style===Style$1.DISPLAY||h.alwaysHandleSupSub)||h&&h.type==="operatorname"&&h.alwaysHandleSupSub&&(h.limits||r.style===Style$1.DISPLAY)?l="munder":l="msub"}else{var u=t.base;u&&u.type==="op"&&u.limits&&(r.style===Style$1.DISPLAY||u.alwaysHandleSupSub)||u&&u.type==="operatorname"&&u.alwaysHandleSupSub&&(u.limits||r.style===Style$1.DISPLAY)?l="mover":l="msup"}return new mathMLTree.MathNode(l,o)}});defineFunctionBuilders({type:"atom",htmlBuilder(t,r){return buildCommon.mathsym(t.text,t.mode,r,["m"+t.family])},mathmlBuilder(t,r){var a=new mathMLTree.MathNode("mo",[makeText(t.text,t.mode)]);if(t.family==="bin"){var n=getVariant(t,r);n==="bold-italic"&&a.setAttribute("mathvariant",n)}else t.family==="punct"?a.setAttribute("separator","true"):(t.family==="open"||t.family==="close")&&a.setAttribute("stretchy","false");return a}});var defaultVariant={mi:"italic",mn:"normal",mtext:"normal"};defineFunctionBuilders({type:"mathord",htmlBuilder(t,r){return buildCommon.makeOrd(t,r,"mathord")},mathmlBuilder(t,r){var a=new mathMLTree.MathNode("mi",[makeText(t.text,t.mode,r)]),n=getVariant(t,r)||"italic";return n!==defaultVariant[a.type]&&a.setAttribute("mathvariant",n),a}});defineFunctionBuilders({type:"textord",htmlBuilder(t,r){return buildCommon.makeOrd(t,r,"textord")},mathmlBuilder(t,r){var a=makeText(t.text,t.mode,r),n=getVariant(t,r)||"normal",s;return t.mode==="text"?s=new mathMLTree.MathNode("mtext",[a]):/[0-9]/.test(t.text)?s=new mathMLTree.MathNode("mn",[a]):t.text==="\\prime"?s=new mathMLTree.MathNode("mo",[a]):s=new mathMLTree.MathNode("mi",[a]),n!==defaultVariant[s.type]&&s.setAttribute("mathvariant",n),s}});var cssSpace={"\\nobreak":"nobreak","\\allowbreak":"allowbreak"},regularSpace={" ":{},"\\ ":{},"~":{className:"nobreak"},"\\space":{},"\\nobreakspace":{className:"nobreak"}};defineFunctionBuilders({type:"spacing",htmlBuilder(t,r){if(regularSpace.hasOwnProperty(t.text)){var a=regularSpace[t.text].className||"";if(t.mode==="text"){var n=buildCommon.makeOrd(t,r,"textord");return n.classes.push(a),n}else return buildCommon.makeSpan(["mspace",a],[buildCommon.mathsym(t.text,t.mode,r)],r)}else{if(cssSpace.hasOwnProperty(t.text))return buildCommon.makeSpan(["mspace",cssSpace[t.text]],[],r);throw new ParseError('Unknown type of space "'+t.text+'"')}},mathmlBuilder(t,r){var a;if(regularSpace.hasOwnProperty(t.text))a=new mathMLTree.MathNode("mtext",[new mathMLTree.TextNode("")]);else{if(cssSpace.hasOwnProperty(t.text))return new mathMLTree.MathNode("mspace");throw new ParseError('Unknown type of space "'+t.text+'"')}return a}});var pad=()=>{var t=new mathMLTree.MathNode("mtd",[]);return t.setAttribute("width","50%"),t};defineFunctionBuilders({type:"tag",mathmlBuilder(t,r){var a=new mathMLTree.MathNode("mtable",[new mathMLTree.MathNode("mtr",[pad(),new mathMLTree.MathNode("mtd",[buildExpressionRow(t.body,r)]),pad(),new mathMLTree.MathNode("mtd",[buildExpressionRow(t.tag,r)])])]);return a.setAttribute("width","100%"),a}});var textFontFamilies={"\\text":void 0,"\\textrm":"textrm","\\textsf":"textsf","\\texttt":"texttt","\\textnormal":"textrm"},textFontWeights={"\\textbf":"textbf","\\textmd":"textmd"},textFontShapes={"\\textit":"textit","\\textup":"textup"},optionsWithFont=(t,r)=>{var a=t.font;if(a){if(textFontFamilies[a])return r.withTextFontFamily(textFontFamilies[a]);if(textFontWeights[a])return r.withTextFontWeight(textFontWeights[a]);if(a==="\\emph")return r.fontShape==="textit"?r.withTextFontShape("textup"):r.withTextFontShape("textit")}else return r;return r.withTextFontShape(textFontShapes[a])};defineFunction({type:"text",names:["\\text","\\textrm","\\textsf","\\texttt","\\textnormal","\\textbf","\\textmd","\\textit","\\textup","\\emph"],props:{numArgs:1,argTypes:["text"],allowedInArgument:!0,allowedInText:!0},handler(t,r){var{parser:a,funcName:n}=t,s=r[0];return{type:"text",mode:a.mode,body:ordargument(s),font:n}},htmlBuilder(t,r){var a=optionsWithFont(t,r),n=buildExpression$1(t.body,a,!0);return buildCommon.makeSpan(["mord","text"],n,a)},mathmlBuilder(t,r){var a=optionsWithFont(t,r);return buildExpressionRow(t.body,a)}});defineFunction({type:"underline",names:["\\underline"],props:{numArgs:1,allowedInText:!0},handler(t,r){var{parser:a}=t;return{type:"underline",mode:a.mode,body:r[0]}},htmlBuilder(t,r){var a=buildGroup$1(t.body,r),n=buildCommon.makeLineSpan("underline-line",r),s=r.fontMetrics().defaultRuleThickness,o=buildCommon.makeVList({positionType:"top",positionData:a.height,children:[{type:"kern",size:s},{type:"elem",elem:n},{type:"kern",size:3*s},{type:"elem",elem:a}]},r);return buildCommon.makeSpan(["mord","underline"],[o],r)},mathmlBuilder(t,r){var a=new mathMLTree.MathNode("mo",[new mathMLTree.TextNode("")]);a.setAttribute("stretchy","true");var n=new mathMLTree.MathNode("munder",[buildGroup(t.body,r),a]);return n.setAttribute("accentunder","true"),n}});defineFunction({type:"vcenter",names:["\\vcenter"],props:{numArgs:1,argTypes:["original"],allowedInText:!1},handler(t,r){var{parser:a}=t;return{type:"vcenter",mode:a.mode,body:r[0]}},htmlBuilder(t,r){var a=buildGroup$1(t.body,r),n=r.fontMetrics().axisHeight,s=.5*(a.height-n-(a.depth+n));return buildCommon.makeVList({positionType:"shift",positionData:s,children:[{type:"elem",elem:a}]},r)},mathmlBuilder(t,r){return new mathMLTree.MathNode("mpadded",[buildGroup(t.body,r)],["vcenter"])}});defineFunction({type:"verb",names:["\\verb"],props:{numArgs:0,allowedInText:!0},handler(t,r,a){throw new ParseError("\\verb ended by end of line instead of matching delimiter")},htmlBuilder(t,r){for(var a=makeVerb(t),n=[],s=r.havingStyle(r.style.text()),o=0;o<a.length;o++){var l=a[o];l==="~"&&(l="\\textasciitilde"),n.push(buildCommon.makeSymbol(l,"Typewriter-Regular",t.mode,s,["mord","texttt"]))}return buildCommon.makeSpan(["mord","text"].concat(s.sizingClasses(r)),buildCommon.tryCombineChars(n),s)},mathmlBuilder(t,r){var a=new mathMLTree.TextNode(makeVerb(t)),n=new mathMLTree.MathNode("mtext",[a]);return n.setAttribute("mathvariant","monospace"),n}});var makeVerb=t=>t.body.replace(/ /g,t.star?"":""),functions=_functions,spaceRegexString=`[ \r
	]`,controlWordRegexString="\\\\[a-zA-Z@]+",controlSymbolRegexString="\\\\[^\uD800-\uDFFF]",controlWordWhitespaceRegexString="("+controlWordRegexString+")"+spaceRegexString+"*",controlSpaceRegexString=`\\\\(
|[ \r	]+
?)[ \r	]*`,combiningDiacriticalMarkString="[-]",combiningDiacriticalMarksEndRegex=new RegExp(combiningDiacriticalMarkString+"+$"),tokenRegexString="("+spaceRegexString+"+)|"+(controlSpaceRegexString+"|")+"([!-\\[\\]---]"+(combiningDiacriticalMarkString+"*")+"|[\uD800-\uDBFF][\uDC00-\uDFFF]"+(combiningDiacriticalMarkString+"*")+"|\\\\verb\\*([^]).*?\\4|\\\\verb([^*a-zA-Z]).*?\\5"+("|"+controlWordWhitespaceRegexString)+("|"+controlSymbolRegexString+")");class Lexer{constructor(r,a){this.input=void 0,this.settings=void 0,this.tokenRegex=void 0,this.catcodes=void 0,this.input=r,this.settings=a,this.tokenRegex=new RegExp(tokenRegexString,"g"),this.catcodes={"%":14,"~":13}}setCatcode(r,a){this.catcodes[r]=a}lex(){var r=this.input,a=this.tokenRegex.lastIndex;if(a===r.length)return new Token("EOF",new SourceLocation(this,a,a));var n=this.tokenRegex.exec(r);if(n===null||n.index!==a)throw new ParseError("Unexpected character: '"+r[a]+"'",new Token(r[a],new SourceLocation(this,a,a+1)));var s=n[6]||n[3]||(n[2]?"\\ ":" ");if(this.catcodes[s]===14){var o=r.indexOf(`
`,this.tokenRegex.lastIndex);return o===-1?(this.tokenRegex.lastIndex=r.length,this.settings.reportNonstrict("commentAtEnd","% comment has no terminating newline; LaTeX would fail because of commenting the end of math mode (e.g. $)")):this.tokenRegex.lastIndex=o+1,this.lex()}return new Token(s,new SourceLocation(this,a,this.tokenRegex.lastIndex))}}class Namespace{constructor(r,a){r===void 0&&(r={}),a===void 0&&(a={}),this.current=void 0,this.builtins=void 0,this.undefStack=void 0,this.current=a,this.builtins=r,this.undefStack=[]}beginGroup(){this.undefStack.push({})}endGroup(){if(this.undefStack.length===0)throw new ParseError("Unbalanced namespace destruction: attempt to pop global namespace; please report this as a bug");var r=this.undefStack.pop();for(var a in r)r.hasOwnProperty(a)&&(r[a]==null?delete this.current[a]:this.current[a]=r[a])}endGroups(){for(;this.undefStack.length>0;)this.endGroup()}has(r){return this.current.hasOwnProperty(r)||this.builtins.hasOwnProperty(r)}get(r){return this.current.hasOwnProperty(r)?this.current[r]:this.builtins[r]}set(r,a,n){if(n===void 0&&(n=!1),n){for(var s=0;s<this.undefStack.length;s++)delete this.undefStack[s][r];this.undefStack.length>0&&(this.undefStack[this.undefStack.length-1][r]=a)}else{var o=this.undefStack[this.undefStack.length-1];o&&!o.hasOwnProperty(r)&&(o[r]=this.current[r])}a==null?delete this.current[r]:this.current[r]=a}}var macros=_macros;defineMacro("\\noexpand",function(t){var r=t.popToken();return t.isExpandable(r.text)&&(r.noexpand=!0,r.treatAsRelax=!0),{tokens:[r],numArgs:0}});defineMacro("\\expandafter",function(t){var r=t.popToken();return t.expandOnce(!0),{tokens:[r],numArgs:0}});defineMacro("\\@firstoftwo",function(t){var r=t.consumeArgs(2);return{tokens:r[0],numArgs:0}});defineMacro("\\@secondoftwo",function(t){var r=t.consumeArgs(2);return{tokens:r[1],numArgs:0}});defineMacro("\\@ifnextchar",function(t){var r=t.consumeArgs(3);t.consumeSpaces();var a=t.future();return r[0].length===1&&r[0][0].text===a.text?{tokens:r[1],numArgs:0}:{tokens:r[2],numArgs:0}});defineMacro("\\@ifstar","\\@ifnextchar *{\\@firstoftwo{#1}}");defineMacro("\\TextOrMath",function(t){var r=t.consumeArgs(2);return t.mode==="text"?{tokens:r[0],numArgs:0}:{tokens:r[1],numArgs:0}});var digitToNumber={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};defineMacro("\\char",function(t){var r=t.popToken(),a,n="";if(r.text==="'")a=8,r=t.popToken();else if(r.text==='"')a=16,r=t.popToken();else if(r.text==="`")if(r=t.popToken(),r.text[0]==="\\")n=r.text.charCodeAt(1);else{if(r.text==="EOF")throw new ParseError("\\char` missing argument");n=r.text.charCodeAt(0)}else a=10;if(a){if(n=digitToNumber[r.text],n==null||n>=a)throw new ParseError("Invalid base-"+a+" digit "+r.text);for(var s;(s=digitToNumber[t.future().text])!=null&&s<a;)n*=a,n+=s,t.popToken()}return"\\@char{"+n+"}"});var newcommand=(t,r,a,n)=>{var s=t.consumeArg().tokens;if(s.length!==1)throw new ParseError("\\newcommand's first argument must be a macro name");var o=s[0].text,l=t.isDefined(o);if(l&&!r)throw new ParseError("\\newcommand{"+o+"} attempting to redefine "+(o+"; use \\renewcommand"));if(!l&&!a)throw new ParseError("\\renewcommand{"+o+"} when command "+o+" does not yet exist; use \\newcommand");var u=0;if(s=t.consumeArg().tokens,s.length===1&&s[0].text==="["){for(var h="",c=t.expandNextToken();c.text!=="]"&&c.text!=="EOF";)h+=c.text,c=t.expandNextToken();if(!h.match(/^\s*[0-9]+\s*$/))throw new ParseError("Invalid number of arguments: "+h);u=parseInt(h),s=t.consumeArg().tokens}return l&&n||t.macros.set(o,{tokens:s,numArgs:u}),""};defineMacro("\\newcommand",t=>newcommand(t,!1,!0,!1));defineMacro("\\renewcommand",t=>newcommand(t,!0,!1,!1));defineMacro("\\providecommand",t=>newcommand(t,!0,!0,!0));defineMacro("\\message",t=>{var r=t.consumeArgs(1)[0];return console.log(r.reverse().map(a=>a.text).join("")),""});defineMacro("\\errmessage",t=>{var r=t.consumeArgs(1)[0];return console.error(r.reverse().map(a=>a.text).join("")),""});defineMacro("\\show",t=>{var r=t.popToken(),a=r.text;return console.log(r,t.macros.get(a),functions[a],symbols.math[a],symbols.text[a]),""});defineMacro("\\bgroup","{");defineMacro("\\egroup","}");defineMacro("~","\\nobreakspace");defineMacro("\\lq","`");defineMacro("\\rq","'");defineMacro("\\aa","\\r a");defineMacro("\\AA","\\r A");defineMacro("\\textcopyright","\\html@mathml{\\textcircled{c}}{\\char`}");defineMacro("\\copyright","\\TextOrMath{\\textcopyright}{\\text{\\textcopyright}}");defineMacro("\\textregistered","\\html@mathml{\\textcircled{\\scriptsize R}}{\\char`}");defineMacro("","\\mathscr{B}");defineMacro("","\\mathscr{E}");defineMacro("","\\mathscr{F}");defineMacro("","\\mathscr{H}");defineMacro("","\\mathscr{I}");defineMacro("","\\mathscr{L}");defineMacro("","\\mathscr{M}");defineMacro("","\\mathscr{R}");defineMacro("","\\mathfrak{C}");defineMacro("","\\mathfrak{H}");defineMacro("","\\mathfrak{Z}");defineMacro("\\Bbbk","\\Bbb{k}");defineMacro("","\\cdotp");defineMacro("\\llap","\\mathllap{\\textrm{#1}}");defineMacro("\\rlap","\\mathrlap{\\textrm{#1}}");defineMacro("\\clap","\\mathclap{\\textrm{#1}}");defineMacro("\\mathstrut","\\vphantom{(}");defineMacro("\\underbar","\\underline{\\text{#1}}");defineMacro("\\not",'\\html@mathml{\\mathrel{\\mathrlap\\@not}}{\\char"338}');defineMacro("\\neq","\\html@mathml{\\mathrel{\\not=}}{\\mathrel{\\char`}}");defineMacro("\\ne","\\neq");defineMacro("","\\neq");defineMacro("\\notin","\\html@mathml{\\mathrel{{\\in}\\mathllap{/\\mskip1mu}}}{\\mathrel{\\char`}}");defineMacro("","\\notin");defineMacro("","\\html@mathml{\\mathrel{=\\kern{-1em}\\raisebox{0.4em}{$\\scriptsize\\frown$}}}{\\mathrel{\\char`}}");defineMacro("","\\html@mathml{\\stackrel{\\tiny\\wedge}{=}}{\\mathrel{\\char`}}");defineMacro("","\\html@mathml{\\stackrel{\\tiny\\vee}{=}}{\\mathrel{\\char`}}");defineMacro("","\\html@mathml{\\stackrel{\\scriptsize\\star}{=}}{\\mathrel{\\char`}}");defineMacro("","\\html@mathml{\\stackrel{\\tiny\\mathrm{def}}{=}}{\\mathrel{\\char`}}");defineMacro("","\\html@mathml{\\stackrel{\\tiny\\mathrm{m}}{=}}{\\mathrel{\\char`}}");defineMacro("","\\html@mathml{\\stackrel{\\tiny?}{=}}{\\mathrel{\\char`}}");defineMacro("","\\perp");defineMacro("","\\mathclose{!\\mkern-0.8mu!}");defineMacro("","\\notni");defineMacro("","\\ulcorner");defineMacro("","\\urcorner");defineMacro("","\\llcorner");defineMacro("","\\lrcorner");defineMacro("","\\copyright");defineMacro("","\\textregistered");defineMacro("","\\textregistered");defineMacro("\\ulcorner",'\\html@mathml{\\@ulcorner}{\\mathop{\\char"231c}}');defineMacro("\\urcorner",'\\html@mathml{\\@urcorner}{\\mathop{\\char"231d}}');defineMacro("\\llcorner",'\\html@mathml{\\@llcorner}{\\mathop{\\char"231e}}');defineMacro("\\lrcorner",'\\html@mathml{\\@lrcorner}{\\mathop{\\char"231f}}');defineMacro("\\vdots","{\\varvdots\\rule{0pt}{15pt}}");defineMacro("","\\vdots");defineMacro("\\varGamma","\\mathit{\\Gamma}");defineMacro("\\varDelta","\\mathit{\\Delta}");defineMacro("\\varTheta","\\mathit{\\Theta}");defineMacro("\\varLambda","\\mathit{\\Lambda}");defineMacro("\\varXi","\\mathit{\\Xi}");defineMacro("\\varPi","\\mathit{\\Pi}");defineMacro("\\varSigma","\\mathit{\\Sigma}");defineMacro("\\varUpsilon","\\mathit{\\Upsilon}");defineMacro("\\varPhi","\\mathit{\\Phi}");defineMacro("\\varPsi","\\mathit{\\Psi}");defineMacro("\\varOmega","\\mathit{\\Omega}");defineMacro("\\substack","\\begin{subarray}{c}#1\\end{subarray}");defineMacro("\\colon","\\nobreak\\mskip2mu\\mathpunct{}\\mathchoice{\\mkern-3mu}{\\mkern-3mu}{}{}{:}\\mskip6mu\\relax");defineMacro("\\boxed","\\fbox{$\\displaystyle{#1}$}");defineMacro("\\iff","\\DOTSB\\;\\Longleftrightarrow\\;");defineMacro("\\implies","\\DOTSB\\;\\Longrightarrow\\;");defineMacro("\\impliedby","\\DOTSB\\;\\Longleftarrow\\;");defineMacro("\\dddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ...}}{#1}}");defineMacro("\\ddddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ....}}{#1}}");var dotsByToken={",":"\\dotsc","\\not":"\\dotsb","+":"\\dotsb","=":"\\dotsb","<":"\\dotsb",">":"\\dotsb","-":"\\dotsb","*":"\\dotsb",":":"\\dotsb","\\DOTSB":"\\dotsb","\\coprod":"\\dotsb","\\bigvee":"\\dotsb","\\bigwedge":"\\dotsb","\\biguplus":"\\dotsb","\\bigcap":"\\dotsb","\\bigcup":"\\dotsb","\\prod":"\\dotsb","\\sum":"\\dotsb","\\bigotimes":"\\dotsb","\\bigoplus":"\\dotsb","\\bigodot":"\\dotsb","\\bigsqcup":"\\dotsb","\\And":"\\dotsb","\\longrightarrow":"\\dotsb","\\Longrightarrow":"\\dotsb","\\longleftarrow":"\\dotsb","\\Longleftarrow":"\\dotsb","\\longleftrightarrow":"\\dotsb","\\Longleftrightarrow":"\\dotsb","\\mapsto":"\\dotsb","\\longmapsto":"\\dotsb","\\hookrightarrow":"\\dotsb","\\doteq":"\\dotsb","\\mathbin":"\\dotsb","\\mathrel":"\\dotsb","\\relbar":"\\dotsb","\\Relbar":"\\dotsb","\\xrightarrow":"\\dotsb","\\xleftarrow":"\\dotsb","\\DOTSI":"\\dotsi","\\int":"\\dotsi","\\oint":"\\dotsi","\\iint":"\\dotsi","\\iiint":"\\dotsi","\\iiiint":"\\dotsi","\\idotsint":"\\dotsi","\\DOTSX":"\\dotsx"};defineMacro("\\dots",function(t){var r="\\dotso",a=t.expandAfterFuture().text;return a in dotsByToken?r=dotsByToken[a]:(a.slice(0,4)==="\\not"||a in symbols.math&&["bin","rel"].includes(symbols.math[a].group))&&(r="\\dotsb"),r});var spaceAfterDots={")":!0,"]":!0,"\\rbrack":!0,"\\}":!0,"\\rbrace":!0,"\\rangle":!0,"\\rceil":!0,"\\rfloor":!0,"\\rgroup":!0,"\\rmoustache":!0,"\\right":!0,"\\bigr":!0,"\\biggr":!0,"\\Bigr":!0,"\\Biggr":!0,$:!0,";":!0,".":!0,",":!0};defineMacro("\\dotso",function(t){var r=t.future().text;return r in spaceAfterDots?"\\ldots\\,":"\\ldots"});defineMacro("\\dotsc",function(t){var r=t.future().text;return r in spaceAfterDots&&r!==","?"\\ldots\\,":"\\ldots"});defineMacro("\\cdots",function(t){var r=t.future().text;return r in spaceAfterDots?"\\@cdots\\,":"\\@cdots"});defineMacro("\\dotsb","\\cdots");defineMacro("\\dotsm","\\cdots");defineMacro("\\dotsi","\\!\\cdots");defineMacro("\\dotsx","\\ldots\\,");defineMacro("\\DOTSI","\\relax");defineMacro("\\DOTSB","\\relax");defineMacro("\\DOTSX","\\relax");defineMacro("\\tmspace","\\TextOrMath{\\kern#1#3}{\\mskip#1#2}\\relax");defineMacro("\\,","\\tmspace+{3mu}{.1667em}");defineMacro("\\thinspace","\\,");defineMacro("\\>","\\mskip{4mu}");defineMacro("\\:","\\tmspace+{4mu}{.2222em}");defineMacro("\\medspace","\\:");defineMacro("\\;","\\tmspace+{5mu}{.2777em}");defineMacro("\\thickspace","\\;");defineMacro("\\!","\\tmspace-{3mu}{.1667em}");defineMacro("\\negthinspace","\\!");defineMacro("\\negmedspace","\\tmspace-{4mu}{.2222em}");defineMacro("\\negthickspace","\\tmspace-{5mu}{.277em}");defineMacro("\\enspace","\\kern.5em ");defineMacro("\\enskip","\\hskip.5em\\relax");defineMacro("\\quad","\\hskip1em\\relax");defineMacro("\\qquad","\\hskip2em\\relax");defineMacro("\\tag","\\@ifstar\\tag@literal\\tag@paren");defineMacro("\\tag@paren","\\tag@literal{({#1})}");defineMacro("\\tag@literal",t=>{if(t.macros.get("\\df@tag"))throw new ParseError("Multiple \\tag");return"\\gdef\\df@tag{\\text{#1}}"});defineMacro("\\bmod","\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}\\mathbin{\\rm mod}\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}");defineMacro("\\pod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern8mu}{\\mkern8mu}{\\mkern8mu}(#1)");defineMacro("\\pmod","\\pod{{\\rm mod}\\mkern6mu#1}");defineMacro("\\mod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern12mu}{\\mkern12mu}{\\mkern12mu}{\\rm mod}\\,\\,#1");defineMacro("\\newline","\\\\\\relax");defineMacro("\\TeX","\\textrm{\\html@mathml{T\\kern-.1667em\\raisebox{-.5ex}{E}\\kern-.125emX}{TeX}}");var latexRaiseA=makeEm(fontMetricsData["Main-Regular"][84][1]-.7*fontMetricsData["Main-Regular"][65][1]);defineMacro("\\LaTeX","\\textrm{\\html@mathml{"+("L\\kern-.36em\\raisebox{"+latexRaiseA+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{LaTeX}}");defineMacro("\\KaTeX","\\textrm{\\html@mathml{"+("K\\kern-.17em\\raisebox{"+latexRaiseA+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{KaTeX}}");defineMacro("\\hspace","\\@ifstar\\@hspacer\\@hspace");defineMacro("\\@hspace","\\hskip #1\\relax");defineMacro("\\@hspacer","\\rule{0pt}{0pt}\\hskip #1\\relax");defineMacro("\\ordinarycolon",":");defineMacro("\\vcentcolon","\\mathrel{\\mathop\\ordinarycolon}");defineMacro("\\dblcolon",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-.9mu}\\vcentcolon}}{\\mathop{\\char"2237}}');defineMacro("\\coloneqq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2254}}');defineMacro("\\Coloneqq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2237\\char"3d}}');defineMacro("\\coloneq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"3a\\char"2212}}');defineMacro("\\Coloneq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"2237\\char"2212}}');defineMacro("\\eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2255}}');defineMacro("\\Eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"3d\\char"2237}}');defineMacro("\\eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2239}}');defineMacro("\\Eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"2212\\char"2237}}');defineMacro("\\colonapprox",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"3a\\char"2248}}');defineMacro("\\Colonapprox",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"2237\\char"2248}}');defineMacro("\\colonsim",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"3a\\char"223c}}');defineMacro("\\Colonsim",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"2237\\char"223c}}');defineMacro("","\\dblcolon");defineMacro("","\\eqcolon");defineMacro("","\\coloneqq");defineMacro("","\\eqqcolon");defineMacro("","\\Coloneqq");defineMacro("\\ratio","\\vcentcolon");defineMacro("\\coloncolon","\\dblcolon");defineMacro("\\colonequals","\\coloneqq");defineMacro("\\coloncolonequals","\\Coloneqq");defineMacro("\\equalscolon","\\eqqcolon");defineMacro("\\equalscoloncolon","\\Eqqcolon");defineMacro("\\colonminus","\\coloneq");defineMacro("\\coloncolonminus","\\Coloneq");defineMacro("\\minuscolon","\\eqcolon");defineMacro("\\minuscoloncolon","\\Eqcolon");defineMacro("\\coloncolonapprox","\\Colonapprox");defineMacro("\\coloncolonsim","\\Colonsim");defineMacro("\\simcolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\vcentcolon}");defineMacro("\\simcoloncolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\dblcolon}");defineMacro("\\approxcolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\vcentcolon}");defineMacro("\\approxcoloncolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\dblcolon}");defineMacro("\\notni","\\html@mathml{\\not\\ni}{\\mathrel{\\char`}}");defineMacro("\\limsup","\\DOTSB\\operatorname*{lim\\,sup}");defineMacro("\\liminf","\\DOTSB\\operatorname*{lim\\,inf}");defineMacro("\\injlim","\\DOTSB\\operatorname*{inj\\,lim}");defineMacro("\\projlim","\\DOTSB\\operatorname*{proj\\,lim}");defineMacro("\\varlimsup","\\DOTSB\\operatorname*{\\overline{lim}}");defineMacro("\\varliminf","\\DOTSB\\operatorname*{\\underline{lim}}");defineMacro("\\varinjlim","\\DOTSB\\operatorname*{\\underrightarrow{lim}}");defineMacro("\\varprojlim","\\DOTSB\\operatorname*{\\underleftarrow{lim}}");defineMacro("\\gvertneqq","\\html@mathml{\\@gvertneqq}{}");defineMacro("\\lvertneqq","\\html@mathml{\\@lvertneqq}{}");defineMacro("\\ngeqq","\\html@mathml{\\@ngeqq}{}");defineMacro("\\ngeqslant","\\html@mathml{\\@ngeqslant}{}");defineMacro("\\nleqq","\\html@mathml{\\@nleqq}{}");defineMacro("\\nleqslant","\\html@mathml{\\@nleqslant}{}");defineMacro("\\nshortmid","\\html@mathml{\\@nshortmid}{}");defineMacro("\\nshortparallel","\\html@mathml{\\@nshortparallel}{}");defineMacro("\\nsubseteqq","\\html@mathml{\\@nsubseteqq}{}");defineMacro("\\nsupseteqq","\\html@mathml{\\@nsupseteqq}{}");defineMacro("\\varsubsetneq","\\html@mathml{\\@varsubsetneq}{}");defineMacro("\\varsubsetneqq","\\html@mathml{\\@varsubsetneqq}{}");defineMacro("\\varsupsetneq","\\html@mathml{\\@varsupsetneq}{}");defineMacro("\\varsupsetneqq","\\html@mathml{\\@varsupsetneqq}{}");defineMacro("\\imath","\\html@mathml{\\@imath}{}");defineMacro("\\jmath","\\html@mathml{\\@jmath}{}");defineMacro("\\llbracket","\\html@mathml{\\mathopen{[\\mkern-3.2mu[}}{\\mathopen{\\char`}}");defineMacro("\\rrbracket","\\html@mathml{\\mathclose{]\\mkern-3.2mu]}}{\\mathclose{\\char`}}");defineMacro("","\\llbracket");defineMacro("","\\rrbracket");defineMacro("\\lBrace","\\html@mathml{\\mathopen{\\{\\mkern-3.2mu[}}{\\mathopen{\\char`}}");defineMacro("\\rBrace","\\html@mathml{\\mathclose{]\\mkern-3.2mu\\}}}{\\mathclose{\\char`}}");defineMacro("","\\lBrace");defineMacro("","\\rBrace");defineMacro("\\minuso","\\mathbin{\\html@mathml{{\\mathrlap{\\mathchoice{\\kern{0.145em}}{\\kern{0.145em}}{\\kern{0.1015em}}{\\kern{0.0725em}}\\circ}{-}}}{\\char`}}");defineMacro("","\\minuso");defineMacro("\\darr","\\downarrow");defineMacro("\\dArr","\\Downarrow");defineMacro("\\Darr","\\Downarrow");defineMacro("\\lang","\\langle");defineMacro("\\rang","\\rangle");defineMacro("\\uarr","\\uparrow");defineMacro("\\uArr","\\Uparrow");defineMacro("\\Uarr","\\Uparrow");defineMacro("\\N","\\mathbb{N}");defineMacro("\\R","\\mathbb{R}");defineMacro("\\Z","\\mathbb{Z}");defineMacro("\\alef","\\aleph");defineMacro("\\alefsym","\\aleph");defineMacro("\\Alpha","\\mathrm{A}");defineMacro("\\Beta","\\mathrm{B}");defineMacro("\\bull","\\bullet");defineMacro("\\Chi","\\mathrm{X}");defineMacro("\\clubs","\\clubsuit");defineMacro("\\cnums","\\mathbb{C}");defineMacro("\\Complex","\\mathbb{C}");defineMacro("\\Dagger","\\ddagger");defineMacro("\\diamonds","\\diamondsuit");defineMacro("\\empty","\\emptyset");defineMacro("\\Epsilon","\\mathrm{E}");defineMacro("\\Eta","\\mathrm{H}");defineMacro("\\exist","\\exists");defineMacro("\\harr","\\leftrightarrow");defineMacro("\\hArr","\\Leftrightarrow");defineMacro("\\Harr","\\Leftrightarrow");defineMacro("\\hearts","\\heartsuit");defineMacro("\\image","\\Im");defineMacro("\\infin","\\infty");defineMacro("\\Iota","\\mathrm{I}");defineMacro("\\isin","\\in");defineMacro("\\Kappa","\\mathrm{K}");defineMacro("\\larr","\\leftarrow");defineMacro("\\lArr","\\Leftarrow");defineMacro("\\Larr","\\Leftarrow");defineMacro("\\lrarr","\\leftrightarrow");defineMacro("\\lrArr","\\Leftrightarrow");defineMacro("\\Lrarr","\\Leftrightarrow");defineMacro("\\Mu","\\mathrm{M}");defineMacro("\\natnums","\\mathbb{N}");defineMacro("\\Nu","\\mathrm{N}");defineMacro("\\Omicron","\\mathrm{O}");defineMacro("\\plusmn","\\pm");defineMacro("\\rarr","\\rightarrow");defineMacro("\\rArr","\\Rightarrow");defineMacro("\\Rarr","\\Rightarrow");defineMacro("\\real","\\Re");defineMacro("\\reals","\\mathbb{R}");defineMacro("\\Reals","\\mathbb{R}");defineMacro("\\Rho","\\mathrm{P}");defineMacro("\\sdot","\\cdot");defineMacro("\\sect","\\S");defineMacro("\\spades","\\spadesuit");defineMacro("\\sub","\\subset");defineMacro("\\sube","\\subseteq");defineMacro("\\supe","\\supseteq");defineMacro("\\Tau","\\mathrm{T}");defineMacro("\\thetasym","\\vartheta");defineMacro("\\weierp","\\wp");defineMacro("\\Zeta","\\mathrm{Z}");defineMacro("\\argmin","\\DOTSB\\operatorname*{arg\\,min}");defineMacro("\\argmax","\\DOTSB\\operatorname*{arg\\,max}");defineMacro("\\plim","\\DOTSB\\mathop{\\operatorname{plim}}\\limits");defineMacro("\\bra","\\mathinner{\\langle{#1}|}");defineMacro("\\ket","\\mathinner{|{#1}\\rangle}");defineMacro("\\braket","\\mathinner{\\langle{#1}\\rangle}");defineMacro("\\Bra","\\left\\langle#1\\right|");defineMacro("\\Ket","\\left|#1\\right\\rangle");var braketHelper=t=>r=>{var a=r.consumeArg().tokens,n=r.consumeArg().tokens,s=r.consumeArg().tokens,o=r.consumeArg().tokens,l=r.macros.get("|"),u=r.macros.get("\\|");r.macros.beginGroup();var h=d=>p=>{t&&(p.macros.set("|",l),s.length&&p.macros.set("\\|",u));var v=d;if(!d&&s.length){var y=p.future();y.text==="|"&&(p.popToken(),v=!0)}return{tokens:v?s:n,numArgs:0}};r.macros.set("|",h(!1)),s.length&&r.macros.set("\\|",h(!0));var c=r.consumeArg().tokens,f=r.expandTokens([...o,...c,...a]);return r.macros.endGroup(),{tokens:f.reverse(),numArgs:0}};defineMacro("\\bra@ket",braketHelper(!1));defineMacro("\\bra@set",braketHelper(!0));defineMacro("\\Braket","\\bra@ket{\\left\\langle}{\\,\\middle\\vert\\,}{\\,\\middle\\vert\\,}{\\right\\rangle}");defineMacro("\\Set","\\bra@set{\\left\\{\\:}{\\;\\middle\\vert\\;}{\\;\\middle\\Vert\\;}{\\:\\right\\}}");defineMacro("\\set","\\bra@set{\\{\\,}{\\mid}{}{\\,\\}}");defineMacro("\\angln","{\\angl n}");defineMacro("\\blue","\\textcolor{##6495ed}{#1}");defineMacro("\\orange","\\textcolor{##ffa500}{#1}");defineMacro("\\pink","\\textcolor{##ff00af}{#1}");defineMacro("\\red","\\textcolor{##df0030}{#1}");defineMacro("\\green","\\textcolor{##28ae7b}{#1}");defineMacro("\\gray","\\textcolor{gray}{#1}");defineMacro("\\purple","\\textcolor{##9d38bd}{#1}");defineMacro("\\blueA","\\textcolor{##ccfaff}{#1}");defineMacro("\\blueB","\\textcolor{##80f6ff}{#1}");defineMacro("\\blueC","\\textcolor{##63d9ea}{#1}");defineMacro("\\blueD","\\textcolor{##11accd}{#1}");defineMacro("\\blueE","\\textcolor{##0c7f99}{#1}");defineMacro("\\tealA","\\textcolor{##94fff5}{#1}");defineMacro("\\tealB","\\textcolor{##26edd5}{#1}");defineMacro("\\tealC","\\textcolor{##01d1c1}{#1}");defineMacro("\\tealD","\\textcolor{##01a995}{#1}");defineMacro("\\tealE","\\textcolor{##208170}{#1}");defineMacro("\\greenA","\\textcolor{##b6ffb0}{#1}");defineMacro("\\greenB","\\textcolor{##8af281}{#1}");defineMacro("\\greenC","\\textcolor{##74cf70}{#1}");defineMacro("\\greenD","\\textcolor{##1fab54}{#1}");defineMacro("\\greenE","\\textcolor{##0d923f}{#1}");defineMacro("\\goldA","\\textcolor{##ffd0a9}{#1}");defineMacro("\\goldB","\\textcolor{##ffbb71}{#1}");defineMacro("\\goldC","\\textcolor{##ff9c39}{#1}");defineMacro("\\goldD","\\textcolor{##e07d10}{#1}");defineMacro("\\goldE","\\textcolor{##a75a05}{#1}");defineMacro("\\redA","\\textcolor{##fca9a9}{#1}");defineMacro("\\redB","\\textcolor{##ff8482}{#1}");defineMacro("\\redC","\\textcolor{##f9685d}{#1}");defineMacro("\\redD","\\textcolor{##e84d39}{#1}");defineMacro("\\redE","\\textcolor{##bc2612}{#1}");defineMacro("\\maroonA","\\textcolor{##ffbde0}{#1}");defineMacro("\\maroonB","\\textcolor{##ff92c6}{#1}");defineMacro("\\maroonC","\\textcolor{##ed5fa6}{#1}");defineMacro("\\maroonD","\\textcolor{##ca337c}{#1}");defineMacro("\\maroonE","\\textcolor{##9e034e}{#1}");defineMacro("\\purpleA","\\textcolor{##ddd7ff}{#1}");defineMacro("\\purpleB","\\textcolor{##c6b9fc}{#1}");defineMacro("\\purpleC","\\textcolor{##aa87ff}{#1}");defineMacro("\\purpleD","\\textcolor{##7854ab}{#1}");defineMacro("\\purpleE","\\textcolor{##543b78}{#1}");defineMacro("\\mintA","\\textcolor{##f5f9e8}{#1}");defineMacro("\\mintB","\\textcolor{##edf2df}{#1}");defineMacro("\\mintC","\\textcolor{##e0e5cc}{#1}");defineMacro("\\grayA","\\textcolor{##f6f7f7}{#1}");defineMacro("\\grayB","\\textcolor{##f0f1f2}{#1}");defineMacro("\\grayC","\\textcolor{##e3e5e6}{#1}");defineMacro("\\grayD","\\textcolor{##d6d8da}{#1}");defineMacro("\\grayE","\\textcolor{##babec2}{#1}");defineMacro("\\grayF","\\textcolor{##888d93}{#1}");defineMacro("\\grayG","\\textcolor{##626569}{#1}");defineMacro("\\grayH","\\textcolor{##3b3e40}{#1}");defineMacro("\\grayI","\\textcolor{##21242c}{#1}");defineMacro("\\kaBlue","\\textcolor{##314453}{#1}");defineMacro("\\kaGreen","\\textcolor{##71B307}{#1}");var implicitCommands={"^":!0,_:!0,"\\limits":!0,"\\nolimits":!0};class MacroExpander{constructor(r,a,n){this.settings=void 0,this.expansionCount=void 0,this.lexer=void 0,this.macros=void 0,this.stack=void 0,this.mode=void 0,this.settings=a,this.expansionCount=0,this.feed(r),this.macros=new Namespace(macros,a.macros),this.mode=n,this.stack=[]}feed(r){this.lexer=new Lexer(r,this.settings)}switchMode(r){this.mode=r}beginGroup(){this.macros.beginGroup()}endGroup(){this.macros.endGroup()}endGroups(){this.macros.endGroups()}future(){return this.stack.length===0&&this.pushToken(this.lexer.lex()),this.stack[this.stack.length-1]}popToken(){return this.future(),this.stack.pop()}pushToken(r){this.stack.push(r)}pushTokens(r){this.stack.push(...r)}scanArgument(r){var a,n,s;if(r){if(this.consumeSpaces(),this.future().text!=="[")return null;a=this.popToken(),{tokens:s,end:n}=this.consumeArg(["]"])}else({tokens:s,start:a,end:n}=this.consumeArg());return this.pushToken(new Token("EOF",n.loc)),this.pushTokens(s),new Token("",SourceLocation.range(a,n))}consumeSpaces(){for(;;){var r=this.future();if(r.text===" ")this.stack.pop();else break}}consumeArg(r){var a=[],n=r&&r.length>0;n||this.consumeSpaces();var s=this.future(),o,l=0,u=0;do{if(o=this.popToken(),a.push(o),o.text==="{")++l;else if(o.text==="}"){if(--l,l===-1)throw new ParseError("Extra }",o)}else if(o.text==="EOF")throw new ParseError("Unexpected end of input in a macro argument, expected '"+(r&&n?r[u]:"}")+"'",o);if(r&&n)if((l===0||l===1&&r[u]==="{")&&o.text===r[u]){if(++u,u===r.length){a.splice(-u,u);break}}else u=0}while(l!==0||n);return s.text==="{"&&a[a.length-1].text==="}"&&(a.pop(),a.shift()),a.reverse(),{tokens:a,start:s,end:o}}consumeArgs(r,a){if(a){if(a.length!==r+1)throw new ParseError("The length of delimiters doesn't match the number of args!");for(var n=a[0],s=0;s<n.length;s++){var o=this.popToken();if(n[s]!==o.text)throw new ParseError("Use of the macro doesn't match its definition",o)}}for(var l=[],u=0;u<r;u++)l.push(this.consumeArg(a&&a[u+1]).tokens);return l}countExpansion(r){if(this.expansionCount+=r,this.expansionCount>this.settings.maxExpand)throw new ParseError("Too many expansions: infinite loop or need to increase maxExpand setting")}expandOnce(r){var a=this.popToken(),n=a.text,s=a.noexpand?null:this._getExpansion(n);if(s==null||r&&s.unexpandable){if(r&&s==null&&n[0]==="\\"&&!this.isDefined(n))throw new ParseError("Undefined control sequence: "+n);return this.pushToken(a),!1}this.countExpansion(1);var o=s.tokens,l=this.consumeArgs(s.numArgs,s.delimiters);if(s.numArgs){o=o.slice();for(var u=o.length-1;u>=0;--u){var h=o[u];if(h.text==="#"){if(u===0)throw new ParseError("Incomplete placeholder at end of macro body",h);if(h=o[--u],h.text==="#")o.splice(u+1,1);else if(/^[1-9]$/.test(h.text))o.splice(u,2,...l[+h.text-1]);else throw new ParseError("Not a valid argument number",h)}}}return this.pushTokens(o),o.length}expandAfterFuture(){return this.expandOnce(),this.future()}expandNextToken(){for(;;)if(this.expandOnce()===!1){var r=this.stack.pop();return r.treatAsRelax&&(r.text="\\relax"),r}throw new Error}expandMacro(r){return this.macros.has(r)?this.expandTokens([new Token(r)]):void 0}expandTokens(r){var a=[],n=this.stack.length;for(this.pushTokens(r);this.stack.length>n;)if(this.expandOnce(!0)===!1){var s=this.stack.pop();s.treatAsRelax&&(s.noexpand=!1,s.treatAsRelax=!1),a.push(s)}return this.countExpansion(a.length),a}expandMacroAsText(r){var a=this.expandMacro(r);return a&&a.map(n=>n.text).join("")}_getExpansion(r){var a=this.macros.get(r);if(a==null)return a;if(r.length===1){var n=this.lexer.catcodes[r];if(n!=null&&n!==13)return}var s=typeof a=="function"?a(this):a;if(typeof s=="string"){var o=0;if(s.indexOf("#")!==-1)for(var l=s.replace(/##/g,"");l.indexOf("#"+(o+1))!==-1;)++o;for(var u=new Lexer(s,this.settings),h=[],c=u.lex();c.text!=="EOF";)h.push(c),c=u.lex();h.reverse();var f={tokens:h,numArgs:o};return f}return s}isDefined(r){return this.macros.has(r)||functions.hasOwnProperty(r)||symbols.math.hasOwnProperty(r)||symbols.text.hasOwnProperty(r)||implicitCommands.hasOwnProperty(r)}isExpandable(r){var a=this.macros.get(r);return a!=null?typeof a=="string"||typeof a=="function"||!a.unexpandable:functions.hasOwnProperty(r)&&!functions[r].primitive}}var unicodeSubRegEx=/^[]/,uSubsAndSups=Object.freeze({"":"+","":"-","":"=","":"(","":")","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"a","":"e","":"h","":"i","":"j","":"k","":"l","":"m","":"n","":"o","":"p","":"r","":"s","":"t","":"u","":"v","":"x","":"","":"","":"","":"","":"","":"+","":"-","":"=","":"(","":")","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"A","":"B","":"D","":"E","":"G","":"H","":"I","":"J","":"K","":"L","":"M","":"N","":"O","":"P","":"R","":"T","":"U","":"V","":"W","":"a","":"b","":"c","":"d","":"e","":"f","":"g",:"h","":"i",:"j","":"k",:"l","":"m",:"n","":"o","":"p",:"r",:"s","":"t","":"u","":"v",:"w",:"x",:"y","":"z","":"","":"","":"","":"","":"","":""}),unicodeAccents={"":{text:"\\'",math:"\\acute"},"":{text:"\\`",math:"\\grave"},"":{text:'\\"',math:"\\ddot"},"":{text:"\\~",math:"\\tilde"},"":{text:"\\=",math:"\\bar"},"":{text:"\\u",math:"\\breve"},"":{text:"\\v",math:"\\check"},"":{text:"\\^",math:"\\hat"},"":{text:"\\.",math:"\\dot"},"":{text:"\\r",math:"\\mathring"},"":{text:"\\H"},"":{text:"\\c"}},unicodeSymbols={:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"b",:"c",:"c",:"c",:"c",:"c",:"c",:"d",:"d",:"d",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"f",:"g",:"g",:"g",:"g",:"g",:"g",:"g",:"h",:"h",:"h",:"h",:"h",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"j",:"j",:"k",:"k",:"k",:"l",:"l",:"l",:"m",:"m",:"n",:"n",:"n",:"n",:"n",:"n",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"p",:"p",:"r",:"r",:"r",:"r",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"t",:"t",:"t",:"t",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"v",:"w",:"w",:"w",:"w",:"w",:"w",:"x",:"x",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"z",:"z",:"z",:"z",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"B",:"C",:"C",:"C",:"C",:"C",:"C",:"D",:"D",:"D",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"F",:"G",:"G",:"G",:"G",:"G",:"G",:"G",:"H",:"H",:"H",:"H",:"H",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"J",:"K",:"K",:"K",:"L",:"L",:"L",:"M",:"M",:"N",:"N",:"N",:"N",:"N",:"N",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"P",:"P",:"R",:"R",:"R",:"R",:"S",:"S",:"S",:"S",:"S",:"S",:"S",:"T",:"T",:"T",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"V",:"W",:"W",:"W",:"W",:"W",:"X",:"X",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Z",:"Z",:"Z",:"Z",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};class Parser{constructor(r,a){this.mode=void 0,this.gullet=void 0,this.settings=void 0,this.leftrightDepth=void 0,this.nextToken=void 0,this.mode="math",this.gullet=new MacroExpander(r,a,this.mode),this.settings=a,this.leftrightDepth=0}expect(r,a){if(a===void 0&&(a=!0),this.fetch().text!==r)throw new ParseError("Expected '"+r+"', got '"+this.fetch().text+"'",this.fetch());a&&this.consume()}consume(){this.nextToken=null}fetch(){return this.nextToken==null&&(this.nextToken=this.gullet.expandNextToken()),this.nextToken}switchMode(r){this.mode=r,this.gullet.switchMode(r)}parse(){this.settings.globalGroup||this.gullet.beginGroup(),this.settings.colorIsTextColor&&this.gullet.macros.set("\\color","\\textcolor");try{var r=this.parseExpression(!1);return this.expect("EOF"),this.settings.globalGroup||this.gullet.endGroup(),r}finally{this.gullet.endGroups()}}subparse(r){var a=this.nextToken;this.consume(),this.gullet.pushToken(new Token("}")),this.gullet.pushTokens(r);var n=this.parseExpression(!1);return this.expect("}"),this.nextToken=a,n}parseExpression(r,a){for(var n=[];;){this.mode==="math"&&this.consumeSpaces();var s=this.fetch();if(Parser.endOfExpression.indexOf(s.text)!==-1||a&&s.text===a||r&&functions[s.text]&&functions[s.text].infix)break;var o=this.parseAtom(a);if(o){if(o.type==="internal")continue}else break;n.push(o)}return this.mode==="text"&&this.formLigatures(n),this.handleInfixNodes(n)}handleInfixNodes(r){for(var a=-1,n,s=0;s<r.length;s++)if(r[s].type==="infix"){if(a!==-1)throw new ParseError("only one infix operator per group",r[s].token);a=s,n=r[s].replaceWith}if(a!==-1&&n){var o,l,u=r.slice(0,a),h=r.slice(a+1);u.length===1&&u[0].type==="ordgroup"?o=u[0]:o={type:"ordgroup",mode:this.mode,body:u},h.length===1&&h[0].type==="ordgroup"?l=h[0]:l={type:"ordgroup",mode:this.mode,body:h};var c;return n==="\\\\abovefrac"?c=this.callFunction(n,[o,r[a],l],[]):c=this.callFunction(n,[o,l],[]),[c]}else return r}handleSupSubscript(r){var a=this.fetch(),n=a.text;this.consume(),this.consumeSpaces();var s;do{var o;s=this.parseGroup(r)}while(((o=s)==null?void 0:o.type)==="internal");if(!s)throw new ParseError("Expected group after '"+n+"'",a);return s}formatUnsupportedCmd(r){for(var a=[],n=0;n<r.length;n++)a.push({type:"textord",mode:"text",text:r[n]});var s={type:"text",mode:this.mode,body:a},o={type:"color",mode:this.mode,color:this.settings.errorColor,body:[s]};return o}parseAtom(r){var a=this.parseGroup("atom",r);if(a?.type==="internal"||this.mode==="text")return a;for(var n,s;;){this.consumeSpaces();var o=this.fetch();if(o.text==="\\limits"||o.text==="\\nolimits"){if(a&&a.type==="op"){var l=o.text==="\\limits";a.limits=l,a.alwaysHandleSupSub=!0}else if(a&&a.type==="operatorname")a.alwaysHandleSupSub&&(a.limits=o.text==="\\limits");else throw new ParseError("Limit controls must follow a math operator",o);this.consume()}else if(o.text==="^"){if(n)throw new ParseError("Double superscript",o);n=this.handleSupSubscript("superscript")}else if(o.text==="_"){if(s)throw new ParseError("Double subscript",o);s=this.handleSupSubscript("subscript")}else if(o.text==="'"){if(n)throw new ParseError("Double superscript",o);var u={type:"textord",mode:this.mode,text:"\\prime"},h=[u];for(this.consume();this.fetch().text==="'";)h.push(u),this.consume();this.fetch().text==="^"&&h.push(this.handleSupSubscript("superscript")),n={type:"ordgroup",mode:this.mode,body:h}}else if(uSubsAndSups[o.text]){var c=unicodeSubRegEx.test(o.text),f=[];for(f.push(new Token(uSubsAndSups[o.text])),this.consume();;){var d=this.fetch().text;if(!uSubsAndSups[d]||unicodeSubRegEx.test(d)!==c)break;f.unshift(new Token(uSubsAndSups[d])),this.consume()}var p=this.subparse(f);c?s={type:"ordgroup",mode:"math",body:p}:n={type:"ordgroup",mode:"math",body:p}}else break}return n||s?{type:"supsub",mode:this.mode,base:a,sup:n,sub:s}:a}parseFunction(r,a){var n=this.fetch(),s=n.text,o=functions[s];if(!o)return null;if(this.consume(),a&&a!=="atom"&&!o.allowedInArgument)throw new ParseError("Got function '"+s+"' with no arguments"+(a?" as "+a:""),n);if(this.mode==="text"&&!o.allowedInText)throw new ParseError("Can't use function '"+s+"' in text mode",n);if(this.mode==="math"&&o.allowedInMath===!1)throw new ParseError("Can't use function '"+s+"' in math mode",n);var{args:l,optArgs:u}=this.parseArguments(s,o);return this.callFunction(s,l,u,n,r)}callFunction(r,a,n,s,o){var l={funcName:r,parser:this,token:s,breakOnTokenText:o},u=functions[r];if(u&&u.handler)return u.handler(l,a,n);throw new ParseError("No function handler for "+r)}parseArguments(r,a){var n=a.numArgs+a.numOptionalArgs;if(n===0)return{args:[],optArgs:[]};for(var s=[],o=[],l=0;l<n;l++){var u=a.argTypes&&a.argTypes[l],h=l<a.numOptionalArgs;(a.primitive&&u==null||a.type==="sqrt"&&l===1&&o[0]==null)&&(u="primitive");var c=this.parseGroupOfType("argument to '"+r+"'",u,h);if(h)o.push(c);else if(c!=null)s.push(c);else throw new ParseError("Null argument, please report this as a bug")}return{args:s,optArgs:o}}parseGroupOfType(r,a,n){switch(a){case"color":return this.parseColorGroup(n);case"size":return this.parseSizeGroup(n);case"url":return this.parseUrlGroup(n);case"math":case"text":return this.parseArgumentGroup(n,a);case"hbox":{var s=this.parseArgumentGroup(n,"text");return s!=null?{type:"styling",mode:s.mode,body:[s],style:"text"}:null}case"raw":{var o=this.parseStringGroup("raw",n);return o!=null?{type:"raw",mode:"text",string:o.text}:null}case"primitive":{if(n)throw new ParseError("A primitive argument cannot be optional");var l=this.parseGroup(r);if(l==null)throw new ParseError("Expected group as "+r,this.fetch());return l}case"original":case null:case void 0:return this.parseArgumentGroup(n);default:throw new ParseError("Unknown group type as "+r,this.fetch())}}consumeSpaces(){for(;this.fetch().text===" ";)this.consume()}parseStringGroup(r,a){var n=this.gullet.scanArgument(a);if(n==null)return null;for(var s="",o;(o=this.fetch()).text!=="EOF";)s+=o.text,this.consume();return this.consume(),n.text=s,n}parseRegexGroup(r,a){for(var n=this.fetch(),s=n,o="",l;(l=this.fetch()).text!=="EOF"&&r.test(o+l.text);)s=l,o+=s.text,this.consume();if(o==="")throw new ParseError("Invalid "+a+": '"+n.text+"'",n);return n.range(s,o)}parseColorGroup(r){var a=this.parseStringGroup("color",r);if(a==null)return null;var n=/^(#[a-f0-9]{3,4}|#[a-f0-9]{6}|#[a-f0-9]{8}|[a-f0-9]{6}|[a-z]+)$/i.exec(a.text);if(!n)throw new ParseError("Invalid color: '"+a.text+"'",a);var s=n[0];return/^[0-9a-f]{6}$/i.test(s)&&(s="#"+s),{type:"color-token",mode:this.mode,color:s}}parseSizeGroup(r){var a,n=!1;if(this.gullet.consumeSpaces(),!r&&this.gullet.future().text!=="{"?a=this.parseRegexGroup(/^[-+]? *(?:$|\d+|\d+\.\d*|\.\d*) *[a-z]{0,2} *$/,"size"):a=this.parseStringGroup("size",r),!a)return null;!r&&a.text.length===0&&(a.text="0pt",n=!0);var s=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(a.text);if(!s)throw new ParseError("Invalid size: '"+a.text+"'",a);var o={number:+(s[1]+s[2]),unit:s[3]};if(!validUnit(o))throw new ParseError("Invalid unit: '"+o.unit+"'",a);return{type:"size",mode:this.mode,value:o,isBlank:n}}parseUrlGroup(r){this.gullet.lexer.setCatcode("%",13),this.gullet.lexer.setCatcode("~",12);var a=this.parseStringGroup("url",r);if(this.gullet.lexer.setCatcode("%",14),this.gullet.lexer.setCatcode("~",13),a==null)return null;var n=a.text.replace(/\\([#$%&~_^{}])/g,"$1");return{type:"url",mode:this.mode,url:n}}parseArgumentGroup(r,a){var n=this.gullet.scanArgument(r);if(n==null)return null;var s=this.mode;a&&this.switchMode(a),this.gullet.beginGroup();var o=this.parseExpression(!1,"EOF");this.expect("EOF"),this.gullet.endGroup();var l={type:"ordgroup",mode:this.mode,loc:n.loc,body:o};return a&&this.switchMode(s),l}parseGroup(r,a){var n=this.fetch(),s=n.text,o;if(s==="{"||s==="\\begingroup"){this.consume();var l=s==="{"?"}":"\\endgroup";this.gullet.beginGroup();var u=this.parseExpression(!1,l),h=this.fetch();this.expect(l),this.gullet.endGroup(),o={type:"ordgroup",mode:this.mode,loc:SourceLocation.range(n,h),body:u,semisimple:s==="\\begingroup"||void 0}}else if(o=this.parseFunction(a,r)||this.parseSymbol(),o==null&&s[0]==="\\"&&!implicitCommands.hasOwnProperty(s)){if(this.settings.throwOnError)throw new ParseError("Undefined control sequence: "+s,n);o=this.formatUnsupportedCmd(s),this.consume()}return o}formLigatures(r){for(var a=r.length-1,n=0;n<a;++n){var s=r[n],o=s.text;o==="-"&&r[n+1].text==="-"&&(n+1<a&&r[n+2].text==="-"?(r.splice(n,3,{type:"textord",mode:"text",loc:SourceLocation.range(s,r[n+2]),text:"---"}),a-=2):(r.splice(n,2,{type:"textord",mode:"text",loc:SourceLocation.range(s,r[n+1]),text:"--"}),a-=1)),(o==="'"||o==="`")&&r[n+1].text===o&&(r.splice(n,2,{type:"textord",mode:"text",loc:SourceLocation.range(s,r[n+1]),text:o+o}),a-=1)}}parseSymbol(){var r=this.fetch(),a=r.text;if(/^\\verb[^a-zA-Z]/.test(a)){this.consume();var n=a.slice(5),s=n.charAt(0)==="*";if(s&&(n=n.slice(1)),n.length<2||n.charAt(0)!==n.slice(-1))throw new ParseError(`\\verb assertion failed --
                    please report what input caused this bug`);return n=n.slice(1,-1),{type:"verb",mode:"text",body:n,star:s}}unicodeSymbols.hasOwnProperty(a[0])&&!symbols[this.mode][a[0]]&&(this.settings.strict&&this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Accented Unicode text character "'+a[0]+'" used in math mode',r),a=unicodeSymbols[a[0]]+a.slice(1));var o=combiningDiacriticalMarksEndRegex.exec(a);o&&(a=a.substring(0,o.index),a==="i"?a="":a==="j"&&(a=""));var l;if(symbols[this.mode][a]){this.settings.strict&&this.mode==="math"&&extraLatin.indexOf(a)>=0&&this.settings.reportNonstrict("unicodeTextInMathMode",'Latin-1/Unicode text character "'+a[0]+'" used in math mode',r);var u=symbols[this.mode][a].group,h=SourceLocation.range(r),c;if(ATOMS.hasOwnProperty(u)){var f=u;c={type:"atom",mode:this.mode,family:f,loc:h,text:a}}else c={type:u,mode:this.mode,loc:h,text:a};l=c}else if(a.charCodeAt(0)>=128)this.settings.strict&&(supportedCodepoint(a.charCodeAt(0))?this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Unicode text character "'+a[0]+'" used in math mode',r):this.settings.reportNonstrict("unknownSymbol",'Unrecognized Unicode character "'+a[0]+'"'+(" ("+a.charCodeAt(0)+")"),r)),l={type:"textord",mode:"text",loc:SourceLocation.range(r),text:a};else return null;if(this.consume(),o)for(var d=0;d<o[0].length;d++){var p=o[0][d];if(!unicodeAccents[p])throw new ParseError("Unknown accent ' "+p+"'",r);var v=unicodeAccents[p][this.mode]||unicodeAccents[p].text;if(!v)throw new ParseError("Accent "+p+" unsupported in "+this.mode+" mode",r);l={type:"accent",mode:this.mode,loc:SourceLocation.range(r),label:v,isStretchy:!1,isShifty:!0,base:l}}return l}}Parser.endOfExpression=["}","\\endgroup","\\end","\\right","&"];var parseTree=function t(r,a){if(!(typeof r=="string"||r instanceof String))throw new TypeError("KaTeX can only parse string typed expression");var n=new Parser(r,a);delete n.gullet.macros.current["\\df@tag"];var s=n.parse();if(delete n.gullet.macros.current["\\current@color"],delete n.gullet.macros.current["\\color"],n.gullet.macros.get("\\df@tag")){if(!a.displayMode)throw new ParseError("\\tag works only in display equations");s=[{type:"tag",mode:"text",body:s,tag:n.subparse([new Token("\\df@tag")])}]}return s},render=function t(r,a,n){a.textContent="";var s=renderToDomTree(r,n).toNode();a.appendChild(s)};typeof document<"u"&&document.compatMode!=="CSS1Compat"&&(typeof console<"u"&&console.warn("Warning: KaTeX doesn't work in quirks mode. Make sure your website has a suitable doctype."),render=function(){throw new ParseError("KaTeX doesn't work in quirks mode.")});var renderToString=function t(r,a){var n=renderToDomTree(r,a).toMarkup();return n},generateParseTree=function t(r,a){var n=new Settings(a);return parseTree(r,n)},renderError=function t(r,a,n){if(n.throwOnError||!(r instanceof ParseError))throw r;var s=buildCommon.makeSpan(["katex-error"],[new SymbolNode(a)]);return s.setAttribute("title",r.toString()),s.setAttribute("style","color:"+n.errorColor),s},renderToDomTree=function t(r,a){var n=new Settings(a);try{var s=parseTree(r,n);return buildTree(s,r,n)}catch(o){return renderError(o,r,n)}},renderToHTMLTree=function t(r,a){var n=new Settings(a);try{var s=parseTree(r,n);return buildHTMLTree(s,r,n)}catch(o){return renderError(o,r,n)}},version="0.16.27",__domTree={Span,Anchor,SymbolNode,SvgNode,PathNode,LineNode},katex$1={version,render,renderToString,ParseError,SETTINGS_SCHEMA,__parse:generateParseTree,__renderToDomTree:renderToDomTree,__renderToHTMLTree:renderToHTMLTree,__setFontMetrics:setFontMetrics,__defineSymbol:defineSymbol,__defineFunction:defineFunction,__defineMacro:defineMacro,__domTree};function FunctionInput({value:t,onChange:r,isValid:a,error:n}){const[s,o]=reactExports.useState(!1),[l,u]=reactExports.useState(!1),h=reactExports.useMemo(()=>{if(!t)return"";try{const c=toLatex(t);return katex$1.renderToString(`f(x) = ${c}`,{throwOnError:!1,displayMode:!1})}catch{return""}},[t]);return jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-800/50 rounded-xl border border-gray-200 dark:border-gray-700 p-4",children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Function f(x)"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("input",{type:"text",value:t,onChange:c=>r(c.target.value),placeholder:"e.g., x^2 + sin(x)",className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 dark:bg-gray-700 dark:text-white ${a?"border-gray-300 dark:border-gray-600 focus:ring-indigo-500 focus:border-indigo-500":"border-red-300 dark:border-red-500 focus:ring-red-500 focus:border-red-500"}`}),a&&jsxRuntimeExports.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-green-500",children:""})]}),!a&&n&&jsxRuntimeExports.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:n}),t&&h&&jsxRuntimeExports.jsx("div",{className:"mt-3 p-3 bg-gray-50 dark:bg-gray-700 rounded-lg text-center dark:text-white",dangerouslySetInnerHTML:{__html:h}}),jsxRuntimeExports.jsxs("div",{className:"mt-3 flex gap-2",children:[jsxRuntimeExports.jsx("button",{onClick:()=>o(!s),className:"text-sm text-indigo-600 dark:text-indigo-400 hover:text-indigo-800 dark:hover:text-indigo-300 underline",children:s?"Hide examples":"Show examples"}),jsxRuntimeExports.jsx("button",{onClick:()=>u(!l),className:"text-sm text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 underline",children:l?"Hide help":"Supported functions"})]}),s&&jsxRuntimeExports.jsx("div",{className:"mt-3 grid grid-cols-2 gap-2",children:EXAMPLE_FUNCTIONS.map((c,f)=>jsxRuntimeExports.jsxs("button",{onClick:()=>{r(c.expr)},className:"px-3 py-2 text-sm bg-gray-100 dark:bg-gray-700 hover:bg-indigo-100 dark:hover:bg-indigo-900 rounded-lg text-left transition-colors dark:text-white",children:[jsxRuntimeExports.jsx("span",{className:"font-mono",children:c.expr}),jsxRuntimeExports.jsxs("span",{className:"text-gray-500 dark:text-gray-400 ml-2",children:["(",c.label,")"]})]},f))}),l&&jsxRuntimeExports.jsxs("div",{className:"mt-3 p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[jsxRuntimeExports.jsx("h4",{className:"font-medium text-sm text-gray-700 dark:text-gray-200 mb-2",children:"Supported Functions & Constants"}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-2 gap-1 text-sm",children:SUPPORTED_FUNCTIONS.map((c,f)=>jsxRuntimeExports.jsxs("div",{className:"text-gray-600 dark:text-gray-300",children:[jsxRuntimeExports.jsx("code",{className:"text-indigo-600 dark:text-indigo-400",children:c.name}),jsxRuntimeExports.jsxs("span",{className:"text-gray-400 dark:text-gray-500 ml-1",children:["- ",c.description]})]},f))}),jsxRuntimeExports.jsx("p",{className:"mt-2 text-xs text-gray-500 dark:text-gray-400",children:"Use standard operators: + - * / ^ ( )"})]})]})}function DegreeSelector({value:t,onChange:r}){return jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-800/50 rounded-xl border border-gray-200 dark:border-gray-700 p-4",children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-3",children:"Quadrature Degree (n)"}),jsxRuntimeExports.jsx("input",{type:"range",min:"1",max:"10",value:t,onChange:a=>r(parseInt(a.target.value)),className:"w-full h-2 bg-gray-200 dark:bg-gray-600 rounded-lg appearance-none cursor-pointer accent-indigo-600"}),jsxRuntimeExports.jsx("div",{className:"flex justify-between mt-1 text-xs text-gray-500 dark:text-gray-400 px-1",children:[1,2,3,4,5,6,7,8,9,10].map(a=>jsxRuntimeExports.jsx("span",{className:`w-4 text-center ${a===t?"text-indigo-600 dark:text-indigo-400 font-bold":""}`,children:a},a))}),jsxRuntimeExports.jsxs("div",{className:"mt-3 text-center",children:[jsxRuntimeExports.jsx("span",{className:"text-3xl font-bold text-indigo-600 dark:text-indigo-400",children:t}),jsxRuntimeExports.jsx("span",{className:"text-gray-500 dark:text-gray-400 ml-2",children:t===1?"point":"points"})]}),jsxRuntimeExports.jsx("p",{className:"mt-2 text-xs text-gray-500 dark:text-gray-400 text-center",children:"Number of quadrature nodes for all methods"})]})}function IntervalSliders({valueA:t,valueB:r,onChangeA:a,onChangeB:n}){const[s,o]=reactExports.useState(t.toString()),[l,u]=reactExports.useState(r.toString()),[h,c]=reactExports.useState("");reactExports.useEffect(()=>{o(t.toFixed(2))},[t]),reactExports.useEffect(()=>{u(r.toFixed(2))},[r]);const f=p=>{o(p);const v=parseFloat(p);isNaN(v)||(v>=r?c("a must be less than b"):(c(""),a(v)))},d=p=>{u(p);const v=parseFloat(p);isNaN(v)||(v<=t?c("b must be greater than a"):(c(""),n(v)))};return jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-800/50 rounded-xl border border-gray-200 dark:border-gray-700 p-4",children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-3",children:"Integration Interval [a, b]"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-[1fr_auto_1fr] gap-3 items-end",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Lower (a)"}),jsxRuntimeExports.jsx("input",{type:"number",step:"0.1",value:s,onChange:p=>f(p.target.value),className:"w-full min-w-0 px-3 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 text-center font-mono"})]}),jsxRuntimeExports.jsx("span",{className:"text-gray-400 dark:text-gray-500 text-lg pb-2",children:"to"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Upper (b)"}),jsxRuntimeExports.jsx("input",{type:"number",step:"0.1",value:l,onChange:p=>d(p.target.value),className:"w-full min-w-0 px-3 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 text-center font-mono"})]})]}),h&&jsxRuntimeExports.jsx("p",{className:"mt-2 text-sm text-red-600 dark:text-red-400",children:h}),jsxRuntimeExports.jsx("p",{className:"mt-2 text-xs text-gray-400 dark:text-gray-500",children:"Tip: You can also drag the a and b points on the graph"})]})}function ResultsPanel({allResults:t,enabledMethods:r,expression:a,intervalA:n,intervalB:s,degree:o,referenceValue:l,onToggle:u,functionValidation:h}){const[c,f]=reactExports.useState("gaussLegendre"),d=r.includes(c)?c:r[0],p=reactExports.useMemo(()=>{if(!a)return"";try{const b=n.toFixed(2),_=s.toFixed(2);return katex$1.renderToString(`\\int_{${b}}^{${_}} f(x) \\, dx`,{throwOnError:!1,displayMode:!0})}catch{return""}},[a,n,s]);if(h&&!h.valid)return jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-800/50 rounded-xl border border-gray-200 dark:border-gray-700 p-5 space-y-5",children:[jsxRuntimeExports.jsx("div",{className:"text-center dark:text-white",children:jsxRuntimeExports.jsx("div",{className:"mb-2",dangerouslySetInnerHTML:{__html:p}})}),jsxRuntimeExports.jsx("div",{className:"p-4 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg",children:jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-3",children:[jsxRuntimeExports.jsx("svg",{className:"w-5 h-5 text-amber-500 dark:text-amber-400 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium text-amber-800 dark:text-amber-300",children:"Cannot compute quadrature"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-amber-700 dark:text-amber-400 mt-1",children:h.message})]})]})})]});if(!t)return jsxRuntimeExports.jsx("div",{className:"bg-white dark:bg-gray-800/50 rounded-xl border border-gray-200 dark:border-gray-700 p-4",children:jsxRuntimeExports.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center",children:"Enter a valid function to see results"})});const y=t[d];return jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-800/50 rounded-xl border border-gray-200 dark:border-gray-700 p-5 space-y-5",children:[jsxRuntimeExports.jsxs("div",{className:"text-center dark:text-white",children:[jsxRuntimeExports.jsx("div",{className:"mb-2",dangerouslySetInnerHTML:{__html:p}}),l!==null&&isFinite(l)&&jsxRuntimeExports.jsxs("div",{className:"mt-2 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 uppercase tracking-wide mb-1",children:"Reference Value (Adaptive Quadrature)"}),jsxRuntimeExports.jsx("div",{className:"text-xl font-semibold text-gray-700 dark:text-gray-200 font-mono",children:l.toFixed(8)})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100 mb-3",children:"Method Comparison"}),jsxRuntimeExports.jsx("div",{className:"overflow-x-auto rounded-lg border border-gray-200 dark:border-gray-700",children:jsxRuntimeExports.jsxs("table",{className:"w-full text-sm dark:text-gray-300",children:[jsxRuntimeExports.jsx("thead",{children:jsxRuntimeExports.jsxs("tr",{className:"bg-gray-50 dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700",children:[jsxRuntimeExports.jsx("th",{className:"px-3 py-2 text-left",children:"Method"}),jsxRuntimeExports.jsx("th",{className:"px-3 py-2 text-right",children:"Integral"}),jsxRuntimeExports.jsx("th",{className:"px-3 py-2 text-right",children:"Error"})]})}),jsxRuntimeExports.jsx("tbody",{children:METHOD_IDS.map((b,_)=>{const N=QUADRATURE_METHODS[b],M=r.includes(b),C=t?.[b],$=l!==null&&C?Math.abs(C.integral-l):null;return jsxRuntimeExports.jsxs("tr",{onClick:()=>u(b),className:`cursor-pointer transition-colors ${_%2===0?"bg-white dark:bg-gray-800":"bg-gray-50 dark:bg-gray-700"} ${M?"":"opacity-40"} hover:bg-gray-100 dark:hover:bg-gray-600`,children:[jsxRuntimeExports.jsx("td",{className:"px-3 py-2",children:jsxRuntimeExports.jsxs("span",{className:"inline-flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{className:"w-2.5 h-2.5 rounded-full flex-shrink-0 border-2",style:{backgroundColor:M?N.color:"transparent",borderColor:N.color}}),jsxRuntimeExports.jsx("span",{className:"font-medium",children:N.shortName})]})}),jsxRuntimeExports.jsx("td",{className:"px-3 py-2 text-right font-mono text-xs",children:M?C?.hasInvalidValues?jsxRuntimeExports.jsx("span",{className:"text-red-500",children:"NaN"}):C&&isFinite(C.integral)?C.integral.toFixed(8):"":""}),jsxRuntimeExports.jsx("td",{className:"px-3 py-2 text-right font-mono text-xs",children:M&&$!==null&&isFinite($)?$<1e-15?jsxRuntimeExports.jsx("span",{className:"text-green-600 dark:text-green-400",children:"< 10"}):$.toExponential(2):""})]},b)})})]})}),jsxRuntimeExports.jsx("p",{className:"mt-1.5 text-xs text-gray-400 dark:text-gray-500 text-center",children:"Click a method to toggle it on or off"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100 mb-3",children:"Quadrature Details"}),jsxRuntimeExports.jsx("div",{className:"flex gap-1 mb-3 overflow-x-auto",children:r.map(b=>{const _=QUADRATURE_METHODS[b],N=b===d;return jsxRuntimeExports.jsx("button",{onClick:()=>f(b),className:`flex-shrink-0 px-3 py-1.5 text-xs font-medium rounded-lg transition-colors ${N?"text-white":"text-gray-600 dark:text-gray-400 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600"}`,style:N?{backgroundColor:_.color}:void 0,children:_.shortName},b)})}),y&&y.details&&jsxRuntimeExports.jsx("div",{className:"overflow-x-auto rounded-lg border border-gray-200 dark:border-gray-700",children:jsxRuntimeExports.jsxs("table",{className:"w-full text-sm dark:text-gray-300",children:[jsxRuntimeExports.jsx("thead",{children:jsxRuntimeExports.jsxs("tr",{className:"bg-gray-50 dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700",children:[jsxRuntimeExports.jsx("th",{className:"px-2 py-1 text-left",children:"i"}),jsxRuntimeExports.jsx("th",{className:"px-2 py-1 text-right",children:" (std)"}),jsxRuntimeExports.jsx("th",{className:"px-2 py-1 text-right",children:"w"}),jsxRuntimeExports.jsx("th",{className:"px-2 py-1 text-right",children:"f(x)"}),jsxRuntimeExports.jsx("th",{className:"px-2 py-1 text-right",children:"wf(x)"})]})}),jsxRuntimeExports.jsx("tbody",{children:y.details.map((b,_)=>jsxRuntimeExports.jsxs("tr",{className:_%2===0?"bg-white dark:bg-gray-800":"bg-gray-50 dark:bg-gray-700",children:[jsxRuntimeExports.jsx("td",{className:"px-2 py-1 text-gray-600 dark:text-gray-400",children:b.index}),jsxRuntimeExports.jsx("td",{className:"px-2 py-1 text-right font-mono text-xs",children:b.originalNode.toFixed(6)}),jsxRuntimeExports.jsx("td",{className:"px-2 py-1 text-right font-mono text-xs",children:b.transformedWeight.toFixed(6)}),jsxRuntimeExports.jsx("td",{className:"px-2 py-1 text-right font-mono text-xs",children:isFinite(b.fValue)?b.fValue.toFixed(6):"NaN"}),jsxRuntimeExports.jsx("td",{className:"px-2 py-1 text-right font-mono text-xs font-medium",style:{color:QUADRATURE_METHODS[d]?.color},children:isFinite(b.contribution)?b.contribution.toFixed(6):"NaN"})]},_))}),jsxRuntimeExports.jsx("tfoot",{children:jsxRuntimeExports.jsxs("tr",{className:"font-medium",style:{backgroundColor:QUADRATURE_METHODS[d]?`${QUADRATURE_METHODS[d].color}15`:void 0},children:[jsxRuntimeExports.jsx("td",{colSpan:"4",className:"px-2 py-1 text-right",children:"Sum (Integral):"}),jsxRuntimeExports.jsx("td",{className:"px-2 py-1 text-right font-mono",style:{color:QUADRATURE_METHODS[d]?.color},children:isFinite(y.integral)?y.integral.toFixed(6):"NaN"})]})})]})})]}),jsxRuntimeExports.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 border-t border-gray-200 dark:border-gray-700 pt-4",children:[jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("strong",{className:"dark:text-gray-300",children:"Formula:"})," The integral is approximated as"]}),jsxRuntimeExports.jsx("div",{className:"mt-1 dark:text-white",dangerouslySetInnerHTML:{__html:katex$1.renderToString("\\int_a^b f(x)\\,dx \\approx \\frac{b-a}{2} \\sum_{i=1}^{n} w_i \\cdot f\\left(\\frac{b-a}{2}\\xi_i + \\frac{a+b}{2}\\right)",{throwOnError:!1,displayMode:!1})}}),jsxRuntimeExports.jsx("p",{className:"mt-2",children:"where  are the quadrature nodes on [-1, 1] and w are the corresponding weights. Different methods choose different nodes and weights."})]})]})}function DarkModeToggle(){const[t,r]=reactExports.useState(()=>{if(typeof window<"u"){const a=localStorage.getItem("darkMode");return a!==null?a==="true":window.matchMedia("(prefers-color-scheme: dark)").matches}return!1});return reactExports.useEffect(()=>{t?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("darkMode",t.toString())},[t]),jsxRuntimeExports.jsx("button",{onClick:()=>r(!t),className:"p-2 rounded-lg border border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors","aria-label":t?"Switch to light mode":"Switch to dark mode",children:t?jsxRuntimeExports.jsx("svg",{className:"w-5 h-5 text-yellow-500",fill:"currentColor",viewBox:"0 0 20 20",children:jsxRuntimeExports.jsx("path",{fillRule:"evenodd",d:"M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z",clipRule:"evenodd"})}):jsxRuntimeExports.jsx("svg",{className:"w-5 h-5 text-gray-700",fill:"currentColor",viewBox:"0 0 20 20",children:jsxRuntimeExports.jsx("path",{d:"M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"})})})}const EDUCATIONAL_CONTENT={gaussLegendre:{title:"Gauss-Legendre Quadrature",formula:"Nodes are roots of Pn(x), the Legendre polynomial of degree n.",explanation:"Gauss-Legendre is the gold standard for polynomial quadrature. By placing nodes at the roots of Legendre polynomials, it achieves the highest possible algebraic degree of exactness: an n-point rule integrates polynomials of degree up to 2n-1 exactly. This means it uses every degree of freedom (n nodes + n weights = 2n parameters) optimally.",convergence:"For smooth (analytic) functions, convergence is exponential: the error decreases faster than any polynomial in 1/n. This makes it far superior to equally spaced rules for smooth integrands.",keyFacts:["Exact for polynomials up to degree 2n-1","Nodes are symmetric about the origin","All weights are positive and sum to 2","Optimal among all n-point quadrature rules"]},equallySpaced:{title:"Equally Spaced (Composite Trapezoid)",formula:"Nodes at xi = -1 + 2i/(n-1). Endpoint weights = h/2, interior = h.",explanation:"The composite trapezoid rule divides the interval into equal subintervals and approximates the integral as the sum of trapezoids. While simple and intuitive, it is less efficient than Gauss-Legendre because the node positions are fixed rather than optimized.",convergence:"Error is O(h^2) where h = 2/(n-1) is the spacing. For smooth periodic functions, convergence can be surprisingly fast (exponential). However, for general smooth functions, the algebraic convergence is much slower than Gauss-Legendre.",keyFacts:["Exact only for linear functions (degree 1)","Error is O(h^2) = O(1/n^2) for smooth functions","Simple to understand and implement","Suffers from Runge phenomenon at high n for interpolation"]},chebyshev:{title:"Chebyshev Quadrature",formula:"Nodes at xi = cos((2k-1)pi/(2n)), roots of the Chebyshev polynomial Tn(x).",explanation:"Chebyshev quadrature uses Chebyshev polynomial roots as nodes. These nodes cluster near the endpoints of [-1, 1], which counteracts the Runge phenomenon that plagues equally spaced nodes. The weights are computed to integrate the interpolating polynomial exactly.",convergence:"For analytic functions, Chebyshev quadrature converges exponentially, often nearly as fast as Gauss-Legendre. The practical difference between Gauss-Legendre and Chebyshev is usually small, but Chebyshev has the advantage of nested point sets (useful for adaptive methods).",keyFacts:["Nodes cluster near endpoints (reduces interpolation error)","Avoids Runge phenomenon unlike equally spaced","Near-optimal polynomial interpolation","Exponential convergence for analytic functions"]},random:{title:"Random (Monte Carlo Style)",formula:"Nodes sampled uniformly from [-1, 1] with equal weights wi = 2/n.",explanation:"Random quadrature places nodes at random positions, providing a baseline comparison against structured methods. With equal weights, this is essentially a Monte Carlo estimator scaled to the interval. It demonstrates why carefully chosen node placement (as in Gauss-Legendre) matters.",convergence:"Expected error is O(1/sqrt(n)), which is much slower than any structured quadrature method. The error also varies between runs (different seeds give different accuracy). This makes random placement a useful educational contrast to show the value of mathematical optimization.",keyFacts:["Convergence O(1/sqrt(n))  much slower than structured methods","Not exact for any polynomial degree","Error varies with seed (not deterministic accuracy)","Useful baseline to demonstrate value of node optimization"]}};function AboutSection(){const[t,r]=reactExports.useState(null),a=n=>{r(s=>s===n?null:n)};return jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-800/50 rounded-xl border border-gray-200 dark:border-gray-700 p-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100 mb-3",children:"About the Methods"}),jsxRuntimeExports.jsx("div",{className:"space-y-1",children:METHOD_IDS.map(n=>{const s=QUADRATURE_METHODS[n],o=EDUCATIONAL_CONTENT[n],l=t===n;return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("button",{onClick:()=>a(n),className:"w-full flex items-center gap-2 px-3 py-2 rounded-lg text-left hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:[jsxRuntimeExports.jsx("span",{className:"w-2.5 h-2.5 rounded-full flex-shrink-0",style:{backgroundColor:s.color}}),jsxRuntimeExports.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 flex-1",children:o.title}),jsxRuntimeExports.jsx("svg",{className:`w-4 h-4 text-gray-400 transition-transform ${l?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),l&&jsxRuntimeExports.jsxs("div",{className:"px-3 pb-3 text-xs text-gray-600 dark:text-gray-300 space-y-2",children:[jsxRuntimeExports.jsx("p",{className:"font-mono text-gray-500 dark:text-gray-400 bg-gray-50 dark:bg-gray-700/50 rounded p-2",children:o.formula}),jsxRuntimeExports.jsx("p",{children:o.explanation}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("strong",{className:"text-gray-900 dark:text-gray-100",children:"Convergence:"}),jsxRuntimeExports.jsx("p",{className:"mt-0.5",children:o.convergence})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("strong",{className:"text-gray-900 dark:text-gray-100",children:"Key properties:"}),jsxRuntimeExports.jsx("ul",{className:"mt-1 space-y-0.5 list-disc list-inside text-gray-600 dark:text-gray-400",children:o.keyFacts.map((u,h)=>jsxRuntimeExports.jsx("li",{children:u},h))})]})]})]},n)})})]})}function App(){const{expression:t,degree:r,intervalA:a,intervalB:n,parsedFunction:s,enabledMethods:o,randomSeed:l,allResults:u,referenceValue:h,convergenceData:c,functionValidation:f,isValid:d,setExpression:p,setDegree:v,setIntervalA:y,setIntervalB:b,toggleMethod:_,setRandomSeed:N,reshuffleRandom:M}=useMultiQuadrature("sin(x)",4,0,Math.PI),C=reactExports.useCallback(($,w)=>{y($),b(w)},[y,b]);return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[jsxRuntimeExports.jsx("header",{className:"border-b border-gray-200 dark:border-gray-700 bg-white/80 dark:bg-gray-900/80 backdrop-blur-sm sticky top-0 z-50",children:jsxRuntimeExports.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-4 flex justify-between items-center",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-xl font-semibold text-gray-900 dark:text-white tracking-tight",children:"Quadrature Method Comparison"}),jsxRuntimeExports.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"Interactive numerical integration comparison"})]}),jsxRuntimeExports.jsx(DarkModeToggle,{})]})}),jsxRuntimeExports.jsx("main",{className:"max-w-[1920px] mx-auto px-4 sm:px-6 py-6",children:jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-[minmax(220px,2.3fr)_5fr_3.5fr] xl:grid-cols-[minmax(240px,2.3fr)_6fr_4fr] gap-4 lg:gap-6",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsx(FunctionInput,{value:t,onChange:p,isValid:s.success,error:s.error}),jsxRuntimeExports.jsx(DegreeSelector,{value:r,onChange:v}),jsxRuntimeExports.jsx(IntervalSliders,{valueA:a,valueB:n,onChangeA:y,onChangeB:b}),jsxRuntimeExports.jsx(AboutSection,{})]}),jsxRuntimeExports.jsx("div",{className:"flex flex-col",children:jsxRuntimeExports.jsx(Graph,{fn:s.fn,intervalA:a,intervalB:n,allResults:u,enabledMethods:o,onIntervalChange:C,isValid:d,degree:r,convergenceData:c,randomSeed:l,onRandomSeedChange:N,onReshuffle:M,functionValidation:f})}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(ResultsPanel,{allResults:u,enabledMethods:o,expression:t,intervalA:a,intervalB:n,degree:r,referenceValue:h,onToggle:_,functionValidation:f})})]})}),jsxRuntimeExports.jsx("footer",{className:"border-t border-gray-200 dark:border-gray-800 py-6 px-6 mt-8",children:jsxRuntimeExports.jsx("div",{className:"max-w-7xl mx-auto text-center text-sm text-gray-500 dark:text-gray-400",children:jsxRuntimeExports.jsx("p",{children:"Built with React, JSXGraph, and KaTeX"})})})]})}clientExports.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(reactExports.StrictMode,{children:jsxRuntimeExports.jsx(App,{})}));
